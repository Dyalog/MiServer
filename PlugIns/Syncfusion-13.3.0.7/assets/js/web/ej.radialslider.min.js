/*!
*  filename: ej.radialslider.min.js
*  version : 13.3.0.7
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.touch.min"],n):n()})(function(){(function(n,t,i){t.widget("ejRadialSliderBase","ej.RadialSliderBase",{defaults:{radius:200,endAngle:360,startAngle:0,ticks:[0,10,20,30,40,50,60,70,80,90,100],enableRoundOff:!0,value:10,strokeWidth:2,autoOpen:!0,enableAnimation:!0,cssClass:null,innerCircleImageClass:null,innerCircleImageUrl:null,showInnerCircle:!0,inline:!1},dataTypes:{renderMode:"enum",theme:"enum",ticks:"array",radius:"number",endAngle:"number",enableRoundOff:"boolean",strokeWidth:"number",enableAnimation:"boolean",cssClass:"string",innerCircleImageClass:"string",innerCircleImageUrl:"string",showInnerCircle:"boolean"},observables:["value"],observableArray:["ticks"],value:t.util.valueFunction("value"),ticks:t.util.valueFunction("ticks"),_initialization:function(){this.element.addClass(this.model.cssClass);this._svgLink="http://www.w3.org/2000/svg";this._startXY=this.model.radius-(this.model.inline?50:0);this._diameter=2*this.model.radius;this.model.radius=this._startXY;this._tickCount=this.ticks().length;this._labelSpacing=this.model.inline?0:200;this.element.css({width:this._diameter+this._labelSpacing,height:this._diameter+this._labelSpacing});this._radialSliderWrapper=t.buildTag("div",{},{},{"class":this._prefix+"radail-slider-wrapper"}).css({width:this._diameter+this._labelSpacing,height:this._diameter+this._labelSpacing});this.model.showInnerCircle&&(this._innerCircle=t.buildTag("div",{},{},{"class":this._prefix+"inner-circle"}).css({left:(this._diameter+this._labelSpacing)/2-(20+this.model.strokeWidth+1),top:(this._diameter+this._labelSpacing)/2-(20+this.model.strokeWidth+1),"border-width":this.model.strokeWidth+1}),this.model.innerCircleImageClass?this._innerCircle.addClass(this.model.innerCircleImageClass):this._innerCircle.css({"background-image":"url('"+this.model.innerCircleImageUrl+"')"}),this._radialSliderWrapper.append(this._innerCircle));this.element.append(this._radialSliderWrapper)},_renderControl:function(){var t,r;this._radialSVG=n(this._createSVGElements("svg",{id:this._prefix+"radial-slider-svg",width:this._diameter+this._labelSpacing,height:this._diameter+this._labelSpacing}));var i=this.model.inline?50:100,u=this.model.inline?45:95,f=this.model.inline?55:105;for(this._pathLineGroupElement=n(this._createSVGElements("g",{id:"outerLineCircle",transform:"translate("+i+","+i+")"})),this._lineDirection=this._outerLineCalculation(50,40,this._tickCount,!0,!0,"path"),this._textGroupElement=n(this._createSVGElements("g",{id:"outerTextCircle",transform:"translate("+u+","+f+")"})),this._circleGroupElement=n(this._createSVGElements("g",{id:"circlegroup",transform:"translate("+i+","+i+")"})),this._circlePath=this._createSVGElements("path",{id:"circlepath",d:this._circleArcDirection(this.model.endAngle),"class":this._prefix+"radialarcdefault",fill:"none","stroke-width":this.model.strokeWidth}),this._circleGroupElement.append(this._circlePath),this._circleGroupElement.append(this._radialCircle),this._outerTextDirection=this._outerTextCalculation(this._tickCount),t=0;t<this._tickCount+1;t++){if(r=t==0&&this.model.startAngle==0&&this.model.endAngle==360?this._tickCount-1:t,this._outerTextElement,t==this._tickCount)if(this.ticks()[0]==this.value())continue;else this._outerTextElement=this._createSVGElements("text",{"stroke-width":.5,x:this._outerTextDirection[t].X2,y:this._outerTextDirection[t].Y2,"class":this._prefix+"dynamic-text",textContent:this.value(),"text-anchor":this._outerTextDirection[t].textAlignment});else this._outerTextElement=this._createSVGElements("text",{"stroke-width":.5,x:this._outerTextDirection[t].X2,y:this._outerTextDirection[t].Y2,"class":this._prefix+"ticks-text",textContent:this.ticks()[r],"text-anchor":this._outerTextDirection[t].textAlignment});this._textGroupElement.append(this._outerTextElement)}this._pathLineElement=this._createSVGElements("path",{"class":this._prefix+"radial-needle",d:this._lineDirection,fill:"none","stroke-width":this.model.strokeWidth});this._pathLineGroupElement.append(this._pathLineElement);this._radialSliderWrapper.append(this._radialSVG.append(this._pathLineGroupElement).append(this._textGroupElement).append(this._circleGroupElement));this.model.autoOpen?this.show():this.hide()},_outerTextCalculation:function(n){var u=this.model.radius,i=this.model.startAngle,f=i+(this.model.endAngle-this.model.startAngle)/(n-1),s,t,r;this._point=(this.model.endAngle-this.model.startAngle)/(n-1);var e=f,h=e,o=[];for(s=0;s<n;s++)t={},r=i,i=i*Math.PI/180,f=f*Math.PI/180,t.X2=this._startXY+(u+30)*Math.cos(i),t.Y2=this._startXY+(u+30)*Math.sin(i),t.textAlignment=r<=270&&90<=r?"middle":"start",i=e,f=e+this._point,e+=this._point,o.push(t);return t={},r=this._startValueAngle,this._startValueAngle=this._startValueAngle*Math.PI/180,t.X2=this._startXY+(u+30)*Math.cos(this._startValueAngle),t.Y2=this._startXY+(u+30)*Math.sin(this._startValueAngle),t.textAlignment=r<=270&&90<=r?"middle":"start",o.push(t),o},_outerLineCalculation:function(n,t,i,r,u,f){var c=this.model.radius,s=this.model.startAngle,l=s+(this.model.endAngle-this.model.startAngle)/(i-1),v,o,e,b,k;this._point=(this.model.endAngle-this.model.startAngle)/(i-1);var h=l,tt=h,w=[];if(this._degPoint=[],this._degPoint.push(s),r)for(v=0;v<i;v++)o={},s=s*Math.PI/180,l=l*Math.PI/180,this._degPoint.push(h),f!="text"&&(o.X1=this._startXY+c*Math.cos(s),o.Y1=this._startXY+c*Math.sin(s)),o.X2=this._startXY+(c+10)*Math.cos(s),o.Y2=this._startXY+(c+10)*Math.sin(s),s=h,l=h+this._point,h+=this._point,f=="path"?this._directionLine.append([" M",o.X1,o.Y1,"L",o.X2,o.Y2].join(" ")):w.push(o);if(u)for(e=0;e<this.ticks().length;e++){var a=e+1,y=e==this.ticks().length-1?this.ticks()[this.ticks().length-1]+.5:this.ticks()[a],p=e==0?this.ticks()[e]-.5:this.ticks()[e],d=p<=0&&p>=this.value()?!0:!1,g=y<=0&&y<=this.value()?!0:!1,nt=d&&g?!0:p<=this.value()&&this.value()<y;nt&&(this.ticks()[e]!=this.value()?(b=this._point/(this.ticks()[a]-this.ticks()[e]),k=this.ticks()[a]-this.value(),this._startValueAngle=this._degPoint[a]-b*k,this._dynamicLineDirection(this._startValueAngle,this._tickCount-2,!1),this._inLineCalculation(this._startValueAngle,!1)):(this._startValueAngle=this._degPoint[e],this._inLineCalculation(this._startValueAngle,!1)))}return this._path=f=="path"?this._directionLine.toString():w,this._path},_dynamicOuterLine:function(n,t,i,r,u){var f=r*Math.PI/180;return{x:n+i*Math.cos(f),y:t+i*(u?-Math.sin(f):Math.sin(f))}},_dynamicLineDirection:function(n,t,i){var r={},u=this._dynamicOuterLine(this._startXY,this._startXY,this.model.radius,n,i),f=this._dynamicOuterLine(this._startXY,this._startXY,this.model.radius+10,n,i);return r.X1=u.x,r.Y1=u.y,r.X2=f.x,r.Y2=f.y,this._isTapSelected=!0,this._directionLine.insert(t+2,[" M",r.X1,r.Y1,"L",r.X2,r.Y2].join(" ")),this._directionLine.toString()},_inLineCalculation:function(n,t){var i={},r=this._polarToCartesian(this._startXY,this._startXY,this.model.radius-5,n,t);return i.X1=this._startXY,i.Y1=this._startXY,i.X2=r.x,i.Y2=r.y,this._directionLine.append([" M",i.X1,i.Y1,"L",i.X2,i.Y2].join(" ")),this._directionLine.toString()},_dynamicLineCalculation:function(n,t,i,r,u,f,e){var o,s,h;return this.line={},o=this.model.radius,this.line.X1=this._startXY,this.line.Y1=this._startXY,s=Math.cos(n*Math.PI/180),h=-Math.sin(n*Math.PI/180),this.line.X2=this._startXY+(o-5)*s,this.line.Y2=this._startXY+(o-5)*h,e&&this._dynamicLineDirection(n,u,!0),t&&this._directionLine.append([" M",this.line.X1,this.line.Y1,"L",this.line.X2,this.line.Y2].join(" ")),r&&this._directionLine.insert(u+3,[" M",this.line.X1,this.line.Y1,"L",this.line.X2,this.line.Y2].join(" ")),this._directionLine.toString()},_getStringBuilder:function(){var n=[],t=0;return{append:function(i){return n[t++]=i,this},remove:function(i,r,u){return t=t-(u||1),n.splice(i,r||1),this},insert:function(i,r){return n.splice(i,0,r),t++,this},toString:function(t){return n.join(t||"")}}},_polarToCartesian:function(n,t,i,r,u){var f=r*Math.PI/180;return{x:n+i*Math.cos(f),y:t+i*Math.sin(u?-f:f)}},_circleArcDirection:function(n){var i=this.model.startAngle,t=.5*Math.min(this._diameter-(this.model.inline?100:0),this._diameter-(this.model.inline?100:0)),r=this._polarToCartesian(this._startXY,this._startXY,t,i),u=this._polarToCartesian(this._startXY,this._startXY,t,n);return ArcSweep=n-i<=180?"0":"1",["M",r.x,r.y,"A",t,t,0,ArcSweep,1,u.x,u.y-1].join(" ")},_overNeedleMoveHandler:function(t){var u,f,e,o;t.preventDefault();var r=document.getElementById(this._prefix+"radial-slider-svg").getBoundingClientRect(),s=t.clientY,h=t.clientX,c=r.top+r.width/2,l=r.left+r.width/2;this._dynamicAngleCalculation(l,h,c,s);this._angle>360-this.model.endAngle&&this._angle<360-this.model.startAngle&&(this.line={},u=this.model.radius,this.line.X1=this._startXY,this.line.Y1=this._startXY,f=Math.cos(this._angle*Math.PI/180),e=-Math.sin(this._angle*Math.PI/180),this.line.X2=this._startXY+(u-5)*f,this.line.Y2=this._startXY+(u-5)*e,this._overLine!=i?n(this._overLine).attr({d:[" M",this.line.X1,this.line.Y1,"L",this.line.X2,this.line.Y2].join(" "),"stroke-width":this.model.strokeWidth==1?this.model.strokeWidth-.5:this.model.strokeWidth-1}):this._overLine=this._createSVGElements("path",{"class":this._prefix+"needle-over",d:[" M",this.line.X1,this.line.Y1,"L",this.line.X2,this.line.Y2].join(" "),"stroke-width":this.model.strokeWidth==1?this.model.strokeWidth-.5:this.model.strokeWidth-1}),this._pathLineGroupElement.append(this._overLine),this._isNeedleOver=!0,o=this._ticksCalculation(),this.model.mouseover&&this._trigger("mouseover",{value:o,selectedValue:this.value()}))},_needleMoveHandler:function(t){var i=document.getElementById(this._prefix+"radial-slider-svg").getBoundingClientRect(),e=t.clientY,o=t.clientX,s=i.top+i.width/2,h=i.left+i.width/2,r,u,f;this._dynamicAngleCalculation(h,o,s,e);this._angle>360-this.model.endAngle&&this._angle<360-this.model.startAngle&&(n(this._overLine).remove(),this._lineAngleCalculation(),r=this._isTapSelected?this._tickCount+1:this._tickCount,this._directionLine.remove(r,1,1),this._dynamicLineCalculation(this._angle,!1,!0,!0,this._tickCount,this._tickCount+1,!1),n(this._pathLineElement).attr("d",this._directionLine.toString()),u=this._isAppView()?this.model.touchMove:this.model.slide,u&&(f=this._ticksCalculation(),this._trigger("slide",{value:f,selectedValue:this.value()})),this._needleMove=!0)},_tapHandlerEvent:function(t){var u=document.getElementById(this._prefix+"radial-slider-svg").getBoundingClientRect(),o=t.clientY,s=t.clientX,h=u.top+u.width/2,c=u.left+u.width/2,f,e,r,l;this._dynamicAngleCalculation(c,s,h,o);this._angle>360-this.model.endAngle&&this._angle<360-this.model.startAngle&&(n(this._overLine).remove(),this._lineAngleCalculation(!0),this._previousAngle=this._angle,this._pathBeforeAddlength=this._tickCount+1,this._pathAfterAddLength=this._directionLine.toString().replace(/[^M]/g,"").length,this._pathBeforeAddlength<this._pathAfterAddLength?(f=this._isTapSelected?2:1,this._directionLine.remove(this._tickCount,f,f)):this._directionLine.remove(this._tickCount,1),this._dynamicLineCalculation(this._angle,!1,!0,!0,this._tickCount,this._tickCount+1,!0),n(this._textGroupElement).find("[class="+this._prefix+"dynamic-text]").length>0&&this._textGroupElement.find("[class="+this._prefix+"dynamic-text]").remove(),e=(this._dynamicAngle-this.model.startAngle-(360-this.model.endAngle)/((this.model.endAngle-this.model.startAngle)/(this.ticks().length-1)))/((this.model.endAngle-this.model.startAngle)/(this.ticks().length-1)),this._isTicksControl()?(r=this._ticksCalculation(),this._outerTextElement=this._createSVGElements("text",{"stroke-width":.5,x:this.line.X2,y:this.line.Y2,"class":this._prefix+"dynamic-text",textContent:r,"text-anchor":this.line.textAlignment}),this._textGroupElement.append(this._outerTextElement)):r=this.value(this.ticks()[e.toFixed()]),l=r!=i?r:this.value(),this.model.change&&this._trigger("change",{value:r,oldValue:this.value()}),this._needleStop&&this.model.stop&&this._trigger("stop",{value:r}),this.value(r),n(this._pathLineElement).attr("d",this._directionLine.toString()),this._needleStop=!0,this._needleMove=!1)},_lineAngleCalculation:function(n){var t=(this._dynamicAngle-this.model.startAngle-(360-this.model.endAngle)/((this.model.endAngle-this.model.startAngle)/(this.ticks().length-1)))/((this.model.endAngle-this.model.startAngle)/(this.ticks().length-1)),e=this.ticks()[parseInt(t)],o=this.ticks()[parseInt(t)+1],r=o-e,i,s,u,f;this._degPoint.splice(this.ticks().length,this.ticks().length+1);this._degPoint.push(this._degPoint[this._degPoint.length-1]+this._point);i=(this._degPoint[parseInt(t)+1]-this._degPoint[parseInt(t)]-(this._degPoint[parseInt(t)+1]-this._dynamicAngle))/(this._point/r);s=parseInt(t)!=0?this._degPoint[parseInt(t)]:this._degPoint[parseInt(t)];this.model.enableRoundOff&&n?(f=parseFloat(i.toFixed(2)),i=parseInt(i.toFixed()),u=r==.5&&f>=.25?this._point*1:this._point/r*i):u=this._point/r*parseFloat(i.toFixed(2));this._angle=360-this._degPoint[parseInt(t)]-u},_isTicksControl:function(){var t=(this._dynamicAngle-this.model.startAngle-(360-this.model.endAngle)/((this.model.endAngle-this.model.startAngle)/(this.ticks().length-1)))/((this.model.endAngle-this.model.startAngle)/(this.ticks().length-1)),f=this.ticks()[parseInt(t)],e=this.ticks()[parseInt(t)+1],r=e-f,i,u;return this._degPoint.splice(this.ticks().length,this.ticks().length+1),this._degPoint.push(this._degPoint[this._degPoint.length-1]+this._point),i=(this._degPoint[parseInt(t)+1]-this._degPoint[parseInt(t)]-(this._degPoint[parseInt(t)+1]-this._dynamicAngle))/(this._point/r),u=this.model.enableRoundOff?parseInt(i.toFixed())==0||parseInt(i.toFixed())==r?!1:!0:n.inArray(this._angle,this._degPoint)>-1?!1:!0,u},_ticksCalculation:function(){var t=(this._dynamicAngle-this.model.startAngle-(360-this.model.endAngle)/((this.model.endAngle-this.model.startAngle)/(this.ticks().length-1)))/((this.model.endAngle-this.model.startAngle)/(this.ticks().length-1)),r=this.ticks()[parseInt(t)],o=this.ticks()[parseInt(t)+1],s=o-r,u=this._angle,f=this._angle*(Math.PI/180),e,n,i,h;return this.line.X2=this._startXY+(this.model.radius+30)*Math.cos(f),this.line.Y2=this._startXY+(this.model.radius+30)*Math.sin(-f),this.line.textAlignment=u<=270&&90<=u?"middle":"start",e=parseInt(t)!=0?this._degPoint[parseInt(t)]:this._degPoint[parseInt(t)],n=(this._dynamicAngle-e)/(this._point/s),this.model.enableRoundOff?(h=parseFloat(n.toFixed(1).substr(1,3)),n=parseInt(n.toFixed()),i=r+n):(i=r+parseFloat(n.toFixed(2)),i=parseFloat(i.toFixed(2))),i},_dynamicAngleCalculation:function(n,t,i,r){var u=Math.atan2(r-i,t-n);this._angle=(360-u*180/Math.PI)%360;this._dynamicAngle=(360+u*180/Math.PI)%360},_createSVGElements:function(t,i){var r=document.createElementNS(this._svgLink,t);return n.each(i,function(n,t){n=="xlink:href"&&r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t);n!="textContent"?r.setAttribute(n,t):r.textContent=t}),r},show:function(){this.model.enableAnimation&&(this.element.removeClass(this._prefix+"slider-hide").addClass(this._prefix+"slider-show"),this._radialSVG.attr("class","").attr("class",this._prefix+"radialslider-svg-show"));this.element.css("display","block")},hide:function(){var n=this;this.model.enableAnimation?(this.element.removeClass(this._prefix+"slider-show").addClass(this._prefix+"slider-hide"),this._radialSVG.attr("class","").attr("class",this._prefix+"radialslider-svg-hide"),setTimeout(function(){n.element.css("display","none")},400)):n.element.css("display","none")},_setModel:function(){this._refresh()},_clearElement:function(){this.element.removeAttr("class");this.element.html(this._orgEle.html())},_destroy:function(){this._wireEvents(!0);this._clearElement()},_isAppView:function(){return this._prefix=="e-m-"?!0:!1}})})(jQuery,Syncfusion),function(n,t,i){t.widget("ejRadialSlider","ej.RadialSlider",{_setFirst:!0,validTags:["div"],_rootCSS:"e-radialslider",defaults:{stop:null,slide:null,start:null,change:null,mouseover:null,create:null,destroy:null},_init:function(){this._orgEle=this.element.clone();this._renderEJControl()},_renderEJControl:function(){this._prefix="e-";this._directionLine=this._getStringBuilder();this._initialization();this._renderControl();this._wireEvents(!1)},_refresh:function(){this._destroy();this.element.addClass("e-radialslider e-js");this._renderEJControl()},_createDelegates:function(){this._touchStartDelegate=n.proxy(this._touchStartHandler,this);this._needleMoveDelegate=n.proxy(this._needleMoveHandler,this);this._touchEndDelegate=n.proxy(this._touchEndHandler,this);this._overNeedleMoveDelegate=n.proxy(this._overNeedleMoveHandler,this);this._mouseOutDelegate=n.proxy(this._mouseOutHandler,this);this._enterMouseDelegates=n.proxy(this._entermouse,this)},_wireEvents:function(n){var i=n?"unbind":"bind";this._createDelegates();t.listenEvents([this._radialSVG,this._radialSVG,this._radialSVG,this._radialSVG],["mouseup","mousedown","mouseenter","mouseleave"],[this._touchEndDelegate,this._touchStartDelegate,this._enterMouseDelegates,this._mouseOutDelegate],!1)},_entermouse:function(){t.listenEvents([this._radialSVG],["mousemove"],[this._overNeedleMoveDelegate],!1)},_mouseOutHandler:function(r){if(r.preventDefault(),this._radialSVG.has(r.target).length==0&&this._needleMove){t.listenEvents([this._radialSVG],["mousemove"],[this._needleMoveDelegate],!0);var u=this._previousAngle!=i?this._previousAngle:this._startValueAngle;this._pathAfterAddLength=this._directionLine.toString().replace(/[^M]/g,"").length;this._directionLine.remove(this._pathAfterAddLength-1,1);this._inLineCalculation(u,!0);n(this._pathLineElement).attr("d",this._directionLine.toString());this._needleMove=!1}n(this._overLine).remove()},_touchEndHandler:function(n){t.listenEvents([this._radialSVG],["mousemove"],[this._needleMoveDelegate],!0);this._tapHandlerEvent(n)},_touchStartHandler:function(n){this._needleStop=!1;n.preventDefault();this.model.start&&this._trigger("start",{value:this.value()});t.listenEvents([this._radialSVG],["mousemove"],[this._needleMoveDelegate],!1)}});n.extend(!0,t.RadialSlider.prototype,t.RadialSliderBase.prototype)}(jQuery,Syncfusion)});