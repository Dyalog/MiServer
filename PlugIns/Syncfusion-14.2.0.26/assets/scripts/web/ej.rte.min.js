/*!
*  filename: ej.rte.min.js
*  version : 14.2.0.26
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["jquery-easing","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.scroller.min","./../common/ej.draggable.min","./../common/ej.globalize.min","./ej.button.min","./ej.togglebutton.min","./ej.splitbutton.min","./ej.checkbox.min","./ej.radiobutton.min","./ej.dropdownlist.min","./ej.dialog.min","./ej.toolbar.min","./ej.editor.min","./ej.menu.min","./ej.tab.min","./ej.slider.min","./ej.treeview.min","./ej.uploadbox.min","./ej.splitter.min","./ej.colorpicker.min","./ej.fileexplorer.min","./ej.grid.min"],n):n()})(function(){(function(n,t,r){t.widget("ejRTE","ej.RTE",{element:null,model:null,_rootCSS:"e-rte",validTags:["textarea"],_addOnPersist:["value","height","width"],_setFirst:!1,_requiresID:!0,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{allowEditing:!0,isResponsive:!1,allowKeyboardNavigation:!0,enableTabKeyNavigation:!0,cssClass:"",height:"370",width:"786",enabled:!0,htmlAttributes:null,externalCSS:null,enableXHTML:!1,validationRules:null,validationMessage:null,maxLength:7e3,minWidth:"400",maxWidth:null,minHeight:"280",maxHeight:null,showToolbar:!0,showFooter:!1,showHtmlSource:!1,showWordCount:!0,showCharCount:!0,showHtmlTagInfo:!0,showClearAll:!1,iframeAttributes:null,showClearFormat:!0,showContextMenu:!0,showFontOption:!0,autoFocus:!1,enableHtmlEncode:!1,showDimensions:!1,showRoundedCorner:!1,locale:"en-US",name:"",tools:{formatStyle:["format"],edit:[],style:["bold","italic","underline","strikethrough"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],lists:["unorderedList","orderedList"],indenting:["outdent","indent"],doAction:["undo","redo"],links:["createLink","removeLink"],images:["image"],media:["video"],tables:["createTable","addRowAbove","addRowBelow","addColumnLeft","addColumnRight","deleteRow","deleteColumn","deleteTable"],view:["fullScreen"],customTools:[],print:[],customOrderList:[],customUnOrderList:[],font:[],clipboard:[],clear:[],effects:[],casing:[]},toolsList:["formatStyle","font","style","effects","alignment","lists","indenting","clipboard","doAction","clear","links","images","media","tables","casing","customTools","view","print","edit"],colorCode:["000000","FFFFFF","C4C4C4","ADADAD","595959","262626","4f81bd","dbe5f1","b8cce4","95b3d7","366092","244061","c0504d","f2dcdb","e5b9b7","d99694","953734","632423","9bbb59","ebf1dd","d7e3bc","c3d69b","76923c","4f6128","8064a2","e5e0ec","ccc1d9","b2a2c7","5f497a","3f3151","f79646","fdeada","fbd5b5","fac08f","e36c09","974806"],format:[{text:"Paragraph",value:"<p>",spriteCssClass:"e-paragraph"},{text:"Quotation",value:"<blockquote>",spriteCssClass:"e-quotation"},{text:"Heading 1",value:"<h1>",spriteCssClass:"e-h1"},{text:"Heading 2",value:"<h2>",spriteCssClass:"e-h2"},{text:"Heading 3",value:"<h3>",spriteCssClass:"e-h3"},{text:"Heading 4",value:"<h4>",spriteCssClass:"e-h4"},{text:"Heading 5",value:"<h5>",spriteCssClass:"e-h5"},{text:"Heading 6",value:"<h6>",spriteCssClass:"e-h6"}],fontName:[{text:"Segoe UI",value:"Segoe UI"},{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"Courier New,Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"Lucida Console,Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"Times New Roman,Times,serif"},{text:"Trebuchet MS",value:"Trebuchet MS,Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1",value:"1"},{text:"2 (10pt)",value:"2"},{text:"3 (12pt)",value:"3"},{text:"4 (14pt)",value:"4"},{text:"5 (18pt)",value:"5"},{text:"6 (24pt)",value:"6"},{text:"7 (36pt)",value:"7"}],tableRows:8,tableColumns:10,colorPaletteRows:6,colorPaletteColumns:6,showCustomTable:!0,value:null,undoStackLimit:50,enableResize:!0,enablePersistence:!1,enableRTL:!1,autoHeight:!1,zoomStep:"0.05",imageBrowser:{filePath:"",extensionAllow:"*.png,*.gif,*.jpg,*.jpeg",ajaxAction:"",ajaxSettings:""},fileBrowser:{filePath:"",extensionAllow:"*.doc,*.docx,*.pdf,*.txt",ajaxAction:""},change:null,execute:null,keydown:null,keyup:null,create:null,destroy:null,contextMenuClick:null,preRender:null,select:null},dataTypes:{enabled:"boolean",autoFocus:"boolean",enableHtmlEncode:"boolean",autoHeight:"boolean",enableXHTML:"boolean",isResponsive:"boolean",enablePersistence:"boolean",showRoundedCorner:"boolean",showCustomTable:"boolean",enableResize:"boolean",showDimensions:"boolean",showFontOption:"boolean",showClearFormat:"boolean",showClearAll:"boolean",showHtmlTagInfo:"boolean",showWordCount:"boolean",showCharCount:"boolean",showHtmlSource:"boolean",allowKeyboardNavigation:"boolean",enableTabKeyNavigation:"boolean",allowEditing:"boolean",showToolbar:"boolean",showFooter:"boolean",showContextMenu:"boolean",enableRTL:"boolean",toolsList:"array",colorCode:"array",format:"data",fontName:"data",fontSize:"data",htmlAttributes:"data",iframeAttributes:"data",tools:{formatStyle:"array",font:"array",edit:"array",style:"array",effects:"array",alignment:"array",lists:"array",indenting:"array",clipboard:"array",doAction:"array",clear:"array",links:"array",media:"array",images:"array",tables:"array",casing:"array",customTools:"array",view:"array",print:"array",customOrderList:"array",customUnOrderList:"array"}},_rteIconsList:{format:"format",bold:"e-bold_01",italic:"e-italic_01",underline:"e-underline_01",strikethrough:"e-strikethrough_01",justifyLeft:"e-align-left_01",justifyCenter:"e-align-center_01",justifyRight:"e-align-right_01",justifyFull:"e-align-justify_01",unorderedList:"e-bullets_01",orderedList:"orderedList",outdent:"outdent",indent:"indent",undo:"undo",redo:"redo",createLink:"e-link_01",removeLink:"e-unlink_01",image:"e-image",video:"e-video",createTable:"e-table_02",addRowAbove:"e-insert-row-above_02",addRowBelow:"e-insert-row-below_02",addColumnLeft:"e-insert-column-left_02",addColumnRight:"e-insert-column-right_02",deleteRow:"e-delete-row_01",deleteColumn:"e-delete-column_01",deleteTable:"deleteTable",fullScreen:"fullScreen",superscript:"e-superscript_01",subscript:"e-subscript_01",upperCase:"e-uppercase_01",lowerCase:"e-lowercase_01",zoomIn:"e-zoom-in",zoomOut:"e-zoom-out",print:"print",findAndReplace:"findAndReplace",cut:"e-cut_01",copy:"e-copy_02",paste:"e-paste_01",clearFormat:"clearFormat",clearAll:"e-delete_05",fontName:"fontName",fontSize:"fontSize",fontColor:"e-font",backgroundColor:"e-background-color",rteResize:"e-resize-handle",rteSource:"e-file-code",customTableImage:"e-table",resize:"e-full-screen-collapse_01",maximize:"e-full-screen-expand_01",openLink:"",deleteTables:"",insertTable:"",tableProperties:"",imageProperties:""},observables:["value"],value:t.util.valueFunction("value"),_setModel:function(i){var r,f,e,s,c,h,u,o;this._isInteraction=!1;for(r in i){switch(r){case"allowEditing":this._enableEdit(i[r]);break;case"autoFocus ":this.model.autoFocus=i[r];i[r]&&this._focus();break;case"showToolbar":i[r]?t.isNullOrUndefined(this._rteToolbar)?this._renderToolBar():this._rteToolbar.show():this._rteToolbar.hide();break;case"showFooter":this.model.showFooter=i[r];i[r]?t.isNullOrUndefined(this._rteFooter)?this._renderFooter():this._rteFooter.show():this._rteFooter.hide();break;case"isResponsive":this.model.isResponsive=i[r];this._renderToolBarList();f=n(this._rteIframe).outerHeight();e=n(this._rteToolbar).outerHeight();n(this._rteWapper).height(f+e);t.isNullOrUndefined(n(this._rteFooter))||(s=n(this._rteFooter).outerHeight(),n(this._rteWapper).height(f+s+e));break;case"enabled":this._disabled(i[r]);break;case"height":this.model.height=i[r];this._rteWapper.height(i[r]);break;case"width":this.model.height=i[r];this._rteWapper.css("width",i[r]);break;case"cssClass":this._changeSkin(i[r]);break;case"showHtmlSource":this._footerElement("div.e-rte-source",i[r]);break;case"showHtmlTagInfo":this._footerElement("div.e-rte-htmltaginfo",i[r]);break;case"showWordCount":this.model.showWordCount=i[r];this._createCountElement(i[r],this._wordCount);break;case"showCharCount":this.model.showCharCount=i[r];this._createCountElement(i[r],this._charCount);break;case"showClearAll":this._footerElement("div.clearAll",i[r]);break;case"showClearFormat":this._footerElement("div.clearFormat",i[r]);break;case"enableResize":this._footerElement("div.e-rte-resize",i[r]);break;case"fontName":this._fontStyleDDL.ejDropDownList({dataSource:i[r]});break;case"fontSize":this._fontSizeDDL.ejDropDownList({dataSource:i[r]});break;case"format":this._formatDDL.ejDropDownList({dataSource:i[r]});break;case"value":this._getDocument().body.innerHTML=t.util.getVal(i[r]);c={text:this._getText(),htmlText:this.getHtml()};this._onChange();break;case"showDimensions":i[r]?(this._imgDialog.find("div.e-rte-imgdimensions").show(),this._imgDialog.find("div.e-rte-videoDimensions").show()):(this._imgDialog.find("div.e-rte-imgdimensions").hide(),this._imgDialog.find("div.e-rte-videoDimensions").hide());break;case"showFontOption":i[r]?this._rteWapper.find("ul.e-rte-fontgroup").show():this._rteWapper.find("ul.e-rte-fontgroup").hide();break;case"locale":this.model.locale=i[r];h=this.model;this.element.ejRTE("destroy").ejRTE(h);break;case"tableRows":this.model.tableRows=i[r];u=this._createTable.find("div.e-rte-table").html("");this._drawTable(u);break;case"iframeAttributes":this._updateIframeSkin(i[r]);break;case"tableColumns":this.model.tableColumns=i[r];u=this._createTable.find("div.e-rte-table").html("");this._drawTable(u);break;case"showCustomTable":o=this._createTable.find("div.customtable-group");i[r]?t.isNullOrUndefined(this._customTableDialog)?this._createCustomTable():o.show():o.hide();break;case"colorPaletteRows":this.model.colorPaletteRows=i[r];this._updateColorPalette();break;case"colorPaletteColumns":this.model.colorPaletteColumns=i[r];this._updateColorPalette();break;case"colorCode":this.model.colorCode=i[r];this._updateColorPalette();break;case"name":this.model.name=i[r];this._checkNameAttr();break;case"showContextMenu":this.model.showContextMenu=i[r];this._showHideContextMenu();break;case"enableRTL":this._enableRTL(i[r]);break;case"htmlAttributes":this._addAttr(i[r]);break;case"showRoundedCorner":this._roundedCorner(i[r]);break;case"validationRules":this.element.closest("form").length!=0&&(this.model.validationRules!=null&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[r],this.model.validationRules!=null&&(this._initValidator(),this._setValidation()));break;case"validationMessage":this.element.closest("form").length!=0&&(this.model.validationMessage=i[r],this.model.validationRules!=null&&this.model.validationMessage!=null&&(this._initValidator(),this._setValidation()));break;case"autoHeight":this.model.autoHeight=i[r];this._setAutoHeight()}r!="locale"&&this._setIframeHeight()}this._updateCount()},_init:function(){t.isNullOrUndefined(this.element)||this.element[0].type!="textarea"||(this.element.hide(),this._initialize()._render(),this.model.allowEditing&&this._wireEvents(),this._updateIframeSkin(this.model.iframeAttributes),this.model.enabled==!1&&this._disabled(this.model.enabled),this._addAttr(this.model.htmlAttributes),this.model.autoFocus&&this._focus(),this.model.enableHtmlEncode&&this.value(this._encode(this._decode(this.value()))),this.model.showToolbar&&(this.disableToolbarItem("removeLink"),t.isNullOrUndefined(this._getWindow())||this._updateIndentStatus()),this.model.enableRTL&&this._enableRTL(!0),this.model.externalCSS&&this._addCssToIframe(this.model.externalCSS),this.wrapper=this._rteWapper,this.model.validationRules!=null&&(this._initValidator(),this._setValidation()),this.model.showContextMenu&&this._showHideContextMenu(),this._isInteraction=!0)},_hideContextMenuByItem:function(t){for(index1=0;index1<n(this._textMenuObj.element).children("li").length;index1++)n.inArray(n(n(this._textMenuObj.element).children("li")[index1]).attr("id"),t)!=-1?n(n(this._textMenuObj.element).children("li")[index1]).show():n(n(this._textMenuObj.element).children("li")[index1]).hide()},_filterMenuItems:function(i){var r=this._isIE()?this._currentSelNode:this._getSelectedNode(),u=this._saveSelection().commonAncestorContainer;t.isNullOrUndefined(r)||t.isNullOrUndefined(r.tagName)||r.tagName.toLowerCase()!=="img"&&i.target.tagName.toLowerCase()!="img"?!t.isNullOrUndefined(r)&&n(r).closest("table").length?(this._hideContextMenuByItem(n(r).closest("a").length?this._contextType.table_hyper:this._contextType.table),this._contextValidation(u,i)):!t.isNullOrUndefined(r)&&n(r).closest("a").length?(this._hideContextMenuByItem(this._contextType.hyperlink),this._contextValidation(u,i)):this._isIE8()?(this._hideContextMenuByItem(this._contextType.text),this._updateContextMenuItemState(this._getRange().text!=="")):(this._hideContextMenuByItem(this._contextType.text),this._contextValidation(u,i)):(this._hideContextMenuByItem(this._contextType.image),this._updateContextMenuItemState(!0));this._rteIframe.contents().find("body").addClass("e-cursor")},_contextmenuPosition:function(t){var r=t.clientX+this._rteWapper.offset().left,i=t.clientY+this._rteWapper.offset().top+(this._rteToolbar?this._rteToolbar.outerHeight():0),u=n(this._textMenuObj.element).outerHeight(),f=n(this._textMenuObj.element).outerWidth();i=i+u<n(document).scrollTop()+n(window).height()?i:i-u<0?i:i-u;r=r+f<n(document).scrollLeft()+n(window).width()?r:r-f;n(this._textMenuObj.element).attr("style","width:auto;left:"+r+"px;top:"+i+"px;z-index:"+(this._onGetMaxZindex()+1)).hide()},_contextValidation:function(n){this._updateContextMenuItemState(n&&(data=n.nodeValue?n.nodeValue:n.textContent)&&(this._saveSelection().endContainer==this._saveSelection().startContainer?data.substring(this._saveSelection().startOffset,this._saveSelection().endOffset)!=="":!0))},_updateContextMenuItemState:function(n){n?(this._textMenuObj.enableItemByID("cut"),this._textMenuObj.enableItemByID("copy")):(this._textMenuObj.disableItemByID("cut"),this._textMenuObj.disableItemByID("copy"))},_contextMenuClick:function(i){var f=i.ID?i.ID.toLowerCase():n(i.element).attr("id").toLowerCase(),u;this._isIE()&&this._ieSelectionRange&&this.selectRange(this._ieSelectionRange);switch(f){case"cut":!this._isIE()&&this._getValidbrowser(t.browserInfo().name)?this._openAlert(this._getLocalizedLabels("cutAlert")):this._getDocument().execCommand(f,!1,r);this._imgOrg&&this._imgDupDiv&&this._imgBoxMouseMove&&(n(this._imgOrg).css("outline",""),n(this._imgDupDiv).remove(),this._off(n(this._getDocument()),"mousemove",this._imgBoxMouseMove));this._updateCursor();break;case"copy":!this._isIE()&&this._getValidbrowser(t.browserInfo().name)?this._openAlert(this._getLocalizedLabels("copyAlert")):this._getDocument().execCommand(f,!1,r);this.selectRange(this._getRange());break;case"paste":this._isIE()?this._getDocument().execCommand(f,!1,r):this._openAlert(this._getLocalizedLabels("pasteAlert"));break;case"openlink":this._onOpen();break;case"createlink":this._linkDialog||this._renderLinkDialog();this._hyperLinkManager(!1);break;case"imageproperties":this._imgDialog||this._renderImageDialog();this._imageManager();break;case"addcolumnleft":u=this.insertColumn(!0,this._currentSelNode);this._updateCursor(u);break;case"addcolumnright":u=this.insertColumn(!1,this._currentSelNode);this._updateCursor(u);break;case"addrowabove":u=this.insertRow(!0,this._currentSelNode);this._updateCursor(u);break;case"addrowbelow":u=this.insertRow(!1,this._currentSelNode);this._updateCursor(u);break;case"deleterow":this.removeRow(this._currentSelNode);break;case"deletecolumn":this.removeColumn(this._currentSelNode);break;case"deletetable":this.removeTable(n(this._currentSelNode).closest("table"));break;case"tableproperties":this._eTblDialog||this._renderEditTableDialog();this._eTblManager();this._eTblDialog.ejDialog("open");break;case"removelink":this._onUnlink()}this._trigger("contextMenuClick",{event:i});this._onChange()},_updateCursor:function(n,t){if(!this._isIE8()){var i=this._getDocument().createRange(),r=this._getRange();n?this._setRange(n,r,!0):t?(i.setStart(t.startContainer,t.startOffset),i.setEnd(t.endContainer,t.endOffset),this.selectRange(i)):(i.setStart(r.startContainer,r.startOffset),i.setEnd(r.startContainer,r.startOffset),this.selectRange(i))}},_loadRules:function(){jQuery.validator.addMethod("contentRequired",function(t,i){return n.trim(n(i).data("ejRTE")._getText())},"Please specify the value.");jQuery.validator.addMethod("maxWordCount",function(t,i,r){return n.trim(n(i).data("ejRTE")._getText()).split(/\W+/).length<=r},"Please enter the content with in max word count.");jQuery.validator.addMethod("minWordCount",function(t,i,r){return n.trim(n(i).data("ejRTE")._getText()).split(/\W+/).length>=r},"Please enter the content with min word count.");jQuery.validator.addMethod("minCharCount",function(t,i,r){return n(i).data("ejRTE")._getText().length>=r},"Please enter the content with min length.");jQuery.validator.addMethod("maxCharCount",function(t,i,r){return n(i).data("ejRTE")._getText().length<=r},"Please enter the content with in  max length.");this._customRules={required:"contentRequired",maxWordCount:"maxWordCount",minWordCount:"minWordCount",maxlength:"maxCharCount",minlength:"minCharCount",equalTo:"equalTo"}},_initValidator:function(){this._loadRules();this.element.closest("form").data("validator")||this.element.closest("form").validate()},_getRuleData:function(n,t){var i=null;switch(n){case"contentRequired":i={contentRequired:t};break;case"minCharCount":i={minCharCount:t};break;case"maxCharCount":i={maxCharCount:t};break;case"maxWordCount":i={maxWordCount:t};break;case"minWordCount":i={minWordCount:t};break;case"equalTo":i={equalTo:t}}return i},_setValidation:function(){var f,i,o,e,r,u,s;if(this.element.closest("form").length!=0){f=this.element.closest("form").validate();e=this.element.attr("name");f.settings.messages[e]={};for(r in this.model.validationRules)if(u=null,!t.isNullOrUndefined(this.model.validationRules[r])&&this._customRules[r]){if(i=this._customRules[r],o=this.model.validationRules[r],this.element.rules("add",this._getRuleData(i,o)),t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[i])){f.settings.messages[e][i]=n.validator.messages[i];for(s in this.model.validationMessage)r==s?u=this.model.validationMessage[r]:""}else u=this.model.validationRules.messages[i];f.settings.messages[e][i]=u!=null?u:n.validator.messages[i]}}},_addAttr:function(t){if(t!=null){var i=this;n.map(t,function(n,t){t=="class"?i._rteWapper.addClass(n):t=="name"?i.element.attr(t,n):t=="required"?i.element.attr(t,n):t=="disabled"&&n=="disabled"?i.disable():t=="readOnly"&&n=="readOnly"?i._enableEdit(!1):i._rteWapper.attr(t,n)})}},_addCssToIframe:function(t){for(var i,u=n.isArray(t)?t:t.split(","),r=0;r<u.length;r++)i=document.createElement("link"),i.href=u[r],i.rel="stylesheet",i.type="text/css",this._rteIframe.contents().find("head").append(i)},_disabled:function(n){n!=!0?this.disable():this.enable()},_destroy:function(){this.element.insertBefore(this._rteWapper);t.isNullOrUndefined(this._formatDDL)||this._formatDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontStyleDDL)||this._fontStyleDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontSizeDDL)||this._fontSizeDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontColorSplit)||this._fontColorSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._bgColorSplit)||this._bgColorSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._unOrderSplit)||this._unOrderSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._orderSplit)||this._orderSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._customTableDialog)||(t.isNullOrUndefined(this._customTableDialog.find(".e-rte-ddlAlignment"))||this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList("destroy"),t.isNullOrUndefined(this._customTableDialog.find(".e-rte-txtBorder"))||this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList("destroy"));t.isNullOrUndefined(this._linkDialog)||n(this._linkDialog).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._imgDialog)||(this._imgDialog.find(".e-rte-imgBorderStyle").ejDropDownList("destroy"),n(this._imgDialog).closest("div.e-rte.e-dialog-wrap").remove());t.isNullOrUndefined(this._videoDialog)||n(this._videoDialog).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._createTable)||n(this._createTable).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._sourceDialog)||n(this._sourceDialog).closest("div.e-dialog-wrap").remove();t.isNullOrUndefined(this._customTableDialog)||n(this._customTableDialog).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._alertWindow)||n(this._alertWindow).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._eTblDialog)||(this._eTblDialog.find(".e-rte-dropdown").ejDropDownList("destroy"),n(this._eTblDialog).closest("div.e-rte.e-dialog-wrap").remove());t.isNullOrUndefined(this._explorerObj)||this._explorerObj.destroy();t.isNullOrUndefined(this._imgPicker)||this._imgPicker.destroy();t.isNullOrUndefined(this._fileDialog)||n(this._fileDialog).closest("div.e-rte.e-dialog-wrap").remove();this._rteWapper.remove();this.element.show();this.element.focus();this._createTable=null;this._unwireEvents()},_initialize:function(){return this._toolsList=this.model.toolsList,this._rteId=this.element[0].id,this._rteId=this._rteId?this._rteId:"",this._backupArray=[],this._undoRedoPosition=0,this._fontColor="#000000",this._bgColor="#ffffff",this._imgWidth=0,this._imgHeight=0,this._videoWidth=0,this._videoHeight=0,this._keypressFlag=!0,this._styleItems=t.isNullOrUndefined(this.model.tools.style)?[]:this.model.tools.style,this._alignItems=t.isNullOrUndefined(this.model.tools.alignment)?[]:this.model.tools.alignment,this._listItems=t.isNullOrUndefined(this.model.tools.lists)?[]:this.model.tools.lists,this._scriptsItems=t.isNullOrUndefined(this.model.tools.effects)?[]:this.model.tools.effects,this._contextMenu=["cut","copy","paste","|","insertTable",["addColumnLeft","addColumnRight","addRowAbove","addRowBelow"],"|","deleteTables",["deleteRow","deleteColumn","deleteTable"],"|","tableProperties","|","createLink","openLink","removeLink","imageProperties"],this._contextType={text:["cut","copy","paste","createLink"],image:["cut","copy","paste","imageProperties"],hyperlink:["cut","copy","paste","createLink","openLink","removeLink"],table:["cut","copy","paste","insertTable","deleteTables","tableProperties","createLink"],table_hyper:["cut","copy","paste","insertTable","deleteTables","tableProperties","createLink","openLink","removeLink"]},this},_render:function(){this._renderWrapper()._checkNameAttr();this.model.showToolbar&&this._renderToolBar();this._trigger("preRender",this.element);this._renderEditArea();this.model.showFooter&&this._renderFooter();this._setIframeHeight();this._rteWidth=this.model.width;this._rteHeight=this.model.height;this._renderAlertDialog();this._roundedCorner(this.model.showRoundedCorner)},_initContextMenu:function(){for(var r,t,i=[],n=0;n<this._contextMenu.length;n++)if(this._contextMenu[n]!="|")if(typeof this._contextMenu[n]=="object")for(r=n+1,t=0;t<this._contextMenu[n].length;t++)this._contextMenu[n][t]!="|"&&i.push({id:this._contextMenu[n][t],parentId:this._contextMenu[n-1],text:this._getLocalizedLabels(this._contextMenu[n][t]),sprite:"e-rte-toolbar-icon "+this._contextMenu[n][t]+" "+this._rteIconsList[this._contextMenu[n][t]],htmlAttr:this._contextMenu[n+1][t+1]=="|"?{"class":"e-rte-separator",id:this._contextMenu[n][t]}:{id:this._contextMenu[n][t]}});else i.push({id:this._contextMenu[n],parentId:null,text:this._getLocalizedLabels(this._contextMenu[n]),sprite:"e-rte-toolbar-icon "+this._contextMenu[n]+" "+this._rteIconsList[this._contextMenu[n]],htmlAttr:this._contextMenu[n+1]=="|"?{"class":"e-rte-separator",id:this._contextMenu[n]}:{id:this._contextMenu[n]}});return i},_createContextMenu:function(){var r=t.buildTag("ul.e-rte-context-menu #"+this._id+"_contextmenu"),i=this;return r.ejMenu({menuType:t.MenuType.ContextMenu,enableSeparator:!0,width:"auto",enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,contextMenuTarget:this._getDocument(),click:n.proxy(this._contextMenuClick,this),fields:{dataSource:this._initContextMenu(),id:"id",parentId:"parentId",text:"text",htmlAttribute:"htmlAttr",spriteCssClass:"sprite"},beforeOpen:function(t){i._isIE()&&i._ieSelectionRange&&i.selectRange(i._ieSelectionRange);i.model.enabled?this.enable():this.disable();i._filterMenuItems(i._contextMenuEventArgs=t.events);n(this.element).parent().hide()},open:function(){n(this.element).attr("style","visibility:visible;width:auto;display:block;left:0px;top:0px;");n(this.element).parent().show();i._contextmenuPosition(i._contextMenuEventArgs);this._showAnimation(this.element,this._showAnim);n(this.element).focus()},close:function(){n(i._getDocument()).find("body").removeClass("e-cursor")}}),r},_showHideContextMenu:function(){this.model.allowEditing&&this.model.enabled&&this.model.showContextMenu&&this._getDocument()?(this._textMenuObj=this._createContextMenu().data("ejMenu"),this._textMenuObj._off(n(this._textMenuObj.model.contextMenuTarget),"mouseup taphold",this._textMenuObj._ContextMenuHandler),this._textMenuObj._on(n(this._textMenuObj.model.contextMenuTarget),"mouseup",this._textMenuObj._ContextMenuHandler)):this._textMenuObj&&this._textMenuObj.destroy()},_checkNameAttr:function(){this.model.name?this.element.attr({name:this.model.name}):t.isNullOrUndefined(this.element.attr("name"))&&this.element.attr({name:this.element[0].id})},_enableEdit:function(n){this.model.allowEditing=n;n?(this._wireEvents(),this.model.showToolbar&&this._toolBarItems.ejToolbar("option","click",this._toolBarClick),this._rteIframe.contents().find("body").attr("contenteditable",!0)):(this._unwireEvents(),this.model.showToolbar&&this._toolBarItems.ejToolbar("option","click",null),this._rteIframe.contents().find("body").attr("contenteditable",!1));this._showHideContextMenu();this._disableResizeObj(n)},_disableResizeObj:function(i){i?this.model.enableRTL||this._on(n(this._getDocument()).find("table.e-rte-table"),"mouseover",this._tableMouseOver):(t.browserInfo().name==="mozilla"&&(this._getDocument().designMode="off"),this._off(n(this._getDocument()).find("table.e-rte-table"),"mouseover",this._tableMouseOver),this._removeResizeObject())},_changeSkin:function(n){this._rteWapper.removeClass(this.model.cssClass).addClass(n);this._subControlsSetModel("cssClass",n)},_updateIframeSkin:function(t){try{var i=this._rteIframe.contents().find("body");t&&(proxy=this,n.map(t,function(n,t){t=="class"?i.addClass(n):t=="required"?i.attr(t,n):t=="disabled"&&n=="disabled"?proxy.disable():t=="readOnly"&&n=="readOnly"?proxy._enableEdit(!1):i.attr(t,n)}))}catch(r){return!1}},_renderWrapper:function(){return this.model.minHeight.toString().indexOf("%")>0&&(this.model.minHeight=parseInt(this.model.height)*parseInt(this.model.minHeight)/100),!t.isNullOrUndefined(this.model.maxHeight)&&this.model.maxHeight.toString().indexOf("%")>0&&(this.model.maxHeight=parseInt(this.model.height)+parseInt(this.model.height)*parseInt(this.model.maxHeight)/100),this.model.minWidth.toString().indexOf("%")>0&&(this.model.minWidth=parseInt(this.model.width)*parseInt(this.model.minWidth)/100),!t.isNullOrUndefined(this.model.maxWidth)&&this.model.maxWidth.toString().indexOf("%")>0&&(this.model.maxWidth=parseInt(this.model.width)+parseInt(this.model.width)*parseInt(this.model.maxWidth)/100),this._rteWapper=t.buildTag("div.e-rte e-rte-wrapper e-widget e-box "+this.model.cssClass+"#"+this._rteId+"_wrapper","",{},{role:"presentation"}).insertBefore(this.element),this._rteWapper.css("height",this.model.height).css("width",this.model.width).css("min-height",this.model.minHeight).css("min-width",this.model.minWidth).css("max-height",this.model.maxHeight).css("max-width",this.model.maxWidth),this._rteWapper.append(this.element.hide()),this},_renderToolBar:function(){this._rteToolbar=t.buildTag("div.e-rte-toolbar #"+this._rteId+"_tools").insertAfter(this.element);this._crateToolbarTemplate()._initToolBarItems()._renderToolBarList();this._renderToolBarItems();this.model.showToolbar&&this.model.isResponsive&&this._toolBarObj._reSizeHandler();t.isNullOrUndefined(this._explorerObj)||this._rteToolbar.find("li.e-rteItem-image").length>0&&this._explorerObj.setModel({showFooter:!1,showTreeview:!1});t.isNullOrUndefined(this._fileBrowserObj)||this._rteToolbar.find("li.e-rteItem-fileBrowser").length>0&&this._fileBrowserObj.setModel({showFooter:!1,showTreeview:!1});t.browserInfo().name==="msie"&&t.browserInfo().version==="8.0"&&this._toolBarObj.disableItemByID(this._rteId+"_video")},_renderToolBarList:function(){var t={};t.click=this.model.allowEditing?this._toolBarClick:null;t.cssClass=this.model.cssClass;t.enableRTL=this.model.enableRTL;t.enableSeparator=!0;t.isResponsive=this.model.isResponsive;t.height=t.isResponsive?"":"auto";t.showRoundedCorner=this.model.showRoundedCorner;t.create=function(){var t=n(this.element).find(".e-ddl.e-widget .e-dropdownlist"),i=n(this.element).find(".e-split.e-widget .e-splitbutton");t.length&&t.ejDropDownList({height:"30px"});i.length&&i.ejSplitButton({height:"30px"})};this._toolBarItems.ejToolbar(t);this._toolBarObj=this._toolBarItems.ejToolbar("instance");this._on(n(this._toolBarObj.itemsContainer).find(".e-rteItem-zoomIn , .e-rteItem-zoomOut"),"mouseup touchend",this._zoomUp);this._on(n(this._toolBarObj.itemsContainer).find(".e-rteItem-zoomIn , .e-rteItem-zoomOut"),"mousedown touchstart",this._zoomDown)},_crateToolbarTemplate:function(){var i,r,u;this._toolBarItems=t.buildTag("div#"+this._rteId+"_toolbar").appendTo(this._rteToolbar).height(30);for(i in this._toolsList)i=this._toolsList[i],t.isNullOrUndefined(this.model.tools[i])||(i=="customTools"?t.isNullOrUndefined(this.model.tools[i])||this._customTools(this.model.tools[i]):this.model.tools[i].length>0&&this._createToolsItems(this.model.tools[i],i));return this.model.fileBrowser.filePath!=""&&(r=t.buildTag("ul#"+this._rteId+"-file-exporer"),u=n("<li id='"+this._rteId+"_fileBrowser' class='e-rte-explorer e-rteItem-fileBrowser' title='"+this._getLocalizedLabels("fileBrowser")+"' ><div class='e-rte-toolbar-icon fileBrowser e-fileBrowser' unselectable = 'on'><\/div><\/li>"),u.appendTo(r),r.appendTo(this._toolBarItems)),this},_createToolsItems:function(i,r){var f=t.buildTag("ul#"+(this._rteId+"_"+r)),e,u;for(r=="font"&&f.addClass("e-rte-fontgroup"),r=="formatStyle"&&f.addClass("e-rte-format"),r=="lists"&&f.addClass("e-rte-lists"),u=0;u<i.length;u++)e=n("<li id='"+(this._rteId+"_"+i[u].replace(/ /g,""))+"' class='e-rteItem-"+i[u]+"' ><div class='e-rte-toolbar-icon "+i[u]+" "+this._rteIconsList[i[u]]+"' unselectable = 'on'><\/div><\/li>"),i[u]==="video"&&t.browserInfo().name==="msie"&&t.browserInfo().version==="8.0"?e.attr("title",this._getLocalizedLabels("html5Support")):e.attr("title",this._getLocalizedLabels(i[u].replace(/ /g,""))),i[u]==="fullScreen"?e.attr("title",this._getLocalizedLabels("maximize")).children(".e-rte-toolbar-icon").addClass(this._rteIconsList.maximize):i[u]==="findAndReplace"&&e.attr("title",this._getLocalizedLabels("FindAndReplace")),e.appendTo(f);f.appendTo(this._toolBarItems);r!="font"||this.model.showFontOption||f.hide()},_customTools:function(i){for(var e,f,u,r=0;r<i.length;r++)e=t.buildTag("ul"),f=n("<li id='"+i[r].name+"' title='"+i[r].tooltip+"' ><div class='"+(t.isNullOrUndefined(i[r].css)?"":i[r].css)+"'>"+(t.isNullOrUndefined(i[r].text)?"":i[r].text)+"<\/div><\/li>"),u=i[r].action,typeof u=="string"&&(u=t.util.getObject(u,window)),t.isNullOrUndefined(i[r].action)||this._on(f,"click",u),n(i[r].template).appendTo(f.find("div")),f.appendTo(e),e.appendTo(this._toolBarItems)},_initToolBarItems:function(){return this._rteToolbar.find("li.e-rteItem-format").length>0&&this._renderFormat(),this._rteToolbar.find("li.e-rteItem-createLink").length>0&&this._renderLinkDialog(),this._rteToolbar.find("li.e-rteItem-video").length>0&&this._renderVideoDialog(),this._rteToolbar.find("li.e-rteItem-image").length>0&&this._renderImageDialog(),this._rteToolbar.find("li.e-rteItem-createTable").length>0&&this._renderTableDialog(),this._rteToolbar.find("li.e-rteItem-fontName").length>0&&this._renderFontStyle(),this._rteToolbar.find("li.e-rteItem-fontSize").length>0&&this._renderFontSize(),this._rteToolbar.find("li.e-rteItem-fontColor").length>0&&this._renderFontColor(),this._rteToolbar.find("li.e-rteItem-backgroundColor").length>0&&this._renderBGColor(),this._rteToolbar.find("li.e-rteItem-createTable").length>0&&this._renderEditTableDialog(),this._rteToolbar.find("li.e-rteItem-fileBrowser").length>0&&this._renderFileBrowserDialog(),this._rteToolbar.find("li.e-rteItem-unorderedList").length>0&&this._renderUnOrderList(),this._rteToolbar.find("li.e-rteItem-orderedList").length>0&&this._renderOrderList(),this.model.showClearAll||this._rteToolbar.find("li.e-rteItem-clearAll").hide(),this},_renderToolBarItems:function(){this._toolBarObj.disableItemByID(this._rteId+"_undo");this._toolBarObj.disableItemByID(this._rteId+"_redo");this.model.enableRTL?this._toolBarObj.selectItemByID(this._rteId+"_justifyRight"):this._toolBarObj.selectItemByID(this._rteId+"_justifyLeft");var n=this._rteToolbar.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable");return this.model.isResponsive&&n.length==0?this._toolBarObj._liTemplte.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable").hide():this._rteToolbar.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable").hide(),this},_renderEditArea:function(){this._rteEditor=t.buildTag("div.editarea #"+this._rteId+"_editor").appendTo(this._rteWapper);this._rteIframe=t.buildTag("iframe.content-iframe #"+this._rteId+"_Iframe","",{},{frameborder:"0"}).appendTo(this._rteEditor);this._setIFrames();navigator.userAgent.match(/iPad/i)!=null&&this._rteEditor.addClass("e-ipadscroll")},_xhtmlTagValidation:function(){var n,o,s,e,u,i;if(this.value()!=null){if(n=this.value(),n=n.replace(/\r/gi," ").replace(/\n/gi,"<br/> ").replace(/\r\n/gi," ").replace(/( )+/gi," ").replace(/&nbsp;/gi," ").replace(/&bull;/gi,"*").replace(/&ltquo;/gi,"<").replace(/&rtquo;/gi,">").replace(/&trze;/gi,"(tm)").replace(/&copy;/gi,"(c)").replace(/&reg;/gi,"(r)"),n.indexOf("<body>")!=-1&&(o=n.indexOf("<body>"),s=n.slice(0,o+6),n=n.replace(s,"").replace("<\/body><\/html>","")),n=n.replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>"),n=this._imageXhtml(n),n=this._styleXhtml(n),n=this._startXhtml(n),n.indexOf("alt=")!=-1){for(var v=/alt=\"(.*?)\"/ig,f=[],h,c=0;(h=v.exec(n))!=null;)f[c]=h[0],c++;for(i=0;i<f.length;i++)n=n.replace(f[i],'alt=""')}if(!t.isNullOrUndefined(this._fontXhtml(n))){if(n=this._fontXhtml(n),n.indexOf("ol")!=-1){for(var y=/<ol(.*)<\/ol>/ig,l,a=0,r=[];(l=y.exec(n))!==null;)r[a]=l[0].toString(),a++;for(e=[],u=0;u<r.length;u++)e[u]=r[u];for(i=0;i<r.length;i++)r[i]=r[i].replace(/<br\/>/gi,"");for(i=0;i<r.length;i++)n=n.replace(e[i],r[i])}n=n.replace(/<o:p>/gi,"").replace(/<\/o:p>/gi,"")}this.value(n)}},_setIFrames:function(){var i=null,u,r;this.value()!=null&&this.value()!=""&&(i=this.value().replace(/'/g,'"'));i==null&&this.value(n.trim(this.element[0].value));u=t.browserInfo().name=="msie"&&parseInt(t.browserInfo().version)==8;r="<!DOCTYPE html> <html> <head> <meta charset='utf-8' /> <style>body.e-cursor{cursor:default} span.e-selected-node\t{background-color: #939393;color: white;}span.e-selected-node.e-highlight{background-color: #1d9dd8;}body{font-family:Times New Roman,Times,serif;}.e-rte-table caption{border: 1px solid;border-bottom:none}body{color:#5C5C5C;}td{word-wrap:break-word;word-break:break-all;}.e-rteColumnResizer{position: absolute;bottom:0;overflow: visible;cursor: col-resize;background-repeat:repeat;background-color:transparent}.e-rteRowResizer{position: absolute;bottom:0;overflow: visible;margin-left: -4px;cursor: row-resize;background-repeat:repeat;background-color:transparent} span.e-rte-imageboxmark{width:5px;height:5px;position:absolute;display:block;background:#fff;border:1px solid #000;}<\/style><\/head><body spellcheck='false' autocorrect='off' contenteditable="+(this.model.allowEditing?"true":"false")+">"+n.trim(this.value())+"<\/body><\/html>";this._rteIframe.css({width:"100%"});(this.element[0].value=="<div><\/div>"||this.element[0].value=="")&&(this.element[0].innerHTML=this.value());this._setContent(r);this._isIE8()&&this.value(this._getDocument().body.innerHTML);this.model.enableXHTML&&this._updateValue();this._setAutoHeight();(!t.isNullOrUndefined(this.model.undoStackLimit)||this.model.undoStackLimit!==""||this.model.undoStackLimit>0)&&(this._backupArray[0]=this.getHtml())},_setIframeHeight:function(){var i=(!t.isNullOrUndefined(this._rteToolbar)&&this._rteToolbar.is(":visible")?this._rteToolbar.outerHeight():6)+(!t.isNullOrUndefined(this._rteFooter)&&this._rteFooter.is(":visible")?this._rteFooter.outerHeight():0);this._rteIframe.css("height",i==0?this.model.height:this._rteWapper.outerHeight()-i-(parseInt(this._rteEditor.css("padding-top"))+parseInt(n(".e-rte-wrapper").css("border-bottom-width"))+parseInt(this.model.showFooter?n(".e-rte-footer").css("margin-top"):0)))},_renderFooter:function(){var r=this.model,i,n;this._rteFooter=t.buildTag("div.e-rte-footer #"+this._rteId+"_footer").appendTo(this._rteWapper);i=t.buildTag("div.e-rte-footer-left");this._htmlSource=t.buildTag("div.e-rte-icons e-rte-footeritems e-rte-footericon e-rte-source "+this._rteIconsList.rteSource,"",{},{title:this._getLocalizedLabels("viewHtml")}).appendTo(i);this._htmlInfo=t.buildTag("div.e-rte-htmltaginfo e-rte-footeritems").appendTo(i);i.appendTo(this._rteFooter);n=t.buildTag("div.e-rte-footer-right");this._wordCount=t.buildTag("div.e-rte-wordcount e-rte-footeritems").appendTo(n);this._charCount=t.buildTag("div.e-rte-charcount e-rte-footeritems").appendTo(n);this._clearFormat=t.buildTag("div.e-rte-icons "+this._rteIconsList.clearFormat+" e-rte-footericon e-rte-footeritems","",{},{title:this._getLocalizedLabels("clearFormat"),unselectable:"on"}).appendTo(n);this._clearAll=t.buildTag("div.e-rte-icons clearAll "+this._rteIconsList.clearAll+" e-rte-footericon e-rte-footeritems","",{},{title:this._getLocalizedLabels("clearAll")}).appendTo(n);this._resize=t.buildTag("div.e-icons e-rte-resize "+this._rteIconsList.rteResize+" e-rte-footeritems").appendTo(n);n.appendTo(this._rteFooter);this._footerEvents("_on");this.model.showHtmlSource||this._htmlSource.hide().removeClass("e-rte-footeritems");this.model.showHtmlTagInfo||this._htmlInfo.hide().removeClass("e-rte-footeritems");this.model.showWordCount||this._wordCount.hide().removeClass("e-rte-footeritems");this.model.showCharCount||this._charCount.hide().removeClass("e-rte-footeritems");this.model.showClearAll||this._clearAll.hide().removeClass("e-rte-footeritems");this.model.showClearFormat||this._clearFormat.hide().removeClass("e-rte-footeritems");r.enableResize?this._enableResize():this._resize.hide().removeClass("e-rte-footeritems");this._updateCount();this.model.showWordCount&&this._on(this._wordCount,"click",this._wordCharClick);this.model.showCharCount&&this._on(this._charCount,"click",this._wordCharClick)},_footerElement:function(n,t){if(this.model.showFooter){var i=this._rteFooter.find(n);t?i.show().addClass("e-rte-footeritems"):i.hide().addClass("e-rte-footeritems")}},_wordCharClick:function(){this._alertWindow.ejDialog("option",{showHeader:!0,title:"<span style='padding-left:0.4em;'>"+this._getLocalizedLabels("wordCount")+"<\/span>"});this.model.enableRTL&&this._alertWindow.find(".e-alert-ok").removeClass("e-rte-alertBtnRTL");this._alertWindow.find(".e-rte-button").removeClass("e-fieldseparate").css({"text-align":"center","padding-bottom":"1em","padding-top":"0.5em"});this._alertWindow.ejDialog("instance").refresh();this._openAlert("<div style='padding-left:0.3em;padding-right:0.3em;'><div style='"+(this.model.enableRTL?"float:right":"float:left")+"'>"+this._getLocalizedLabels("words")+"<p style='margin:0.875em 0em;'>"+this._getLocalizedLabels("charSpace")+"<\/p><p style='margin:0.875em 0em;'>"+this._getLocalizedLabels("charNoSpace")+"<\/p><\/div><div style='"+(this.model.enableRTL?"float:left;padding-right:2em;":"float:right;padding-left:2em;")+"'>"+(n.trim(this._getText())!=""?n.trim(this._getText()).split(/\W+/).length:0)+"<p style='margin:0.875em 0em;'>"+this._getText().length+"<\/p><p style='margin:0.875em 0em;'>"+this._getText().replace(/\s/g,"").length+"<\/p><\/div><\/div><br/>")},_updateColorPalette:function(){var t=n("ul#"+this._rteId+"_colorTable"),i=n("ul#"+this._rteId+"_colorBGTable");t.find("div.e-rte-table").remove();t.find("li").append(this._colorTable());i.find("div.e-rte-table").remove();i.find("li").append(this._colorTable())},_enableRTL:function(n){try{n?this._rteIframe.contents().find("body").css("direction","rtl"):this._rteIframe.contents().find("body").css("direction","ltr")}catch(t){}this._subControlsSetModel("enableRTL",n)},_roundedCorner:function(n){n&&this._rteWapper.toggleClass("e-corner-all");this._subControlsSetModel("showRoundedCorner",n)},_subControlsSetModel:function(n,i){t.isNullOrUndefined(this._formatDDL)||this._formatDDL.ejDropDownList("option",n,i);t.isNullOrUndefined(this._fontStyleDDL)||this._fontStyleDDL.ejDropDownList("option",n,i);t.isNullOrUndefined(this._fontSizeDDL)||this._fontSizeDDL.ejDropDownList("option",n,i);t.isNullOrUndefined(this._fontColorSplit)||this._fontColorSplit.ejSplitButton("option",n,i);t.isNullOrUndefined(this._bgColorSplit)||this._bgColorSplit.ejSplitButton("option",n,i);t.isNullOrUndefined(this._toolBarItems)||(n=="showRoundedCorner"&&this._toolBarItems.hasClass("e-corner-top")&&this._toolBarItems.removeClass("e-corner-top").addClass("e-corner-all"),this._toolBarItems.ejToolbar("option",n,i),n=="showRoundedCorner"&&this._toolBarItems.hasClass("e-corner-all")&&this._toolBarItems.removeClass("e-corner-all").addClass("e-corner-top"));t.isNullOrUndefined(this._linkDialog)||(this._linkDialog.ejDialog("option",n,i),this._linkDialog.find(".e-rte-btn").ejButton("option",n,i),this._chkTarget.ejCheckBox("option",n,i),n=="showRoundedCorner"&&(i==!0?this._linkDialog.find(".e-inputtext").addClass("e-corner-all"):this._linkDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._imgDialog)||(this._imgDialog.ejDialog("option",n,i),this._imgDialog.find("div.e-rte-imageTab").ejTab("option",n,i),this._imgDialog.find(".e-rte-imgBorderPx").ejNumericTextbox("option",n,i),this._imgDialog.find(".e-rte-imgBorderStyle").ejDropDownList("option",n,i),this._chkImgDimensions.ejCheckBox("option",n,i),this._dialogchkTarget.ejCheckBox("option",n,i),this._imgDialog.find(".e-rte-btn").ejButton("option",n,i),n=="showRoundedCorner"&&(i==!0?this._imgDialog.find(".e-inputtext").addClass("e-corner-all"):this._imgDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._videoDialog)||(this._videoDialog.ejDialog("option",n,i),this._videoDialog.find(".e-rte-btn").ejButton("option",n,i),this._chkvideoDimensions.ejCheckBox("option",n,i),n=="showRoundedCorner"&&(i==!0?this._videoDialog.find(".e-inputtext").addClass("e-corner-all"):this._videoDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._createTable)||this._createTable.ejDialog("option",n,i);t.isNullOrUndefined(this._sourceDialog)||(this._sourceDialog.ejDialog("option",n,i),this._sourceDialog.find(".e-rte-btn").ejButton("option",n,i),n=="showRoundedCorner"&&(i==!0?this._sourceDialog.find(".e-inputtext").addClass("e-corner-all"):this._sourceDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._alertWindow)||(this._alertWindow.ejDialog("option",n,i),this._alertWindow.find(".e-rte-btn").ejButton("option",n,i));t.isNullOrUndefined(this._customTableDialog)||(this._customTableDialog.ejDialog("option",n,i),this._customTableDialog.find(".e-rte-btn").ejButton("option",n,i),this._customTableDialog.find(".numerictextbox").ejNumericTextbox("option",n,i),this._customTableDialog.find(".e-rte-txtColumns").ejNumericTextbox("option",n,i),this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList("option",n,i),this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList("option",n,i),this._chkTblCaption.ejCheckBox("option",n,i),n=="showRoundedCorner"&&(i==!0?this._customTableDialog.find(".e-inputtext").addClass("e-corner-all"):this._customTableDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._eTblDialog)||(this._eTblDialog.ejDialog("option",n,i),this._eTblDialog.find(".e-numerictextbox").ejNumericTextbox("option",n,i),this._eTblDialog.find(".e-rte-dropdown").ejDropDownList("option",n,i),this._getTableObj("_Tab").ejTab("option",n,i),this._eTblDialog.find(".e-rte-btn").ejButton("option",n,i),this._eTblCaption.ejCheckBox("option",n,i),n=="showRoundedCorner"&&(i==!0?this._eTblDialog.find(".e-inputtext").addClass("e-corner-all"):this._eTblDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._fileDialog)||(this._fileDialog.ejDialog("option",n,i),this._fileDialog.find(".e-rte-btn").ejButton("option",n,i),this._chkFileTarget.ejCheckBox("option",n,i),n=="showRoundedCorner"&&(i==!0?this._fileDialog.find(".e-inputtext").addClass("e-corner-all"):this._fileDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._explorerObj)||this._explorerObj.option(n,i);t.isNullOrUndefined(this._fileBrowserObj)||this._fileBrowserObj.option(n,i)},_createCountElement:function(n,t){n?t.show():t.hide();t.toggleClass("e-rte-footeritems")},_enableResize:function(){this.model.enableResize&&this.model.enabled&&(this._rteWapper.addClass("e-resizable"),this._resizeRTE())},_resizeRTE:function(){var i=this;this._overlayElement=t.buildTag("div.e-rte-overlay");this._rteEditor.css("position","relative");this._rteWapper.find("div.e-rte-resize").ejResizable({minHeight:parseInt(i.model.minHeight),minWidth:parseInt(i.model.minWidth),maxHeight:parseInt(i.model.maxHeight),maxWidth:parseInt(i.model.maxWidth),resizeStart:function(n){i._rteEditor.append(i._overlayElement);i._trigger("resizeStart",{event:n})},resize:function(n){i._resizeHeight(n.element);i._trigger("resize",{event:n});i.model.isResponsive&&i.model.showToolbar&&i._toolBarObj._reSizeHandler()},resizeStop:function(n){i._overlayElement.remove();i._trigger("resizeStop",{event:n})},helper:function(t){return i._resizeHeight(t.element),n(i._rteWapper)}})},_resizeHeight:function(t){var i=n(t).parents("div.e-rte-wrapper");this._rteWidth=n(i).width();this._rteHeight=n(i).height();this._rteWapper.height(this._rteHeight);this._rteWapper.width(this._rteWidth);this._setIframeHeight()},_getDialogModel:function(){var n=this._rteWapper;return dialogModel={enableResize:!1,showOnInit:!1,enableModal:!0,cssClass:this.model.cssClass,target:n,enableRTL:this.model.enableRTL}},_labelFor:function(n){return this._rteId?" for="+this._rteId+n+" ":""},_TagId:function(n){return this._rteId?" id="+this._rteId+n+" ":""},_renderLinkDialog:function(){var i=this.model.enableRTL?"e-rtlrte":"",r=this._linkDialog=t.buildTag("div#"+this._rteId+"_link"),f=n("<div class='e-rte-label "+i+"'><label "+this._labelFor("_link_url")+">"+this._getLocalizedLabels("linkWebUrl")+"<\/label><\/div><div class='e-rte-field "+i+"'><input type='text'  data-role ='none' class='e-inputtext e-rte-linkUrl' "+this._TagId("_link_url")+"/><\/div><div class='e-rte-label "+i+"'><label "+this._labelFor("_link_text")+">"+this._getLocalizedLabels("linkText")+"<\/label><\/div><div class='e-rte-field "+i+"'><input type='text' data-role ='none' class='e-inputtext e-rte-linkText' "+this._TagId("_link_text")+"><\/div><div class='e-rte-label "+i+"'><label "+this._labelFor("_link_title")+">"+this._getLocalizedLabels("linkToolTip")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text' data-role ='none' class='e-inputtext e-rte-linkTitle' "+this._TagId("_link_title")+"><\/div><div class='e-rte-label "+i+"'><\/div><div class='e-rte-field "+i+"'><input type='checkbox' class='e-rte-linkTarget'  data-role ='none' "+this._TagId("_link_target")+"><label "+this._labelFor("_link_target")+" style='padding: 5px;'>"+this._getLocalizedLabels("linkOpenInNewWindow")+"<\/label><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn "+i+"' type='button' data-role ='none' id='link_insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn "+i+"'type='button' data-role ='none' id='link_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>"),u;f.appendTo(r);r.appendTo(this._rteWapper);u=this._getDialogModel();u.title=this._getLocalizedLabels("createLink");u.target=null;u.closeIconTooltip=this._getLocalizedLabels("closeIcon");u.showRoundedCorner=this.model.showRoundedCorner;r.ejDialog(u);n(n(r.parents()).find(".e-dialog-wrap")).addClass("e-rte");this.model.showRoundedCorner&&r.find(".e-inputtext").addClass("e-corner-all");this._chkTarget=r.find(".e-rte-linkTarget");this._chkTarget.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});r.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(r.find(".e-rte-btn"),"click",this._linkBtnClick)._on(this._linkDialog.find(".e-rte-linkUrl"),"keypress",this._urlValidation)},_renderImageDialog:function(){var u=this,o="",i,f,r,e;this._imgDialog=t.buildTag("div#"+this._rteId+"_Image");i=this.model.enableRTL?"e-rtlrte":"";f="<div "+this._TagId("_img_Tab")+" class='e-rte-imageTab'><ul><li class='e-first'><a href='#"+this._rteId+"_general'>"+this._getLocalizedLabels("general")+" <\/a><\/li><li class='e-nofirst'><a href='#"+this._rteId+"_advanced'>"+this._getLocalizedLabels("advanced")+" <\/a><\/li><\/ul><div id='"+this._rteId+"_general'><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_url")+">"+this._getLocalizedLabels("imageWebUrl")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text'  data-role ='none' class='e-inputtext e-rte-imgUrl' "+this._TagId("_img_url")+"><\/div><\/div><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_text")+">"+this._getLocalizedLabels("imageAltText")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text'  data-role ='none'  class='e-inputtext e-rte-imgText' "+this._TagId("_img_text")+"><\/div><\/div><div class='e-rte-imgdimensions' "+this._TagId("_imgdimensions")+"><div class='e-rte-label "+i+"'><label>"+this._getLocalizedLabels("dimensions")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("dimensions")+"'  data-role ='none' class='e-inputtext e-dimensions e-rte-imgX' maxlength='3' "+this._TagId("_imgX")+"><label style='padding: 5px;'>X<\/label><input type='text'  data-role ='none'  title='"+this._getLocalizedLabels("dimensions")+"' style='margin-right: 5px;' class='e-inputtext e-dimensions e-rte-imgY' maxlength='3' "+this._TagId("_imgY")+"><\/div><input type='checkbox' class='e-rte-imgConsrn' data-role ='none'"+this._TagId("_img_consrn")+"<label "+this._labelFor("_img_consrn")+"  style='padding: 5px;'>"+this._getLocalizedLabels("constrainProportions")+"<\/label><\/div><\/div><div id='"+this._rteId+"_advanced'><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_link")+">"+this._getLocalizedLabels("imageLink")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text'  data-role ='none' class='e-inputtext e-rte-imgLink' "+this._TagId("_img_link")+"><\/div><\/div><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_border_px")+">"+this._getLocalizedLabels("imageBorder")+"<\/label><\/div><div class='e-rte-field "+i+"'><div class='e-img-border-field'><input type='text' data-role ='none' title='"+this._getLocalizedLabels("imageBorder")+"' class='e-rte-imgBorderPx' maxlength='3' "+this._TagId("_img_border_px")+"><\/div><div class='e-img-border-field'><select class='e-rte-imgBorderStyle'  data-role ='none' "+this._TagId("_img_border_style")+"><option value='solid'>"+this._getLocalizedLabels("solid")+"<\/option><option value='dotted'>"+this._getLocalizedLabels("dotted")+"<\/option><option value='dashed'>"+this._getLocalizedLabels("dashed")+"<\/option><option value='double'>"+this._getLocalizedLabels("doubled")+"<\/option><\/select><\/div><div class='e-img-border-field'><input  data-role ='none' type='text' title='"+this._getLocalizedLabels("imageBorder")+"' class='e-inputtext e-rte-imgBorderColor' "+this._TagId("_img_border_color")+"><\/div><\/div><\/div><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_style")+">"+this._getLocalizedLabels("imageStyle")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text' data-role ='none'  class='e-inputtext e-rte-imgStyle' "+this._TagId("_img_style")+"><\/div><\/div><div class='e-img-field-group'><div class='e-rte-label "+i+"'><\/div><div class='e-rte-field "+i+"'><input type='checkbox' class='e-rte-imgLinkTarget' data-role ='none' "+this._TagId("_img_link_target")+"><label "+this._labelFor("_img_link_target")+" style='padding: 5px;'>"+this._getLocalizedLabels("linkOpenInNewWindow")+"<\/label><\/div><\/div><\/div><\/div><div class='e-rte-button'><button class='e-rte-btn "+i+"' data-role ='none'  type='button' id='"+this._rteId+"_img_insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn "+i+"' type='button' data-role ='none' id='"+this._rteId+"_img_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>";this.model.imageBrowser.filePath!=""&&(o="<div "+this._TagId("_img_explorer")+" class='e-rte-explorer e-rte-imgBrowser'><\/div>");f=n(o+f);f.appendTo(this._imgDialog);this._imgDialog.appendTo(this._rteWapper);this.model.showDimensions||this._rteWapper.find("div.e-rte-imgdimensions").hide();r=this._getDialogModel();r.width=r.width=this.model.imageBrowser.filePath!==""?"720px":"470px";r.title=this._getLocalizedLabels("image");r.target=null;r.closeIconTooltip=this._getLocalizedLabels("closeIcon");r.showRoundedCorner=this.model.showRoundedCorner;r.open=function(){u._explorerObj&&u._explorerObj.adjustSize();t.isNullOrUndefined(u._imgSplitObj)||u._imgSplitObj.option("enableAutoResize",!0)};r.close=function(){t.isNullOrUndefined(u._imgSplitObj)||u._imgSplitObj.option("enableAutoResize",!1)};this._imgDialog.ejDialog(r);this._imgDialog.parents("#"+this._rteId+"_Image_wrapper").css({visibility:"hidden",display:"block"});n(n(this._imgDialog.parents()).find(".e-dialog-wrap")).addClass("e-rte");this.model.imageBrowser.filePath!=""&&(e={upload:{url:this.model.imageBrowser.uploadAction}},this.model.imageBrowser.ajaxSettings&&n.extend(!0,e,this.model.imageBrowser.ajaxSettings),this._explorerObj=this._imgDialog.find("div.e-rte-imgBrowser").ejFileExplorer({allowMultiSelection:!1,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,cssClass:this.model.cssClass,width:"690px",height:"300px",path:this.model.imageBrowser.filePath,fileTypes:this.model.imageBrowser.extensionAllow,layout:"list",select:function(n){u._UpdateImgDetails(n)},tools:{creation:["NewFolder","Open"],navigation:["Back","Forward"],addressBar:["Addressbar"],editing:["Refresh","Upload","Delete"],searchBar:["Searchbar"]},toolsList:["creation","navigation","addressBar","editing","searchBar"],enableResize:!1,showContextMenu:!1,ajaxAction:this.model.imageBrowser.ajaxAction,locale:this.model.locale,ajaxSettings:e}).data("ejFileExplorer"),this._imgSplitObj=this._imgDialog.find(".e-splitter").data("ejSplitter"),this._imgSplitObj.option("enableAutoResize",!1));this.model.showRoundedCorner&&this._imgDialog.find(".e-inputtext").addClass("e-corner-all");this._imgDialog.find("div.e-rte-imageTab").ejTab({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!0,showRoundedCorner:this.model.showRoundedCorner});this._imgDialog.find(".e-rte-imgBorderPx").ejNumericTextbox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",minValue:0,value:0,showRoundedCorner:this.model.showRoundedCorner});this._imgDialog.find(".e-rte-imgBorderStyle").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!0,showRoundedCorner:this.model.showRoundedCorner});this._chkImgDimensions=this._imgDialog.find(".e-rte-imgConsrn");this._chkImgDimensions.ejCheckBox({check:!0,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._imgDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._imgPicker=this._imgDialog.find(".e-rte-imgBorderColor").ejColorPicker({cssClass:this.model.cssClass,modelType:"palette",buttonText:{apply:this._getLocalizedLabels("buttonApply"),cancel:this._getLocalizedLabels("buttonCancel"),swatches:this._getLocalizedLabels("swatches")}}).data("ejColorPicker");this._imgDialog.parents("#"+this._rteId+"_Image_wrapper").css({visibility:"visible",display:"none"});this._dialogchkTarget=this._imgDialog.find(".e-rte-imgLinkTarget");this._dialogchkTarget.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._imgDialog.find(".e-rte-btn"),"click",this._imageBtnClick);this._on(this._imgDialog.find(".e-rte-imgUrl , .e-rte-imgLink"),"keypress",this._urlValidation);this._on(this._imgDialog.find("input.e-dimensions"),"change",this._recalcImgSize)},_renderFileBrowserDialog:function(){var r=this,o="",u=this.model.enableRTL?"e-rtlrte":"",f,i,e;this._fileDialog=t.buildTag("div#"+this._rteId+"_fileDialog");f="<div class='e-rte-elements'><div class='e-rte-label "+u+"'><label "+this._labelFor("_file_url")+">"+this._getLocalizedLabels("linkWebUrl")+"<\/label><\/div><div class='e-rte-field "+u+"'><input type='text'  data-role ='none' class='e-inputtext e-rte-fileUrl' "+this._TagId("_file_url")+"/><\/div><div class='e-rte-label "+u+"'><label "+this._labelFor("_file_text")+">"+this._getLocalizedLabels("linkText")+"<\/label><\/div><div class='e-rte-field "+u+"'><input type='text' data-role ='none' class='e-inputtext e-rte-fileText' "+this._TagId("_file_text")+"><\/div> <\/div><div class='e-rte-field'><input type='checkbox' class='e-rte-fileTarget'  data-role ='none' "+this._TagId("_file_target")+"><label "+this._labelFor("_link_target")+" style='padding: 5px;'>"+this._getLocalizedLabels("linkOpenInNewWindow")+"<\/label><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn "+u+"' type='button' data-role ='none' id='"+this._rteId+"_file_insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn "+u+"'type='button' data-role ='none' id='"+this._rteId+"_file_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>";o="<div "+this._TagId("_file_explorer")+" class='e-rte-explorer e-rte-fileBrowser'><\/div>";f=n(o+f);f.appendTo(this._fileDialog);this._fileDialog.appendTo(this._rteWapper);i=this._getDialogModel();i.width="720px";i.title=this._getLocalizedLabels("fileBrowser");i.target=null;i.showRoundedCorner=this.model.showRoundedCorner;i.open=function(){r._fileBrowserObj.adjustSize();t.isNullOrUndefined(r._fileSplitObj)||r._fileSplitObj.option("enableAutoResize",!0)};i.close=function(){t.isNullOrUndefined(r._fileSplitObj)||r._fileSplitObj.option("enableAutoResize",!1)};this._fileDialog.ejDialog(i);this._fileDialog.parents("#"+this._rteId+"_fileDialog_wrapper").css({visibility:"hidden",display:"block"});n(n(this._fileDialog.parents()).find(".e-dialog-wrap")).addClass("e-rte");e={upload:{url:this.model.fileBrowser.uploadAction}};this.model.fileBrowser.ajaxSettings&&n.extend(!0,e,this.model.fileBrowser.ajaxSettings);this._fileBrowserObj=this._fileDialog.find("div.e-rte-fileBrowser").ejFileExplorer({allowMultiSelection:!1,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,cssClass:this.model.cssClass,width:"690px",height:"300px",path:this.model.fileBrowser.filePath,fileTypes:this.model.fileBrowser.extensionAllow,layout:"list",select:function(n){r._UpdateFileDetails(n)},tools:{creation:["NewFolder","Open"],navigation:["Back","Forward"],addressBar:["Addressbar"],editing:["Refresh","Upload","Delete"],searchBar:["Searchbar"]},toolsList:["creation","navigation","addressBar","editing","searchBar"],enableResize:!1,showContextMenu:!1,ajaxAction:this.model.fileBrowser.ajaxAction,locale:this.model.locale,ajaxSettings:e}).data("ejFileExplorer");this._fileSplitObj=this._fileDialog.find(".e-splitter").data("ejSplitter");this._fileSplitObj.option("enableAutoResize",!1);this.model.showRoundedCorner&&this._fileDialog.find(".e-inputtext").addClass("e-corner-all");this._fileDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._fileDialog.parents("#"+this._rteId+"_fileDialog_wrapper").css({visibility:"visible",display:"none"});this._chkFileTarget=f.find(".e-rte-fileTarget");this._chkFileTarget.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._fileDialog.find(".e-rte-btn"),"click",this._fileBtnClick)},_UpdateImgDetails:function(t){n(this._imgURL).hasClass("e-error")&&this._imgURL.removeClass("e-error");t.path===""?this._imgURL.val("http://"):this._imgDialog.find("div.e-rte-imageTab").find(".e-rte-imgUrl").val(t.path+(t.name[0]?t.name[0]:""))},_UpdateFileDetails:function(t){n(this._fileURL).hasClass("e-error")&&this._fileURL.removeClass("e-error");t.path===""?this._fileURL.val("http://"):this._fileDialog.find(".e-rte-fileUrl").val(t.path+(t.name[0]?t.name[0]:""))},_fileBtnClick:function(n){n.target.id===this._rteId+"_file_cancel"?(this._clearFileFields(),this._fileDialog.ejDialog("close"),this._ieCursorMaintainance()):n.target.id===this._rteId+"_file_insert"&&(this._isIE()&&!this._isIE8()&&this._ieLinkRange(),this._restoreSelection(this._selectionRange),this._fileDialog.find("e-rte-fileUrl").val()!=""?this._onInsertFileLink():this._linkDialog.ejDialog("close"),this._trigger("execute",{commandName:"hyperlink"}),this._onChange(),this._setBackupData())},_clearFileFields:function(){this._fileURL=this._fileDialog.find(".e-rte-fileUrl");this._fileURL.val("http://");this._fileLinkText=this._fileDialog.find(".e-rte-fileText");this._fileLinkText.val("");this._chkFileTarget.ejCheckBox({check:!1})},_onGetInsertFileContent:function(n){this._selectedHTML=this._fileLinkText.val()===""?n:this._fileLinkText.val()},_onInsertFileLink:function(){var i,f,o=this._fileURL.val().match(/(ftp:|http:|https:)\/\//g),u=this._fileURL.val().startsWith("~")?this._fileURL.val().replace(this._fileURL.val().substr("0","1"),".."):this._fileURL.val(),r,e;if(t.isNullOrUndefined(o)&&u!==""||!t.isNullOrUndefined(o)&&o[0].length<u.length)r=this._isIE()&&n(this._currentSelNode).parents("body").length>0?this._currentSelNode:this._getSelectedNode(),t.isNullOrUndefined(r)||r.tagName.toUpperCase()!="A"?t.isNullOrUndefined(r)||r.tagName.toUpperCase()!="IMG"?(i=t.buildTag("a","",{},{href:u}),i[0].target=this._chkFileTarget.ejCheckBox("isChecked")?"_blank":"_self",this._focus(),this._isIE()?(t.isNullOrUndefined(this._selectedHTML)?this._onGetInsertFileContent(u):this._selectedHTML.length==0&&this._onGetInsertFileContent(u),i[0].innerHTML=this._selectedHTML,f=i[0].outerHTML):(this._fileLinkText.val()===""?i.html(u):i.html(this._fileLinkText.val()),f=n("<div>").append(n(i).clone()).html()),f&&this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length&&(this._isIE()?this._pasteHtml(f):this._getDocument().execCommand("inserthtml",!1,f),this._focus())):(e=n(r).parent("a")[0],t.isNullOrUndefined(e)?(i=t.buildTag("a","",{},{href:u}),n(r.outerHTML).appendTo(n(i)),n(r).replaceWith(n(i)),i[0].target=this._chkFileTarget.ejCheckBox("isChecked")?"_blank":"_self"):(e.href=u,e.target=this._chkFileTarget.ejCheckBox("isChecked")?"_blank":"_self")):(r.href=u,r.innerHTML=this._fileLinkText.val(),r.target=this._chkFileTarget.ejCheckBox("isChecked")?"_blank":"_self"),this._fileDialog.ejDialog("close");else return this._fileURL.addClass("e-error"),!1;this.enableToolbarItem("removeLink");this._updateCount()},_renderVideoDialog:function(){var r,u,i;this._videoDialog=t.buildTag("div#"+this._rteId+"_video");r=this.model.enableRTL?"e-rtlrte":"";u=n("<div><label>"+this._getLocalizedLabels("embedVideo")+"<\/label><\/div><textarea class='e-rte-video e-inputtext'  aria-label="+this._getLocalizedLabels("embedVideo")+"><\/textarea><div class='e-rte-videoDimensions'"+this._TagId("_videodimensions")+" style='margin-top:7px'><div class='e-rte-label'><label>"+this._getLocalizedLabels("dimensions")+" <\/label><\/div><div><input type='text'  data-role ='none' title='"+this._getLocalizedLabels("dimensions")+"' class='e-inputtext e-dimensions e-rte-videoX' maxlength='3' "+this._TagId("_videoX")+"><label style='padding: 5px;'>X<\/label><input type='text'  data-role ='none'  title='"+this._getLocalizedLabels("dimensions")+"' style='margin-right: 5px;' class='e-inputtext e-dimensions e-rte-videoY' maxlength='3'"+this._TagId("_videoY")+"><input type='checkbox' class='e-rte-videoConsrn' data-role ='none'"+this._TagId("_video_consrn")+"<label "+this._labelFor("_video_consrn")+"style='padding: 5px;'>"+this._getLocalizedLabels("constrainProportions")+"<\/label><\/div><\/div><div class='e-rte-button e-fieldseparate'><button id='video_insert'type='button' data-role ='none' class='e-rte-btn "+r+"'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button id='video_cancel' type='button' data-role ='none' class='e-rte-btn "+r+"'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");u.appendTo(this._videoDialog);this._videoDialog.appendTo(this._rteWapper);this.model.showDimensions||this._rteWapper.find(".e-rte-videoDimensions").hide();i=this._getDialogModel();i.width="460px";i.closeIconTooltip=this._getLocalizedLabels("closeIcon");i.title=this._getLocalizedLabels("video");i.target=null;i.showRoundedCorner=this.model.showRoundedCorner;this._videoDialog.ejDialog(i);n(n(this._videoDialog.parents()).find(".e-dialog-wrap")).addClass("e-rte");this.model.showRoundedCorner&&this._videoDialog.find(".e-inputtext").addClass("e-corner-all");this._chkvideoDimensions=this._videoDialog.find(".e-rte-videoConsrn");this._chkvideoDimensions.ejCheckBox({checked:!0,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._videoDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._videoDialog.find(".e-rte-btn"),"click",this._insertVideo);this._on(this._videoDialog.find("input.e-dimensions"),"change",this._recalcVideoSize)},_renderTableDialog:function(){var i,n;this._createTable=t.buildTag("div.e-rte-table-picker#"+this._rteId+"_table");this._tblheaderDiv=t.buildTag("div.e-rte-tableheader");this._tblheaderDiv.html(this._getLocalizedLabels("createTable"));this._tblheaderDiv.appendTo(this._createTable);i=t.buildTag("div.e-rte-table");this._drawTable(i);i.appendTo(this._createTable);this._createCustomTable();this._createTable.appendTo(this._rteWapper);n=this._getDialogModel();n.enableModal=!1;n.showHeader=!1;n.width="19%";n.minWidth="270px";n.maxWidth="270px";n.showRoundedCorner=this.model.showRoundedCorner;this._createTable.ejDialog(n)},_createCustomTable:function(){var u=n("<div class='customtable-group e-rte-createCustomTableLink' "+this._TagId("_createCustomTableLink")+"><span class='e-rte-toolbar-icon "+this._rteIconsList.customTableImage+"'><\/span><a class='customtable-link' role='button' title='"+this._getLocalizedLabels("customTable")+"'>"+this._getLocalizedLabels("customTable")+"<\/a><\/div><div class='customtable-group e-rte-eTblProperties' "+this._TagId("_eTblProperties")+"><span class='e-rte-toolbar-icon "+this._rteIconsList.customTableImage+"'><\/span><a class='customtable-link' role='button' title='"+this._getLocalizedLabels("editTable")+"'>"+this._getLocalizedLabels("editTable")+"<\/a><\/div>"),r,f,i;this._on(u,"click",this._openCustomTable);u.appendTo(this._createTable);this.model.showCustomTable||this._createTable.find("#"+this._rteId+"_createCustomTableLink").hide();r=this.model.enableRTL?"e-rtlrte":"";this._customTableDialog=t.buildTag("div.e-rte-customtable#"+this._rteId+"_customTable");f=n("<div class='e-fieldgroup'><div class='e-rte-tablefields'><label "+this._labelFor("_txtColumns")+">"+this._getLocalizedLabels("tableColumns")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='numerictextbox e-rte-txtColumns' "+this._TagId("_txtColumns")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtRows")+">"+this._getLocalizedLabels("tableRows")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='numerictextbox e-rte-txtRows' "+this._TagId("_txtRows")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtWidth")+">"+this._getLocalizedLabels("tableWidth")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-rte-txtWidth'"+this._TagId("_txtWidth")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtHeight")+">"+this._getLocalizedLabels("tableHeight")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-rte-txtHeight'"+this._TagId("_txtHeight")+"><\/div><\/div><div class='e-fieldseparate'><div class='e-rte-tablefields'><label "+this._labelFor("_txtSpacing")+">"+this._getLocalizedLabels("tableCellSpacing")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-rte-txtSpacing' "+this._TagId("_txtSpacing")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtPadding")+">"+this._getLocalizedLabels("tableCellPadding")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-rte-txtPadding'"+this._TagId("_txtPadding")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtBorder")+">"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-tablefields'><select class='e-rte-txtBorder' data-role ='none' "+this._TagId("_txtBorder")+"><option value='solid'>"+this._getLocalizedLabels("solid")+"<\/option><option value='dotted'>"+this._getLocalizedLabels("dotted")+"<\/option><option value='dashed'>"+this._getLocalizedLabels("dashed")+"<\/option><option value='double'>"+this._getLocalizedLabels("doubled")+"<\/option><\/select><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_chkCaption")+">"+this._getLocalizedLabels("tableCaption")+"<\/label><\/div><div class='e-rte-tablefields'><input type='checkbox' class='e-rte-chkCaption'  data-role ='none'"+this._TagId("_chkCaption")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_ddlAlignment")+">"+this._getLocalizedLabels("tableAlignment")+"<\/label><\/div><div class='e-rte-tablefields'><select class='e-rte-ddlAlignment' data-role ='none' "+this._TagId("_ddlAlignment")+"><option value='left'>"+this._getLocalizedLabels("left")+"<\/option><option value='right'>"+this._getLocalizedLabels("right")+"<\/option><option value='center'>"+this._getLocalizedLabels("center")+"<\/option><\/select><\/div><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn "+r+"' data-role ='none' id='insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn "+r+"' data-role ='none' id='cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");f.appendTo(this._customTableDialog);i=this._getDialogModel();i.width="480px";i.title=this._getLocalizedLabels("customTable");i.target=null;i.showRoundedCorner=this.model.showRoundedCorner;i.closeIconTooltip=this._getLocalizedLabels("closeIcon");this._customTableDialog.ejDialog(i);n(n(this._customTableDialog.parents()).find(".e-dialog-wrap")).addClass("e-rte");this.model.showRoundedCorner&&this._customTableDialog.find(".e-inputtext").addClass("e-corner-all");this._createTable.find("div.e-rte-eTblProperties").addClass("e-disable");this._customTableDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._customTableDialog.find(".numerictextbox").ejNumericTextbox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",minValue:1,value:3,showRoundedCorner:this.model.showRoundedCorner});this._customTableDialog.find(".e-rte-txtColumns").ejNumericTextbox({maxValue:63,showRoundedCorner:this.model.showRoundedCorner});this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!1,showRoundedCorner:this.model.showRoundedCorner});this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!0,showRoundedCorner:this.model.showRoundedCorner});this._chkTblCaption=this._customTableDialog.find(".e-rte-chkCaption");this._chkTblCaption.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._customTableDialog.find(".e-rte-btn"),"click",this._insertCustomTable)},_renderEditTableDialog:function(){var i;this._eTblDialog=t.buildTag("div#"+this._rteId+"_eTbl");var r=this._rteId,u=this.model.enableRTL?"e-rtlrte":"",f=n("<div id='"+this._rteId+"_eTbl_Tab'><ul><li class='e-first'><a href='#"+this._rteId+"_eTblTable'>"+this._getLocalizedLabels("table")+" <\/a><\/li><li class='e-nofirst'><a href='#"+this._rteId+"_eTblRow'>"+this._getLocalizedLabels("row")+" <\/a><\/li><li class='e-nofirst'><a href='#"+this._rteId+"_eTblCell'>"+this._getLocalizedLabels("cell")+" <\/a><\/li><\/ul><div id='"+this._rteId+"_eTblTable'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblWidth")+">"+this._getLocalizedLabels("tableWidth")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblWidth")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblHeight")+">"+this._getLocalizedLabels("tableHeight")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblHeight")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblCellSpace")+">"+this._getLocalizedLabels("tableCellSpacing")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-numerictextbox' "+this._TagId("_eTblCellSpace")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblCellPad")+">"+this._getLocalizedLabels("tableCellPadding")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-numerictextbox' "+this._TagId("_eTblCellPad")+"><\/div><div class='e-rte-tablefields'><label  "+this._labelFor("_eTblAlign")+">"+this._getLocalizedLabels("tableAlignment")+"<\/label><\/div><div class='e-rte-tablefields'><select id='"+r+"_eTblAlign' data-role ='none'  class='e-rte-dropdown'><option value='left'>"+this._getLocalizedLabels("left")+"<\/option><option value='right'>"+this._getLocalizedLabels("right")+"<\/option><option value='center'>"+this._getLocalizedLabels("center")+"<\/option><\/select><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblCaption")+">"+this._getLocalizedLabels("tableCaption")+"<\/label><\/div><div class='e-rte-tablefields'><input type='checkbox' data-role ='none' "+this._TagId("_eTblCaption")+"><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblBrdrPx")+">"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-stylefield'><div class='e-img-border-field'><input  data-role ='none' type='text' title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext e-numerictextbox' maxlength='3'  "+this._TagId("_eTblBrdrPx")+"><\/div><div class='e-img-border-field'><select "+this._TagId("_eTbl_border_style")+" class='e-rte-dropdown' data-role ='none' ><option value='solid'>"+this._getLocalizedLabels("solid")+"<\/option><option value='dotted'>"+this._getLocalizedLabels("dotted")+"<\/option><option value='dashed'>"+this._getLocalizedLabels("dashed")+"<\/option><option value='double'>"+this._getLocalizedLabels("doubled")+"<\/option><\/select><\/div><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext' "+this._TagId("_eTbl_border_color")+"><\/div><\/div><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblStyle")+">"+this._getLocalizedLabels("imageStyle")+" <\/label><\/div><div class='e-rte-stylefield'><input  data-role ='none' type='text' class='e-inputtext' "+this._TagId("_eTblStyle")+"><\/div><\/div><\/div><div id='"+r+"_eTblRow'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblRHeight")+">"+this._getLocalizedLabels("tableHeight")+"<\/label><\/div><div class='e-rte-tablefields'><input  data-role ='none' type='text' class='e-inputtext' "+this._TagId("_eTblRHeight")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblRAlign")+">"+this._getLocalizedLabels("textAlign")+"<\/label><\/div><div class='e-rte-tablefields'><select "+this._TagId("_eTblRAlign")+" data-role ='none'  class='e-rte-dropdown'><option value='left'>"+this._getLocalizedLabels("left")+"<\/option><option value='right'>"+this._getLocalizedLabels("right")+"<\/option><option value='center'>"+this._getLocalizedLabels("center")+"<\/option><\/select><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblRBrdrPx")+">"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-stylefield'><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext e-numerictextbox' maxlength='3'  "+this._TagId("_eTblRBrdrPx")+"><\/div><div class='e-img-border-field'><select "+this._TagId("_eTblRBrdrStyle")+" data-role ='none' class='e-rte-dropdown'><option value='solid'>"+this._getLocalizedLabels("solid")+"<\/option><option value='dotted'>"+this._getLocalizedLabels("dotted")+"<\/option><option value='dashed'>"+this._getLocalizedLabels("dashed")+"<\/option><option value='double'>"+this._getLocalizedLabels("doubled")+"<\/option><\/select><\/div><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext' "+this._TagId("_eTblRBrdrColor")+"><\/div><\/div><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblRStyle")+">"+this._getLocalizedLabels("imageStyle")+" <\/label><\/div><div class='e-rte-stylefield'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblRStyle")+"><\/div><\/div><\/div><div id='"+r+"_eTblCell'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblClWidth")+">"+this._getLocalizedLabels("tableWidth")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblClWidth")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblClAlign")+">"+this._getLocalizedLabels("textAlign")+"<\/label><\/div><div class='e-rte-tablefields'><select "+this._TagId("_eTblClAlign")+" data-role ='none'  class='e-rte-dropdown'><option value='left'>"+this._getLocalizedLabels("left")+"<\/option><option value='right'>"+this._getLocalizedLabels("right")+"<\/option><option value='center'>"+this._getLocalizedLabels("center")+"<\/option><\/select><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblClBrdrPx")+">"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-stylefield'><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext e-numerictextbox' maxlength='3' "+this._TagId("_eTblClBrdrPx")+" ><\/div><div class='e-img-border-field'><select "+this._TagId("_eTblClBrdrStyle")+" data-role ='none' class='e-rte-dropdown'><option value='solid'>"+this._getLocalizedLabels("solid")+"<\/option><option value='dotted'>"+this._getLocalizedLabels("dotted")+"<\/option><option value='dashed'>"+this._getLocalizedLabels("dashed")+"<\/option><option value='double'>"+this._getLocalizedLabels("doubled")+"<\/option><\/select><\/div><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext' "+this._TagId("_eTblClBrdrColor")+"><\/div><\/div><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblClStyle")+">"+this._getLocalizedLabels("imageStyle")+" <\/label><\/div><div class='e-rte-stylefield'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblClStyle")+"><\/div><\/div><\/div><\/div><div class='e-rte-button'><button class='e-rte-btn "+u+"' data-role ='none' id='"+r+"_eTbl_apply'>"+this._getLocalizedLabels("dialogApply")+"<\/button><button class='e-rte-btn "+u+"' data-role ='none' id='"+r+"_eTbl_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");f.appendTo(this._eTblDialog);this._eTblDialog.appendTo(this._rteWapper);i=this._getDialogModel();i.width="470px";i.title=this._getLocalizedLabels("editTable");i.target=null;i.showRoundedCorner=this.model.showRoundedCorner;i.closeIconTooltip=this._getLocalizedLabels("closeIcon");this._eTblDialog.ejDialog(i);n(n(this._eTblDialog.parents()).find(".e-dialog-wrap")).addClass("e-rte");this.model.showRoundedCorner&&this._eTblDialog.find(".e-inputtext").addClass("e-corner-all");this._eTblDialog.find(".e-numerictextbox").ejNumericTextbox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",minValue:0,value:0,showRoundedCorner:this.model.showRoundedCorner});this._eTblDialog.find(".e-rte-dropdown").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",showRoundedCorner:this.model.showRoundedCorner});this._eTblAlign=this._getTableObj("Align").data("ejDropDownList");this._eTblAlign.option("enabled",!1);this._getTableObj("_Tab").ejTab({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!0,showRoundedCorner:this.model.showRoundedCorner});this._eTblCaption=this._getTableObj("Caption");this._eTblCaption.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._eTblDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._eTblDialog.find(".e-rte-btn"),"click",this._eTblBtnClick)},_drawTable:function(n){for(var r,i=0;i<this.model.tableRows;i++){for(rowDiv=t.buildTag("div.e-rtetablerow"),r=0;r<this.model.tableColumns;r++)tableCell=t.buildTag("div.e-rte-tablecell e-default"),tableCell.appendTo(rowDiv);rowDiv.appendTo(n)}},_renderSourceDialog:function(){var r,u,i;this._sourceDialog=t.buildTag("div#"+this._rteId+"_Source");r=this.model.enableRTL?"e-rtlrte":"";u=n("<textarea class='e-rte-srctextarea e-inputtext'><\/textarea><div class='e-rte-button e-fieldseparate'><button id='src_update' data-role ='none' class='e-rte-btn "+r+"'>"+this._getLocalizedLabels("dialogUpdate")+"<\/button><button id='src_cancel' class='e-rte-btn "+r+"'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");u.appendTo(this._sourceDialog);i=this._getDialogModel();i.title=this._getLocalizedLabels("viewHtml");i.width="auto";i.target=null;i.showRoundedCorner=this.model.showRoundedCorner;i.closeIconTooltip=this._getLocalizedLabels("closeIcon");this._sourceDialog.ejDialog(i);this.model.showRoundedCorner&&this._sourceDialog.find(".e-inputtext").addClass("e-corner-all");this._sourceDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._sourceDialog.find(".e-rte-btn"),"click",this._srcBtnClick)},_renderAlertDialog:function(){var r,i;this._alertWindow=t.buildTag("div#"+this._rteId+"_Alert");r=n("<p class='e-alerttext' style='margin:0.875em 0em;'><\/p><div class='e-rte-button e-fieldseparate'><button data-role ='none' class='e-rte-btn e-alert-ok' type='button'>"+this._getLocalizedLabels("dialogOk")+"<\/button><button class='e-rte-btn e-alert-cancel' data-role='none'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");r.appendTo(this._alertWindow);i=this._getDialogModel();i.showHeader=!1;i.width="auto";i.target=null;i.showRoundedCorner=this.model.showRoundedCorner;i.minHeight="50px";this._alertWindow.ejDialog(i);n(n(this._alertWindow.parents()).find(".e-dialog-wrap")).addClass("e-rte");this._alertWindow.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._alertWindow.find(".e-rte-btn"),"click",this._alertBtnClick);this._alertWindow.find(".e-alert-cancel").hide()},_alertBtnClick:function(t){if(n.trim(this._alertWindow.find(".e-alerttext").html())==this._getLocalizedLabels("deleteAlert")&&n(t.target).hasClass("e-alert-ok")){this._getDocument().body.innerHTML=" ";this.model.showToolbar&&this._toolBarObj.selectItemByID(this._rteId+"_justifyLeft");this._setBackupData();this._updateCount();var i=this._isIE()?this._currentSelNode:this._getSelectedNode();this._updateTagInfo(i);this._onChange()}this._alertWindow.ejDialog("close");this._alertWindow.find(".e-alert-cancel").hide()},_openAlert:function(t){this._alertWindow.find(".e-alerttext").html(t);this._alertWindow.ejDialog("instance")._centerPosition();n("#"+this._rteId+"_Alert_wrapper").css({"z-index":this._onGetMaxZindex()});this._alertWindow.ejDialog("open")},_renderFormat:function(){this._formatDDL=t.buildTag("input#"+this._rteId+"_formatDDL","","",{type:"text",title:this._getLocalizedLabels("format"),"data-role":"none"});var n={};n.dataSource=this._formatText(this.model.format,[{text:"paragraph",value:"<p>"},{text:"quotation",value:"<blockquote>"},{text:"heading1",value:"<h1>"},{text:"heading2",value:"<h2>"},{text:"heading3",value:"<h3>"},{text:"heading4",value:"<h4>"},{text:"heading5",value:"<h5>"},{text:"heading6",value:"<h6>"}]);n.width="105px";n.enableRTL=this.model.enableRTL;n.popupWidth="175px";n.popupHeight="auto";n.selectedItemIndex=0;n.popupHide=this._formatChange;n.cssClass="e-rte-format-ddl";n.showRoundedCorner=this.model.showRoundedCorner;n.fields={text:"text",value:"value",spriteCssClass:"spriteCssClass"};this._formatDDL.appendTo(this._rteToolbar.find("li.e-rteItem-format").html(""));this._formatDDL.ejDropDownList(n);this._formatPopupStyle()},_formatText:function(n,t){for(var r,i=0;i<n.length;i++)for(r=0;r<t.length;r++)if(n[i].value==t[r].value){n[i].text=this._getLocalizedLabels(t[r].text)?this._getLocalizedLabels(t[r].text):n[i].text;break}return n},_formatPopupStyle:function(){for(var i=this._formatDDL.data("ejDropDownList").popupPanelWrapper.find("li"),t=0;t<i.length;t++)n(i[t]).addClass(this.model.format[t].spriteCssClass)},_renderFontStyle:function(){this._fontStyleDDL=t.buildTag("input#"+this._rteId+"_fontNameDDL","","",{type:"text",title:this._getLocalizedLabels("fontName"),"data-role":"none"});var n={};n.dataSource=this._formatText(this.model.fontName,[{text:"timesnewroman",value:"Times New Roman,Times,serif"},{text:"segoeui",value:"Segoe UI"},{text:"arial",value:"Arial,Helvetica,sans-serif"},{text:"couriernew",value:"Courier New,Courier,monospace"},{text:"georgia",value:"Georgia,serif"},{text:"impact",value:"Impact,Charcoal,sans-serif"},{text:"lucidaconsole",value:"Lucida Console,Monaco,monospace"},{text:"tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"trebuchetms",value:"Trebuchet MS,Helvetica,sans-serif"},{text:"verdana",value:"Verdana,Geneva,sans-serif"}]);n.enableRTL=this.model.enableRTL;n.selectedItemIndex=0;n.popupHide=this._fontStyleChange;n.showRoundedCorner=this.model.showRoundedCorner;n.fields={text:"text",value:"value"};this._fontStyleDDL.appendTo(this._rteToolbar.find("li.e-rteItem-fontName").html(""));this._fontStyleDDL.ejDropDownList(n)},_renderFontSize:function(){this._fontSizeDDL=t.buildTag("input#"+this._rteId+"_fontSizeDDL","","",{type:"text",title:this._getLocalizedLabels("fontSize"),"data-role":"none"});var n={};n.dataSource=this.model.fontSize;n.width="100px";n.enableRTL=this.model.enableRTL;n.selectedItemIndex=2;n.popupHide=this._fontSizeChange;n.showRoundedCorner=this.model.showRoundedCorner;n.fields={text:"text",value:"value"};this._fontSizeDDL.appendTo(this._rteToolbar.find("li.e-rteItem-fontSize").html(""));this._fontSizeDDL.ejDropDownList(n)},_renderFontColor:function(){var f=this,u,i,r;this._fontColorSplit=t.buildTag("button#"+this._rteId+"_fontColorbtn","",{},{type:"button","data-role":"none"});u=n("<ul id='"+this._rteId+"_colorTable' class='e-rte-colorpalette'><li><\/li><\/ul>");u.find("li").append(this._colorTable());i={};i.width="42px";i.contentType="textandimage";i.targetID=this._rteId+"_colorTable";i.enableRTL=this.model.enableRTL;i.prefixIcon=this._rteIconsList.fontColor;i.showRoundedCorner=this.model.showRoundedCorner;this._fontColorSplit.appendTo(this._rteToolbar.find("li.e-rteItem-fontColor").html(""));r=n("#"+this._rteId+"_colorTable").get(0);r&&(n(r).parent().hasClass("e-menu-wrap")?n(r).parent().remove():n(r).remove());u.appendTo(this._rteToolbar.find("li.e-rteItem-fontColor"));this._fontColorSplit.ejSplitButton(i);this._splitObj=this._fontColorSplit.ejSplitButton("instance");this._splitObj.option("beforeOpen",function(){f._bindClickOperation("FontColor")});this._on(this._fontColorSplit,"click",this._fontColorClick);this._fontColorSplit.find("span."+this._rteIconsList.fontColor).removeClass("e-icon");this._fontColorSplit.find("span.e-btntxt").css("background-color",this._fontColor)},_renderUnOrderList:function(){var u=this,i,r;this._unOrderSplit=t.buildTag("button#"+this._rteId+"_unorder","",{},{type:"button","data-role":"none"});this._unorderLiTemplate=t.buildTag("ul#"+this._rteId+"_unorderlist","",{height:"auto",width:"84px"},{"class":"e-rte-unorderlistname"});n("<li id='none' title='"+this._getLocalizedLabels("none")+"' style='float:left;width:50%;'><span class='e-rte-toolbar-icon e-rte-unlistitems e-nonelist-icon'><\/span><\/li><li id='disc' title='"+this._getLocalizedLabels("disc")+"' style='float:left;width:50%;'><span class='e-rte-toolbar-icon e-rte-unlistitems e-disclist-icon'><\/span><\/li><li id='square' title='"+this._getLocalizedLabels("square")+"' class='square' style='float:left;width:50%;'><span class='e-rte-toolbar-icon e-rte-unlistitems e-squarelist-icon'><\/span><\/li><li id='circle' title='"+this._getLocalizedLabels("circle")+"' style='float:left;width:50%;'><span class='e-rte-toolbar-icon e-rte-unlistitems e-circlelist-icon'><\/span><\/li>").appendTo(this._unorderLiTemplate);t.isNullOrUndefined(u.model.tools.customUnorderedList)||n.each(u.model.tools.customUnorderedList,function(t,i){t==0&&n(u._unorderLiTemplate).find("#circle,#square").attr("class","e-liseparator");n("<li id='"+(i.name?i.name:"ulcustom"+t)+"' class='"+(i.css?i.css:"")+"' title='"+(i.tooltip?i.tooltip:"")+"' style='float:left;width:100%;'>"+(i.text?i.text:"")+"<\/li>").appendTo(u._unorderLiTemplate)});i={};i.width="42px";i.contentType="imageonly";i.targetID=this._rteId+"_unorderlist";i.enableRTL=this.model.enableRTL;i.prefixIcon="e-rte-toolbar-icon "+this._rteIconsList.unorderedList;i.showRoundedCorner=this.model.showRoundedCorner;i.itemSelected=n.proxy(this._onUnorderList,this);this._unOrderSplit.appendTo(this._rteToolbar.find("li.e-rteItem-unorderedList").html(""));r=n("#"+this._rteId+"_unorderlist").get(0);r&&(n(r).parent().hasClass("e-menu-wrap")?n(r).parent().remove():n(r).remove());this._unorderLiTemplate.appendTo(this._rteToolbar.parents("body").length>0?this._rteToolbar.find("li.e-rteItem-unorderedList"):n("body"));this._unOrderSplit.ejSplitButton(i);this._unOrderSplitObj=this._unOrderSplit.ejSplitButton("instance");this._unOrderSplit.find("span.e-unorderedList-icon").removeClass("e-icon");this._on(this._unOrderSplit,"click",this._onUnorderList)},_renderOrderList:function(){var u=this,i,r;this._orderSplit=t.buildTag("button#"+this._rteId+"_order","",{},{type:"button","data-role":"none"});this._orderLiTemplate=t.buildTag("ul#"+this._rteId+"_orderlist","",{height:"auto",width:"124.05px"},{"class":"e-rte-orderlistname"});n("<li id='none' title='"+this._getLocalizedLabels("none")+"' style='float:left;width:33.33%;'><span class='e-rte-toolbar-icon e-rte-listitems e-nonelist-icon'><\/span><\/li><li id='decimal' title='"+this._getLocalizedLabels("number")+"' style='float:left;width:33.33%;'><span class='e-rte-toolbar-icon e-rte-listitems e-numbering-icon'><\/span><\/li><li id='lower-alpha' title='"+this._getLocalizedLabels("loweralpha")+"'  style='float:left;width:33.33%;'><span class='e-rte-toolbar-icon e-rte-listitems e-loweralpha-icon'><\/span><\/li><li id='lower-roman' title='"+this._getLocalizedLabels("lowerroman")+"' style='float:left;width:33.33%;'><span class='e-rte-toolbar-icon e-rte-listitems e-lowerroman-icon'><\/span><\/li><li id='upper-alpha' title='"+this._getLocalizedLabels("upperalpha")+"' style='float:left;width:33.33%;'><span class='e-rte-toolbar-icon e-rte-listitems e-upperalpha-icon'><\/span><\/li><li id='upper-roman' title='"+this._getLocalizedLabels("upperroman")+"' style='float:left;width:33.33%;'><span class='e-rte-toolbar-icon e-rte-listitems e-upperroman-icon'><\/span><\/li>").appendTo(this._orderLiTemplate);t.isNullOrUndefined(u.model.tools.customOrderedList)||n.each(u.model.tools.customOrderedList,function(t,i){t==0&&n(u._orderLiTemplate).find("#upper-roman,#upper-alpha,#lower-roman").attr("class","e-liseparator");n("<li id='"+(i.name?i.name:"olcustom"+t)+"' class='"+(i.css?i.css:"")+"' title='"+(i.tooltip?i.tooltip:"")+"' style='float:left;width:100%;'>"+(i.text?i.text:"")+"<\/li>").appendTo(u._orderLiTemplate)});i={};i.width="42px";i.contentType="imageonly";i.enableRTL=this.model.enableRTL;i.showRoundedCorner=this.model.showRoundedCorner;i.targetID=this._rteId+"_orderlist";i.prefixIcon="e-rte-toolbar-icon "+this._rteIconsList.orderedList;i.itemSelected=n.proxy(this._onOrderList,this);this._orderSplit.appendTo(this._rteToolbar.find("li.e-rteItem-orderedList").html(""));r=n("#"+this._rteId+"_orderlist").get(0);r&&(n(r).parent().hasClass("e-menu-wrap")?n(r).parent().remove():n(r).remove());this._orderLiTemplate.appendTo(this._rteToolbar.parents("body").length>0?this._rteToolbar.find("li.e-rteItem-orderedList"):n("body"));this._orderSplit.ejSplitButton(i);this._orderSplitObj=this._orderSplit.ejSplitButton("instance");this._on(this._orderSplit,"click",this._onOrderList)},_renderBGColor:function(){var f=this,u,i,r;this._bgColorSplit=t.buildTag("button#"+this._rteId+"_backgroundColorbtn","",{},{type:"button","data-role":"none"});u=n("<ul id='"+this._rteId+"_colorBGTable' class='e-rte-colorpalette'><li><\/li><\/ul>");u.find("li").append(this._colorTable());i={};i.width="42px";i.contentType="textandimage";i.targetID=this._rteId+"_colorBGTable";i.enableRTL=this.model.enableRTL;i.prefixIcon=this._rteIconsList.backgroundColor;i.showRoundedCorner=this.model.showRoundedCorner;this._bgColorSplit.appendTo(this._rteToolbar.find("li.e-rteItem-backgroundColor").html(""));r=n("#"+this._rteId+"_colorBGTable").get(0);r&&(n(r).parent().hasClass("e-menu-wrap")?n(r).parent().remove():n(r).remove());u.appendTo(this._rteToolbar.find("li.e-rteItem-backgroundColor"));this._bgColorSplit.ejSplitButton(i);this._bgSplitObj=this._bgColorSplit.ejSplitButton("instance");this._bgSplitObj.option("beforeOpen",function(){f._bindClickOperation("BGColor")});this._on(this._bgColorSplit,"click",this._bgColorClick);this._bgColorSplit.find("span."+this._rteIconsList.backgroundColor).removeClass("e-icon");this._bgColorSplit.find("span.e-btntxt").css("background-color",this._bgColor)},_bindClickOperation:function(t){var i=this,u=t=="BGColor"?i._bgSplitObj:i._splitObj,r=t=="BGColor"?"_colorBGTable":"_colorTable";SplitMenu=n("#"+i._rteId+r).ejMenu("instance");t=="BGColor"?i._bgSplitMenu=SplitMenu:i._splitMenu=SplitMenu;SplitMenu.model.close=function(){u.contstatus=!1;i._off(n("#"+i._rteId+r).find("div.e-rte-palettetable"),"click",t=="BGColor"?i._bgColorPaletteClick:i._colorPaletteClick)};i._on(n("#"+i._rteId+r).find("div.e-rte-palettetable"),"click",t=="BGColor"?i._bgColorPaletteClick:i._colorPaletteClick)},_colorTable:function(){for(var u,f=t.buildTag("div.e-rte-table"),i=0,n,r,e=0;e<this.model.colorPaletteRows;e++){for(r=t.buildTag("div.e-rtetablerow"),u=0;u<this.model.colorPaletteColumns;u++)i<this.model.colorCode.length&&(n="#"+this.model.colorCode[i],tableCell=t.buildTag("div.e-rte-palettetable","",{"background-color":n},{title:n,"color-code":n}),tableCell.appendTo(r),i++);r.appendTo(f)}return f},_recalcVideoSize:function(n){var r,u,t,i;r=this._videoDialog.find(".e-rte-videoX");u=this._videoDialog.find(".e-rte-videoY");t=r.val();i=u.val();!this._chkvideoDimensions.ejCheckBox("isChecked")||!this._videoWidth||!this._videoHeight||!t||!i||(n.target.id==r[0].id?(i=Math.round(t/this._videoWidth*i),u.val(i)):(t=Math.round(i/this._videoHeight*t),r.val(t)));this._videoWidth=t;this._videoHeight=i},_recalcImgSize:function(n){var r,u,t,i;r=this._imgDialog.find(".e-rte-imgX");u=this._imgDialog.find(".e-rte-imgY");t=r.val();i=u.val();!this._chkImgDimensions.ejCheckBox("isChecked")||!this._imgWidth||!this._imgHeight||!t||!i||(n.target.id==r[0].id?(i=Math.round(t/this._imgWidth*i),u.val(i)):(t=Math.round(i/this._imgHeight*t),r.val(t)));this._imgWidth=t;this._imgHeight=i},_urlValidation:function(t){var i=n(t.target);i.hasClass("e-error")&&i.removeClass("e-error")},_ieLinkRange:function(){var n=this._getRange();t.isNullOrUndefined(this._currentSelNode)||this._currentSelNode.nodeName.toLowerCase()=="html"||n.setStart(this._currentSelNode,this._currentSelNode.childNodes.length);this._selectionRange=n},_ieCursorMaintainance:function(){this._isIE()&&!this._isIE8()?(this._ieLinkRange(),this._focus()):this._isIE8()&&this._setRange(this._currentSelNode,this._getDocument().body.createTextRange(),!0)},_linkBtnClick:function(n){n.target.id==="link_cancel"?(this._clearLinkFields(),this._linkDialog.ejDialog("close"),this._ieCursorMaintainance()):n.target.id==="link_insert"&&(this._isIE()&&!this._isIE8()&&this._ieLinkRange(),this._restoreSelection(this._selectionRange),this._txtURL.val()!=""?this._onInsertLink():(this._onUnlink(),this._linkDialog.ejDialog("close")),this._trigger("execute",{commandName:"hyperlink"}),this._onChange(),this._setBackupData())},_imageBtnClick:function(i){if(i.target.id===this._rteId+"_img_cancel")this._imgDialog.ejDialog("close"),this._ieCursorMaintainance();else if(i.target.id===this._rteId+"_img_insert"){var r=this._imgURL.val().match(/(ftp:|http:|https:)\/\//g);if(t.isNullOrUndefined(r)&&this._imgURL.val()!==""||!t.isNullOrUndefined(r)&&r[0].length<this._imgURL.val().length)this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length?this._onInsertImage():this._imgDialog.ejDialog("close"),this._onChange(),this._setBackupData();else return this._imgURL.addClass("e-error"),this._isUrl(n.trim(this._imageLink.val()))||this._imageLink.addClass("e-error"),!1}},_srcBtnClick:function(i){var r,u,f;if(i.target.id==="src_update"){r=n.trim(this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value);this.model.enableHtmlEncode&&(r=this._decode(r));try{this._getDocument().documentElement.innerHTML=r.replace("<html>","").replace("<\/html>","");this.model.enableXHTML&&(this._getDocument().documentElement.innerHTML=this._updateXhtml())}catch(e){u=/<body[^>]*>((.|[\n\r])*)<\/body>/i;t.isNullOrUndefined(u.exec(r))||(r=u.exec(r)[1],this._getDocument().body.innerHTML=r)}this._onChange();this._updateCount()}this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value="";f=n(this._getDocument()).find("table.e-rte-table");this.model.enableRTL||this._on(f,"mouseover",this._tableMouseOver);this._sourceDialog.ejDialog("close");this._showHideContextMenu()},_eTblBtnClick:function(n){n.target.id===this._rteId+"_eTbl_cancel"?(this._eTblDialog.ejDialog("close"),this._ieCursorMaintainance()):n.target.id===this._rteId+"_eTbl_apply"&&(this._isIE()&&!this._isIE8()&&this._ieLinkRange(),this._oneditTable(),this._onChange(),this._setBackupData())},_insertCustomTable:function(i){var f,r,u;if(this._customTableValidation=!1,i.target.id==="insert"){var e=this._customTableDialog.find(".e-rte-txtColumns").ejNumericTextbox("getValue"),o=this._customTableDialog.find(".e-rte-txtRows").ejNumericTextbox("getValue"),s=this._customInputValidation(this._customTableDialog.find(".e-rte-txtHeight")),h=this._customInputValidation(this._customTableDialog.find(".e-rte-txtWidth")),c=this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList("getSelectedValue"),l=this._customInputValidation(this._customTableDialog.find(".e-rte-txtSpacing")),a=this._customInputValidation(this._customTableDialog.find(".e-rte-txtPadding")),v=this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList("getSelectedValue"),y=this._chkTblCaption.ejCheckBox("isChecked");this._customTableValidation||(t.isNullOrUndefined(this._tableInsertAt)||t.isNullOrUndefined(this._tableInsertAt.startContainer)||this._restoreSelection(this._tableInsertAt),f=this._tableGenerator(o,e,!1,h,s,l,a,c,v,y),this.executeCommand("inserthtml",f),r=n(this._getDocument()).find("table.e-rte-table"),u=this._customTableDialog.find(".e-rte-ddlAlignment").data("ejDropDownList"),u.option("value")=="Center"&&r.attr("style","margin: 0 auto"),this.model.enableRTL||this._on(r,"mouseover",this._tableMouseOver),this._onChange(),u.option({value:"",enabled:!1}));this._on(this._customTableDialog.find(".e-rte-txtHeight"),"keypress",this._urlValidation)._on(this._customTableDialog.find(".e-rte-txtWidth"),"keypress",this._urlValidation)._on(this._customTableDialog.find(".e-rte-txtSpacing"),"keypress",this._urlValidation)._on(this._customTableDialog.find(".e-rte-txtPadding"),"keypress",this._urlValidation)}this._customTableValidation||(this._customTableDialog.ejDialog("close"),this._clearTableFields(),this._ieCursorMaintainance())},_customInputValidation:function(n){var t=n.val().toLowerCase(),i=t.substr(t.length-2,2),r=t.match(/[!@#$%^&*()_+\-=\[\]{};':"\\|,<>\/?]/gi),u=t.match(/[a-z]/gi);return!isNaN(t)&&(r==null||r.length==0)||t.length>1&&t.substr(t.length-1,1)=="%"&&r.length==1&&(u==null||u.length==0)||t.length>2&&(r==null||r.length==0)&&u!=null&&u.length==2&&(i=="px"||i=="in"||i=="cm"||i=="mm"||i=="em"||i=="ex"||i=="pt"||i=="pc")?t:(n.addClass("e-error"),this._customTableValidation=!0,0)},_clearTableFields:function(){this._customTableDialog.find(".e-rte-txtColumns").ejNumericTextbox("option","value",3);this._customTableDialog.find(".e-rte-txtRows").ejNumericTextbox("option","value",3);this._customTableDialog.find(".e-rte-txtHeight").val("");this._customTableDialog.find(".e-rte-txtWidth").val("");this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList("clearText");this._customTableDialog.find(".e-rte-txtSpacing").val("");this._customTableDialog.find(".e-rte-txtPadding").val("");var n=this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList("clearText"),t=this._chkTblCaption.ejCheckBox({check:!1})},_clearEditTableFields:function(){this._eTblHeight=this._eTblDialog.find("input").val("");this._eTblDialog.find(".e-numerictextbox").data("ejNumericTextbox").option("value","");this._eTblDialog.find(".e-rte-dropdown").data("ejDropDownList").option("value","");this._eTblAlign.disable();this._eTblCaption.ejCheckBox({check:!1})},_clearLinkFields:function(){this._txtURL=this._linkDialog.find(".e-rte-linkUrl");this._txtURL.removeClass("e-error");this._txtURL.val("http://");this._txtLinkText=this._linkDialog.find(".e-rte-linkText");this._txtLinkText.val("");this._txtLinkTitle=this._linkDialog.find(".e-rte-linkTitle");this._txtLinkTitle.val("");this._chkTarget.ejCheckBox({check:!1});this._txtURL.focus()},_textFieldFocus:function(n,t,i){if(this._isIE8()){var r=n.createTextRange();r.collapse(!0);r.moveEnd("character",t);r.moveStart("character",i);r.select()}else n.setSelectionRange(t,i)},_clearImgFields:function(){this._imgURL=this._imgDialog.find(".e-rte-imgUrl").val("http://").removeClass("e-error");this._imgDialog.find(".e-rte-imgText").val("");this._chkImgDimensions.ejCheckBox({checked:!0});this._imageLink=this._imgDialog.find(".e-rte-imgLink");this._imageLink.removeClass("e-error");this._imageLink.val("");this._imageBorderPx=this._imgDialog.find(".e-rte-imgBorderPx").data("ejNumericTextbox");this._imageBorderPx.option("value",0);this._imageBorderStyle=this._imgDialog.find(".e-rte-imgBorderStyle").data("ejDropDownList");this._imageBorderStyle.option("value","");this._imgPicker.option("value",null);this._imgDialog.find(".e-selected-color").removeAttr("style");this._imageStyle=this._imgDialog.find(".e-rte-imgStyle");this._imageStyle.val("");this._dialogchkTarget.ejCheckBox({check:!1})},_videoManager:function(){var i=this._getSelectedNode();this._editVideo=null;this._getPasteRangeVal();i&&!t.isNullOrUndefined(i.tagName)&&(this._editVideo=i,this._videoWidth=parseInt(n(i).width()),this._videoHeight=parseInt(n(i).width()),this.model.showDimensions&&(this._videoDialog.find(".e-rte-videoX").val(this._videoWidth),this._videoDialog.find(".e-rte-videoY").val(this._videoHeight)));n("#"+this._rteId+"_video_wrapper").css({"z-index":this._onGetMaxZindex()});this._videoDialog.ejDialog("open");this._videoDialog.find("textarea.e-rte-video").focus()},_sourceCodeManager:function(){t.isNullOrUndefined(this._sourceDialog)&&this._renderSourceDialog();this._updateTagInfo("body");t.isNullOrUndefined(this._getDocument().documentElement)?this._htmlSource.addClass("e-disable"):(this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value=this.model.enableHtmlEncode?this._encode(this._getDocument().documentElement.outerHTML):this._getDocument().documentElement.outerHTML,n("#"+this._rteId+"_Source_wrapper").css({"z-index":this._onGetMaxZindex()}),this._sourceDialog.ejDialog("open"),this._sourceDialog.find("textarea.e-rte-srctextarea").focus())},_getPasteRangeVal:function(){this._isIE()&&(this._pasteRangeVal=this._getRange(),this._pasteFlag=!0)},_hyperLinkManager:function(i){this._getPasteRangeVal();var r=this._isIE()?this._currentSelNode:this._getSelectedNode();this._selectedHTML=t.browserInfo().name==="msie"&&t.browserInfo().version==="11.0"?this._pasteRangeVal.toString():this._getSelText();i?(this._clearFileFields(),!t.isNullOrUndefined(r)&&r.tagName.toUpperCase()=="A"?this._fileLinkText.val(n(r).html()):this._fileLinkText.val(this._selectedHTML),n("#"+this._rteId+"_fileDialog_wrapper").css({"z-index":this._onGetMaxZindex()}),this._fileDialog.ejDialog("open")):(this._clearLinkFields(),!t.isNullOrUndefined(r)&&r.tagName.toUpperCase()=="A"?this._txtLinkText.val(n(r).html()):this._txtLinkText.val(this._selectedHTML),n("#"+this._rteId+"_link_wrapper").css({"z-index":this._onGetMaxZindex()}),this._linkDialog.ejDialog("open"),this._textFieldFocus(this._txtURL[0],this._txtURL.val().length,this._txtURL.val().length));r&&!/^(A)$/.test(r.nodeName)&&r.tagName.toUpperCase()=="IMG"&&(r=n(r).parent("a")[0]);i?r&&/^(A)$/.test(r.nodeName)&&this._fileURL.val(r.href):r&&/^(A)$/.test(r.nodeName)&&(this._txtURL.val(r.href),this._txtLinkTitle.val(r.title))},_tableManager:function(){var i=this._rteToolbar.find("li.e-rteItem-createTable"),r,u,e,f;this._getPasteRangeVal();this._getSelectedNode().nodeName.toLowerCase()=="td"&&this._createTable.find("div.e-rte-eTblProperties").removeClass("e-disable");this.model.isResponsive&&i.length==0?(e=n(this._toolBarObj._liTemplte).outerHeight()-n(this._toolBarObj._liTemplte).height(),i=this._toolBarObj._liTemplte.find("li.e-rteItem-createTable"),n("#"+this._rteId+"_table_wrapper").css({visibility:"hidden",display:"block"}),u=n(this._toolBarObj._liTemplte).offset().top+n(this._toolBarObj._liTemplte).outerHeight()+e-n("#"+this._rteId+"_table_wrapper").offsetParent().offset().top,r=n(i).offset().left-n("#"+this._rteId+"_table_wrapper").offsetParent().offset().left,n("#"+this._rteId+"_table_wrapper").css({visibility:"visible"})):(r=n(i).position().left,u=n(i).position().top+i.height()+7);(parseInt(r)+parseInt(n("#"+this._id+"_table_wrapper").css("width"))>document.body.clientWidth||parseInt(r)+parseInt(n("#"+this._id+"_table_wrapper").css("width"))>parseInt(n("#"+this._id+"_wrapper").css("width"))+n("#"+this._id+"_wrapper").position().left)&&(r=parseInt(r)-(parseInt(n("#"+this._id+"_table_wrapper").css("width"))-n(i).width())+"px");f=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop;f<u&&n(window).height()<u-f+parseInt(n("#"+this._id+"_table_wrapper").css("height"))&&(u=parseInt(n("#"+this._id+"_table_wrapper").css("height"))>n(window).height()?f:n(window).height()-parseInt(n("#"+this._id+"_table_wrapper").css("height"))>0?n(window).height()-parseInt(n("#"+this._id+"_table_wrapper").css("height"))+f:f);this._createTable.ejDialog("option","position",{X:r,Y:u});this._createTable.ejDialog("open");this._on(t.getScrollableParents(this._createTable),"scroll",function(){this._createTable.ejDialog("close")})},_eTblManager:function(){var s,i,r,e,o,f,u;this._clearEditTableFields();s=this._rteId;i=this._currentSelNode;t.isNullOrUndefined(i)||i.tagName.toLowerCase()!=="td"||(r=n(i).closest("tbody").closest("table"),this._getTableObj("Height").val(n(r).height()),this._getTableObj("Width").val(n(r).width()),t.isNullOrUndefined(r[0])||(this._getTableObj("CellSpace").data("ejNumericTextbox").option("value",r[0].cellSpacing),this._getTableObj("CellPad").data("ejNumericTextbox").option("value",r[0].cellPadding),e=r[0].align),t.isNullOrUndefined(e)||e==""||(this._eTblAlign.enable(),this._eTblAlign.option("value",e)),o=n(n(i).closest("tbody")).prev("caption"),o.length>0&&this._eTblCaption.ejCheckBox({checked:!0}),t.isNullOrUndefined(r[0])||r[0].style==""||(this._getTableObj("BrdrPx").data("ejNumericTextbox").option("value",r[0].style.borderWidth.split("px")[0]),u=this._getTableObj("_border_style").data("ejDropDownList"),r[0].style.borderStyle!=""?u.selectItemByValue(r[0].style.borderStyle):u.option({selectedItemIndex:0}),this._getTableObj("_border_color").val(r[0].style.borderColor)),this._getTableObj("Style").val(r.attr("style")),f=n(i).closest("tr"),this._getTableObj("RHeight").val(n(f).height()),this._getTableObj("RAlign").data("ejDropDownList").option("value",f[0].style.textAlign),f[0].style!=""&&(this._getTableObj("RBrdrPx").data("ejNumericTextbox").option("value",f[0].style.borderWidth.split("px")[0]),u=this._getTableObj("RBrdrStyle").data("ejDropDownList"),f[0].style.borderStyle!=""?u.selectItemByValue(f[0].style.borderStyle):u.option({selectedItemIndex:0}),this._getTableObj("RBrdrColor").val(f[0].style.borderColor)),this._getTableObj("RStyle").val(f.attr("style")),this._getTableObj("ClWidth").val(n(i).width()),this._getTableObj("ClAlign").data("ejDropDownList").option("value",i.style.textAlign),i.style!=""&&(this._getTableObj("ClBrdrPx").data("ejNumericTextbox").option("value",i.style.borderLeftWidth.split("px")[0]),u=this._getTableObj("ClBrdrStyle").data("ejDropDownList"),i.style.borderStyle!=""?u.selectItemByValue(i.style.borderStyle):u.option({selectedItemIndex:0}),this._getTableObj("ClBrdrColor").val(i.style.borderColor)),this._getTableObj("ClStyle").val(n(i).attr("style")))},_getTableObj:function(n){return this._eTblDialog.find("#"+this._rteId+"_eTbl"+n)},_imageManager:function(){var i,u,r;this._clearImgFields();i=this._isIE()?this._currentSelNode:this._getSelectedNode();this._getPasteRangeVal();i&&!t.isNullOrUndefined(i)&&(this._imgWidth=parseInt(n(i).width()),this._imgHeight=parseInt(n(i).height()),this.model.showDimensions&&(this._imgDialog.find(".e-rte-imgX").val(this._imgWidth),this._imgDialog.find(".e-rte-imgY").val(this._imgHeight)),u=n(i).parent("a"),u.length>0&&this._imageLink.val(u.attr("href")),i.tagName.toLowerCase()==="img"&&(this._imgDialog.find(".e-rte-imgUrl").val(i.src),this._imgDialog.find(".e-rte-imgText").val(i.alt),i.style!=""&&(this._imageBorderPx.option("value",i.style.borderWidth.split("px")[0]),this._imageBorderStyle.option("value",i.style.borderStyle),i.style.borderColor.length>0&&(t.browserInfo().name==="msie"&&t.browserInfo().version==="8.0"?this._imgPicker.option("value",i.style.borderColor):(r=i.style.borderColor.split("(")[1].split(")")[0],r=r.split(","),r={r:n.trim(r[0]),g:n.trim(r[1]),b:n.trim(r[2])},this._imgPicker.option("value",this._imgPicker.RGBToHEX(r))))),this._imageStyle.val(n(i).attr("style"))));n("#"+this._rteId+"_Image_wrapper").css({"z-index":this._onGetMaxZindex()});this._imgDialog.ejDialog("open");this._textFieldFocus(this._imgURL[0],this._imgURL.val().length,this._imgURL.val().length);t.isNullOrUndefined(this._explorerObj)&&this._imgDialog.find(".e-rte-imgUrl").focus()},_getValidbrowser:function(n){switch(n){case"chrome":return t.browserInfo().version<42;case"mozilla":return t.browserInfo().version<41;case"opera":return t.browserInfo().version<29;default:return!0}},_alertHeader:function(n){n._alertWindow.ejDialog("option","showHeader",!1);this.model.enableRTL&&!this._alertWindow.find(".e-alert-ok").hasClass("e-rte-alertBtnRTL")&&this._alertWindow.find(".e-alert-ok").addClass("e-rte-alertBtnRTL");n._alertWindow.find(".e-rte-button").css({"text-align":"","padding-bottom":"","padding-top":""}).addClass("e-fieldseparate");n._alertWindow.ejDialog("instance").refresh()},_toolBarClick:function(i){var o,s,f;if(!i.event||!(i.event.which&&i.event.which==3||i.event.button&&i.event.button==2)){var h=n(this.itemsContainer).closest("div.e-rte").find("textarea.e-rte"),r=h.ejRTE("instance"),e=h.attr("id"),u=t.isNullOrUndefined(e)?i.currentTarget.id.replace("_",""):i.currentTarget.id.replace(e+"_","");if(r._alertHeader(r),t.browserInfo().name==="mozilla"&&(r._getDocument().designMode="off"),n(i.currentTarget).hasClass("e-rteItem-copy")&&!r._isIE()&&r._getValidbrowser(t.browserInfo().name)?r._openAlert(r._getLocalizedLabels("copyAlert")):n(i.currentTarget).hasClass("e-rteItem-cut")&&!r._isIE()&&r._getValidbrowser(t.browserInfo().name)?r._openAlert(r._getLocalizedLabels("cutAlert")):n(i.currentTarget).hasClass("e-rteItem-paste")&&!r._isIE()?r._openAlert(r._getLocalizedLabels("pasteAlert")):(t.browserInfo().name!="chrome"&&(f=r._scriptsItems.indexOf(u),r._scriptsItems.indexOf(u)>=0&&n("#"+e+"_"+r._scriptsItems[f==0?1:0]).hasClass("e-active")&&r._selectCommand(e+"_"+r._scriptsItems[f==0?1:0])),o=n.grep(i.currentTarget.children[0].className.split(/\s+/),function(n){return!/^e-(rteItem|rte-toolbar-icon)$/i.test(n)}),(o.indexOf("e-split")>=0||o.indexOf("e-ddl")>=0)&&(o[0]=u),r._selectCommand(o[0])),r._styleItems.indexOf(u)>=0||r._scriptsItems.indexOf(u)>=0)n(i.currentTarget).hasClass("e-isactive")?this.deselectItemByID(i.currentTarget.id):this.selectItemByID(i.currentTarget.id),n(i.currentTarget).hasClass("e-isactive")?n(i.currentTarget).removeClass("e-isactive"):n(i.currentTarget).addClass("e-isactive"),r._scriptsItems.indexOf(u)>=0&&(f=r._scriptsItems.indexOf(u),n("#"+e+"_"+r._scriptsItems[f==0?1:0]).removeClass("e-isactive"),this.deselectItemByID(e+"_"+r._scriptsItems[f==0?1:0]));else if(r._alignItems.indexOf(u)>=0)for(this.selectItemByID(i.currentTarget.id),f=r._alignItems.indexOf(u),s=0;s<r._alignItems.length;s++)s!=f&&this.deselectItemByID(e+"_"+r._alignItems[s]);else r._listItems.indexOf(u)>=0&&(n(i.currentTarget).hasClass("e-isactive")?this.deselectItemByID(i.currentTarget.id):this.selectItemByID(i.currentTarget.id),n(i.currentTarget).hasClass("e-isactive")?n(i.currentTarget).removeClass("e-isactive"):n(i.currentTarget).addClass("e-isactive"),f=r._listItems.indexOf(u),n("#"+e+"_"+r._listItems[f==0?1:0]).removeClass("e-isactive"),f==0?this.deselectItemByID(e+"_"+r._listItems[1]):this.deselectItemByID(e+"_"+r._listItems[0]))}},_toggleEditTable:function(){var i,r,u;if(this._isIE8()&&(this._currentSelNode=this._getRange().parentElement()),i=this._isIE8()?this._currentSelNode:this._getSelectedNode(),t.isNullOrUndefined(i))return!1;t.isNullOrUndefined(this._toolBarItems)||(u=this._rteToolbar.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable"),r=this.model.isResponsive&&u.length==0?this._toolBarObj._liTemplte.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable"):this._toolBarItems.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable"),t.isNullOrUndefined(i.tagName)||(i&&i.tagName&&i.tagName.toLowerCase()=="td"||i.tagName.toLowerCase()=="table"||i.tagName.toLowerCase()=="tr"?(r.show(),this._createTable&&this._createTable.find("div.e-rte-eTblProperties").removeClass("e-disable")):t.isNullOrUndefined(this._createTable)||(r.hide(),this._createTable.find("div.e-rte-eTblProperties").addClass("e-disable"))));this.model.isResponsive&&this.model.showToolbar&&this._toolBarObj._reSizeHandler();(!this.model.autoHeight||n(this._toolBarObj.itemsContainer.find("."+this._rteIconsList.resize)).length)&&this._setIframeHeight()},_formatChange:function(){var i=n(this.element).closest("div.e-rte").find("textarea.e-rte"),t=i.ejRTE("instance"),r=i.attr("id");this.getSelectedValue()!==""&&t._onFormatBlock(this.getSelectedValue());t._isIE()&&t._focus();t._onChange()},_fontStyleChange:function(){var i=n(this.element).closest("div.e-rte").find("textarea.e-rte"),t=i.ejRTE("instance"),r=i.attr("id");t._focus();this.getSelectedValue()!==""&&t._onFontName(this.getSelectedValue());t._onChange()},_fontSizeChange:function(){var i=n(this.element).closest("div.e-rte").find("textarea.e-rte"),t=i.ejRTE("instance"),r=i.attr("id");t._focus();this.getSelectedValue()!==""&&t._onFontSize(this.getSelectedValue());t._onChange()},_colorPaletteClick:function(n){var t;(t=n.target.getAttribute("color-code"))&&(this._focus(),this._onFontColor(t),this._splitMenu.hide(n),this._fontColor=t,this._fontColorSplit.find("span.e-btntxt").css("background-color",t))},_bgColorPaletteClick:function(n){var t;(t=n.target.getAttribute("color-code"))&&(this._focus(),this._onBGColor(t),this._bgSplitMenu.hide(n),this._bgColor=t,this._bgColorSplit.find("span.e-btntxt").css("background-color",t))},_fontColorClick:function(n){if(this._onFontColor(this._fontColor),t.isNullOrUndefined(this._splitMenu))return!1;this._splitMenu.hide(n)},_bgColorClick:function(n){if(this._onBGColor(this._bgColor),t.isNullOrUndefined(this._bgSplitMenu))return!1;this._bgSplitMenu.hide(n)},_selectCommand:function(i){n(this._imgDupDiv).remove();n(this._imgOrg).css("outline","");i=="format"||i=="fontName"||i=="fontSize"||i=="fontColor"||i=="backgroundColor"||i=="createTable"||this._focus();switch(i){case"fullScreen":this._onFullScreen();break;case"print":this._onPrint();break;case"findAndReplace":t.RTE.FindAndReplace&&this._showFindAndReplace();break;case"bold":this._onBold();break;case"italic":this._onItalics();break;case"underline":this._onUnderLine();break;case"strikethrough":this._onStrikeThrough();break;case"justifyLeft":this._onJustifyLeft();break;case"justifyRight":this._onJustifyRight();break;case"justifyCenter":this._onJustifyCenter();break;case"justifyFull":this._onJustifyFull();break;case"cut":this._onCut();break;case"copy":this._onCopy();break;case"paste":this._onPaste();break;case"clearFormat":this._onClearFormat();break;case"clearAll":this._clearAllManager();break;case"orderedList":case"unorderedList":this._getPasteRangeVal();break;case"undo":this._undo();break;case"redo":this._redo();break;case"indent":this._onIndent();this._indentdepth++;break;case"outdent":this._onOutdent();this._indentdepth>0&&this._indentdepth--;break;case"createLink":this._hyperLinkManager(!1);break;case"removeLink":this._onUnlink();break;case"image":this._imageManager();break;case"createTable":this._createTable.ejDialog("isOpen")?this._createTable.ejDialog("close"):this._tableManager();break;case"addRowAbove":this.insertRow(!0);break;case"addRowBelow":this.insertRow(!1);break;case"addColumnLeft":this.insertColumn(!0);break;case"addColumnRight":this.insertColumn(!1);break;case"deleteRow":this.removeRow();break;case"deleteColumn":this.removeColumn();break;case"deleteTable":this.removeTable();break;case"superscript":this._onSuperScript();break;case"subscript":this._onSubScript();break;case"upperCase":this._onUpperCase();break;case"lowerCase":this._onLowerCase();break;case"video":this._videoManager();break;case"fileBrowser":this._hyperLinkManager(!0);break;default:this._onChange()}i!="createLink"&&i!="image"&&i!="video"&&i!="createTable"&&this._onChange();i!="undo"&&i!="redo"&&this._setBackupData();var r=this._isIE()?this._currentSelNode:this._getSelectedNode();this._updateTagInfo(r)},_focus:function(){browserInfo=t.browserInfo();browserInfo.name=="webkit"?this._getWindow().focus():this._getWindow().document.body.focus();this._restoreSelection(this._selectionRange)},_getWindow:function(){return n(n(this._rteWapper.find(".content-iframe"))[0].contentWindow)[0]},_getDocument:function(){var n=this._rteWapper.find(".content-iframe");try{return n.contents()[0]}catch(t){return""}},_onFullScreen:function(){n(this._toolBarObj.itemsContainer.find("."+this._rteIconsList.resize)).length?(n(this._rteWapper).css({top:this._rteOffset.top,left:this._rteOffset.left,width:this._rteWidth,height:this._rteHeight,position:this._rtePosition,"z-index":""}),n("body").css("overflow",""),n(this._toolBarObj.itemsContainer.find("."+this._rteIconsList.resize)).addClass(this._rteIconsList.maximize).removeClass(this._rteIconsList.resize).parent("li").attr("title",this._getLocalizedLabels("maximize"))):(this._rteOffset=n(this._rteWapper).position(),this._rtePosition=n(this._rteWapper).css("position"),n(this._rteWapper).css({top:"0px",left:"0px",width:"100%",height:"100%",position:"fixed","z-index":this._onGetMaxZindex()}),n("body").css("overflow","hidden"),n(this._toolBarObj.itemsContainer.find("."+this._rteIconsList.maximize)).removeClass(this._rteIconsList.maximize).addClass(this._rteIconsList.resize).parent("li").attr("title",this._getLocalizedLabels("resize")));n(this._getDocument()).find("table.e-rte-table").length>0&&this._removeResizeObject();this._setAutoHeight();this.model.showToolbar&&this.model.isResponsive&&this._toolBarObj._reSizeHandler();this._setIframeHeight();t.isNullOrUndefined(this._createTable)||this._createTableClose()},_onGetMaxZindex:function(){return Math.max.apply(null,n.map(n("body *"),function(t){return parseInt(n(t).css("z-index"))+1||1}))},_onZooming:function(i){i._zoomValue=0;var r=Number(i.getDocument().body.style.zoom==""||t.isNullOrUndefined(i.getDocument().body.style.zoom)?1:i.getDocument().body.style.zoom),u=isNaN(i.model.zoomStep)&&i.model.zoomStep.indexOf("%")!=-1?parseInt(i.model.zoomStep)/100:Number(i.model.zoomStep);return i._zoomValue=i._zoomArgs=="IN"?r+u:r-u>.1?r-u:.1,n(i.getDocument().body).css({zoom:i._zoomValue,transform:"scale("+i._zoomValue+")","transform-origin":"0 0","-o-transform":"scale("+i._zoomValue+")","-o-transform-origin":"0 0","-webkit-transform":"scale("+i._zoomValue+")","-webkit-transform-origin":"0 0"}),n(i._toolBarObj.itemsContainer.find(".e-rteItem-zoomIn")).attr("title",i._getLocalizedLabels("zoomIn")+" "+Math.round(i._zoomValue*100)+"%"),n(i._toolBarObj.itemsContainer.find(".e-rteItem-zoomOut")).attr("title",i._getLocalizedLabels("zoomOut")+" "+Math.round(i._zoomValue*100)+"%"),i._isIE()?i:void 0},_onKeyZoom:function(n){var t=this;this._mouseStillDown=!0;this._zoomArgs=n;this._setInterval=setInterval(t._onZooming(t),100)},_onPrint:function(){var i=this;this._isIE()||t.browserInfo().name==="mozilla"?this._getWindow().onafterprint=function(){n(i.getDocument().body).css({zoom:i._zoomValue?i._zoomValue:1,transform:"scale("+(i._zoomValue?i._zoomValue:1)+")","transform-origin":"0 0","-o-transform":"scale("+(i._zoomValue?i._zoomValue:1)+")","-o-transform-origin":"0 0","-webkit-transform":"scale("+(i._zoomValue?i._zoomValue:1)+")","-webkit-transform-origin":"0 0"})}:i._getWindow().matchMedia("print").addListener(function(t){t.matches||n(i.getDocument().body).css({zoom:i._zoomValue?i._zoomValue:1,transform:"scale("+(i._zoomValue?i._zoomValue:1)+")","transform-origin":"0 0","-o-transform":"scale("+(i._zoomValue?i._zoomValue:1)+")","-o-transform-origin":"0 0","-webkit-transform":"scale("+(i._zoomValue?i._zoomValue:1)+")","-webkit-transform-origin":"0 0"})});n(i.getDocument().body).css({zoom:"",transform:"","-o-transform":"","-webkit-transform":""});this._getWindow().print()},_zoomUp:function(n){n&&(n.which&&n.which==3||n.button&&n.button==2)||this._setInterval&&(this._mouseStillDown=!1,clearInterval(this._setInterval),this._setInterval=null)},_zoomDown:function(t){if(!t||!(t.which&&t.which==3||t.button&&t.button==2)){var i=this;i._mouseStillDown=!0;i._zoomArgs=n(t.target).hasClass("e-rte-toolbar-icon zoomIn "+this._rteIconsList.zoomIn)||n(t.target).hasClass("e-rteItem-zoomIn")?"IN":"OUT";i._setInterval=t.type=="mousedown"?setInterval(function(){i._onZooming(i)},100):setInterval(i._onZooming(i),100)}},_onBold:function(){var n;this.executeCommand("bold",n)},_onItalics:function(){var n;this.executeCommand("italic",n)},_onStrikeThrough:function(){var n;this.executeCommand("strikethrough",n)},_onUnderLine:function(){var n;this.executeCommand("underline",n)},_onJustifyLeft:function(){var n;this.executeCommand("JustifyLeft",n)},_onJustifyRight:function(){var n;this.executeCommand("JustifyRight",n)},_onJustifyCenter:function(){var n;this.executeCommand("JustifyCenter",n)},_onJustifyFull:function(){this._alignFlag=!0;this.executeCommand("justifyfull")},_onCut:function(){var n;this.executeCommand("cut",n)},_onCopy:function(){var n;this.executeCommand("copy",n)},_onOpen:function(){var t=this._isIE()?this._currentSelNode:this._getSelectedNode();window.open(n(t).attr("href"))},_onPaste:function(){var n;this.executeCommand("paste",n)},_onOrderList:function(i){var r=this._isIE()?this._isIE8()?this._pasteRangeVal.parentElement():this._pasteRangeVal.startContainer.parentNode:this._getSelectedNode(),u;(n(r).prop("tagName")=="OL"||n(r).parents("ol").length!=0||i.ID=="none")&&i.type!="click"&&(!(n(r).prop("tagName")=="OL"||n(r).parents("ol").length>0)||i.ID!="none")||t.isNullOrUndefined(i.ID)&&this._listOrderType=="none"||this.executeCommand("insertorderedlist","listItem");r=this._isIE()?this._isIE8()?this._pasteRangeVal.parentElement():this._pasteRangeVal.startContainer.parentNode:this._getSelectedNode();i.type=="click"&&n(r).parents("ol").length>=0&&(i.ID=this._listOrderType);t.isNullOrUndefined(i.ID)||(u=n(r).prop("tagName")=="OL"?r:n(r).parents("ol"));this._generateListItems(i,u,t.isNullOrUndefined(this.model.tools.customOrderedList)?[]:this.model.tools.customOrderedList);this._listOrderType=i.ID;this._updateIndent(r)},_onUnorderList:function(i){var r=this._isIE()?this._isIE8()?this._pasteRangeVal.parentElement():this._pasteRangeVal.startContainer.parentNode:this._getSelectedNode(),u;(n(r).prop("tagName")=="UL"||n(r).parents("ul").length!=0||i.ID=="none")&&i.type!="click"&&(!(n(r).prop("tagName")=="UL"||n(r).parents("ul").length>0)||i.ID!="none")||t.isNullOrUndefined(i.ID)&&this._listType=="none"||this.executeCommand("insertunorderedlist","listItem");r=this._isIE()?this._isIE8()?this._pasteRangeVal.parentElement():this._pasteRangeVal.startContainer.parentNode:this._getSelectedNode();i.type=="click"&&n(r).parents("ul").length>=0&&(i.ID=this._listType);t.isNullOrUndefined(i.ID)||(u=n(r).prop("tagName")=="UL"?r:n(r).parents("ul"));this._generateListItems(i,u,t.isNullOrUndefined(this.model.tools.customUnorderedList)?[]:this.model.tools.customUnorderedList);this._listType=i.ID;this._updateIndent(r)},_generateListItems:function(t,i,r){n(i).css({"list-style-type":t.ID,"list-style-image":""});var u=this;["none","disc","circle","square","decimal","upper-roman","lower-roman","upper-alpha","lower-alpha"].indexOf(t.ID)==-1&&n.each(r,function(r,u){u.name==t.ID&&n(i).css({"list-style-type":u.listStyle,"list-style-image":u.listImage})});this._setBackupData();this._isIE()?this.selectRange(this._pasteRangeVal):this.selectRange(this._getRange());this._updateTagInfo(this._isIE()?this._currentSelNode:this._getSelectedNode())},_onUndo:function(){this.executeCommand("undo",null)},_onDelete:function(){this.executeCommand("delete",null)},_onRedo:function(){this.executeCommand("redo",null)},_onClearFormat:function(){var n;this.executeCommand("removeformat",n);this._setBackupData();this._onChange();this._updateIframeSkin(this.model.iframeAttributes);this._updateToolbarStatus()},_onFormatBlock:function(n){this._focus();var t;t=document.getSelection?this._getSelectedNode():this._getWindow().document.selection.createRange().parentElement();this._onClearFormat();this.executeCommand("formatBlock",n)},_onFontName:function(n){this.executeCommand("fontName",n)},_onFontSize:function(n){this.executeCommand("fontSize",n)},_onFontColor:function(n){this.executeCommand("foreColor",n);this._onChange();this._updateIframeSkin(this.model.iframeAttributes)},_onBGColor:function(n){this.executeCommand("backColor",n);this._onChange()},_onIndent:function(){this._getWindow().document.body.style.wordWrap="break-word";var t=document.getSelection?this._getWindow().document.getSelection().focusNode:this._getWindow().document.selection.createRange().parentElement();t&&/^(OL|UL|LI)$/.test(t.nodeName)?this._listIndent(t):t&&/^(#text)$/.test(t.nodeName)&&/^(OL|UL|LI)$/.test(n(t).parent()[0].nodeName)?this._listIndent(n(t).parents("li")[0],t):this.executeCommand("indent",!1);t&&n(t).focus();this._updateIframeSkin(this.model.iframeAttributes);this._updateIndentStatus()},_onOutdent:function(){var t=document.getSelection?this._getWindow().document.getSelection().focusNode:this._getWindow().document.selection.createRange().parentElement();t&&/^(OL|UL|LI)$/.test(t.nodeName)?this._listOutdent(t):t&&/^(#text)$/.test(t.nodeName)&&/^(OL|UL|LI)$/.test(n(t).parent()[0].nodeName)?this._listOutdent(n(t).parents("li")[0],t):this.executeCommand("outdent",!1);this._updateIndentStatus()},_onSelectAll:function(){this.executeCommand("selectall")},selectAll:function(){this._onSelectAll()},_onHyperLink:function(n){this.executeCommand("createlink",n)},_onInsertLink:function(){var r,u,i,f;if(!this._isUrl(n.trim(this._txtURL.val())))return this._txtURL.addClass("e-error"),!1;i=(t.browserInfo().name=="msie"||t.browserInfo().name=="chrome")&&n(this._currentSelNode).parents("body").length>0?this._currentSelNode:this._getSelectedNode();t.isNullOrUndefined(i)||i.tagName.toUpperCase()!="A"?t.isNullOrUndefined(i)||i.tagName.toUpperCase()!="IMG"?(r=t.buildTag("a","",{},{href:this._txtURL.val(),title:this._txtLinkTitle.val()==""?this._txtURL.val()+"\n"+this._getLocalizedLabels("linktooltip"):this._txtLinkTitle.val()}),r[0].target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"",this._focus(),this._isIE()?(this._selectedHTML.length==0&&(this._selectedHTML=this._txtLinkText.val()===""?this._txtURL.val():this._txtLinkText.val()),r[0].innerHTML=this._selectedHTML,u=r[0].outerHTML):(this._txtLinkText.val()===""?r.html(this._txtURL.val()):r.html(this._txtLinkText.val()),u=n("<div>").append(n(r).clone()).html()),u&&this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length&&(this._isIE()?this._pasteHtml(u):this._getDocument().execCommand("inserthtml",!1,u),this.selectRange(this._getRange()))):(f=n(i).parent("a")[0],t.isNullOrUndefined(f)?(r=t.buildTag("a","",{},{href:this._txtURL.val(),title:this._txtLinkTitle.val()==""?this._txtURL.val()+"\n"+this._getLocalizedLabels("linktooltip"):this._txtLinkTitle.val()}),r[0].target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"",n(i.outerHTML).appendTo(n(r)),n(i).replaceWith(n(r))):(f.href=this._txtURL.val(),f.title=this._txtLinkTitle.val(),f.target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"")):(i.href=this._txtURL.val(),i.title=this._txtLinkTitle.val(),i.innerHTML=this._txtLinkText.val(),i.target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"");this._linkDialog.ejDialog("close");this.enableToolbarItem("removeLink");this._updateCount()},_setImageProperties:function(i,r,u,f,e,o,s){this.model.showDimensions&&(r!=""&&(i[0].width=r),u!=""&&(i[0].height=u));i=n(i).attr("style",f);border=e+"px ";border+=!t.isNullOrUndefined(o)&&o!=""?o+" ":"solid ";border+=!t.isNullOrUndefined(s)&&s!=""?s:"#000000";i=i.css("border",border)},_onInsertImage:function(){var o=this._imgDialog.find(".e-rte-imgUrl"),h=this._imgDialog.find(".e-rte-imgText"),c=this._imgDialog.find(".e-rte-imgX").val(),l=this._imgDialog.find(".e-rte-imgY").val(),i=this,s,w,r;this._restoreSelection(this._selectionRange);var a="",f=i._imageLink.val(),v=i._imageBorderPx.getValue(),y=i._imageBorderStyle.getSelectedValue(),e=i._imgPicker.getValue(),p=i._imageStyle.val(),u=i._isIE()?i._currentSelNode:i._getSelectedNode();if(t.isNullOrUndefined(u)||(a=u.nodeName.toUpperCase()),e=!t.isNullOrUndefined(e)&&e.length>0?e:"",s=o.val().startsWith("~")?o.val().replace(o.val().substr("0","1"),".."):o.val(),a!="IMG")w=n("<img>",{src:s,error:function(){o.addClass("e-error")},success:function(){var r=t.buildTag("img","",{},{alt:h.val(),src:s}),u,o;if(i._setImageProperties(r,c,l,p,v,y,e),f!="")if(i._isUrl(n.trim(f)))u=t.buildTag("a","",{},{href:f}),u[0].target=i._dialogchkTarget.ejCheckBox("isChecked")?"_blank":"_self",n(r[0].outerHTML).appendTo(u),r=u;else return i._imageLink.addClass("e-error"),!1;o=r[0].outerHTML;i.executeCommand("inserthtml",o)}});else{if(u.src=s,u.alt=h.val(),i._setImageProperties(n(u),c,l,p,v,y,e),r=n(u).parent("a"),f!="")if(i._isUrl(n.trim(f)))r.length>0?r.attr("href",f):(r=t.buildTag("a","",{},{href:f}),n(u.outerHTML).appendTo(r),n(u).replaceWith(r));else return i._imageLink.addClass("e-error"),!1;else r.length>0&&r.attr("href","");!t.isNullOrUndefined(r)&&r.length>0&&(r[0].target=this._dialogchkTarget.ejCheckBox("isChecked")?"_blank":"_self")}i._setAutoHeight();i._imageLink.hasClass("e-error")||i._imgDialog.ejDialog("close");i._on(i._imageLink,"keypress",i._urlValidation)._on(i._imageLink,"blur",i._urlValidation)},_insertVideo:function(i){var u=n.trim(this._videoDialog.find("textarea.e-rte-video")[0].value),f=this._videoDialog.find(".e-rte-videoX").val(),e=this._videoDialog.find(".e-rte-videoY").val(),r;this._restoreSelection(this._selectionRange);this._alertHeader(this);i.target.id==="video_insert"&&u!==""?(this._isIE()&&!this._isIE8()&&this._ieLinkRange(),r=n(u)[0],this.model.showDimensions&&!t.isNullOrUndefined(r)&&(f!=""&&(r.width=f),e!=""&&(r.height=e)),!t.isNullOrUndefined(r)&&this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length&&this.executeCommand("inserthtml",r.outerHTML+"<br/>"),this._onChange(),this._setBackupData(),this._videoDialog.ejDialog("close")):i.target.id==="video_cancel"?(this._videoDialog.ejDialog("close"),this._ieCursorMaintainance()):this._openAlert(this._getLocalizedLabels("videoError"));this._videoDialog.find("textarea.e-rte-video")[0].value="";this._videoDialog.find(".e-rte-videoX").val("");this._videoDialog.find(".e-rte-videoY").val("");this._chkvideoDimensions.ejCheckBox({check:!0});this._setAutoHeight()},_oneditTable:function(){var i=this._currentSelNode,e=n(i).closest("tbody").closest("table"),u=n(n(i).closest("tbody")).prev("caption"),f,r,o;this._eTblCaption.ejCheckBox("isChecked")?u.length==0&&t.buildTag("caption").append(n('<br type="_moz">')).insertBefore(n(n(i).closest("tbody"))):u.length>0&&u.remove();f=this._eTblAlign.getSelectedValue();r=this._getTableObj("Style").val();f=="center"&&(r+=";margin: 0 auto;");r&&e.attr("style",r);this._customTableValidation=!1;var s=this._customInputValidation(this._getTableObj("Width")),h=this._customInputValidation(this._getTableObj("Height")),c=this._customInputValidation(this._getTableObj("RHeight")),l=this._customInputValidation(this._getTableObj("ClWidth"));this._customTableValidation||(e.attr({width:s,height:h,cellPadding:this._getTableObj("CellPad").data("ejNumericTextbox").getValue(),cellSpacing:this._getTableObj("CellSpace").data("ejNumericTextbox").getValue(),align:f}).css({"border-width":this._getTableObj("BrdrPx").data("ejNumericTextbox").getValue()+"px","border-style":this._getTableObj("_border_style").data("ejDropDownList").getSelectedValue(),"border-color":this._getTableObj("_border_color").val()}),o=n(i).closest("tr"),o.attr({style:this._getTableObj("RStyle").val()}).css({height:c,"text-align":this._getTableObj("RAlign").data("ejDropDownList").getSelectedValue(),"border-width":this._getTableObj("RBrdrPx").data("ejNumericTextbox").getValue()+"px","border-style":this._getTableObj("RBrdrStyle").data("ejDropDownList").getSelectedValue(),"border-color":this._getTableObj("RBrdrColor").val()}),n(i).attr({style:this._getTableObj("ClStyle").val()}).css({width:l,"text-align":this._getTableObj("ClAlign").data("ejDropDownList").getSelectedValue(),"border-width":this._getTableObj("ClBrdrPx").data("ejNumericTextbox").getValue()+"px","border-style":this._getTableObj("ClBrdrStyle").data("ejDropDownList").getSelectedValue(),"border-color":this._getTableObj("ClBrdrColor").val()}),this._eTblDialog.ejDialog("close"));this._on(this._getTableObj("Width"),"keypress",this._urlValidation)._on(this._getTableObj("Height"),"keypress",this._urlValidation)._on(this._getTableObj("RHeight"),"keypress",this._urlValidation)._on(this._getTableObj("ClWidth"),"keypress",this._urlValidation)},_clearAllManager:function(){this._alertWindow.find(".e-alert-cancel").show();this._alertHeader(this);this._openAlert(this._getLocalizedLabels("deleteAlert"))},_onUnlink:function(){var n;this.executeCommand("unlink",n);this.disableToolbarItem("removeLink")},_onSuperScript:function(){var n;this.executeCommand("SuperScript",n)},_onSubScript:function(){var n;this.executeCommand("SubScript",n)},_onInsertTable:function(i,r,u){if(this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length){n(this._getDocument().body).css("display","inline-block");var f=this._tableGenerator(i,r,u);this.executeCommand("inserthtml",f);(t.isNullOrUndefined(n(this._getDocument().body).find("table:last")[0].nextSibling)||n(this._getDocument().body).find("table:last")[0].nextSibling.nodeName.toLowerCase()=="#text"&&n.trim(n(this._getDocument().body).find("table:last")[0].nextSibling.nodeValue)=="\n")&&n("<p><br/><\/p>").insertAfter(n(this._getDocument().body).find("table"));n(this._getDocument().body).css("display","");this._setAutoHeight()}},_onUpperCase:function(){if(document.getSelection){var a=this._getWindow().getSelection(),i=this._saveSelection(),r=i.commonAncestorContainer,f=i.commonAncestorContainer.children;if(f!=null){var e=i.cloneContents(),o=this._changeCase(e,"Upper"),s=n(o).clone(),u=document.createElement("div");n(u).append(n(s));u.innerHTML!=null&&u.innerHTML!=""&&this._getWindow().document.execCommand("inserthtml",!1,u.innerHTML)}else{var h=r.nodeValue.substring(i.startOffset,i.endOffset).toUpperCase(),c=r.nodeValue.substr(0,i.startOffset),l=r.nodeValue.substring(i.endOffset);r.nodeValue=c+h+l}}else{if(this._getWindow().document.selection.type.toLowerCase()=="control")return;this._seleText=t.isNullOrUndefined(this._seleText)?"":this._seleText;this._getDocument().selection.createRange().pasteHTML(this._seleText.toUpperCase())}this._trigger("execute",{commandName:"uppercase"})},_changeCase:function(n,t){var i=n.childNodes,r;if(i.length>0)for(r=0;r<i.length;r++)i[r].nodeType==3?i[r].nodeValue=t=="Upper"?i[r].nodeValue.toUpperCase():i[r].nodeValue.toLowerCase():i[r].nodeType==1&&i[r].tagName.toUpperCase()!="FONT"&&this._changeCase(i[r],t);return i},_onLowerCase:function(){if(document.getSelection){var a=this._getWindow().getSelection(),i=this._saveSelection(),r=i.commonAncestorContainer,f=i.commonAncestorContainer.children;if(f!=null){var e=i.cloneContents(),o=this._changeCase(e,"Lower"),s=n(o).clone(),u=document.createElement("div");n(u).append(n(s));u.innerHTML!=null&&u.innerHTML!=""&&this._getWindow().document.execCommand("inserthtml",!1,u.innerHTML)}else{var h=r.nodeValue.substring(i.startOffset,i.endOffset).toLowerCase(),c=r.nodeValue.substr(0,i.startOffset),l=r.nodeValue.substring(i.endOffset);r.nodeValue=c+h+l}}else{if(this._getWindow().document.selection.type.toUpperCase()=="control")return;this._seleText=t.isNullOrUndefined(this._seleText)?"":this._seleText;this._getDocument().selection.createRange().pasteHTML(this._seleText.toLowerCase())}this._trigger("execute",{commandName:"lowercase"})},_listIndent:function(n){var i,r;return(i=n.previousSibling,i&&this._isListNode(i))?(i.appendChild(n),!0):i&&i.nodeName=="LI"&&this._isListNode(i.lastChild)?(i.lastChild.appendChild(n),this._combineLists(n.lastChild,i.lastChild,n),!0):(i=n.nextSibling,i&&this._isListNode(i))?(i.insertBefore(n,i.firstChild),!0):i&&i.nodeName=="LI"&&this._isListNode(n.lastChild)?!1:(i=n.previousSibling,i&&i.nodeName=="LI")?(r=t.buildTag(n.parentNode.nodeName)[0],i.appendChild(r),r.appendChild(n),this._combineLists(n.lastChild,r,n),!0):!0},_combineLists:function(t,i,r){var u;if(this._isListNode(t)){while(u=r.lastChild.firstChild)i.appendChild(u);n(t).remove()}},_isListNode:function(n){return n&&/^(OL|UL)$/.test(n.nodeName)},_isFirstChild:function(n){return n.parentNode.firstChild==n},_isLastChild:function(n){return n.parentNode.lastChild==n},_removeEmptyList:function(t){t&&n(t).children().length===0&&n(t).remove()},_listOutdent:function(t){var r=n(t.parentNode),i=r[0].parentNode;return(t=n(t),this._isFirstChild(t[0])&&this._isLastChild(t[0]))?(i.nodeName=="LI"?(t.insertAfter(i),this._removeEmptyList(i),r.remove()):this._isListNode(i)?r.remove():this.executeCommand("outdent",!1),!0):this._isFirstChild(t[0])?(i.nodeName=="LI"?(t.insertAfter(i),t[0].appendChild(r[0]),this._removeEmptyList(i)):this._isListNode(i)?i.insertBefore(t[0],r[0]):this.executeCommand("outdent",!1),!0):this._isLastChild(t[0])?(i.nodeName=="LI"?t.insertAfter(i):this._isListNode(i)?t.insertAfter(r[0]):this.executeCommand("outdent",!1),!0):(this.executeCommand("outdent",!1),!1)},_updateIndent:function(i){t.isNullOrUndefined(this._toolBarObj)||(n("#"+this._rteId+"_indent").hasClass("e-disable")&&this._toolBarObj.enableItemByID(this._rteId+"_indent"),i&&/^(LI)$/.test(i.nodeName)&&n(i).parents(i.parentNode.nodeName).last().find("li").index(i)===0&&this._toolBarObj.disableItemByID(this._rteId+"_indent"))},_updateCount:function(){t.isNullOrUndefined(this.model)||(this.model.showFooter&&this.model.showWordCount&&this._wordCount.html(this._getLocalizedLabels("words")+" : "+(n.trim(this._getText())!=""?n.trim(this._getText()).split(/\W+/).length:0)),this.model.showFooter&&this.model.showCharCount&&this._charCount.html(this._getLocalizedLabels("characters")+" : "+this._getText().length))},_updateTagInfo:function(i){var f="",e,o=1,r,u;if(t.isNullOrUndefined(i)||(i.localName=="body"||i.localName=="html")&&(i=this._getSelectedNode()),this._curNode=t.isNullOrUndefined(i)?"":i.tagName?i.tagName.toLowerCase():"html",this.model.showFooter&&this.model.showHtmlTagInfo){if(this._curNode!="html"&&this._curNode!==""){for(r=n(i).parents(),u=r.length-1;u>=0;u--)e=r[u].tagName.toLowerCase(),e!="html"?f+=" » "+e:o++;f+=" » "+this._curNode;n(i).parents().length>0&&(t.isNullOrUndefined(r[r.length-o])||(this._pTag=r[r.length-o].tagName.toLowerCase()))}this._tags=f;this._responsiveTagList()}},_responsiveTagList:function(){n(this._htmlInfo).html(this._tags);n(this._rteWapper).outerWidth()<n(this._rteWapper).find(".e-rte-footer-left").outerWidth()+n(this._rteWapper).find(".e-rte-footer-right").outerWidth()?n(this._htmlInfo).html(" » "+this._pTag+" » ... ...  » "+this._curNode):n(this._htmlInfo).html(this._tags)},_updateValue:function(){var n=this._updateXhtml();this.model.enableHtmlEncode&&(n=this._encode(this._decode(n)));this.value(n);this.element.val(n)},_imageXhtml:function(n){for(var v=/<img(.*?)>/ig,c,u=0,i=[],o,r,f;(c=v.exec(n))!==null;)i.push(c[0].toString());for(o=[],o=i.slice(0),r=0;r<i.length;r++)i[r].indexOf("/")==-1?i[r]=i[r].substr(0,i[r].length)+"/"+i[r].substr(i[r].length-1,i[r].length):i[r].lastIndexOf("/")!=i[r].length-2&&(i[r]=i[r].substr(0,i[r].length-1)+"/"+i[r].substr(i[r].length-1,i[r].length));var l=/(alt)=("[^"]*")/i,e=/(src)=("[^"]*")/g,a=/(src)=('[^"]*')/g;for(r=0;r<i.length;r++){var y=t.isNullOrUndefined(l.exec(i[r]))?/(alt)=('[^"]*')/i.exec(i[r]):l.exec(i[r]),p=t.isNullOrUndefined(e.exec(i[r]))?a.exec(i[r]):e.exec(i[r]),s=t.isNullOrUndefined(i[r].match(e))?i[r].match(a):i[r].match(e),h=t.isNullOrUndefined(i[r].match(/(alt)=("[^"]*")/g))?i[r].match(/(alt)=('[^"]*')/g):i[r].match(/(alt)=("[^"]*")/g);if(y==null&&h==null)i[r]=i[r].substr(0,i[r].length-2)+' alt=""'+i[r].substr(i[r].length-2,i[r].length);else for(u=h.length-1;u>0;u--)i[r]=i[r].replace(h[u],"");if(p==null&&s==null)i[r]=i[r].substr(0,i[r].length-2)+' src=""'+i[r].substr(i[r].length-2,i[r].length);else for(u=s.length-1;u>0;u--)i[r]=i[r].replace(s[u],"")}for(f=0;f<i.length;f++)n=n.replace(o[f],i[f]);return n},_tagCssReplace:function(n,i,r){var f=/(style)=("[^"]*")/i.exec(i),u;if(f!=null)return u=f[0],n!=""&&(u=u.substr(0,u.length-1)+n+';"'),t.isNullOrUndefined(n)||(i=i.replace(r[0],"").replace(f[0],u)),i},_updateIndentStatus:function(){n(this._getSelectedNode()).closest("BLOCKQUOTE").length>0?this.enableToolbarItem("outdent"):this.disableToolbarItem("outdent")},_replaceHeightWidth:function(n,i){var u=n.exec(i),r;return t.isNullOrUndefined(u)||(r=u[0],r=r.replace(/\"/gi,"").replace("=",":")),this._tagCssReplace(r,i,u)},_typeXhtmlValidation:function(){var n=styleRegval[0];n=n=='type="a"'?n.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("a","lower-alpha"):n=='type="A"'?n.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("A","upper-alpha"):n=='type="1"'?n.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("1","decimal"):n=='type="i"'?n.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("i","lower-roman"):n=='type="I"'?n.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("I","upper-roman"):n.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type")},_getCssXhtml:function(n,i){var u=n.exec(i),r;return t.isNullOrUndefined(u)||(r=u[0],r=r.replace(/\"/gi,"").replace("=",":").replace("valign","text-align").replace("align","text-align"),i=i.replace(u[0],'style="'+r+';"')),i},_styleXhtml:function(n){for(var v=/<((?:(?!\/)).)*?>/ig,a,r=[],c,u,f,e,o,s,l,h,i;(a=v.exec(n))!==null;)r.push(a[0].toString());for(c=[],c=r.slice(0),i=0;i<r.length;i++){if(r[i].indexOf("style=")!=-1){if(r[i].indexOf("height=")!=-1&&(e=/( height)=("[^"]*")/i,r[i]=this._replaceHeightWidth(e,r[i])),r[i].indexOf("width=")!=-1&&(o=/( width)=("[^"]*")/i,r[i]=this._replaceHeightWidth(o,r[i])),r[i].indexOf("type=")!=-1&&(s=/( type)=("[^"]*")/i,u=s.exec(r[i]),t.isNullOrUndefined(u)||(f=this._typeXhtmlValidation(r[i])),r[i]=this._tagCssReplace(f,r[i],u)),r[i].indexOf("valign=")!=-1){var l=/( valign)=("[^"]*")/i,u=l.exec(r[i]),f=u[0];f=r[i].indexOf("vertical-align:")!=-1?"":f.replace(/\"/gi,"").replace("=",":").replace("valign","vertical-align");r[i]=this._tagCssReplace(f,r[i],u)}r[i].indexOf("align=")!=-1&&(h=/( align)=("[^"]*")/i,u=h.exec(r[i]),t.isNullOrUndefined(u)||(f=u[0],f=r[i].indexOf("text-align:")!=-1?"":f.replace(/\"/gi,"").replace("=",":").replace("align","text-align")),r[i]=this._tagCssReplace(f,r[i],u))}r[i].indexOf("style=")==-1&&(r[i].indexOf("height=")!=-1&&(e=/(height)=("[^"]*")/i,r[i]=this._getCssXhtml(e,r[i])),r[i].indexOf("width=")!=-1&&(o=/(width)=("[^"]*")/i,r[i]=this._getCssXhtml(o,r[i])),r[i].indexOf("type=")!=-1&&(s=/( type)=("[^"]*")/i,r[i]=this._getCssXhtml(s,r[i])),r[i].indexOf("valign=")!=-1&&(l=/(valign)=("[^"]*")/i,r[i]=this._getCssXhtml(l,r[i])),r[i].indexOf("align=")!=-1&&(h=/(align)=("[^"]*")/i,r[i]=this._getCssXhtml(h,r[i])))}for(i=0;i<r.length;i++)n=n.replace(c[i],r[i]);return n},_getFormatXhtml:function(n,t){for(var r=[],u,i;(u=n.exec(t))!=null;)r.push(u[0]);for(i=0;i<r.length;i++)t=t.replace(r[i],"")},_startXhtml:function(n){if(n.indexOf("start=")!=-1)n=this._getFormatXhtml(/start=\"(.*?)\"/ig,n);return n},_fontXhtml:function(n){if(n.indexOf("<font")!=-1)n=this._getFormatXhtml(/<font(.*?)>/ig,n);return n},_filerXhtmlNode:function(n,t){for(var i=[],r;(r=n.exec(t))!=null;)i.push(r[0]);return i},_replaceXhtmlNode:function(n,t,i){for(var r=0;r<n.length;r++)t=t.replace(i[r],n[r]);return t},_tdXhtml:function(n){var t=[],r,i,u;for(t=this._filerXhtmlNode(/<td((?:(?!<\/td>).))*?<td/ig,n),r=[],r=t.slice(0),i=0;i<t.length;i++)u=t[i].lastIndexOf("<td"),t[i]=t[i].substr(0,u)+"<\/td>"+t[i].substr(u,t[i].length);return this._replaceXhtmlNode(t,n,r)},_ptagXhtml:function(n){var f=/<\/p>((?:(?!<p).))*<\/p>/ig,r,i=[],u,t;if((r=f.exec(n))!=null)while((r=f.exec(n))!=null)i.push(r[0]);for(u=[],u=i.slice(0),t=0;t<i.length;t++)i[t].indexOf("<p")==-1&&(i[t]=i[t].substr(0,i[t].length-4));for(t=0;t<i.length;t++)n=n.replace(u[t],i[t]);return n},_getUpdaeNodeXhtml:function(n,t,i){for(var r;(r=n.exec(t))!=null;)i.push(r[0]);return i},_replaceUpdateXhtml:function(n,t,i){for(var r=[],r=this._getUpdaeNodeXhtml(n,t,r),u=0;u<r.length;u++)t=t.replace(r[u],i);return t},_replaceXhtmlVal:function(n,t,i){for(var r=0;r<n.length;r++)t=t.replace(i[r],n[r]);return t},_replaceTagUpdateXhtml:function(n,t,i,r){var u=[],f;return u=this._getUpdaeNodeXhtml(n,t,u),f=[],f=u.slice(0),u[0]=i+u[0]+r,t.replace(f[0],u[0])},_replaceTagXHTML:function(n,t){var i=[],u,r;for(i=this._getUpdaeNodeXhtml(n,t,i),u=[],u=i.slice(0),r=0;r<i.length;r++)i[r]=i[r].replace(/<br\/>/gi,"");return this._replaceXhtmlVal(i,t,u)},_replaceInputParams:function(n,t){var i=[],u,r,f;for(i=this._getUpdaeNodeXhtml(n,t,i),u=[],u=i.slice(0),r=0;r<i.length;r++)f=i[r].indexOf(">"),i[r]=i[r].substr(0,f)+"/"+i[r].substr(f,i[r].length-1);return this._replaceXhtmlVal(i,t,u)},_updateXhtml:function(){var w=this._getDocument().body.innerHTML,n,b,et,ct,pt,p,lt,ft,u,k,st,wt,d,at,rt,i,s,l,ot,g,v,ht,nt,o,h,bt,kt,a,vt,dt,c,gt,f,y,tt,it,e,yt,r;if(this.model.enableXHTML){if(w=w.replace(/hhh/g,"").replace(/<br>/g,"<br/>").replace(/contenteditable="false"/g,"").replace(/contenteditable="true"/g,"").replace(/&nbsp;/g," ").replace(/<hr>/g,"<hr/>").replace(/cellspacing =[0-9]/g,"").replace(/cellpadding  =[0-9]/g,""),this.value(w),this._xhtmlTagValidation(),w=this.value(),n=w.replace(/\s+/g," ").replace(/> </gi,"><"),n.indexOf("<?xml")!=-1)for(var ni=/<?xml:(.*?)>/ig,ut=[],b=0;(xmlTemp=ni.exec(n))!=null;)f=n.indexOf("<?xml"),ut[b]=xmlTemp[0],ut[b]=n.substr(f,ut[b].length+2),n=n.replace(ut[b],""),b++;if(n.indexOf("<table")!=-1){for(ft=/<table(.*?)<\/table>/ig,u=[],u=this._getUpdaeNodeXhtml(ft,n,u),k=[],k=u.slice(0),r=0;r<u.length;r++)if(u[r]=u[r].replace(/<p>/gi,"").replace(/<\/p>/gi,""),u[r].indexOf("<p")!=-1)for(b=0;b<u[r].length;b++)if(et=u[r].indexOf("<p"),ct=0,et!=-1)for(f=et+4;f<u[r].length-7;f++)u[r].charAt(f)==">"&&ct==0&&(u[r]=u[r].substr(0,et)+u[r].substr(f+1,u[r].length-1),ct++);n=this._replaceXhtmlVal(u,n,k)}if(n.indexOf("<td")!=-1)for(r=0;r<2;r++)n=this._tdXhtml(n);if(n.indexOf("<tr")!=-1){for(pt=/<tr(.*?)>(?!<\/td>)/ig,p=[],p=this._getUpdaeNodeXhtml(pt,n,p),lt=[],lt=p.slice(0),r=0;r<p.length;r++)p[r].indexOf("<\/td>")!=-1&&(p[r]=p[r].replace("<\/td>",""));for(n=this._replaceXhtmlVal(p,n,lt),ft=/<tr(.*?)<\/tr>/ig,u=[],u=this._getUpdaeNodeXhtml(ft,n,u),k=[],k=u.slice(0),r=0;r<u.length;r++)h=u[r].lastIndexOf("<\/tr>"),ot=u[r].charAt(h-5)+u[r].charAt(h-4)+u[r].charAt(h-3)+u[r].charAt(h-2)+u[r].charAt(h-1),ot!="<\/td>"&&(u[r]=u[r].substr(0,h)+"<\/td>"+u[r].substr(h,u[r].length));n=this._replaceXhtmlVal(u,n,k)}if(n.indexOf("<input")!=-1&&(st=/<input((?:(?!\/).))*?>/ig,n=this._replaceInputParams(st,n),n=n.replace(/<\/input>/gi,"")),n.indexOf("<param")!=-1&&(st=/<param((?:(?!\/).))*?>/ig,n=this._replaceInputParams(st,n),n=n.replace(/<\/param>/gi,"")),n.indexOf("<p ")!=-1||n.indexOf("<p>")!=-1){if(wt=/<p(.*)<\/p>/ig,d=[],d=this._getUpdaeNodeXhtml(wt,n,d),at=[],at.slice(0),rt=d[0].length-1,i=d[0],i.indexOf("<p")!=-1)for(s=i.indexOf("<p");s<=rt;s++)if(h="",r=0,s<rt-3&&(h=i.charAt(s)+i.charAt(s+1)),h=="<p")for(l=s+1;l<=rt;l++)if((ot=i.charAt(l)+i.charAt(l+1)+i.charAt(l+2)+i.charAt(l+3))=="<\/p>"&&r++,(ot=i.charAt(l)+i.charAt(l+1))=="<p"){if(r==0&&i.indexOf("<div")!=-1&&(g=i.substr(s,l-s),g.indexOf("<div")!=-1)){for(v=g.indexOf("<div"),ht=0,o=s+v+1;o<i.length-1;o++)h=i.charAt(o)+i.charAt(o+1)+i.charAt(o+2)+i.charAt(o+3)+i.charAt(o+4)+i.charAt(o+5),h=="<\/div>"&&ht==0&&(nt=o);i=i.substr(0,s+v)+"<\/span><\/p>"+i.substr(s+v,-(s+v)+nt+6)+"<p><span>"+i.substr(nt+6,i.length-1);r++}if(r==0){if(i.indexOf("<table")!=-1&&(g=i.substr(s,l-s),g.indexOf("<table")!=-1)){for(v=g.indexOf("<table"),ht=0,o=s+v+1;o<i.length-1;o++)h=i.charAt(o)+i.charAt(o+1)+i.charAt(o+2)+i.charAt(o+3)+i.charAt(o+4)+i.charAt(o+5)+i.charAt(o+6)+i.charAt(o+7),h=="<\/table>"&&ht==0&&(nt=o);i=i.substr(0,s+v)+"<\/span><\/p>"+i.substr(s+v,-(s+v)+nt+8)+"<p><span>"+i.substr(nt+8,i.length-1);r++}r==0&&(i=i.substr(0,l-1)+"<\/p>"+i.substr(l,i.length-1),rt++,r++)}}for(i=i.replace(/<\/p><\/p>/gi,"<\/p>"),bt=[],bt=d.slice(0),r=0;r<2;r++)i=this._ptagXhtml(i);for(kt=/<p(.*?)<\/p>/ig,a=[],a=this._getUpdaeNodeXhtml(kt,i,a),vt=[],vt.slice(0),f=0;f<a.length;f++)a[f].indexOf("<table")!=-1&&(y=/<table(.*)<\/table>/ig,a[f]=this._replaceTagUpdateXhtml(y,a[f],"<\/span><\/p>","<p><span>")),a[f].indexOf("<div")!=-1&&(y=/<div(.*)<\/div>/ig,a[f]=this._replaceTagUpdateXhtml(y,a[f],"<\/span><\/p>","<p><span>"));i=this._replaceXhtmlVal(a,i,vt);n=n.replace(at[0],i)}if(n.indexOf("<span")!=-1){for(dt=/<span(.*?)<\/span>/ig,c=[],c=this._getUpdaeNodeXhtml(dt,n,c),gt=[],sapnEX=c.slice(0),f=0;f<c.length;f++)c[f].indexOf("<table")!=-1&&(y=/<table(.*)<\/table>/ig,c[f]=this._replaceTagUpdateXhtml(y,c[f],"<\/span>","<span>")),c[f].indexOf("<div")!=-1&&(y=/<div(.*)<\/div>/ig,c[f]=this._replaceTagUpdateXhtml(y,c[f],"<\/span>","<span>")),c[f].indexOf("<p")!=-1&&(y=/<p(.*)<\/p>/ig,c[f]=this._replaceTagUpdateXhtml(y,c[f],"<\/span>","<span>"));n=this._replaceXhtmlVal(c,n,gt)}if(n.indexOf("<ol")!=-1&&(tt=/<ol(.*?)<\/ol>/ig,n=this._replaceTagXHTML(tt,n)),n.indexOf("<table")!=-1&&(tt=/<table(.*?)><\/table>/ig,n=this._replaceTagXHTML(tt,n)),n.indexOf("style")!=-1&&(tt=/style="(.*?)"/ig,n=this._replaceTagXHTML(tt,n)),t.isNullOrUndefined(this._fontXhtml(n))||(n=this._fontXhtml(n)),(n.indexOf("<br ")!=-1||n.indexOf("<br>")!=-1)&&(e=/<br(.*?)>/ig,n=this._replaceUpdateXhtml(e,n,"<br/>")),(n.indexOf("<strong ")!=-1||n.indexOf("<strong>")!=-1)&&(e=/<strong((?:(?!r).))*?>/ig,n=this._replaceUpdateXhtml(e,n,"<b>").replace(/<\/strong>/gi,"<\/b>")),n.indexOf("<strong ")!=-1&&(e=/<strong (.*?)>/ig,n=this._replaceUpdateXhtml(e,n,"<b>").replace(/<\/strong>/gi,"<\/b>")),n.indexOf("<u")!=-1&&(e=/<u((?:(?!l).))*?>/ig,n=this._replaceUpdateXhtml(e,n,'<span style="text-decoration: underline;">').replace(/<\/u>/gi,"<\/span>")),n.indexOf("<hr")!=-1&&(e=/<hr(.*?)>/ig,it=[],n=this._replaceUpdateXhtml(e,n,"<hr/>")),t.isNullOrUndefined(this._startXhtml(n))||(n=this._startXhtml(n)),n.indexOf("v:shapes=")!=-1&&(e=/v:shapes=\"(.*?)\"/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("v:")!=-1&&(e=/<v:(.*?)>/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("/v:")!=-1&&(e=/<\/v:(.*?)>/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("o:")!=-1&&(e=/<o:(.*?)>/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("/o:")!=-1&&(e=/<\/o:(.*?)>/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("role=")!=-1&&(e=/role=\"(.*?)\"/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("target=")!=-1&&(e=/target=\"(.*?)\"/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("language=")!=-1&&(e=/language=\"(.*?)\"/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("lang=")!=-1)for(e=/lang=\"(.*?)\"/ig,it=this._getUpdaeNodeXhtml(e,n,it),yt=[],yt=it.slice(0),r=0;r<it.length;r++)n=n.replace(yt[r],it[r].toLowerCase());n=n.replace(/<\/td><\/td>/gi,"<\/td>").replace(/<\/th><\/td>/gi,"<\/th>");n="<div>"+n+"<\/div>";w=n.replace(/&quot;/g,"'").replace(/cellspacing=("[0-9]")/g,"").replace(/cellSpacing=("[0-9]")/g,"").replace(/cellpadding=("[0-9]")/g,"").replace(/cellPadding=("[0-9]")/g,"").replace(/border=("[^"]")/g,"").replace(/<!--(.*?)-->/gm,"").replace(/(vAlign)=("[^"]*")/g,"").replace(/(valign)=("[^"]*")/g,"").replace(/(colspan)=("[^"]*")/g,"").replace(/(colSpan)=("[^"]*")/g,"");this.value(w)}return w},_setClearFormat:function(){var n=this._rteToolbar.find(".e-active").length},_updateToolbarStatus:function(){var i,t;try{if(i=!1,this.model.showToolbar){for(t=0;t<this._styleItems.length;t++)this._getCommandStatus(n.trim(this._styleItems[t].toLowerCase()))?(this._toolBarObj.selectItemByID(this._rteId+"_"+this._styleItems[t]),n("#"+this._rteId+"_"+this._styleItems[t]).addClass("e-isactive")):(this._toolBarObj.deselectItemByID(this._rteId+"_"+this._styleItems[t]),n("#"+this._rteId+"_"+this._styleItems[t]).removeClass("e-isactive"));for(t=0;t<this._alignItems.length;t++)this._getCommandStatus(n.trim(this._alignItems[t].toLowerCase()))?(this._toolBarObj.selectItemByID(this._rteId+"_"+this._alignItems[t]),i=!0):this._toolBarObj.deselectItemByID(this._rteId+"_"+this._alignItems[t]);for(i||this._toolBarObj.selectItemByID(this._rteId+"_justifyLeft"),t=0;t<this._scriptsItems.length;t++)this._getCommandStatus(n.trim(this._scriptsItems[t].toLowerCase()))?(this._toolBarObj.selectItemByID(this._rteId+"_"+this._scriptsItems[t]),n("#"+this._rteId+"_"+this._scriptsItems[t]).addClass("e-isactive")):(this._toolBarObj.deselectItemByID(this._rteId+"_"+this._scriptsItems[t]),n("#"+this._rteId+"_"+this._scriptsItems[t]).removeClass("e-isactive"));this._getCommandStatus("InsertOrderedList")?(this._toolBarObj.selectItemByID(this._rteId+"_orderedList"),n("#"+this._rteId+"_orderedList").addClass("e-isactive")):(this._toolBarObj.deselectItemByID(this._rteId+"_orderedList"),n("#"+this._rteId+"_orderedList").removeClass("e-isactive"));this._getCommandStatus("InsertUnorderedList")?(this._toolBarObj.selectItemByID(this._rteId+"_unorderedList"),n("#"+this._rteId+"_unorderedList").addClass("e-isactive")):(this._toolBarObj.deselectItemByID(this._rteId+"_unorderedList"),n("#"+this._rteId+"_unorderedList").removeClass("e-isactive"));this._updateIndentStatus()}}catch(r){}},_updateFormat:function(){try{if(this._formatDDL&&this.model.showToolbar&&!t.isNullOrUndefined(this.model.tools.formatStyle)){var i=n.trim(this._getCommandValue("formatblock").replace(/'/g,""));if(this._isIE())switch(i){case"Heading 6":i="<h6>";break;case"Heading 5":i="<h5>";break;case"Heading 4":i="<h4>";break;case"Heading 3":i="<h3>";break;case"Heading 2":i="<h2>";break;case"Heading 1":i="<h1>"}else i="<"+i+">";this._formatDDL.hasClass("e-dropdownlist")&&(t.isNullOrUndefined(i)||i==""?this._formatDDL.ejDropDownList({value:this._getLocalizedLabels("format")}):!n(this._formatDDL).parents("ul.e-rte-format").length==0&&this._formatDDL.ejDropDownList("setSelectedValue",i))}}catch(r){}},_updateFontOptionStatus:function(){var i,r;try{this.model.showFontOption&&this.model.showToolbar&&!t.isNullOrUndefined(this.model.tools.font)&&(i=n.trim(this._getCommandValue("fontname").replace(/"/g,"").replace(/'/g,"").replace(/, /g,",")),(t.isNullOrUndefined(i)||i=="")&&(i="Segoe UI"),!t.isNullOrUndefined(this._fontStyleDDL)&&this._fontStyleDDL.hasClass("e-dropdownlist")&&!n(this._fontStyleDDL).parents("ul.e-rte-fontgroup").length==0&&this._fontStyleDDL.ejDropDownList("setSelectedValue",i),r=this._getCommandValue("fontsize"),(t.isNullOrUndefined(r)||r=="")&&(r=2),!t.isNullOrUndefined(this._fontSizeDDL)&&this._fontSizeDDL.hasClass("e-dropdownlist")&&!n(this._fontSizeDDL).parents("ul.e-rte-fontgroup").length==0&&this._fontSizeDDL.ejDropDownList("setSelectedValue",r))}catch(u){}},_getSelText:function(){var n="",r,t,i;return this._isIE()?n=this._seleText:window.getSelection?(r=this._getWindow().getSelection(),i=this._saveSelection(),t=document.createTextNode(i.toString()),n=t.nodeValue):document.getSelection&&(n=this._getWindow().document.getSelection()),n},_isIE:function(){var n=!1,i=t.browserInfo();return i.name=="msie"&&(n=!0),n},_isIE8:function(){var n=!1,i=t.browserInfo();return i.name=="msie"&&i.version=="8.0"&&(n=!0),n},_isUrl:function(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(n)},_pasteHtml:function(t,i){var e,r,l,h,o,a,c,f,v,s,u,y,p;if(this._pasteAPIFlag?this._isIE()&&this._focus():this._focus(),window.getSelection){if(e=this._getWindow().getSelection(),e.getRangeAt&&e.rangeCount){for(r=this._pasteFlag?this._pasteRangeVal:e.getRangeAt(0),l=r.commonAncestorContainer,h=l.nodeType==3?n(l).parentsUntil("body"):n(l).children(),u=h.length-1;u>=0;u--)if(h[u].textContent==r.toString()&&h[u].nodeName.toLowerCase()!="li"){r.selectNode(h[u]);break}if(r.deleteContents(),o=document.createElement("div"),o.innerHTML=t,a=this._getDocument().createDocumentFragment(),v=o.firstChild,this._pasteFlag||this._pasteAPIFlag){while(c=o.firstChild)v!=c?f=v.appendChild(c):o.removeChild(o.firstChild);f=a.appendChild(v)}else while(c=o.firstChild)f=a.appendChild(c);r.insertNode(a);f&&!i?(r=r.cloneRange(),r.setStartAfter(f),r.collapse(!0),e.removeAllRanges(),e.addRange(r)):(r=this.createRange(),r.setStart(f,f.data.length),r.setEnd(f,f.data.length),e.removeAllRanges(),e.addRange(r))}}else if(this._getDocument().selection&&this._getDocument().selection.type!="Control")if(!this._ieSelectionRange||this._ieSelectionRange.offsetLeft==0&&this._ieSelectionRange.offsetTop==0&&this._ieSelectionRange.boundingHeight==0)this._getDocument().body.insertAdjacentHTML("afterBegin",t);else if(this._pasteFlag&&this.selectRange(this._pasteRangeVal),s=this._ieParents(this._getRange()),y=!1,this._pasteAPIFlag)this._getRange().pasteHTML(t);else{for(p=this._getRange().text,u=s.length-1;u>=0;u--)if(s[u].innerText==p&&s[u].nodeName.toLowerCase()!="li"){s[u].nodeName=="BODY"?s[u].innerHTML=t:s[u].outerHTML=t;y=!0;break}y||this._getRange().pasteHTML(t)}this._pasteAPIFlag=this._pasteFlag=!1},_ieParents:function(n){var t=[];for(rangeval=this._isIE8()?n.duplicate():n.cloneRange(),n.parentElement=rangeval.parentElement();n.parentElement.nodeName!="HTML";){if(n.parentElement.nodeName=="TD"||n.parentElement.nodeName=="TH")break;t.push(n.parentElement);n=n.parentElement}return t},_getLocalizedLabels:function(n){return t.RTE.Locale[this.model.locale][n]===r?t.RTE.Locale["en-US"][n]:t.RTE.Locale[this.model.locale][n]},_getSelectedNode:function(){var u=this._getRange(),i,n=this._ieSelectionRange&&u.offsetLeft==0&&u.offsetTop==0&&u.boundingHeight==0?this._ieSelectionRange:u,t=n.startContainer,r=n.endContainer,f=n.startOffset,e=n.endOffset;return n?n.setStart?(i=n.commonAncestorContainer,!n.collapsed&&(t==r&&e-f<2&&t.hasChildNodes()&&(i=t.childNodes[f]),t.nodeType===3&&r.nodeType===3&&(t=t.length===f?this._skipEmptyNode(t.nextSibling,!0):t.parentNode,r=e===0?this._skipEmptyNode(r.previousSibling,!1):r.parentNode,t&&t===r)))?t:i&&i.nodeType==3?i.parentNode:i:n.item?n.item(0):n.parentElement():this._getDocument().selection},_skipEmptyNode:function(n,t){for(var i=n;n&&n.nodeType===3&&n.length===0;)n=t?n.nextSibling:n.previousSibling;return n||i},_getSelection:function(){var n;return this._isIE()?(n=this._getDocument().selection.createRange(),n.type=this._getDocument().selection.type):(n=window.getSelection(),n.rangeCount&&(sText=n.getRangeAt(0)),n.type=this._getWindow().getSelection().type),n},_saveSelection:function(){var i=this._getWindow(),r=i.document,n=i.getSelection?i.getSelection():r.selection,t,u;return n&&(n.createRange?t=n.createRange():n.rangeCount>0&&n.getRangeAt(0)?t=n.getRangeAt(0):n.anchorNode&&n.focusNode&&r.createRange?(t=r.createRange(),t.setStart(n.anchorNode,n.anchorOffset),t.setEnd(n.focusNode,n.focusOffset),t.collapsed!==n.isCollapsed&&(t.setStart(n.focusNode,n.focusOffset),t.setEnd(n.anchorNode,n.anchorOffset))):r.createRange()?(t=r.createRange(),t.setStart(i.document.body,0),t.setEnd(i.document.body,0)):(u=document.getElementsByTagName("iframe")[0],i=u.contentWindow,t=i.document.createRange(),t.setStart(i.document.body,0),t.setEnd(i.document.body,0))),t},_restoreSelection:function(n){var i=this._getWindow(),r=i.document,t=i.getSelection?i.getSelection():r.selection;t&&n&&(n.select?n.select():t.removeAllRanges&&t.addRange&&(t.removeAllRanges(),t.addRange(n)))},_getRange:function(){var i,u,f,r,n;if(this._isIE8())return i=this._saveSelection(),u=this._ieSelectionRange&&i.offsetLeft==0&&i.offsetTop==0&&i.boundingHeight==0?this._ieSelectionRange:i,u;if(this._isIE())return this._ieSelection=window.getSelection&&(t.isNullOrUndefined(this._selectionRange)?!1:this._selectionRange.length>0)?this._selectionRange:this._saveSelection();if(this._getWindow().getSelection()&&this._getWindow().getSelection().rangeCount>0)return this._getWindow().getSelection().getRangeAt(0);f=document.getElementsByTagName("iframe")[0];r=f.contentWindow;try{n=r.document.createRange();n.setStart(r.document.body,0);n.setEnd(r.document.body,0)}catch(e){n=this._getDocument().createRange();n.setStart(this._getDocument().body,0);n.setEnd(this._getDocument().body,0)}return n},_setBackupData:function(){var t=this.getHtml(),i=this._backupArray.length;i==this.model.undoStackLimit+1&&this._backupArray.splice(0,1);t!=this._backupArray[i-1]&&this.model.undoStackLimit>0&&this._backupArray.push(t);this._undoRedoPosition=this._backupArray.length-1;this.model.showToolbar&&this._rteToolbar.find("li.e-rteItem-undo")&&this._backupArray.length>1&&!n("#"+this._rteId+"_undo").hasClass("e-rteTooldisable")&&this._toolBarObj.enableItemByID(this._rteId+"_undo")},_getSelectedHtmlString:function(){var i,e,o,r,f,u,t,s;if(typeof document.selection!="undefined"&&this._isIE8()){for(i=this._ieParents(this._getRange()),e=!1,t=i.length-1;t>=0;t--)if(i[t].innerText==this._getRange().text){o=i[t].nodeName=="BODY"?i[t].innerHTML:i[t].outerHTML;e=!0;break}return e||(o=this._getRange().htmlText.substring(0,1)=="<"?this._getRange().text:this._getRange().htmlText),o}for(r=this._getRange(),f=r.commonAncestorContainer,u=f.nodeType==3?n(f).parentsUntil("body"):n(f).children(),t=u.length-1;t>=0;t--)if(u[t].textContent!=""&&u[t].textContent==r.toString()){r.selectNode(u[t]);break}return s=document.createElement("div"),s.appendChild(r.cloneContents()),s.innerHTML},_getText:function(){var n=this._getDocument().body;if(n!=null)return this._isIE()?n.innerText:n.textContent},_validateMaxLength:function(n){if(this.model.maxLength!=null){var t=this.model.maxLength,i=this._getText();t<=i.length&&(n.keyCode<47||n.ctrlKey&&n.keyCode==65||n.ctrlKey&&n.keyCode==67||n.ctrlKey&&n.keyCode==86||n.ctrlKey&&n.keyCode==88||(this._keypressFlag=!1,this._cancelEvent(n)))}},_cancelEvent:function(n){return n.returnValue=!1,n.stopPropagation(),n.preventDefault(),!1},_alignToolUpdate:function(n){for(var t=0;t<this._alignItems.length;t++)this._alignItems[t]===n?this._toolBarObj.selectItemByID(this._rteId+"_"+n):this._toolBarObj.deselectItemByID(this._rteId+"_"+this._alignItems[t])},_getCommandStatus:function(n){return this._getDocument().queryCommandState(n)},_getCommandValue:function(n){var i=this._getDocument().queryCommandValue(n),r;if(this._isIE()){if(n=="fontname"){for(r=0;r<this.model.fontName.length;r++)if(i==this.model.fontName[r].text){i=this.model.fontName[r].value;break}(t.isNullOrUndefined(i)||i=="")&&(i=this.model.fontName[0].value)}if(n=="formatblock"){for(r=2;r<this.model.format.length;r++)if(i==this.model.format[r].text){i=this.model.format[r].value;break}i=="Normal"&&(i=this.model.format[0].value)}}return i},_undo:function(){this._undoRedoPosition>0&&(this.model.enableHtmlEncode?this.setHtml(this._decode(this._backupArray[this._undoRedoPosition-1])):this.setHtml(this._backupArray[this._undoRedoPosition-1]),this._undoRedoPosition--,this._focus(),this._updateFontOptionStatus(),this._updateFormat(),this._updateCount(),this._toggleEditTable(),this.model.isResponsive&&this._toolBarObj._liTemplte.removeClass("e-display-none"),this._toolBarObj.enableItemByID(this._rteId+"_redo"));this._undoRedoPosition==0&&(this._toolBarObj.disableItemByID(this._rteId+"_undo"),this._toolBarObj.enableItemByID(this._rteId+"_redo"));this._updateToolbarStatus();this._trigger("execute",{commandName:"undo"})},_getRedoContent:function(){return this.model.enableHtmlEncode?this._decode(this._backupArray[this._undoRedoPosition+1]):this._backupArray[this._undoRedoPosition+1]},_redo:function(){var i,n;this._undoRedoPosition!=this._backupArray.length&&(this._backupArray[this._undoRedoPosition+1]!=null?(i=this._getRedoContent(),this.setHtml(i),this._undoRedoPosition++):(n=this._getRedoContent(),t.isNullOrUndefined(n)||this.setHtml(n),this._undoRedoPosition=this._backupArray.length-2),this._focus(),this._updateToolbarStatus(),this._updateFontOptionStatus(),this._updateFormat(),this._updateCount(),t.isNullOrUndefined(this._toolBarObj)||(this._backupArray.length-1>0&&this._toolBarObj.enableItemByID(this._rteId+"_undo"),this._undoRedoPosition==this._backupArray.length-1&&this._toolBarObj.disableItemByID(this._rteId+"_redo")));this._trigger("execute",{commandName:"redo"})},_setContent:function(n){var i=this._getDocument();i==""||t.isNullOrUndefined(i)||(i.open(),i.write(n),i.close(),i.EditMode=!0)},_removeResizeObject:function(){n(this._getDocument()).find(".e-rteColumnResizer , .e-rteRowResizer , .e-rteLastcolumn").remove()},_tableMouseOver:function(i){(i.target.nodeName=="TABLE"||t.browserInfo().name==="mozilla"&&i.target.nodeName=="TD")&&(this._curTable=i.target.nodeName=="TD"?n(i.target).closest("table")[0]:i.target,this._removeResizeObject(),n(this._getDocument()).find(".e-rte-tablebox").remove(),this._tableResizeObject(n(this._curTable)))},_preventDefaultResize:function(){var n=this._getDocument();t.browserInfo().name==="msie"&&t.browserInfo().version==="11.0"?n.body.addEventListener("mscontrolselect",this._ieDefaultTableHandler):this._isIE()&&n.body.attachEvent("oncontrolselect",this._ieTableHandler);t.browserInfo().name==="mozilla"&&(n.designMode="on",n.execCommand("enableObjectResizing",!1,"false"),n.execCommand("enableInlineTableEditing",!1,"false"))},_tableResizeObject:function(i){var f,r,u;for(this.model.allowEditing&&this._preventDefaultResize(),f=parseInt(n(i).attr("cellspacing")?n(i).attr("cellspacing"):0),this._newcol=i.find("tr:first td").not(":first"),this._newRow=i.find("tr td:nth-child(1)"),this._newlas=i.find("tr:first td:last"),r=0;this._newcol.length>r;r++)n(this._getDocument().body).after('<div class ="e-rteColumnResizer"  unselectable="on" contenteditable="false" data-col ='+(r+1)+' style="top:'+n(this._newcol[r]).closest("table").offset().top+"px;left:"+n(this._newcol[r]).offset().left+"px;height:"+n(this._newcol[r]).closest("table").outerHeight()+"px;width:"+(5+f)+"px;margin-left: "+(-4-f)+'px;"><\/div>');for(r=0;this._newRow.length>r;r++)n(this._getDocument().body).after('<div class ="e-rteRowResizer" unselectable="on"  contenteditable="false" data-row ='+r+' style="top:'+(n(this._newRow[r]).offset().top+n(this._newRow[r]).height())+"px;left:"+n(this._newRow[r]).offset().left+"px;width:"+n(this._newRow[r]).closest("table").width()+"px;height:"+(5+f)+'px;"><\/div>');n(this._getDocument().body).after('<div class ="e-rteColumnResizer e-rtelastcol" data-col ='+this._newcol.length+'  contenteditable="false" style="top:'+n(this._newlas).closest("table").offset().top+"px;left:"+(n(this._newlas).offset().left+n(this._newlas).width())+"px;height:"+n(this._newlas).closest("table").outerHeight()+"px;width:"+(5+f)+'px;margin-left:3px;"><\/div>');this._botRigTab=t.buildTag("span.e-rte-tablebox e-rte-botrig","",{cursor:"nwse-resize",width:"5px",height:"5px",position:"absolute",display:"block",background:"#fff",border:"1px solid #000"},{});u=i.find("tr:last td:last:not(:has(>span.e-rte-tablebox))");u.length>0&&n(this._getDocument().body).after(n(this._botRigTab).css({left:parseInt(u.closest("table").width())+u.closest("table").offset().left+"px",top:parseInt(u.closest("table").height())+u.closest("table").offset().top+"px"}))},_ieDefaultTableHandler:function(n){n.preventDefault()},_ieTableHandler:function(){return!1},_tableCellStart:function(){this._tableInsertAt=this._saveSelection()},_tableCellSelect:function(i){var r,u=n(i.target),f=u.parent().index(),e=u.index();this._createTable.find("div.e-rte-tablecell").each(function(){r=n(this);r.index()<=e&&r.parent().index()<=f?r.addClass("e-active"):r.removeClass("e-active")});this._tblheaderDiv.html(e+1+"x"+(f+1)+this._getLocalizedLabels("table"));n(this._getDocument()).find("table.e-rte-tableremove").remove();t.isNullOrUndefined(this._tableInsertAt)||this._restoreSelection(this._tableInsertAt)},_tableCellLeave:function(){this._createTable.find("div.e-rte-tablecell").removeClass("e-active");n(this._getDocument()).find("table.e-rte-tableremove").remove();this._tblheaderDiv.html(this._getLocalizedLabels("createTable"))},_tableCellDown:function(i){var u=n(i.target),f=u.parent().index()+1,e=u.index()+1,r;this._focus();n(this._getDocument()).find("table.e-rte-tableremove").remove();t.isNullOrUndefined(this._tableInsertAt)||(this._restoreSelection(this._tableInsertAt),this._onInsertTable(f,e,!1));r=n(this._getDocument()).find("table.e-rte-table");this.model.enableRTL||this._on(r,"mouseover",this._tableMouseOver);r.attr({width:"99%"});this._createTable.ejDialog("close");this._setBackupData();this._onChange();this.model.isResponsive&&this._toolBarObj._liTemplte&&(this._toolBarObj._liTemplte.addClass("e-display-none"),this._toolBarObj.contstatus=!1)},_tableGenerator:function(n,i,r,u,f,e,o,s,h,c){var l="e-rte-table";r&&(l+=" e-rte-tableremove");u=t.isNullOrUndefined(u)||u==""?"width='100%'":"width='"+u+"'";f=t.isNullOrUndefined(f)||f==""?"":"height='"+f+"'";e=t.isNullOrUndefined(e)||e==""?"":"cellspacing='"+e+"'";o=t.isNullOrUndefined(o)||o==""?"":"cellpadding='"+o+"'";s=t.isNullOrUndefined(s)?"":" align='"+s+"'";switch(h){case"dotted":borderstyle="dotted";break;case"double":return this._border="style='border:3px double #5C5C5C;'",borderstyle="double","<table border='1' class='"+l+"' "+u+" "+f+" "+this._border+" "+e+" "+o+" "+s+">"+(c?"<caption><\/caption>":"")+Array(n+1).join("<tr>"+Array(i+1).join("<td><br _moz_dirty=''/><\/td>")+"<\/tr>")+"<\/table>";case"dashed":borderstyle="dashed";break;case"solid":borderstyle="solid";break;default:borderstyle="solid"}return borderstyle!="double"?(this._border="style='border:1px "+borderstyle+"#5C5C5C;'","<table border='1' class='"+l+"' "+u+" "+f+" "+this._border+" "+e+" "+o+" "+s+">"+(c?'<caption><br type="_moz"><\/caption>':"")+Array(n+1).join("<tr>"+Array(i+1).join("<td><br _moz_dirty=''/><\/td>")+"<\/tr>")+"<\/table>"):"<table border='1' class='"+l+"' "+u+" "+f+" "+this._border+" "+e+" "+o+" "+s+">"+(c?'<caption><br type="_moz"><\/caption>':"")+Array(n+1).join("<tr>"+Array(i+1).join("<td><br _moz_dirty=''/><\/td>")+"<\/tr>")+"<\/table>"},_openCustomTable:function(t){t.currentTarget.id==this._rteId+"_createCustomTableLink"?(n("#"+this._rteId+"_customTable_wrapper").css({"z-index":this._onGetMaxZindex()}),this._customTableDialog.ejDialog("open"),this._createTable.ejDialog("close"),this._widthFocusOut()):this._createTable.find("div.e-rte-eTblProperties").hasClass("e-disable")||(this._eTblManager(),n("#"+this._rteId+"_eTbl_wrapper").css({"z-index":this._onGetMaxZindex()}),this._eTblDialog.ejDialog("open"),this._createTable.ejDialog("close"),this._on(this._getTableObj("Width"),"focusout",this._widthFocusOut),this._widthFocusOut())},_createTableClose:function(i){!t.isNullOrUndefined(this._createTable)&&(!t.isNullOrUndefined(i)&&n(i.target).parents("#"+this._rteId+"_tables").length<=0||t.isNullOrUndefined(i))?t.isNullOrUndefined(this._createTable.data("ejDialog"))||((t.isNullOrUndefined(i)||i.target!=this._createTable[0]&&n(i.target).parents(".e-rte-table-picker").length<=0)&&(this._createTable.ejDialog("isOpened")&&this._createTable.ejDialog("close"),this._createTable.find("div.e-rte-eTblProperties").addClass("e-disable")),this._createTable.ejDialog("isOpened")&&this.model.isResponsive?this._toolBarObj._liTemplte.removeClass("e-display-none"):!this.model.isResponsive||t.isNullOrUndefined(i)||n(i.target).is(n("#"+this._toolBarObj.element[0].id+"_target"))||n(i.target).closest("div#"+this._toolBarObj.element[0].id+"_hiddenlist").length!=0||n(i.target).parents().hasClass("e-ddl-popup")||this._toolBarObj._liTemplte.addClass("e-display-none")):n(this._createTable.find("div.e-rte-eTblProperties").hasClass("e-disable")).addClass("e-disable")},_documentClick:function(n){if(this._createTableClose(n),this._isIE()&&!window.getSelection){var t=n.target.id;t==""&&(t=n.target.parentNode.id);(t==this._rteId+"_fontSizeDDL"||t==this._rteId+"_fontNameDDL"||t==this._rteId+"_formatDDL"||t==this._rteId+"_fontSizeDDL_dropdown"||t==this._rteId+"_fontNameDDL_dropdown"||t==this._rteId+"_formatDDL_dropdown")&&this._restoreSelection(this._selectionRange)}},_iframeFocus:function(i){!t.isNullOrUndefined(this._createTable)&&this._createTable.ejDialog("isOpened")&&this._createTable.ejDialog("close");!n(this._fontSizeDDL).parents("ul.e-rte-fontgroup").length==0&&!t.isNullOrUndefined(this._fontSizeDDL)&&this._fontSizeDDL.hasClass("e-dropdownlist")&&this._fontSizeDDL.ejDropDownList("hidePopup");!n(this._fontStyleDDL).parents("ul.e-rte-fontgroup").length==0&&!t.isNullOrUndefined(this._fontStyleDDL)&&this._fontStyleDDL.hasClass("e-dropdownlist")&&this._fontStyleDDL.ejDropDownList("hidePopup");!n(this._formatDDL).parents("ul.e-rte-format").length==0&&!t.isNullOrUndefined(this._formatDDL)&&this._formatDDL.hasClass("e-dropdownlist")&&this._formatDDL.ejDropDownList("hidePopup");t.isNullOrUndefined(this._createTable)||this._createTable.ejDialog("close");t.isNullOrUndefined(this._splitMenu)||this._splitMenu.hide(i);t.isNullOrUndefined(this._bgSplitMenu)||this._bgSplitMenu.hide(i);t.isNullOrUndefined(this._orderSplitObj)||this._orderSplitObj.hide(i);t.isNullOrUndefined(this._unOrderSplitObj)||this._unOrderSplitObj.hide(i);this._contentBeforfocus=this.value()},_updateKeyDownSelectStatus:function(n,t){n.hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+"_"+t):this._toolBarObj.selectItemByID(this._rteId+"_"+t)},_iframeKeyDown:function(i){var r,u;if(this._contentBeforfocus=this.value(),this.model.showToolbar&&this.model.allowKeyboardNavigation&&i)if(i.ctrlKey){i.keyCode==65?this._contolAKeyfalg=!0:t.isNullOrUndefined(this._contolAKeyfalg)?this._contolAKeyfalg:this._contolAKeyfalg=!1;u=this;switch(i.keyCode){case 48:return i.preventDefault(),n(this.getDocument().body).css({zoom:1,transform:"scale(1)","transform-origin":"0 0","-o-transform":"scale(1)","-o-transform-origin":"0 0","-webkit-transform":"scale(1)","-webkit-transform-origin":"0 0"}),n(u._toolBarObj.itemsContainer.find(".e-rteItem-zoomIn")).attr("title",u._getLocalizedLabels("zoomIn")+" 100%"),n(u._toolBarObj.itemsContainer.find(".e-rteItem-zoomOut")).attr("title",u._getLocalizedLabels("zoomOut")+" 100%"),u._zoomValue=1,!1;case 57:return i.preventDefault(),this._onKeyZoom("IN"),!1;case 173:case 189:return i.preventDefault(),this._onKeyZoom("OUT"),!1;case 80:return i.preventDefault(),this._onPrint(),!1;case 66:if(!i.shiftKey)return i.preventDefault(),r=this._toolBarItems.find("li.e-rteItem-bold"),r.hasClass("e-disable")||(this._onBold(),this._updateKeyDownSelectStatus(r,"bold")),!1;break;case 72:if(i.shiftKey)return i.preventDefault(),this._getPasteRangeVal(),this._sourceCodeManager(),!1;break;case 73:return i.preventDefault(),i.shiftKey?this._imageManager():(r=this._toolBarItems.find("li.e-rteItem-italic"),r.hasClass("e-disable")||(this._onItalics(),this._updateKeyDownSelectStatus(r,"italic"))),!1;case 85:return i.preventDefault(),i.shiftKey?this._onUpperCase():(r=this._toolBarItems.find("li.e-rteItem-underline"),r.hasClass("e-disable")||(this._onUnderLine(),this._updateKeyDownSelectStatus(r,"underline"))),!1;case 76:return i.preventDefault(),i.shiftKey?this._onLowerCase():this._toolBarItems.find("li.e-rteItem-justifyLeft").hasClass("e-disable")||(this._onJustifyLeft(),this._alignToolUpdate("justifyLeft")),!1;case 82:return i.preventDefault(),i.altKey?this.removeRow():i.shiftKey?this._onClearFormat():(r=this._toolBarItems.find("li.e-rteItem-justifyRight"),r.hasClass("e-disable")||(this._onJustifyRight(),this._alignToolUpdate("justifyRight"))),!1;case 69:if(i.shiftKey)return i.preventDefault(),this._openCustomTable(i),!1;if(!this._toolBarItems.find("li.e-rteItem-justifyCenter").hasClass("e-disable"))return i.preventDefault(),this._onJustifyCenter(),this._alignToolUpdate("justifyCenter"),!1;break;case 74:if(!this._toolBarItems.find("li.e-rteItem-justifyFull").hasClass("e-disable"))return i.preventDefault(),this._onJustifyFull(),this._alignToolUpdate("justifyFull"),!1;break;case 90:if(!this._toolBarItems.find("li.e-rteItem-undo").hasClass("e-disable"))return i.preventDefault(),this._onUndo(),this._toolBarItems.find("li.e-rteItem-redo").removeClass("e-disable"),this._toolBarObj.deselectItemByID(this._rteId+"_redo"),!1;break;case 89:if(!this._toolBarItems.find("li.e-rteItem-redo").hasClass("e-disable"))return i.preventDefault(),this._onRedo(),this._toolBarItems.find("li.e-rteItem-undo").addClass("e-disable"),this._toolBarObj.deselectItemByID(this._rteId+"_undo"),!1;break;case 67:if(i.altKey)return i.preventDefault(),this.removeColumn(),!1;if(i.shiftKey)return i.preventDefault(),this._getPasteRangeVal(),this._customTableDialog&&this._renderTableDialog(),this._customTableDialog.ejDialog("open"),!1;if(this._toolBarItems.find("li.e-rteItem-copy").hasClass("e-disable"))return i.preventDefault(),this._keypressFlag=!1,!1;break;case 88:if(this._toolBarItems.find("li.e-rteItem-cut").hasClass("e-disable"))return i.preventDefault(),this._keypressFlag=!1,!1;break;case 86:if(this._toolBarItems.find("li.e-rteItem-paste").hasClass("e-disable")||this.model.maxLength<=n.trim(this._getText()).length&&(t.isNullOrUndefined(this._contolAKeyfalg)?!0:this._contolAKeyfalg))return i.preventDefault(),this._keypressFlag=!1,!1;if(i.shiftKey)return i.preventDefault(),this._keypressFlag=!1,this._selectCommand("video"),!1;break;case 77:return i.preventDefault(),i.shiftKey?this._toolBarItems.find("li.e-rteItem-outdent").hasClass("e-disable")||(this._onOutdent(),this._indentdepth>0&&this._indentdepth--):this._toolBarItems.find("li.e-rteItem-indent").hasClass("e-disable")||(this._onIndent(),this._indentdepth++),!1;case 75:return i.preventDefault(),i.shiftKey?this._onUnlink():this._toolBarItems.find("li.e-rteItem-createLink").hasClass("e-disable")||this._hyperLinkManager(!1),!1;case 188:if(i.shiftKey)return i.preventDefault(),this._changeFontsize(!1),!1;break;case 190:if(i.shiftKey)return i.preventDefault(),this._changeFontsize(!0),!1;break;case 61:case 187:return i.preventDefault(),i.shiftKey?this._onSuperScript():this._onSubScript(),!1;case 79:if(i.shiftKey)return i.preventDefault(),this.executeCommand("insertorderedlist","listItem"),!1;if(i.altKey)return i.preventDefault(),this.executeCommand("insertunorderedlist","listItem"),!1;break;case 83:if(i.shiftKey)return i.preventDefault(),this._onStrikeThrough(),!1;break;case 70:if(i.shiftKey)return i.preventDefault(),this._selectCommand("fullScreen"),!1;if(!i.altKey)return i.preventDefault(),t.RTE.FindAndReplace&&this._showFindAndReplace(),!1;break;case 37:if(i.shiftKey)return i.preventDefault(),this.insertColumn(!0),!1;break;case 39:if(i.shiftKey)return i.preventDefault(),this.insertColumn(!1),!1;break;case 38:if(i.shiftKey)return i.preventDefault(),this.insertRow(!0),!1;break;case 40:if(i.shiftKey)return i.preventDefault(),this.insertRow(!1),!1;break;case 65:if(i.altKey)return i.preventDefault(),this.removeTable(),!1;break;case 121:return i.preventDefault(),this._clearAllManager(),!1}}else if(i.keyCode!=9||!this.model.enableTabKeyNavigation||(this._isIE8()?this._currentSelNode.nodeName.toLowerCase()=="td":this._getSelectedNode().nodeName.toLowerCase()=="td"))i.keyCode==8&&(ele=this._getSelectedNode(),n(ele).find("span#RTE_imgDupDiv").length>0&&n(this._imgDupDiv).remove(),n(ele).parents("BLOCKQUOTE").length>0&&(this._onOutdent(),i.preventDefault()));else return this._keypressFlag=!1,this.executeCommand("inserthtml","&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",!0),!1;else i.ctrlKey!=!0||i.keyCode!=66&&i.keyCode!=73&&i.keyCode!=85&&i.keyCode!=76&&i.keyCode!=82&&i.keyCode!=69&&i.keyCode!=74&&i.keyCode!=90&&i.keyCode!=89&&i.keyCode!=67&&i.keyCode!=88&&i.keyCode!=86&&i.keyCode!=8&&i.keyCode!=46||this.model.allowKeyboardNavigation||i.preventDefault();if(this.model.maxLength!=null&&(t.isNullOrUndefined(this._contolAKeyfalg)?!0:!this._contolAKeyfalg))try{!this._isIE8()||i.keyCode!=86||this.model.maxLength>=window.clipboardData.getData("Text").length+n.trim(this._getText()).length?this._validateMaxLength(i):i.preventDefault()}catch(f){}(this._isIE8()?this._currentSelNode.nodeName.toLowerCase()=="td":this._getSelectedNode().nodeName.toLowerCase()=="td")&&(ele=this._isIE8()?this._currentSelNode:this._getSelectedNode(),_newElementIndex=n(ele).parent().children().index(n(ele)),i.keyCode!=9||i.shiftKey||(_newElement=t.isNullOrUndefined(ele.nextSibling)?t.isNullOrUndefined(n(ele).parents("tr")[0].nextSibling)?t.isNullOrUndefined(n(ele).parents("table")[0].nextSibling)?ele:n(ele).parents("table")[0].nextSibling.nodeName.toLowerCase()=="td"?n(ele).parents("table")[0].nextSibling:ele:n(ele).parents("tr")[0].nextSibling.childNodes[0]:ele.nextSibling,this._setTableSelection(_newElement,i)),i.keyCode==9&&i.shiftKey?(_newElement=t.isNullOrUndefined(ele.previousSibling)?t.isNullOrUndefined(n(ele).parents("tr")[0].previousSibling)?t.isNullOrUndefined(n(ele).parents("table")[0].previousSibling)?ele:n(ele).parents("table")[0].previousSibling.nodeName.toLowerCase()=="td"?n(ele).parents("table")[0].previousSibling:ele:n(ele).parents("tr")[0].previousSibling.childNodes[n(ele).parents("tr")[0].previousSibling.childNodes.length-1]:ele.previousSibling,this._setTableSelection(_newElement,i)):i.keyCode==40?_newElement=t.isNullOrUndefined(n(ele).parents("tr")[0].nextSibling)?!t.isNullOrUndefined(n(ele).parents("table")[0].nextSibling)&&!this._isIE8()?n(ele).parents("table")[0].nextSibling:ele:n(ele).parents("tr")[0].nextSibling.children[_newElementIndex]:i.keyCode==38&&(_newElement=t.isNullOrUndefined(n(ele).parents("tr")[0].previousSibling)?!t.isNullOrUndefined(n(ele).parents("table")[0].previousSibling)&&!this._isIE8()?n(ele).parents("table")[0].previousSibling:ele:n(ele).parents("tr")[0].previousSibling.children[_newElementIndex]),i.keyCode!=9||ele!=_newElement||t.isNullOrUndefined(n(ele).parents("tr")[0].previousSibling)?(i.keyCode==9&&this._isIE8()||i.keyCode==40||i.keyCode==38)&&(this._setRange(_newElement,this._getRange(),!0),i.preventDefault()):(this.insertRow(!1),this._setRange(this._isIE8()?n(this._getRange().parentElement()).parents("tr").next().children().first()[0]:n(this._getRange().startContainer).parents("tr").next().children().first()[0],this._getRange(),!0),i.preventDefault()),this._isIE8()&&(this._currentSelNode=this._getRange().parentElement()));n(i.target).parents("table").length==0&&n(this._getDocument()).find(".e-rte-tablebox").remove();this._setAutoHeight();this._trigger("keydown",{keyCode:i.keyCode})},_changeFontsize:function(n){var t=parseInt(this._getCommandValue("fontsize"))?parseInt(this._getCommandValue("fontsize")):2;(!n&&t>this.model.fontSize[0].value||n&&t<this.model.fontSize[this.model.fontSize.length-1].value)&&(this._onFontSize(n?t+1:t-1),this._updateFontOptionStatus())},_iframeKeypress:function(n){if(!this._keypressFlag)return n.preventDefault(),this._keypressFlag=!0,!1},_setTableSelection:function(n,t){this._isIE8()||n.childNodes.length==1&&n.childNodes[0].nodeName=="BR"||n.childNodes.length==0?this._setRange(n,this._getRange(),!0):(range=this._getDocument().createRange(),range.selectNodeContents(n),this.selectRange(range));t.preventDefault()},_setAutoHeightValue:function(t){return t.nodeName=="#text"&&(t.parentNode.nodeName=="BODY"&&(n(t).wrap("<div><\/div>"),this.selectRange(this._getRange())),range=n(t.parentNode).position().top+parseInt(n(t.parentNode).css("height"))),t.nodeName=="DIV"&&(range=n(t).position().top+parseInt(n(t).css("height"))),range},_setAutoHeight:function(){this.model.autoHeight&&this.model.showToolbar&&!n(this._toolBarObj.itemsContainer.find(".resize")).length?this._autoHeight():t.isNullOrUndefined(this._getDocument())||n(this._getDocument().body).css("overflow","")},_autoHeight:function(){if(!t.isNullOrUndefined(this._getDocument().body)){n(this._getDocument().body).css("overflow","hidden");var i=t.isNullOrUndefined(this._getDocument().body.lastChild)?0:this._getDocument().body.lastChild.clientHeight+this._getDocument().body.lastChild.offsetTop;parseInt(n(this._rteWapper[0]).css("min-height"))-this._toolBarItems.outerHeight()<=i?n(this._rteIframe[0]).css("height",i+30+"px"):n(this._rteIframe[0]).css("height",parseInt(n(this._rteWapper[0]).css("min-height"))-this._toolBarItems.outerHeight()+"px");range=0;range=window.getSelection&&!t.isNullOrUndefined(this._getRange().startContainer)?this._setAutoHeightValue(this._getRange().startContainer):this._getDocument().selection&&!t.isNullOrUndefined(this._ieParents(this._getRange())[0])?this._setAutoHeightValue(this._ieParents(this._getRange())[0]):0;range>=this._rteIframe.height()-30&&(this._rteIframe[0].contentDocument?n(this._rteIframe[0]).css("height",this._rteIframe[0].contentDocument.documentElement.scrollHeight+20+"px"):n(this._rteIframe[0]).css("height",this._rteIframe[0].contentWindow.document.body.scrollHeight+20+"px"));this._rteWapper.outerHeight(this._rteEditor.outerHeight()+this._toolBarItems.outerHeight()+parseInt(this.model.showFooter?19:0))}},_ieSelRange:function(){this._isIE()?(this._selectionRange="",this._ieSelectionRange=this._getRange(),this._seleText=t.isNullOrUndefined(this._getWindow().document.selection)?this._selectionRange.toString():this._getWindow().document.selection.createRange().text):this._ieSelectionRange=this._ieSelection},_iframeSelectionChange:function(n){this._trigger("select",{event:n,model:this.model})},_iframeKeyUp:function(t){n(this._imgDupDiv).remove();n(this._imgOrg).css("outline","");this._toggleEditTable();this._setBackupData();t.ctrlKey&&(t.keyCode==57||t.keyCode==189)&&this._zoomUp();this._updateToolbarStatus();this._updateFontOptionStatus();this._updateFormat();this._updateCount();var i=this._isIE8()?this._currentSelNode:this._getSelectedNode();this.model.showToolbar&&(this._isIE8()?i.nodeName.toLowerCase():i.nodeName.toLowerCase()!="a"?this.disableToolbarItem("removeLink"):this.enableToolbarItem("removeLink"));this._updateTagInfo(i);this._updateValue();this._setAutoHeight();this._ieSelRange();this._trigger("keyup",{keyCode:t.keyCode});this._iframeSelectionChange(t)},_iframeMouseUp:function(i){if(this._tableResizeUp(i),this._resizeBtnInit(),!t.isNullOrUndefined(this._imgDup)&&n(this._imgOrg).parents("body").length>0&&(n(this._imgOrg).css({width:n(this._imgDup).css("width"),height:n(this._imgDup).css("height")}),n(this._imgOrg).position({left:n(this._imgDup).position().left,top:n(this._imgDup).position().top}),n(this._imgDup).css("display","none"),this._resizeImgPos(),this._setAutoHeight()),i.target.nodeName=="IMG"||n(i.target).hasClass("e-rte-imageboxmark")||(n(this._imgOrg).css("outline",""),n(this._imgDupDiv).remove(),this._off(n(this._getDocument()),"mousemove",this._imgBoxMouseMove)),i.target.nodeName=="IMG"&&n(i.target).parents("body").length>0){var r=this._isIE8()?this._getDocument().body.createTextRange():this._getDocument().createRange();this._isIE8()?r.moveToElementText(i.target):r.selectNode(i.target);this.selectRange(r)}this._currentSelNode=i.target;i.currentTarget&&i.target.nodeName&&i.target.nodeName.toLowerCase()=="html"&&this._getDocument()&&this._getDocument().body&&(this._isIE8()?!0:this._getRange().startOffset==this._getRange().endOffset)&&(this._isIE()&&i.currentTarget.createRange&&this._setRange(this._isIE8()?this._getDocument().body:this._getRange().startContainer,i.currentTarget.createRange(),!0),this._getDocument().body.focus());this._toggleEditTable();this._updateToolbarStatus();i.button?isRightClick=i.button==2:i.which&&(isRightClick=i.which==3);isRightClick||(this._updateFormat(),this._updateFontOptionStatus());this._ieSelRange();this._iframeSelectionChange(i);this._fontStyleDDL&&!t.isNullOrUndefined(this._fontStyleDDL.data("ejDropDownList"))&&this._fontStyleDDL.ejDropDownList("instance")._isPopupShown()&&n(this._fontStyleDDL.ejDropDownList("instance").popupList.ejScroller("instance").element).trigger("mouseup");this._fontSizeDDL&&!t.isNullOrUndefined(this._fontSizeDDL.data("ejDropDownList"))&&this._fontSizeDDL.ejDropDownList("instance")._isPopupShown()&&n(this._fontSizeDDL.ejDropDownList("instance").popupList.ejScroller("instance").element).trigger("mouseup")},_iframeMouseDown:function(i){if(t.browserInfo().name==="mozilla"&&(this._getDocument().designMode="off"),t.browserInfo().name=="msie"&&t.browserInfo().version=="8.0"&&this._focus(),this._contolAKeyfalg=!1,this._updateTagInfo(i.target),this._updateIndent(i.target),this.model.showToolbar&&(i.target.nodeName!="A"?this.disableToolbarItem("removeLink"):this.enableToolbarItem("removeLink")),i.target.nodeName=="VIDEO"&&this.model.allowEditing&&this._preventDefaultResize(),i.target.nodeName=="IMG"&&this.model.allowEditing&&(this._preventDefaultResize(),this._imageClick(i.target)),n(i.target).hasClass("e-rte-imageboxmark"))return this._resizeBtnInit(),this._commonBoxDown=!0,n(i.target).hasClass("e-rte-rigmed")&&(this._rigMidBox=!0),n(i.target).hasClass("e-rte-toplef")&&(this._topLefBox=!0),n(i.target).hasClass("e-rte-topmed")&&(this._topMidBox=!0),n(i.target).hasClass("e-rte-toprig")&&(this._topRigBox=!0),n(i.target).hasClass("e-rte-lefmed")&&(this._lefMidBox=!0),n(i.target).hasClass("e-rte-botlef")&&(this._botLefBox=!0),n(i.target).hasClass("e-rte-botmid")&&(this._botMidBox=!0),n(i.target).hasClass("e-rte-botrig")&&(this._botRigBox=!0),!1;n(i.target).hasClass("e-rteColumnResizer")&&(this._lastCol=n(i.target).hasClass("e-rtelastcol")?!0:!1,this._columnEle=n(this._curTable).find("tr:first td").eq(parseInt(n(i.target).attr("data-col")))[0],this._columnDown=!0,this._columnIndex=this._columnEle.cellIndex,n(this._getDocument().body).after("<span class='colresizerline'style='cursor:col-resize;position:absolute;width:0px;border-left: 1px dashed #787878;height:"+n(this._columnEle).closest("table").height()+"px;left:"+i.pageX+"px;top:"+n(this._columnEle).offset().top+"px;'><\/span>"));n(i.target).hasClass("e-rteRowResizer")&&(this._rowEle=n(this._curTable).find("tr").eq(parseInt(n(i.target).attr("data-row")))[0],this._rowDown=!0);n(i.target).hasClass("e-rte-tablebox")&&(this._boxDown=!0,this._boxElement=this._curTable);(n(i.target).hasClass("e-rte-tablebox")||n(i.target).hasClass("e-rteRowResizer")||n(i.target).hasClass("e-rteColumnResizer"))&&this._on(n(this._getDocument()),"mousemove",this._imgBoxMouseMove);(t.browserInfo().name=="msie"||t.browserInfo().name=="chrome")&&i.ctrlKey==!0&&i.which==1&&(i.target.tagName.toUpperCase()!="A"||t.isNullOrUndefined(n(i.target).attr("href"))||window.open(n(i.target).attr("href"),"_blank"));this.model.isResponsive&&!t.isNullOrUndefined(this._toolBarObj)&&this._toolBarObj._liTemplte.children("ul").length>0&&(this._toolBarObj.contstatus=!0,this._toolBarObj._liTemplte.addClass("e-display-none"),this._toolBarObj.contstatus=!1);this._iframeFocus()},_iframeFocusOut:function(n){n.data&&(n.data._proxy._onChange(),n.data._proxy._selectionRange=n.data._proxy._isIE8()?n.data._proxy._getRange():n.data._proxy._saveSelection(),n.data._proxy._seleText=t.isNullOrUndefined(n.data._proxy._getWindow().document.selection)?n.data._proxy._selectionRange.toString():n.data._proxy._isIE8()?n.data._proxy._getWindow().document.selection.createRange().text:n.data._proxy._getWindow().getSelection().toString())},_widthFocusOut:function(){var i,r,u;this._customTableDialog.ejDialog("isOpen")?(i=this._customTableDialog,r="#"+this._rteId+"_ddlAlignment",u="#"+this._rteId+"_txtWidth"):(i=this._eTblDialog,r="#"+this._rteId+"_eTblAlign",u="#"+this._rteId+"_eTblWidth");var t=i.find(u).val(),f=n(r).data("ejDropDownList"),e=t&&t!=""&&!isNaN(t)||t.slice(-2)=="px"||t.slice(-2)=="em"||t.slice(-2)=="pt"||t.slice(-1)=="%"?!0:!1;f.option("enabled",e)},_windowResize:function(){this._setAutoHeight();this._setIframeHeight()},_tableResizeUp:function(){n(this._getDocument()).find("table.e-rte-table").length&&(this._columnDown||this._rowDown||this._boxDown)?(this._currentTable&&this._columnDown&&this._columnDownClick&&(this._lastCol?(this._currentTable.closest("table").find("tr:first td").each(function(){this.style.width==""&&n(this).width(parseInt(n(this).closest("table").width()/(n(this).siblings().length+1)))}),this._currentTable.eq(this._columnIndex).width(this.lasColIndexWid),this._currentTable.closest("table").attr({width:""}),n(this._getDocument()).find(".e-rte-tablebox").css({left:this._currentTable.eq(this._columnIndex).offset().left+this._currentTable.eq(this._columnIndex).outerWidth()+"px"})):(this._currentTable.eq(this._columnIndex-1).width(this.nexColIndexWid),this._currentTable.eq(this._columnIndex).width(this._columnIndexWid))),this._removeResizeObject(),n(this._getDocument()).find(".colresizerline").remove(),this._restoreSelection(this._tableSelection),this._columnDown=!1,this._rowDown=!1,this._boxDown=!1,this._columnDownClick=!1):(n(this._getDocument()).find(".e-rte-tablebox").remove(),this._tableSelection=this._getRange())},_resizeBtnInit:function(){this._commonBoxDown=!1;this._rigMidBox=!1;this._topLefBox=!1;this._topMidBox=!1;this._topRigBox=!1;this._lefMidBox=!1;this._botLefBox=!1;this._botMidBox=!1;this._botRigBox=!1},_imgSpanBox:function(i){this._resizeBtnInit();this._imgOrg=i;this._imgDupDiv=t.buildTag("span#RTE_imgDupDiv");this._imgDup=t.buildTag("img#RTE_imgdivspan","",{display:"none",position:"absolute","background-size":"100% 100%",outline:"1px dashed #000",opacity:".64"},{}).appendTo(this._imgDupDiv);this._topLef=t.buildTag("span.e-rte-imageboxmark e-rte-toplef#RTE_toplef","",{cursor:"nwse-resize"},{}).appendTo(this._imgDupDiv);this._topMid=t.buildTag("span.e-rte-imageboxmark e-rte-topmed#RTE_topmed","",{cursor:"ns-resize"},{}).appendTo(this._imgDupDiv);this._topRig=t.buildTag("span.e-rte-imageboxmark e-rte-toprig#RTE_toprig","",{cursor:"nesw-resize"},{}).appendTo(this._imgDupDiv);this._leftMid=t.buildTag("span.e-rte-imageboxmark e-rte-lefmed#RTE_lefmed","",{cursor:"ew-resize"},{}).appendTo(this._imgDupDiv);this._rigMid=t.buildTag("span.e-rte-imageboxmark e-rte-rigmed#RTE_rigmed","",{cursor:"ew-resize"},{}).appendTo(this._imgDupDiv);this._botLef=t.buildTag("span.e-rte-imageboxmark e-rte-botlef#RTE_botlef","",{cursor:"nesw-resize"},{}).appendTo(this._imgDupDiv);this._botMid=t.buildTag("span.e-rte-imageboxmark e-rte-botmid#RTE_botmid","",{cursor:"ns-resize"},{}).appendTo(this._imgDupDiv);this._botRig=t.buildTag("span.e-rte-imageboxmark e-rte-botrig#RTE_botrig","",{cursor:"nwse-resize"},{}).appendTo(this._imgDupDiv);this._resizeImgPos();this._resizeImgDupPos();n(this._getDocument().body).after(this._imgDupDiv);n(i).css({outline:"1px dashed #5C5C5C"});this._on(n(this._getDocument()),"mousemove",this._imgBoxMouseMove)},_resizeImgPos:function(){this._ltPos=n(this._imgOrg).position();this._imgWid=n(this._imgOrg).css("width");this._imgHgt=n(this._imgOrg).css("height");this._imgDup.css({width:this._imgWid,height:this._imgHgt,left:this._ltPos.left+"px",top:this._ltPos.top+"px",border:n(this._imgOrg).css("border")});this._imgDup.attr({src:n(this._imgOrg).attr("src")});var i=parseInt(n(this._imgOrg).css("width"))-2+this._ltPos.left,u=(parseInt(n(this._imgOrg).css("width"))-2)/2+this._ltPos.left,r=parseInt(n(this._imgOrg).css("height"))-2+this._ltPos.top,f=(parseInt(n(this._imgOrg).css("height"))-2)/2+this._ltPos.top,t=parseInt(n(this._imgOrg).css("border-width")==""?0:n(this._imgOrg).css("border-width"));n(this._rigMid).css({left:i+2*t+"px",top:f+"px"});n(this._botLef).css({left:this._ltPos.left-3+"px",top:r+2*t+"px"});n(this._botRig).css({left:i+2*t+"px",top:r+2*t+"px"});n(this._botMid).css({left:u+"px",top:r+2*t+"px"});n(this._topRig).css({left:i+2*t+"px",top:this._ltPos.top-3+"px"});n(this._topLef).css({left:this._ltPos.left-3+"px",top:this._ltPos.top-3+"px"});n(this._topMid).css({left:u+"px",top:this._ltPos.top-3+"px"});n(this._leftMid).css({left:this._ltPos.left-3+"px",top:f+"px"})},_resizeImgDupPos:function(){this._ltDupPos=n(this._imgOrg).position();this._imgMidWid=n(this._imgOrg).css("width");this._imgDupHgt=n(this._imgOrg).css("height")},_imgBoxMouseMove:function(i){var e,o;if(this._commonBoxDown)this._rigMidBox?this._imgDupMouseMove(parseInt(i.pageX)-this._ltDupPos.left+"px",this._imgDupHgt,i):this._lefMidBox?(this._imgDupMouseMove(parseInt(this._imgMidWid)+this._ltDupPos.left-i.pageX+"px",this._imgDupHgt,i),n(this._imgDup).offset({left:i.pageX})):this._topMidBox?(this._imgDupMouseMove(this._img_wid,parseInt(this._imgDupHgt)+this._ltDupPos.top-i.pageY+"px",i),n(this._imgDup).offset({top:i.pageY})):this._botMidBox?this._imgDupMouseMove(this._img_wid,i.pageY-this._ltDupPos.top+"px",i):this._botRigBox?this._imgDupMouseMove(i.pageX-this._ltDupPos.left+"px",i.pageY-this._ltDupPos.top+"px",i):this._botLefBox?(this._imgDupMouseMove(parseInt(this._imgMidWid)+this._ltDupPos.left-i.pageX+"px",i.pageY-this._ltDupPos.top+"px",i),n(this._imgDup).offset({left:i.pageX})):this._topRigBox?(this._imgDupMouseMove(i.pageX-this._ltDupPos.left+"px",parseInt(this._imgDupHgt)+this._ltDupPos.top-i.pageY+"px",i),n(this._imgDup).offset({top:i.pageY})):this._topLefBox&&(this._imgDupMouseMove(parseInt(this._imgMidWid)+this._ltDupPos.left-i.pageX+"px",parseInt(this._imgDupHgt)+this._ltDupPos.top-i.pageY+"px",i),n(this._imgDup).offset({top:i.pageY,left:i.pageX}));else if(this._columnDown){this._columnDownClick=!0;this._currentTable=n(this._columnEle).closest("table").find("tr:first td");var f=this._columnEle.style.width==""?n(this._columnEle).width():parseInt(this._columnEle.style.width),r=n(this._columnEle).offset().left,u=r>i.pageX?f+(r-i.pageX):f-(i.pageX-r),h=n(this._currentTable).eq(this._columnIndex-1)[0].style.width==""?n(n(this._currentTable).eq(this._columnIndex-1)).width():parseInt(n(this._currentTable).eq(this._columnIndex-1)[0].style.width),s=f+h;!this._lastCol&&u>15&&s-u>15?(this.nexColIndexWid=s-u,this._columnIndexWid=u,n(this._getDocument()).find(".colresizerline").css({left:i.pageX+"px"})):this._lastCol&&r<i.pageX&&i.pageX-r>15&&(this.lasColIndexWid=i.pageX-r,n(this._getDocument()).find(".colresizerline").css({left:i.pageX+"px"}));this._removeMouseSelection(i);n(this._columnEle).closest("table").find("tr:last td:last span.e-rte-tablebox").css({display:"none"})}else this._rowDown?((t.browserInfo().name==="chrome"||t.browserInfo().name==="mozilla")&&(select=this._getDocument().getSelection().removeAllRanges()),e=this._rowEle.offsetTop,o=this._rowEle.parentElement.parentElement.offsetTop,i.pageY-(e+o)>20&&(this._rowEle.style.height=i.pageY-(e+o)+"px"),this._removeMouseSelection(i),n(this._getDocument()).find(".e-rte-tablebox").css({left:n(this._rowEle).closest("table").width()+n(this._rowEle).closest("table").offset().left+"px",top:n(this._rowEle).closest("table").height()+n(this._rowEle).closest("table").offset().top+"px"})):this._boxDown&&((t.browserInfo().name==="chrome"||t.browserInfo().name==="mozilla")&&this._getDocument().getSelection().removeAllRanges(),n(this._boxElement).attr({width:(i.pageX-n(this._boxElement).offset().left)/n(this._boxElement).parent().width()*100+"%",height:(i.pageY-n(this._boxElement).offset().top)/n(this._boxElement).parent().height()*100+"%"}),n(this._getDocument()).find(".e-rte-tablebox").css({left:n(this._boxElement).width()+n(this._boxElement).offset().left+"px",top:n(this._boxElement).height()+n(this._boxElement).offset().top+"px"}),n(this._boxElement).find("tr:first td").each(function(){n(this).width(parseInt(n(this).closest("table").width()/(n(this).siblings().length+1)))}),this._removeMouseSelection(i))},_removeMouseSelection:function(n){return t.browserInfo().name==="mozilla"&&this._getDocument().getSelection().removeAllRanges(),n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault(),n.cancelBubble=!0,n.returnValue=!1,!1},_imgDupMouseMove:function(t,i,r){n(this._imgDup).css({display:"block",width:t,height:i});this._resizeImgDupPos();this._isIE8()&&this._removeMouseSelection(r)},_imageClick:function(t){n(this._getDocument().body).find("img").css("outline","");this._imgDupDiv&&this._imgDupDiv.remove();this._imgSpanBox(t)},_iframePaste:function(i){var r=this,u,e,f;try{u=t.isNullOrUndefined(window.clipboardData)?i.originalEvent.clipboardData.getData("text/plain"):window.clipboardData.getData("Text");u.length!=0?r.model.maxLength>=u.length+n.trim(r._getText()).length||i.preventDefault():(e=i.originalEvent.clipboardData.items[0].getAsFile(),f=new FileReader,f.onload=function(n){r.executeCommand("inserthtml","<img src="+n.target.result+" alt />")},f.readAsDataURL(e))}catch(o){}setTimeout(function(){r._updateValue();r._setAutoHeight();r._updateCount()},0)},_wireEvents:function(){var i=n(this._getDocument());if(this._getDocument()!=""){if(t.isNullOrUndefined(this._createTable)||this._on(this._createTable,"mouseenter","div.e-rte-tablecell",this._tableCellStart)._on(this._createTable,"mousemove","div.e-rte-tablecell",this._tableCellSelect)._on(this._createTable,"mouseleave","div.e-rte-table",this._tableCellLeave)._on(this._createTable,"mousedown","div.e-rte-tablecell",this._tableCellDown)._on(n(document),"click",this._documentClick),this._on(i,"focus",this._iframeFocus)._on(i,"keydown",this._iframeKeyDown)._on(i,"keypress",this._iframeKeypress)._on(i,"keyup",this._iframeKeyUp)._on(i,"mouseup",this._iframeMouseUp)._on(i,"mousedown",this._iframeMouseDown)._on(i,"paste",this._iframePaste)._on(n(window),"resize",this._windowResize),!t.isNullOrUndefined(document.getElementById(this._id+"_Iframe")))n(document.getElementById(this._id+"_Iframe").contentWindow).on("blur",{_proxy:this},this._iframeFocusOut);t.isNullOrUndefined(this._customTableDialog)||this._on(this._customTableDialog.find(".e-rte-txtWidth"),"focusout",this._widthFocusOut)}},_unwireEvents:function(){var i=n(this._getDocument());t.isNullOrUndefined(this._createTable)||this._off(this._createTable.find("div.e-rte-tablecell"),"mousemove")._off(this._createTable.find("div.e-rte-table"),"mouseleave")._off(this._createTable.find("div.e-rte-tablecell"),"mousedown")._off(n(document),"click",this._documentClick);this._off(i,"focus")._off(i,"keydown")._off(i,"keyup")._off(i,"mouseup")._off(i,"mousedown")._off(n(window),"resize",this._windowResize);n(document.getElementById(this._id+"_Iframe").contentWindow).off("blur",this._iframeFocusOut);t.isNullOrUndefined(this._customTableDialog)||this._off(this._customTableDialog.find(".e-rte-txtWidth"),"focusout");n(window).unbind("resize",n.proxy(this._reSizeHandler,this))},_footerEvents:function(n){this[n](this._htmlSource,"click",this._sourceCodeManager);this[n](this._clearFormat,"click",this._onClearFormat);this[n](this._clearAll,"click",this._clearAllManager)},_onChange:function(){if(_prevhtml=n.trim(this.value()),this.model.enableXHTML&&(this._updateXhtml(),this.model.enableHtmlEncode&&this.value(this._encode(this.value()))),_prevhtml!==this.getHtml()||(t.isNullOrUndefined(this._contentBeforfocus)?!1:n.trim(this._contentBeforfocus)!==this.getHtml())){this._updateValue();var i={text:this._getText(),htmlText:this.getHtml(),isInteraction:this._isInteraction};this._contentBeforfocus=this.value();this._trigger("change",i);this._isInteraction=!0}},_disableIframeContent:function(){try{this._rteIframe.contents().find("body,[contenteditable='true']").attr("contenteditable",!1)}catch(n){}},disable:function(){this.model.enabled=!1;this._showHideContextMenu();this.element.attr("disabled","disabled");this._unwireEvents();this.model.showToolbar&&this._toolBarObj.disable();this._disableIframeContent();this._rteEditor.addClass("e-disable");this.model.showFooter&&(this._rteFooter.addClass("e-disable"),this._resize.removeClass("e-resizable"),this._footerEvents("_off"));this._disableResizeObj(!1)},enable:function(){this.model.enabled=!0;this._showHideContextMenu();this.element.removeAttr("disabled");this._wireEvents();this.model.showToolbar&&this._toolBarObj.enable();this._rteIframe.contents().find("body,[contenteditable='false']").attr("contenteditable",!0);this._rteEditor.removeClass("e-disable");this.model.showFooter&&(this._rteFooter.removeClass("e-disable"),this._resize.addClass("e-resizable"),this._footerEvents("_on"));this._disableResizeObj(!0)},disableToolbarItem:function(i){!t.isNullOrUndefined(i)&&(n(this._toolBarObj.target).find("#"+this._rteId+"_"+i).length!=0||n(this._toolBarObj._liTemplte).find("#"+this._rteId+"_"+i).length!=0)?this._toolBarObj.disableItemByID(this._rteId+"_"+i):this._toolBarObj.disableItemByID(i);i=="undo"&&n("#"+this._rteId+"_"+i).addClass("e-rteTooldisable")},enableToolbarItem:function(i){!t.isNullOrUndefined(i)&&(n(this._toolBarObj.target).find("#"+this._rteId+"_"+i).length!=0||n(this._toolBarObj._liTemplte).find("#"+this._rteId+"_"+i).length!=0)?this._toolBarObj.enableItemByID(this._rteId+"_"+i):this._toolBarObj.enableItemByID(i);i=="undo"&&n("#"+this._rteId+"_"+i).hasClass("e-rteTooldisable");n("#"+i).removeClass("e-rteTooldisable")},removeToolbarItem:function(n){t.isNullOrUndefined(n)||this._toolBarObj.removeItemByID(this._rteId+"_"+n);this._setIframeHeight()},refresh:function(){this._unwireEvents();this._setIFrames();this._setIframeHeight();this.model.enabled?this._wireEvents():this._disableIframeContent();this.model.enableRTL&&this._rteIframe.contents().find("body").css("direction","rtl");this._showHideContextMenu()},show:function(){this._rteWapper.show()},hide:function(){this._rteWapper.hide()},setColorPickerType:function(n){n=="palette"||n==="picker"?this._imgPicker.option("modelType",n):this._imgPicker.option("modelType","default")},pasteContent:function(n){this._pasteAPIFlag=!0;this._pasteHtml(n);this._onChange()},getDocument:function(){return this._getDocument()},getHtml:function(t){if(this.model.enableXHTML)return this.model.enableHtmlEncode?t==!1?n.trim(this._decode(this.value())):n.trim(this.value()):n.trim(this.value());try{return this.model.enableHtmlEncode?t==!1?n.trim(this._getDocument().body.innerHTML):this._encode(n.trim(this._getDocument().body.innerHTML)):n.trim(this._getDocument().body.innerHTML)}catch(i){return""}},setHtml:function(t){this._getDocument().body.innerHTML="";this._getDocument().body.innerHTML=n.trim(t);this._onChange()},getText:function(){return this._getText()},executeCommand:function(i,r,u){if(this._isIE8()&&t.isNullOrUndefined(this._ieSelectionRange)?this._ieSelectionRange=this._getRange():this._isIE()&&i.toLowerCase()=="inserthtml"&&!this._isIE8()&&(this._getRange().startContainer.nodeName.toLowerCase()!="body"?this._currentSelNode=this._getRange().startContainer:this._ieLinkRange()),this._trigger("execute",{commandName:i}))return!1;var f="";if(t.browserInfo().name=="chrome"&&this._getWindow().getSelection().rangeCount==0&&this._restoreSelection(this._saveSelection()),i=="underline"){if(window.getSelection&&(f=n(this._getWindow().getSelection().anchorNode).parents("a"),f.length>0)){n(f).css("text-decoration",n(f).css("text-decoration")=="none"?"underline":"none");return}}else{if(i.toLowerCase()=="inserthtml"){this._isIE()?this._pasteHtml(r,u):this._getDocument().execCommand(i,!1,r);return}i.toLowerCase()=="formatblock"&&this._isIE()&&r.charAt(0)!="<"&&r.charAt(r.length-1)!=">"&&(r="<"+r+">")}t.browserInfo().name=="msie"&&this._focus();this._isIE()&&i=="fontName"&&(r=r.substring(0,r.indexOf(",")));this._getDocument().execCommand(i,!1,r);this._onChange();i=="fontName"||i=="fontSize"||i=="indent"||i=="cut"||i=="copy"||i=="paste"||i=="undo"||i=="redo"||i=="outdent"||t.isNullOrUndefined(this._toolBarObj)||(this._toolBarObj.itemsContainer.find("li#"+this._rteId+"_"+i).hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+"_"+i):this._toolBarObj.selectItemByID(this._rteId+"_"+i));r!="listItem"&&this._setBackupData()},focus:function(){this._focus()},getCommandStatus:function(n){if(t.isNullOrUndefined(n)||n!="")return this._getCommandStatus(n)},getSelectedHtml:function(){return this._getSelectedHtmlString()},insertMenuOption:function(t){if(t.newItem&&t.targetItem&&t.insertType&&t.menuType){var u=this._textMenuObj,f,r=t.newItem,e=t.spriteCssClass?[{text:t.newItem,id:r,spriteCssClass:t.spriteCssClass}]:[{text:t.newItem,id:r}];for(i=0;i<u.element.find("li a").length;i++)if(n(u.element.find("li a")[i]).text()==t.targetItem){f=n(u.element.find("li")[i]).attr("id");break}t.insertType=="insert"?u.insert(e,f?"#"+f:f):t.insertType=="insertAfter"?u.insertAfter(e,"#"+f):t.insertType=="insertBefore"&&u.insertBefore(e,"#"+f);t.menuType.text&&this._contextType.text.push(r);t.menuType.image&&this._contextType.image.push(r);t.menuType.hyperlink&&this._contextType.hyperlink.push(r);t.menuType.table&&(this._contextType.table.push(r),this._contextType.table_hyper.push(r))}},removeMenuOption:function(t){var i=this._textMenuObj;i.remove(["#"+t]);(index=n.inArray(t,this._contextType.text))!=-1&&(this._contextType.text=this._removeContextData(index,this._contextType.text));(index=n.inArray(t,this._contextType.image))!=-1&&(this._contextType.image=this._removeContextData(index,this._contextType.image));(index=n.inArray(t,this._contextType.hyperlink))!=-1&&(this._contextType.hyperlink=this._removeContextData(index,this._contextType.hyperlink));(index=n.inArray(t,this._contextType.table))!=-1&&(this._contextType.textablet=this._removeContextData(index,this._contextType.table));(index=n.inArray(t,this._contextType.table_hyper))!=-1&&(this._contextType.textablet=this._removeContextData(index,this._contextType.table_hyper))},_removeContextData:function(t,i){var r=[];return n(i).each(function(n,i){t!=n&&r.push(i)}),r},insertRow:function(i,r){if(this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length){var e=t.isNullOrUndefined(r)?this._getSelectedNode():r,o="<td "+this._border+"contentEditable='true'><br _moz_dirty=''/><\/td>",u=n(e).closest("tr"),s=u.find("td").length,f=n("<tr>"+Array(s+1).join(o)+"<\/tr>");return i?f.insertBefore(u):f.insertAfter(u),f.find("td:first").focus(),this._setAutoHeight(),e}},insertColumn:function(i,r){var u;if(this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length){var f=t.isNullOrUndefined(r)?this._getSelectedNode():r,o="<td "+this._border+"contentEditable='true'><br _moz_dirty=''/><\/td>",s=n(f).closest("tr"),e,h=s.closest("table").find("tr"),c=s.find("td").index(f);for(u=0;u<h.length;u++)e=n(h[u]).find("td")[c],i?n(o).insertBefore(e):n(o).insertAfter(e);return f}},removeRow:function(i){var r=t.isNullOrUndefined(i)?this._getSelectedNode():i,f=this._getRange(),u=null,e=n(r).closest("table");e.find("tr").length==1?(u=n(r).parent("tr").closest("table").next()[0]||n(r).parent("tr").closest("table").prev()[0],n(r).parent("tr").closest("table").remove()):(u=n(r).parent("tr").prev("tr").length!=0?n(r).parent("tr").prev("tr").find("td:last")[0]:n(r).parent("tr").next("tr").find("td:first")[0],curRow=n(r).closest("tr").remove());t.isNullOrUndefined(u)||this._setRange(u,f);this._setAutoHeight()},selectRange:function(n){this._focus();this._isIE8()?n.select():(select=this._getDocument().getSelection(),select.removeAllRanges(),select.addRange(n))},_encode:function(t){return n("<div/>").text(t).html()},_decode:function(n){return n.replace(/&amp;/g,"&").replace(/&amp;lt;/g,"<").replace(/&lt;/g,"<").replace(/&amp;gt;/g,">").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;nbsp;/g," ").replace(/&quot;/g)},createRange:function(){return this._isIE8()?this.getDocument().body.createTextRange():this._getRange()},_setRange:function(n,i,r){this._isIE8()?t.isNullOrUndefined(n)||(i.collapse(!0),i.moveToElementText(n),i.moveStart("character",1),i.select()):(i.setStart(n,0),i.collapse(!0),t.browserInfo().name=="msie"&&t.browserInfo().version!="11.0"&&t.isNullOrUndefined(r)?t.isNullOrUndefined(r)&&(selection=this._getDocument().body.createTextRange(),selection.moveToElementText(n)):this.selectRange(i))},removeColumn:function(i){var r=t.isNullOrUndefined(i)?this._getSelectedNode():i,s=this._getRange(),e=n(r).closest("tr"),o=e.closest("table").find("tr"),h=e.find("td").index(r),f=t.isNullOrUndefined(r.nextElementSibling)?n(r.previousSibling)[0]:n(r.nextElementSibling)[0],u;if(t.isNullOrUndefined(f))n(r).parent("tr").parents("table").remove();else for(u=0;u<o.length;u++)n(n(o[u]).find("td")[h]).remove();t.isNullOrUndefined(f)||this._setRange(f,s)},removeTable:function(i){var r=t.isNullOrUndefined(i)?n(this._getSelectedNode()).closest("table"):i,u=n(r).parent().closest("table").length<1;this._currentSelNode=n(r).parent()[0];n(r).remove();u&&this._toggleEditTable();this._setAutoHeight();this._removeResizeObject();n(this._getDocument()).find(".e-rte-tablebox").remove()}});t.RTE.Locale=t.RTE.Locale||{};t.RTE.Locale["default"]=t.RTE.Locale["en-US"]={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Align text center",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",unorderedList:"Insert unordered list",orderedList:"Insert ordered list",indent:"Increase Indent",fileBrowser:"File Browser",outdent:"Decrease Indent",cut:"Cut",copy:"Copy",paste:"Paste",paragraph:"Paragraph",undo:"Undo",redo:"Redo",upperCase:"Upper Case",lowerCase:"Lower Case",clearAll:"Clear All",clearFormat:"Clear Format",createLink:"Insert/Edit Hyperlink",removeLink:"Remove Hyperlink",tableProperties:"Table Properties",insertTable:"Insert",deleteTables:"Delete",imageProperties:"Image Properties",openLink:"Open Hyperlink",image:"Insert image",video:"Insert video",editTable:"Edit Table Properties",embedVideo:"Paste your embed code below",viewHtml:"View HTML",fontName:"Select font family",fontSize:"Select font size",fontColor:"Select color",format:"Format",backgroundColor:"Background color",style:"Styles",deleteAlert:"Are you sure you want to clear all the contents?",copyAlert:"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+C keyboard shortcut instead of copy operation.",pasteAlert:"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+V keyboard shortcut instead of paste operation.",cutAlert:"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X keyboard shortcut instead of cut operation.",videoError:"The text area can not be empty",imageWebUrl:"Web Address",imageAltText:"Alternate text",dimensions:"Dimensions",constrainProportions:"Constrain Proportions",linkWebUrl:"Web Address",imageLink:"Image as Link",imageBorder:"Image Border",imageStyle:"Style",linkText:"Text",linkToolTip:"Tooltip",html5Support:"This tool icon only enabled in HTML5 supported browsers",linkOpenInNewWindow:"Open link in new window",tableColumns:"No.of Columns",tableRows:"No.of Rows",tableWidth:"Width",tableHeight:"Height",tableCellSpacing:"Cell spacing",tableCellPadding:"Cell padding",tableBorder:"Border",tableCaption:"Caption",tableAlignment:"Alignment",textAlign:"Text align",dialogUpdate:"Update",dialogInsert:"Insert",dialogCancel:"Cancel",dialogApply:"Apply",dialogOk:"Ok",createTable:"Insert Table",insertTable:"Insert",addColumnLeft:"Insert Columns to the Left",addColumnRight:"Insert Columns to the Right",addRowAbove:"Insert Rows Above",addRowBelow:"Insert Rows Below",deleteRow:"Delete entire row",deleteColumn:"Delete entire column",deleteTable:"Delete Table",customTable:"Create custom table...",characters:"Characters",words:"Words",general:"General",advanced:"Advanced",table:"Table",row:"Row",column:"Column",cell:"Cell",solid:"Solid",dotted:"Dotted",dashed:"Dashed",doubled:"Double",maximize:"Maximize",resize:"Minimize",swatches:"Swatches",paragraph:"Paragraph",quotation:"Quotation",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",segoeui:"Segoe UI",arial:"Arial",couriernew:"Courier New",georgia:"Georgia",impact:"Impact",lucidaconsole:"Lucida Console",tahoma:"Tahoma",timesnewroman:"Times New Roman",trebuchetms:"Trebuchet MS",verdana:"Verdana",disc:"Disc",circle:"Circle",square:"Square",number:"Number",loweralpha:"Lower Alpha",upperalpha:"Upper Alpha",lowerroman:"Lower Roman",upperroman:"Upper Roman",none:"None",linktooltip:"ctrl + click to follow link",charSpace:"Characters (with spaces)",charNoSpace:"Characters (no spaces)",wordCount:"Word Count",left:"Left",right:"Right",center:"Center",zoomIn:"Zoom In",zoomOut:"Zoom Out",print:"Print",FindAndReplace:"Find and Replace",Find:"Find",MatchCase:"Match Case",WholeWord:"Whole Word",ReplaceWith:"Replace with",Replace:"Replace",ReplaceAll:"Replace All",FindErrorMsg:"Couldn't found the specified word."}})(jQuery,Syncfusion),function(n,t){t.RTE=t.RTE||{};t.RTE.FindAndReplace={_findObject:null,_selectedIndex:-1,_findAndReplaceClick:function(t){var r=this._findDialog.element,e=n.trim(n(r).find("[ej-function='findtxt']").val()),o=t.target.tagName=="SPAN"||t.target.tagName=="DIV"?n(t.target).closest("button")[0]:t.target,s=n(r).find("[ej-function='replacetxt']").val(),u=this.getDocument().body,f=n(r).find("[ej-function='replace'],[ej-function='replaceAll']"),i=n(r).find("[ej-function='prev'],[ej-function='next']");if(n(this._findDialog.element).children("span").html(""),!n(o).hasClass("e-disable"))switch(o.getAttribute("ej-function")){case"find":e?(this._findObject.find(e,u,!n(r).find("[ej-function='matchCase']")[0].checked,n(r).find("[ej-function='wholeWords']")[0].checked),this._selectedIndex=-1,this._findObject.nodeCollection.length?(this._findObject.nodeCollection.length>0?f.ejButton("enable"):f.ejButton("disable"),this._highlightNode(++this._selectedIndex,u),this._updateBtnStatus(this._selectedIndex,i)):(n.merge(i,f).ejButton("disable"),this._findObject.revertAll(),n(this._findDialog.element).children("span").html(this._getLocalizedLabels("FindErrorMsg")))):this._findObject.nodeCollection.length&&this._findObject.revertAll();break;case"next":this._selectedIndex<this._findObject.nodeCollection.length&&this._highlightNode(++this._selectedIndex,u);this._updateBtnStatus(this._selectedIndex,i);break;case"prev":this._selectedIndex>0&&this._highlightNode(--this._selectedIndex,u);this._updateBtnStatus(this._selectedIndex,i);break;case"replace":this._findObject.replaceByIndex(this._selectedIndex,s);this._findObject.nodeCollection.length?this._selectedIndex>this._findObject.nodeCollection.length-1&&--this._selectedIndex:this._selectedIndex=-1;this._selectedIndex>-1?(this._highlightNode(this._selectedIndex,u),this._updateBtnStatus(this._selectedIndex,i)):n.merge(i,f).ejButton("disable");this._setBackupData();break;case"replaceAll":this._findObject.replaceAll(s);this._selectedIndex=-1;n.merge(i,f).ejButton("disable");this._setBackupData()}this._updateCount()},_updateBtnStatus:function(t,i){t<this._findObject.nodeCollection.length-1?n(i[1]).ejButton("enable"):n(i[1]).ejButton("disable");t>0?n(i[0]).ejButton("enable"):n(i[0]).ejButton("disable")},_highlightNode:function(i,r){var u,f;for(n(r).find(".e-highlight").removeClass("e-highlight"),u=0;u<this._findObject.nodeCollection.length;u++)if(i==u)for(f=0;f<this._findObject.nodeCollection[u].length;f++)n(this._findObject.nodeCollection[u][f].node).addClass("e-highlight"),n(t.browserInfo().name=="msie"||t.browserInfo().name=="mozilla"?r.parentElement:r).scrollTop(n(this._findObject.nodeCollection[u][f].node).offset().top-25)},_renderFindDialog:function(i){var r="<div id='"+this._id+"_basicDialog' title='"+this._getLocalizedLabels("FindAndReplace")+"'><div class='e-maincontent'><div class='e-fd-findcontent'><div class='e-fd-lable'><span>"+this._getLocalizedLabels("Find")+"<\/span><\/div><div class='e-txtbox'><input type='text' ej-function='findtxt' id='"+this._id+"_findtxt' class='e-js e-input'><\/div><\/div><div class='e-fd-InnerContent'><div><input type='checkbox' ej-function='matchCase' id='"+this._id+"_matchCase' value='true'><label for='"+this._id+"_matchCase' class='e-fd-checkboxlable' style=''>"+this._getLocalizedLabels("MatchCase")+"<\/label><\/div><div class='e-checkbx'><input type='checkbox' ej-function='wholeWords' id='"+this._id+"_wholeWords' value='true'><label for='"+this._id+"_wholeWords' class='e-fd-checkboxlable'>"+this._getLocalizedLabels("WholeWord")+"<\/label><\/div><\/div><div class='e-fd-replacecontent'><div class='e-fd-lable'><span>"+this._getLocalizedLabels("ReplaceWith")+"<\/span><\/div><div class='e-txtbox'><input type='text' ej-function='replacetxt' id='"+this._id+"_replacetxt' class='e-js e-input'><\/div><\/div><\/div><span style='text-align: center;'><\/span><div class='e-fd-btncol'><div class='e-btn-left'><button id='"+this._id+"_find' ej-function='find'>"+this._getLocalizedLabels("Find")+"<\/button><button id='"+this._id+"_replace' ej-function='replace'>"+this._getLocalizedLabels("Replace")+"<\/button><button id='"+this._id+"_replaceAll' class='ejRTE-replaceAll' ej-function='replaceAll'>"+this._getLocalizedLabels("ReplaceAll")+"<\/button><\/div><div class='e-btn-right'><button id='"+this._id+"_prev' ej-function='prev'><\/button><button id='"+this._id+"_next' ej-function='next'><\/button><\/div><\/div><\/div>";i._findDialog=n(r).ejDialog({width:380,close:this._onCloseFindAndReplace,cssClass:"e-rte e-findandreplace",enableRTL:i.model.enableRTL,enableResize:!1,enableModal:!0}).data("ejDialog");n(i._findDialog.element).find("input[type=text]").val("");n(i._findDialog.element).find("button").ejButton({height:30});n(i._findDialog.element).find("[ej-function='replace'],[ej-function='replaceAll'],[ej-function='prev'],[ej-function='next']").ejButton("disable");n(i._findDialog.element).find("[ej-function='prev'],[ej-function='next']").ejButton({height:30,width:30,contentType:"imageonly"});n(i._findDialog.element).find("[ej-function='prev']").ejButton({prefixIcon:"e-chevron-left_02"}).next().ejButton({prefixIcon:"e-chevron-right_02"});n(i._findDialog.element).find("[ej-function='wholeWords'],[ej-function='matchCase']").ejCheckBox({enableRTL:i.model.enableRTL,checked:!1});this._findObject=new t.FindAndReplace;this._on(i._findDialog.element.find("button"),"click",this._findAndReplaceClick)},_onCloseFindAndReplace:function(){n("#"+this._id.replace("_basicDialog","")).data("ejRTE")._findObject.revertAll();n(this.element).find("[ej-function='replace'],[ej-function='replaceAll'],[ej-function='prev'],[ej-function='next']").ejButton("disable");n(this.element).find("input[type=text]").val("");n(this.element).find("[ej-function='wholeWords'],[ej-function='matchCase']").ejCheckBox({checked:!1});n(this.element).children("span").html("")},_showFindAndReplace:function(){this._findDialog?this._findDialog.open():this._renderFindDialog(this)}}}(jQuery,Syncfusion),function(){ej.FindAndReplace=function(){this.indexLength=0;this.elements=[];this.matches=[];this.nodeCollection=[]};ej.FindAndReplace.prototype.find=function(n,t,i,r){return this.nodeCollection.length&&this.revertAll(),this._validateTextContent(n,this._getFormatedText(t),i,r),this.matches.length?(this._iterateNodes(t),this.matches=[],!0):!1};ej.FindAndReplace.prototype._replace=function(n,t){for(var i=0;i<n.length;i++)!i||!t?this._elementDefragment(n[i].node,t):$(n[i].node).remove()};ej.FindAndReplace.prototype.replaceByIndex=function(n,t){for(var r=[],i=0;i<this.nodeCollection.length;i++)i==n?this._replace(this.nodeCollection[i],t):r.push(this.nodeCollection[i]);this.nodeCollection=r};ej.FindAndReplace.prototype.replaceAll=function(n){for(var t=0;t<this.nodeCollection.length;t++)this._replace(this.nodeCollection[t],n);this.nodeCollection=[]};ej.FindAndReplace.prototype.revertAll=function(){for(var n=0;n<this.nodeCollection.length;n++)this._replace(this.nodeCollection[n]);this.nodeCollection=[]};ej.FindAndReplace.prototype._elementDefragment=function(n,t){var i=n.nextSibling,r=n.previousSibling;i&&r&&i.nodeType==3&&r.nodeType==3?(i=n.previousSibling,i.data=i.data+(t!=undefined?t:n.firstChild.data)+n.nextSibling.data,$(n.nextSibling).remove(),$(n).remove()):i&&i.nodeType==3?(i=n.nextSibling,i.data=(t!=undefined?t:n.firstChild.data)+i.data,$(n).remove()):r&&r.nodeType==3?(i=n.previousSibling,i.data=i.data+(t!=undefined?t:n.firstChild.data),$(n).remove()):(i=t!=undefined?document.createTextNode(t):n.firstChild,$(n).replaceWith(i))};ej.FindAndReplace.prototype._validateTextContent=function(n,t,i,r){for(var u=new RegExp(r?"\\b"+n+"\\b":n,i?"gi":"g");data=u.exec(t);)this.matches.push({startIndex:data.index,endIndex:data.index+n.length});return this.matches};ej.FindAndReplace.prototype._traverseNode=function(n,t){if(n.nodeType===3&&(out=this._validateData(n,t),out.curNode&&(n=out.curNode),out.status))return!0;if(n=n.firstChild)do if(n.nodeType===3){if(out=this._validateData(n,t),out.curNode&&(n=out.curNode),out.status)return!0}else if(this._traverseNode(n,t))return!0;while(n=n.nextSibling);return!1};ej.FindAndReplace.prototype._validateData=function(n,t){var i=this.indexLength,r=this.indexLength+n.length;return this.indexLength=this.indexLength+n.length,i>=t.startIndex||t.startIndex<r?this._elementFragment(t,{startIndex:i,endIndex:r},n):{status:!1}};ej.FindAndReplace.prototype._elementFragment=function(n,t,i){var u=i.data,r=i,f,e;if(n.startIndex<=t.startIndex&&n.endIndex>=t.endIndex)r=ej.buildTag("span.e-selected-node").append(document.createTextNode(i.data))[0],$(i).replaceWith(r),this.elements.push({node:r});else if(n.startIndex<=t.startIndex&&n.endIndex<t.endIndex)f=n.endIndex-n.startIndex,e=ej.buildTag("span.e-selected-node").append(document.createTextNode(u.substr(0,f)))[0],$(e).insertBefore(i),i.data=u.substr(f),this.elements.push({node:e});else if(n.startIndex>t.startIndex&&n.endIndex>=t.endIndex)f=n.startIndex-t.startIndex,r=ej.buildTag("span.e-selected-node").append(document.createTextNode(u.substr(f)))[0],$(r).insertAfter(i),i.data=u.substr(0,f),this.elements.push({node:r});else if(n.startIndex>t.startIndex&&n.endIndex<t.endIndex){var o=n.startIndex-t.startIndex,s=o+(n.endIndex-n.startIndex),e=ej.buildTag("span.e-selected-node").append(document.createTextNode(u.substring(o,s)))[0];r=document.createTextNode(u.substring(s));i.data=u.substr(0,o);$(r).insertAfter(i);$(e).insertAfter(i);this.elements.push({node:e})}return{status:n.endIndex>t.startIndex&&n.endIndex<=t.endIndex,curNode:r}};ej.FindAndReplace.prototype._getFormatedText=function(n){var t="";if(n.nodeType===3)return n.data.replace(/\n/g," ");if(n=n.firstChild)do t+=n.nodeType===3?n.data.replace(/\n/g," "):this._getFormatedText(n);while(n=n.nextSibling);return t};ej.FindAndReplace.prototype._iterateNodes=function(n){temp=this;$(this.matches).each(function(t,i){temp._traverseNode(n,i);temp.nodeCollection.push(temp.elements);temp.indexLength=0;temp.elements=[]})}}();ej.RTE.FindAndReplace&&$.extend(ej.RTE.prototype,ej.RTE.FindAndReplace)});
