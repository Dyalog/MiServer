/*!
*  filename: ej.pivotschemadesigner.min.js
*  version : 14.2.0.26
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./../common/ej.touch.min","./../common/ej.draggable.min","./../common/ej.scroller.min","./ej.button.min","./ej.checkbox.min","./ej.dialog.min","./ej.maskedit.min","./ej.waitingpopup.min","./ej.treeview.min","./../datavisualization/ej.chart.min"],n):n()})(function(){(function(n,t,i){t.widget("ejPivotSchemaDesigner","ej.PivotSchemaDesigner",{_rootCSS:"e-pivotschemadesigner",element:null,model:null,_requiresID:!0,validTags:["div","span"],defaults:{url:"",cssClass:"",height:"630px",width:"415px",locale:"en-US",layout:"normal",enableRTL:!1,pivotControl:null,pivotTableFields:[],pivotCalculations:[],pivotColumns:[],pivotRows:[],filters:[],olap:{showKpi:!1,showNamedSets:!1},enableWrapper:!1,enableDragDrop:!0,serviceMethods:{fetchMembers:"FetchMembers",nodeStateModified:"NodeStateModified",nodeDropped:"NodeDropped",removeButton:"RemoveButton",memberExpand:"MemberExpanded",filtering:"filtering"},customObject:{},beforeServiceInvoke:null,afterServiceInvoke:null,dragMove:null},dataTypes:{serviceMethods:"data",customObject:"data",pivotControl:"data",pivotTableFieldList:"array",pivotCalculationList:"array",pivotColumnList:"array",pivotRowList:"array",filterList:"array"},locale:t.util.valueFunction("locale"),_init:function(){this._initPrivateProperties();this._load()},_destroy:function(){this.element.empty().removeClass("e-pivotschemadesigner"+this.model.cssClass)},_initPrivateProperties:function(){this._id=this.element.attr("id");this._dialogTitle="";this._currentMembers=[];this._memberTreeObj=null;this._tableTreeObj=null;this._dialogOKBtnObj=null;this._curFilteredText="";this._curFilteredAxis="";this._tempFilterData=null;this._droppedClass="";this._selectedTreeNode=null;this._selectedMember="";this._selectedLevel="";this._isDragging=!1;this._dataModel="";this._droppedPosition="";this._currentCubeName="";this._errorDialog="";this._nodeDropedParams="";this._contextMenuObj=null;this._removeButtonDeferUpdate=!1;this._isMeasureBtnRemove=!1;this._nodeCheck=!1;this._isFiltered=!1;this._curFocus={tree:null,node:null,tab:null,button:null};this._index={tree:0,node:0,tab:0,button:0}},_load:function(){var u="",r,f,e;if(this.model.pivotControl!=null&&(this.model.pivotControl._schemaData=this),this.model.pivotControl==null||jQuery.isEmptyObject(this.model.pivotControl.getOlapReport())&&this.model.pivotControl._dataModel!="XMLA"||(this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?(u=JSON.parse(JSON.parse(this.model.pivotControl.getOlapReport()).ItemsProperties),r=JSON.parse(this.model.pivotControl.getOlapReport()),this.model.pivotControl._dataModel=="Pivot"?(r=this.model.pivotControl._filterReport(r),f=r.PivotRows.concat(r.PivotColumns,r.PivotCalculations,r.Filters),e=n.grep(u,function(t){return n.grep(f,function(n){t.id==(n.FieldHeader||n.DimensionHeader)&&(t.id=n.FieldName||n.DimensionName)}),t}),this._setTableFields(e)):this._setTableFields(u),this._setPivotRows(r.PivotRows),this._setPivotColumns(r.PivotColumns),this._setPivotCalculations(r.PivotCalculations),this._setFilters(r.Filters),this._dataModel=r.DataModel,this._currentCubeName=r.CurrentCube):(r=this.model.pivotControl.getOlapReport(),r==""&&this.model.pivotControl._dataModel=="XMLA"?r=this.model.pivotControl.model.dataSource:this._setTableFields(this.model.pivotControl._pivotTableFields),this._setPivotRows(r.rows),this._setPivotColumns(r.columns),this._setPivotCalculations(r.values),this._setFilters(r.filters),this._dataModel=this.model.pivotControl.model.dataSource.cube!=""?"XMLA":"Pivot"),n("#"+this._id).ejWaitingPopup({showOnInit:!0}),pschemaDesignerWaitingPopup=n("#"+this._id).data("ejWaitingPopup"),this.element.width(this.model.width).height(this.model.height),pschemaDesignerWaitingPopup.show()),this.model.enableWrapper==!1){var o=t.buildTag("table.headerTable",t.buildTag("tr",t.buildTag("td",t.buildTag("div.listHeader",t.buildTag("span.headerText",this._getLocalizedLabels("PivotTableFieldList"),{})[0].outerHTML,{})[0].outerHTML+t.buildTag("div.listSubhead",t.buildTag("span.subheadText",this._getLocalizedLabels("ChooseFieldsToAddToReport"),{})[0].outerHTML,{})[0].outerHTML,{}).attr("valign","top")[0].outerHTML,{})[0].outerHTML,{width:"100%",height:"10%"})[0].outerHTML+t.buildTag("div.fieldTable",t.buildTag("div.schemaFieldTree#schemaFieldTree",{},{width:"100%",overflow:"auto"})[0].outerHTML).attr("valign","top")[0].outerHTML,s=t.buildTag("div.axisTable",t.buildTag("div",t.buildTag("div.axisTd1",t.buildTag("div.pivotHeader",t.buildTag("span.headerText",this._getLocalizedLabels("ReportFilter"),{})[0].outerHTML,{})[0].outerHTML+t.buildTag("div.schemaFilter",t.buildTag("p#reportfilter","report filter",{display:"none"})[0].outerHTML+this._createPivotButtons(this.model.filters,"filter")).attr("aria-describedby","reportfilter").attr("aria-dropeffect","none").attr("aria-selected","false")[0].outerHTML,{})[0].outerHTML+t.buildTag("div.axisTd2",t.buildTag("div.rPivotHeader",t.buildTag("span.headerText",this._getLocalizedLabels("ColumnLabel"),{})[0].outerHTML,{})[0].outerHTML+t.buildTag("div.schemaColumn",t.buildTag("p#columnlabel","column label",{display:"none"})[0].outerHTML+this._createPivotButtons(this.model.pivotColumns,"column")+(this._dataModel!="XMLA"||this.model.pivotCalculations.length==0?"":this.model.pivotCalculations[0].measures!=i&&this.model.pivotCalculations[0].measures.length>0&&this.model.pivotCalculations[0].axis!=i&&this.model.pivotCalculations[0].axis=="columns"?this._createPivotButtons([{fieldName:"Measures",fieldCaption:this._getLocalizedLabels("Measures")}],"column"):""),{})[0].outerHTML,{}).attr("aria-describedby","columnlabel").attr("aria-dropeffect","none").attr("aria-selected","false")[0].outerHTML,{})[0].outerHTML+t.buildTag("div",t.buildTag("div.axisTd1#axisTd",t.buildTag("div.pivotHeader",t.buildTag("span.headerText",this._getLocalizedLabels("RowLabel"),{})[0].outerHTML,{})[0].outerHTML+t.buildTag("div.schemaRow",t.buildTag("p#rowlabel","row label",{display:"none"})[0].outerHTML+this._createPivotButtons(this.model.pivotRows,"row")+(this._dataModel!="XMLA"||this.model.pivotCalculations.length==0?"":this.model.pivotCalculations[0].measures!=i&&this.model.pivotCalculations[0].measures.length>0&&this.model.pivotCalculations[0].axis!=i&&this.model.pivotCalculations[0].axis=="rows"?this._createPivotButtons([{fieldName:"Measures",fieldCaption:this._getLocalizedLabels("Measures")}],"row"):""),{})[0].outerHTML,{}).attr("aria-describedby","rowlabel").attr("aria-dropeffect","none").attr("aria-selected","false")[0].outerHTML+t.buildTag("div.axisTd2#axisTd",t.buildTag("div.rPivotHeader",t.buildTag("span.headerText",this._getLocalizedLabels("Values"),{})[0].outerHTML,{})[0].outerHTML+t.buildTag("div.schemaValue",t.buildTag("p#valuelabel","values",{display:"none"})[0].outerHTML+this._createPivotButtons(this.model.pivotCalculations,"values"),{}).attr("aria-describedby","valuelabel").attr("aria-dropeffect","none").attr("aria-selected","false")[0].outerHTML,{})[0].outerHTML,{})[0].outerHTML,{})[0].outerHTML,h=t.buildTag("div.deferUpdateLayout",t.buildTag("input.chkDeferUpdate","",{}).attr("type","checkbox")[0].outerHTML+t.buildTag("button.btnDeferUpdate",this._getLocalizedLabels("Update"),{}).attr("type","button")[0].outerHTML)[0].outerHTML,c=o+t.buildTag("div.centerDiv")[0].outerHTML+t.buildTag("div.centerHead",this._getLocalizedLabels("DragFieldBetweenAreasBelow"))[0].outerHTML+s+t.buildTag("span.responsiveSchema","")[0].outerHTML+(this.model.pivotControl!=null&&this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?h:"")+t.buildTag("div.schemaNoClick","")[0].outerHTML;n(c).appendTo("#"+this._id);this._reSizeHandler()}else this.model.enableWrapper==!0&&(this._setFilters(r.Filters),this.element.find(".axisTable .schemaFilter").append(this._createPivotButtons(this.model.filters,"filter")),this.element.find(".axisTable .schemaRow").append(this._createPivotButtons(this.model.pivotRows,"row")+(this._dataModel!="XMLA"||this.model.pivotCalculations.length==0?"":this.model.pivotCalculations[0].measures!=i&&this.model.pivotCalculations[0].measures.length>0&&this.model.pivotCalculations[0].axis!=i&&this.model.pivotCalculations[0].axis=="rows"?this._createPivotButtons([{fieldName:"Measures"}],"row"):"")),this.element.find(".axisTable .schemaColumn").append(this._createPivotButtons(this.model.pivotColumns,"column")+(this._dataModel!="XMLA"||this.model.pivotCalculations.length==0?"":this.model.pivotCalculations[0].measures!=i&&this.model.pivotCalculations[0].measures.length>0&&this.model.pivotCalculations[0].axis!=i&&this.model.pivotCalculations[0].axis=="columns"?this._createPivotButtons([{fieldName:"Measures"}],"column"):"")),this.element.find(".axisTable .schemaValue").append(this._createPivotButtons(this.model.pivotCalculations,"values")),this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode&&this.element.append(t.buildTag("div.deferUpdateLayout",t.buildTag("input.chkDeferUpdate","",{}).attr("type","checkbox")[0].outerHTML+t.buildTag("button.btnDeferUpdate",this._getLocalizedLabels("Update"),{}).attr("type","button")[0].outerHTML)[0].outerHTML),this.model.enableDragDrop&&this.element.find(".pivotButton .pvtBtn").ejButton({size:"normal",type:t.ButtonType.Button,enableRTL:this.model.enableRTL}).ejDraggable({handle:"button",clone:!0,cursorAt:{left:-5,top:-5},dragStart:t.proxy(function(){this._isDragging=!0},this),dragStop:t.proxy(this._onPvtBtnDropped,this),helper:t.proxy(function(t){return t.sender.target.className.indexOf("e-btn")>-1?n(t.sender.target).clone().attr("id",this._id+"_dragClone").appendTo("body"):!1},this)}),this._reSizeHandler());this.model.enableDragDrop&&this.element.find(".pivotButton .pvtBtn").ejButton({size:"normal",type:t.ButtonType.Button,enableRTL:this.model.enableRTL}).ejDraggable({handle:"button",clone:!0,cursorAt:{left:-5,top:-5},dragStart:t.proxy(function(){this._isDragging=!0},this),dragStop:t.proxy(this._onPvtBtnDropped,this),helper:t.proxy(function(t){return t.sender.target.className.indexOf("e-btn")>-1?n(t.sender.target).clone().attr("id",this._id+"_dragClone").appendTo("body"):!1},this)});this.element.find(".pivotButton .filterBtn").ejButton({size:"normal",enableRTL:this.model.enableRTL,type:t.ButtonType.Button,contentType:"imageonly",prefixIcon:"filter"});this.element.find(".pivotButton input").ejToggleButton({size:"normal",enableRTL:this.model.enableRTL,contentType:"imageonly",defaultPrefixIcon:"ascending",activePrefixIcon:"descending",click:t.proxy(this._onSortBtnClick,this)});this.model.pivotControl!=null&&(this.model.pivotControl._dataModel!="XMLA"?this._createTreeView(this,this.model.pivotTableFields):this.model.pivotControl._generateTreeViewData(this));this.model.enableRTL&&this.element.addClass("e-rtl");this._createContextMenu()},_contextOpen:function(i){var u=t.buildTag("div#preventDiv").css({width:n("body").width()+"px",height:n("body").height()+"px",position:"absolute",top:n("body").offset().top+"px",left:n("body").offset().left+"px","z-index":10})[0].outerHTML,f,r;n("body").append(u);this._selectedMember=n(i.target);this._dataModel=="Olap"||this.model.pivotControl._dataModel=="XMLA"?(r=n("#pivotTreeContextMenu").data("ejMenu"),n(i.target).parent().attr("tag").split(":")[1].toLowerCase().startsWith("[measures]")?r.disable():n(i.target).parent().attr("tag").split(":")[1].toLowerCase()=="measures"?(r.disableItem(this._getLocalizedLabels("AddToFilter")),r.enableItem(this._getLocalizedLabels("AddToRow")),r.enableItem(this._getLocalizedLabels("AddToColumn")),r.disableItem(this._getLocalizedLabels("AddToValues"))):(r.disableItem(this._getLocalizedLabels("AddToValues")),n(i.target.parentElement).find(".namedSetCDB").length>0?r.disableItem(this._getLocalizedLabels("AddToFilter")):r.enableItem(this._getLocalizedLabels("AddToFilter")),r.enableItem(this._getLocalizedLabels("AddToRow")),r.enableItem(this._getLocalizedLabels("AddToColumn")))):this._dataModel=="Pivot"&&(f=i.target.textContent,n(i.target).hasClass("pvtBtn")?(r=n("#pivotTreeContextMenu").data("ejMenu"),r.enable()):(r=n("#pivotTreeContextMenu").data("ejMenu"),r.disable()))},_contextClick:function(n){var t=n.text==this._getLocalizedLabels("AddToColumn")?this.element.find(".schemaColumn"):n.text==this._getLocalizedLabels("AddToRow")?this.element.find(".schemaRow"):n.text==this._getLocalizedLabels("AddToValues")?this.element.find(".schemaValue"):n.text==this._getLocalizedLabels("AddToFilter")?this.element.find(".schemaFilter"):"",i={element:this._selectedMember,target:t,cancel:!1};this._onPvtBtnDropped(i)},_createTreeView:function(r,u){var e,f,c,l,o,s,a,h;for(this.element.find(".schemaFieldTree").ejTreeView({showCheckbox:!0,fields:{id:"id",parentId:"pid",text:this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode||this.model.pivotControl._dataModel=="XMLA"?"name":"caption",isChecked:"isSelected",spriteCssClass:"spriteCssClass",dataSource:u},enableRTL:this.model.enableRTL,allowDragAndDrop:this.model.enableDragDrop?!0:!1,allowDropChild:!1,allowDropSibling:!1,dragAndDropAcrossControl:!0,beforeDelete:function(){return!1},nodeDropped:t.proxy(this._onNodeDropped,this),nodeDragStart:t.proxy(this._onNodeDrag,this),nodeDrag:t.proxy(this._onNodeDraged,this)}),this._tableTreeObj=this.element.find(".schemaFieldTree").data("ejTreeView"),this._tableTreeObj.element.find(".e-ul").css({width:"100%",height:"100%"}),this._tableTreeObj.element.find(".measureGroupCDB").parent().siblings(".e-chkbox-wrap").remove(),this._tableTreeObj.element.find(".folderCDB").parent().siblings(".e-chkbox-wrap").remove(),this._tableTreeObj.element.find(".dimensionCDB").parent().siblings(".e-chkbox-wrap").remove(),this._tableTreeObj.element.find(".measureGroupCDB").parents("li").append(t.buildTag("span.elementSeparator")[0].outerHTML),this._tableTreeObj.element.find(".dimensionCDB").parents("li").append(t.buildTag("span.elementSeparator")[0].outerHTML),e=this._tableTreeObj.element.find("li"),f=0;f<e.length;f++)c=this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode?n(e[f]).attr("id"):this.model.pivotTableFields[f].tag,e[f].setAttribute("tag",c),l=n(e[f]).find(".e-chkbox-wrap"),n(l[0]).attr("aria-checked")=="true"&&n(n(e[f])).find(".folderCDB").length<=0&&n(e[f]).attr("tag").toLowerCase().indexOf("[measures]")==-1&&(this.model.pivotControl._dataModel=="XMLA"?n(e[f]).parents("li:eq(0)").length>0&&n(e[f]).parents("li:eq(0)").attr("tag").toLowerCase().indexOf("[measures]")==-1&&(o=this.model.pivotControl._getReportItem(n(e[f]).attr("tag")).item,o.length>0&&(o[0].isNamedSets==i||!o[0].isNamedSets)&&(s=t.buildTag("span.e-icon").css("display","inline-block").addClass("treeDrop").attr("role","button").attr("aria-label","filter button")[0].outerHTML,n(n(e[f]).find(".e-text")[0]).after(s))):(s=t.buildTag("span.e-icon").css("display","none").addClass("treeDrop")[0].outerHTML,n(n(e[f]).find(".e-text")[0]).after(s)));this.model.pivotControl!=null&&this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode?(this._tableTreeObj.model.nodeCheck=t.proxy(this._pivotCheckedStateModified,this),this._tableTreeObj.model.nodeUncheck=t.proxy(this._pivotCheckedStateModified,this)):(this._tableTreeObj.model.nodeCheck=t.proxy(this._onCheckedStateModified,this),this._tableTreeObj.model.nodeUncheck=t.proxy(this._onCheckedStateModified,this));this._tableTreeObj.element.find(".attributeCDB").parent().siblings("ul").remove();this._tableTreeObj.element.find(".attributeCDB").closest("div").find(".e-plus").remove();this._tableTreeObj.element.find(".hierarchyCDB").parent().parent().siblings("ul").find(".e-chkbox-wrap").remove();this._tableTreeObj.element.find(".e-plus").length==0&&this._tableTreeObj.element.find(".e-item").css("padding","0px");this.element.find(".schemaFilter, .schemaColumn, .schemaRow, .schemaValue").ejDroppable({});this.model.pivotControl!=null&&(a=t.buildTag("ul.pivotTreeContext#pivotTreeContext",t.buildTag("li",t.buildTag("a",this._getLocalizedLabels("AddToFilter"))[0].outerHTML)[0].outerHTML+t.buildTag("li",t.buildTag("a",this._getLocalizedLabels("AddToRow"))[0].outerHTML)[0].outerHTML+t.buildTag("li",t.buildTag("a",this._getLocalizedLabels("AddToColumn"))[0].outerHTML)[0].outerHTML+t.buildTag("li",t.buildTag("a",this._getLocalizedLabels("AddToValues"))[0].outerHTML)[0].outerHTML)[0].outerHTML,n(this.element).append(a),n("#pivotTreeContext").ejMenu({menuType:t.MenuType.ContextMenu,openOnClick:!1,enableRTL:this.model.enableRTl,contextMenuTarget:this._tableTreeObj.element[0],click:t.proxy(this._onTreeContextClick,this),beforeOpen:t.proxy(this._onContextOpen,this),close:t.proxy(this.model.pivotControl._onPreventPanelClose,this)}));this.model.pivotControl!=null&&(h=!1,this.model.pivotControl.model.enableDeferUpdate&&(h=!0),this.element.find(".btnDeferUpdate").ejButton({size:"mini",type:t.ButtonType.Button,enabled:h,click:t.proxy(this.model.pivotControl._deferUpdate,this.model.pivotControl)}),this.element.find(".chkDeferUpdate").ejCheckBox({text:this._getLocalizedLabels("DeferLayoutUpdate"),change:this._checkedChange,size:"normal",checked:h}));pschemaDesignerWaitingPopup.hide();this._unWireEvents();this._wireEvents()},_onNodeDraged:function(n){this._trigger("dragMove",n)},_setFirst:!0,_setModel:function(t){for(var i in t)switch(i){case"OlapReport":this.setOlapReport(t[i]);break;case"locale":this._load();break;case"locale":case"enableRTL":n(this.element).html("");this._load()}},_wireEvents:function(){this._on(n(document),"keydown",this._keyDownPress);this.model.layout!="excel"?(this._on(this.element,"mouseover",".pivotButton .pvtBtn",t.proxy(function(t){n(t.target.parentNode).find("span.removePivotBtn").css("display","inline-block")},this)),this._on(this.element,"mouseleave",".pivotButton",t.proxy(function(){this.element.find(".pivotButton > span.removePivotBtn").css("display","none")},this))):(this._on(this.element,"mouseover",".pivotButton .pvtBtn",t.proxy(function(t){this._isDragging&&(this.element.find(".dropIndicator").removeClass("dropIndicatorHover"),n(t.target).siblings(".dropIndicator").addClass("dropIndicatorHover"))},this)),this._on(this.element,"mouseleave",".pivotButton",t.proxy(function(t){this._isDragging&&n(t.target).siblings(".dropIndicator").removeClass("dropIndicatorHover")},this)));this._tableTreeObj.element.find("li").mouseover(t.proxy(function(t){var r,i;n(t.target).siblings("span.e-icon.filter:eq(0)").length>0||n(t.target).find("span.e-icon.filter:eq(0)").length>0||n(t.target).parentsUntil("li").find("span.e-icon.filter:eq(0)").length>0?(r="-35px",this.element.find("span.e-icon.filter").attr("role","button").attr("aria-label","filtered")):(r="-20px",this.element.find("span.e-icon.treeDrop").attr("role","button").attr("aria-label","filter button"));i=n(t.target).siblings("span.e-icon.filter:eq(0)").length>0||n(t.target).find("span.e-icon.filter:eq(0)").length>0||n(t.target).parentsUntil("li").find("span.e-icon.filter:eq(0)").length>0?10:5;this.model.enableRTL?this.model.pivotControl._dataModel!="Pivot"?n(t.target).siblings("span.e-icon.treeDrop:eq(0)").length>0?n(t.target).siblings("span.e-icon.treeDrop:eq(0)").css({display:"inline-block",position:"absolute",top:n(t.target).hasClass("filter")?n(t.target).position().top-22:n(t.target).position().top+2,left:n(t.target).hasClass("filter")?n(t.target).position().left+(6-i):(n(t.target).attr("role")==""?n(t.target).position().left:-2)+(5-i)}):n(t.target).find("span.e-icon.treeDrop:eq(0)").length>0?n(t.target).find("span.e-icon.treeDrop:eq(0)").css({display:"inline-block",position:"absolute"}):n(t.target).parentsUntil("li").find("span.e-icon.treeDrop:eq(0)").css({display:"inline-block",position:"absolute"}):n(t.target).siblings("span.e-icon.treeDrop:eq(0)").length>0?n(t.target).siblings("span.e-icon.treeDrop:eq(0)").css({display:"inline-block",position:"absolute",top:n(t.target).hasClass("filter")?n(t.target).position().top-22:n(t.target).position().top+2,left:n(t.target).hasClass("filter")?n(t.target).position().left+(7-i):n(t.target).position().left+(10-i)}):n(t.target).find("span.e-icon.treeDrop:eq(0)").length>0?n(t.target).find("span.e-icon.treeDrop:eq(0)").css({display:"inline-block",position:"absolute"}):n(t.target).parentsUntil("li").find("span.e-icon.treeDrop:eq(0)").css({display:"inline-block",position:"absolute"}):n(t.target).siblings("span.e-icon.treeDrop:eq(0)").length>0?n(t.target).siblings("span.e-icon.treeDrop:eq(0)").css({display:"inline-block",position:"static","margin-left":r}):n(t.target).find("span.e-icon.treeDrop:eq(0)").length>0?n(t.target).find("span.e-icon.treeDrop:eq(0)").css({display:"inline-block",position:"static"}):n(t.target).parentsUntil("li").find("span.e-icon.treeDrop:eq(0)").css({display:"inline-block",position:"static"});n(t.target).parent().find(".measureGroupCDB, .dimensionCDB, .folderCDB").length>0&&n(t.target).css("cursor","default")},this)).mouseout(t.proxy(function(){n(this._tableTreeObj.element).find("span.e-icon.treeDrop").css({display:"none"})},this));this._on(this.element,"click",".filterBtn",t.proxy(this._onFilterBtnClick,this));this._on(this.element,"click",".removePivotBtn",t.proxy(this._onRemoveBtnClick,this));this._on(this._tableTreeObj.element,"click",".treeDrop",t.proxy(this._onFilterBtnClick,this));this._on(this.element,"click",".ascOrder, .descOrder",t.proxy(this._sortDimensionElement,this));this._on(this.element,"click",".collapseSchema",t.proxy(this._hideSchemaDesigner,this));this._on(this.element,"click",".expandSchema",t.proxy(this._showSchemaDesigner,this));n(window).bind("resize",n.proxy(this._reSizeHandler,this))},_keyDownPress:function(i){var r,u,e,f;(i.keyCode===40||i.which===38)&&(!t.isNullOrUndefined(this.model.pivotControl._curFocus.tab)&&this.model.pivotControl._curFocus.tab.hasClass("e-text")||this.element.find(".schemaFieldList .e-text:visible").hasClass("hoverCell"))&&!n(".editorTreeView:visible").length>0&&!n(".pivotTree:visible,.pivotTreeContext:visible,.pivotTreeContextMenu:visible").length>0?(this.element.find(".hoverCell").removeClass("hoverCell"),this.model.pivotControl._curFocus.tab.mouseleave(),i.preventDefault(),r=this.element.find(".schemaFieldTree .e-text:visible"),t.isNullOrUndefined(this._curFocus.tree)?(this._index.tree=i.which==40?1:i.which==38?r.length-1:0,this._curFocus.tree=r.eq(this._index.tree).attr("tabindex","-1")):(this._curFocus.tree.attr("tabindex","0").removeClass("hoverCell").mouseleave(),i.which===40?this._index.tree=this._index.tree+1>r.length-1?0:this._index.tree+1:i.which===38&&(this._index.tree=this._index.tree-1<0?r.length-1:this._index.tree-1),this._curFocus.tree=r.eq(this._index.tree).attr("tabindex","-1")),this._curFocus.tree.focus().addClass("hoverCell").mouseover(),n(".e-node-focus").removeClass("e-node-focus")):(i.which===40||i.which===38||i.which===37||i.which===39)&&!t.isNullOrUndefined(this.model.pivotControl._curFocus.tab)&&this.model.pivotControl._curFocus.tab.hasClass("pvtBtn")&&!n(".pivotTree:visible,.pivotTreeContext:visible,.pivotTreeContextMenu:visible").length>0&&document.activeElement.className.startsWith("pvtBtn")?(i.preventDefault(),this.element.find(".hoverCell").removeClass("hoverCell"),t.isNullOrUndefined(this.model.pivotControl._curFocus.tab)||this.model.pivotControl._curFocus.tab.mouseleave().attr("tabindex","0").removeClass("hoverCell"),r=this.element.find(".pvtBtn"),t.isNullOrUndefined(this._curFocus.button)?i.which===40||i.which===39?this._curFocus.button=r.eq(1).attr("tabindex","-1"):(i.which===38||i.which===37)&&(this._curFocus.button=r.eq(r.length-1).attr("tabindex","-1")):(this._curFocus.button.attr("tabindex","0").removeClass("hoverCell").mouseleave(),i.which===40||i.which===39?this._index.button=this._index.button+1>r.length-1?0:this._index.button+1:(i.which===38||i.which===37)&&(this._index.button=this._index.button-1<0?r.length-1:this._index.button-1),this._curFocus.button=r.eq(this._index.button)),this._curFocus.button.addClass("hoverCell").mouseover().focus()):(i.keyCode===40||i.which===38)&&this.element.find(".editorTreeView:visible").length>0&&!t.isNullOrUndefined(this.element.find(".e-dialog .e-text"))&&n(".e-dialog .e-text").hasClass("hoverCell")&&(this.element.find(".editorTreeView .hoverCell").removeClass("hoverCell"),i.preventDefault(),r=this.element.find(".e-dialog .e-text:visible"),t.isNullOrUndefined(this._curFocus.node)?(this._index.node=i.which==40?1:i.which==38?r.length-1:0,this._curFocus.node=r.eq(this._index.node).attr("tabindex","-1")):(this._curFocus.node.attr("tabindex","0").removeClass("hoverCell"),i.which===40?this._index.node=this._index.node+1>r.length-1?0:this._index.node+1:i.which===38&&(this._index.node=this._index.node-1<0?r.length-1:this._index.node-1),this._curFocus.node=r.eq(this._index.node).attr("tabindex","-1")),this._curFocus.node.focus().addClass("hoverCell"),n(".e-node-focus").removeClass("e-node-focus"));(i.which===39||i.which===37)&&this.element.find(".schemaFieldTree .e-text:visible").hasClass("hoverCell")&&!n(".editorTreeView:visible").length>0?this.element.find(".schemaFieldTree .hoverCell").parent().find(".e-plus,.e-minus").click():(i.which===39||i.which===37)&&this.element.find(".editorTreeView .e-text:visible").hasClass("hoverCell")?this.element.find(".editorTreeView .hoverCell").parent().find(".e-plus,.e-minus").click():i.which===9&&this.element.find(".editorTreeView:visible").length>0&&(i.preventDefault(),this.element.find(".e-dialog .hoverCell").removeClass("hoverCell"),this._curFocus.node=null,this._index.node=0,u=[],u.push(this.element.find(".e-dialog .e-text").first()),this.element.find(".dialogOKBtn:visible").hasClass("e-disable")||u.push(this.element.find(".dialogOKBtn:visible")),u.push(this.element.find(".dialogCancelBtn:visible")),u.push(this.element.find(".e-close:visible")),t.isNullOrUndefined(this._curFocus.tab)?(this._index.tab=1,this._curFocus.tab=u[this._index.tab].attr("tabindex","-1")):(this._curFocus.tab.attr("tabindex","0").removeClass("hoverCell"),this._index.tab=this._index.tab+1>u.length-1?0:this._index.tab+1,this._curFocus.tab=u[this._index.tab].attr("tabindex","-1")),this._curFocus.tab.focus().addClass("hoverCell"),i.stopImmediatePropagation());i.which===13&&this.element.find(".hoverCell").length>0&&!n(".pivotTree:visible,.pivotTreeContext:visible,.pivotTreeContextMenu:visible").length>0&&(this.element.find(".e-dialog:visible").length>0?this.element.find(".e-dialog .hoverCell").parent().find(".e-chkbox-small").length>0?this.element.find(".e-dialog .hoverCell").parent().find(".e-chkbox-small").click():(this.element.find(".e-dialog .hoverCell").click(),this._index.tab=0,t.isNullOrUndefined(this._curFocus.tree)?t.isNullOrUndefined(this.model.pivotControl._curFocus.tab)||this.model.pivotControl._curFocus.tab.attr("tabindex","-1").focus().mouseover().addClass("hoverCell"):this._curFocus.tree.attr("tabindex","-1").focus().mouseover().addClass("hoverCell")):this.element.find(".schemaFieldTree .hoverCell").length>0?this.element.find(".schemaFieldTree .hoverCell").parent().find(".e-chkbox-small").click():n(".pivotTree:visible,.pivotTreeContext:visible,.pivotTreeContextMenu:visible").length>0&&(this._curFocus.button&&(e=this._curFocus.button.parent().attr("tag")),this.model.pivotControl._curFocus.button=this.element.find("[tag='"+e+"'] button"),this.model.pivotControl._curFocus.button.attr("tabindex","-1").focus().addClass("hoverCell")),i.stopImmediatePropagation());i.which===70&&i.ctrlKey&&(i.preventDefault(),this.element.find(".treeDrop").length>0&&this.element.find(".hoverCell").length>0&&this.element.find(".hoverCell").parent().find(".treeDrop").click());i.keyCode===93&&(i.preventDefault(),f={x:n(".hoverCell").offset().left+n(".hoverCell").outerWidth(),y:n(".hoverCell").offset().top+n(".hoverCell").outerHeight()},n(".hoverCell").trigger({type:"mouseup",which:3,clientX:f.x,clientY:f.y,pageX:f.x,pageY:f.y}));((i.which===79||i.which===67)&&i.ctrlKey||i.which===27)&&this.element.find("hoverCell").length>0&&(i.keyCode==79&&this.element.find(".e-dialog").length>0&&i.ctrlKey&&(i.preventDefault(),this.element.find(".dialogOKBtn:visible").click()),i.keyCode==67&&this.element.find(".e-dialog").length>0&&i.ctrlKey&&(i.preventDefault(),this.element.find(".dialogCancelBtn:visible").click()),this._index.node=0,this.element.find(".hoverCell").removeClass("hoverCell"),t.isNullOrUndefined(this._curFocus.tree)?t.isNullOrUndefined(this._curFocus.button)?t.isNullOrUndefined(this.model.pivotControl._curFocus.tab)||this.model.pivotControl._curFocus.tab.attr("tabindex","-1").focus().mouseover().addClass("hoverCell"):this._curFocus.button.attr("tabindex","-1").focus().mouseover().addClass("hoverCell"):this._curFocus.tree.attr("tabindex","-1").focus().mouseover().addClass("hoverCell"))},_unWireEvents:function(){this._off(this.element,"click",".filterBtn, .ascOrder, .descOrder");this._off(n(document),"keydown",this._keyDownPress);this._off(this.element,"mouseover",".pivotButton");this._off(this.element,"mouseover",".pivotButton .pvtBtn");this._off(this.element,"mouseleave",".pivotButton");this._off(this.element,"mouseover",".schemaFieldTree li");this._off(this.element,"mouseout",".schemaFieldTree li");this._off(this._tableTreeObj.element,"click",".treeDrop");this._off(this._tableTreeObj.element,"click","li");n(window).unbind("resize",n.proxy(this._reSizeHandler,this))},_getLocalizedLabels:function(n){return t.PivotSchemaDesigner.Locale[this.locale()][n]===i?t.PivotSchemaDesigner.Locale["en-US"][n]:t.PivotSchemaDesigner.Locale[this.locale()][n]},_setTableFields:function(n){t.isNullOrUndefined(n)||(this.model.pivotTableFields=n)},_setPivotRows:function(n){t.isNullOrUndefined(n)||(this.model.pivotRows=n)},_setPivotColumns:function(n){t.isNullOrUndefined(n)||(this.model.pivotColumns=n)},_setPivotCalculations:function(n){t.isNullOrUndefined(n)||(this.model.pivotCalculations=n)},_setFilters:function(n){t.isNullOrUndefined(n)||(this.model.filters=n)},_getSortedHeaders:function(){for(var i=this.element.find(".descending").parents("label"),r="",t=0;t<i.length;t++)r+=n(i[t]).attr("for").replace("toggleBtn","")+"##";return r},_onContextOpen:function(i){var u,f,r;if(n(i.target.parentElement).find(".measureGroupCDB").length>0||n(i.target.parentElement).find(".folderCDB").length>0||n(i.target.parentElement).find(".dimensionCDB").length>0)return!1;u=t.buildTag("div#preventDiv").css({width:n("body").width()+"px",height:n("body").height()+"px",position:"absolute",top:n("body").offset().top+"px",left:n("body").offset().left+"px","z-index":10})[0].outerHTML;n("body").append(u);this._selectedMember=n(i.target);this._dataModel=="Olap"||this.model.pivotControl._dataModel=="XMLA"?(r=n("#pivotTreeContext").data("ejMenu"),n(i.target).parents("li:eq(0)").attr("tag").toLowerCase().indexOf("[measures]")>=0?(r.disableItem(this._getLocalizedLabels("AddToFilter")),r.disableItem(this._getLocalizedLabels("AddToRow")),r.disableItem(this._getLocalizedLabels("AddToColumn")),r.enableItem(this._getLocalizedLabels("AddToValues"))):(r.disableItem(this._getLocalizedLabels("AddToValues")),n(i.target.parentElement).find(".namedSetCDB").length>0?r.disableItem(this._getLocalizedLabels("AddToFilter")):r.enableItem(this._getLocalizedLabels("AddToFilter")),r.enableItem(this._getLocalizedLabels("AddToRow")),r.enableItem(this._getLocalizedLabels("AddToColumn")))):this._dataModel=="Pivot"&&(f=i.target.textContent,n(i.target).hasClass("e-text")&&n.grep(this.model.pivotControl._calculatedField,function(n){return n.name==f}).length==0?(r=n("#pivotTreeContext").data("ejMenu"),r.enable()):(r=n("#pivotTreeContext").data("ejMenu"),r.disable()))},_onNodeDrag:function(t){return this._isDragging=!0,n(t.dragTarget.parentElement).find(".measureGroupCDB").length>0||n(t.dragTarget.parentElement).find(".folderCDB").length>0||n(t.dragTarget.parentElement).find(".dimensionCDB").length>0?!1:void 0},_onTreeContextClick:function(n){t.isNullOrUndefined(this._curFocus.tree)?t.isNullOrUndefined(this.model.pivotControl._curFocus.tab)||this.model.pivotControl._curFocus.tab.attr("tabindex","-1").focus().addClass("hoverCell"):this._curFocus.tree.attr("tabindex","-1").focus().addClass("hoverCell");var i=n.text==this._getLocalizedLabels("AddToColumn")?this.element.find(".schemaColumn"):n.text==this._getLocalizedLabels("AddToRow")?this.element.find(".schemaRow"):n.text==this._getLocalizedLabels("AddToValues")?this.element.find(".schemaValue"):n.text==this._getLocalizedLabels("AddToFilter")?this.element.find(".schemaFilter"):"",r={dropTarget:i,droppedElement:this._selectedMember.parent().parent(),target:i};this._onNodeDropped(r)},_checkedChange:function(t){var i=n(t.event.target).parents(".e-pivotschemadesigner").data("ejPivotSchemaDesigner"),r=n(".btnDeferUpdate").data("ejButton");t.isChecked?(i.model.pivotControl.model.enableDeferUpdate=!0,r.enable()):(i.model.pivotControl.model.enableDeferUpdate=!1,i.model.pivotControl._isUpdateRequired&&i.model.pivotControl._deferUpdate(),r.disable())},_onSortBtnClick:function(){var i=JSON.stringify(this.model.customObject),n=this._getSortedHeaders(),r=this.model.customObject!={}&&n!=""?JSON.stringify({action:"sorting",sortedHeaders:n,currentReport:this.model.pivotControl.getOlapReport(),customObject:i}):this.model.customObject!={}?JSON.stringify({action:"sorting",currentReport:this.model.pivotControl.getOlapReport(),customObject:i}):n!=""?JSON.stringify({action:"sorting",sortedHeaders:n,currentReport:this.model.pivotControl.getOlapReport()}):JSON.stringify({action:"sorting"});t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.show();this.model.pivotControl.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.pivotControl.model.serviceMethods.sorting,r,this.model.pivotControl._renderControlSuccess)},_generateMembers:function(i){var e=n(i).find("Axis:eq(0) Tuple"),u=[],o={},r,f,s;for(u.push({id:"All",name:"All",checkedStatus:!0,tag:""}),r=0;r<e.length;r++)f=n(n(i).find("Axis:eq(0) Tuple:eq("+r+")").children().children()[0]).text(),s=n(n(i).find("Axis:eq(0) Tuple:eq("+r+")").children().children()[1]).text(),o={hasChildren:n(e[r]).find("CHILDREN_CARDINALITY").text()!="0",checkedStatus:!0,id:f.replace(/\]*\]/g,"-").replace(/\[*\[/g,"-"),name:s,tag:f},u.push(o);t.isNullOrUndefined(pschemaDesignerWaitingPopup)||pschemaDesignerWaitingPopup.hide();this._fetchMemberSuccess({EditorTreeInfo:JSON.stringify(u)})},_sortDimensionElement:function(n){this.model.pivotControl&&this.model.pivotControl._sortDimensionElement(n,this)},_onFilterBtnClick:function(i){var r,o,e,v,s,h,c,y,l,u,f,a,p;if(this.model.pivotControl._editorFlag=!1,this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode){for(this.model.pivotControl._dataModel=="XMLA"?(this._selectedLevel=n(n(i.target).parents("li:eq(0)")).attr("tag"),r=n(i.target).parents("li:eq(0)").children("div:eq(0)").find(".levels").length>0?n(n(i.target).parents("li:eq(1)")).attr("tag"):n(n(i.target).parents("li:eq(0)")).attr("tag")):r=n.grep(this.model.pivotTableFields,function(t){return t.caption==n(n(i.target).parent()).text()})[0].name,e=0;e<this.element.find(".pivotButton").length;e++)if(uniqueName=n(this.element.find(".pivotButton")[e]).find("button").attr("fieldName"),uniqueName==r){o=n(this.element.find(".pivotButton")[e]).find("button").text();this._selectedAxis=n(this.element.find(".pivotButton")[e]).parent()[0].className.split(" ")[0];break}this._selectedAxis=this.model.pivotControl._selectedAxis=this._selectedAxis=="schemaRow"?"rows":this._selectedAxis=="schemaColumn"?"columns":this._selectedAxis=="schemaValue"?"values":"filters";this._dialogTitle=this.model.pivotControl._dialogTitle=o;this._dialogHead=this.model.pivotControl._dialogHead=o;this._selectedMember=this.model.pivotControl._selectedField=r;this.model.pivotControl._dataModel=="XMLA"?(v=n(i.currentTarget).parents("li:eq(0)").attr("tag"),s=n.map(this.model.pivotControl._currentReportItems,function(n){if(n.fieldName==v)return n.filterItems}),s.length>0?this._fetchMemberSuccess({EditorTreeInfo:JSON.stringify(s)}):(t.isNullOrUndefined(pschemaDesignerWaitingPopup)||pschemaDesignerWaitingPopup.show(),this._selectedMember=r,h=this.model.pivotControl._getReportItem(r),parsedMDX="select {"+(h.item.length>0&&h.item[0].hasAllMember?r+".levels(0).members":r+".children")+"} dimension properties CHILDREN_CARDINALITY on 0 from ["+n.trim(this.model.pivotControl.model.dataSource.cube)+"]",c=this.model.pivotControl._getConnectionInfo(this.model.pivotControl.model.dataSource.data),pData='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"> <Header><\/Header> <Body> <Execute xmlns="urn:schemas-microsoft-com:xml-analysis"> <Command> <Statement> '+parsedMDX+" <\/Statement> <\/Command> <Properties> <PropertyList> <Catalog>"+this.model.pivotControl.model.dataSource.catalog+"<\/Catalog> <LocaleIdentifier>"+c.LCID+"<\/LocaleIdentifier><\/PropertyList> <\/Properties> <\/Execute> <\/Body> <\/Envelope>",this.doAjaxPost("POST",c.url,{XMLA:pData},this._generateMembers,null,{action:"fetchMembers"}))):(y=this.model.pivotControl._getTreeViewData(r,o,this._selectedAxis),this._fetchMemberSuccess({EditorTreeInfo:JSON.stringify(y)}))}else if(n(this._tableTreeObj.element).find("span.e-icon.treeDrop").css({display:"none"}),l=n(i.target).parent().find("a>span").attr("class"),u=this._dataModel=="Olap"?l.indexOf("hierarchyCDB")>-1||l.indexOf("attributeCDB")>-1?n(i.target).parents("li")[0]:n(i.target).parents("li")[1]:n(n(i.target).parent()).parent(),this._selectedTreeNode=u,i.target.tagName.toLowerCase()=="span"){if(this._curFilteredText=this.model.layout!="excel"?n(n(i.target).parents(".pivotButton")).find(".pvtBtn").text():this._dataModel=="Olap"?n(u).attr("tag").replace(/\]/g,"").replace(/\[/g,""):this._dataModel=="Pivot"?n(u).attr("id"):n(u).find("div:first").text(),n(i.target).parents("li:eq(1)").find("div:first>a>span").hasClass("hierarchyCDB")&&(this._curFilteredText=n(i.target).parents("li:eq(1)").find("div:first>a").text()),this._dataModel=="Pivot"&&(this._curFilteredAxis=t.isNullOrUndefined(this.element.find(".e-btn:contains('"+n(u).find("div:first").text()+"')").parents(".e-droppable")[0])?"":this.element.find(".e-btn:contains('"+n(u).find("div:first").text()+"')").parents(".e-droppable")[0].className.split(" ")[0],this._dialogHead=n(i.target).parent().text()),this._dialogTitle=this._dataModel=="Olap"?n(this.element.find(".pivotButton:contains('"+n(u).find("div:first").text()+"')")[0]).attr("tag"):n(i.target).parents("li").attr("id")||i.target.id.replace("filterBtn","")||n(i.target).parents(".filterBtn")[0].id.replace("filterBtn",""),this._dataModel=="Olap")for(f=0;f<this.element.find(".e-btn").length;f++)if(!t.isNullOrUndefined(n(n(n(this.element.find(".e-btn"))[f]).parent()[0]).attr("tag"))&&n(n(n(this.element.find(".e-btn"))[f]).parent()[0]).attr("tag").split(":")[1]==n(this._selectedTreeNode).attr("tag").replace(/\]/g,"").replace(/\[/g,"")&&n(n(n(this.element.find(".e-btn"))[f]).parent()[0]).attr("tag").indexOf(this._curFilteredText)>-1){this._curFilteredAxis=t.isNullOrUndefined(n(n(this.element.find(".e-btn"))[0]).parents(".e-droppable")[0])?"":n(n(this.element.find(".e-btn"))[0]).parents(".e-droppable")[0].className.split(" ")[0];this._dialogTitle=n(n(n(this.element.find(".e-btn"))[f]).parent()[0]).attr("tag");this._dialogHead=n(n(n(this.element.find(".e-btn"))[f]).parent()[0]).text();break}try{a=JSON.parse(this.model.pivotControl.getOlapReport()).Report}catch(w){a=this.model.pivotControl.getOlapReport()}sortedHeaders=this._getSortedHeaders();this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"fetchMembers",element:this.element,customObject:this.model.customObject});p=JSON.stringify(this.model.customObject);eventArgs=JSON.stringify({action:"fetchMembers",headerTag:this._dialogTitle||"UniqueName##"+n(u).attr("tag"),sortedHeaders:this.model.pivotControl._ascdes,currentReport:a,customObject:p});this.model.pivotControl._ogridWaitingPopup.show();this.element.find(".schemaNoClick").addClass("freeze").width(n(this.element).width()).height(n(this.element).height()).css({top:n(this.element).offset().top,left:n(this.element).offset().left});this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.fetchMembers,eventArgs,this._fetchMemberSuccess)}},_onRemoveBtnClick:function(i){var u=n(i.target.parentElement).text(),f=n(n(this._tableTreeObj.element).find("div:contains("+u+")>span")[1]).find(".e-chk-act"),e,r,o,s;for(n(f).removeClass("e-chk-act").addClass("e-chk-inact"),n(f).children("e-checkmark").removeClass("e-checkmark"),r=0;r<this.model.pivotTableFields.length;r++)this.model.pivotTableFields[r].FieldHeader==u&&(this.model.pivotTableFields[r].IsSelected=!1,e=this.model.pivotTableFields[r]);n(i.target.parentElement).remove();this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"nodeStateModified",element:this.element,customObject:this.model.customObject});o=JSON.stringify(this.model.customObject);s=JSON.stringify({action:"nodeStateModified",headerTag:JSON.stringify(e),sortedHeaders:this._getSortedHeaders(),currentReport:this.model.pivotControl.getOlapReport(),customObject:o});t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.show();this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeStateModified,s,this._nodeStateModifiedSuccess)},_onNodeCheckChanges:function(i){if(this._isFiltered=!0,(i.value=="(All)"||i.value=="All")&&i.type=="nodeUncheck")this._memberTreeObj.model.nodeCheck="",this._memberTreeObj.model.nodeUncheck="",this.element.find(".editorTreeView").ejTreeView("unCheckAll"),this._memberTreeObj.model.nodeCheck=t.proxy(this._onNodeCheckChanges,this),this._memberTreeObj.model.nodeUncheck=t.proxy(this._onNodeCheckChanges,this),this._dialogOKBtnObj.disable();else if((i.value=="(All)"||i.value=="All")&&i.type=="nodeCheck")this._memberTreeObj.model.nodeCheck="",this._memberTreeObj.model.nodeUncheck="",this.element.find(".editorTreeView").ejTreeView("checkAll"),n(this._memberTreeObj.element.find("li:first")).find("div .e-chkbox-small > span > span:eq(0)").removeClass("e-stop"),this._memberTreeObj.model.nodeCheck=t.proxy(this._onNodeCheckChanges,this),this._memberTreeObj.model.nodeUncheck=t.proxy(this._onNodeCheckChanges,this),this._dialogOKBtnObj.enable();else if(i.value!="(All)"){var r=this._memberTreeObj.element.find(":input:gt(0).nodecheckbox:not(:checked)"),u=n(this._memberTreeObj.element.find("li:first")).find("div .e-chkbox-small > span > span:eq(0)");r.length==0||r.length==1&&r[0].id[r[0].id.length-1]==0?(n(u).parent().removeClass("e-chk-inact").removeClass("e-chk-ind").addClass("e-chk-act"),u.removeClass("e-stop").addClass("e-checkmark")):i.type=="nodeCheck"&&r.length==1&&r[0].id[r[0].id.length-1]==0?u.removeClass("e-stop").addClass("e-checkmark"):r.length>0&&u.removeClass("e-checkmark").addClass("e-stop");this._dialogOKBtnObj.enable();i.type=="nodeUncheck"&&r.length+1==this._memberTreeObj.element.find("li").length&&(u.removeClass("e-checkmark").removeClass("e-stop"),this._dialogOKBtnObj.disable())}},_pivotCheckedStateModified:function(r){var f,b,l,a,c,k,p,u;if(this._nodeCheck==!0)return this._nodeCheck=!1,!1;var e=this.model.pivotControl._dataModel=="XMLA"?n(r.currentElement).attr("tag"):this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode?n.grep(this.model.pivotTableFields,function(t){return t.caption==n(r.currentElement).find("a")[0].textContent})[0].name:n(r.currentElement).find("a")[0].textContent,s=n(r.currentElement).find("a")[0].textContent,h="",v="",w="",y="",o=this.model.pivotControl._dataModel=="XMLA"?"XMLA":"",h=[];for(u=0;u<this.element.find(".pivotButton").length;u++)if(w=n(this.element.find(".pivotButton")[u]).find("button").attr("fieldName"),w==e&&(h.push(this.element.find(".pivotButton")[u]),o=="XMLA"))break;for(u=0;u<this.model.pivotTableFields.length;u++)this.model.pivotTableFields[u].name==e&&r.type=="nodeCheck"?(this.model.pivotTableFields[u].isSelected=!0,v=this.model.pivotTableFields[u]):this.model.pivotTableFields[u].name==e&&r.type=="nodeUncheck"&&(this.model.pivotTableFields[u].isSelected=!1,v=this.model.pivotTableFields[u]);if(r.type=="nodeUncheck")if(h.length>1)for(u=0;u<h.length;u++)n(h[u]).find("button").attr("fieldName")==e&&n(h[u]).remove();else n(h).remove();try{y=JSON.parse(this.model.pivotControl.getOlapReport()).Report}catch(d){y=this.model.pivotControl.getOlapReport()}if(o=="XMLA"&&y==""&&(y=this.model.pivotControl.model.dataSource,this._selectedMember=e,this._selectedTreeNode=n(r.currentElement),this.model.pivotControl.dataSource=this.model.pivotControl._clearDrilledItems(this.model.pivotControl.model.dataSource,{action:"nodeStateModefied"})),f=this._droppedClass!=""?this._droppedClass:v.pivotType!=i?v.pivotType=="PivotItem"?"schemaRow":"schemaValue":"schemaRow",this._droppedClass="",r.type=="nodeCheck"){if(o=="XMLA"?(s=n(r.currentElement).find(".kpi").length>0?n(r.currentElement).parents("li:eq(0)").children("div").text()+" "+s:s,b=this.model.pivotControl.model.dataSource.enableAdvancedFilter?n(r.currentElement.find(".e-text")):n(r.currentElement.find(".e-text")[0]),n(r.currentElement).attr("tag").toLowerCase().indexOf("[measures]")<0&&!(n(r.currentElement).find(".namedSetCDB").length>0)?b.after(t.buildTag("span.e-icon").css("display","none").addClass("treeDrop")[0].outerHTML):"",n(r.currentElement).attr("tag").toLocaleLowerCase().indexOf("[measures]")>=0&&(f="schemaValue"),droppedItem=n(r.currentElement).find(".namedSetCDB").length>0?{fieldName:n(r.currentElement).attr("tag"),fieldCaption:n(r.currentElement).text(),isNamedSets:!0}:t.olap.base._getCaption({fieldName:e,fieldCaption:s},this.model.pivotControl._fieldData.hierarchy)):(n(r.currentElement.find(".e-text")[0]).after(t.buildTag("span.e-icon").css("display","none").addClass("treeDrop")[0].outerHTML),droppedItem={fieldName:e,fieldCaption:s}),f=f==""?"row":f=="schemaColumn"?"column":f=="schemaRow"?"row":f=="schemaValue"?"value":f=="schemaFilter"?"filter":"",this._dataModel=="Pivot"&&(l=n.grep(this.model.pivotControl._calculatedField,function(n){return n.name==e}),l.length>0)){for(a=l[0].formula.replace(/\(|\)/g," ").replace(/[-+*/^%]/g," ").split(" "),c=0;c<a.length;c++)if(!n.isNumeric(a[c])&&a[c].replace(/\s+|\s+$/gm,"")!=""&&n.grep(this.model.pivotControl.model.dataSource.values,function(n){return n.fieldName==a[c]}).length==0){alert(this.model.pivotControl._getLocalizedLabels("NotPresent"));this._tableTreeObj.uncheckNode(l[0].name);return}f="value";droppedItem={fieldName:e,fieldCaption:s,isCalculatedField:!0,formula:l[0].formula}}this._createPivotButton(droppedItem,f,"","","");o=="XMLA"&&f=="value"?(this.model.pivotControl.model.dataSource.values.length==0&&this.model.pivotControl.model.dataSource.values.push({measures:[],axis:"columns"}),measuresAxis=this.model.pivotControl.model.dataSource.values[0].axis=="columns"?"Columns:":"Rows:",this.element.find("div[tag='"+measuresAxis+"Measures']").length==0&&this._createPivotButton({fieldName:"Measures",fieldCaption:this._getLocalizedLabels("Measures")},measuresAxis=="Columns:"?"column":"row","","",""),this.model.pivotControl.model.dataSource.values[0].measures.push(droppedItem)):n.grep(this.model.pivotControl.model.dataSource.values,function(n){return n.fieldName==droppedItem.fieldName}).length==0&&(f=="row"?this.model.pivotControl.model.dataSource.rows.push(droppedItem):f=="column"?this.model.pivotControl.model.dataSource.columns.push(droppedItem):f=="filter"?this.model.pivotControl.model.dataSource.filters.push(droppedItem):this.model.pivotControl.model.dataSource.values.push(droppedItem));o=="XMLA"?(t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.show(),t.olap.base.getJSONData({action:"nodeCheck"},this.model.pivotControl.model.dataSource,this.model.pivotControl)):(this._trigger("fieldItemDropped",{axis:f,fieldItem:r.currentElement}),this.model.pivotControl._populatePivotGrid())}else if(r.type=="nodeUncheck"){if(n(r.currentElement).removeClass("filter").find(".filter").remove(),n(r.currentElement).removeClass("filter").find(".treeDrop").remove(),this.model.pivotControl.model.dataSource.columns=n.grep(this.model.pivotControl.model.dataSource.columns,function(n){return n.fieldName!=e}),this.model.pivotControl.model.dataSource.rows=n.grep(this.model.pivotControl.model.dataSource.rows,function(n){return n.fieldName!=e}),k=this.model.pivotControl.model.dataSource.values,o=="XMLA")t.olap._mdxParser._getItemPosition(this.model.pivotControl.model.dataSource.values[0].measures,e).length>0&&this.model.pivotControl.model.dataSource.values[0].measures.splice(t.olap._mdxParser._getItemPosition(this.model.pivotControl.model.dataSource.values[0].measures,e)[0],1),this.model.pivotControl.model.dataSource.values[0].measures.length==0&&this.element.find("div[tag='"+(this.model.pivotControl.model.dataSource.values[0].axis=="columns"?"Columns":"Rows")+":Measures']").remove();else if(this.model.pivotControl.model.dataSource.values=n.grep(k,function(n){return n.fieldName!=e}),this.model.pivotControl._calculatedField.length>0)for(p=n.grep(this.model.pivotControl.model.dataSource.values,function(n){return n.isCalculatedField==!0&&n.formula.indexOf(e)>-1}),u=0;u<p.length;u++)this._tableTreeObj.uncheckNode(p[u].fieldName);this.model.pivotControl.model.dataSource.filters=n.grep(this.model.pivotControl.model.dataSource.filters,function(n){return n.fieldName!=e});o=="XMLA"?(t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.show(),t.olap.base.getJSONData({action:"nodeUncheck"},this.model.pivotControl.model.dataSource,this.model.pivotControl)):(f=f==""?"row":f=="schemaColumn"?"column":f=="schemaRow"?"row":f=="schemaValue"?"value":f=="schemaFilter"?"filter":"",this._trigger("fieldItemDropped",{axis:f,fieldItem:r.currentElement}),this.model.pivotControl._populatePivotGrid())}},_onCheckedStateModified:function(i){var k,d,y,c,a,p,w,u,s,f,g,tt,r,b,o;if(this.model.pivotControl._isUpdateRequired=!0,this._isMeasureBtnRemove==!0)return this._isMeasureBtnRemove=!1,!1;if(this._nodeCheck==!0)return this._nodeCheck=!1,!1;var e=n(i.currentElement).find("a")[0].textContent,v="",nt="",h="",u="",l="";if(this._dataModel=="Olap")if(!i.currentElement[0].id.indexOf("[Measures]")>-1){for(r=0;r<this.element.find(".pivotButton").length;r++)if(u=n(this.element.find(".pivotButton")[r]).attr("tag"),l="",l=u.indexOf("[Measures]")>-1||u.indexOf("[")>-1?u.split(":")[1]:this.model.pivotControl._getNodeUniqueName(u),l=l.replace("<>","."),n(i.currentElement).attr("tag").toLowerCase()==l.toLowerCase()){h=n(this.element.find(".pivotButton")[r]);break}}else h=this.element.find(".pivotButton:contains("+e+")"),u,s;else h=this.element.find(".pivotButton:contains("+e+")"),u,s;for(k=h.length>0&&n(h).siblings(".filterIndicator").length>0?!0:!1,d=i.currentElement.find("~ span:eq(0) span.descending").length>0?!0:!1,r=0;r<this.model.pivotTableFields.length;r++)this.model.pivotTableFields[r].name==e&&i.type=="nodeCheck"?(this.model.pivotTableFields[r].isSelected=!0,u=this.model.pivotTableFields[r]):this.model.pivotTableFields[r].name==e&&i.type=="nodeUncheck"&&(this.model.pivotTableFields[r].isSelected=!1,u=this.model.pivotTableFields[r]);if(t.isNullOrUndefined(u)&&(u=n(i.currentElement).attr("tag")),i.type=="nodeUncheck")if(h.length>1)for(r=0;r<h.length;r++)n(h[r]).text()==e&&n(h[r]).remove();else n(h).remove();else this._droppedClass!=""?this._createPivotButton(e,this._droppedClass=="schemaColumn"?"column":this._droppedClass=="schemaRow"?"row":this._droppedClass=="schemaValue"?"value":this._droppedClass=="schemaFilter"?"filter":"",k,d,""):this._createPivotButton(e,this._dataModel=="Olap"&&n(i.currentElement).attr("tag").indexOf("[Measures]")<0||this._dataModel=="Pivot"&&u.pivotType=="PivotItem"?"row":"value",k,d,"");if(!t.isNullOrUndefined(this._tempFilterData))for(r=0;r<this._tempFilterData.length;r++)if(!t.isNullOrUndefined(this._tempFilterData[r][e]))for(y=0;y<this._tempFilterData[r][e].length;y++)nt+="##"+this._tempFilterData[r][e][y];try{s=JSON.parse(this.model.pivotControl.getOlapReport()).Report}catch(it){s=this.model.pivotControl.getOlapReport()}if(v="schemaRow::"+e+"::FILTERED"+nt,c=this._droppedClass!=""?this._droppedClass:u.pivotType=="PivotItem"?"schemaRow":"schemaValue",this._droppedClass="",this.model.pivotControl.model.enableDeferUpdate||t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.show(),this.element.find(".schemaNoClick").addClass("freeze").width(n(this.element).width()).height(n(this.element).height()).css({top:n(this.element).offset().top,left:n(this.element).offset().left}),i.type=="nodeCheck"||i.type=="nodeUncheck"||c==""){if(i.type=="nodeCheck")this._dataModel=="Olap"?(n(i.currentElement).attr("tag").indexOf("[Measures]")==-1&&(w=t.buildTag("span.e-icon").attr("role","button").attr("aria-label","filter button").addClass("treeDrop")[0].outerHTML,n(i.currentElement.find(".e-text")[0]).after(n(w).hide())),this._nodeDropedParams=c=="schemaColumn"?"Categorical":c=="schemaRow"?"Series":c=="schemaFilter"?"Slicer":"",u=n(i.currentElement).attr("tag"),a=this._nodeDropedParams==""?n(i.currentElement).attr("tag").indexOf("[Measures]")>=0?"Categorical":"Series":this._nodeDropedParams,u.toLowerCase().indexOf("[measures]")>-1&&(a="Categorical"),p=this._currentCubeName+"--"+u+"--"+a+"--",s,this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"nodeDropped",element:this.element,customObject:this.model.customObject}),o=JSON.stringify(this.model.customObject),f=JSON.stringify({action:"nodeDropped",dropType:"TreeNode",nodeInfo:p,currentReport:s,gridLayout:this.model.pivotControl.model.layout,customObject:o}),this.model.pivotControl.model.enableDeferUpdate?this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeDropped,f.replace("nodeDropped","nodeDroppedDeferUpdate"),this._onDroppedSuccess):this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeDropped,f,this._onDroppedSuccess)):(n(i.currentElement.find(".e-text")[0]).after(n(t.buildTag("span.e-icon").attr("role","button").attr("aria-label","filter button").addClass("treeDrop")[0].outerHTML).hide()),this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"nodeStateModified",element:this.element,customObject:this.model.customObject}),o=JSON.stringify(this.model.customObject),f=JSON.stringify({action:"nodeStateModified",headerTag:JSON.stringify(u),dropAxis:c+"::",sortedHeaders:this.model.pivotControl._ascdes,filterParams:v,currentReport:s,customObject:o}),this.model.pivotControl.model.enableDeferUpdate?(this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeStateModified,f.replace("nodeStateModified","nodeStateModifiedDeferUpdate"),this._nodeStateModifiedSuccess),t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.hide()):this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeStateModified,f,this._nodeStateModifiedSuccess));else if(i.type=="nodeUncheck")if(this._dataModel=="Olap"){if(n(i.currentElement.find(".treeDrop")).remove(),n(i.currentElement).find(".filter").removeClass("filter"),u=n(h).attr("tag"),this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"removeButton",element:this.element,customObject:this.model.customObject}),o=JSON.stringify(this.model.customObject),f=JSON.stringify({action:"removeButton",headerInfo:u,currentReport:s,gridLayout:this.model.pivotControl.model.layout,customObject:o}),t.isNullOrUndefined(u))return!1;(u.indexOf("[Measures]")>=0||u.toLowerCase().indexOf("[measures]"))&&this.element.find(".schemaValue .pivotButton").length==0?(g=u.split(":"),tt=g[0]=="Rows"?".schemaRow":g[0]=="Columns"?".schemaColumn":"",this.element.find(tt+" .pivotButton:contains('Measures')").remove()):u.indexOf("[Measures]")<0&&u.indexOf("Measures")>=0&&this.element.find(".schemaValue .pivotButton").remove();this.model.pivotControl.model.enableDeferUpdate?(this._removeButtonDeferUpdate=!0,this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.removeButton,f.replace("removeButton","removeButtonDeferUpdate"),this._onDroppedSuccess)):this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.removeButton,f,this._pvtBtnDroppedSuccess)}else{if(!t.isNullOrUndefined(this._tempFilterData))for(r=0;r<this._tempFilterData.length;r++)for(b in this._tempFilterData[r])b==e&&(this._tempFilterData[r][e]=[]);if(!t.isNullOrUndefined(this.model.pivotControl._tempFilterData))for(r=0;r<this.model.pivotControl._tempFilterData.length;r++)for(b in this.model.pivotControl._tempFilterData[r])b==u.id&&(this.model.pivotControl._tempFilterData[r][u.id]=[]);n(i.currentElement).removeClass("filter").find(".filter").remove();n(i.currentElement).removeClass("filter").find(".treeDrop").remove();this.model.pivotControl._ascdes=this.model.pivotControl._ascdes.replace(e+"##","");this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"nodeStateModified",element:this.element,customObject:this.model.customObject});o=JSON.stringify(this.model.customObject);f=JSON.stringify({action:"nodeStateModified",headerTag:JSON.stringify(u),dropAxis:c+"::",sortedHeaders:this.model.pivotControl._ascdes,filterParams:v,currentReport:s,customObject:o});this.model.pivotControl.model.enableDeferUpdate?(this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeStateModified,f.replace("nodeStateModified","nodeStateModifiedDeferUpdate"),this._nodeStateModifiedSuccess),t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.hide()):this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeStateModified,f,this._nodeStateModifiedSuccess)}}else this._dataModel=="Pivote"?(this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"nodeStateModified",element:this.element,customObject:this.model.customObject}),o=JSON.stringify(this.model.customObject),f=JSON.stringify({action:"nodeStateModified",headerTag:JSON.stringify(u),dropAxis:c+"::"+this._droppedPosition,sortedHeaders:this.model.pivotControl._ascdes,filterParams:v,currentReport:s,customObject:o}),this._droppedPosition="",this.model.pivotControl.model.enableDeferUpdate?this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeStateModified,f.replace("nodeStateModified","nodeStateModifiedDeferUpdate"),this._nodeStateModifiedSuccess):this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeStateModified,f,this._nodeStateModifiedSuccess)):(n(i.currentElement).attr("tag").toLowerCase().indexOf("[measures]")==-1&&(w=t.buildTag("span.e-icon").attr("role","button").attr("aria-label","filter button").addClass("treeDrop")[0].outerHTML,n(i.currentElement.find(".e-text")[0]).after(n(w).hide())),u=n(i.currentElement).attr("tag"),a=this._nodeDropedParams==""?n(i.currentElement).attr("tag").toLowerCase().indexOf("[Measures]")>=0?"Categorical":"Series":this._nodeDropedParams,p=this._currentCubeName+"--"+u+"--"+a+"--",s,this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"nodeDropped",element:this.element,customObject:this.model.customObject}),o=JSON.stringify(this.model.customObject),f=JSON.stringify({action:"nodeDropped",dropType:"TreeNode",nodeInfo:p,currentReport:s,customObject:o}),this.model.pivotControl.model.enableDeferUpdate?this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeDropped,f.replace("nodeDropped","nodeDroppedDeferUpdate"),this._onDroppedSuccess):this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeDropped,f,this._onDroppedSuccess))},_onNodeDropped:function(r){var w,it,g,ft,et,ot,rt,k,st,nt,u,f,d,l,v,y,h,a,ht,ct,tt,p;if(this.model.pivotControl._isUpdateRequired=!0,r.dropTarget.context!=i||r.dropTarget.className!=i){if(w=!1,this._dataModel=="Pivot")for(it=n(r.dropTarget).parents(),u=0;u<it.length;u++)it[u].className.split(" ")[0]=="e-pivotgrid"&&(w=!0);if(r.dropTarget.hasClass("e-droppable")||r.dropTarget.context!=i&&r.dropTarget.context.className.indexOf("e-droppable")>=0||r.dropTarget.className!=i&&r.dropTarget.className.indexOf("e-droppable")>=0||w){this._isDragging=!1;this.element.find(".dropIndicator").removeClass("dropIndicatorHover");var s=n(r.droppedElement).attr("tag"),o=this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode&&this.model.pivotControl._dataModel!="XMLA"?n.grep(this.model.pivotTableFields,function(n){return n.caption==r.droppedElement.text()})[0].name:this._dataModel=="XMLA"?r.droppedElement.attr("tag"):r.droppedElement.text(),lt="",b,c=this.element.find(".pivotButton:contains("+o+")"),e=this._dataModel=="XMLA"?this._tableTreeObj.element.find("li[tag='"+s+"']").length>1?r.droppedElement:this._tableTreeObj.element.find("li[tag='"+s+"']"):this._dataModel=="Pivot"&&this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode?this._tableTreeObj.element.find("li[id="+o+"]"):this._dataModel=="Pivot"?this._tableTreeObj.element.find("li:contains('"+o+"'):last"):this._tableTreeObj.element.find("li[tag='"+s+"']"),a=n(c).find(".filterIndicator").length>0?!0:!1,ut=n(c).find("~ span:eq(0) span.descending").length>0?!0:!1;if(r.dropTarget.parent().attr("role")=="presentation")return!1;if(this.model.pivotControl._dataModel=="XMLA"){if(g=n.map(n(s.split("].")),function(n){return n.lastIndexOf("]")>=0?n:n+"]"}),g.length>=2&&(ft=g[0]+"."+g[1],e=this._tableTreeObj.element.find("li[tag='"+ft+"']"),s=e.attr("tag")),et=n(r.dropTarget).hasClass("value")||n(r.dropTarget).hasClass("colheader")||n(r.dropTarget).hasClass("rowheader")||n(r.dropTarget).hasClass("summary")||n(r.dropTarget).parents("table:eq(0)").hasClass("pivotGridTable")||n(r.dropTarget).parents(".groupingBarPivot").length>0,ot=r.droppedElement.find(".namedSetCDB").length>0&&n(r.dropTarget).hasClass("schemaFilter"),et||ot||n(r.droppedElement).attr("tag").toLowerCase().indexOf("measures")>=0&&!n(r.dropTarget).hasClass("schemaValue")||n(r.droppedElement).attr("tag").indexOf("Measures")<0&&n(r.dropTarget).hasClass("schemaValue"))return this._createErrorDialog(),pschemaDesignerWaitingPopup.hide(),!1;if(rt=this.model.pivotControl._getReportItem(s),k=rt.axis,!(e.length>1)&&rt.item.length>0&&(k=="rows"&&r.dropTarget.hasClass("schemaRow")||k=="columns"&&r.dropTarget.hasClass("schemaColumn")||k=="values"&&n(r.dropTarget).hasClass("schemaValue")||k=="filters"&&n(r.dropTarget).hasClass("schemaFilter")))return!1;if(e.length>1&&r.droppedElement.find(".kpiValue").length>0&&(e=e.find(".kpiValue").parents("li:eq(0)")),this._tableTreeObj.isNodeChecked(e))for(u=0;u<this.element.find(".pivotButton").length;u++)this.element.find(".pivotButton:eq("+u+")").attr("tag").split(":")[1]==s?this.element.find(".pivotButton:eq("+u+")").remove():""}else if(this._dataModel=="Olap"&&(n(r.droppedElement).attr("tag").indexOf("Measures")>=0&&n(r.dropTarget).hasClass("schemaFilter")||n(r.droppedElement).attr("tag").indexOf("Measures")<0&&n(r.dropTarget).hasClass("schemaValue")))return this._createErrorDialog(),pschemaDesignerWaitingPopup.hide(),!1;if(n(e).find(".filter").remove(),this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode)for(c=[],u=0;u<this.element.find(".pivotButton").length;u++)uniqueName=n(this.element.find(".pivotButton")[u]).find("button").attr("fieldName"),uniqueName==o&&c.push(this.element.find(".pivotButton")[u]);if(w)if(r.event.target.tagName=="TH"||r.event.target.tagName=="TD"){if(this._droppedClass=r.event.target.className.split(" ")[0]=="rowheader"||r.event.target.className.split(" ")[0]=="grpRow"?"schemaRow":r.event.target.className.split(" ")[0]=="colheader"?"schemaColumn":n(r.event.target).hasClass("value")?"schemaValue":"",this._droppedClass=="")return}else this._droppedClass=r.event.target.className.split(" ")[0]=="rows"||r.event.target.className.split(" ")[0]=="emptyRows"?"schemaRow":r.event.target.className.split(" ")[0]=="columns"?"schemaColumn":r.event.target.className.split(" ")[0]=="values"?"schemaValue":r.event.target.className.split(" ")[0]=="drag"?"schemaFilter":"";else this._droppedClass=t.isNullOrUndefined(r.event)?r.dropTarget.hasClass("schemaColumn")?"schemaColumn":r.dropTarget.hasClass("schemaRow")?"schemaRow":r.dropTarget.hasClass("schemaFilter")?"schemaFilter":r.dropTarget.hasClass("schemaValue")?"schemaValue":"":r.event.target.className.split(" ")[0];if(this._dataModel=="Olap"&&(st=n(r.droppedElement).children("div:eq(0)").find(".e-checkbox").length,e=st==0?r.droppedElement.parent("ul").parent("li:eq(0)"):r.droppedElement),e.find(".e-chk-inact").length>0&&this._droppedClass!=""&&(this._droppedClass=="schemaRow"||this._droppedClass=="schemaColumn"||this._droppedClass=="schemaFilter"||this._droppedClass=="schemaValue"))return this._tableTreeObj.checkNode(e),!1;if(e.find(".e-chk-inact").length>0&&this._droppedClass!=""&&(this._droppedClass=="pvtBtn"||this._droppedClass=="rowheader"||this._droppedClass=="colheader"||this._droppedClass=="value"&&n(r.droppedElement).attr("tag").indexOf("Measures")<0)&&(this._nodeCheck=!0,this._tableTreeObj.checkNode(e)),t.isNullOrUndefined(s))for(u=0;u<this.model.pivotTableFields.length;u++)this.model.pivotTableFields[u].name==o&&(this.model.pivotTableFields[u].isSelected=!0,s=this.model.pivotTableFields[u]);if(!t.isNullOrUndefined(this._tempFilterData))for(u=0;u<this._tempFilterData.length;u++)if(!t.isNullOrUndefined(this._tempFilterData[u][o]))for(nt=0;nt<this._tempFilterData[u][o].length;nt++)lt+="##"+this._tempFilterData[u][o][nt];if(r.droppedElement[0].tagName.toLowerCase()=="button")if(c.length>1)for(u=0;u<c.length;u++)n(c[u]).text()==o&&n(c[u]).remove();else n(c).remove();try{b=JSON.parse(this.model.pivotControl.getOlapReport()).Report}catch(at){b=this.model.pivotControl.getOlapReport()}if(this.model.pivotControl._dataModel=="XMLA"&&(b=this.model.pivotControl.model.dataSource),this._dataModel=="Pivot"||this.model.pivotControl._dataModel=="XMLA"){for(o=this.model.pivotControl._dataModel=="XMLA"?s:o,h="",h=w?this._droppedPosition="":t.isNullOrUndefined(r.event)?"":this._droppedPosition=this._setSplitBtnTargetPos(r.event),u=0;u<this.model.pivotTableFields.length;u++)if(this.model.pivotTableFields[u].name==o){this.model.pivotTableFields[u].isSelected=!0;s=this.model.pivotTableFields[u];n(c).remove();break}if(e.find(".e-chk-inact").length>0&&this._droppedClass!=""&&(this._droppedClass=="schemaRow"||this._droppedClass=="schemaColumn"||this._droppedClass=="schemaFilter"||this._droppedClass=="schemaValue"))this._tableTreeObj.checkNode(e);else if(this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode){if(f=this.model.pivotControl._getDroppedItem(o),f.length&&f[0].filterItems&&f[0].filterItems.values&&f[0].filterItems.values.length&&n(n(e).find(".e-text")[0]).after(t.buildTag("span.e-icon").attr("role","button").attr("aria-label","filtered").addClass("filter")[0].outerHTML),f.length||(f[0]={fieldName:o,fieldCaption:this._dataModel=="XMLA"&&e.find(".hierarchyCDB ").length>0?e.find("div:eq(0)").text():o}),this.model.pivotControl.model.dataSource.columns=n.grep(this.model.pivotControl.model.dataSource.columns,function(n){return n.fieldName!=o}),this.model.pivotControl.model.dataSource.rows=n.grep(this.model.pivotControl.model.dataSource.rows,function(n){return n.fieldName!=o}),this._dataModel!="XMLA"?this.model.pivotControl.model.dataSource.values=n.grep(this.model.pivotControl.model.dataSource.values,function(n){return n.fieldName!=o}):this.model.pivotControl.model.dataSource.values[0].measures=n.grep(this.model.pivotControl.model.dataSource.values[0].measures,function(n){return n.fieldName!=o}),this.model.pivotControl.model.dataSource.filters=n.grep(this.model.pivotControl.model.dataSource.filters,function(n){return n.fieldName!=o}),d=this._droppedClass=="schemaRow"?"row":this._droppedClass=="schemaColumn"?"column":this._droppedClass=="schemaFilter"?"filter":this._droppedClass=="schemaValue"?"value":"",this.model.pivotControl._dataModel=="Pivot"&&n.grep(this.model.pivotControl._calculatedField,function(n){return n.name==f[0].fieldCaption}).length>0&&d!="value"){alert(this.model.pivotControl._getLocalizedLabels("CalcValue"));this._tableTreeObj.checkNode(f[0].fieldCaption);return}this._createPivotButton(f[0],d,a,ut,h);n.isNumeric(h)?this._droppedClass=="schemaRow"?this.model.pivotControl.model.dataSource.rows.splice(h,0,f[0]):this._droppedClass=="schemaColumn"?this.model.pivotControl.model.dataSource.columns.splice(h,0,f[0]):this._droppedClass=="schemaValue"?this.model.pivotControl._dataModel=="XMLA"?this.model.pivotControl.model.dataSource.values[0].measures.splice(h,0,f[0]):this.model.pivotControl.model.dataSource.values.splice(h,0,f[0]):this.model.pivotControl.model.dataSource.filters.splice(h,0,f[0]):this._droppedClass=="schemaRow"?this.model.pivotControl.model.dataSource.rows.push(f[0]):this._droppedClass=="schemaColumn"?this.model.pivotControl.model.dataSource.columns.push(f[0]):this._droppedClass=="schemaValue"?this.model.pivotControl._dataModel=="XMLA"?this.model.pivotControl.model.dataSource.values[0].measures.push(f[0]):this.model.pivotControl.model.dataSource.values.push(f[0]):this.model.pivotControl.model.dataSource.filters==null?(this.model.pivotControl.model.dataSource.filters=[],this.model.pivotControl.model.dataSource.filters.push(f[0])):this.model.pivotControl.model.dataSource.filters.push(f[0]);this.model.pivotControl._dataModel=="Pivot"&&this.model.pivotControl._calculatedField.length>0&&d!="value"&&(this.model.pivotControl._calcFieldNodeDrop(f[0]),this.model.pivotControl.model.dataSource.values=n.grep(this.model.pivotControl.model.dataSource.values,function(n){return t.isNullOrUndefined(n.isCalculatedField)||n.isCalculatedField==!1||n.isCalculatedField==!0&&n.formula.indexOf(f[0].fieldName)==-1}));this.model.pivotControl._dataModel=="XMLA"?(this._droppedClass=="schemaFilter"&&(this.model.pivotControl.model.dataSource.filters=n.map(this.model.pivotControl.model.dataSource.filters,function(n){return n.advancedFilter=[],n})),t.olap.base.getJSONData({action:"nodeDropped"},this.model.pivotControl.model.dataSource,this.model.pivotControl)):(this._trigger("fieldItemDropped",{axis:d,fieldItem:e}),this.model.pivotControl._populatePivotGrid())}else a=!1,this._tempFilterData!=null&&n.each(this._tempFilterData,function(t,i){n.each(i,function(t,i){t==n(e).attr("id")&&i.length>0&&(a=!0)})}),a&&n(n(e).find(".e-text")[0]).after(t.buildTag("span.e-icon").addClass("filter")[0].outerHTML),this._createPivotButton(o,this._droppedClass=="schemaRow"?"row":this._droppedClass=="schemaColumn"?"column":this._droppedClass=="schemaFilter"?"filter":this._droppedClass=="schemaValue"?"value":"",a,ut,h),this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"nodeDropped",element:this.element,customObject:this.model.customObject}),tt=JSON.stringify(this.model.customObject),p=JSON.stringify({action:"nodeDropped",dropAxis:this._droppedClass+"::"+h,headerTag:JSON.stringify(s),sortedHeaders:this.model.pivotControl._ascdes,currentReport:b,customObject:tt}),t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.show(),this.element.find(".schemaNoClick").addClass("freeze").width(n(this.element).width()).height(n(this.element).height()).css({top:n(this.element).offset().top,left:n(this.element).offset().left}),this.model.pivotControl.model.enableDeferUpdate?(this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeDropped,p.replace("nodeDropped","nodeDroppedDeferUpdate"),this._pvtNodeDroppedSuccess),t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.hide()):this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeDropped,p,this._pvtNodeDroppedSuccess)}else{if(l=r.dropTarget[0]!=i&&r.dropTarget[0].className=="pivotButton"?n(r.dropTarget).parents()[0]:r.dropTarget[0]!=i&&r.dropTarget[0].tagName.toLowerCase()=="td"&&!n(r.dropTarget.parents("table.pivotGridTable")[0]).length?r.dropTarget.children(":last")[0]:r.dropTarget,this._droppedClass=l[0].className.split(" ")[0],v="",y="",v=l[0].className.split(" ")[0],n(r.dropTarget.parents("table.pivotGridTable")[0]).length){if(y=n(l).hasClass("rowheader")?"Series":n(l).hasClass("grpRow")?"Series":n(l).hasClass("rows")?"Series":n(l).hasClass("colheader")?"Categorical":n(l).hasClass("columns")?"Categorical":n(l).hasClass("value")?"Slicer":n(l).hasClass("drag")?"Slicer":"",n(r.droppedElement).attr("tag").indexOf("Measures")>0&&y=="Slicer")return this._createErrorDialog(),!1}else y=v=="columns"?"Categorical":v=="schemaColumn"?"Categorical":v=="rows"?"Series":v=="schemaRow"?"Series":v=="drag"?"Slicer":v=="schemaFilter"?"Slicer":"";y==""&&(y=this.element.find(".schemaRow .pivotButton:contains('Measures')").length>0||this.element.find(".schemaRow .pivotButton:contains('MEASURES')").length>0?"Series":"Categorical");h=t.isNullOrUndefined(r.event)?"":this._setSplitBtnTargetPos(r.event);a=!1;this.model.pivotControl._tempFilterData!=null&&n.each(this.model.pivotControl._tempFilterData,function(t,i){n.each(i,function(n,t){n==s.replace(/[\[\]']/g,"")&&t.length>0&&(a=!0)})});a&&n(n(e).find(".e-text")[0]).after(t.buildTag("span.e-icon").addClass("filter")[0].outerHTML);ht=this._currentCubeName+"--"+s+"--"+y+"--"+h;ct="";this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"nodeDropped",element:this.element,customObject:this.model.customObject});tt=JSON.stringify(this.model.customObject);p=JSON.stringify({action:"nodeDropped",dropType:"TreeNode",nodeInfo:ht,filterParams:ct,currentReport:b,gridLayout:this.model.pivotControl.model.layout,customObject:tt});this.model.pivotControl.model.enableDeferUpdate||t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.show();this.element.find(".schemaNoClick").addClass("freeze").width(n(this.element).width()).height(n(this.element).height()).css({top:n(this.element).offset().top,left:n(this.element).offset().left});this.model.pivotControl.model.enableDeferUpdate?this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeDropped,p.replace("nodeDropped","nodeDroppedDeferUpdate"),this._onDroppedSuccess):this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeDropped,p,this._onDroppedSuccess)}}}},_onPvtBtnDropped:function(r){var h,ut,v,l,ft,d,y,g,p,w,f,nt,tt,et,it,o,ot,rt,st;this.model.pivotControl._isUpdateRequired=!0;this._isDragging=!1;this.element.find(".dropIndicator").removeClass("dropIndicatorHover");var s=null,a="",c="",e,u,b=!1,k=!1;if(this._dataModel=="Olap"||this.model.pivotControl._dataModel=="XMLA")s=t.isNullOrUndefined(r.target.className)?r.target:r.target.className.indexOf("pvtBtn")>-1?n(r.target).parents(".e-droppable")[0]:r.target.className.indexOf("e-droppable")?r.target:r.target[0].tagName.toLowerCase()=="td"?r.target.children(":last")[0]:r.target,t.isNullOrUndefined(s.className)?(a=s.hasClass("schemaColumn")?"Categorical":s.hasClass("schemaRow")?"Series":s.hasClass("schemaFilter")?"Slicer":"",this._droppedClass=u=s.hasClass("schemaColumn")?"schemaColumn":s.hasClass("schemaRow")?"schemaRow":s.hasClass("schemaFilter")?"schemaFilter":s.hasClass("schemaValue")?"schemaValue":""):(a=s.className.split(" ")[0]=="schemaColumn"?"Categorical":s.className.split(" ")[0]=="schemaRow"?"Series":s.className.split(" ")[0]=="schemaFilter"?"Slicer":"",u=s.className.split(" ")[0]),a==""&&r.element.parent().attr("tag").toLowerCase().indexOf("[measures]")>-1&&(a=this.element.find(".schemaRow .pivotButton:contains('"+this._getLocalizedLabels("Measures")+"')").length>0?"Series":"Categorical"),this.model.pivotControl._dataModel=="XMLA"?e=c=n(r.element.parent()[0]).attr("tag").split(":")[1]:c=n(r.element.parent()[0]).attr("tag");else for(u=t.isNullOrUndefined(r.target.className)?n(r.target).hasClass("schemaColumn")?"schemaColumn":n(r.target).hasClass("schemaRow")?"schemaRow":n(r.target).hasClass("schemaFilter")?"schemaFilter":n(r.target).hasClass("schemaValue")?"schemaValue":"":r.target.className.indexOf("e-droppable")>=0?r.target.className.split(" ")[0]:r.target.className.split(" ")[0]=="pvtBtn"?n(r.target).parents("div.e-droppable").attr("class").split(" ")[0]:"",e=this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode?n.grep(this.model.pivotTableFields,function(n){return n.caption==r.element.text()})[0].name:r.element.text(),c,b=r.element.find("~ .filterIndicator").length>0?!0:!1,k=r.element.find("~ span:eq(0) span.descending").length>0?!0:!1,o=0;o<this.model.pivotTableFields.length;o++)this.model.pivotTableFields[o].name==e&&(this.model.pivotTableFields[o].isSelected=!0,c=this.model.pivotTableFields[o]);if(n("#"+this._id+"_dragClone").remove(),this._dataModel=="Olap"&&(c.split(":")[1].toLocaleUpperCase()=="MEASURES"&&(u!="schemaColumn"||u!="schemaRow")&&(u=="schemaFilter"||u=="schemaValue")||c.toUpperCase().indexOf("[MEASURES]")>-1&&u!="schemaValue"&&(u=="schemaRow"||u=="schemaColumn"||u=="schemaFilter")||c.toUpperCase().indexOf("[MEASURES]")==-1&&u=="schemaValue"))return this._createErrorDialog(),!1;if(u=="schemaValue"||u=="schemaRow"||u=="schemaColumn"||u=="schemaFilter"){h=t.isNullOrUndefined(r.event)?"":this._setSplitBtnTargetPos(r.event);try{v=JSON.parse(this.model.pivotControl.getOlapReport()).Report}catch(ht){v=this.model.pivotControl.getOlapReport()}if(this.model.pivotControl._dataModel=="XMLA"){if(this.model.pivotControl.dataSource=this.model.pivotControl._clearDrilledItems(this.model.pivotControl.model.dataSource,{action:"nodeDropped"}),ft=u=="schemaFilter"&&this.model.pivotControl._getNodeByUniqueName(e)!=null&&this.model.pivotControl._getNodeByUniqueName(e).find(".namedSetCDB").length>0,d=n(r.element.parent()).attr("tag").split(":")[0]=="Columns"&&this._droppedClass=="schemaColumn"&&c.toLowerCase()=="measures"||n(r.element.parent()).attr("tag").split(":")[0]=="Rows"&&this._droppedClass=="schemaRow"&&c.toLowerCase()=="measures",d||ft||e.toLowerCase().indexOf("[measures]")>=0&&u!="schemaValue"||u=="schemaValue"&&!(e.toLowerCase().indexOf("[measures]")>=0)||u=="schemaFilter"&&e.toLowerCase().indexOf("measures")>=0)return pschemaDesignerWaitingPopup.hide(),d||this._createErrorDialog(),r.Cancel;if(e.toLowerCase().indexOf("measures")>=0&&!(e.toLowerCase().indexOf("[measures]")>=0))return n(r.element.parent()).remove(),this.model.pivotControl.model.dataSource.values[0].axis=u=="schemaRow"?"rows":u=="schemaColumn"?"columns":"columns",this._createPivotButton({fieldName:"Measures",fieldCaption:this._getLocalizedLabels("Measures")},u=="schemaRow"?"row":u=="schemaColumn"?"column":"column","","",h),t.olap.base.getJSONData({action:"nodeDropped"},this.model.pivotControl.model.dataSource,this.model.pivotControl),pschemaDesignerWaitingPopup.hide(),!1}if(this.model.pivotControl._dataModel=="Pivot"&&u!="schemaValue"&&n.grep(this.model.pivotControl._calculatedField,function(n){return n.name==e}).length>0){alert(this.model.pivotControl._getLocalizedLabels("CalcValue"));return}if(n(r.element.parent()).remove(),this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode)if(this.model.pivotControl.model.enableDeferUpdate||t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.show(),this.element.find(".schemaNoClick").addClass("freeze").width(n(this.element).width()).height(n(this.element).height()).css({top:n(this.element).offset().top,left:n(this.element).offset().left}),this._dataModel=="Olap")ut=this._currentCubeName+"--"+c+"--"+a+"--"+h,this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"nodeDropped",element:this.element,customObject:this.model.customObject}),y=JSON.stringify(this.model.customObject),l=JSON.stringify({action:"nodeDropped",dropType:"SplitButton",nodeInfo:ut,currentReport:v,gridLayout:this.model.pivotControl.model.layout,customObject:y}),this.model.pivotControl.model.enableDeferUpdate?this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeDropped,l.replace("nodeDropped","nodeDroppedDeferUpdate"),this._onDroppedSuccess):this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeDropped,l,this._onDroppedSuccess);else{if(this._createPivotButton(e,u=="schemaRow"?"row":u=="schemaColumn"?"column":u=="schemaFilter"?"filter":u=="schemaValue"?"value":"",b,k,h),this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"nodeDropped",element:this.element,customObject:this.model.customObject}),y=JSON.stringify(this.model.customObject),g="",u!="schemaValue"){if(p="",!t.isNullOrUndefined(this._tempFilterData))for(o=0;o<this._tempFilterData.length;o++)if(!t.isNullOrUndefined(this._tempFilterData[o][e]))for(w=0;w<this._tempFilterData[o][e].length;w++)p+="##"+this._tempFilterData[o][e][w];p!=""&&(g=u+"::"+e+"::FILTERED"+p)}l=JSON.stringify({action:"nodeDropped",dropAxis:u+"::"+h,filterParams:g,headerTag:JSON.stringify(c),sortedHeaders:this.model.pivotControl._ascdes,currentReport:v,customObject:y});successMethod=this.model.pivotControl._renderControlSuccess;this.model.pivotControl.model.enableDeferUpdate?(this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeDropped,l.replace("nodeDropped","nodeDroppedDeferUpdate"),this._pvtNodeDroppedSuccess),t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.hide()):this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.nodeDropped,l,this._pvtNodeDroppedSuccess)}else{if(f=this.model.pivotControl._getDroppedItem(e),nt={},f.length>0&&(nt=f[0].isNamedSets!=i?{fieldName:f[0].fieldName,fieldCaption:f[0].fieldCaption,isNamedSets:f[0].isNamedSets}:{fieldName:f[0].fieldName,fieldCaption:f[0].fieldCaption}),tt=u=="schemaRow"?"row":u=="schemaColumn"?"column":u=="schemaFilter"?"filter":u=="schemaValue"?"value":"",this._createPivotButton(nt,tt,b,k,h),n.isNumeric(h)?u=="schemaRow"?this.model.pivotControl.model.dataSource.rows.splice(h,0,f[0]):u=="schemaColumn"?this.model.pivotControl.model.dataSource.columns.splice(h,0,f[0]):u=="schemaValue"?this.model.pivotControl._dataModel=="XMLA"?this.model.pivotControl.model.dataSource.values[0].measures.splice(h,0,f[0]):this.model.pivotControl.model.dataSource.values.splice(h,0,f[0]):this.model.pivotControl.model.dataSource.filters.splice(h,0,f[0]):u=="schemaRow"?this.model.pivotControl.model.dataSource.rows.push(f[0]):u=="schemaColumn"?this.model.pivotControl.model.dataSource.columns.push(f[0]):u=="schemaValue"?this.model.pivotControl._dataModel=="XMLA"?this.model.pivotControl.model.dataSource.values[0].measures.push(f[0]):this.model.pivotControl.model.dataSource.values.push(f[0]):this.model.pivotControl.model.dataSource.filters.push(f[0]),this.model.pivotControl._dataModel=="Pivot"&&this.model.pivotControl._calculatedField.length>0&&u!="schemaValue"){for(et=n.grep(this.model.pivotControl.model.dataSource.values,function(n){return t.isNullOrUndefined(n.isCalculatedField)||n.isCalculatedField==!1||n.isCalculatedField==!0&&n.formula.indexOf(f[0].fieldName)==-1}),it=n.grep(this.model.pivotControl.model.dataSource.values,function(n){return n.isCalculatedField==!0&&n.formula.indexOf(f[0].fieldName)>-1}),o=0;o<it.length;o++)this._tableTreeObj.uncheckNode(it[o].fieldName);this.model.pivotControl.model.dataSource.values=et}this.model.pivotControl._dataModel=="XMLA"&&(ot=this.model.pivotControl.model.dataSource.values[0].axis=="columns"?"Columns:":"Rows:",rt=this.element.find("div[tag='"+ot+"Measures']"),rt.appendTo(rt.parent()),st=r.element.attr("axis").toLowerCase(),this.model.pivotControl.model.dataSource=this.model.pivotControl._clearDrilledItems(this.model.pivotControl.model.dataSource,{action:"nodeDropped"}));this.model.pivotControl._dataModel=="XMLA"?(t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.show(),t.olap.base.getJSONData({action:"nodeDropped"},this.model.pivotControl.model.dataSource,this.model.pivotControl)):(this._trigger("fieldItemDropped",{axis:tt,fieldItem:f}),this.model.pivotControl._populatePivotGrid())}}else this._removePvtBtn(r)},_createErrorDialog:function(){var r=t.buildTag("div#preventDiv").css({width:n("body").width()+"px",height:n("body").height()+"px",position:"absolute",top:n("body").offset().top+"px",left:n("body").offset().left+"px","z-index":10})[0].outerHTML,i;n("body").append(r);this.element.find(".errorDialog").length==0?(i=t.buildTag("div.errorDialog#ErrorDialog",t.buildTag("div.warningImg")[0].outerHTML+t.buildTag("div.warningContent",this._getLocalizedLabels("AlertMsg"))[0].outerHTML+t.buildTag("div",t.buildTag("button#ErrOKBtn.errOKBtn","OK")[0].outerHTML)[0].outerHTML).attr("title",this._getLocalizedLabels("Warning"))[0].outerHTML,this.element.append(i),this.element.find(".errorDialog").ejDialog({target:"#"+this._id,enableResize:!1,enableRTL:this.model.enableRTL,width:"400px"}),this._errorDialog=this.element.find(".errorDialog").data("ejDialog"),n("#"+this._errorDialog._id+"_wrapper").css({left:"50%",top:"50%"}),this.element.find(".errOKBtn").ejButton({type:t.ButtonType.Button,click:t.proxy(this._errOKBtnClick,this)}),this.element.find(".e-dialog .e-close").attr("title",this._getLocalizedLabels("Close"))):this._errorDialog.open()},_errOKBtnClick:function(){this.model.pivotControl._onPreventPanelClose();this._errorDialog._ejDialog.find("div.e-dialog-icon").trigger("click")},_hideSchemaDesigner:function(){n("#PivotSchemaDesigner").animate({left:"-"+n("#"+this._id).width()+"px"},500,function(){});this.element.find(".collapseSchema").addClass("expandSchema").removeClass("collapseSchema")},_showSchemaDesigner:function(){n("#PivotSchemaDesigner").animate({left:"5px"});this.element.find(".expandSchema").addClass("collapseSchema").removeClass("expandSchema")},_reSizeHandler:function(){var f=n("#"+this._id).width(),e,o,i,r,u,s;this.element.find("div.axisTable").width(f);e=(f-2)/2;this.element.find(".axisTd1, .axisTd2").css({width:e});o=25/100*n("#"+this._id).height();this.element.find("div.schemaFieldTree,div.fieldTable").height(o);n("#"+this._id).height()<450&&n("#"+this._id).css("min-height","450px");n("#"+this._id).width()<240&&n("#"+this._id).css("min-width","240px");r=n("#"+this._id).height()+20;u=this.element.find("table.headerTable").height()+this.element.find("div.fieldTable").height()+this.element.find("div.centerDiv").height()+this.element.find("div.centerHead").height();i=this.model.pivotControl!=null&&this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ServerMode?r-(u+105):r-(u+80);this.element.find("div.axisTable").height(i);s=i/2;this.element.find(".axisTd1,.axisTd2").css({height:s})},_dialogBtnClick:function(r){var o,v,k,c,f,d,y,u,tt,it,g,h,b,nt;if(this.model.pivotControl._onPreventPanelClose(),this.element.find(".e-dialog, .clientDialog").hide(),!this._isFiltered)return!1;if(this.model.pivotControl._isUpdateRequired=!0,this.model.pivotControl!=null&&(this.model.pivotControl._memberTreeObj=this._memberTreeObj),this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode){if(r.model.text.toLowerCase()=="cancel")return;o=[];v=[];this.model.pivotControl._dataModel=="XMLA"?(k=this._selectedMember,this.model.pivotControl._currentReportItems=n.grep(this.model.pivotControl._currentReportItems,function(n){if(n.fieldName!=i&&n.fieldName.toLocaleLowerCase()!=k.toLocaleLowerCase())return n}),this._memberTreeObj=this.model.pivotControl._updateTreeView(this),this.model.pivotControl._currentReportItems.push({filterItems:this._memberTreeObj.dataSource(),fieldName:this._selectedMember}),o=n.map(this.model.pivotControl._getSelectedNodes().split("::"),function(n){return{Id:n.split("||")[0],tag:n.split("||")[1],parentId:n.split("||")[2]}}),c=this._selectedMember!=i?this._selectedMember.toLocaleLowerCase():this._selectedMember.toLocaleLowerCase(),f=n.map(this.model.pivotControl.model.dataSource.columns,function(n){if(n.fieldName!=i&&n.fieldName.toLocaleLowerCase()==c)return n}),f.length==0&&(f=n.map(this.model.pivotControl.model.dataSource.rows,function(n){if(n.fieldName!=i&&n.fieldName.toLocaleLowerCase()==c)return n})),f.length==0&&(f=n.map(this.model.pivotControl.model.dataSource.filters,function(n){if(n.fieldName!=i&&n.fieldName.toLocaleLowerCase()==c)return n})),f.length>0&&(this._getUnSelectedNodes()!=""&&(this.model.pivotControl.model.dataSource=this.model.pivotControl._clearDrilledItems(this.model.pivotControl.model.dataSource,{action:"filtering"})),f[0].advancedFilter=[],f[0].filterItems={filterType:"include",values:this.model.pivotControl._removeSelectedNodes(o)},this._selectedTreeNode=this.element.find(".schemaFieldTree").find("li[tag='"+f[0].fieldName+"']"),n(this._selectedTreeNode).parents("li:eq(0)").children().children("span").hasClass("hierarchyCDB")&&(this._selectedTreeNode=n(n(this._selectedTreeNode).parents("li:eq(0)"))),this._getUnSelectedNodes()==""?(this._selectedTreeNode.find(".filter").remove(),delete f[0].filterItems):n(n(this._selectedTreeNode)).find(".filter").length<=0&&(n(n(this._selectedTreeNode).find(".e-text")[0]).after(t.buildTag("span.e-icon").attr("role","button").attr("aria-label","filtered").addClass("filter")[0].outerHTML),this.element.find(".pivotButton:contains('"+this._selectedMember+"') .filter").addClass("filtered"))),t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.show(),t.olap.base.getJSONData({action:"filtering"},this.model.pivotControl.model.dataSource,this.model.pivotControl)):(jQuery.each(this._memberTreeObj.element.find(":input.nodecheckbox:checked"),function(n,t){t.value!="All"&&o.push(t.value)}),jQuery.each(this._memberTreeObj.element.find(":input.nodecheckbox:not(:checked)"),function(n,t){v.push(t.value=t.value=="(blank)"?"":t.value)}),this.element.find(".e-dialog, .clientDialog").hide(),this.model.pivotControl._pivotFilterItems(o,v),this.model.pivotControl._populatePivotGrid())}else{if(d="",r.model.text.toLowerCase()!="cancel"){var s=this._dataModel=="Olap"?d=this._getUnSelectedNodes()+"FILTERED"+this.model.pivotControl._getSelectedNodes(this._curFilteredAxis=="schemaFilter"?!0:!1):this._memberTreeObj.element.find(":input:gt(0).nodecheckbox:not(:checked)"),l=!1,e=this._dataModel=="Olap"?s:this._curFilteredAxis+"::"+this._curFilteredText+"::FILTERED",p=this._curFilteredText,w=[],a={};if(y=this._getUnSelectedNodes()!=""?!0:!1,this._dataModel=="Pivot"){for(u=0;u<s.length;u++)w.push(n(s[u].parentElement).siblings("a").text());for(a[p]=w,t.isNullOrUndefined(this._tempFilterData)&&(this._tempFilterData=[]),u=0;u<this._tempFilterData.length;u++)t.isNullOrUndefined(this._tempFilterData[u][p])||(this._tempFilterData[u][p]=w,l=!0);if(l||this._tempFilterData.push(a),this.model.pivotControl._tempFilterData=this._tempFilterData,(t.isNullOrUndefined(this._curFilteredAxis)||this._curFilteredAxis!="")&&this._curFilteredAxis!="schemaValue")for(u=0;u<s.length;u++)e+="##"+n(s[u].parentElement).siblings("a").text()}else{for(a[this._curFilteredText]=e,t.isNullOrUndefined(this.model.pivotControl._tempFilterData)&&(this.model.pivotControl._tempFilterData=[]),u=0;u<this.model.pivotControl._tempFilterData.length;u++)t.isNullOrUndefined(this.model.pivotControl._tempFilterData[u][this._curFilteredText])||(this.model.pivotControl._tempFilterData[u][this._curFilteredText]=e,l=!0);l||this.model.pivotControl._tempFilterData.push(a)}if(tt=this._getSortedHeaders(),it=this.model.layout=="excel"?this.element.find(".schemaFieldTree li:contains('"+this._curFilteredText+"')"):this.element.find("."+this._curFilteredAxis+" .pivotButton:contains("+this._curFilteredText+") .filterBtn"),this.model.layout=="excel"&&(n(this._selectedTreeNode).parents("li:eq(0)").children().children("span").hasClass("hierarchyCDB")&&(this._selectedTreeNode=n(n(this._selectedTreeNode).parents("li:eq(0)"))),y&&n(n(this._selectedTreeNode)).find(".filter").length<=0?(g=t.buildTag("span.e-icon",{display:"none"}).addClass("filter")[0].outerHTML,n(n(this._selectedTreeNode).find(".e-text")[0]).after(g)):y||n(this._selectedTreeNode).find(".filter").remove(),this._curFilteredAxis==""))return!1;try{h=JSON.parse(this.model.pivotControl.getOlapReport()).Report}catch(rt){h=this.model.pivotControl.getOlapReport()}this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"filtering",element:this.element,customObject:this.model.customObject});b=JSON.stringify(this.model.customObject);nt=this.model.pivotControl.model.customObject!={}&&e!=""?JSON.stringify({action:"filtering",filterParams:e,sortedHeaders:this.model.pivotControl._ascdes,currentReport:h,gridLayout:this.model.pivotControl.model.layout,customObject:b}):this.model.pivotControl.model.customObject!={}?JSON.stringify({action:"filtering",currentReport:h,customObject:b}):e!=""?JSON.stringify({action:"filtering",filterParams:e,sortedHeaders:this.model.pivotControl._ascdes,currentReport:h}):JSON.stringify({action:"filtering"});t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.show();this.element.find(".schemaNoClick").addClass("freeze").width(n(this.element).width()).height(n(this.element).height()).css({top:n(this.element).offset().top,left:n(this.element).offset().left});this.model.pivotControl.model.enableDeferUpdate?(this.model.pivotControl._filterUpdate.push(e),t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.hide(),this.element.find(".schemaNoClick").removeClass("freeze").removeAttr("style")):this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.filtering,nt,this._filterElementSuccess)}this._selectedTreeNode=null}},_onBeforeNodeExpand:function(n){this.model.pivotControl._onBeforeNodeExpand(n)},_onNodeExpand:function(n){this.model.pivotControl._onNodeExpand(n)},_nodeStateModifiedSuccess:function(n){this.model.pivotControl._isUpdateRequired=!0;n[0]!=i?n[2]!=null&&n[2]!=i&&(this.model.customObject=n[2].Value):n.d!=i?n.d[2]!=null&&n.d[2]!=i&&(this.model.customObject=n.d[2].Value):n.customObject!=null&&n.customObject!=i&&(this.model.customObject=n.customObject);this.model.afterServiceInvoke!=null&&this._trigger("afterServiceInvoke",{action:"nodeStateModified",element:this.element,customObject:this.model.customObject});this.model.pivotControl.model.enableDeferUpdate?this.model.pivotControl._deferUpdateSuccess(n):this.model.pivotControl._renderControlSuccess(n);this.element.find(".schemaNoClick").removeClass("freeze").removeAttr("style")},_pvtNodeDroppedSuccess:function(n){n[0]!=i?n[2]!=null&&n[2]!=i&&(this.model.customObject=n[2].Value):n.d!=i?n.d[2]!=null&&n.d[2]!=i&&(this.model.customObject=n.d[2].Value):n.customObject!=null&&n.customObject!=i&&(this.model.customObject=n.customObject);this.model.afterServiceInvoke!=null&&this._trigger("afterServiceInvoke",{action:"nodeDropped",element:this.element,customObject:this.model.customObject});this.model.pivotControl.model.enableDeferUpdate?this.model.pivotControl._deferUpdateSuccess(n):this.model.pivotControl._renderControlSuccess(n);this.element.find(".schemaNoClick").removeClass("freeze").removeAttr("style")},_pvtBtnDroppedSuccess:function(n){n[0]!=i?n[2]!=null&&n[2]!=i&&(this.model.customObject=n[2].Value):n.d!=i?n.d[2]!=null&&n.d[2]!=i&&(this.model.customObject=n.d[2].Value):n.customObject!=null&&n.customObject!=i&&(this.model.customObject=n.customObject);this.model.afterServiceInvoke!=null&&this._trigger("afterServiceInvoke",{action:"removeButton",element:this.element,customObject:this.model.customObject});this.model.pivotControl._renderControlSuccess(n);this.element.find(".schemaNoClick").removeClass("freeze").removeAttr("style")},_filterElementSuccess:function(n){n[0]!=i?n[2]!=null&&n[2]!=i&&(this.model.customObject=n[2].Value):n.d!=i?n.d[2]!=null&&n.d[2]!=i&&(this.model.customObject=n.d[2].Value):n.customObject!=null&&n.customObject!=i&&(this.model.customObject=n.customObject);this.model.afterServiceInvoke!=null&&this._trigger("afterServiceInvoke",{action:"filtering",element:this.element,customObject:this.model.customObject});this.model.pivotControl._renderControlSuccess(n);this.element.find(".schemaNoClick").removeClass("freeze").removeAttr("style")},_fetchChildNodeSuccess:function(t){var r,u,f;t.length>1&&t[0]!=i?(r=JSON.parse(t[0].Value),t[1]!=null&&t[1]!=i&&(this.model.customObject=t[1].Value)):t.d!=i?(r=JSON.parse(t.d[0].Value),t.d[1]!=null&&t.d[1]!=i&&(this.model.customObject=t.d[1].Value)):(r=JSON.parse(t.ChildNodes),t.customObject!=null&&t.customObject!=i&&(this.model.customObject=t.customObject));f={id:"id",parentId:"pid",hasChild:"hasChildren",text:"name",isChecked:"checkedStatus"};u=n(this.pNode).parents("li").length>1?n(this.pNode).parents("li").first():n(this.pNode).parents("li");n(n(u).find("input.nodecheckbox")[0]).ejCheckBox({checked:!1});this._memberTreeObj._createSubNodesWhenLoadOnDemand(r,this.pNode,f);n.each(n(u).children().find("li"),function(n,t){t.setAttribute("tag",r[n].tag)});this.model.afterServiceInvoke!=null&&this._trigger("afterServiceInvoke",{action:"memberExpanded",element:this.element,customObject:this.model.customObject});this.element.find(".schemaNoClick").removeClass("freeze").removeAttr("style")},_fetchMemberSuccess:function(n){n[0]!=i&&n.length>0?(this._currentMembers=n[0].Value,n[1]!=null&&n[1]!=i&&(this.model.customObject=n[1].Value)):n.d!=i&&n.d.length>0?(this._currentMembers=n.d[0].Value,n.d[1]!=null&&n.d[1]!=i&&(this.model.customObject=n.d[1].Value)):n!=i&&n.length>0?(this._currentMembers=n.EditorTreeInfo,n!=null&&n.customObject!=i&&(this.model.customObject=n.customObject)):n!=i&&(this._currentMembers=n.EditorTreeInfo,n!=null&&n.customObject!=i&&(this.model.customObject=n.customObject));this.model.afterServiceInvoke!=null&&this._trigger("afterServiceInvoke",{action:"fetchMembers",element:this.element,customObject:this.model.customObject});this._createDialog(this._dialogHead,this._currentMembers);this.model.pivotControl._ogridWaitingPopup.hide();this.element.find(".schemaNoClick").removeClass("freeze").removeAttr("style");t.isNullOrUndefined(this.element.find(".e-dialog .e-text:visible").first())||this.element.find(".e-dialog .e-text:visible").first().attr("tabindex","-1").focus().addClass("hoverCell")},_onDroppedSuccess:function(r){var u=null;this.model.pivotControl.model.enableDeferUpdate?u=this._removeButtonDeferUpdate==!1?t.isNullOrUndefined(r.OlapReport)?JSON.parse(r.d[0].Value):JSON.parse(r.OlapReport):u=t.isNullOrUndefined(r.OlapReport)?r.d[0].Value:r.OlapReport:(!t.isNullOrUndefined(r[0])&&r.length>0?(u=JSON.parse(r[1].Value),r[2]!=null&&r[2]!=i&&(this.model.customObject=r[2].Value)):!t.isNullOrUndefined(r.d)&&r.d.length>0?(u=JSON.parse(r.d[1].Value),r.d[2]!=null&&r.d[2]!=i&&(this.model.customObject=r.d[2].Value)):t.isNullOrUndefined(r)||t.isNullOrUndefined(r.OlapReport)||(u=JSON.parse(r.OlapReport)),r.customObject!=null&&r.customObject!=i&&(this.model.customObject=r.customObject));this._removeButtonDeferUpdate==!1&&(this.element.find(".axisTable .pivotButton").remove(),this._setPivotRows(u.PivotRows),this._setPivotColumns(u.PivotColumns),this._setPivotCalculations(u.PivotCalculations),this._setFilters(u.Filters),this.element.find(".axisTable .schemaFilter").append(this._createPivotButtons(this.model.filters,"filter")),this.element.find(".axisTable .schemaRow").append(this._createPivotButtons(this.model.pivotRows,"row")),this.element.find(".axisTable .schemaColumn").append(this._createPivotButtons(this.model.pivotColumns,"column")),this.element.find(".axisTable .schemaValue").append(this._createPivotButtons(this.model.pivotCalculations,"values")),this.model.enableDragDrop&&this.element.find(".pivotButton .pvtBtn").ejButton({size:"normal",type:t.ButtonType.Button,enableRTL:this.model.enableRTL}).ejDraggable({handle:"button",clone:!0,cursorAt:{left:-5,top:-5},dragStart:t.proxy(function(){this._isDragging=!0},this),dragStop:t.proxy(this._onPvtBtnDropped,this),helper:t.proxy(function(t){return t.sender.target.className.indexOf("e-btn")>-1?n(t.sender.target).clone().attr("id",this._id+"_dragClone").appendTo("body"):!1},this)}),this._unWireEvents(),this._wireEvents());this.model.pivotControl.model.enableDeferUpdate?(t.isNullOrUndefined(this.model.pivotControl._ogridWaitingPopup)||this.model.pivotControl._ogridWaitingPopup.hide(),t.isNullOrUndefined(r.OlapReport)?(this.model.pivotControl.setOlapReport(r.d[0].Value),n(".e-pivotpager")[0]!=null&&n(".e-pivotpager")[0]!=i&&this.model.pivotControl._pagerObj.initPagerProperties(JSON.parse(r.d[2].Value),JSON.parse(r.d[1].Value))):(this.model.pivotControl.setOlapReport(r.OlapReport),r.HeaderCounts!=i&&n(".e-pivotpager")[0]!=null&&n(".e-pivotpager")[0]!=i&&this.model.pivotControl._pagerObj.initPagerProperties(JSON.parse(r.HeaderCounts),JSON.parse(r.PageSettings))),this._removeButtonDeferUpdate=!1,this.model.pivotControl._deferUpdateSuccess(r)):this.model.pivotControl._renderControlSuccess(r);this.model.afterServiceInvoke!=null&&this._trigger("afterServiceInvoke",{action:"nodeDropped",element:this.element,customObject:this.model.customObject});this.element.find(".schemaNoClick").removeClass("freeze").removeAttr("style");this._createContextMenu()},_removePvtBtn:function(i){var o=i.element.text(),u=i.element.parent().attr("tag"),e,s,f,h,r;try{e=JSON.parse(this.model.pivotControl.getOlapReport()).Report}catch(c){e=this.model.pivotControl.getOlapReport()}if(e==""&&this.model.pivotControl._dataModel=="XMLA"&&(e=this.model.pivotControl.model.dataSource),this._dataModel=="Olap")if(f=u.indexOf("[Measures]")>-1||u.indexOf("[")>-1?u.split(":")[1]:this.model.pivotControl._getNodeUniqueName(u),f=f.indexOf("<>")?f.replace("<>","."):f,f=="[Measures]"){for(n(i.element.remove()),r=0;r<this.model.pivotCalculations.length&&u.indexOf(this._getLocalizedLabels("Measures"))>-1;r++)f=this.model.pivotCalculations[r].Tag,this._isMeasureBtnRemove=!0,selectedTreeNode=this.model.pivotControl._getNodeByUniqueName(f),this._tableTreeObj.uncheckNode(selectedTreeNode);this.model.pivotControl._ogridWaitingPopup.show();this.element.find(".schemaNoClick").addClass("freeze").width(n(this.element).width()).height(n(this.element).height()).css({top:n(this.element).offset().top,left:n(this.element).offset().left});this.model.beforeServiceInvoke!=null&&this._trigger("beforeServiceInvoke",{action:"removeButton",element:this.element,customObject:this.model.customObject});h=JSON.stringify(this.model.customObject);s=JSON.stringify({action:"removeButton",headerInfo:u,currentReport:e,customObject:h,gridLayout:this.model.pivotControl.model.layout});u.indexOf("[Measures]")<0&&u.indexOf("Measures")>=0&&this.element.find(".schemaValue .pivotButton").remove();this.model.pivotControl.model.enableDeferUpdate?(this._removeButtonDeferUpdate=!0,this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.removeButton,s.replace("removeButton","removeButtonDeferUpdate"),this._onDroppedSuccess),this.element.find(".schemaNoClick").removeClass("freeze").removeAttr("style")):this.doAjaxPost("POST",this.model.pivotControl.model.url+"/"+this.model.serviceMethods.removeButton,s,this._pvtBtnDroppedSuccess)}else selectedTreeNode=this.model.pivotControl._getNodeByUniqueName(f),this._tableTreeObj.uncheckNode(selectedTreeNode);else if(this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode){if(o=i.element.attr("fieldName"),this.model.pivotControl._dataModel=="XMLA"){if(u.split(":")[1].toLowerCase()=="measures"){for(this.model.pivotControl._ogridWaitingPopup.show(),this.element.find("div[tag='"+u+"']").remove(),r=0;r<this.model.pivotControl.model.dataSource.values[0].measures.length;r++)this._nodeCheck=!0,selectedTreeNode=this._tableTreeObj.element.find("li[tag='"+this.model.pivotControl.model.dataSource.values[0].measures[r].fieldName+"']"),this._tableTreeObj.uncheckNode(selectedTreeNode),this.element.find("div[tag='values:"+this.model.pivotControl.model.dataSource.values[0].measures[r].fieldName+"']").remove();this.model.pivotControl.model.dataSource.values[0].measures=[];t.olap.base.getJSONData({action:"removeButton"},this.model.pivotControl.model.dataSource,this.model.pivotControl)}if(selectedTreeNode=this._tableTreeObj.element.find("li[tag='"+o+"']"),selectedTreeNode.length>1)for(r=0;r<selectedTreeNode.length;r++)this._tableTreeObj.isNodeChecked(selectedTreeNode[r])&&(selectedTreeNode=selectedTreeNode[r])}else selectedTreeNode=this._tableTreeObj.element.find("li[id="+o+"]");this._tableTreeObj.uncheckNode(selectedTreeNode)}else selectedTreeNode=this._tableTreeObj.element.find("li:contains('"+o+"')"),this._tableTreeObj.uncheckNode(selectedTreeNode)},_createDialog:function(r,u){var et=t.buildTag("div#preventDiv").css({width:n("body").width()+"px",height:n("body").height()+"px",position:"absolute",top:n("body").offset().top+"px",left:n("body").offset().left+"px","z-index":10})[0].outerHTML,y,it,v,e,c,l,p,w,f,rt,ut,ft,o,b;n("body").append(et);this.element.find(".e-dialog, .clientDialog").remove();var h,s,k="",d="",g="",nt="",tt="",a=this._dataModel=="XMLA"&&this.model.pivotControl.model.dataSource.enableAdvancedFilter&&this.model.pivotControl._getReportItem(this._selectedMember).axis!="filters"&&this.model.pivotControl._getReportItem(this._selectedMember).item.length>0?!0:!1;a&&(h=this._selectedMember,s=n.map(this.model.pivotControl._currentReportItems,function(n){if(n.fieldName==h)return n.dropdownData}),s.length==0&&(y=this.model.pivotControl._getConnectionInfo(this.model.pivotControl.model.dataSource.data),it='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis"><RequestType>MDSCHEMA_LEVELS<\/RequestType><Restrictions><RestrictionList><CATALOG_NAME>'+this.model.pivotControl.model.dataSource.catalog+"<\/CATALOG_NAME><CUBE_NAME>"+this.model.pivotControl.model.dataSource.cube+"<\/CUBE_NAME><\/RestrictionList><\/Restrictions><Properties><PropertyList><Catalog>"+this.model.pivotControl.model.dataSource.catalog+"<\/Catalog> <LocaleIdentifier>"+y.LCID+"<\/LocaleIdentifier> <\/PropertyList><\/Properties><\/Discover><\/Body><\/Envelope>",this.model.pivotControl.doAjaxPost("POST",y.url,{XMLA:it},this.model.pivotControl._getLevelInfo,null,{pvtGridObj:this.model.pivotControl,action:"loadFieldElements",hierarchy:h}),s=n.map(this.model.pivotControl._currentReportItems,function(n){if(n.fieldName==h)return n.dropdownData})),k=this.model.pivotControl._createAdvanceFilterTag({action:"sort",fieldName:h}),g=t.buildTag("div.ddlGroupWrap",this._getLocalizedLabels("SelectField")+":"+t.buildTag("input#GroupLabelDrop.groupLabelDrop").attr("type","text")[0].outerHTML,{})[0].outerHTML,nt=this.model.pivotControl._createAdvanceFilterTag({action:"valueFiltering"}),tt=this.model.pivotControl._createAdvanceFilterTag({action:"labelFiltering"}),d=this.model.pivotControl._createAdvanceFilterTag({action:"clearFilter",selectedLevel:s.length>0?s[0]:""}));var ot=t.buildTag("div#EditorDiv.editorDiv",g+k+d+tt+nt+t.buildTag("div",t.buildTag("div.memberEditorDiv",t.buildTag("div#editorTreeView.editorTreeView")[0].outerHTML)[0].outerHTML)[0].outerHTML)[0].outerHTML+"<\/br>",st=t.buildTag("div",t.buildTag("button#OKBtn.dialogOKBtn",this._getLocalizedLabels("OK"))[0].outerHTML+t.buildTag("button#CancelBtn.dialogCancelBtn",this._getLocalizedLabels("Cancel"))[0].outerHTML,{float:"right",margin:"-5px "+(a?" 15px ":" 0px ")+" 6px 0px"})[0].outerHTML,ht=t.buildTag("div#clientDialog.clientDialog",ot+st,{opacity:"1"}).attr("title",r)[0].outerHTML,u=JSON.parse(u);for(f=0;f<u.length;f++)u[f].name!=null&&u[f].name.toString().replace(/^\s+|\s+$/gm,"")||(u[f].name="(blank)",u[f].id="(blank)");if(this.model.pivotControl._dataModel=="XMLA"&&(e=n(this.model.pivotControl.model.dataSource.rows).filter(function(n,t){return t.fieldName==r}).map(function(n,t){return t}),e.length==0&&(e=n(this.model.pivotControl.model.dataSource.columns).filter(function(n,t){return t.fieldName==r}).map(function(n,t){return t})),e.length==0&&(e=n(this.model.pivotControl.model.dataSource.filters).filter(function(n,t){return t.fieldName==r}).map(function(n,t){return t})),e.length>0&&e[0].filters!=i&&(e[0].filters.members,n.map(u,function(t,i){var r=n.inArray(u[i].tag.replace(/\&/g,"&amp;"),e[0].filters.members);r>=0&&(u[i].checkedStatus=!0)}))),!t.isNullOrUndefined(this._tempFilterData)){for(f=0;f<this._tempFilterData.length;f++)t.isNullOrUndefined(this._tempFilterData[f][r])||(v=this._tempFilterData[f][r]);if(!t.isNullOrUndefined(v))for(f=0;f<v.length;f++)for(c=0;c<u.length;c++)v[f]==u[c].name&&(u[c].checkedStatus=!1)}for(n(ht).appendTo("#"+this._id),this.element.find(".editorTreeView").ejTreeView({showCheckbox:!0,loadOnDemand:!0,enableRTL:this.model.enableRTL,beforeDelete:function(){return!1},height:n(".memberEditorDiv").height(),fields:{id:"id",text:"name",isChecked:"checkedStatus",hasChild:"hasChildren",dataSource:u}}),a&&(this.element.find(".filterElementTag").ejMenu({menuType:t.MenuType.NormalMenu,width:"96%",enableRTL:this.model.enableRTL,orientation:t.Orientation.Vertical,click:t.proxy(this._filterElementClick,this)}),this.element.find(".groupLabelDrop").ejDropDownList({width:"99%",enableRTL:this.model.enableRTL,dataSource:s,fields:{id:"id",text:"text",value:"value"},change:t.proxy(this.model.pivotControl._groupLabelChange,this)}),l=this._selectedLevel,l=n.map(s,function(n){if(n.value.toLowerCase()==l.toLowerCase())return n.text}),p=this.element.find(".groupLabelDrop").data("ejDropDownList"),p.selectItemByText(l.length>0?l[0]:p.model.dataSource[0].text),this.element.find(".memberEditorDiv").addClass("advancedFilter"),this.element.find(".clearAllFilters").click(t.proxy(this.model.pivotControl._clearAllFilters,this.model.pivotControl)),this.element.find(".clearSorting").click(t.proxy(this.model.pivotControl._clearSorting,this.model.pivotControl))),w=this.element.find(".editorTreeView").find("li"),f=0;f<w.length;f++)w[f].setAttribute("tag",u[f].tag);this.element.find(".dialogOKBtn, .dialogCancelBtn").ejButton({type:t.ButtonType.Button,click:t.proxy(this._dialogBtnClick,this)});this._dialogOKBtnObj=this.element.find(".dialogOKBtn").data("ejButton");this._memberTreeObj=this.element.find(".editorTreeView").data("ejTreeView");rt=this.element.find(".editorTreeView li:gt(0)");ut=n(rt).find(":input.nodecheckbox:not(:checked)");ut.length>0&&(ft=n(this._memberTreeObj.element.find("li:first")).find("div .e-chkbox-small > span > span:eq(0)"),n(ft).removeClass("e-checkmark").addClass("e-stop"));this.element.find(".clientDialog").ejDialog({width:265,target:"#"+this._id,enableResize:!1,enableRTL:this.model.enableRTL,close:this.model.pivotControl._onPreventPanelClose});this.element.find(".e-dialog .e-close").attr("title",this._getLocalizedLabels("Close"));a&&this._droppedClass!="schemaFilter"&&(this.element.find(".clientDialog").css("padding","0px").parents().parents().find(".e-titlebar").remove(),o=this.model.pivotControl._getReportItem(h),o.item&&(o=o.item,o[0].sortOrder&&o[0].sortOrder!=t.olap.SortOrder.None&&(b=o.length>0&&o[0].sortOrder==t.olap.SortOrder.Descending?"desc":"asc",t.isNullOrUndefined(b)||b=="asc"?this.element.find(".clientDialog .ascImage").addClass("selectedSort"):this.element.find(".clientDialog .descImage").addClass("selectedSort"))));this._memberTreeObj.model.nodeCheck=t.proxy(this._onNodeCheckChanges,this);this._memberTreeObj.model.nodeUncheck=t.proxy(this._onNodeCheckChanges,this);this._dataModel=="XMLA"?this._memberTreeObj.model.beforeExpand=t.proxy(this._onBeforeNodeExpand,this):this._memberTreeObj.model.nodeClick=t.proxy(this._onNodeExpand,this);this._memberTreeObj.element.find(".e-plus").length==0&&this._memberTreeObj.element.find(".e-item").css("padding","0px");document.getElementById("OKBtn").innerHTML="<u>O<\/u>K";document.getElementById("CancelBtn").innerHTML="<u>C<\/u>ancel";this._isFiltered=!1;this._unWireEvents();this._wireEvents();t.isNullOrUndefined(pschemaDesignerWaitingPopup)||pschemaDesignerWaitingPopup.hide()},_filterElementClick:function(n){this.model.pivotControl!=null&&(this.model.pivotControl._selectedField=this._selectedMember,this.model.pivotControl._filterElementClick(n,this))},_createPivotButton:function(i,r,u,f,e){var s=r=="row"?".schemaRow":r=="column"?".schemaColumn":r=="value"?".schemaValue":".schemaFilter",h,o,c,l;if(this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode)h=r=="column"?"Columns":r=="row"?"Rows":r=="filter"?"Slicers":"values",o=t.buildTag("div.pivotButton",t.buildTag("div.dropIndicator")[0].outerHTML+t.buildTag("button.pvtBtn#pivotButton"+i.fieldName,this.model.pivotControl._dataModel!="XMLA"?n.grep(this.model.pivotTableFields,function(n){return n.name==i.fieldName})[0].caption:i.fieldCaption,{},{fieldName:i.fieldName,axis:h})[0].outerHTML+t.buildTag("span.removePivotBtn","",{display:"none"}).addClass("e-icon")[0].outerHTML).attr("tag",h+":"+i.fieldName)[0].outerHTML;else var h=r=="column"?"Columns":r=="row"?"Rows":r=="filter"?"Slicers":"values",a=(r=="column"||r=="row")&&this.model.layout!="excel"?t.buildTag("input#toggleBtn"+i,{}).attr("type","checkbox")[0].outerHTML:"",v=(r=="column"||r=="row"||r=="filter")&&this.model.layout!="excel"?t.buildTag("button.filterBtn#filterBtn"+i,{}).addClass(u?"filterIndicator":"")[0].outerHTML:"",o=t.buildTag("div.pivotButton",t.buildTag("div.dropIndicator")[0].outerHTML+t.buildTag("button.pvtBtn#pivotButton"+i,this._dataModel=="Pivot"?i:i=="Measures"?i:t.isNullOrUndefined(i.fieldCaption)?i.split(".")[1]:i.fieldCaption)[0].outerHTML+a+v+t.buildTag("span.removePivotBtn","",{display:"none"}).addClass("e-icon")[0].outerHTML).attr("tag",h+":"+(t.isNullOrUndefined(i.fieldName)?i:i.fieldName))[0].outerHTML;typeof e=="number"&&n(this.element.find(s+" .pivotButton")[e]).length>0?r=="row"?n(this.element.find(".schemaRow .pivotButton")[e]).before(o):r=="column"?n(this.element.find(".schemaColumn .pivotButton")[e]).before(o):r=="value"?n(this.element.find(".schemaValue .pivotButton")[e]).before(o):r=="filter"?n(this.element.find(".schemaFilter .pivotButton")[e]).before(o):"":r=="row"?this.element.find(".schemaRow").append(o):r=="column"?this.element.find(".schemaColumn").append(o):r=="value"?this.element.find(".schemaValue").append(o):r=="filter"?this.element.find(".schemaFilter").append(o):"";c=typeof e!="number"&&e==""?" .pivotButton .pvtBtn:last":" .pivotButton .pvtBtn:eq("+e+")";this.model.enableDragDrop&&this.element.find(s+c).ejButton({size:"normal",type:t.ButtonType.Button,enableRTL:this.model.enableRTL}).ejDraggable({handle:"button",clone:!0,cursorAt:{left:-5,top:-5},dragStart:t.proxy(function(){this._isDragging=!0},this),dragStop:t.proxy(this._onPvtBtnDropped,this),helper:t.proxy(function(t){return t.sender.target.className.indexOf("e-btn")>-1?n(t.sender.target).clone().attr("id",this._id+"_dragClone").appendTo("body"):!1},this)});this.element.find(s+" .pivotButton .filterBtn:last").ejButton({size:"normal",enableRTL:this.model.enableRTL,type:t.ButtonType.Button,contentType:"imageonly",prefixIcon:"filter"});this.element.find(s+" .pivotButton input:last").ejToggleButton({size:"normal",enableRTL:this.model.enableRTL,contentType:"imageonly",defaultPrefixIcon:"ascending",activePrefixIcon:"descending",click:t.proxy(this._onSortBtnClick,this)});f&&(this.element.find(s+" .pivotButton:contains("+i+") span:eq(0) span").removeClass("ascending").addClass("descending"),this.element.find(s+" .pivotButton:contains("+i+") span:eq(0) button").addClass("e-active"));this.model.pivotControl._dataModel=="XMLA"&&this.element.find(".pivotButton[tag*=':Measures']").length>0&&(l=n(s+" .pivotButton[tag*=':Measures']"),n(s).append(l));this.element.find(".dropIndicator").removeClass("dropIndicatorHover");this._createContextMenu()},_createContextMenu:function(){var r=this.element.find(".pivotButton"),i;this.model.pivotControl!=null&&(i=t.buildTag("ul.pivotTreeContextMenu#pivotTreeContextMenu",t.buildTag("li",t.buildTag("a",this._getLocalizedLabels("AddToFilter"))[0].outerHTML)[0].outerHTML+t.buildTag("li",t.buildTag("a",this._getLocalizedLabels("AddToRow"))[0].outerHTML)[0].outerHTML+t.buildTag("li",t.buildTag("a",this._getLocalizedLabels("AddToColumn"))[0].outerHTML)[0].outerHTML+t.buildTag("li",t.buildTag("a",this._getLocalizedLabels("AddToValues"))[0].outerHTML)[0].outerHTML)[0].outerHTML,n(this.element).append(i),n("#pivotTreeContextMenu").ejMenu({menuType:t.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:r,click:t.proxy(this._contextClick,this),beforeOpen:t.proxy(this._contextOpen,this),close:t.proxy(this.model.pivotControl._onPreventPanelClose,this)}))},_createPivotButtons:function(r,u){var o,e,s,h,f,c,l;if(!t.isNullOrUndefined(r)){if(o="",e=u=="column"?"Columns":u=="row"?"Rows":u=="filter"?"Slicers":"",this.model.pivotControl!=null&&this.model.pivotControl.model.operationalMode==t.PivotGrid.OperationalMode.ClientMode)for(e=u=="column"?"Columns":u=="row"?"Rows":u=="filter"?"Slicers":"values",e=="values"&&this.model.pivotControl._dataModel=="XMLA"&&(r=n.map(r,function(n){return n.measures})),f=0;f<r.length;f++)s=this.model.pivotControl._dataModel=="XMLA"?"":r[f].fieldName,o+=t.buildTag("div.pivotButton",t.buildTag("div.dropIndicator")[0].outerHTML+t.buildTag("button.pvtBtn#pivotButton"+s,this.model.pivotControl._dataModel=="XMLA"?(r[f].fieldCaption!=i?r[f].fieldCaption:r[f].fieldName)||r[f]:n.grep(this.model.pivotTableFields,function(n){return n.name==r[f].fieldName})[0].caption||n.grep(this.model.pivotTableFields,function(n){return n.name==r[f]})[0].caption,{},{fieldName:r[f].fieldName||r[f],axis:e})[0].outerHTML+t.buildTag("span.removePivotBtn","",{display:"none"}).addClass("e-icon")[0].outerHTML).attr("tag",e+":"+r[f].fieldName||r[f])[0].outerHTML;else for(e==""&&u=="values"&&(h=this.element.find(".pivotButton:contains("+this._getLocalizedLabels("Measures")+")").length>0?this.element.find(".pivotButton:contains('"+this._getLocalizedLabels("Measures")+"')").parent()[0].className.split(" ")[0]:"schemaColumn",e=h=="schemaColumn"?"Columns":"Rows"),f=0;f<r.length;f++)r[f].FieldHeader=r[f].FieldHeader=="Measures"?this._getLocalizedLabels("Measures"):r[f].FieldHeader,c=(u=="column"||u=="row")&&this.model.layout!="excel"?t.buildTag("input#toggleBtn"+r[f].FieldHeader||r[f].FieldName,{}).attr("type","checkbox")[0].outerHTML:"",l=(u=="column"||u=="row"||u=="filter")&&this.model.layout!="excel"?t.buildTag("button.filterBtn#filterBtn"+(r[f].FieldHeader||r[f].FieldName||r[f].Name||r[f].DimensionName),{})[0].outerHTML:"",o+=t.buildTag("div.pivotButton",t.buildTag("div.dropIndicator")[0].outerHTML+t.buildTag("button.pvtBtn#pivotButton"+r[f].FieldHeader||r[f].FieldName||r[f].Name||r[f].DimensionHeader||r[f].DimensionName,r[f].FieldHeader||r[f].FieldName||r[f].Name||r[f].DimensionHeader||r[f].DimensionName,{},this._dataModel=="Pivot"?{fieldName:r[f].FieldName||r[f].DimensionName}:{})[0].outerHTML+c+l+t.buildTag("span.removePivotBtn","",{display:"none"}).addClass("e-icon")[0].outerHTML).attr("tag",e+":"+r[f].Tag)[0].outerHTML;return this._createContextMenu(),o}},_setSplitBtnTargetPos:function(t){var o="",f,r,u,e;if(t.event!=i&&t.event.type=="touchend"?(r=t.event.originalEvent.target!=null?n(t.event.originalEvent.target).parents(".pivotButton"):n(t.event.originalEvent.srcElement).parents(".pivotButton"),u=t.event.originalEvent.target!=null?t.event.originalEvent.target.className:t.event.originalEvent.srcElement.className):(r=t.originalEvent.target!=null?n(t.originalEvent.target).parents(".pivotButton"):n(t.originalEvent.srcElement).parents(".pivotButton"),u=t.originalEvent.target!=null?t.originalEvent.target.className:t.originalEvent.srcElement.className),this._droppedClass=r.length>0?n(r[0]).parent()[0].className.split(" ")[0]:u.split(" ")[0],r[0]||u!=i&&u!=null&&jQuery.type(u)=="string"&&u.indexOf("pivotButton")>-1)for(r=r[0]?r[0]:t.originalEvent.target!=null?t.originalEvent.target:t.originalEvent.srcElement,f=t.event!=i&&t.event.type=="touchend"?t.target:this._droppedClass!=null&&this._droppedClass!=i&&this._droppedClass!=""?this.element.find("."+this._droppedClass)[0]:r.parentNode,f=n(f).children(".pivotButton"),e=0;e<f.length;e++)n(f[e]).attr("tag")==n(r).attr("tag")&&(o=e);return o},_getUnSelectedNodes:function(){for(var r,f=this.element.find(".editorTreeView")[0],u="",i=n(f).find(":input.nodecheckbox:not(:checked)"),t=0;t<i.length;t++)n(i[t].parentElement).find("span:nth-child(1)").attr("class").indexOf("e-chk-act")>-1||n(i[t].parentElement).attr("aria-checked")=="mixed"||(r=n(i[t]).parents("li:eq(0)"),u+="::"+r[0].id+"||"+n(r).attr("tag"));return u},_getSelectedNodes:function(t){var o,s,e,r,i;if(t){var h=this.element.find(".editorTreeView")[0].childNodes[0],f=[],u=n(h).children();for(r=0;r<u.length;r++){if(i=u[r],o={caption:n(i.firstChild).find("a").text(),parentId:i.parentElement.parentElement.className.indexOf("editorTreeView")>-1?"None":n(i).parents()[1].id,id:i.id,checked:n(i).find(":input.nodecheckbox")[0].checked||n(i).find("span:nth-child(1)").attr("class").indexOf("e-chk-indeter")>-1,expanded:n(i.firstChild).find(".e-minus").length>0?!0:!1,childNodes:[],tag:n(i).attr("tag")},n(i).find("ul:first").children().length>0)for(s=n(i).find("ul:first").children(),e=0;e<s.length;e++)o.childNodes.push(this._getNodeInfo(s[e]));f.push(o)}return JSON.stringify(f)}var h=n(".editorTreeView"),f="",u=n(h).find(":input.nodecheckbox");for(r=0;r<u.length;r++)(u[r].checked||n(u[r].parentElement).attr("aria-checked")=="mixed")&&(i=n(u[r]).parents("li:eq(0)"),f+="::"+i[0].id+"||"+n(i).attr("tag"));return f},_getNodeInfo:function(t){var u={caption:n(t.firstChild).find("a").text(),parentId:t.parentElement.parentElement.className.indexOf("editorTreeView")>-1?"None":n(t).parents()[1].id,id:t.id,checked:n(t).find(":input.nodecheckbox")[0].checked||n(t).find("span:nth-child(1)").attr("class").indexOf("e-chk-indeter")>-1,expanded:n(t.firstChild).find(".e-minus").length>0?!0:!1,childNodes:[],tag:n(t).attr("tag")},r,i;if(n(t).find("ul:first").children().length>0)for(r=n(t).find("ul:first").children(),i=0;i<r.length;i++)u.childNodes.push(this._getNodeInfo(r[i]));return u},doAjaxPost:function(r,u,f,e,o,s){var h,c,l=!0;f.XMLA==i?(h="application/json; charset=utf-8",c="json"):(h="text/xml",c="xml",f=f.XMLA,l=!t.isNullOrUndefined(s)&&s.action!="loadFieldElements"?!0:!1);n.ajax({type:r,url:u,contentType:h,dataType:c,async:l,data:f,success:n.proxy(e,this),complete:n.proxy(o,this),error:function(){this.model.pivotControl._ogridWaitingPopup.hide()}})}});t.PivotSchemaDesigner.Locale={};t.PivotSchemaDesigner.Locale["en-US"]={ClearFilter:"Clear Filter",SelectField:"select Field",Measures:"Measures",Warning:"Warning",AlertMsg:"The field you are moving cannot be placed in that area of the report",Goal:"Goal",Status:"Status",Trend:"Trend",Value:"value",AddToFilter:"Add to Filter",AddToRow:"Add to Row",AddToColumn:"Add to Column",AddToValues:"Add to Value",PivotTableFieldList:"PivotTable Field List",ChooseFieldsToAddToReport:"Choose fields to add to report:",DragFieldBetweenAreasBelow:"Drag fields between areas below:",ReportFilter:"Report Filter",ColumnLabel:"Column Label",RowLabel:"Row Label",Values:"Values",DeferLayoutUpdate:"Defer Layout Update",Update:"Update",OK:"OK",Cancel:"Cancel",Close:"Close"};t.PivotSchemaDesigner.Layouts={Excel:"excel",Normal:"normal"}})(jQuery,Syncfusion)});
