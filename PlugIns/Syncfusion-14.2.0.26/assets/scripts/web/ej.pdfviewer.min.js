/*!
*  filename: ej.pdfviewer.min.js
*  version : 14.2.0.26
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.globalize.min","jquery-easing","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.scroller.min","./ej.button.min","./ej.dropdownlist.min","./ej.toolbar.min","./ej.waitingpopup.min"],n):n()})(function(){(function(n,t,i){t.widget("ejPdfViewer","ej.PdfViewer",{_rootCSS:"e-pdfviewer",_requiresID:!0,element:null,model:null,validTags:["div"],defaults:{serviceUrl:"",hyperlinkOpenState:1,toolbarSettings:{toolbarItem:7,showTooltip:!0},enableHyperlink:!0,pdfService:1,locale:"en-US",pageChange:"",documentLoad:"",beforePrint:"",afterPrint:"",zoomchange:"",isResponsive:!0},_isToolbarClick:!1,_pageModel:null,_currentPage:1,_zoomLevel:2,_preZoomVal:1,_fitType:null,_higherZoomIndex:0,_lowerZoomIndex:0,_actionUrl:null,_isDevice:!1,_zoomVal:1,_currentPageBackup:0,_zoomValBackup:0,_zoomLevelBackup:0,_fitTypeBackup:null,_scrollTop:0,_bgRenderTimer:0,_renderCount:0,_prevDiff:-1,_pointerCount:0,_isRenderedByPinch:!1,_isPinchLimitReached:!1,_isRerenderCanvasCreated:!1,_isPrinting:!1,_isContainImage:!1,_isPercentHeight:-1,_isPercentWidth:-1,_isHeight:!1,_isWidth:!1,_isPrintHidden:!1,_isNavigationHidden:!1,_isMagnificationHidden:!1,_viewerAction:{getPageModel:"GetPageModel"},_scrollTimer:null,_isDestroyed:!1,_pdfService:null,_toolbar:null,_printIframe:null,_currentPrintPage:0,_abortPrinting:!1,_isWindowResizing:!1,_ejViewerInstance:null,_isAutoZoom:!1,_ejDropDownInstance:null,pageCount:0,currentPageNumber:this._currentPage,zoomPercentage:100,fileName:this._pdfFileName,_init:function(){var r,i;this._actionUrl=this.model.serviceUrl+"/PostViewerAction";r=n(this.element).closest(".e-pdfviewer","container");this._ejViewerInstance=r.ejPdfViewer("instance");this._renderViewer();this._initViewer();this._ejDropDownInstance=n("#"+this._id+"_toolbar_zoomSelection").data("ejDropDownList");this._getPdfService(this.model.pdfService);this.model.serviceUrl&&(i={},i.viewerAction="GetPageModel",i.controlId=this._id,i.pageindex="1",i.isInitialLoading="true",this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPost("POST",this._actionUrl,JSON.stringify(i),"_getPageModel"):this._doAjaxPost("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i}),"_getPageModel"));this._printIframe=document.createElement("iframe")},_getPdfService:function(n){this._pdfService=n==1?t.PdfViewer.PdfService.Local:t.PdfViewer.PdfService.Remote},_initViewer:function(){this._wireEvents();this._initToolbar();this._currentPage=1;var n=this.model.toolbarSettings;n.templateId||(this._showToolbar(!0),this._showPrintButton(n.toolbarItem&t.PdfViewer.ToolbarItems.PrintTools),this._showZoomControl(n.toolbarItem&t.PdfViewer.ToolbarItems.MagnificationTools),this._showFittoPage(n.toolbarItem&t.PdfViewer.ToolbarItems.MagnificationTools),this._showPageNavigationControls(n.toolbarItem&t.PdfViewer.ToolbarItems.PageNavigationTools));this._showViewerBlock(!1);this._setContainerSize();this._showloadingIndicator(!0)},_destroy:function(){this._isDestroyed=!0;n("#"+this._id+"_toolbarContainer span.e-pdfviewer-labelpageno").html(" / 0");n("#"+this._id+"_txtpageNo").val(0);clearTimeout(this._scrollTimer);this._unwireEvents();for(var t=this._canvascount;t>=1;)n("#"+this._id+"pageDiv_"+t).remove(),n("#hyperlinkcanvas_"+t).remove(),t--;n("#"+this._id+"_pageviewContainer").remove();n("#"+this._id+"_toolbarContainer").remove();n("#"+this._id+"_viewerContainer").remove();n("#"+this._id+"_viewBlockContainer").remove();n("#"+this._id+"_toolbar_zoomSelection_popup_wrapper").remove();n("#"+this._id+"_rptTooltip").remove();n("#"+this._id+"_loadingIndicator_WaitingPopup").remove();n("#"+this._id+"_viewerContainer_WaitingPopup").remove();n("#"+this._id+"_WaitingPopup").remove();n(this.element).find(".e-pdfviewer-viewer").remove();this._renderedCanvasList.length=0;this._raiseClientEvent("destroy",null)},_renderToolTip:function(){var i=t.buildTag("div.e-pdfviewer-tbdiv e-pdfviewer-tooltip","",{display:"none"},{id:this._id+"_rptTooltip"}),r=t.buildTag("span.e-pdfviewer-headerspan","",{display:"block"},{id:this._id+"_rptTooltip_Header"}),u=t.buildTag("span.e-pdfviewer-contentspan","",{display:"block"},{id:this._id+"_rptTooltip_Content"});i.append(r);i.append(u);n("body").append(i)},_renderToolBar:function(i){var r,e,s,u,f,o;this.model.toolbarSettings.templateId?(o=document.getElementById(this.model.toolbarSettings.templateId),i.append(o),o.ejToolbar({enableSeparator:!0,height:o.height(),click:this.model.toolbarSettings.click,isResponsive:!0}),o.css("display","block")):(r=t.buildTag("div.e-pdfviewer-toolbarcontainer .e-pdfviewer-viewer","",{width:"100%"},{id:this._id+"_toolbarContainer"}),i.append(r),this._isDevice?(e=t.buildTag("ul.e-pdfviewer-toolbarul","",{}),this._appendToolbarItems(e,"zoomin"),this._appendToolbarItems(e,"zoomout"),this._appendToolbarItems(e,"fitWidth"),this._appendToolbarItems(e,"fitPage"),r.append(e)):(s=t.buildTag("ul.e-pdfviewer-toolbarul","",{}),this._appendToolbarItems(s,"print"),r.append(s),u=t.buildTag("ul.e-pdfviewer-toolbarul","",{}),this._appendToolbarItems(u,"gotofirst"),this._appendToolbarItems(u,"gotoprevious"),this._appendToolbarItems(u,"gotopage"),this._appendToolbarItems(u,"gotonext"),this._appendToolbarItems(u,"gotolast"),r.append(u),f=t.buildTag("ul.e-pdfviewer-toolbarul","",{}),this._appendToolbarItems(f,"zoomin"),this._appendToolbarItems(f,"zoomout"),this._appendToolbarItems(f,"zoom"),this._appendToolbarItems(f,"fitWidth"),this._appendToolbarItems(f,"fitPage"),r.append(f),n("#"+this._id+"_toolbar_zoomSelection").ejDropDownList({height:"27px",width:"75px",cssClass:"e-pdfviewer-ddl",change:this._zoomValChange,selectedItem:0})),r.ejToolbar({enableSeparator:!this._isDevice,click:n.proxy(this._toolbarClick,this),isResponsive:!0}),this._toolbar=n("#"+this._id+"_toolbarContainer").data("ejToolbar"),n("#container_toolbarContainer_hiddenlist").removeClass("e-responsive-toolbar").addClass("e-pdfviewer-responsivesecondarytoolbar"),n("#container_toolbarContainer_hiddenlist").removeClass("e-toolbarspan"))},_appendToolbarItems:function(n,i){var r,w=t.PdfViewer.Locale[this.model.locale]?t.PdfViewer.Locale[this.model.locale]:t.PdfViewer.Locale["default"],f,e,o,s,h,c,l,a,v,u,y,p;switch(i){case"print":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_Print"});f=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-print","",{},{id:this._id+"_toolbar_Print"});r.append(f);break;case"gotofirst":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_gotofirst"});e=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-gotofirst","",{});r.append(e);break;case"gotolast":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_gotolast"});o=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-gotolast","",{});r.append(o);break;case"gotonext":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_gotonext"});s=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-gotonext","",{});r.append(s);break;case"gotoprevious":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_gotoprevious"});h=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-gotoprevious","",{});r.append(h);break;case"gotopage":r=t.buildTag("div.e-pdfviewer-tbpage","",{display:"block"},{});c=t.buildTag("input.e-pdfviewer-pagenumber e-pdfviewer-elementalignments ejinputtext","",{},{type:"text",value:"0",id:this._id+"_txtpageNo","data-role":"none"});l=t.buildTag("span.e-pdfviewer-labelpageno","",{},{});r.append(c);r.append(l);break;case"zoomin":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_zoomin"});a=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-zoomin","",{},{id:this._id+"_toolbar_zoomin"});r.append(a);break;case"zoomout":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_zoomout"});v=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-zoomout","",{},{id:this._id+"_toolbar_zoomout"});r.append(v);break;case"zoom":r=t.buildTag("div.e-pdfviewer-ejdropdownlist","",{},{id:this._id+"_pdfviewer_toolbar_zoom"});u=t.buildTag("select.e-pdfviewer-tbdiv e-pdfviewer-zoomlist","",{},{id:this._id+"_toolbar_zoomSelection","data-role":"none"});u.append("<option Selected>Auto<\/option>");u.append("<option>50%<\/option>");u.append("<option>75%<\/option>");u.append("<option>100%<\/option>");u.append("<option>125%<\/option>");u.append("<option>150%<\/option>");u.append("<option>200%<\/option>");u.append("<option>400%<\/option>");r.append(u);break;case"fitWidth":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_fitWidth"});y=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-fitwidth","",{},{id:this._id+"_fitWidth"});r.append(y);break;case"fitPage":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_fitPage"});p=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-fitpage","",{},{id:this._id+"_fitPage"});r.append(p)}n.append(r)},_renderViewerBlockinWeb:function(n){var i=t.buildTag("div.e-pdfviewer-viewer e-pdfviewer-viewerblock","",{},{id:this._id+"_viewBlockContainer"});n.append(i);var r=t.buildTag("table.e-pdfviewer-viewerblockcellcontent","",{margin:"1px",padding:"5px 5px 10px"}),u=t.buildTag("tr","",{width:"100%"}),f=t.buildTag("td.e-pdfviewer-viewerblockcontent","",{});return u.append(f),r.append(u),i.append(r),i},_renderViewerContainer:function(n){var r=t.buildTag("div","",{},{id:this._id+"_pdfviewerContainer"});n.append(r);var i=t.buildTag("div.e-pdfviewer-viewer e-pdfviewer-scrollcontainer e-pdfviewer-viewercontainer","",{height:"100%",width:"100%","font-size":"8pt"},{id:this._id+"_viewerContainer"}),u=t.buildTag("div","",{margin:"0px",height:"99.8%",width:"100%"},{id:this._id+"_loadingIndicator"}),f=t.buildTag("div","",{margin:"0px",height:"99.8%",width:"100%","background-color":"rgba(164, 183, 216, 0.18)",display:"block"},{id:this._id+"_loadingIndicatorBackView"}),e=t.buildTag("div","",{},{id:this._id+"_pageviewContainer"});return u.append(f),i.append(u),i.append(e),this._isDevice&&this._renderViewerBlockinDevice(i),r.append(i),r},_renderViewer:function(){var i=this.element.height(),r=this.element.width(),n=t.buildTag("div.e-pdfviewer-viewer","",{});this.element[0].style.height||this.element[0].parentElement.clientHeight==0||(this._isHeight=!0);this.element[0].style.width||this.element[0].parentElement.clientWidth==0||(this._isWidth=!0);i===0&&this.element[0].parentElement.clientHeight!=0&&this.element.height(this.element[0].parentElement.clientHeight);r===0&&this.element[0].parentElement.clientWidth!=0&&this.element.width(this.element[0].parentElement.clientWidth);this.element.append(n);this._renderToolBar(n);this._isDevice||(this._renderViewerBlockinWeb(n),this._renderToolTip());this._renderViewerContainer(n)},_setContainerSize:function(){var f=document.getElementById(this._id).clientHeight,i=0,t,r,u;this._isDevice||(t=n("#"+this._id+"_viewBlockContainer"),t.css("display").toLowerCase()=="block"&&(i=t.height()));r=this.model.toolbarSettings.templateId?n("#"+this.model.toolbarSettings.templateId).height():n("#"+this._id+"_toolbarContainer").height();u=f-i-r-4;n("#"+this._id+"_viewerContainer").css({height:u+"px"})},_setPageSize:function(t,i,r){r=0;var f=n("#"+this._id+"_pageviewContainer")[0].getBoundingClientRect(),u=this;this._renderPreviousPage=!1;n("#"+this._id+"_viewerContainer").unbind("scroll").on("scroll",function(){u._computeCurrentPage(t)});this._scrollTimer=setInterval(function(){u._pageviewscrollchanged(t)},500);u._backgroundPage=1;this._previousZoom=1;u._previousPage=u._currentPage;this._pageLocation=[];this._renderedCanvasList=[];this._pageContents=[];this._pageLocation[1]=0;this._canvascount=this._totalPages;this._pointers=[];this._designPageCanvas()},_designPageCanvas:function(){var e=5,c=n("#"+this._id+"_pageviewContainer"),h=n("#"+this._id+"_viewerContainer"),v=n("#"+this._id+"_pageviewOuterline"),l=h.width(),y=h.height(),a=this._pageWidth,p=this._pageHeight,o=1,i,s,f,r;for(o=(l-25)/a,o=Math.min(1,o),this._zoomVal=o,i=1;i<=this._totalPages;i++){s=(this.element.width()-this._pageSize[i-1].PageWidth)/2;s<0&&(s=5);f=t.buildTag("div","",{},{id:this._id+"pageDiv_"+i});c.append(f);f.css("position","absolute");f.css("top",this._zoomVal*e);f.css("left",s+"px");this._pageLocation[i]=e;var u=document.createElement("canvas");u.id="pagecanvas_"+i;u.style.height=this._zoomVal*this._pageSize[i-1].PageHeight+"px";u.style.width=this._zoomVal*this._pageSize[i-1].PageWidth+"px";u.height=this._zoomVal*this._pageSize[i-1].PageHeight;u.style.backgroundColor="white";u.width=this._zoomVal*this._pageSize[i-1].PageWidth;f.append(u);r=document.createElement("div");r.id="hyperlinkcanvas_"+i;r.style.height=u.height+"px";r.style.width=u.width+"px";r.style.position="absolute";r.style.left=0;r.style.top=0;r.style.backgroundColor="transparent";r.style.opacity="0.2";r.style.zIndex="2";f.append(r);n("#pagecanvas_"+i).css("box-shadow","0px 0px 0px 1px #000000");n("#"+this._id+"pageDiv_"+i).ejWaitingPopup({showOnInit:!0});n("#"+this._id+"pageDiv_"+i+"_WaitingPopup").appendTo(n("#"+this._id+"pageDiv_"+i)).css({left:"0px",top:"0px","background-color":"#dbdbdb"});e=parseFloat(e)+parseFloat(this._pageSize[i-1].PageHeight)+8}this._cummulativeHeight=e},_computeCurrentPage:function(t){var u=0,i=0,l=document.getElementById(this._id+"_viewerContainer"),f=l.scrollTop,r,o,c;this._zoomVal!=1&&(f=f+this._currentPage*(8-this._zoomVal*8));var s=0,e=0,h={currentPageNumber:0};for(r=0;r<this._totalPages;r++){if(this._isDestroyed)return;if(u>f){i=r;o=parseFloat(u)-parseFloat(f);c=this.element[0].parentElement.clientHeight-o;c>o&&(i=parseFloat(i)+1,this._renderPreviousPage=!0);this._renderPreviousPage=!1;break}else u=parseFloat(u)+parseFloat(t*this._zoomVal)+8;i=r+1}n("#"+this._id+"_toolbarContainer span.e-pdfviewer-labelpageno").html(" / "+this._totalPages);s=document.getElementById(this._id+"_txtpageNo").value;n("#"+this._id+"_txtpageNo").val(i);this._updatePageNavigation(i,this._totalPages);e=document.getElementById(this._id+"_txtpageNo").value;h.currentPageNumber=e;this._currentPage=i;this.currentPageNumber=this._currentPage;s!=e&&this._raiseClientEvent("pageChange",h)},_pageviewscrollchanged:function(){var e=0,o=n("#"+this._id+"_viewerContainer").scrollTop(),f,r,i,u;o==this._previousPosition&&(e=this._currentPage,this._totalPages&&this._previousPage!=e&&(f=parseInt(e),this._previousPage=e,f>=1&&f<=this._totalPages&&(this._jsondata==""||this._jsondata==null?(this._showloadingIndicator(!0),n("#"+this._id+"_toolbarContainer span.e-pdfviewer-labelpageno").html(""),n("#"+this._id+"_txtpageNo").val("0")):(n("#"+this._id+"_toolbarContainer span.e-pdfviewer-labelpageno").html(" / "+this._totalPages),n("#"+this._id+"_txtpageNo").val(f)),this._currentPage=f,this._updatePageNavigation(this._currentPage,this._totalPages),this._renderedCanvasList.indexOf(parseInt(this._currentPage))!=-1||this._scrollTriggered||this._pageContents[parseInt(this._currentPage)]||(this._scrollTriggered=!0,i={},i.viewerAction=this._viewerAction.getPageModel,i.pageindex=this._currentPage.toString(),this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostscroll("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostscroll("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i}))))));this._renderedCanvasList.indexOf(parseInt(this._currentPage))==-1&&!this._scrollTriggered&&this._currentPage<=this._totalPages&&(this._pageContents[parseInt(this._currentPage)]?(u=this._pageContents[parseInt(this._currentPage)],this._drawPdfPage(u)):(this._scrollTriggered=!0,i={},i.viewerAction=this._viewerAction.getPageModel,i.pageindex=this._currentPage.toString(),this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostscroll("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostscroll("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i}))));r=parseInt(this._currentPage)+1;this._renderPreviousPage?this._renderedCanvasList.indexOf(parseInt(this._currentPage)-1)==-1&&!this._scrollTriggered&&parseInt(this._currentPage)-1>0?this._pageContents[parseInt(this._currentPage)-1]?(u=this._pageContents[parseInt(this._currentPage)-1],this._drawPdfPage(u)):(this._scrollTriggered=!0,i={},i.viewerAction=this._viewerAction.getPageModel,i.pageindex=(parseInt(this._currentPage)-1).toString(),this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostscroll("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostscroll("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i}))):this._renderedCanvasList.indexOf(parseInt(r))==-1&&!this._scrollTriggered&&r<=this._totalPages&&(this._pageContents[parseInt(r)]?(u=this._pageContents[parseInt(r)],this._drawPdfPage(u)):(this._scrollTriggered=!0,i={},i.viewerAction=this._viewerAction.getPageModel,i.pageindex=r.toString(),this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostscroll("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostscroll("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i})))):this._renderedCanvasList.indexOf(parseInt(r))==-1&&!this._scrollTriggered&&r<=this._totalPages?this._pageContents[parseInt(r)]?(u=this._pageContents[parseInt(r)],this._drawPdfPage(u)):(this._scrollTriggered=!0,i={},i.viewerAction=this._viewerAction.getPageModel,i.pageindex=r.toString(),this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostscroll("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostscroll("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i}))):this._renderedCanvasList.indexOf(parseInt(this._currentPage)-1)==-1&&!this._scrollTriggered&&parseInt(this._currentPage)-1>0&&(this._pageContents[parseInt(this._currentPage)-1]?(u=this._pageContents[parseInt(this._currentPage)-1],this._drawPdfPage(u)):(this._scrollTriggered=!0,i={},i.viewerAction=this._viewerAction.getPageModel,i.pageindex=(parseInt(this._currentPage)-1).toString(),this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostscroll("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostscroll("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i}))));this._previousPosition=o},_doAjaxPostscroll:function(t,i,r){var u=this;n.ajax({type:t,url:i,crossDomain:!0,contentType:"application/json; charset=utf-8",dataType:"json",data:r,traditional:!0,success:function(n){u._drawPdfPage(n);u._scrollTriggered=!1},error:function(n){n.readyState!=0&&alert("Exception"+n.responseText)}})},_drawPdfPage:function(r){var ti=r,y,h,e,p,rt,pt,w,nt,f,b,vt,tt;r=this._pdfService==t.PdfViewer.PdfService.Local?JSON.parse(r):JSON.parse(r.d);this._renderedCanvasList.push(parseInt(r.currentpage));y=parseInt(r.currentpage);this._isWindowResizing||this._showPageLoadingIndicator(y,!0);this._pageimageList=r.imagestream;this._pageContents[parseInt(r.currentpage)]=ti;this._pageCompleted=this._pageimageList.pagecompleted;n("#hyperlinkcanvas_"+y).children().length>0&&(document.getElementById("hyperlinkcanvas_"+y).innerHTML="");var l=r.linkannotation,yt=r.annotpagenum,it=this;if(this.model.enableHyperlink)for(h=0;h<l.length;h++){if(e=document.createElement("a"),e.id="linkdiv_"+h,p=l[h].AnnotRectangle,e.style.background="transparent",e.style.position="absolute",e.style.left=this._convertPointToPixel(p.Left*this._zoomVal)+"px",e.style.top=this._convertPointToPixel(p.Top*this._zoomVal)+"px",e.style.width=this._convertPointToPixel(p.Width*this._zoomVal)+"px",e.style.height=this._convertPointToPixel(p.Height*this._zoomVal)+"px",e.style.color="transparent",l[h].URI.indexOf("mailto:")!=-1?(rt=l[h].URI.substring(l[h].URI.indexOf("mailto:"),l[h].URI.length),e.title=rt,e.setAttribute("href",rt)):(e.title=l[h].URI,e.setAttribute("href",l[h].URI)),this.model.hyperlinkOpenState==t.PdfViewer.LinkTarget.Default?(e.target="_self",e.onclick=function(){var n={hyperlink:this.href};it._raiseClientEvent("hyperlinkClick",n)}):this.model.hyperlinkOpenState==t.PdfViewer.LinkTarget.NewTab?(e.target="_blank",e.onclick=function(){var n={hyperlink:this.href};it._raiseClientEvent("hyperlinkClick",n)}):this.model.hyperlinkOpenState==t.PdfViewer.LinkTarget.NewWindow&&(e.onclick=function(){var n={hyperlink:this.href};return it._raiseClientEvent("hyperlinkClick",n),window.open(this.href,"_blank","scrollbars=yes,resizable=yes"),!1}),yt.length!=0){var ii=this._pageSize[y].PageHeight,ri=this._convertPointToPixel(l[h].AnnotLocation),ui=ii-ri,fi=parseFloat(this._pageLocation[yt[h]]*this._zoomVal)+parseFloat(ui*this._zoomVal);e.name=fi;e.onclick=function(){var n=document.getElementById("container_viewerContainer");return n.scrollTop=this.name,!1}}pt=document.getElementById("hyperlinkcanvas_"+y);pt.appendChild(e)}var ei=parseInt(r.currentpage),ut=document.getElementById("pagecanvas_"+parseInt(r.currentpage)),u=ut.getContext("2d"),ft=[],wt=[],oi=[],bt=[],kt=[],si,a=navigator.userAgent,v,dt=0,et=[],k=this._pageimageList.textelements;for(w=0;w<k.length;w++){var o=k[w],ot=o.color,s=o.matrix;s!=null&&(s=s.Elements);var st=o.brush,c=o.pathValue,hi=o.iscliping,gt=o.restorecanvas,ht=o.imagedata,ct=o.fillrule,ci=o.isFillandStroke,li=o.fillcolor,lt=o.strokecolor,at=o.linewidth,ni=o.linecap,d=o.linearGradientBrush,g=o.charID,ai=o.rectvalue;if(c!=null?(c=c.split(";"),g&&(et[g]=c)):c==null&&g&&(c=et[g]),gt==!1&&u.save(),c!=i&&u.setTransform(s[0]*this._zoomVal,s[1]*this._zoomVal,s[2]*this._zoomVal,s[3]*this._zoomVal,s[4]*this._zoomVal,s[5]*this._zoomVal),c!=null){for(u.beginPath(),nt=0;nt<c.length;nt++)f=c[nt],b=f[0],b=="M"?(f=f.substring(1,f.length),f=f.split(" "),u.moveTo(parseInt(f[0]),f[1])):b=="L"?(f=f.substring(1,f.length),f=f.split(" "),u.lineTo(parseInt(f[0]),f[1])):b=="C"?(f=f.substring(1,f.length),f=f.split(" "),u.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5])):b=="Z"&&u.closePath();hi==!0?(ct=="evenodd"&&(u.msFillRule="evenodd"),u.clip()):ci==i?st=="Fill"?(u.fillStyle=d!=i?this._getGradientBrush(d,u):ot,ct=="evenodd"&&(u.msFillRule="evenodd"),u.fill()):st=="FillandStroke"?(u.fillStyle=ot,u.fill(),u.strokeStyle=lt,u.stroke()):st=="Stroke"?(u.strokeStyle=lt,u.lineWidth=at,u.stroke()):(u.strokeStyle=ot,u.lineWidth=at,u.lineCap=ni,u.stroke()):(u.strokeStyle=lt,u.lineWidth=at,u.lineCap=ni,u.stroke(),u.fillStyle=d!=i?this._getGradientBrush(d,u):li,ct=="evenodd"&&(u.msFillRule="evenodd"),u.fill())}if(gt&&u.restore(),ht!=i)if((v=a.indexOf("Firefox"))!=-1||(v=a.indexOf("Chrome"))!=-1||(v=a.indexOf("Safari"))!=-1||(v=a.indexOf("AppleWebKit"))!=-1){ft.push(ht);wt.push(s);kt.push(k);bt.push(w);si=this._zoomVal;this._isContainImage=!0;break}else vt=new Image,vt.src=ht,u.setTransform(s[0]*this._zoomVal,s[1],s[2],s[3]*this._zoomVal,s[4]*this._zoomVal,s[5]*this._zoomVal),u.drawImage(vt,0,0,1,1)}if((v=a.indexOf("Firefox"))!=-1||(v=a.indexOf("Chrome"))!=-1||(v=a.indexOf("Safari"))!=-1||(v=a.indexOf("AppleWebKit"))!=-1)for(tt=0;tt<ft.length;tt++)this._imageRendering(k,oi,ft,wt,u,tt,kt,bt,et,ut,ei,dt),dt++;return this._showPageLoadingIndicator(y,!1),ut},_convertPointToPixel:function(n){return parseFloat(n)*(96/72)},_showPageLoadingIndicator:function(t,i){i?n("#"+this._id+"pageDiv_"+t+"_WaitingPopup").css("display","block"):n("#"+this._id+"pageDiv_"+t+"_WaitingPopup").css("display","none")},_imageRendering:function(n,t,r,u,f,e,o,s,h,c,l,a){var p=this,v=p._zoomVal,y=new Image;y.onload=function(){for(var d,g,et,ft,e,tt,st=!1,k=0;k<u.length;k++)if(st==!1)for(d=u[k],f.setTransform(d[0]*v,d[1],d[2],d[3]*v,d[4]*v,d[5]*v),t[a]!=i&&f.drawImage(t[a],0,0,1,1),g=s[k],g=g+1,et=o[k];g<et.length;){var y=et[g],it=y.color,w=y.matrix;w!=null&&(w=w.Elements);var ht=y.brush,b=y.pathValue,pt=y.iscliping,ct=y.restorecanvas,lt=y.imagedata,ot=y.fillrule,wt=y.isFillandStroke,bt=y.fillcolor,at=y.strokecolor,vt=y.linewidth,yt=y.linecap,rt=y.linearGradientBrush,ut=y.charID,nt=y.rectvalue;if(b!=null?(b=b.split(";"),ut&&(h[ut]=b)):b==null&&ut&&(b=h[ut]),ct==!1&&f.save(),b!=i&&f.setTransform(w[0]*v,w[1],w[2],w[3]*v,w[4]*v,w[5]*v),nt!=i&&(f.fillStyle=it,f.fillRect(nt[0],nt[1],nt[2],nt[3])),b!=null&&nt==i){for(f.beginPath(),ft=0;ft<b.length;ft++)e=b[ft],tt=e[0],tt=="M"?(e=e.substring(1,e.length),e=e.split(" "),f.moveTo(parseInt(e[0]),e[1])):tt=="L"?(e=e.substring(1,e.length),e=e.split(" "),f.lineTo(parseInt(e[0]),e[1])):tt=="C"?(e=e.substring(1,e.length),e=e.split(" "),f.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])):tt=="Z"&&f.closePath();pt==!0?(ot=="evenodd"&&(f.msFillRule="evenodd"),f.clip()):wt==i?ht=="Fill"?(f.fillStyle=rt!=i?this._getGradientBrush(rt,f):it,ot=="evenodd"&&(f.msFillRule="evenodd"),f.fill()):ht=="FillandStroke"?(f.fillStyle=it,f.fill(),f.strokeStyle=at,f.stroke()):(f.strokeStyle=it,f.lineWidth=vt,f.lineCap=yt,f.stroke()):(f.strokeStyle=at,f.lineWidth=vt,f.lineCap=yt,f.stroke(),f.fillStyle=rt!=i?this._getGradientBrush(rt,f):bt,ot=="evenodd"&&(f.msFillRule="evenodd"),f.fill())}if(ct&&f.restore(),lt!=i){st=!0;r.pop();u.pop();o.pop();s.pop();r.push(lt);u.push(w);o.push(n);s.push(g);k=-1;a++;break}g++}else p._imageRendering(n,t,r,u,f,k,o,s,h,c,l,a),a++};y.src=r[e];t.push(y)},_getGradientBrush:function(n,t){for(var i,s,r=n.Rectangle,f=n.InterpolationColors,h=f.Colors,e=f.Positions,o=t.createLinearGradient(r.X,r.Y,r.Width,r.Height),u=0;u<e.length;u++)i=h[u],i=i.split(","),s=this._rgb2Color(i[0],i[1],i[2]),o.addColorStop(e[u],s);return o},_rgb2Color:function(n,t,i){return"#"+this._byte2Hex(n)+this._byte2Hex(t)+this._byte2Hex(i)},_byte2Hex:function(n){var t="0123456789ABCDEF";return String(t.substr(n>>4&15,1))+t.substr(n&15,1)},_doAjaxPost:function(t,i,r,u){var f=this,e=u;this._ajaxRequestState!=null&&(this._ajaxRequestState.abort(),this._ajaxRequestState=null);this._ajaxRequestState=n.ajax({type:t,url:i,crossDomain:!0,contentType:"application/json; charset=utf-8",dataType:"json",data:r,traditional:!0,success:function(n){f[e](n);f._raiseClientEvent("documentLoad",null)},error:function(n){if(e!="_clearCurrentServerCache"){if(n.readyState==0)return;alert("Exception"+n.responseText)}}})},_raiseClientEvent:function(i,r){var u=this.model[i],e=[],f;e=r===null?"":r;u&&(typeof u=="string"&&(u=t.util.getObject(u,window)),n.isFunction(u)&&(i=="pageChange"?f={currentPageNumber:parseInt(r.currentPageNumber)}:i=="zoomChange"?f={previousZoomPercentage:r.previousZoomPercentage,currentZoomPercentage:r.currentZoomPercentage}:i=="hyperlinkClick"&&(f={hyperlink:r.hyperlink}),this._trigger(i,f)))},_getPageModel:function(i){this._on(n(window),"resize",this._viewerResize);this._jsondata=i;(i==""||i==null)&&(this._showloadingIndicator(!0),n("#"+this._id+"_toolbarContainer span.e-pdfviewer-labelpageno").html(""),n("#"+this._id+"_txtpageNo").val("0"));var r;r=this._pdfService==t.PdfViewer.PdfService.Local?JSON.parse(i):JSON.parse(i.d);r&&(this._pageWidth=r.pagewidth,this._pageHeight=r.pageheight,this._imageUrl=r.imageurl,this._pageSize=r.pagesize,this._totalPages=r.pagecount,this.pageCount=this._totalPages,this._pdfFileName=r.filename,this.fileName=this._pdfFileName,this._currentPage=r.currentpage,this.currentPageNumber=this._currentPage,this._isToolbarClick||this._enableToolbarItems(),this._gotoPage(this._currentPage),this._drawPdfPage(i),this._showNavigationIndicator(!1),this._showloadingIndicator(!1))},_print:function(){this._abortPrinting=!1;this._raiseClientEvent("beforePrint",null);this._showPrintLoadingIndicator(!0);this._setViewerForPrint();this._scrollPageByPage()},_setViewerForPrint:function(){this._isPrinting=!0;this._currentPageBackup=this._currentPage;this._scrollTop=n("#"+this._id+"_viewerContainer").scrollTop();this._zoomValBackup=this._zoomVal;this._zoomLevelBackup=this._zoomLevel;this._zoomVal!=1&&(this._zoomVal=1,this._zoomLevel=2,this._fitTypeBackup=this._fitType,this._zoomContainer(this._zoomVal,!1))},_scrollPageByPage:function(){for(var i,t,r,n=1;n<=this._totalPages;n++)if(this._scrollTriggered=!1,i=this._scrollToPageNo(n),i)break;this._isPrinting=!1;i||(t=navigator.userAgent,t.indexOf("Chrome")!=-1||t.indexOf("Safari")!=-1||t.indexOf("Firefox")!=-1?(r=this,setTimeout(function(){r._printPages()},1e3)):this._printPages(),this._raiseClientEvent("afterPrint",null))},_scrollToPageNo:function(n){var r=this._currentPage,t,i;if(this._totalPages&&(t=parseInt(n),t>=1&&t<=this._totalPages))return this._currentPage=t,i=document.getElementById(this._id+"_viewerContainer"),i.scrollTop=parseFloat(this._pageLocation[this._currentPage]*this._zoomVal),this._scrollPage(this._pageHeight)},_scrollPage:function(){var n,i;if(this._renderedCanvasList.indexOf(parseInt(this._currentPage))==-1&&!this._scrollTriggered&&this._currentPage<=this._totalPages){if(this._pageContents[parseInt(this._currentPage)])i=this._pageContents[parseInt(this._currentPage)],this._printPdfPages(i);else return this._scrollTriggered=!0,n={},n.viewerAction=this._viewerAction.getPageModel,n.pageindex=this._currentPage.toString(),this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostPrint("POST",this._actionUrl,JSON.stringify(n)):this._doAjaxPostPrint("POST",this.model.serviceUrl,JSON.stringify({jsonResult:n})),!0;return!1}},_printPages:function(){var i=navigator.userAgent,f=this,e=this._printIframe,u,t,r,c,o,h,s;for(e.name="printFrame",e.style.position="absolute",e.style.top="-100000000px",document.body.appendChild(e),u=e.contentWindow?e.contentWindow:e.contentDocument.document?e.contentDocument.document:e.contentDocument,u.document.open(),i.indexOf("Edge")==-1?i.indexOf("Chrome")!=-1||i.indexOf("Safari")!=-1||i.indexOf("Firefox")!=-1?(u.document.write("<!DOCTYPE html>"),u.document.write("<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; } img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }img { box-sizing: border-box; }br, button { display: none; }} @page{margin:0cm; size: 816px 1056px;}<\/style><\/head><body><center>")):u.document.write("<html><head><style>@page{margin:0cm; size: 816px 1056px;} <\/style><\/head><body><center>"):u.document.write("<html><head><style>@page{margin:0cm; size: 816px 1056px;} <\/style><\/head><body><center>"),t=1;t<=f._totalPages;t++)r=document.getElementById("pagecanvas_"+t),c=r.toDataURL(),i.indexOf("Firefox")==-1&&f._pageSize[t-1].PageWidth>f._pageSize[t-1].PageHeight&&(o=r.getContext("2d"),h=new Image,o.clearRect(0,0,r.width,r.height),r.width=f._pageSize[t-1].PageHeight,r.height=f._pageSize[t-1].PageWidth,r.style.height=f._pageSize[t-1].PageWidth+"px",r.style.width=f._pageSize[t-1].PageHeight+"px",o.save(),o.translate(r.width/2,r.height/2),o.rotate(-Math.PI/2),h.src=c,o.drawImage(h,-h.width/2,-h.height/2),o.restore()),i.indexOf("Edge")==-1?i.indexOf("Chrome")!=-1||i.indexOf("Safari")!=-1||i.indexOf("Firefox")!=-1?i.indexOf("Chrome")!=-1||i.indexOf("Safari")!=-1?u.document.write('<div><img src="'+r.toDataURL()+'" style="margin:0px;display:block;width:816px;height:1056px" id="image_'+t+'"/><\/div><br/>'):u.document.write('<div><img src="'+r.toDataURL()+'" style="margin:0px;display:block;width:'+f._pageSize[t-1].PageWidth+";height:"+f._pageSize[t-1].PageHeight+'" id="image_'+t+'"/><\/div><br/>'):u.document.write('<img src="'+r.toDataURL()+'" style="width:816px;height:1056px;margin:0px" id="image_'+t+'"/><br />'):u.document.write('<img src="'+r.toDataURL()+'" style="width:816px;height:1056px;margin:0px" id="image_'+t+'"/><br />');if(u.document.write("<\/center><\/body><\/html>"),navigator.userAgent.match("Firefox")?window.frames.printFrame.close():u.document.close(),i.indexOf("Edge")==-1)if(i.indexOf("Chrome")!=-1||i.indexOf("Safari")!=-1||i.indexOf("Firefox")!=-1)f=this,setTimeout(function(){window.frames.printFrame.focus();window.frames.printFrame.print();document.body.removeChild(e)},500);else{s=n("iframe")[0];try{s.contentWindow.document.execCommand("print",!1,null)}catch(l){s.contentWindow.print()}}else{s=n("iframe")[0];try{s.contentWindow.document.execCommand("print",!1,null)}catch(l){s.contentWindow.print()}}this._restoreViewer()},_printCancel:function(){this._abortPrinting=!0;this._restoreViewer();this._raiseClientEvent("afterPrint",null)},_restoreViewer:function(){var n,t,i,r;for(this._currentPage=this._currentPageBackup,this._zoomVal=this._zoomValBackup,this._zoomLevel=this._zoomLevelBackup,n=1;n<=this._totalPages;n++)t=document.getElementById("pagecanvas_"+n),this._pageSize[n-1].PageWidth>this._pageSize[n-1].PageHeight&&(t.style.height=this._pageSize[n-1].PageHeight+"px",t.style.width=this._pageSize[n-1].PageWidth+"px",t.width=this._pageSize[n-1].PageWidth,t.height=this._pageSize[n-1].PageHeight,this._renderedCanvasList.length=0);this._fitTypeBackup==null?this._zoomContainer(this._zoomVal,!1):(i=this._fitToPage(this._fitTypeBackup),this._applyDropDownVal(i,!0,!1),this._updatePageFitModel(this._fitType));r=document.getElementById(this._id+"_viewerContainer");r.scrollTop=this._scrollTop;this._showPrintLoadingIndicator(!1)},_doAjaxPostPrint:function(i,r,u){var e=JSON.parse(u),o,f;this._pdfService==t.PdfViewer.PdfService.Local?this._currentPrintPage=e.pageindex:(o=e.jsonResult,this._currentPrintPage=o.pageindex);f=this;n.ajax({type:i,url:r,crossDomain:!0,contentType:"application/json; charset=utf-8",dataType:"json",data:u,traditional:!0,success:function(n){var i,r;(f._printPdfPages(n),f._scrollTriggered=!1,f._abortPrinting)||(parseFloat(f._currentPrintPage)<f.pageCount?(i={},i.viewerAction=f._viewerAction.getPageModel,i.pageindex=(parseFloat(f._currentPrintPage)+1).toString(),f._pdfService==t.PdfViewer.PdfService.Local?f._doAjaxPostPrint("POST",f._actionUrl,JSON.stringify(i)):f._doAjaxPostPrint("POST",f.model.serviceUrl,JSON.stringify({jsonResult:i}))):(r=navigator.userAgent,r.indexOf("Chrome")!=-1||r.indexOf("Safari")!=-1||r.indexOf("Firefox")!=-1?setTimeout(function(){f._printPages()},1e3):f._printPages(),f._raiseClientEvent("afterPrint",null)))},error:function(n){n.readyState==0}})},_printPdfPages:function(n){var nt=0,ct=n,p,lt,l,y,u,s,g;jsondata=this._pdfService==t.PdfViewer.PdfService.Local?JSON.parse(n):JSON.parse(n.d);this._renderedCanvasList.push(parseInt(jsondata.currentpage));p=parseInt(jsondata.currentpage);this._showPageLoadingIndicator(p,!0);this._pageimageList=jsondata.imagestream;lt=parseInt(jsondata.currentpage);this._pageContents[parseInt(jsondata.currentpage)]=ct;var w=document.getElementById("pagecanvas_"+parseInt(jsondata.currentpage)),r=w.getContext("2d"),tt=[],it=[],at=[],h=navigator.userAgent,c,rt=[],ut=this._pageimageList.textelements;for(l=0;l<ut.length;l++){var e=ut[l],b=e.color,f=e.matrix;f!=null&&(f=f.Elements);var ft=e.brush,o=e.pathValue,vt=e.iscliping,et=e.restorecanvas,k=e.imagedata,d=e.fillrule,yt=e.isFillandStroke,pt=e.fillcolor,ot=e.strokecolor,st=e.linewidth,ht=e.linecap,a=e.linearGradientBrush,v=e.charID;if(o!=null?(o=o.split(";"),v&&(rt[v]=o)):o==null&&v&&(o=rt[v]),et==!1&&r.save(),o!=i&&r.setTransform(f[0],f[1],f[2],f[3],f[4],f[5]),o!=null){for(r.beginPath(),y=0;y<o.length;y++)u=o[y],s=u[0],s=="M"?(u=u.substring(1,u.length),u=u.split(" "),r.moveTo(parseInt(u[0]),u[1])):s=="L"?(u=u.substring(1,u.length),u=u.split(" "),r.lineTo(parseInt(u[0]),u[1])):s=="C"?(u=u.substring(1,u.length),u=u.split(" "),r.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5])):s=="Z"&&r.closePath();vt==!0?(d=="evenodd"&&(r.msFillRule="evenodd"),r.clip()):yt==i?ft=="Fill"?(r.fillStyle=a!=i?this._getGradientBrush(a,r):b,d=="evenodd"&&(r.msFillRule="evenodd"),r.fill()):ft=="FillandStroke"?(r.fillStyle=b,r.fill(),r.strokeStyle=ot,r.stroke()):(r.strokeStyle=b,r.lineWidth=st,r.lineCap=ht,r.stroke()):(r.strokeStyle=ot,r.lineWidth=st,r.lineCap=ht,r.stroke(),r.fillStyle=a!=i?this._getGradientBrush(a,r):pt,d=="evenodd"&&(r.msFillRule="evenodd"),r.fill())}et&&r.restore();k!=i&&((c=h.indexOf("Firefox"))!=-1||(c=h.indexOf("Chrome"))!=-1||(c=h.indexOf("Safari"))!=-1||(c=h.indexOf("AppleWebKit"))!=-1?(tt.push(k),it.push(f),this._printWinImageRendering(tt,it,at,r,w,nt),nt++):(g=new Image,g.src=k,r.setTransform(f[0],f[1],f[2],f[3],f[4],f[5]),r.drawImage(g,0,0,1,1)))}return this._showPageLoadingIndicator(p,!1),w},_printWinImageRendering:function(n,t,r,u,f,e){var s=this,o=new Image;o.onload=function(){var n=t[e];u.setTransform(n[0],n[1],n[2],n[3],n[4],n[5]);r[e]!=i&&u.drawImage(r[e],0,0,1,1)};o.src=n[e];r.push(o)},_showPrintButton:function(t){t?(n("#"+this._id+"_toolbar_Print").parent().parents(".e-pdfviewer-toolbarul").css("display","block"),this._isPrintHidden=!1):(n("#"+this._id+"_toolbar_Print").parent().parents(".e-pdfviewer-toolbarul").css("display","none"),this._isPrintHidden=!0)},_updatePageNavigation:function(n,t){n>1&&n<t?(this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotofirst"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotoprevious"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotonext"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotolast")):n==1&&n<t?(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotofirst"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotoprevious"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotonext"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotolast")):n==t&&t!=1?(this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotofirst"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotoprevious"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotonext"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotolast")):(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotofirst"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotoprevious"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotonext"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotolast"));(this._jsondata==""||this._jsondata==null)&&(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotofirst"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotoprevious"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotonext"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotolast"));this.currentPageNumber=this._currentPage},_gotoFirstPage:function(){if(this._totalPages&&this._totalPages>0){this._currentPage=1;var n=document.getElementById(this._id+"_viewerContainer");n.scrollTop=parseFloat(this._pageLocation[this._currentPage]*this._zoomVal);this._pageviewscrollchanged(this._pageHeight);this._updatePageNavigation(this._currentPage,this._totalPages)}},_gotoLastPage:function(){if(this._totalPages&&this._totalPages>0){this._currentPage=this._totalPages;var n=document.getElementById(this._id+"_viewerContainer");n.scrollTop=parseFloat(this._pageLocation[this._currentPage]*this._zoomVal);this._pageviewscrollchanged(this._pageHeight);this._updatePageNavigation(this._currentPage,this._totalPages)}},_gotoNextPage:function(){if(this._totalPages&&this._currentPage<this._totalPages){this._currentPage=this._currentPage+1;var n=document.getElementById(this._id+"_viewerContainer");n.scrollTop=parseFloat(this._pageLocation[this._currentPage]*this._zoomVal);this._pageviewscrollchanged(this._pageHeight);this._updatePageNavigation(this._currentPage,this._totalPages)}},_gotoPreviousPage:function(){if(this._totalPages&&this._currentPage>1){this._currentPage=this._currentPage-1;var n=document.getElementById(this._id+"_viewerContainer");n.scrollTop=parseFloat(this._pageLocation[this._currentPage]*this._zoomVal);this._pageviewscrollchanged(this._pageHeight);this._updatePageNavigation(this._currentPage,this._totalPages)}},_gotoPageNo:function(n){var i={currentPageNumber:0},r=n,f=this._currentPage,t,u;this._totalPages&&(t=parseInt(n),t>=1&&t<=this._totalPages&&this._currentPage!=t&&(this._currentPage=t,u=document.getElementById(this._id+"_viewerContainer"),u.scrollTop=parseFloat(this._pageLocation[this._currentPage]*this._zoomVal),this._pageviewscrollchanged(this._pageHeight),this._updatePageNavigation(this._currentPage,this._totalPages)));f!=r&&(i.currentPageNumber=r,this._raiseClientEvent("pageChange",i))},_gotoPage:function(t){this._setPageSize(this._pageHeight,this._pageWidth,null,null);var i=parseInt(t);this._updatePageNavigation(i,this._totalPages);this._totalPages>0&&this._totalPages&&(n("#"+this._id+"_toolbarContainer span.e-pdfviewer-labelpageno").html(" / "+this._totalPages),n("#"+this._id+"_txtpageNo").val(i))},_allowOnlyNumbers:function(n){return(n.which<48||n.which>57)&&n.which!=8&&n.which!=13?!1:!0},_onkeyPress:function(t){if(t.which==13)try{var i=parseInt(n(t.currentTarget).val());i>0&&i<=this.pageCount?this._gotoPageNo(i):n(t.currentTarget).val(this.currentPageNumber)}catch(r){}},_showPageNavigationControls:function(t){t?(n("#"+this._id+"_txtpageNo").parents(".e-pdfviewer-toolbarul").css("display","block"),n("#"+this._id+"_toolbar_Print").parent().parents(".e-pdfviewer-toolbarul").css("border-right-width","1px"),this._isNavigationHidden=!1):(n("#"+this._id+"_txtpageNo").parents(".e-pdfviewer-toolbarul").css("display","none"),this._isNavigationHidden=!0,!this._isPrintHidden&&this._isNavigationHidden&&this._isMagnificationHidden&&n("#"+this._id+"_toolbar_Print").parent().parents(".e-pdfviewer-toolbarul").css("border-right-width","0px"))},_showFittoPage:function(t){t?(n("#"+this._id+"_fitWidth").parents("li.e-pdfviewer-toolbarli").css("display","block"),n("#"+this._id+"_fitPage").parents("li.e-pdfviewer-toolbarli").css("display","block")):(n("#"+this._id+"_fitWidth").parents("li.e-pdfviewer-toolbarli").css("display","none"),n("#"+this._id+"_fitPage").parents("li.e-pdfviewer-toolbarli").css("display","none"))},_resetPage:function(){var t=n("#"+this._id+"_pageviewContainer"),i=n("#"+this._id+"_pageviewOuterline");i.css({width:t.width(),height:t.height()});i.css({width:t[0].getBoundingClientRect().width,height:t[0].getBoundingClientRect().height})},_applyFitToWidth:function(){this._isAutoZoom=!1;_scaleXY=this._fitToPage("fitToWidth");this._applyDropDownVal(_scaleXY,!0,!1);this._updatePageFitModel(this._fitType);this.model.isResponsive=!1},_applyFitToPage:function(){this._isAutoZoom=!1;_scaleXY=this._fitToPage("fitToPage");this._applyDropDownVal(_scaleXY,!1,!0);this._updatePageFitModel(this._fitType);this.model.isResponsive=!1},_updatePageFitModel:function(n){n=="fitToWidth"?(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_fitWidth"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitPage")):n=="fitToPage"&&(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_fitPage"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitWidth"))},_applyFitToWidthAuto:function(){_scaleXY=this._fitToAuto("fitToWidth");this._applyDropDownValAuto(_scaleXY,!0,!1)},_fitToAuto:function(){this._resetPage();var i=n("#"+this._id+"_viewerContainer"),e=n("#"+this._id+"_pageviewContainer"),o=n("#"+this._id+"_pageviewOuterline"),u=i.width(),s=i.height(),f=this._pageWidth,h=this._pageHeight,t=1,r=1;return t=(u-25)/f,this._isAutoZoom&&(t=Math.min(1,t),t==1&&(this._zoomLevelBackup=this._zoomLevel=3)),window.innerWidth>=screen.width&&(this._isWindowResizing=!1),r=t,this._zoomVal=t,this._fitToAutoSize(),this._calculateZoomLevel(this._zoomVal),this._initRerendering(),this._updateZoomButtons(),{scalX:t,scalY:r}},_fitToPage:function(t){this._resetPage();var e=n("#"+this._id+"_viewerContainer"),h=n("#"+this._id+"_pageviewContainer"),c=n("#"+this._id+"_pageviewOuterline"),u=e.width(),o=e.height(),f=this._pageWidth,s=this._pageHeight,i=1,r=1;return this._fitType=t,t=="fitToPage"?(i=(u-25)/f,r=o/s,o>s&&(r=this._preZoomVal),u>f&&(i=this._preZoomVal),i=r,this._zoomVal=i,this._zoomInContainer(),this._calculateZoomLevel(this._zoomVal)):t=="fitToWidth"&&(i=(u-25)/f,r=i,this._zoomVal=i,this._zoomInContainer(),this._calculateZoomLevel(this._zoomVal)),this._updateZoomButtons(),{scalX:i,scalY:r}},_selectDropDownIndex:function(t){var i=n(n("#"+this._id+"_toolbar_zoomSelection_popup li")[t]);i.addClass("e-active");n("#"+this._id+"_toolbar_zoomSelection_input").val(i.text())},_applyDropDownVal:function(t,i,r){if(r){var u=t.scalX>t.scalY?t.scalY:t.scalX;n("#"+this._id+"_toolbar_zoomSelection_hidden").val(Math.round(u*100)+"%");this._ejDropDownInstance.model.value=Math.round(u*100)+"%";this._ejDropDownInstance.model.selectedIndices[0]="";n("#"+this._id+"_toolbar_zoomSelection_popup li").removeClass("e-active")}else i?(n("#"+this._id+"_toolbar_zoomSelection_hidden").val(Math.round(t.scalX*100)+"%"),this._ejDropDownInstance.model.value=Math.round(t.scalX*100)+"%",this._ejDropDownInstance.model.selectedIndices[0]="",n("#"+this._id+"_toolbar_zoomSelection_popup li").removeClass("e-active")):(n("#"+this._id+"_toolbar_zoomSelection_hidden").val(Math.round(t.scalY*100)+"%"),this._ejDropDownInstance.model.value=Math.round(t.scalY*100)+"%",this._ejDropDownInstance.model.selectedIndices[0]="",n("#"+this._id+"_toolbar_zoomSelection_popup li").removeClass("e-active"))},_applyDropDownValAuto:function(t){this._isAutoZoom?(n("#"+this._id+"_toolbar_zoomSelection_hidden").val("Auto"),this._ejDropDownInstance.model.value="Auto"):(n("#"+this._id+"_toolbar_zoomSelection_hidden").val(Math.round(t.scalY*100)+"%"),this._ejDropDownInstance.model.value=Math.round(t.scalY*100)+"%",this._ejDropDownInstance.model.selectedIndices[0]="");n("#"+this._id+"_toolbar_zoomSelection_popup li").removeClass("e-active")},_showFitToPagetip:function(){var t=n("#"+this._id+"_toolbar_fittoPagePopup"),r,i;t.length>0||(t=this._renderPageFitPopup(),n("body").append(t),this._on(n("#"+this._id+"_toolbar_fittoPagePopup li.e-pdfviewer-popupli"),"click",this._pageFitMenuClick));t.css("display")=="block"?t.css("display","none"):t.css("display","block");r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-pagefit")[0].getBoundingClientRect();i=n(n("#"+this._id+"_toolbarContainer .e-pdfviewer-pagefit")[0]).offset();t.css({top:i.top+r.height-3,left:i.left-5})},_zoomValChange:function(t){var f,r,u;this._ejViewerInstance||(f=n(".e-pdfviewer"),ejViewerInstance=f.ejPdfViewer("instance"),ejViewerInstance._ejViewerInstance=ejViewerInstance);t.value!=i?(t.value=="Auto"?(ejViewerInstance.model.isResponsive=!0,r=1,ejViewerInstance._ejViewerInstance._zoomLevel=3,ejViewerInstance._ejViewerInstance._isAutoZoom=!0):(r=parseInt(t.value)/100,ejViewerInstance.model.isResponsive=!1,ejViewerInstance._ejViewerInstance._zoomLevel=t.itemId,ejViewerInstance._ejViewerInstance._isAutoZoom=!1),ejViewerInstance._ejViewerInstance._zoomContainer(r,!1)):t.target.innerHTML!=i&&(u=t.target.innerHTML,t.target.innerHTML=="Auto"?(ejViewerInstance.model.isResponsive=!0,r=1,ejViewerInstance._ejViewerInstance._isAutoZoom=!0):(u=u.substring(0,u.length-1),r=parseInt(u)/100,ejViewerInstance.model.isResponsive=!1,ejViewerInstance._ejViewerInstance._isAutoZoom=!1),ejViewerInstance._ejViewerInstance._zoomContainer(r,!1))},_zoomIn:function(){if(this._zoomLevel>=7?this._zoomLevel=7:this._zoomLevel++,this._isDevice)this._mobileLayoutZoomChange();else{var t=n("#"+this._id+"_toolbar_zoomSelection").data("ejDropDownList");t._selectItemByIndex(this._zoomLevel)}this.model.isResponsive=!1},_zoomOut:function(){if(this._zoomLevel<=1?this._zoomLevel=1:this._zoomLevel--,this._isDevice)this._mobileLayoutZoomChange();else{var t=n("#"+this._id+"_toolbar_zoomSelection").data("ejDropDownList");t._selectItemByIndex(this._zoomLevel)}this.model.isResponsive=!1},_zoomInContainer:function(t,i){var b=i,c=n("#"+this._id+"_viewerContainer"),l=n("#"+this._id+"_pageviewContainer"),r,e,u,v,y,p,s,f,w,h;t&&(this._zoomVal=this._zoomVal+b);var g=l.width(),nt=l.height(),o={currentZoomPercentage:0,previousZoomPercentage:0},a=document.getElementById(this._id+"_viewerContainer"),k=a.scrollTop,d=k/this._previousZoom*this._zoomVal,tt="scale("+this._zoomVal+","+this._zoomVal+")";for(r=1;r<=this._totalPages;r++)e=(this.element.width()-this._pageSize[r-1].PageWidth*this._zoomVal)/2,(e<0||this._fitType=="fitToWidth")&&(e=5),u=document.getElementById("pagecanvas_"+r),v=u.getContext("2d"),u.height=this._pageSize[r-1].PageHeight*this._zoomVal,u.width=this._pageSize[r-1].PageWidth*this._zoomVal,u.style.height=this._pageSize[r-1].PageHeight*this._zoomVal+"px",u.style.width=this._pageSize[r-1].PageWidth*this._zoomVal+"px",y=this._pageSize[r-1].PageHeight*this._zoomVal,p=this._pageSize[r-1].PageWidth*this._zoomVal,u.style.width=p+"px",u.style.height=y+"px",v.clearRect(0,0,u.clientWidth,u.clientHeight),s=n("#"+this._id+"pageDiv_"+r),s[0].style.top=this._pageLocation[r]*this._zoomVal+"px",s[0].style.left=e+"px",f=document.getElementById("hyperlinkcanvas_"+r),f.style.height=u.height+"px",f.style.width=u.width+"px",f.style.position="absolute",f.style.left=0,f.style.top=0,f.style.backgroundColor="transparent",f.style.opacity="0.2",f.style.zIndex="2",this._isAutoZoom||(n("#"+this._id+"pageDiv_"+r+"_WaitingPopup").css({display:"block",height:u.height+"px",width:u.width+"px",left:"0px",top:"0px"}),w=document.getElementById(this._id+"pageDiv_"+r+"_WaitingPopup"),h=w.childNodes[0],h.style.top=(u.height-h.clientHeight)/2+"px");this._renderedCanvasList&&(this._renderedCanvasList.length=0);this._zoomVal<1?c.css({"-ms-scroll-limit-y-max":this._cummulativeHeight*this._zoomVal-this.element.height()+50+"px"}):c.css({"-ms-scroll-limit-y-max":""});a.scrollTop=d;this._eventpreviouszoomvalue=this._preZoomVal;this._eventzoomvalue=this._zoomVal;this._preZoomVal=this._zoomVal;this._previousZoom=this._zoomVal;o.previousZoomPercentage=Math.round(this._eventpreviouszoomvalue*100);o.currentZoomPercentage=Math.round(this._eventzoomvalue*100);this._raiseClientEvent("zoomChange",o);this.zoomPercentage=Math.round(this._zoomVal*100)},_zoomOutContainer:function(t,i){var b=i,c=n("#"+this._id+"_viewerContainer"),l=n("#"+this._id+"_pageviewContainer"),r,e,u,v,y,p,s,f,w,h;t&&(this._zoomVal=this._zoomVal+b);var g=l.width(),nt=l.height(),o={currentZoomPercentage:0,previousZoomPercentage:0},a=document.getElementById(this._id+"_viewerContainer"),k=a.scrollTop,d=k/this._previousZoom*this._zoomVal,tt="scale("+this._zoomVal+","+this._zoomVal+")";for(r=1;r<=this._totalPages;r++)e=(this.element.width()-this._pageSize[r-1].PageWidth*this._zoomVal)/2,e<0&&(e=5),u=document.getElementById("pagecanvas_"+r),v=u.getContext("2d"),u.height=this._pageSize[r-1].PageHeight*this._zoomVal,u.width=this._pageSize[r-1].PageWidth*this._zoomVal,u.style.height=this._pageSize[r-1].PageHeight*this._zoomVal+"px",u.style.width=this._pageSize[r-1].PageWidth*this._zoomVal+"px",y=this._pageSize[r-1].PageHeight*this._zoomVal,p=this._pageSize[r-1].PageWidth*this._zoomVal,u.style.width=p+"px",u.style.height=y+"px",v.clearRect(0,0,u.clientWidth,u.clientHeight),s=n("#"+this._id+"pageDiv_"+r),s[0].style.top=this._pageLocation[r]*this._zoomVal+"px",s[0].style.left=e+"px",f=document.getElementById("hyperlinkcanvas_"+r),f.style.height=u.height+"px",f.style.width=u.width+"px",f.style.position="absolute",f.style.left=0,f.style.top=0,f.style.backgroundColor="transparent",f.style.opacity="0.2",f.style.zIndex="2",n("#"+this._id+"pageDiv_"+r+"_WaitingPopup").css({display:"block",height:u.height+"px",width:u.width+"px",left:"0px",top:"0px"}),w=document.getElementById(this._id+"pageDiv_"+r+"_WaitingPopup"),h=w.childNodes[0],h.style.top=(u.height-h.clientHeight)/2+"px";this._renderedCanvasList&&(this._renderedCanvasList.length=0);this._zoomVal<1?c.css({"-ms-scroll-limit-y-max":this._cummulativeHeight*this._zoomVal-this.element.height()+50+"px"}):c.css({"-ms-scroll-limit-y-max":""});a.scrollTop=d;this._eventpreviouszoomvalue=this._preZoomVal;this._eventzoomvalue=this._zoomVal;this._previousZoom=this._zoomVal;o.previousZoomPercentage=Math.round(this._eventpreviouszoomvalue*100);o.currentZoomPercentage=Math.round(this._eventzoomvalue*100);this._raiseClientEvent("zoomChange",o);this.zoomPercentage=Math.round(this._zoomVal*100)},_zoomContainer:function(n,t){if(this._fitType=null,this._zoomVal=n,this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitPage"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitWidth"),this._isAutoZoom&&this._renderedCanvasList&&this._isWindowResizing)this._applyFitToWidthAuto(),n=this._zoomVal;else{var i=Math.abs(this._preZoomVal-n);if(i==0)return!1;this._preZoomVal>n?this._zoomOutContainer(t,i):this._zoomInContainer(t,i)}this._preZoomVal=n;this._updateZoomButtons()},_calculateZoomLevel:function(n){var t;this._calculateZoomArrayValues();for(var u=n,i=0,r=this._zoomArray.length-1;i<=r;)if(t=Math.round((i+r)/2),this._zoomArray[t]<=u)i=t+1;else if(this._zoomArray[t]>=u)r=t-1;else return t;this._lowerZoomIndex=r;this._higherZoomIndex=i},_applyLowerZoomIndex:function(){var t=0,n;for(this._calculateZoomArrayValues(),n=0;n<this._zoomArray.length;n++)this._preZoomVal!=this._zoomArray[n]&&t++;t==this._zoomArray.length&&(this._zoomLevel=this._lowerZoomIndex);this._fitType=null},_applyHigherZoomIndex:function(){var t=0,n;for(this._calculateZoomArrayValues(),n=0;n<this._zoomArray.length;n++)this._preZoomVal!=this._zoomArray[n]&&t++;t==this._zoomArray.length&&(this._zoomLevel=this._higherZoomIndex);this._fitType=null},_calculateZoomArrayValues:function(){var t,r,n;if(this._zoomArray==i)for(t=document.getElementById(this._id+"_toolbar_zoomSelection_popup").getElementsByTagName("li"),r=[],this._zoomArray=r,n=0;n<t.length;n++)r.push(parseInt(t[n].textContent)/100)},_updateZoomButtons:function(){this._zoomVal<=.5?(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_zoomout"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_zoomin")):this._zoomVal==4?(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_zoomin"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_zoomout")):(this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_zoomout"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_zoomin"))},_showZoomControl:function(t){t?(n("#"+this._id+"_txtpageNo").parents(".e-pdfviewer-toolbarul").css("border-right-width","1px"),n("#"+this._id+"_toolbar_zoomin").parents("li.e-pdfviewer-toolbarli").css("display","block"),n("#"+this._id+"_toolbar_zoomout").parents("li.e-pdfviewer-toolbarli").css("display","block"),n("#"+this._id+"_toolbar_zoomSelection").parents("div.e-pdfviewer-ejdropdownlist").css("display","block"),n("#"+this._id+"_toolbar_Print").parent().parents(".e-pdfviewer-toolbarul").css("border-right-width","1px"),this._isMagnificationHidden=!1):(n("#"+this._id+"_txtpageNo").parents(".e-pdfviewer-toolbarul").css("border-right-width","0px"),n("#"+this._id+"_toolbar_zoomin").parents("li.e-pdfviewer-toolbarli").css("display","none"),n("#"+this._id+"_toolbar_zoomout").parents("li.e-pdfviewer-toolbarli").css("display","none"),n("#"+this._id+"_toolbar_zoomSelection").parents("div.e-pdfviewer-ejdropdownlist").css("display","none"),this._isMagnificationHidden=!0,!this._isPrintHidden&&this._isNavigationHidden&&this._isMagnificationHidden&&n("#"+this._id+"_toolbar_Print").parent().parents(".e-pdfviewer-toolbarul").css("border-right-width","0px"))},_fitToAutoSize:function(){for(var r,s,i,v,h,w=this._zoomVal,c=n("#"+this._id+"_viewerContainer"),l=n("#"+this._id+"_pageviewContainer"),b=l.width(),k=l.height(),f={currentZoomPercentage:0,previousZoomPercentage:0},a=document.getElementById(this._id+"_viewerContainer"),y=a.scrollTop,p=y/this._previousZoom*this._zoomVal,d="scale("+this._zoomVal+","+this._zoomVal+")",t=1;t<=this._totalPages;t++){r=(this.element.width()-this._pageSize[t-1].PageWidth*this._zoomVal)/2;(this._isAutoZoom&&this._zoomVal<1||r<0)&&(r=5);var u=document.getElementById("pagecanvas_"+t),g=u.getContext("2d"),e=this._pageSize[t-1].PageHeight*this._zoomVal,o=this._pageSize[t-1].PageWidth*this._zoomVal;u.style.height=e+"px";u.style.width=o+"px";s=n("#"+this._id+"pageDiv_"+t);s[0].style.top=this._pageLocation[t]*this._zoomVal+"px";s[0].style.left=r+"px";i=document.getElementById("hyperlinkcanvas_"+t);i.style.height=e+"px";i.style.width=o+"px";i.style.position="absolute";i.style.left=0;i.style.top=0;i.style.backgroundColor="transparent";i.style.opacity="0.2";i.style.zIndex="2";n("#"+this._id+"pageDiv_"+t+"_WaitingPopup").css({display:"none",height:e+"px",width:o+"px",left:"0px",top:"0px"});v=document.getElementById(this._id+"pageDiv_"+t+"_WaitingPopup");h=v.childNodes[0];h.style.top=(u.height-h.clientHeight)/2+"px"}this._zoomVal<1?c.css({"-ms-scroll-limit-y-max":this._cummulativeHeight*this._zoomVal-this.element.height()+50+"px"}):c.css({"-ms-scroll-limit-y-max":""});a.scrollTop=p;this._eventpreviouszoomvalue=this._preZoomVal;this._eventzoomvalue=this._zoomVal;this._previousZoom=this._zoomVal;this._preZoomVal=this._zoomVal;f.previousZoomPercentage=Math.round(this._eventpreviouszoomvalue*100);f.currentZoomPercentage=Math.round(this._eventzoomvalue*100);this._raiseClientEvent("zoomChange",f);this.zoomPercentage=Math.round(this._zoomVal*100)},_initRerendering:function(){var n,u,t,i,r;this._isRerenderCanvasCreated||(this._designNewCanvas(),n=[],u=this._currentPage,n.push(parseInt(this._currentPage)),this._renderedCanvasList?(t=parseInt(this._currentPage)-1,this._renderedCanvasList.indexOf(t)!=-1&&n.push(t),i=parseInt(this._currentPage)+1,this._renderedCanvasList.indexOf(i)!=-1&&n.push(i)):(t=parseInt(this._currentPage)-1,n.push(t),i=parseInt(this._currentPage)+1,n.push(i)),this._rerenderCanvasList=n,!0&&(r=this,clearInterval(r._scrollTimer),r._bgRenderTimer=setInterval(function(){r._rerenderCanvas(u)},10)),this._renderedCanvasList.length=0)},_designNewCanvas:function(){for(var t=1;t<=this._totalPages;t++){var f=document.getElementById(this._id+"pageDiv_"+t),i=document.getElementById("pagecanvas_"+t),n=document.createElement("canvas"),r=this._pageSize[t-1].PageHeight*this._zoomVal,u=this._pageSize[t-1].PageWidth*this._zoomVal;n.style.visibility="hidden";n.style.width=u+"px";n.style.height=r+"px";n.style.backgroundColor="white";n.style.boxShadow="0px 0px 0px 1px #000000";n.height=r;n.width=u;n.id=i.id;i.id="oldcanvas_"+t;f.appendChild(n)}this._isRerenderCanvasCreated=!0},_replaceOldCanvas:function(){for(var t,n=1;n<=this._totalPages;n++){var i=document.getElementById(this._id+"pageDiv_"+n),r=document.getElementById("pagecanvas_"+n),u=document.getElementById("oldcanvas_"+n);r.style.visibility="visible";i.removeChild(u)}this._isRerenderCanvasCreated=!1;t=this;clearInterval(t._bgRenderTimer);t._scrollTimer=setInterval(function(){t._pageviewscrollchanged(t._pageHeight)},500)},_rerenderCanvas:function(t){var i,r;if(this._renderedCanvasList.indexOf(parseInt(t))==-1&&t<=this._totalPages&&this._rerenderCanvasList.indexOf(parseInt(t))!=-1?(i=this._pageContents[parseInt(t)],this._rerenderPdfPage(i),this._renderCount=this._renderCount+1):this._renderedCanvasList.indexOf(parseInt(t)-1)==-1&&t-1<=this._totalPages&&this._rerenderCanvasList.indexOf(parseInt(t)-1)!=-1?(i=this._pageContents[parseInt(t)-1],this._rerenderPdfPage(i),this._renderCount=this._renderCount+1):this._renderedCanvasList.indexOf(parseInt(t)+1)==-1&&t+1<=this._totalPages&&this._rerenderCanvasList.indexOf(parseInt(t)+1)!=-1&&(i=this._pageContents[parseInt(t)+1],this._rerenderPdfPage(i),this._renderCount=this._renderCount+1),this._renderCount==this._rerenderCanvasList.length){for(this._replaceOldCanvas(),r=1;r<=this._totalPages;r++)this._renderedCanvasList.indexOf(r)==-1&&n("#"+this._id+"pageDiv_"+r+"_WaitingPopup").css({display:"block"});this._renderCount=0;this._rerenderCanvasList.length=0}},_rerenderPdfPage:function(r){var ti=r,y,h,e,p,rt,at,w,nt,f,b,ct,tt;r=this._pdfService==t.PdfViewer.PdfService.Local?JSON.parse(r):JSON.parse(r.d);this._renderedCanvasList.push(parseInt(r.currentpage));y=parseInt(r.currentpage);this._pageimageList=r.imagestream;this._pageContents[parseInt(r.currentpage)]=ti;this._pageCompleted=this._pageimageList.pagecompleted;n("#hyperlinkcanvas_"+y).children().length>0&&(document.getElementById("hyperlinkcanvas_"+y).innerHTML="");var l=r.linkannotation,lt=r.annotpagenum,it=this;if(this.model.enableHyperlink)for(h=0;h<l.length;h++){if(e=document.createElement("a"),e.id="linkdiv_"+h,p=l[h].AnnotRectangle,e.style.background="transparent",e.style.position="absolute",e.style.left=this._convertPointToPixel(p.Left*this._zoomVal)+"px",e.style.top=this._convertPointToPixel(p.Top*this._zoomVal)+"px",e.style.width=this._convertPointToPixel(p.Width*this._zoomVal)+"px",e.style.height=this._convertPointToPixel(p.Height*this._zoomVal)+"px",e.style.color="transparent",l[h].URI.indexOf("mailto:")!=-1?(rt=l[h].URI.substring(l[h].URI.indexOf("mailto:"),l[h].URI.length),e.title=rt,e.setAttribute("href",rt)):(e.title=l[h].URI,e.setAttribute("href",l[h].URI)),this.model.hyperlinkOpenState==t.PdfViewer.LinkTarget.Default?(e.target="_self",e.onclick=function(){var n={hyperlink:this.href};it._raiseClientEvent("hyperlinkClick",n)}):this.model.hyperlinkOpenState==t.PdfViewer.LinkTarget.NewTab?(e.target="_blank",e.onclick=function(){var n={hyperlink:this.href};it._raiseClientEvent("hyperlinkClick",n)}):this.model.hyperlinkOpenState==t.PdfViewer.LinkTarget.NewWindow&&(e.onclick=function(){var n={hyperlink:this.href};return it._raiseClientEvent("hyperlinkClick",n),window.open(this.href,"_blank","scrollbars=yes,resizable=yes"),!1}),lt.length!=0){var ii=this._pageSize[y].PageHeight,ri=this._convertPointToPixel(l[h].AnnotLocation),ui=ii-ri,fi=parseFloat(this._pageLocation[lt[h]]*this._zoomVal)+parseFloat(ui*this._zoomVal);e.name=fi;e.onclick=function(){var n=document.getElementById("container_viewerContainer");return n.scrollTop=this.name,!1}}at=document.getElementById("hyperlinkcanvas_"+y);at.appendChild(e)}var ei=parseInt(r.currentpage),ut=document.getElementById("pagecanvas_"+parseInt(r.currentpage)),u=ut.getContext("2d"),ft=[],vt=[],oi=[],yt=[],pt=[],si,a=navigator.userAgent,v,wt=0,et=[],k=this._pageimageList.textelements;for(w=0;w<k.length;w++){var s=k[w],ot=s.color,o=s.matrix;o!=null&&(o=o.Elements);var bt=s.brush,c=s.pathValue,hi=s.iscliping,kt=s.restorecanvas,st=s.imagedata,ht=s.fillrule,ci=s.isFillandStroke,li=s.fillcolor,dt=s.strokecolor,gt=s.linewidth,ni=s.linecap,d=s.linearGradientBrush,g=s.charID;if(c!=null?(c=c.split(";"),g&&(et[g]=c)):c==null&&g&&(c=et[g]),kt==!1&&u.save(),c!=i&&u.setTransform(o[0]*this._zoomVal,o[1],o[2],o[3]*this._zoomVal,o[4]*this._zoomVal,o[5]*this._zoomVal),c!=null){for(u.beginPath(),nt=0;nt<c.length;nt++)f=c[nt],b=f[0],b=="M"?(f=f.substring(1,f.length),f=f.split(" "),u.moveTo(parseInt(f[0]),f[1])):b=="L"?(f=f.substring(1,f.length),f=f.split(" "),u.lineTo(parseInt(f[0]),f[1])):b=="C"?(f=f.substring(1,f.length),f=f.split(" "),u.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5])):b=="Z"&&u.closePath();hi==!0?(ht=="evenodd"&&(u.msFillRule="evenodd"),u.clip()):ci==i?bt=="Fill"?(u.fillStyle=d!=i?this._getGradientBrush(d,u):ot,ht=="evenodd"&&(u.msFillRule="evenodd"),u.fill()):bt=="FillandStroke"?(u.fillStyle=ot,u.fill(),u.strokeStyle=dt,u.stroke()):(u.strokeStyle=ot,u.lineWidth=gt,u.lineCap=ni,u.stroke()):(u.strokeStyle=dt,u.lineWidth=gt,u.lineCap=ni,u.stroke(),u.fillStyle=d!=i?this._getGradientBrush(d,u):li,ht=="evenodd"&&(u.msFillRule="evenodd"),u.fill())}if(kt&&u.restore(),st!=i)if((v=a.indexOf("Firefox"))!=-1||(v=a.indexOf("Chrome"))!=-1||(v=a.indexOf("Safari"))!=-1||(v=a.indexOf("AppleWebKit"))!=-1){ft.push(st);vt.push(o);pt.push(k);yt.push(w);si=this._zoomVal;this._isContainImage=!0;break}else ct=new Image,ct.src=st,u.setTransform(o[0]*this._zoomVal,o[1],o[2],o[3]*this._zoomVal,o[4]*this._zoomVal,o[5]*this._zoomVal),u.drawImage(ct,0,0,1,1)}if((v=a.indexOf("Firefox"))!=-1||(v=a.indexOf("Chrome"))!=-1||(v=a.indexOf("Safari"))!=-1||(v=a.indexOf("AppleWebKit"))!=-1)for(tt=0;tt<ft.length;tt++)this._imageRenderingPinch(k,oi,ft,vt,u,tt,pt,yt,et,ut,ei,wt),wt++;return this._showPageLoadingIndicator(y,!1),ut},_imageRenderingPinch:function(n,t,r,u,f,e,o,s,h,c,l,a){var p=this,v=p._zoomVal,y=new Image;y.onload=function(){for(var d,g,ut,rt,e,nt,ot=!1,k=0;k<u.length;k++)if(ot==!1)for(d=u[k],f.setTransform(d[0]*v,d[1],d[2],d[3]*v,d[4]*v,d[5]*v),t[a]!=i&&f.drawImage(t[a],0,0,1,1),g=s[k],g=g+1,ut=o[k];g<ut.length;){var y=ut[g],ft=y.color,w=y.matrix;w!=null&&(w=w.Elements);var st=y.brush,b=y.pathValue,yt=y.iscliping,ht=y.restorecanvas,ct=y.imagedata,et=y.fillrule,pt=y.isFillandStroke,wt=y.fillcolor,lt=y.strokecolor,at=y.linewidth,vt=y.linecap,tt=y.linearGradientBrush,it=y.charID;if(b!=null?(b=b.split(";"),it&&(h[it]=b)):b==null&&it&&(b=h[it]),ht==!1&&f.save(),b!=i&&f.setTransform(w[0]*v,w[1],w[2],w[3]*v,w[4]*v,w[5]*v),b!=null){for(f.beginPath(),rt=0;rt<b.length;rt++)e=b[rt],nt=e[0],nt=="M"?(e=e.substring(1,e.length),e=e.split(" "),f.moveTo(parseInt(e[0]),e[1])):nt=="L"?(e=e.substring(1,e.length),e=e.split(" "),f.lineTo(parseInt(e[0]),e[1])):nt=="C"?(e=e.substring(1,e.length),e=e.split(" "),f.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])):nt=="Z"&&f.closePath();yt==!0?(et=="evenodd"&&(f.msFillRule="evenodd"),f.clip()):pt==i?st=="Fill"?(f.fillStyle=tt!=i?this._getGradientBrush(tt,f):ft,et=="evenodd"&&(f.msFillRule="evenodd"),f.fill()):st=="FillandStroke"?(f.fillStyle=ft,f.fill(),f.strokeStyle=lt,f.stroke()):(f.strokeStyle=ft,f.lineWidth=at,f.lineCap=vt,f.stroke()):(f.strokeStyle=lt,f.lineWidth=at,f.lineCap=vt,f.stroke(),f.fillStyle=tt!=i?this._getGradientBrush(tt,f):wt,et=="evenodd"&&(f.msFillRule="evenodd"),f.fill())}if(ht&&f.restore(),ct!=i){ot=!0;r.pop();u.pop();o.pop();s.pop();r.push(ct);u.push(w);o.push(n);s.push(g);k=-1;a++;break}g++}else p._imageRenderingPinch(n,t,r,u,f,k,o,s,h,c,l,a),a++};y.src=r[e];t.push(y)},_touchStart:function(n){var t=n.touches;t.length>1&&n.preventDefault()},_touchMove:function(t){var u=t.touches,f,i,r;u.length>1&&(f=n(t.target).parents(".e-pdfviewer.e-js"),i=f.ejPdfViewer("instance"),i._isRerenderCanvasCreated||(r=Math.sqrt(Math.pow(u[0].clientX-u[1].clientX,2)+Math.pow(u[0].clientY-u[1].clientY,2)),i._prevDiff>-1?r>i._prevDiff?i._pinchOut(t):r<i._prevDiff&&i._pinchIn(t):i._zoomVal<2?i._prevDiff!=-1&&r>i._prevDiff&&i._pinchIn(t):i._prevDiff==-1&&i._zoomVal>2&&r>i._prevDiff&&i._pinchIn(t),i._prevDiff=r))},_touchEnd:function(t){var s=n(t.target).parents(".e-pdfviewer.e-js"),i=s.ejPdfViewer("instance"),r,o,f,e,u;i._prevDiff=-1;i._isRenderedByPinch&&(i._renderedCanvasList.length!=0&&(i._isRerenderCanvasCreated||(i._designNewCanvas(),r=[],o=i._currentPage,r.push(parseInt(i._currentPage)),f=parseInt(i._currentPage)-1,i._renderedCanvasList.indexOf(f)!=-1&&r.push(f),e=parseInt(i._currentPage)+1,i._renderedCanvasList.indexOf(e)!=-1&&r.push(e),i._rerenderCanvasList=r,u=i,window.clearInterval(u._scrollTimer),u._bgRenderTimer=setInterval(function(){u._rerenderCanvas(o)},10),i._renderedCanvasList.length=0)),i._isRenderedByPinch=!1)},_pointerdown:function(n){n.originalEvent.pointerType=="touch"&&(this._pointerCount=this._pointerCount+1,this._pointerCount<=2&&(n.preventDefault(),this._pointers.push(n.originalEvent),this._pointerCount==2&&(this._pointerCount=0)))},_pointermove:function(n){var i,t,r,u;if(n.originalEvent.pointerType=="touch"&&this._pointers.length==2){for(n.preventDefault(),i=0;i<this._pointers.length;i++)if(n.originalEvent.pointerId==this._pointers[i].pointerId){this._pointers[i]=n.originalEvent;break}this._isRerenderCanvasCreated||(t=Math.sqrt(Math.pow(this._pointers[0].clientX-this._pointers[1].clientX,2)+Math.pow(this._pointers[0].clientY-this._pointers[1].clientY,2)),this._prevDiff>-1&&(t>this._prevDiff?this._pinchOut(n):t<this._prevDiff&&this._pinchIn(n)),r=document.getElementById(this._id+"_viewerContainer"),u=r.scrollTop,u==0||(t>this._prevDiff?this._pinchOut(n):t<this._prevDiff&&this._pinchIn(n)),this._prevDiff=t)}},_pointerup:function(n){var t,f,r,u,i;n.originalEvent.pointerType=="touch"&&(this._pointers=[],this._pointerCount=0,this._prevDiff=-1,this._isRenderedByPinch&&(n.preventDefault(),this._renderedCanvasList.length!=0&&(this._isRerenderCanvasCreated||(this._designNewCanvas(),t=[],f=this._currentPage,t.push(parseInt(this._currentPage)),r=parseInt(this._currentPage)-1,this._renderedCanvasList.indexOf(r)!=-1&&t.push(r),u=parseInt(this._currentPage)+1,this._renderedCanvasList.indexOf(u)!=-1&&t.push(u),this._rerenderCanvasList=t,i=this,window.clearInterval(i._scrollTimer),i._bgRenderTimer=setInterval(function(){i._rerenderCanvas(f)},10),this._renderedCanvasList.length=0)),this._isRenderedByPinch=!1))},_pinchOut:function(){this._isAutoZoom=!1;this._zoomVal=this._zoomVal+.01;this._zoomVal>2&&(this._zoomVal=this._zoomVal+.01);this._zoomVal>4&&(this._zoomVal=4,this._isPinchLimitReached=!0);this._zoomVal<=4?(this._isPinchLimitReached||(this._fitType=null,this._fitToAutoSize(),this._calculateZoomLevel(this._zoomVal),n("#"+this._id+"_toolbar_zoomSelection_hidden").val(Math.round(this._zoomVal*100)+"%"),this._ejDropDownInstance.model.value=this._zoomVal*100+"%",this._ejDropDownInstance.model.selectedIndices[0]="",n("#"+this._id+"_toolbar_zoomSelection_popup li").removeClass("e-active"),this._updateZoomButtons(),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitPage"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitWidth"),this._isRenderedByPinch=!0),this._isPinchLimitReached=!1):this._zoomVal=4},_pinchIn:function(){this._isAutoZoom=!1;this._zoomVal=this._zoomVal-.01;this._zoomVal<4&&this._zoomVal>2&&(this._zoomVal=this._zoomVal-.01);this._zoomVal<.5&&(this._zoomVal=.5,this._isPinchLimitReached=!0);this._zoomVal>=.5?(this._isPinchLimitReached||(this._fitType=null,this._fitToAutoSize(),this._calculateZoomLevel(this._zoomVal),n("#"+this._id+"_toolbar_zoomSelection_hidden").val(Math.round(this._zoomVal*100)+"%"),this._ejDropDownInstance.model.value=this._zoomVal*100+"%",this._ejDropDownInstance.model.selectedIndices[0]="",n("#"+this._id+"_toolbar_zoomSelection_popup li").removeClass("e-active"),this._updateZoomButtons(),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitPage"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitWidth"),this._isRenderedByPinch=!0),this._isPinchLimitReached=!1):this._zoomVal=.5},_wireEvents:function(){this.model.toolbarSettings.templateId||(this._on(n("#"+this._id+"_txtpageNo"),"keypress",this._allowOnlyNumbers),this._on(n("#"+this._id+"_txtpageNo"),"keypress",this._onkeyPress),this._on(n("#"+this._id+"_txtpageNo"),"click ",this._onToolbarItemClick),this._on(n("#"+this._id+"_zoomSelection"),"change",this._zoomValChange),this._on(n("#"+this._id+"_toolbar_zoomSelection_container"),"click ",this._onToolbarItemClick));var t=document.getElementById(this._id+"_viewerContainer");n("#"+this._id+"_viewerContainer").css({"touch-action":"pan-x pan-y"});n("#"+this._id+"_pdfviewerContainer").css({"touch-action":"pan-x pan-y"});(navigator.userAgent.match("Firefox")||navigator.userAgent.match("Chrome"))&&(t.addEventListener("touchstart",this._touchStart),t.addEventListener("touchmove",this._touchMove),t.addEventListener("touchleave",this._touchEnd),t.addEventListener("touchend",this._touchEnd),t.addEventListener("touchcancel",this._touchEnd));this._on(n("#"+this._id+"_viewerContainer"),"pointerdown",this._pointerdown);this._on(n("#"+this._id+"_viewerContainer"),"pointermove",this._pointermove);this._on(n("#"+this._id+"_viewerContainer"),"pointerup",this._pointerup);this._on(n("#"+this._id+"_viewerContainer"),"pointerleave",this._pointerup);this._on(n("#"+this._id+"_toolbarContainer li,#"+this._id+"_toolbarContainer .e-pdfviewer-ejdropdownlist,#"+this._id+"_toolbarContainer .e-pdfviewer-tbpage"),"mouseover",this._showIconToolTip);this._on(n("#"+this._id+"_toolbarContainer li,#"+this._id+"_toolbarContainer .e-pdfviewer-ejdropdownlist,#"+this._id+"_toolbarContainer .e-pdfviewer-tbpage"),"mouseout",this._hideIconToolTip)},_unwireEvents:function(){this.model.toolbarSettings.templateId||(this._on(n("#"+this._id+"_txtpageNo"),"keypress",this._allowOnlyNumbers),this._off(n("#"+this._id+"_txtpageNo"),"keypress",this._onkeyPress),this._off(n("#"+this._id+"_txtpageNo"),"click ",this._onToolbarItemClick),this._off(n("#"+this._id+"_zoomSelection"),"change",this._zoomValChange),this._off(n("#"+this._id+"_toolbar_zoomSelection_container"),"click ",this._onToolbarItemClick));var t=document.getElementById(this._id+"_viewerContainer");(navigator.userAgent.match("Firefox")||navigator.userAgent.match("Chrome"))&&(t.removeEventListener("touchstart",this._touchStart),t.removeEventListener("touchmove",this._touchMove),t.removeEventListener("touchleave",this._touchEnd),t.removeEventListener("touchend",this._touchEnd),t.removeEventListener("touchcancel",this._touchEnd));this._off(n("#"+this._id+"_viewerContainer"),"pointerdown",this._pointerdown);this._off(n("#"+this._id+"_viewerContainer"),"pointermove",this._pointermove);this._off(n("#"+this._id+"_viewerContainer"),"pointerup",this._pointerup);this._off(n("#"+this._id+"_viewerContainer"),"pointerleave",this._pointerup);this._off(n("#"+this._id+"_toolbarContainer li,#"+this._id+"_toolbarContainer .e-pdfviewer-ejdropdownlist,#"+this._id+"_toolbarContainer .e-pdfviewer-tbpage"),"mouseover",this._showIconToolTip);this._off(n("#"+this._id+"_toolbarContainer li,#"+this._id+"_toolbarContainer .e-pdfviewer-ejdropdownlist,#"+this._id+"_toolbarContainer .e-pdfviewer-tbpage"),"mouseout",this._hideIconToolTip)},_onToolbarItemClick:function(t){t.target.id==this._id+"_txtpageNo"&&n("#"+this._id+"_txtpageNo").select();n("#"+this._id+"_rptTooltip").css("display","none")},_toolbarClick:function(t){var f=t.target,i=t.target,r,u;if(this._isToolbarClick)if(n("#"+this._id+"_rptTooltip").css("display","none"),n(i).hasClass("e-pdfviewer-toolbarli")&&(i=n(i).find("span")),n(i).hasClass("e-pdfviewer-print"))this._print();else if(n(i).hasClass("e-pdfviewer-gotofirst")&&!n(i).hasClass("e-pdfviewer-disabled"))this._gotoFirstPage();else if(n(i).hasClass("e-pdfviewer-gotolast")&&!n(i).hasClass("e-pdfviewer-disabled"))this._gotoLastPage();else if(n(i).hasClass("e-pdfviewer-gotonext")&&!n(i).hasClass("e-pdfviewer-disabled"))this._gotoNextPage();else if(n(i).hasClass("e-pdfviewer-gotoprevious")&&!n(i).hasClass("e-pdfviewer-disabled"))this._gotoPreviousPage();else if(n(i).hasClass("e-pdfviewer-zoomin"))this._applyLowerZoomIndex(),this._zoomIn();else if(n(i).hasClass("e-pdfviewer-zoomout"))this._applyHigherZoomIndex(),this._zoomOut();else if(n(i).hasClass("e-pdfviewer-fitpage")||n(i).hasClass("e-pdfviewer-fitwidth")){r=i;u=n(r).attr("id");switch(u){case this._id+"_fitWidth":this._applyFitToWidth();break;case this._id+"_fitPage":this._applyFitToPage()}}},_showToolbar:function(t){t?n("#"+this._id+"_toolbarContainer").css("display","block"):n("#"+this._id+"_toolbarContainer").css("display","none")},_initToolbar:function(){if(this._isToolbarClick=!1,!this.model.toolbarSettings.templateId&&!this._isDevice){var t=n("#"+this._id+"_toolbar_zoomSelection").data("ejDropDownList");t._selectItemByIndex(0);t.disable();n("#"+this._id+"_txtpageNo").attr("disabled","disabled");this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotofirst");this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotoprevious");this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotonext");this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotolast")}},_enableToolbarItems:function(){this._isToolbarClick=!0;this.model.toolbarSettings.templateId||this._isDevice||(n("#"+this._id+"_txtpageNo").removeAttr("disabled"),n("#"+this._id+"_toolbar_zoomSelection").data("ejDropDownList").enable())},_showIconToolTip:function(t){n("#"+this._id+"_rptTooltip").css("display")=="none"&&this._showTooltipContent(t)},_hideIconToolTip:function(){n("#"+this._id+"_rptTooltip").css("display","none")},_viewpopupBlockNone:function(n){return n.css("display")=="block"?!1:!0},_showTooltipContent:function(t){var r=t.target,i,u,h,f,c,l,a,v,y,p,w,b,k,d,nt,e,o,g,s,tt;if(this.model.toolbarSettings.showTooltip&&!this._isDevice){if(h=!0,n(r).hasClass("e-pdfviewer-toolbarli")&&(r=n(r).find("span")),f=n(r).prev(),n(r).hasClass("e-pdfviewer-print"))c=n("#"+this._id+"_toolbarContainer .e-pdfviewer-print")[0],i=c?c.getBoundingClientRect():n("#"+this._id+"_toolbarContainer_hiddenlist .e-pdfviewer-print")[0].getBoundingClientRect(),u=this._getTootipText("print");else if(n(r).hasClass("e-pdfviewer-gotofirst")||n(f).hasClass("e-pdfviewer-gotofirst"))l=n("#"+this._id+"_toolbarContainer .e-pdfviewer-gotofirst")[0],i=l?l.getBoundingClientRect():n("#"+this._id+"_toolbarContainer_hiddenlist .e-pdfviewer-gotofirst")[0].getBoundingClientRect(),u=this._getTootipText("first");else if(n(r).hasClass("e-pdfviewer-gotolast")||n(f).hasClass("e-pdfviewer-gotolast"))a=n("#"+this._id+"_toolbarContainer .e-pdfviewer-gotolast")[0],i=a?a.getBoundingClientRect():n("#"+this._id+"_toolbarContainer_hiddenlist .e-pdfviewer-gotolast")[0].getBoundingClientRect(),u=this._getTootipText("last");else if(n(r).hasClass("e-pdfviewer-gotonext")||n(f).hasClass("e-pdfviewer-gotonext"))v=n("#"+this._id+"_toolbarContainer .e-pdfviewer-gotonext")[0],i=v?v.getBoundingClientRect():n("#"+this._id+"_toolbarContainer_hiddenlist .e-pdfviewer-gotonext")[0].getBoundingClientRect(),u=this._getTootipText("next");else if(n(r).hasClass("e-pdfviewer-gotoprevious")||n(f).hasClass("e-pdfviewer-gotoprevious"))y=n("#"+this._id+"_toolbarContainer .e-pdfviewer-gotoprevious")[0],i=y?y.getBoundingClientRect():n("#"+this._id+"_toolbarContainer_hiddenlist .e-pdfviewer-gotoprevious")[0].getBoundingClientRect(),u=this._getTootipText("previous");else if(n(r).hasClass("e-pdfviewer-zoomin")||n(f).hasClass("e-pdfviewer-zoomin"))p=n("#"+this._id+"_toolbarContainer .e-pdfviewer-zoomin")[0],i=p?p.getBoundingClientRect():n("#"+this._id+"_toolbarContainer_hiddenlist .e-pdfviewer-zoomin")[0].getBoundingClientRect(),u=this._getTootipText("zoomin");else if(n(r).hasClass("e-pdfviewer-zoomout")||n(f).hasClass("e-pdfviewer-zoomout"))w=n("#"+this._id+"_toolbarContainer .e-pdfviewer-zoomout")[0],i=w?w.getBoundingClientRect():n("#"+this._id+"_toolbarContainer_hiddenlist .e-pdfviewer-zoomout")[0].getBoundingClientRect(),u=this._getTootipText("zoomout");else if(n(r).hasClass("e-pdfviewer-tbpage")||n(r).hasClass("e-pdfviewer-pagenumber")||n(r).hasClass("e-pdfviewer-labelpageno"))b=n("#"+this._id+"_toolbarContainer .e-pdfviewer-tbpage")[0],i=b?b.getBoundingClientRect():n("#"+this._id+"_toolbarContainer_hiddenlist .e-pdfviewer-tbpage")[0].getBoundingClientRect(),u=this._getTootipText("pageIndex");else if(n(r).hasClass("e-pdfviewer-ejdropdownlist")||n(r).hasClass("e-dropdownlist")||n(r).hasClass("e-select")||n(r).hasClass("e-down-arrow"))k=n("#"+this._id+"_toolbarContainer .e-pdfviewer-ejdropdownlist")[0],i=k?k.getBoundingClientRect():n("#"+this._id+"_toolbarContainer_hiddenlist .e-pdfviewer-ejdropdownlist")[0].getBoundingClientRect(),u=this._getTootipText("zoom"),h=this._viewpopupBlockNone(n("#"+this._id+"_toolbar_zoomSelection_popup_list_wrapper"));else if(n(r).hasClass("e-pdfviewer-fitwidth")||n(r).hasClass("e-pdfviewer-fitpage")||n(f).hasClass("e-pdfviewer-fitwidth")||n(f).hasClass("e-pdfviewer-fitpage")){d=r;nt=n(d).attr("id");switch(nt){case this._id+"_fitWidth":e=n("#"+this._id+"_toolbarContainer .e-pdfviewer-fitwidth")[0];i=e?e.getBoundingClientRect():n("#"+this._id+"_toolbarContainer_hiddenlist .e-pdfviewer-fitwidth")[0].getBoundingClientRect();u=this._getTootipText("fittoWidth");break;case this._id+"_fitPage":o=n("#"+this._id+"_toolbarContainer .e-pdfviewer-fitpage")[0];i=o?o.getBoundingClientRect():n("#"+this._id+"_toolbarContainer_hiddenlist .e-pdfviewer-fitpage")[0].getBoundingClientRect();u=this._getTootipText("fittopage");break;default:g=n(d).prev();n(g).hasClass("e-pdfviewer-fitwidth")?(e=n("#"+this._id+"_toolbarContainer .e-pdfviewer-fitwidth")[0],i=e?e.getBoundingClientRect():n("#"+this._id+"_toolbarContainer_hiddenlist .e-pdfviewer-fitwidth")[0].getBoundingClientRect(),u=this._getTootipText("fittoWidth")):n(g).hasClass("e-pdfviewer-fitpage")&&(o=n("#"+this._id+"_toolbarContainer .e-pdfviewer-fitpage")[0],i=o?o.getBoundingClientRect():n("#"+this._id+"_toolbarContainer_hiddenlist .e-pdfviewer-fitpage")[0].getBoundingClientRect(),u=this._getTootipText("fittopage"))}}u&&h&&(s=this._viewerMaxZindex(),n("#"+this._id+"_rptTooltip_Header").html(u.header),n("#"+this._id+"_rptTooltip_Content").html(u.content),tt=this.element[0].clientWidth,tt<i.left+2*i.width?u.header=="Zoom"?n("#"+this._id+"_rptTooltip").css({zIndex:s+1,top:i.top+i.height+5,left:i.left-2*i.width,display:"block",position:"absolute"}):n("#"+this._id+"_rptTooltip").css({zIndex:s+1,top:i.top+i.height+5,left:i.left-3*i.width,display:"block",position:"absolute"}):n("#"+this._id+"_rptTooltip").css({zIndex:s+1,top:i.top+i.height+5,left:i.left+i.width/2,display:"block",position:"absolute"}))}},_viewerMaxZindex:function(){var u=this.element.parents(),i,r,t;return i=n("body").children(),index=i.index(this.popup),i.splice(index,1),n(i).each(function(n,t){u.push(t)}),r=n(this.model.target).children(),cindex=r.index(this.popup),r.splice(cindex,1),n(r).each(function(n,t){u.push(t)}),t=Math.max.apply(t,n.map(u,function(t){if(n(t).css("position")!="static")return parseInt(n(t).css("z-index"))||1})),!t||t<1e4?t=1e4:t+=1,t},_getTootipText:function(n){var i=t.PdfViewer.Locale[this.model.locale]?t.PdfViewer.Locale[this.model.locale]:t.PdfViewer.Locale["default"],r="",u="";switch(n){case"print":r=i.toolbar.print.headerText;u=i.toolbar.print.contentText;break;case"first":r=i.toolbar.first.headerText;u=i.toolbar.first.contentText;break;case"previous":r=i.toolbar.previous.headerText;u=i.toolbar.previous.contentText;break;case"next":r=i.toolbar.next.headerText;u=i.toolbar.next.contentText;break;case"last":r=i.toolbar.last.headerText;u=i.toolbar.last.contentText;break;case"zoomin":r=i.toolbar.zoomIn.headerText;u=i.toolbar.zoomIn.contentText;break;case"zoomout":r=i.toolbar.zoomOut.headerText;u=i.toolbar.zoomOut.contentText;break;case"pageIndex":r=i.toolbar.pageIndex.headerText;u=i.toolbar.pageIndex.contentText;break;case"zoom":r=i.toolbar.zoom.headerText;u=i.toolbar.zoom.contentText;break;case"fittoWidth":r=i.toolbar.fitToWidth.headerText;u=i.toolbar.fitToWidth.contentText;break;case"fittopage":r=i.toolbar.fitToPage.headerText;u=i.toolbar.fitToPage.contentText}return{header:r,content:u}},_setInitialization:function(){this._jsondata;this._canvascount=0;this._fileName="";this._isToolbarClick=!1;this._pageModel=null;this._currentPage=1;this._zoomLevel=2;this._pageImageStream=null;this._pageimageList;this._pageWidth;this._pageHeight;this._pageLocation=[];this._scrollTriggered=!1;this._previousPage=1;this._totalPages;this._previousPosition;this._cummulativeHeight;this._backgroundPage=1;this._renderedCanvasList=[];this._pageContents=[];this._pagePrinted=!1;this._printingPage=1;this._printingTimer;this._previousZoom=1;this._renderPreviousPage=!1;this._pageSize;this._eventpreviouszoomvalue;this._eventzoomvalue;this._pdfFileName;this._zoomArray=[];this._rerenderCanvasList=[];this._ajaxRequestState=null},_showViewerBlock:function(t){if(t){n("#"+this._id+"_viewBlockContainer").css("display","block");var i=n("#"+this._id+"_viewBlockContainer .e-pdfviewer-viewerblockcellcontent").find("table");this._selectparamToolItem(i.is("[isviewclick]"))}else n("#"+this._id+"_viewBlockContainer").css("display","none");this._isDevice&&n("#"+this._id+"_viewBlockContainer.e-pdfviewer-blockstyle").css("z-index",t?"10":"0")},_showNavigationIndicator:function(t){n("#"+this._id+"_viewerContainer").ejWaitingPopup({showOnInit:t});n("#"+this._id+"_viewerContainer_WaitingPopup").addClass("e-pdfviewer-waitingpopup")},_showloadingIndicator:function(t){t?(n("#"+this._id+"_loadingIndicator").css("display","block"),n("#"+this._id+"_pageviewOuterContainer").css("display","none")):(n("#"+this._id+"_loadingIndicator").css("display","none"),n("#"+this._id+"_pageviewOuterContainer").css("display","block"));n("#"+this._id+"_loadingIndicator").ejWaitingPopup({showOnInit:t});n("#"+this._id+"_loadingIndicator_WaitingPopup").addClass("e-pdfviewer-waitingpopup")},_showPrintLoadingIndicator:function(t){n("#"+this._id).ejWaitingPopup({showOnInit:t,text:"Preparing document for printing...",cssClass:"e-pdfviewer-waitingpopup-print"})},_viewerResize:function(){var t=this,o=t._isWidth?t.element[0].parentElement.style.width:t.element[0].style.width,s=t._isHeight?t.element[0].parentElement.style.height:t.element[0].style.height,r=n(t.element).height(),u=n(t.element).width(),f,e;s.indexOf("%")!=-1?(t._isPercentHeight=parseInt(s),f=t._isHeight?n(t.element).parent().height():r,r=t._isHeight?f:f/100*t._isPercentHeight):t.element[0].parentElement.clientHeight!=0&&t._isPercentHeight!=-1?r=t._isHeight?t.element[0].parentElement.clientHeight:t.element[0].parentElement.clientHeight/100*t._isPercentHeight:t._isHeight&&t.element[0].parentElement.clientHeight!=0&&(r=t.element[0].parentElement.clientHeight);t.element.height(r);o.indexOf("%")!=-1?(t._isPercentWidth=parseInt(o),e=t._isWidth?n(t.element).parent().width():u,u=t._isWidth?e:e/100*t._isPercentWidth):t.element[0].parentElement.clientWidth!=0&&t._isPercentWidth!=-1?u=t._isWidth?t.element[0].parentElement.clientWidth:t.element[0].parentElement.clientWidth/100*t._isPercentWidth:t._isWidth&&t.element[0].parentElement.clientWidth!=0&&(u=t.element[0].parentElement.clientWidth);t.element.width(u);t._toolbar._activeItem=i;t._toolbar._reSizeHandler();t.model.isResponsive&&t._renderedCanvasList&&t._isAutoZoom&&t._applyFitToWidthAuto();t._fitType!="fitToWidth"||t.model.isResponsive||t._applyFitToWidth();t._isWindowResizing=!0;t._applyLeftPosition()},_applyLeftPosition:function(){for(var t,i,n=1;n<=this._totalPages;n++)t=this._fitType=="fitToWidth"||this._isAutoZoom&&this._zoomVal<1?5:(this.element.width()-this._pageSize[n-1].PageWidth*this._zoomVal)/2,t<0&&(t=5),i=document.getElementById(this._id+"pageDiv_"+n),i.style.left=t+"px"},goToPage:function(n){this._gotoPageNo(n)},goToLastPage:function(){this._gotoLastPage()},goToFirstPage:function(){this._gotoFirstPage()},goToNextPage:function(){this._gotoNextPage()},goToPreviousPage:function(){this._gotoPreviousPage()},print:function(){this._print()},abortPrint:function(){this._printCancel()},showPrintTools:function(n){this._showPrintButton(n)},showPageNavigationTools:function(n){this._showPageNavigationControls(n)},showMagnificationTools:function(n){this._showZoomControl(n);this._showFittoPage(n)},showToolbar:function(n){this._showToolbar(n)},load:function(r){var e,u,o,f;if(this._showloadingIndicator(!0),this._fitType=null,this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitPage"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitWidth"),this._zoomVal=1,this._zoomLevel=3,n("#"+this._id+"_toolbar_zoomSelection_hidden").val("Auto"),this._ejDropDownInstance.model.value="Auto",this._initToolbar(),r)for(e=this._canvascount;e>=1;)n("#"+this._id+"pageDiv_"+e).remove(),e--;window.clearInterval(this._scrollTimer);u={};u.viewerAction="GetPageModel";u.controlId=this._id;u.pageindex="1";u.isInitialLoading="true";o=r.split("base64,")[1];o==i?(this._fileName=r,u.newFileName=this._fileName,this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPost("POST",this._actionUrl,JSON.stringify(u),"_getPageModel"):this._doAjaxPost("POST",this.model.serviceUrl,JSON.stringify({jsonResult:u}),"_getPageModel")):(f=this.model.serviceUrl,u.uploadedFile=o,this._pdfService==t.PdfViewer.PdfService.Local?(f=this.model.serviceUrl+"/FileUploadPostAction",this._doAjaxPost("POST",f,JSON.stringify(u),"_getPageModel")):(f=f.replace("PostViewerAction","FileUploadPostAction"),this._doAjaxPost("POST",f,JSON.stringify({jsonResult:u}),"_getPageModel")))},fitToPage:function(){this._applyFitToPage()},fitToWidth:function(){this._applyFitToWidth()},zoomIn:function(){this._applyLowerZoomIndex();this._zoomIn()},zoomOut:function(){this._applyHigherZoomIndex();this._zoomOut()},zoomTo:function(t){t<50?t=50:t>400&&(t=400);var i=parseInt(t)/100;t=="Auto"?(i=1,this.model.isResponsive=!0):(t=t+"%",this.model.isResponsive=!1);this._calculateZoomLevel(i);this._zoomContainer(i,!1);n("#"+this._id+"_toolbar_zoomSelection_hidden").val(t);this._ejDropDownInstance.model.selectedIndices[0]="";n("#"+this._id+"_toolbar_zoomSelection_popup li").removeClass("e-active");this._ejDropDownInstance.model.value=t}});t.PdfViewer.ToolbarItems={MagnificationTools:1,PageNavigationTools:2,PrintTools:4,All:7};t.PdfViewer.PdfService={Local:1,Remote:2};t.PdfViewer.LinkTarget={Default:1,NewTab:2,NewWindow:4};t.PdfViewer.Locale=t.PdfViewer.Locale||{};t.PdfViewer.Locale["default"]=t.PdfViewer.Locale["en-US"]={toolbar:{print:{headerText:"Print",contentText:"Print the PDF document."},first:{headerText:"First",contentText:"Go to the first page of the PDF document."},previous:{headerText:"Previous",contentText:"Go to the previous page of the PDF document."},next:{headerText:"Next",contentText:"Go to the next page of the PDF document."},last:{headerText:"Last",contentText:"Go to the last page of the PDF document."},zoomIn:{headerText:"Zoom-In",contentText:"Zoom in to the PDF document."},zoomOut:{headerText:"Zoom-Out",contentText:"Zoom out of the PDF document."},pageIndex:{headerText:"Page Number",contentText:"Current page number to view."},zoom:{headerText:"Zoom",contentText:"Zoom in or out on the PDF document."},fitToWidth:{headerText:"Fit to Width",contentText:"Fit the PDF page to the width of the container."},fitToPage:{headerText:"Fit to Page",contentText:"Fit the PDF page to the container."}}}})(jQuery,Syncfusion)});
