/*!
*  filename: ej.datepicker.min.js
*  version : 13.2.0.29
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.touch.min"],n):n()})(function(){(function(n,t,i){t.widget("ejDatePicker","ej.DatePicker",{element:null,_rootCss:"e-datepicker",model:null,validTags:["input","div","span"],_setFirst:!1,_cancelValue:!1,type:"editor",defaults:{dayHeaderFormat:"showheadermin",showPopupButton:!0,enableAnimation:!0,showFooter:!0,displayInline:!1,htmlAttributes:{},dateFormat:"",watermarkText:"Select date",displayDefaultDate:!0,value:null,minDate:new Date(1900,01,01),maxDate:new Date(2099,12,31),startLevel:"month",depthLevel:"",cssClass:"",startDay:-1,stepMonths:1,locale:"en-US",showOtherMonths:!0,enableStrictMode:!1,enablePersistence:!1,enabled:!0,width:"",height:"",enableRTL:!1,showRoundedCorner:!1,headerFormat:"MMMM yyyy",buttonText:"Today",readOnly:!1,specialDates:null,fields:{date:"date",tooltip:"tooltip",icon:"icon"},showTooltip:!0,highlightSection:"none",highlightWeekend:!1,validationRules:null,validationMessage:null,beforeDateCreate:null,open:null,close:null,select:null,change:null,focusIn:null,focusOut:null,create:null,destroy:null},dataTypes:{startDay:"number",stepMonths:"number",showOtherMonths:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",displayDefaultDate:"boolean",displayInline:"boolean",showPopupButton:"boolean",locale:"string",readOnly:"boolean",cssClass:"string",dateFormat:"string",watermarkText:"string",headerFormat:"string",buttonText:"string",specialDates:"data",showTooltip:"boolean",highlightSection:"enum",highlightWeekend:"boolean",enableAnimation:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},_setModel:function(n){var r=!1,f=!1,u=!1;for(var i in n)switch(i){case"dayHeaderFormat":this.model.dayHeaderFormat=n[i];r=!0;break;case"showPopupButton":this._renderDateIcon(n[i],!0);break;case"displayInline":this._setDisplayInline(n[i]);break;case"value":t.isNullOrUndefined(n.minDate)&&t.isNullOrUndefined(n.maxDate)?(this._setDateValue(n[i]),n[i]=this.model.value):this._updateDateValue(n[i]);u=!0;f=!0;r=!0;break;case"specialDates":this.model.specialDates=n[i];this._createSpecialDateObject();r=!0;break;case"fields":this.model.fields=n[i];this._mapField=this._getMapper();r=!0;break;case"showTooltip":this.model.showTooltip=n[i];r=!0;break;case"highlightWeekend":this.model.highlightWeekend=n[i];r=!0;break;case"highlightSection":this.model.highlightSection=n[i];r=!0;break;case"dateFormat":this.model.dateFormat=n[i];this._setDateValue(this.model.value);break;case"minDate":this._setMinDate(n[i]);n[i]=this.model.minDate;u=!0;r=!0;break;case"maxDate":this._setMaxDate(n[i]);n[i]=this.model.maxDate;u=!0;r=!0;break;case"locale":this.model.locale=n[i];this.model.startDay=t.isNullOrUndefined(this._options.startDay)&&this.model.startDay===this.culture.calendar.firstDay?-1:this.model.startDay;this.model.dateFormat=t.isNullOrUndefined(this._options.dateFormat)&&this.model.dateFormat===this.culture.calendar.patterns.d?"":this.model.dateFormat;this._setCulture(n[i]);this._setDateValue(this.model.value);n[i]=this.model.locale;r=!0;break;case"showOtherMonths":this.model.showOtherMonths=n[i];this._otherMonthsVisibility();break;case"enableStrictMode":this.model.enableStrictMode=n[i];u=!0;r=!0;break;case"validationRules":this.model.validationRules!=null&&(this.element.rules("remove"),this.model.validationMessage=null);this.model.validationRules=n[i];this._setValidation();break;case"validationMessage":this.model.validationMessage=n[i];this._setValidation();break;case"readOnly":this.model.readOnly=n[i];this._disbleMaualInput();break;case"width":this._setWidth(n[i]);break;case"height":this._setHeight(n[i]);break;case"cssClass":this._setSkin(n[i]);break;case"enableRTL":this._setRTL(n[i]);break;case"showRoundedCorner":this._setRoundedCorner(n[i]);break;case"enabled":n[i]?this.enable():this.disable();break;case"buttonText":this._setFooterText(n[i]);break;case"showFooter":this._enableFooter(n[i]);break;case"watermarkText":this.model.watermarkText=n[i];this._setWaterMark();break;case"startDay":(parseInt(n[i])<0||parseInt(n[i])>6)&&(n[i]=0);this.model.startDay=n[i];r=!0;break;case"startLevel":this.model.startLevel=n[i];r=!0;break;case"headerFormat":this.model.headerFormat=n[i];r=!0;break;case"depthLevel":this.model.depthLevel=n[i];r=!0;break;case"htmlAttributes":this._addAttr(n[i])}u&&(this._validateMinMaxDate(),n.value=this.model.value,n.maxDate=this.model.maxDate,n.minDate=this.model.minDate);this._setWaterMark();r&&this.isValidState&&this._refreshDatepicker();this._startLevel(this.model.startLevel);this._triggerChangeEvent();this._checkErrorClass()},observables:["value"],_destroy:function(){this._isOpen&&this.hide();this.sfCalendar.remove();this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove());this.element.removeClass("e-datepicker e-input")},_init:function(n){this._options=n;this._animating=!1;this._isSupport=document.createElement("input").placeholder==i?!1:!0;this._checkAttribute();this._setValues();this._createDatePicker();this.model.validationRules!=null&&(this._initValidator(),this._setValidation())},_initValidator:function(){var t=this;this.element.closest("form").validate({ignore:".e-hidden",errorClass:"e-validation-error",errorElement:"span",errorPlacement:function(t,i){n(t).insertAfter(i.closest(".e-widget"))}})},_setValidation:function(){var u,i,r,f;this.element.rules("add",this.model.validationRules);u=this.element.closest("form").validate();name=this.element.attr("name");u.settings.messages[name]={};for(i in this.model.validationRules)if(r=null,!t.isNullOrUndefined(this.model.validationRules[i])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[i])){u.settings.messages[name][i]=n.validator.messages[i];for(f in this.model.validationMessage)i==f?r=this.model.validationMessage[i]:""}else r=this.model.validationRules.messages[i];u.settings.messages[name][i]=r!=null?r:n.validator.messages[i]}},_checkAttribute:function(){for(var u=["min","max","readonly","disabled"],f=["minDate","maxDate","readOnly","enabled"],i,n,r=0;r<u.length;r++)i=this.element.attr(u[r]),n=f[r],t.isNullOrUndefined(i)||(t.isNullOrUndefined(this._options)?this.model[n]=n!="enabled"&&n!="readOnly"?new Date(i):n=="readOnly"?this.element.is("[readonly]"):!this.element.is("[disabled]"):t.isNullOrUndefined(this._options[n])&&(this.model[n]=n!="enabled"&&n!="readOnly"?new Date(i):n=="readOnly"?this.element.is("[readonly]"):!this.element.is("[disabled]")))},_updateDateValue:function(n){var t=this._checkDateObject(n);t!=null?(this.isValidState=!0,t==""?(this.element.val(""),this.model.value=""):(this.model.value=t,this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat)))):(typeof t=="string"&&this.model.enableStrictMode?this.element.val(n):this.element.val(""),this.model.value="",this.isValidState=this.element.val()==""?!0:!1);this._removeWatermark()},_setValues:function(){this.Date=new Date;this._id=this.element[0].id;this.isValidState=!0;this._setCulture(this.model.locale);this._setMinDate(this.model.minDate);this._setMaxDate(this.model.maxDate);this._calendarDate=this._zeroTime(new Date);(this.model.startDay<0||this.model.startDay>6)&&(this.model.startDay=0);this.Date.firstDayOfWeek=this.model.startDay;this.Date.fullYearStart="20";this._showHeader=!0;t.isNullOrUndefined(this.model.value)&&this.element[0].value!=""&&(this.model.value=this.element[0].value);this._validateMinMaxDate();this._dateValue=new Date(this._calendarDate.toString());this._isIE7=this._checkIE7();this._isIE8=t.browserInfo().name=="msie"&&t.browserInfo().version=="8.0"?!0:!1;this._getInternalEvents=!1;this._flag=!0;this._ejHLWeekEnd=!1;this._isOpen=!1;this._prevDate=null;this._isFocused=!1},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="required"?i.element.attr(t,n):t=="class"?i.wrapper.addClass(n):t=="disabled"&&n=="disabled"?i.disable():t=="readOnly"&&n=="readOnly"?i.model.readOnly=!0:i.wrapper.attr(t,n)})},_createDatePicker:function(){this._createWrapper();this._wireEvents();this.model.displayInline&&this.show();this.model.enableRTL&&this._setRTL(!0);this.model.showRoundedCorner&&this._setRoundedCorner(!0)},_checkNameAttr:function(){!this.element.attr("name")&&this._isInputBox()&&this.element.attr("name",this.element[0].id);this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("name",this.element[0].id)},_createWrapper:function(){if(this._mapField=this._getMapper(),this.model.specialDates&&this._createSpecialDateObject(),this._isInputBox()&&(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0"}),this.wrapper=t.buildTag("span.e-datewidget e-widget "+this.model.cssClass),this.innerWrapper=t.buildTag("span.e-in-wrap e-box"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this.innerWrapper.addClass("e-padding"),this.dateIcon=t.buildTag("span.e-select#"+this._id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-icon e-date","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element)),!this._isSupport||this.model.displayInline&&!this._isInputBox()){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element);this._isInputBox()&&this._hiddenInput.val(this.model.watermarkText);this._hiddenInput.css("display","block");var i=this;n(this._hiddenInput).focus(function(){i.element.focus()})}this._checkNameAttr();this._setHeight(this.model.height);this._setWidth(this.model.width);this._id&&n("#e-"+this._id).remove();this.sfCalendar=t.buildTag("div.e-datepicker e-popup e-widget "+this.model.cssClass+" e-calendar "+(this.model.specialDates?this.model.specialDates[0][this._mapField._icon]?"e-icons ":"":""),"",{},{id:this._id?"e-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}).insertBefore(this.element);this.popup=this.sfCalendar;this._resizeCalender();this._setDateValue(this.model.value);this.model.displayDefaultDate||this.element.val("");this._preValue=this._parseDate(this.element.val(),this.model.dateFormat);this._setWaterMark();this._createCalender();this._setDisplayInline(this.model.displayInline);this.model.readOnly&&this._disbleMaualInput();this.model.enabled?this.model.enabled&&n(this.element).hasClass("e-disable")&&this.enable():this.disable();this._layoutChanged();this._checkErrorClass();this._addAttr(this.model.htmlAttributes)},_isInputBox:function(){return this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))},_renderDateIcon:function(n,t){t&&this.model.showPopupButton==n||(!n&&this.dateIcon?(this._bindInputEvent(),this.dateIcon.css("display","none"),this.innerWrapper.removeClass("e-padding")):(this.innerWrapper&&(this.innerWrapper.addClass("e-padding"),this.dateIcon.css("display","block")),this.model.displayInline||this._bindDateButton()),this.model.showPopupButton=n)},_resizeCalender:function(){this.model.dayHeaderFormat=="showheadershort"||this.model.dayHeaderFormat=="showheadermin"||this.model.dayHeaderFormat=="showheadernone"?this.sfCalendar.removeClass("e-headerlong"):this.model.dayHeaderFormat=="showheaderlong"&&this.sfCalendar.addClass("e-headerlong")},_setWidth:function(n){n?this.wrapper?this.wrapper.width(n):this.element.width(n):this.model.width=this.wrapper?this.wrapper.outerWidth():this.element.width()},_setHeight:function(n){n?this.wrapper?this.wrapper.height(n):this.element.height(n):this.model.height=this.wrapper?this.wrapper.outerHeight():this.element.height();this._isIE7&&this.element.height(this.innerWrapper.height())},_setRTL:function(n){n?(this.wrapper&&this.wrapper.addClass("e-rtl"),this.sfCalendar.addClass("e-rtl")):(this.wrapper&&this.wrapper.removeClass("e-rtl"),this.sfCalendar.removeClass("e-rtl"))},_setRoundedCorner:function(n){n?(this.innerWrapper&&this.innerWrapper.addClass("e-corner"),this.sfCalendar.addClass("e-corner")):(this.innerWrapper&&this.innerWrapper.removeClass("e-corner"),this.sfCalendar.removeClass("e-corner"))},_refreshDatepicker:function(){this._setDateValue(this.element.val());n(".e-text",this.sfCalendar).text(this._formatter(this._calendarDate,this.model.headerFormat));this._resizeCalender();this._dateValue=new Date(this._calendarDate.toString());this._hoverDate=this._calendarDate.getDate()-1;this._renderCalendar(this,this._dateValue);this._setFooterText(this.model.buttonText);this._enableFooter(this.model.showFooter);this._layoutChanged()},_setFooterText:function(t){n(".e-footer-text",this.sfCalendar).html(t)},_setSkin:function(n){this.wrapper?(this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(n)):(this.element.removeClass(this.model.cssClass),this.element.addClass(n));this.sfCalendar.removeClass(this.model.cssClass);this.sfCalendar.addClass(n)},_setDisplayInline:function(t){this.model.displayInline=t;t&&this._isInputBox()?(this.sfCalendar.insertAfter(this.wrapper),this._setDatePickerPosition()):t?(this.element.append(this.sfCalendar),this._isSupport&&this._isInputBox()||this._hiddenInput.css("display","none")):(this.sfCalendar.css("display","none"),n("body").append(this.sfCalendar),this._isOpen=!1);t?(this.show(),this._off(this.dateIcon,"mousedown",this._showDatePopUp),this.element.unbind("mousedown",n.proxy(this._showDatePopUp,this))):this._isInputBox()&&this._renderDateIcon(this.model.showPopupButton,!1)},_disbleMaualInput:function(){this.model.readOnly?(n(this.element).attr("readonly","readonly"),this.model.displayInline||this.hide()):n(this.element).removeAttr("readonly")},_checkDateObject:function(n){if(n&&(typeof JSON!="object"||JSON.stringify(n)!=="{}")){if(!(n instanceof Date)){var t=this._parseDate(n);n=t!=null?t:this._prevDate==null?this.element.val()!=n&&this.element.val()==""?new Date(n):null:null}}else return"";return isNaN(Date.parse(n))?null:this._dateValue=this._calendarDate=this._zeroTime(n)},_checkInstanceType:function(n){if(n=this._stringToObject(n),n)n instanceof Date||(n=this._parseDate(n));else return null;return isNaN(Date.parse(n))?null:this._zeroTime(n)},_stringToObject:function(n){if(typeof n=="string"){var t=Globalize.parseDate(n,this.model.dateFormat);n=t!=null?t:new Date(n)}return n},_validateMinMaxDate:function(){var n=!1,t=!1;this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate);this.model.enableStrictMode?this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.minDate,this.isValidState=!1,t=!0):this.model.value>this.model.maxDate?(this._calendarDate=this.model.maxDate,this.isValidState=!1,t=!0):this.isValidState=!0:this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate):(this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.value=this.model.minDate,n=!0):this.model.value>this.model.maxDate&&(this._calendarDate=this.model.value=this.model.maxDate,n=!0):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0);n&&this.element.val(this._formatter(this.model.value,this.model.dateFormat));t&&this._getInternalEvents&&this._trigger("outOfRange")},_setCulture:function(n){this.culture=Globalize.culture(n);this.culture&&(this.model.locale=this.culture.name=="en"?"en-US":this.culture.name,this.Date.dayNames=this.culture.calendar.days.names,this.Date.dayNamesMin=this.culture.calendar.days.namesShort,this.Date.abbrDayNames=this.culture.calendar.days.namesAbbr,this.Date.monthNames=this.culture.calendar.months.names,this.Date.abbrMonthNames=this.culture.calendar.months.namesAbbr,this.Date.format=this.culture.calendar.patterns.d,this.model.dateFormat==""&&(this.model.dateFormat=this.culture.calendar.patterns.d),this.model.startDay==-1&&(this.model.startDay=this.culture.calendar.firstDay));this._separator=this._getSeparator()},_setWaterMark:function(){if(this.element!=null&&this.element.hasClass("e-input"))return this.model.watermarkText&&this.element.val()==""&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||this.element.val()!=""?n(this.element).attr("placeholder",this.model.watermarkText):this._hiddenInput.css("display","block").val(this.model.watermarkText),!0},_setDatePickerPosition:function(){var t=this.element.is("input")?this.wrapper:this.element,i=this._getOffset(t),f,h=n(document).scrollTop()+n(window).height()-(i.top+n(t).outerHeight()),c=i.top-n(document).scrollTop(),u=this.sfCalendar.outerHeight(),e=this.sfCalendar.outerWidth(),r=i.left,o=t.outerHeight(),v=(o-t.height())/2,l=this._getZindexPartial(),s=3,a=u<h||u>c?i.top+o+s:i.top-u-s;f=n(document).scrollLeft()+n(window).width()-r;(this.model.enableRTL||e>f&&e<r+t.outerWidth())&&(r+=this.wrapper.width()-this.sfCalendar.width());this.sfCalendar.css({left:r+"px",position:"absolute",top:a+"px","z-index":l})},_getOffset:function(n){return t.util.getOffset(n)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.sfCalendar)},_setMinDate:function(n){this.model.minDate=this._checkInstanceType(n);this.model.minDate||(this.model.minDate=new Date("11/31/1899"))},_setMaxDate:function(n){this.model.maxDate=this._checkInstanceType(n);this.model.maxDate||(this.model.maxDate=new Date("12/31/2099"))},_setDateValue:function(n){var t=this._checkDateObject(n);t!=null?(this.isValidState=!0,t==""?(this.element.val(""),this.model.value=""):(this.model.value=t,this._validateMinMaxDate(),this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat)))):(typeof n=="string"&&this.model.enableStrictMode?this.element.val(n):this.element.val(""),this.model.value="",this.isValidState=this.element.val()==""?!0:!1);this._removeWatermark()},_updateInputVal:function(){var n=this._validateValue();n!=null&&(this.sfCalendar.find(".e-datepicker-days").is(":visible")?this._refreshDatepicker():this.model.displayDefaultDate&&this._setDateValue(n))},_validateInputVal:function(){var n=this._validateValue();n!=null&&(this.model.enableStrictMode||(n<=this.model.maxDate&&n>=this.model.minDate?this.isValidState=!0:(this.model.value="",this.isValidState=!0)))},_validateValue:function(){return this._parseDate(this.element.val())},_getSeparator:function(){var t,n;for(formats=this.culture?this.culture.calendar.patterns.d:this.model.dateFormat,t=new RegExp("^[a-zA-Z0-9]+$"),n=0;n<formats.length;n++)if(!t.test(formats[n]))return formats[n]},_checkIE7:function(){if(navigator.appName=="Microsoft Internet Explorer"){var t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),n=-1;if(t.exec(navigator.userAgent)!=null&&(n=parseFloat(RegExp.$1)),n>=7&&n<8)return!0}return!1},_isValidDate:function(n){return n&&typeof n.getTime=="function"&&isFinite(n.getTime())},_formatter:function(n,t){var i=this._checkFormat(t);return Globalize.format(n,i,this.model.locale)},_parseDate:function(n){var t=this._checkFormat(this.model.dateFormat);return Globalize.parseDate(n,t,this.model.locale)},_checkFormat:function(n){var t=this,i=this._regExp();return n.replace(i,function(n){return n==="/"?Globalize.culture(t.model.locale).calendars.standard["/"]!=="/"?"'/'":n:n})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},_zeroTime:function(n){var t=typeof n=="string"?this._parseDate(n):new Date(n);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_formatDate:function(n){return this._formatter(n,this.Date.format)},_getDaysInMonth:function(n){return[31,this.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][n.getMonth()]},_addDays:function(n,t){return n.setDate(n.getDate()+t),n},_addYears:function(n,t){return n.setFullYear(n.getFullYear()+t),n},_addMonths:function(n,t){var i=n.getDate();return n.setMonth(n.getMonth()+t),i>n.getDate()&&this._addDays(n,-n.getDate()),n},_isWeekend:function(n){return n.getDay()==0||n.getDay()==6},_isSpecialDates:function(n){if(this.model.specialDates)for(var t=0;t<this.model.specialDates.length;t++)if(this.model.specialDates[t]&&n.getDate()==this.model.specialDates[t][this._mapField._date].getDate()&&n.getMonth()==this.model.specialDates[t][this._mapField._date].getMonth()&&n.getFullYear()==this.model.specialDates[t][this._mapField._date].getFullYear())return this._getIndex=t,!0;return!1},_getMapper:function(){var n=this.model.fields,t={_date:null,_tooltip:null,_icon:null};return t._date=n&&n.date?n.date:"date",t._tooltip=n&&n.tooltip?n.tooltip:"tooltip",t._icon=n&&n.icon?n.icon:"icon",t},_createSpecialDateObject:function(){for(var n=0;n<this.model.specialDates.length;n++)this.model.specialDates[n][this._mapField._date]=this._checkInstanceType(this.model.specialDates[n][this._mapField._date])},_getMonthName:function(n,t){return n?this.Date.abbrMonthNames[t.getMonth()]:this.Date.monthNames[t.getMonth()]},_displayNewMonth:function(n,t){return this._setDisplayedMonth(this.displayedMonth+n,this.displayedYear+t,!0),!1},_setDisplayedMonth:function(n,t,r){var f,e,u,s,h,o;this.model.minDate!=i&&this.model.maxDate!=i&&(f=new Date(this.model.minDate.getTime()),f.setDate(1),e=new Date(this.model.maxDate.getTime()),e.setDate(1),!n&&!t||isNaN(n)&&isNaN(t)?(u=this._zeroTime(new Date),u.setDate(1)):u=isNaN(n)?new Date(t,this.displayedMonth,1):isNaN(t)?new Date(this.displayedYear,n,1):new Date(t,n,1),u.getTime()<f.getTime()?u=f:u.getTime()>e.getTime()&&(u=e),s=this.displayedMonth,h=this.displayedYear,this.displayedMonth=u.getMonth(),this.displayedYear=u.getFullYear(),o=u,r&&(this.displayedMonth!=s||this.displayedYear!=h)&&(this._renderCalendar(this,o),this._dateValue=o,this._trigger("monthChanged",[this.displayedMonth,this.displayedYear])))},_clearSelected:function(){this.numSelected=0;this.model.highlightSection=="week"?n("td.e-active",this.sfCalendar).removeClass("e-active").attr("aria-selected",!1).parent().removeClass("e-selected-week"):this.model.highlightSection=="month"?n("td.e-active",this.sfCalendar).removeClass("e-active").attr("aria-selected",!1).parent().parent().removeClass("e-selected-month"):this.model.highlightSection=="workdays"?n("td.e-active",this.sfCalendar).removeClass("e-active").attr("aria-selected",!1).parent().removeClass("e-work-week"):n("td.e-active",this.sfCalendar).removeClass("e-active").attr("aria-selected",!1)},_addSelected:function(){this.model.highlightSection=="week"?n("td.e-active",this.sfCalendar).parent().addClass("e-selected-week"):this.model.highlightSection=="month"?n("td.e-active, this.sfCalendar").parent().parent().addClass("e-selected-month"):this.model.highlightSection=="workdays"&&n("td.e-active",this.sfCalendar).parent().addClass("e-work-week")},_hideOtherMonths:function(t){n("td.other-month",t).css("visibility","hidden")},_showOtherMonths:function(t){n("td.other-month",t).css({visibility:"visible"})},_otherMonthsVisibility:function(){this.model.showOtherMonths?this._showOtherMonths(this.sfCalendar):this._hideOtherMonths(this.sfCalendar)},_createCalender:function(){t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-left-arrow").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").text(this._formatter(this._calendarDate,this.model.headerFormat)).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{})).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-right-arrow").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this.sfCalendar);this._enableHeader(this._showHeader);var i=t.buildTag("table.e-dp-viewdays","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{});this.sfCalendar.append(i);this._renderCalendar(this);this._startLevel(this.model.startLevel);t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this.sfCalendar);n(".e-footer-text",this.sfCalendar).html(this.model.buttonText);this._enableFooter(this.model.showFooter)},_enableHeader:function(t){t?n(".e-header",this.sfCalendar).show():n(".e-header",this.sfCalendar).hide()},_enableFooter:function(t){t?n(".e-footer",this.sfCalendar).show():n(".e-footer",this.sfCalendar).hide()},_checkArrows:function(n,t){this._preArrowCondition(n,this.model.minDate.getFullYear());this._nextArrowCondition(t,this.model.maxDate.getFullYear())},_checkDateArrows:function(){this._preArrowCondition(this._tempMinDate,this.model.minDate);this._nextArrowCondition(this._tempMaxDate,this.model.maxDate)},_preArrowCondition:function(n,t){n<=t?this.sfCalendar.find(".e-left-arrow").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-left-arrow").removeClass("e-disable").attr({"aria-disabled":!1})},_nextArrowCondition:function(n,t){n>=t?this.sfCalendar.find(".e-right-arrow").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-right-arrow").removeClass("e-disable").attr({"aria-disabled":!1})},_previousNextHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t.preventDefault();var i=n(t.target).is("a")?n(t.target.parentNode):n(t.target),r=i.hasClass("e-prev")?!0:!1;this._processNextPrevDate(r)},_processNextPrevDate:function(t){var i,u,o,e,f,r;if(t&&this.sfCalendar.find(".e-left-arrow").hasClass("e-disable")||!t&&this.sfCalendar.find(".e-right-arrow").hasClass("e-disable"))return!1;i=n("table",this.sfCalendar);o=i.get(0).className;switch(o){case"e-dp-viewdays":if(e=this.model.stepMonths,t){if(this._dateValue<=this.model.minDate)return this._flag=!1,!1}else if(this._dateValue>=this.model.maxDate)return this._flag=!1,!1;this._flag=!0;this._addMonths(this._dateValue,t?-e:e);this._clickedDate&&(this._calendarDate=this._clickedDate);this._renderCalendar(this,this._dateValue);n(".e-text",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat));this._addFocus("day",this._hoverDate);this._preArrowCondition(this._dateValue,this.model.minDate);this._nextArrowCondition(this._dateValue,this.model.maxDate);break;case"e-dp-viewmonths":if(t){if(this._dateValue.getFullYear()<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(this._dateValue.getFullYear()>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0;this._addYears(this._dateValue,t?-1:1);this._renderCalendar(this,this._dateValue);u=this._dateValue.getFullYear();n(".e-text",this.sfCalendar).text(u);n("tbody,tr.e-week-header",i).not(".e-datepicker-months").hide();n(n(i).find(".e-datepicker-months")).show();this._addFocus("month",this._hoverMonth);this._checkArrows(u,u);break;case"e-dp-viewyears":if(t){if(parseInt(n("td.e-year-first:first").text())<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(parseInt(n("td.e-year-last:first").prev().text())>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0;this._dateValue.setFullYear(this._dateValue.getFullYear()+(t?-10:10));this._renderCalendar(this,this._dateValue);r=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1);n(".e-text",this.sfCalendar).text(r+1+" - "+(r+10));n("tbody,tr.e-week-header",i).not(".e-datepicker-years").hide();n(n(i).find(".e-datepicker-years")).show();this._addFocus("year",this._hoverYear);this._checkArrows(r+1,r+10);break;case"e-dp-viewallyears":if(t){if(f=parseFloat(n("td.e-allyear-first",i.get(0)).text().split("-")[1]),f<=this.model.minDate.getFullYear())return this._flag=!1,!1;this._flag=!0}else{if(f=parseFloat(n("td.e-allyear-last",i.get(0)).prev().text().split("-")[1]),f>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0}this._dateValue.setFullYear(f+(t?-10:10));this._renderCalendar(this,this._dateValue);r=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%100+1);u=parseFloat(n("td.e-allyear-last",i.get(0)).prev().text().split("-")[1]);n(".e-text",this.sfCalendar).text(r+1+" - "+u);n("tbody,tr.e-week-header",i).not(".e-datepicker-allyears").hide();n(n(i).find(".e-datepicker-allyears")).show();this._addFocus("allyear",this._hoverAllYear);this._checkArrows(r+1,u)}this._layoutChanged()},_addFocus:function(t,i){var f="e-current-"+t,u,r;return t=="day"&&(f="current-month"),u=this.sfCalendar.find("tbody tr td."+f),t=="month"&&n(u).each(function(t,r){if(parseInt(n(r).attr("index"))==parseInt(i)){i=t;return}}),r=u[i],r||(r=u.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),n(r).addClass("e-state-hover"),n(r)},_setFocusByName:function(t,i){var u=this.sfCalendar.find("tbody tr td.e-current-"+t),f,r;return n(u).each(function(n,t){if(parseInt(t.innerHTML)==parseInt(i)){f=n;return}}),r=u[f],r||(r=u.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),n(r).addClass("e-state-hover"),f},_getHeaderTxt:function(){return this.sfCalendar.find(".e-text").text()},_forwardNavHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t&&t.preventDefault();var r=n("table",this.sfCalendar),u=n("table",this.sfCalendar).get(0).className,f=this,i;switch(u){case"e-dp-viewdays":this._hoverMonth=this._getDateObj(r.find(".e-state-hover")).getMonth()||this._getDateObj(r.find(".e-active")).getMonth()||0;this._startLevel("year");this._addFocus("month",this._hoverMonth);break;case"e-dp-viewmonths":i=this._getHeaderTxt();this._startLevel("decade");this._hoverYear=this._setFocusByName("year",i);break;case"e-dp-viewyears":i=this._getHeaderTxt();this._startLevel("century");this._hoverAllYear=this._setFocusByName("allyear",i)}this._layoutChanged()},_cellSelection:function(){var r=n("table",this.sfCalendar),i=n("table",this.sfCalendar).get(0).className,t;switch(i){case"e-dp-viewmonths":this._hoverMonth=this._addFocus("month",this._dateValue.getMonth());break;case"e-dp-viewyears":this._hoverYear=this._setFocusByName("year",this._dateValue.getFullYear());break;case"e-dp-viewallyears":t=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1);this._hoverAllYear=this._setFocusByName("allyear",t+1+" - "+t+10)}this._layoutChanged()},_backwardNavHandler:function(i){var r,u;if(this._animating=!0,this.model.readOnly||!this.model.enabled)return!1;i.type?(i.preventDefault(),r=n(i.currentTarget)):r=i;var f=n("table",this.sfCalendar),o,s=n("table",this.sfCalendar).get(0).className,e=this;switch(s){case"e-dp-viewmonths":f.removeClass("e-dp-viewmonths").addClass("e-dp-viewdays");this._dateValue=new Date(this._dateValue.getFullYear(),parseInt(n(r).attr("index")),1);this._renderCalendar(this,this._dateValue);n("tbody",f).not(".e-datepicker-days,.e-week-header").hide();n(n(f).find(".e-datepicker-days,.e-week-header")).fadeIn("fast",function(){e._addFocus("day",e._hoverDate||0);e._animating=!1});n(".e-text",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat));break;case"e-dp-viewyears":f.removeClass("e-dp-viewyears").addClass("e-dp-viewmonths");this._dateValue.setFullYear(parseInt(r.text()));this._renderCalendar(this,this._dateValue);n("tbody,tr.e-week-header",f).not(".e-datepicker-months").hide();t.isNullOrUndefined(this._hoverMonth)&&!t.isNullOrUndefined(this._dateValue)&&(this._hoverMonth=this._dateValue.getMonth());n(n(f).find(".e-datepicker-months")).fadeIn("fast",function(){e._addFocus("month",e._hoverMonth||0);e._animating=!1});o=r.text();n(".e-text",this.sfCalendar).text(o);this._checkArrows(o,o);break;case"e-dp-viewallyears":u=r.text().split("-");f.removeClass("e-dp-viewallyears").addClass("e-dp-viewyears");u[0]<this.model.minDate.getFullYear()?u[0]=this.model.minDate.getFullYear().toString():u[0]>this.model.maxDate.getFullYear()&&(u[0]=this.model.maxDate.getFullYear().toString());this._renderCalendar(this,new Date(u[0],0,1));n("tbody,tr.e-week-header",f).not(".e-datepicker-years").hide();n(n(f).find(".e-datepicker-years")).fadeIn("fast",function(){e._addFocus("year",e._hoverYear||0);e._animating=!1});n(".e-text",this.sfCalendar).text(u[0]+" - "+u[1]);this._checkArrows(u[0],u[1]);break;default:this._clearSelected();this.sfCalendar.find("table td").removeClass("e-state-hover");r.not("td.other-month").addClass("e-active e-state-hover").attr("aria-selected",!0);this._addSelected();this._hoverDate=this._getDateObj(r).getDate()-1;this._dateValue=new Date(r.attr("date"));this._clickedDate=new Date(r.attr("date"));this._animating=!1}this._layoutChanged()},_startLevel:function(t){var i=n("table",this.sfCalendar),o=n(".e-text",this.sfCalendar),r,f,u=this._dateValue,s,e;switch(t){case"decade":i.removeClass("e-dp-viewmonths e-dp-viewdays").addClass("e-dp-viewyears");n("tbody,tr.e-week-header",i).not(".e-datepicker-years").hide();n(n(i).find(".e-datepicker-years")).show();u=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:u;e=parseInt(u.getFullYear())-(parseInt(u.getFullYear())%10+1);r=e+1;f=e+10;o.text(r+" - "+f);this._checkArrows(r,f);this._hoverYear=this._setFocusByName("year",u.getFullYear());break;case"century":this._calendarDate<this._dateValue||this._renderCalendar(this,u);i.removeClass("e-dp-viewyears e-dp-viewdays e-dp-viewmonths").addClass("e-dp-viewallyears");n("tbody,tr.e-week-header",i).not(".e-datepicker-allyears").hide();n(n(i).find(".e-datepicker-allyears")).show();r=parseFloat(n("td.e-allyear-first",i.get(0)).text().split("-")[1])+1;f=parseFloat(n("td.e-allyear-last",i.get(0)).prev().text().split("-")[1]);s=r+" - "+f;o.text(s);this._checkArrows(r,f);e=parseInt(u.getFullYear())-(parseInt(u.getFullYear())%10+1);this._hoverAllYear=this._setFocusByName("allyear",e+1+" - "+(e+10));break;case"year":i.removeClass("e-dp-viewdays").addClass("e-dp-viewmonths");n("tbody,tr.e-week-header",i).hide();n(n(i).find(".e-datepicker-months")).show();r=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate.getFullYear():u.getFullYear();o.text(r);this._checkArrows(r,r);this._hoverMonth=u.getMonth();this._addFocus("month",this._hoverMonth);break;case"month":i.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewmonths").addClass("e-dp-viewdays ")}},_depthLevel:function(t){var i=this.sfCalendar;switch(t){case"year":n(i.find(".e-current-year,.e-current-allyear")).bind("click",n.proxy(this._backwardNavHandler,this));this._on(n(".e-current-month",this.sfCalendar),"click",n.proxy(this._onDepthSelectHandler,this));break;case"decade":n(i.find(".e-current-allyear")).bind("click",n.proxy(this._backwardNavHandler,this));n(".e-current-year",this.sfCalendar).bind("click",n.proxy(this._onDepthSelectHandler,this));break;case"century":n(i.find(".e-current-allyear")).bind("click",n.proxy(this._onDepthSelectHandler,this));break;case"month":this._on(i.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",n.proxy(this._backwardNavHandler,this));this._on(i.find(".current-month , .other-month"),"click",n.proxy(this._onSetCancelDateHandler,this))}},_onDepthSelectHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;n(t.target).hasClass("e-current-month")?this._dateValue=new Date(this._dateValue.setMonth(parseInt(t.target.attributes.index.value))):n(t.target).hasClass("e-current-year")?this._dateValue=new Date(this._dateValue.setFullYear(parseInt(t.target.innerHTML))):n(t.target).hasClass("e-current-allyear")&&(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(t.target.innerHTML))));this._onSetCancelDateHandler(t)},_datepickerMonths:function(t,i,r){for(var e,o,u,s,h=function(n){return document.createElement(n)},f=0,c=0;c<3;c++){for(e=n(h("tr")),o=0;o<4;o++)u=n(h("td")).addClass("e-current-month e-state-default").attr({index:f}).attr(this._isIE8?{unselectable:"on"}:{}).html(this.Date.abbrMonthNames[f++]),r.getFullYear()<this.model.minDate.getFullYear()||r.getFullYear()>this.model.maxDate.getFullYear()?(u.addClass("e-hidedate e-disable"),u.removeClass("e-current-month")):(r.getFullYear()<=this.model.minDate.getFullYear()&&f<this.model.minDate.getMonth()+1||r.getFullYear()>=this.model.maxDate.getFullYear()&&f>this.model.maxDate.getMonth()+1)&&(u.addClass("e-hidedate e-disable"),u.removeClass("e-current-month")),e.append(u);t.append(e)}i.append(t);s=r.getFullYear();this._checkArrows(s,s)},_datepickerYears:function(t,i,r){for(var e,s,h,u,c=function(n){return document.createElement(n)},l=parseInt(r)-(parseInt(r)%10+1),f=[],o=0;o<12;o++)f.push(l+o);for(e=0,s=0;s<3;s++){for(h=n(c("tr")),o=0;o<4;o++)u=n(c("td")),u.attr(this._isIE8?{unselectable:"on"}:{}),e==0?(parseInt(f[e])<=this.model.minDate.getFullYear()?u.css("visibility","hidden"):u.css("visibility","visible"),u.addClass("e-year-first e-current-year ")):e==11?(parseInt(f[e])>=this.model.maxDate.getFullYear()?u.css("visibility","hidden"):u.css("visibility","visible"),u.addClass("e-year-last e-current-year ")):u.addClass("e-current-year e-state-default"),(f[e]<this.model.minDate.getFullYear()||f[e]>this.model.maxDate.getFullYear())&&(u.addClass("e-hidedate e-disable"),u.removeClass("e-current-year")),u.html(f[e++]),h.append(u);t.append(h)}i.append(t);this._checkArrows(f[0],f[f.length])},_datepickerAllYears:function(t,i,r){for(var f,h,c,u,o=parseInt(r)-(parseInt(r)%100+10),l=o,e=[],s=0;s<12;s++)e.push(parseInt(o)+"-\n"+parseInt(o+9)),o=o+10;for(f=0,h=0;h<3;h++){for(c=n(document.createElement("tr")),s=0;s<4;s++)u=n(document.createElement("td")),u.attr(this._isIE8?{unselectable:"on"}:{}),f==0?(parseInt(e[f].split("-\n")[1])<=this.model.minDate.getFullYear()?u.css("visibility","hidden"):u.css("visibility","visible"),u.addClass("e-allyear-first e-current-allyear ")):f==11?(parseInt(e[f].split("-\n")[0]-1)>=this.model.maxDate.getFullYear()?u.css("visibility","hidden"):u.css("visibility","visible"),u.addClass("e-allyear-last e-current-allyear ")):u.addClass("e-current-allyear e-state-default"),(parseInt(e[f].split("-\n")[1])<this.model.minDate.getFullYear()||parseInt(e[f].split("-\n")[0])>this.model.maxDate.getFullYear())&&(u.addClass("e-hidedate e-disable"),u.removeClass("e-current-allyear")),u.html(e[f++]),c.append(u);t.append(c)}i.append(t)},_renderHeader:function(i){var c=n(document.createElement("thead")),e=Globalize.culture(this.model.locale).calendars.standard.days,o,f,r,u,s,h;if(i.model.dayHeaderFormat!="showheadernone")for(o=t.buildTag("tr.e-week-header").attr({role:"columnheader"}).attr(this._isIE8?{unselectable:"on"}:{}),f=this.Date.firstDayOfWeek;f<this.Date.firstDayOfWeek+7;f++)r=f%7,u=e.names[r],s=i.model.dayHeaderFormat=="showheadershort"?e.namesAbbr[r]:i.model.dayHeaderFormat=="showheaderlong"?u:e.namesShort[r],h=t.buildTag("th","",{},{scope:"col",abbr:u,date:u,title:this._formatter(u,"dddd"),"class":r==0||r==6?"e-week-end":"e-week-day"}).attr(this._isIE8?{unselectable:"on"}:{}).html(s),o.append(h);return c.append(o)},_renderCalendar:function(r,u){var k=this,h,o,e,g,nt,tt,c,p,b;r=n.extend({},t.DatePicker.prototype.defaults,r);this.Date.firstDayOfWeek=this.model.startDay;h=u?u:this._calendarDate?this._calendarDate:k._zeroTime(new Date);o=n("table",this.sfCalendar);o.empty();o.append(this._renderHeader(r));e=t.buildTag("tbody.e-datepicker-allyears","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});this._datepickerAllYears(e,o,h.getFullYear());e=t.buildTag("tbody.e-datepicker-years","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});this._datepickerYears(e,o,h.getFullYear());var d=r.model.month==i?h.getMonth():r.model.month,rt=r.model.year||h.getFullYear(),f=new Date(rt,d,1,0,0,0),l=this.Date.firstDayOfWeek-f.getDay()+1;l>1&&(l-=7);g=Math.ceil((-1*l+1+this._getDaysInMonth(f))/7);this._addDays(f,l-1);nt=k._zeroTime(new Date);tt=this._calendarDate;e=t.buildTag("tbody.e-datepicker-months","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});this._datepickerMonths(e,o,h);e=t.buildTag("tbody.e-datepicker-days","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});for(var ut=0,it=!0,y=!0;ut++<g;){for(c=jQuery(document.createElement("tr")),p=0;p<7;p++){var a=f.getMonth()==d,w=this._isSpecialDates(f),v=this._getIndex,s=n(document.createElement("td")).html(w?"<span><\/span><span>"+f.getDate()+"<\/span>":f.getDate()+"").attr({date:f.toDateString(),title:this.model.showTooltip?w&&this.model.specialDates[v][this._mapField._tooltip]?this.model.specialDates[v][this._mapField._tooltip]:this._formatter(f,"ddd MMM dd yyyy"):"","aria-selected":!1,role:"gridcell"}).attr(this._isIE8?{unselectable:"on"}:{}).addClass((a?"current-month e-state-default ":"other-month e-state-default ")+(this._isWeekend(f)?this._ejHLWeekEnd?"e-dp-weekend e-week-end ":this.model.highlightWeekend?"e-week-end ":"":"e-week-day ")+(w?this.model.specialDates[v][this._mapField._icon]?"flag "+this.model.specialDates[v][this._mapField._icon]+" ":"e-special-day ":"")+(a&&f.getTime()==nt.getTime()?"today ":""));s.find("span:first-of-type ").addClass("e-image ");tt.getTime()==f.getTime()&&a&&(s.addClass("e-active").attr({"aria-selected":!0}),this.model.highlightSection=="week"&&c.addClass("e-selected-week"),this.model.highlightSection=="month"&&e.addClass("e-selected-month"),this.model.highlightSection=="workdays"&&c.addClass("e-work-week"),this._hoverDate||(s.addClass("e-state-hover"),this._hoverDate=f.getDate()-1));b=!0;(f<this.model.minDate||f>this.model.maxDate)&&(s.addClass("e-hidedate e-disable"),s.removeClass("current-month other-month"),b=y=!1);a&&(b&&it&&(this._tempMinDate=f,it=!1,y=!0),y&&(this._tempMaxDate=f));this._trigger("beforeDateCreate",{date:f,element:s});c.append(s);f=new Date(f.getFullYear(),f.getMonth(),f.getDate()+1,0,0,0)}e.append(c)}o.append(e);this._isIE8||this._isIE7?n(e).css("display","block"):n(e).fadeIn("fast");this.model.startLevel===this.model.depthLevel?this._depthLevel(this.model.depthLevel):this.model.depthLevel!="month"&&this.model.depthLevel!=""?this.model.startLevel=="century"?this._depthLevel(this.model.depthLevel):this.model.startLevel=="decade"&&this.model.depthLevel!="century"?this._depthLevel(this.model.depthLevel):this.model.startLevel=="year"&&this.model.depthLevel!="decade"&&this.model.depthLevel!="century"?this._depthLevel(this.model.depthLevel):(this._on(o.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",n.proxy(this._backwardNavHandler,this)),this._on(o.find(".current-month , .other-month"),"click",n.proxy(this._onSetCancelDateHandler,this))):(this._on(o.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",n.proxy(this._backwardNavHandler,this)),this._on(o.find(".current-month , .other-month"),"click",n.proxy(this._onSetCancelDateHandler,this)));this._otherMonthsVisibility();this._checkDateArrows()},_keyboardNavigation:function(n){var t;if(this._animating)return!1;if(this._isOpen&&(n.keyCode==37||n.keyCode==38||n.keyCode==39||n.keyCode==40||n.keyCode==13||n.keyCode==36||n.keyCode==35)){n.preventDefault&&n.preventDefault();t={row:null,col:null};t.col=this.sfCalendar.find("tbody tr td.e-state-hover").index();t.row=this.sfCalendar.find("tbody tr td.e-state-hover").parent().index();t.col=t.col!=-1?t.col+1:this.sfCalendar.find("tbody tr td.e-active").index()+1;t.row=t.row!=-1?t.row+1:this.sfCalendar.find("tbody tr td.e-active").parent().index()+1;var f=this.sfCalendar.find("table")[0].className,i,r=3,u=4;switch(f){case"e-dp-viewallyears":i=this._changeRowCol(t,n.keyCode,r,u,"yearall",n.ctrlKey);n.ctrlKey||(this._hoverAllYear=this.sfCalendar.find("tbody.e-datepicker-allyears tr td").index(i));break;case"e-dp-viewyears":i=this._changeRowCol(t,n.keyCode,r,u,"year",n.ctrlKey);n.ctrlKey||(this._hoverYear=this.sfCalendar.find("tbody.e-datepicker-years tr td").index(i));break;case"e-dp-viewmonths":i=this._changeRowCol(t,n.keyCode,r,u,"month",n.ctrlKey);n.ctrlKey||(this._hoverMonth=this.sfCalendar.find("tbody.e-datepicker-months tr td").index(i));break;case"e-dp-viewdays":r=this.sfCalendar.find("tbody.e-datepicker-days tr").length;u=7;i=this._changeRowCol(t,n.keyCode,r,u,"day",n.ctrlKey);n.ctrlKey||(this._hoverDate=this._getDateObj(i).getDate()-1)}n.ctrlKey||(this.sfCalendar.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"))}else if(this.model.displayInline||n.keyCode!=27&&n.keyCode!=9){if(n.altKey&&n.keyCode==40)return this.show(),!1}else this.hide(),n.stopPropagation()},_changeRowCol:function(t,i,r,u,f,e){var s,h={parent:null,child:null},o,v,l,c,a;switch(f){case"day":s="tbody.e-datepicker-days tr td.current-month";h.parent=".e-datepicker-days";h.child=".current-month";break;case"month":s="tbody.e-datepicker-months tr td.e-current-month";h.parent=".e-datepicker-months";h.child=".e-current-month";break;case"year":s="tbody.e-datepicker-years tr td.e-current-year";h.parent=".e-datepicker-years";h.child=".e-current-year";break;case"yearall":s="tbody.e-datepicker-allyears tr td.e-current-allyear";h.parent=".e-datepicker-allyears";h.child=".e-current-allyear"}if(t.row<=0&&t.col<=0)return this.sfCalendar.find(s+":first");v=this;switch(i){case 36:return this.sfCalendar.find(s+":first");case 35:return this.sfCalendar.find(s+":last");case 38:if(e)this._forwardNavHandler();else if(t.row>1)t.row-=1;else return this._processNextPrevDate(!0),this.sfCalendar.find(s+":nth-child("+t.col+"):last");return o=this._getCell(t,h),o.length<=0&&(this._processNextPrevDate(!0),o=this.sfCalendar.find(s+":nth-child("+t.col+"):last")),o;case 37:if(e)return this._processNextPrevDate(!0),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else if(t.row>1)t={row:t.row-1,col:u};else return this._processNextPrevDate(!0),this.sfCalendar.find(s+":last");return o=this._getCell(t,h),o.length<=0&&(this._processNextPrevDate(!0),o=this.sfCalendar.find(s+":last")),o;case 39:if(e)return this._processNextPrevDate(!1),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col<u)t.col+=1;else if(t.row<r)t={row:t.row+1,col:1};else return this._processNextPrevDate(!1),this.sfCalendar.find(s+":first");return o=this._getCell(t,h),o.length<=0&&(this._processNextPrevDate(!1),o=this.sfCalendar.find(s+":first")),o;case 40:if(!e){if(t.row<r)t.row+=1;else return this._processNextPrevDate(!1),this.sfCalendar.find(s+":nth-child("+t.col+"):first");return o=this._getCell(t,h),o.length<=0&&(this._processNextPrevDate(!1),o=this.sfCalendar.find(s+":nth-child("+t.col+"):first")),o}case 13:l=n("table",this.sfCalendar).get(0).className;c=this._getCell(t,h);a=n(c)[0];l=="e-dp-viewmonths"&&this.model.startLevel=="year"&&this.model.depthLevel=="year"?(this._dateValue=new Date(this._dateValue.setMonth(parseInt(a.attributes.index.value))),this._onSetCancelDateHandler({type:null,target:c})):l=="e-dp-viewyears"&&this.model.startLevel=="decade"&&this.model.depthLevel=="decade"||l=="e-dp-viewallyears"&&this.model.startLevel=="century"&&this.model.depthLevel=="century"?(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(a.innerHTML))),this._onSetCancelDateHandler({type:null,target:c})):l=="e-dp-viewdays"?(this._backwardNavHandler(c),this._onSetCancelDateHandler({type:null,target:c})):this._backwardNavHandler(c)}return this._getCell(t,h)},_getCell:function(n,t){return this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n.row+") td"+t.child+":nth-child("+n.col+")")},_getDateObj:function(n){return new Date(n.attr("date"))},_touchCalendar:function(n){var t=this.sfCalendar.find("table")[0].className;switch(n.type){case"pinchin":t!="e-dp-viewdays"&&this._keyboardNavigation({keyCode:13});break;case"pinchout":t!="e-dp-viewallyears"&&this._forwardNavHandler();break;case"swipeleft":this._processNextPrevDate(!1);break;case"swiperight":this._processNextPrevDate(!0)}},show:function(){if(this._isOpen)return!1;var i=this;(this._popupOpen=!0,this.model.enabled)&&(this.model.displayInline||this._setDatePickerPosition(),this.sfCalendar.attr({"aria-hidden":"false"}),i._isOpen=!0,this.sfCalendar.slideDown(this.model.enableAnimation?200:0,"easeOutQuad",function(){i.model.displayInline||n(document).bind("mousedown",n.proxy(i._onDocumentClick,i))}),this.element.val()!==""&&this._updateInputVal(),this._trigger("open",{prevDate:this._prevDate,value:this._formatter(this.model.value,this.model.dateFormat)}),this.model.displayInline||this._on(t.getScrollableParents(this.wrapper),"scroll",this.hide))},hide:function(){if(!this._isOpen||this._getInternalEvents)return!1;var i=this;this._popupOpen=!1;this.sfCalendar.attr({"aria-hidden":"true"});this.sfCalendar.slideUp(this.model.enableAnimation?100:0,"easeOutQuad",function(){i._isOpen=!1;n(document).unbind("mousedown",n.proxy(i._onDocumentClick,i));i._setWaterMark()});this.element.val()!=""&&this._validateInputVal();this._trigger("close",{prevDate:this._prevDate,value:this._formatter(this.model.value,this.model.dateFormat)});this._off(t.getScrollableParents(this.wrapper),"scroll",this.hide)},enable:function(){this.model.enabled=!0;this.element.removeClass("e-disable").attr({"aria-disabled":!1});this.dateIcon&&this.dateIcon.removeClass("e-disable").attr({"aria-disabled":!1});this.element.removeAttr("disabled");this.sfCalendar.removeClass("e-disable").attr({"aria-disabled":!1})},disable:function(){this.model.enabled=!1;this.element.addClass("e-disable").attr({"aria-disabled":!0});this.dateIcon&&this.dateIcon.addClass("e-disable").attr({"aria-disabled":!0});this.element.attr("disabled","disabled");this.sfCalendar.addClass("e-disable").attr({"aria-disabled":!0});this._isOpen&&(this.element.is(":input")&&this.element.blur(),this.model.displayInline||this.hide())},getValue:function(){return this._formatter(this.model.value,this.model.dateFormat)},_wireEvents:function(){this._on(n(".e-text",this.sfCalendar),"click",n.proxy(this._forwardNavHandler,this));this._on(n(".e-next",this.sfCalendar),"click",n.proxy(this._previousNextHandler,this));this._on(n(".e-prev",this.sfCalendar),"click",n.proxy(this._previousNextHandler,this));this.element.is(":input")&&(this._on(this.element,"blur",this._onFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keyup",this._keyUp));this.model.showFooter&&this._on(n(".e-footer",this.sfCalendar),"click",this._setCurrDate);this._on(this.sfCalendar,"pinchin pinchout swipeleft swiperight",n.proxy(this._touchCalendar,this))},_bindDateButton:function(){this._on(this.dateIcon,"mousedown",this._showDatePopUp);this.element.unbind("mousedown",n.proxy(this._showDatePopUp,this))},_bindInputEvent:function(){this._off(this.dateIcon,"mousedown",this._showDatePopUp)},_onFocusOut:function(t){this._isFocused=!1;this._validateOnFocusOut(this._validateValue(),t);this.wrapper.removeClass("e-focus");this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal();this.element.val()!=""&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal();this.element.unbind("keydown",n.proxy(this._keyboardNavigation,this));this.model.showPopupButton||this._off(this.element,"click",this._elementClick);var i=this.element.val(),r={prevDate:this._prevDate,value:i};this._trigger("focusOut",r);this._checkErrorClass()},_onFocusIn:function(t){(this._isSupport&&(t.preventDefault(),this._isFocused=!0),this.wrapper.removeClass("e-error").attr("aria-invalid","false"),this.isValidState=!0,this.wrapper.addClass("e-focus"),this.model.readOnly)||(this._isSupport||this._hiddenInput.css("display","none"),this.element.bind("keydown",n.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this.model.readOnly||this.show(),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{value:this.model.value}))},_elementClick:function(){this._popupOpen||this.show()},_removeWatermark:function(){this.element.val()==""||this._isSupport||this._hiddenInput.css("display","none")},_validateOnFocusOut:function(n,i){var f=this._formatter(this._calendarDate,this.model.dateFormat),e=this._formatter(this._parseDate(this._formatter(new Date,"MM/dd/yyyy")),this.model.dateFormat),r=!1,u=!1;n==null||this.model.enableStrictMode?n!=null||this.model.enableStrictMode?n?(n<this.model.minDate||n>this.model.maxDate?(this.isValidState=!1,u=!0,this._calendarDate=n<this.model.minDate?this.model.minDate:this.model.maxDate):this.isValidState=!0,this._triggerChangeEvent(i),u&&this._getInternalEvents&&this._trigger("outOfRange")):(this.isValidState=!1,this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)):(this._preTxtValue==null||this.element.val()==""?(this.element.val(""),this._isSupport||this._hiddenInput.css("display","block")):this.element.val(f),this._triggerChangeEvent(i)):(t.isNullOrUndefined(this.model.value)&&(this.model.value=this._parseDate(this.element.val())),this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode||(n?(n<this.model.minDate||n>this.model.maxDate)&&(r=!0,this._calendarDate=n=n<this.model.minDate?this.model.minDate:this.model.maxDate):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),r&&this.element.val(this._formatter(n,this.model.dateFormat)),this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._triggerChangeEvent(i))},_keyUp:function(n){n.keyCode===13&&(this._validateOnFocusOut(this._validateValue(),n),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),this.element.val()!=""&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal(),this._checkErrorClass())},_showhidePopup:function(){if(!this.model.enabled)return!1;this._isOpen?(!this._isFocused&&this.element.is(":input")&&this.element.focus(),this._cancelValue||this.hide()):(!this._isFocused&&this.element.is(":input")&&this.element.focus(),this.show())},_compareDate:function(n,t){return+n==+t?!0:!1},_triggerChangeEvent:function(){var n=this.element.val(),t,i;this._prevDate=this._formatter(this._preValue,this.model.dateFormat);t={prevDate:this._prevDate,value:n};i=this._parseDate(n,this.model.dateFormat);this._compareDate(this._preValue,i)||(this._preValue=this.model.value=i,this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("value",n),this._trigger("change",t),this._trigger("_change",t))},_triggerSelectEvent:function(){var n=this.element.val(),t;this._parseDate(n)&&(t={prevDate:this._prevDate,value:n,isSpecialDay:this._isSpecialDates(this.model.value)},this._prevDate!=n&&this._parseDate(t.value)&&this.model.value>=this.model.minDate&&this.model.value<=this.model.maxDate&&(this._cancelValue=this._trigger("select",t)))},_onDocumentClick:function(t){this.model&&(n(t.target).is(this.popup)||n(t.target).parents(".e-popup").is(this.popup)||n(t.target).is(this.wrapper)||n(t.target).parents(".e-datewidget").is(this.wrapper)?(n(t.target).is(this.popup)||n(t.target).parents(".e-popup").is(this.popup))&&t.preventDefault():this._showhidePopup())},_showDatePopUp:function(n){if(this._isSupport||this.model.showPopupButton||(n.preventDefault(),this._onFocusIn()),!this.model.readOnly){if(n.preventDefault(),!this.model.enabled&&this.model.displayInline)return!1;this._showhidePopup()}},_layoutChanged:function(){this._getInternalEvents&&this._trigger("layoutChange")},_setCurrDate:function(n){if(this.model.readOnly||!this.model.enabled)return!1;n&&n.preventDefault();var t=this;this._prevDate=this._formatter(this.model.value,this.model.dateFormat);this._dateValue=this._zeroTime(new Date);this.model.value=this._calendarDate=this._dateValue;this._setDateValue(this.model.value);this._triggerSelectEvent(n);this._triggerChangeEvent(n);this._refreshDatepicker();this._changeDayClass();this._startLevel(this.model.startLevel);this._onSetCancelDateHandler(n);this._layoutChanged()},_changeDayClass:function(){var n=this.popup.children("table")[0].className;n!="e-dp-viewdays"&&this.popup.children("table").removeClass(n).addClass("e-dp-viewdays")},_onSetCancelDateHandler:function(t){if(this.model.readOnly||!this.model.enabled||t&&n(t.target).hasClass("e-disable"))return!1;t&&t.type&&t.preventDefault();this.model.value=this._parseDate(this.element.val());this._prevDate=this._formatter(this.model.value,this.model.dateFormat);this._setDateValue(this._dateValue);this._triggerSelectEvent(t);this._triggerChangeEvent(t);this.element.is(":input")&&!this.model.displayInline&&this._showhidePopup();t&&n(t.target).hasClass("other-month")&&this._refreshDatepicker();this._cellSelection()},_closeCalendar:function(n){n&&n!=this.element||this.sfCalendar.empty().remove()},_checkErrorClass:function(){this.wrapper&&(this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true"))}});t.DatePicker.Header={ShowHeaderNone:"showheadernone",ShowHeaderShort:"showheadershort",ShowHeaderMin:"showheadermin",ShowHeaderLong:"showheaderlong"};t.DatePicker.HighlightSection={Month:"month",Week:"week",WorkDays:"workdays",None:"none"};t.DatePicker.Level={Month:"month",Year:"year",Decade:"decade",Century:"century"}})(jQuery,Syncfusion)});