/*!
*  filename: ej.listview.min.js
*  version : 12.3
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.touch.min","./../common/ej.listviewbase.min"],n):n()})(function(){(function(n,t,i){t.widget("ejListView","ej.ListView",{_rootCSS:"e-lv",_prefixClass:"e-",defaults:{enableAjax:!1,enableCache:!1,enablePersistence:!1,load:i,loadComplete:i,mouseDown:i},dataTypes:{dataSource:"data",fieldSettings:"data",renderMode:"enum",theme:"enum",enablePersistence:"boolean"},observables:["selectedItemIndex","dataSource"],selectedItemIndex:t.util.valueFunction("selectedItemIndex"),dataSource:t.util.valueFunction("dataSource"),_init:function(){this._preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/};this._storedContent=[];this._storedTemplate=[];this._touchStart=this.model.mouseDown;this._touchEnd=this.model.mouseUp;this._load()},_updateContent:function(t,r){var h=this,f=n(t),e=f.attr("data-childid"),u=this.element.find("#"+e),s,o;u.length&&(s=this.element.find("#"+e+"_header"),this.model.enableFiltering&&this._initializeFiltering(n(u)),o=f.attr("data-childtitle")==i?t.text():f.attr("data-childtitle"),s.hasClass("e-header")&&this._setHeaderVal(e,o,r),u.attr("data-hdr-title",o).attr("data-hdr-bckbtn",r),f.closest(".subpage").hide(),this._initEJCheckBox(u),u.show(),n(this.element.children()[0]).removeClass("e-slideright"),u.addClass("e-slideleft"))},_renderHeader:function(n,i,r,u){var f=t.buildTag("div","",{},{id:n+"_header","class":"e-header"});return i?(f.append("<span class='e-hicon e-icon e-rarrowleft-2x'><\/span>"),f.append("<div class='e-btn-text'>"+(u?u:"Back")+"<\/div>")):f.append("<div class='e-htitle'>"+r+"<\/div>"),f},_setHeaderVal:function(i,r){this._onBackButtonDelegate=n.proxy(this._onBackButtonClick,this);t.listenTouchEvent(n("#"+i+"_header"),t.endEvent(),this._onBackButtonDelegate,!1);n("#"+i+"_header").find(".e-btn-text").text(this.model.headerBackButtonText);n("#"+i+"_header").find(".e-htitle").text(r)},_onBackButtonClick:function(){this.element.find(".e-slideleft").removeClass("e-slideleft");this.element.children(":visible").hide();n(this.element.children()[0]).show();n(this.element.children()[0]).addClass("e-slideright")},_returnData:function(){var t=this._currentItem.closest("ul.e-list-hdr").find('.e-chkbox-wrap[aria-checked="true"]').closest("li");return{hasChild:this.element.find("#"+this._currentItem.attr("data-childid")).length?!0:!1,item:this._currentItem,text:this._currentItem.text(),index:this._currentItem.index(),isChecked:this._currentItem.find("input.e-lv-check").closest(".e-chkbox-wrap").attr("aria-checked")=="true"?!0:!1,checkedItems:t.length?t:null,checkedItemsText:n(t).map(function(){return n(this).text()}).get()}},_initEJCheckBox:function(t){n(t.find(".e-lv-check")).ejCheckBox();t.find(".e-lv-checkdiv").removeClass("e-lv-checkdiv");t.find(".e-lv-check").parent().addClass("e-lv-checkdiv")},_triggerStartEvent:function(n){this.model.mouseDown=t.getAttrVal(this._currentItem,"data-mousedown",this._touchStart);this.model.mouseDown&&this._trigger("mouseDown",n)},_triggerEndEvent:function(n){this.model.mouseUp=t.getAttrVal(this._currentItem,"data-mouseup",this._touchEnd);this.selectedItemIndex(this._currentItem.index());this.model.mouseUp&&this._trigger("mouseUp",n)},_createFilterDiv:function(){return t.buildTag("div.e-lv-filter",t.buildTag("input.e-lv-input","",{},{type:"text",placeholder:"search"}))},_emptyFilterTextValue:function(n){n.find(".e-lv-input").val("")},_createListDiv:function(){this._div=t.buildTag("div#"+childId+"."+this._rootCSS+" subpage e-childitem e-ajaxchild",this.model.showHeader?this._renderHeader(childId,!0,this._currentItem.text()):"")},_createCheckBox:function(){return t.buildTag("input.e-lv-check","",{},{})},_toggleCheckboxValue:function(t){t.ejCheckBox({checked:n(t.closest(".e-chkbox-wrap")).attr("aria-checked")=="true"?!1:!0})},_setCheckboxValue:function(n,t){n.ejCheckBox({checked:t})},_convertToRelativeUrl:function(n){return n}});n.extend(!0,t.ListView.prototype,t.ListViewBase.prototype)})(jQuery,Syncfusion)})