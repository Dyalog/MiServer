/*!
*  filename: ej.gantt.min.js
*  version : 12.2.0.36
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t,i){t.widget("ejGantt","ej.Gantt",{_rootCSS:"e-gantt",element:null,validTags:["div"],model:null,defaults:{allowSorting:!1,allowColumnResize:!1,allowSelection:!0,dataSource:null,query:null,taskIdMapping:"Id",parentTaskIdMapping:"",taskNameMapping:"Name",startDateMapping:"StartDate",endDateMapping:"",baselineStartDateMapping:"",baselineEndDateMapping:"",childMapping:"",durationMapping:"Duration",milestoneMapping:"",progressMapping:"Progress",predecessorMapping:"",resourceInfoMapping:"",resources:[],holidays:[],highlightWeekends:!0,scheduleStartDate:"02/23/2014",scheduleEndDate:"03/10/2014",enableProgressBarResizing:!0,rowHeight:30,includeWeekend:!0,toolbarSettings:{showToolbar:!1,toolbarItems:[]},stripLines:[],scheduleHeaderSettings:{weekHeaderFormat:"MMM dd , yyyy",dayHeaderFormat:"ddd",weekendBackground:"#F2F2F2"},taskbarBackground:"",progressbarBackground:"",connectorLineBackground:"",parentTaskbarBackground:"",parentProgressbarBackground:"",connectorlineWidth:1,showTaskNames:!0,showGridCellTooltip:!1,showGridExpandCellTooltip:!1,showProgressStatus:!0,showResourceNames:!0,enableTaskbarDragTooltip:!0,enableTaskbarTooltip:!0,editSettings:{allowEditing:!1,allowAdding:!1,allowDeleting:!1,editMode:"normal"},ganttRecords:[],parentRecords:[],allowKeyboardNavigation:!0,cssClass:"",locale:"en-US",allowMultiSorting:!1,sortSettings:{sortedColumns:[]},enableAltRow:!0,enableVirtualization:!1,progressbarHeight:100,taskbarTooltipTemplate:null,progressbarTooltipTemplate:null,taskbarTooltipTemplateId:null,dateFormat:"",resourceIdMapping:"",resourceNameMapping:"",progressbarTooltipTemplateId:null,taskbarEditingTooltipTemplateId:null,taskbarEditingTooltipTemplate:null,selectedRowIndex:-1,allowGanttChartEditing:!0,sizeSettings:{height:"450px",width:"1000px"},selectedItem:null,weekendBackground:"#F2F2F2",baselineColor:"#fba41c",treeColumnIndex:0,editDialogFields:[{field:"taskId",editType:"stringedit"},{field:"taskName",editType:"stringedit"},{field:"startDate",editType:"datepicker"},{field:"endDate",editType:"datepicker"},{field:"status",editType:"numericedit"},{field:"duration",editType:"numericedit"},{field:"resourceInfo",editType:"dropdownedit"},{field:"predecessor",editType:""}],renderBaseline:!1,enableContextMenu:!1,rowSelecting:null,rowSelected:null,queryCellInfo:null,queryTaskbarInfo:null,beginEdit:null,endEdit:null,rowDataBound:null,expanding:null,expanded:null,collapsing:null,collapsed:null,actionBegin:null,actionComplete:null,taskbarEditing:null,taskbarEdited:null,load:null,contextMenuOpen:null},dataTypes:{allowSorting:"boolean",allowColumnResize:"boolean",allowSelection:"boolean",dataSource:"data",taskIdMapping:"string",taskNameMapping:"string",startDateMapping:"string",endDateMapping:"string",baselineStartDateMapping:"string",baselineEndDateMapping:"string",childMapping:"string",durationMapping:"string",milestoneMapping:"string",progressMapping:"string",predecessorMapping:"string",resourceInfoMapping:"string",resources:"array",holidays:"array",highlightWeekends:"boolean",enableProgressBarResizing:"boolean",rowHeight:"number",includeWeekend:"boolean",toolbarSettings:{toolbarItems:"array"},stripLines:"array",scheduleHeaderSettings:"data",taskbarBackground:"string",progressbarBackground:"string",connectorLineBackground:"string",parentTaskbarBackground:"string",parentProgressbarBackground:"string",connectorlineWidth:"number",showTaskNames:"boolean",showProgressStatus:"boolean",showResourceNames:"boolean",enableTaskbarDragTooltip:"boolean",enableTaskbarTooltip:"boolean",editSettings:"data",ganttRecords:"array",parentRecords:"array",allowKeyboardNavigation:"boolean",cssClass:"string",locale:"string",allowMultiSorting:"boolean",showGridExpandCellTooltip:"boolean",sortSettings:{sortedColumns:"array"},enableAltRow:"boolean",enableVirtualization:"boolean",progressbarHeight:"number",dateFormat:"string",resourceIdMapping:"string",resourceNameMapping:"string",selectedRowIndex:"number",allowGanttChartEditing:"boolean",size:{height:"string",width:"string"},selectedItem:"data",weekendBackground:"string",baselineColor:"string",renderBaseline:"boolean",showGridCellTooltip:"boolean",treeColumnIndex:"number",editDialogFields:"array"},observables:["selectedItem"],selectedItem:t.util.valueFunction("selectedItem"),getColumns:function(){return this._columns},setColumns:function(n){this._columns=n},_init:function(){var t=this,n=t.model,r,i;t._initPrivateProperties();t._setCultureInfo();t.element.addClass("e-gantt-core");n.isdesignMode&&(n.taskIdMapping="Id",n.taskNameMapping="Name",n.startDateMapping="StartDate",n.durationMapping="Duration",n.progressMapping="Progress",n.scheduleStartDate="02/23/2014",n.scheduleEndDate="03/10/2014");n.scheduleStartDate!=null&&n.scheduleEndDate!=null?(r=t._getDateFromFormat(n.scheduleStartDate),i=t._getDateFromFormat(n.scheduleEndDate)):(r=t._getDateFromFormat(new Date),i=t._getDateFromFormat(new Date(r)),i.setDate(i.getDate()+20));t._calculateWeekSplit(r,i);n.dataSource!==null?this._checkDataBinding():(t.setColumns(t.createTreeGridColumns()),t._initialize())},_checkDataBinding:function(){var n=this,i=n.model,r;i.dataSource instanceof t.DataManager?this._initDataSource():i.dataSource.length>0&&(i.taskIdMapping.length>0&&i.parentTaskIdMapping.length>0?(r=i.dataSource.slice(0),n._reconstructDatasource(r),n._createGanttRecords(n.secondaryDatasource)):n._createGanttRecords(i.dataSource),n._initialize())},_initDataSource:function(){var n=this,i=n.model,r,u=this._columnToSelect(),n=this,f=i.dataSource.executeQuery(u);f.done(t.proxy(function(t){r=t.result;n._reconstructDatasource(t.result);n._createGanttRecords(n.secondaryDatasource);n._initialize()}))},_columnToSelect:function(){var n=this,i=n.model,r=t.Query();return i.query},_reconstructDatasource:function(n){for(var i,u=this,f=u.model,e=[],r=0;r<n.length;r++)i={},i=t.DataManager(n).executeLocal(t.Query().where(f.parentTaskIdMapping,t.FilterOperators.equal,n[r][f.taskIdMapping])),(t.isNullOrUndefined(n[r][f.parentTaskIdMapping])||n[r][f.parentTaskIdMapping]==0)&&i.length>0?(n[r][f.childMapping]=i,u.secondaryDatasource.push(n[r])):!t.isNullOrUndefined(n[r][f.parentTaskIdMapping])||i&&i.length>0?i&&i.length>0&&!t.isNullOrUndefined(i[0][f.parentTaskIdMapping])&&u._appendChildDataItems(u.secondaryDatasource,i):u.secondaryDatasource.push(n[r]),i&&i.length>0?(u._datasourceChildItems=u._reconstructDatasource(i),t.isNullOrUndefined(n[r][f.childMapping])&&(n[r][f.childMapping]=u._datasourceChildItems,u._getParentIndex(n)),u._datasourceChildItems=[]):t.isNullOrUndefined(n[r][f.parentTaskIdMapping])||e.push(n[r]);if(e&&e.length>0)return e},_appendChildDataItems:function(n,i){for(var f=this,r=f.model,u=0;u<n.length;u++)n[u][r.taskIdMapping]===i[0][r.parentTaskIdMapping]?n[u][r.childMapping]=i:!t.isNullOrUndefined(n[u][r.childMapping])&&n[u][r.childMapping].length>0&&f._appendChildDataItems(n[u],i);t.isNullOrUndefined(n.length)&&n&&(n[r.taskIdMapping]===i[0][r.parentTaskIdMapping]?n[r.childMapping]=i:!t.isNullOrUndefined(n[r.childMapping])&&n[r.childMapping].length>0&&f._appendChildDataItems(n[r.childMapping],i))},_getParentIndex:function(n){var o=this,r=o.model,f=o.secondaryDatasource,e=0,u,i;for(n.length>0&&(e=n[0][r.parentTaskIdMapping]),i=0;i<f.length;i++){if(f[i][r.taskIdMapping]==e&&t.isNullOrUndefined(f[i][r.childMapping]))return f[i][r.childMapping]=n,!0;if(u=f[i][r.childMapping],u)for(i=0;i<u.length;i++)if(u[i][r.taskIdMapping]==e&&t.isNullOrUndefined(u[i][r.childMapping]))return u[i][r.childMapping]=n,!0}},reRenderChart:function(t){var i=this,u=i.model,r;i._perDayWidth==i._prevDayWidth&&t>0||(i._prevDayWidth=i._perDayWidth,r=-t*i._perDayWidth*15/100,i._perDayWidth+=r,i._perDayWidth=i._perDayWidth<15?15:i._perDayWidth,i._perDayWidth=i._perDayWidth>120?120:i._perDayWidth,i._perDayWidth>=15&&i._perDayWidth<120&&(i._updateGanttRecords(),n(".ejGanttChart").empty(),i._$ganttchartHelper.ejGanttChart("clearConnectorLines"),i._$ganttchartHelper.ejGanttChart("clearConnectorLines"),i._createConnectorLinesCollection(),i._$ganttchartHelper.ejGanttChart("reRenderGanttChart",i._perDayWidth,u.ganttRecords),i._$ganttchartHelper.ejGanttChart("renderGanttRecords"),i._connectorLinesCollection=[]))},_updateGanttRecords:function(){for(var i=this,t=i.model,r=t.ganttRecords.length,n=0;n<r;n++)t.ganttRecords[n].left=t.ganttRecords[n].left/i._prevDayWidth*i._perDayWidth,t.ganttRecords[n].width=t.ganttRecords[n].width/i._prevDayWidth*i._perDayWidth,t.ganttRecords[n].width=t.ganttRecords[n].isMilestone==!0?26:t.ganttRecords[n].width,t.ganttRecords[n].progressWidth=t.ganttRecords[n]._calculateProgressWidth(t.ganttRecords[n].width,t.ganttRecords[n].status)},_initPrivateProperties:function(){var n=this;n._isFromGantt=!0;n._ganttHeight=n.element.height()?n.element.height()+"px":n.model.sizeSettings.height;n._ganttWidth=n.element.width()?n.element.width()+"px":n.model.sizeSettings.width;n._disabledToolItems=[];n._id=n.element.attr("id");n._scheduleWeeks=[];n._columns=[];n._rows=[];n._storedIndex=-1;n._perDayWidth=30;n._prevDayWidth=0;n._$treegridPane=null;n._$ganttchartPane=null;n._$treegrid=null;n._$ganttchart=null;n._$ejGantt=null;n._$treegridHelper=null;n._$ganttchartHelper=null;n._tdsOffsetWidth=[];n._ids=[];n._predecessorsCollection=[];n._connectorLinesCollection=[];n._updatedConnectorLineCollection=[];n._connectorlineIds=[];n._updatedGanttRecords=[];n._currentViewData=[];n._gridRows=null;n._collapsedRecordCount=0;n._expandedRecordsCount=0;n._totalCollapseRecordCount=0;n._isInExpandCollapse=!1;n._hiddenRecordCount=0;n.prevPredecessorTO=null;n.prevPredecessorFrom=null;n.prevPredecessorcount=0;n._isValidationEnabled=!0;n._isRenddered=!1;n._holidays=n._getHoliday();n._stringHolidays=n._getStringHolidays();n._isinBeginEdit=!1;n._isMileStoneEdited=!1;n._cellEditType=null;n._isinAddnewRecord=!1;n._contextMenuItems=n._getContextMenuItems();n._subContextMenuItems=n._getsubContextMenuItems();n._columnHeaderTexts=null;n._editDialogTexts=null;n._months=null;n._days=null;n._emptyRecordText=null;n._commonColumnWidth=150;n._searchString="";n._emptyDataColumns=[];n.secondaryDatasource=[];n._datasourceChildItems=[];n._$predecessorTable=null;n._mappingItems=[]},_setCultureInfo:function(){var i=this,r=i.model,n=r.locale;r.dateFormat=r.dateFormat?r.dateFormat:t.Gantt.localization[n]&&t.Gantt.localization[n].calendars&&t.Gantt.localization[n].calendars.standard.patterns?t.Gantt.localization[n].calendars.standard.patterns.d:Globalize.culture(n)?Globalize.culture(n).calendars.standard.patterns.d:t.Gantt.localization["en-US"].calendars.standard.patterns.d;i._emptyRecordText=t.Gantt.localization[n]?t.Gantt.localization[n].emptyRecord:t.Gantt.localization["en-US"].emptyRecord;i._columnHeaderTexts=t.Gantt.localization[n]?t.Gantt.localization[n].columnHeaderTexts:t.Gantt.localization["en-US"].columnHeaderTexts;i._editDialogTexts=t.Gantt.localization[n]?t.Gantt.localization[n].editDialogTexts:t.Gantt.localization["en-US"].editDialogTexts;i._months=t.Gantt.localization[n]&&t.Gantt.localization[n].calendars?t.Gantt.localization[n].calendars.standard.months.namesAbbr:Globalize.culture(n)?Globalize.culture(n).calendars.standard.months.namesAbbr:t.Gantt.localization["en-US"].calendars.standard.months.namesAbbr;i._days=t.Gantt.localization[n]&&t.Gantt.localization[n].calendars?t.Gantt.localization[n].calendars.standard.months.namesAbbr:Globalize.culture(n)?Globalize.culture(n).calendars.standard.days.namesAbbr:t.Gantt.localization["en-US"].calendars.standard.days.namesAbbr},_getMappingItems:function(){for(var n=this,u=n.model,i=[],r=n._columns.length,t=0;t<r;t++)i.push(n._columns[t].field);return i},_getContextMenuItems:function(){return[{iconPath:"url(../images/MenuItem_Details.png)",headerText:"Task Details...",eventHandler:null,isDefault:!0},{iconPath:"url(../images/MenuItem_Add.png)",headerText:"Add New Task",eventHandler:null,isDefault:!0},{iconPath:"url(../images/MenuItem_Indent.png)",headerText:"Indent",eventHandler:null,isDefault:!0},{iconPath:"url(../images/MenuItem_Outdent.png)",headerText:"Outdent",eventHandler:null,isDefault:!0},{iconPath:"url(../images/MenuItem_Delete.png)",headerText:"Delete",eventHandler:null,isDefault:!0},]},_getsubContextMenuItems:function(){return[{iconPath:null,headerText:"Above",eventHandler:null},{iconPath:null,headerText:"Below",eventHandler:null}]},_initialize:function(){var n=this,i=n.model;n._$treegridPane=t.buildTag("div.e-treegridPane");n._$ganttchartPane=t.buildTag("div.e-ganttchartPane");n._$ejGantt=t.buildTag("div.e-gantt-Spliter#e-ejSpliter"+n._id,"",{},{unselectable:"on"});n.setColumns(n.createTreeGridColumns());n._updatePredecessors();n._trigger("load");n._render();n._updatedGanttRecords=n.getUpdatedRecords();n._currentViewData=n.getCurrentViewData();n._connectorLinesCollection=[];n._createConnectorLinesCollection();n._$treegridHelper.ejTreeGrid("renderRecords");n._renderGanttChart();n._$ganttchartHelper&&n._$ganttchartHelper.ejGanttChart("renderConnectorLines",n._connectorLinesCollection);n._isRenddered=!0;n._gridRows=n.getRows();n._ganttChartRows=n.getGanttChartRows();n._createSubContextMenuTemplate();n._createContextMenuTemplate();n._wireEvents()},_render:function(){var n=this,r=n.element,i=n.model;n.model.toolbarSettings.showToolbar&&r.append(n._renderToolBar());n._ganttHeight=parseInt(n._ganttHeight)-n._getToolBarHeight();n._$treegrid=t.buildTag("div.ejTreeGrid#ejTreeGrid"+n._id,"",{height:n._ganttHeight},{});n._$ganttchart=t.buildTag("div.ejGanttChart#ejGanttChart"+n._id,"",{height:n._ganttHeight},{});n._$ganttchartPane.append(n._$ganttchart);n._$treegridPane.append(n._$treegrid);n._$ejGantt.append(n._$treegridPane);n._$ejGantt.append(n._$ganttchartPane);r.append(n._$ejGantt);n._renderGantt();n._renderTreeGrid();n._$treegridPane.css({overflow:"hidden"});(i.editSettings.allowEditing||i.editSettings.allowAdding||i.editSettings.editMode=="normal"||i.editSettings.editMode=="dialogTemplate")&&(n.addDialogEditingTemplate(),r.append(n._renderDialog()))},_renderDialog:function(){return t.buildTag("div.e-dialog e-dialog-content e-shadow e-widget-content","",{display:"none"},{id:this._id+"_dialogEdit"})},addDialogEditingTemplate:function(){var i=this,e=i.model,o,f,r;i._mappingItems=i._getMappingItems();var u=i._columns,s=u.length,e=i.model;if(s!=0){for(e.editDialogFields.length>0&&(u=e.editDialogFields),f=t.buildTag("div","",{},{unselectable:"on"}),$form=t.buildTag("form","",{height:"auto",width:"auto","font-family":"Segoe UI","font-size":"14px"},{id:i._id+"EditForm"}),$table=t.buildTag("table","",{width:"500px"},{unselectable:"on"}),$tr=t.buildTag("tr"),r=0;r<u.length;r++)n.inArray(u[r].field,i._mappingItems)!=-1&&u[r].field!==e.predecessorMapping&&($tr.children("td").length<2?($td=t.buildTag("td","",{"text-align":"left",padding:"5px 15px 0","font-weight":"normal",outline:"none"},{unselectable:"on"}),$innerTable=t.buildTag("table","",{outline:"none"},{unselectable:"on"}),$inTr=t.buildTag("tr"),$inTd=t.buildTag("td.editLabel","",{outline:"none"},{unselectable:"on"}),$inTd.append("<label for='"+u[r].field+"' style='font-weight:normal;'>"+i._columnHeaderTexts[u[r].field]+"<\/label>"),$inTr.append($inTd),$innerTable.append($inTr),$inTr2=t.buildTag("tr"),$inTd2=t.buildTag("td.e-editValue"),o=u[r],i.initCellEditType(o,$inTd2),$inTr2.append($inTd2),$innerTable.append($inTr2),$td.append($innerTable),$tr.append($td),r%2==0&&i._columnHeaderTexts[u[r].field]==="Resources"&&($td.attr("colspan","2"),$table.append($tr),$tr=$tempTr=t.buildTag("tr"))):($table.append($tr),$tr=$tempTr=t.buildTag("tr"),r--));$table.append($tr);$tr=t.buildTag("tr");(e.predecessorMapping||u.indexOf("predecessor")!=-1)&&($td=t.buildTag("td","",{"text-align":"left",padding:"10px 15px 0","font-weight":"normal",outline:"none"},{colspan:2,unselectable:"on"}),$innerTable=t.buildTag("table#predecessoreditTable","",{width:"100%",outline:"none"},{unselectable:"on"}),$inTr=t.buildTag("tr"),$inTd=t.buildTag("td.editLabel","",{outline:"none"},{unselectable:"on"}),$inTd.append("<span class='e-addpre e-icon e-enable'>Add New<\/span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='e-deletepre e-icon e-disable'>&nbsp;&nbsp;Remove<\/span>"),$inTr.append($inTd),$innerTable.append($inTr),$inTr2=t.buildTag("tr"),$inTd2=t.buildTag("td.e-editValue"),$preDiv=t.buildTag("div#treegrid"+i._id+"predecessoredit","",{width:"100%",height:"150px"},{}),$inTd2.append($preDiv),$inTr2.append($inTd2),$innerTable.append($inTr2),$td.append($innerTable),$tr.append($td),$table.append($tr));$form.append($table);$form.appendTo(f);f=i.renderDiaglogButton($form,f);n.templates(i._id+"_JSONDialogEditingTemplate",f.html())}},_clearContextMenu:function(){n(".e-contextmenu").remove();n(".e-innerContextmenu").remove()},_createContextMenuTemplate:function(){var i=this,t,u,r;helpers={getHeaderName:n.proxy(i._getHeaderName,i)};n.views.helpers(helpers);t="<li style='list-style-type:none;width:150px;height:25px;display:inline-block;'>";u="<div class='e-menuitem' id={{:headerText}}  style='left:0px;padding-top:3px;height:25px;width:150px;cursor:pointer;display:block;position:absolute;'  {{if !isDefault}}onClick='{{:eventHandler}}'{{/if}}><div class='e-icon' style='left:10px;top:4px;height:20px;position:absolute;background-image:{{:iconPath}};background-repeat:no-repeat;'/><div style='left:35px;position:absolute;'><span style='font-family:Segoe UI;font-size:12px;padding-left:5px;'>{{:headerText}}<\/span><\/div>{{if ~getHeaderName(#data)}}<span class='e-icon e-expander' style='height:16px;width:16px;right:5px;top:7px;position:absolute;'><\/span>{{/if}}";t+=u;t+="<\/div><\/li>";r={};r[i._id+"contextMenuTemplate"]=t;n.templates(r)},_getHeaderName:function(n){return n.headerText=="Add New Task"&&this._subContextMenuItems.length>0?!0:!1},_createSubContextMenuTemplate:function(){var r=this,f={getHeaderName:r._getHeaderName},t,u,i;n.views.helpers(f);t="<li style='list-style-type:none;width:120px;height:25px;display:inline-block;'>";u="<div class='e-menuitem' id={{:headerText}} style='left:0px;padding-top:3px;height:25px;width:120px;cursor: pointer;display:block;position:absolute;'><div style='left:10px;height:20px;width:16px;position:absolute;padding-top:5px;background-image:{{:iconPath}};background-repeat:no-repeat;'/><div style='left:10px;position:absolute;'><span style='font-family:Segoe UI;font-size:12px;padding-left:5px;'>{{:headerText}}<\/span><\/div><\/div>";t+=u;t+="<\/li>";i={};i[r._id+"subContextMenuTemplate"]=t;n.templates(i)},initCellEditType:function(i,r){var u=this,f=u.model,e={},o,s,h;t.isNullOrUndefined(i.editType)&&(i.editType="stringedit");switch(i.editType){case"stringedit":i.mappingName===f.predecessorMapping?(e["_"+u._id+"predecessor"]=u._getPredecessorsValue,n.views.helpers(e),r.html(t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:~_"+u._id+"predecessor('"+u._id+"Object','"+f.predecessorMapping+"','"+i.field+"')}}",id:u._id+i.field,name:i.field}))):r.html(t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:#data['"+i.field+"']}}",id:u._id+i.field,name:i.field}));break;case"booleanedit":r.html("{{if "+i.field+'}} <input class="e-field e-checkbox" type ="checkbox" id='+u._id+i.field+" name="+i.field+' checked="checked"><\/input>{{else}} <input class="e-field e-checkbox" type ="checkbox" id='+u._id+i.field+" name="+i.field+" > {{/if}}");break;case"numericedit":o=t.buildTag("input.e-numerictextbox e-field","",{},{type:"text",value:"{{:#data['"+i.field+"']}}",id:u._id+i.field,name:i.field});r.append(o);break;case"datepicker":case"datetimepicker":s=t.buildTag("input.e-"+i.editType+" e-field","",{},{type:"text",value:"{{:#data['"+i.field+"']}}",id:u._id+i.field,name:i.field});r.append(s);break;case"dropdownedit":h=t.buildTag("input.e-field e-dropdownlist e-field","",{},{type:"text",value:"{{:#data['"+i.field+"']}}",id:u._id+i.field,name:i.field});r.append(h)}},_getPredecessorsValue:function(n,t){return this.data.item?this.data.item[t]:""},_updateEditFormData:function(){var n=this},_onHoliDayCheck:function(n){var r=this,i=r.model.holidays,e=r.model.includeWeekend,t,u,f;if(i&&i.length){t=0;u=i.length;do for(t=0;t<u;t++)if(f=r._getDateFromFormat(i[t].day),f.getTime()==n.getTime())n.setDate(n.getDate()+1),this.model.includeWeekend===!1&&(n.getDay()==0?n.setDate(n.getDate()+1):n.getDay()==6&&n.setDate(n.getDate()+2));else return n;while(1)}else return n},_editStartDateChange:function(t,i){var f=this,e=f._id,v=f.model,o=f.model.holidays,u=n("#"+e+"startDate").val(),a,s,r,h,l,c;if(endDate=n("#"+e+"endDate").val(),duration=parseInt(n("#"+e+"duration").val()),t===e+"startDate"){if(u=f._getDateFromFormat(i.value),r=new Date,stratDate=f._onHoliDayCheck(u),u.getDay()===0?u.setDate(u.getDate()+1):u.getDay()===6&&u.setDate(u.getDate()+2),r=u,u=Globalize.format(u,this.model.dateFormat),n("#"+e+"startDate").ejDatePicker("option","value",u),!endDate||!duration)return;if(this.model.includeWeekend===!1)for(s=1;s<duration;s++)r.getDay()==0?r.setDate(r.getDate()+1):r.getDay()==6&&r.setDate(r.getDate()+2),r.setDate(r.getDate()+1);else r.setDate(r.getDate()+duration-1);if(this.model.includeWeekend===!1&&(r.getDay()==0?r.setDate(r.getDate()+1):r.getDay()==6&&r.setDate(r.getDate()+2)),o&&o.length)for(h=0,l=o.length,h=0;h<l;h++)c=new Date(o[h].day),c>=f._getDateFromFormat(new Date(u),this.model.dateFormat)&&c<=r&&(r.setDate(r.getDate()+1),this.model.includeWeekend===!1&&(r.getDay()==0?r.setDate(r.getDate()+1):r.getDay()==6&&r.setDate(r.getDate()+2)));this.model.includeWeekend===!1&&(r.getDay()==0?r.setDate(r.getDate()+1):r.getDay()==6&&r.setDate(r.getDate()+2));r=Globalize.format(r,this.model.dateFormat);n("#"+e+"endDate").ejDatePicker("option","value",new Date(r))}else if(t===e+"endDate")if(endDate=f._getDateFromFormat(i.value),endDate=f._onHoliDayCheck(endDate),endDate.getDay()===0?endDate.setDate(endDate.getDate()-2):endDate.getDay()===6&&endDate.setDate(endDate.getDate()-1),u=f._getDateFromFormat(u),endDate=Globalize.format(endDate,this.model.dateFormat),n("#"+e+"endDate").ejDatePicker("option","value",new Date(endDate)),endDate=f._getDateFromFormat(endDate),u<=endDate){for(a=0,dateDiff=f._daydiff(f._getDateFromFormat(u),f._getDateFromFormat(endDate)),offset=this.model.includeWeekend===!1?f._calculateDateDifference(new Date(u),dateDiff):dateDiff+1,s=0;s<o.length;s++)new Date(o[s].day)>=new Date(u)&&new Date(o[s].day)<=new Date(endDate)&&offset--;a=offset+1;n("#"+e+"duration").ejNumericTextbox("option","value",a)}else n("#"+e+"endDate").ejDatePicker("option","value",new Date(i.previousDate));else if(t===e+"duration"){if(u=f._getDateFromFormat(u),r=new Date(u),duration=i.value,this.model.includeWeekend===!1)for(s=1;s<duration;s++)r.getDay()==0?r.setDate(r.getDate()+1):r.getDay()==6&&r.setDate(r.getDate()+2),r.setDate(r.getDate()+1);else r.setDate(r.getDate()+duration-1);if(this.model.includeWeekend===!1&&(r.getDay()==0?r.setDate(r.getDate()+1):r.getDay()==6&&r.setDate(r.getDate()+2)),o&&o.length)for(h=0,l=o.length,h=0;h<l;h++)c=new Date(o[h].day),c>=f._getDateFromFormat(u,this.model.dateFormat)&&c<=r&&(r.setDate(r.getDate()+1),this.model.includeWeekend===!1&&(r.getDay()==0?r.setDate(r.getDate()+1):r.getDay()==6&&r.setDate(r.getDate()+2)));this.model.includeWeekend===!1&&(r.getDay()==0?r.setDate(r.getDate()+1):r.getDay()==6&&r.setDate(r.getDate()+2));r=Globalize.format(r,this.model.dateFormat);n("#"+e+"endDate").ejDatePicker("option","value",new Date(r))}},_taskNameCollection:function(){for(var r,u=this,t=u._updatedGanttRecords,i=[],n=0;n<t.length;n++)t[n].hasChildRecords||(r={id:t[n].taskId.toString(),text:t[n].taskName,value:t[n].taskName},i.push(r));return i},_idFromPredecessor:function(n){for(var u,i,r=n.split(","),f=[],t=0;t<r.length;t++){for(u=[],i=0;i<r[t].length;i++)if(isNaN(r[t].charAt(i)))break;else u.push(r[t].charAt(i));f.push(u.join(""))}return f},_preIdChangByName:function(){var i=this,r=n("#"+i._id+"PreEditForm");$targetTr=r.closest("tr");$val=r.find(".onEdit");var f=$val.val(),u=i._taskNameCollection(),t=n.map(u,function(n){if(n.text===$val.val())return n.id});t=t[0];$targetTr.find(".id").html(t)},_preBeginEdit:function(n){n.columnIndex===0&&(n.cancel=!0)},_preEndEdit:function(t){var u=this,r;if(t.columnName==="name"){var e=t.model.dataSource,f=u._taskNameCollection(),i=n.map(f,function(n){if(n.text===t.value)return n.id});i=i[0];t.model.selectedItem.id=i;r=t.model.dataSource.indexOf(t.model.selectedItem.item);r===-1&&(t.model.dataSource.push(t.model.selectedItem.item),r=t.model.dataSource.indexOf(t.model.selectedItem.item));t.model.dataSource[r].id=i;$currentRow=t.rowElement;$currentRow[0].cells[0].innerText=i;$currentRow[0].cells[2].innerText.length<=0&&($currentRow[0].cells[2].innerText="Finish-Start",t.model.dataSource[r].type="Finish-Start");u.enbleDisableAddPreButton("enable")}},_deleteDisableEnable:function(){var t=this;n(".e-deletepre").unbind("click",n.proxy(t._deletepredecessor,t));n(".e-deletepre").bind("click",n.proxy(t._deletepredecessor,t));n(".e-deletepre").removeClass("e-disable");n(".e-deletepre").addClass("e-enable")},_preDblClickHandler:function(i){var r=this,u;if($target=n(i.target),$sample=n("#"+r._id+"PreEditForm"),$sample.length===0){$form=t.buildTag("form.#"+r._id+"PreEditForm","",{},{});$form.submit(function(n){n.preventDefault()});var e=$target.attr("edittype"),f=$target.attr("field");switch(f){case"taskName":$attchelemet=t.buildTag("input.e-field e-dropdownlist e-field onEdit","",{},{type:"text",id:r._id+"taskNameEdit",value:i.target.innerHTML});$form.append($attchelemet);$target.empty().append($form);$target.addClass("onEdit");$attchelemet.ejDropDownList({dataSource:r._taskNameCollection(),width:"auto",change:n.proxy(r._preIdChangByName,r)});$attchelemet.focus();break;case"type":$attchelemet=t.buildTag("input.e-field e-dropdownlist e-field onEdit","",{},{type:"text",id:r._id+"TyepeEdit",value:i.target.innerHTML});$form.append($attchelemet);$target.empty().append($form);$target.addClass("onEdit");$attchelemet.ejDropDownList({dataSource:[{id:"SS",text:"Start-Start",value:"Start-Start"},{id:"SF",text:"Start-Finish",value:"Start-Finish"},{id:"FS",text:"Finish-Start",value:"Finish-Start"},{id:"FF",text:"Finish-Finish",value:"Finish-Finish"}],width:"auto"});$attchelemet.focus();break;case"offset":$attchelemet=t.buildTag("input.e-numerictextbox e-field onEdit","",{},{type:"text",id:r._id+"OffsetEdit"});u=isNaN(parseInt(i.target.innerHTML))?0:parseInt(i.target.innerHTML);$form.append($attchelemet);$target.empty().append($form);$target.addClass("onEdit");$attchelemet.ejNumericTextbox({width:"auto",showSpinButton:!0,value:u});$attchelemet.focus()}}},_predecessorEditCollection:function(){var o=this,l=o.model,w="#"+o._id+"predecessor",s=[{id:"SS",text:"Start-Start",value:"Start-Start"},{id:"SF",text:"Start-Finish",value:"Start-Finish"},{id:"FS",text:"Finish-Start",value:"Finish-Start"},{id:"FF",text:"Finish-Finish",value:"Finish-Finish"}],a=[],i=l.selectedItem,h=o._taskNameCollection(),r,n,e,v,y,c,u,f,p;if(!t.isNullOrUndefined(i)&&!t.isNullOrUndefined(i.predecessor)&&!t.isNullOrUndefined(i.item[l.predecessorMapping]))for(r=i.predecessor,n=0;n<r.length;n++)if(e=r[n].from,i.taskId.toString()!==e.toString()){for(c=0,u=0;u<h.length;u++)if(h[u].id===e){v=h[u].text;break}for(f=0;f<s.length;f++)s[f].id==r[n].predecessorsType&&(y=s[f].text);c=r[n].offset;p={id:e,name:v,type:y,offset:c};a.push(p)}return a},_refreshEditForm:function(r){var f=this,it=document.getElementById(f._id+"EditForm"),g=!1,nt=n(it).find("input,select"),a=0,rt=nt.length,u,c="165px",h=f.model,l,e={},p,o,w,v,y,b,k,s,tt,d;for(selectedItem=h.selectedItem,a;a<rt;a++){if(u=nt.eq(a),c=210,u.hasClass("e-numerictextbox"))l=c,p=u.val(),e.width=l,e.showSpinButton=!0,e.cssClass=h.cssClass,s=u[0].id,s=s.replace(f._id,""),selectedItem!==null&&selectedItem.hasChildRecords&&(s=="duration"||s=="status")&&r.requestType!=="add"&&(e.readOnly=!0),e.maxValue=s=="status"?100:1e5,e.minValue=0,e.change=n.proxy(f._editStartDateChange,f,u[0].id),e.value=p.length?parseFloat(p):0,w=t.TreeGrid.getColumnByField(f._columns,u.prop("name")),t.isNullOrUndefined(w.editParams)||n.extend(e,w.editParams),u.ejNumericTextbox(e),u.prop("name",u.prop("name").replace(f._id,""));else if(u.hasClass("e-datepicker"))l=c,e.width=l,e.cssClass=h.cssClass,e.dateFormat=h.dateFormat,e.displayDefaultDate=!0,s=u[0].id,s=s.replace(f._id,""),selectedItem!==null&&selectedItem.hasChildRecords&&(s=="startDate"||s=="endDate")&&r.requestType!=="add"&&(e.readOnly=!0),e.select=n.proxy(f._editStartDateChange,f,u[0].id),u.val().length&&(e.value=f._getDateFromFormat(u.val())),o=t.TreeGrid.getColumnByField(f._columns,u.prop("name")),o.format!==i&&o.format.length>0&&(v=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),y=v.exec(o.format),e.dateFormat=y[2]),t.isNullOrUndefined(o.editParams)||n.extend(e,o.editParams),u.ejDatePicker(e);else if(u.hasClass("e-datetimepicker"))l=c,e={width:l,rtl:h.rtl,cssClass:h.css,showButton:!1},u.val().length&&(e.value=f._getDateFromFormat(u.val())),o=t.TreeGrid.getColumnByField(f._columns,u.prop("name")),o.format!==i&&o.format.length>0&&(v=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),y=v.exec(o.format),e.dateTimeFormat=y[2]),t.isNullOrUndefined(o.editParams)||n.extend(e,o.editParams),u.ejDateTimePicker(e);else if(u.hasClass("e-dropdownlist"))o=t.TreeGrid.getColumnByField(f._columns,u.prop("name")),b=o.dropdownData,k=!1,selectedItem!==null&&selectedItem.hasChildRecords&&r.requestType!=="add"&&(k=!0),u.ejDropDownList({width:c,showCheckbox:!0,dataSource:b,readOnly:k,fields:{id:h.resourceIdMapping,text:h.resourceNameMapping,value:h.resourceNameMapping},selectedItems:f.getIndexofresourceInfo(b,r.data)}),u.ejDropDownList("setSelectedValue",u.val());else switch(u.prop("tagName")){case"INPUT":u.attr("type")!="checkbox"?(r.requestType!=="add"&&u.attr("name")==="taskId"&&u.attr("readonly","readonly"),s=u[0].id,s=s.replace(f._id,""),u.css("text-align",u.attr("name")!=null&&t.TreeGrid.getColumnByField(f._columns,u.prop("name"))!=null?t.TreeGrid.getColumnByField(f._columns,u.attr("name")).textAlign:"center"),u.outerWidth(c).height(25)):u.width("165px");break;case"SELECT":u.width(c).height(23)}u.is(":disabled")||g||u.is(":hidden")&&typeof u.data("ejDropDownList")!="object"||f._isEnterKeyPressed||(f._focusElements(u.closest("td")),g=!0)}h.predecessorMapping&&(tt=[{id:"SS",text:"Start-Start",value:"Start-Start"},{id:"SF",text:"Start-Finish",value:"Start-Finish"},{id:"FS",text:"Finish-Start",value:"Finish-Start"},{id:"FF",text:"Finish-Finish",value:"Finish-Finish"}],d=[],r.requestType!=="add"&&(d=f._predecessorEditCollection()),n("#treegrid"+f._id+"predecessoredit").ejTreeGrid({dataSource:d,allowSorting:!1,allowAdding:!0,columns:[{headerText:"ID",field:"id",width:"50px",allowEditing:!1},{headerText:"TaskName",field:"name",editType:t.TreeGrid.EditingType.Dropdown,dropdownData:f._taskNameCollection(),width:"170px"},{headerText:"Type",field:"type",editType:t.TreeGrid.EditingType.Dropdown,dropdownData:tt,width:"80px"},{headerText:"Offset",field:"offset",editType:t.TreeGrid.EditingType.Numeric,width:"50px"}],enableAltRow:!0,editSettings:{allowAdding:!0,allowDeleting:!0,allowEditing:!0,editMode:"cellEditing"},endEdit:n.proxy(f._preEndEdit,f),beginEdit:n.proxy(f._preBeginEdit,f),rowSelected:n.proxy(f._deleteDisableEnable,f),treeColumnIndex:5}),h.selectedItem&&h.selectedItem.hasChildRecords&&r.requestType!=="add"?(f.enbleDisableDeletePreButton("disable"),f.enbleDisableAddPreButton("disable")):(f.enbleDisableDeletePreButton("disable"),f.enbleDisableAddPreButton("enable")))},enbleDisableDeletePreButton:function(t){var i=this;t==="enable"?(n(".e-deletepre").unbind("click",n.proxy(i._deletepredecessor,i)),n(".e-deletepre").bind("click",n.proxy(i._deletepredecessor,i)),n(".e-deletepre").addClass("e-enable"),n(".e-deletepre").removeClass("e-disable")):(n(".e-deletepre").unbind("click",n.proxy(i._deletepredecessor,i)),n(".e-deletepre").addClass("e-disable"),n(".e-deletepre").removeClass("e-enable"))},enbleDisableAddPreButton:function(t){var i=this;t==="enable"?(n(".e-addpre").unbind("click",n.proxy(i._addpredecessor,i)),n(".e-addpre").bind("click",n.proxy(i._addpredecessor,i)),n(".e-addpre").addClass("e-enable"),n(".e-addpre").removeClass("e-disable")):(n(".e-addpre").unbind("click",n.proxy(i._addpredecessor,i)),n(".e-addpre").addClass("e-disable"),n(".e-addpre").removeClass("e-enable"))},_disableAddButton:function(){var i=this,u=n("#treegrid"+i._id+"predecessoredite-table"),f=!1,e=u[0].rows.length,t,r;for(i.enbleDisableAddPreButton("disable"),t=0;t<e;t++)r=u[0].rows[t],r.cells.length===4&&r.cells[1].innerText===""&&(f=!0);f||i.enbleDisableAddPreButton("enable")},_addpredecessor:function(){var i=this,r={},u;r.requestType=t.TreeGrid.Actions.Save;r._cAddedRecord={item:{id:"",name:"",type:"",offset:""},hasChildRecords:!1,level:0};i.enbleDisableAddPreButton("disable");u=n("#treegrid"+i._id+"predecessoredit").ejTreeGrid("option","selectedRowIndex");n("#treegrid"+i._id+"predecessoredit").ejTreeGrid("clearSelection",u);n("#treegrid"+i._id+"predecessoredit").ejTreeGrid("processBindings",r)},_deletepredecessor:function(){var i=this,r=n("#treegrid"+i._id+"predecessoredit").ejTreeGrid("option","selectedRowIndex");({}).requestType=t.TreeGrid.Actions.Delete;r!==-1&&(n("#treegrid"+i._id+"predecessoredit").ejTreeGrid("deleteRow"),i.enbleDisableDeletePreButton("disable"));i._disableAddButton()},getColumnIndexByField:function(n){var r=this,i=r.model.columns,u=i.length,t=0;for(t;t<u;t++)if(i[t].field==n)break;return t},getIndexofresourceInfo:function(n,t){var r=t.resourceInfo,i=0,f=r&&r.length,u=[];for(i;i<f;i++)u.push(n.indexOf(r[i]));return u},_focusElements:function(n){if(n.length){n.focus();var t=n.children();t[0].tagName.toLowerCase()=="select"||t[0].tagName.toLowerCase()=="input"?(t.focus().select(),t[0].focus()):t.find(".e-field.e-dropdownlist").length?t.find(".e-ddl").focus():t.find("input,select").select().focus()}},renderDiaglogButton:function(n,i){var f="EditDialog_",r=this,e=r.model,h=t.buildTag("input","",{"border-radius":"3px"},{type:"button",id:f+r._id+"_Save"}),l=r._editDialogTexts.saveButton,c,o,s,u;return h.ejButton({cssClass:e.cssClass,text:l,width:"70"}),c=r._editDialogTexts.cancelButton,o=t.buildTag("input","",{"margin-left":"20px","border-radius":"3px"},{type:"button",id:f+r._id+"_Cancel"}),o.ejButton({cssClass:e.cssClass,text:c,width:"70"}),s=t.buildTag("input","",{"margin-left":"20px","border-radius":"3px"},{type:"button",id:f+r._id+"_Delete"}),s.ejButton({cssClass:e.cssClass,text:"Delete",width:"70"}),u=t.buildTag("div","",{"margin-top":"20px",float:"right","margin-bottom":"15px","margin-right":"15px"},{"class":"e-editform-btn"}),u.append(h),u.append(s),u.append(o),n.appendTo(i),u.appendTo(i),i},_toolbarItemLeave:function(){},_renderToolBar:function(){var i=this,f=i.model,u=t.buildTag("div.e-gantttoolbar#e-gantttoolbar"+i._id,"",{height:"50px"},{id:i._id+"_toolbarItems"}),e=t.buildTag("ul","",{width:i._ganttWidth},{}),o,r;return!t.isNullOrUndefined(f.toolbarSettings.toolbarItems)&&f.toolbarSettings.toolbarItems.length&&i._renderLi(e),u.append(e),o=t.buildTag("ul"),u.append(o),r={},r.click=i._toolBarClick,r.cssClass="",r.rtl=!1,r.itemSeparator=!1,r.itemLeave=i._toolbarItemLeave,r.fields={id:"",tooltipText:"",imageUrl:"",text:"",imageAttributes:"",spriteCSS:"",htmlAttributes:""},u.ejToolbar(r),u.ejToolbar("disableItem",i._disabledToolItems),i._disabledToolItems=n(),u},_renderLi:function(n){var f=this,r=f.model.toolbarSettings.toolbarItems,e=r.length,i=0,u;for(i;i<e;i++)u=t.buildTag("li","",{},{id:f._id+"_"+r[i],tabindex:"0"}),r[i]!=="search"&&u.css({width:"30px",height:"24px"}),f._renderLiContent(u,r[i]),n.append(u)},_renderLiContent:function(i,r){var f,u;switch(r){case"add":f=t.buildTag("span.e-addnewitem e-toolbaricons e-icon e-gantt-add","",{});i.attr("title","Add");this.model.editSettings.allowAdding||this._disabledToolItems.push(i.get(0));break;case"edit":f=t.buildTag("span.e-edititem e-toolbaricons e-icon e-gantt-edit","",{});i.attr("title","Edit");this.selectedItem()||this._disabledToolItems.push(i.get(0));break;case"delete":i.attr("title","Delete");f=t.buildTag("span.e-deleteitem e-toolbaricons e-icon e-gantt-delete","",{});this.selectedItem()||this._disabledToolItems.push(i.get(0));break;case"update":i.attr("title","Update");f=t.buildTag("span.e-saveitem e-toolbaricons e-icon e-gantt-save e-disabletool","",{});this._disabledToolItems.push(i.get(0));break;case"cancel":i.attr("title","Cancel");f=t.buildTag("span.e-cancel e-toolbaricons e-icon e-gantt-cancel e-disabletool","",{});this._disabledToolItems.push(i.get(0));break;case"indent":i.attr("title","Indent");u=t.buildTag("span.e-indent e-toolbaricons e-icon e-disabletool e-gantt-indent","",{},{});i.append(u);this._disabledToolItems.push(i.get(0));break;case"outdent":i.attr("title","Outdent");u=t.buildTag("span.e-outdent e-toolbaricons e-icon e-disabletool e-gantt-outdent","",{},{});i.append(u);this._disabledToolItems.push(i.get(0));break;case"expandAll":i.attr("title","ExpandAll");u=t.buildTag("span.e-expandall e-toolbaricons e-icon e-gantt-expandall","",{},{});i.append(u);break;case"collapseAll":i.attr("title","CollapseAll");u=t.buildTag("span.e-collapseall e-toolbaricons e-icon e-gantt-collapseall","",{},{});i.append(u);break;case"search":u=t.buildTag("input.e-ejinputtext","",{margin:"4px","text-indent":"4px"},{type:"text",placeholder:"Search"},{color:"#E8E9E9"});i.css({float:"right",padding:"2px"});i.attr("title","Search");i.addClass("e-search");i.append(u);this.model.allowSearching=!0;u.keydown(n.proxy(this._keyDown,this))}i.append(f)},_keyDown:function(n){n.which===13&&this._toolbarOperation(this._id+"_search",n.currentTarget.value)},_updateToolbarOptions:function(t){var c=this,i=c.model,f=n(n(".e-addnewitem")[0]).parent(),e=n(n(".e-edititem")[0]).parent(),o=n(n(".e-deleteitem")[0]).parent(),s=n(n(".e-indent")[0]).parent(),h=n(n(".e-outdent")[0]).parent(),r,u;t.length?(r=[],i.editSettings.allowAdding&&f&&r.push(f.removeClass("e-disable")[0]),i.editSettings.allowEditing&&e&&r.push(e.removeClass("e-disable")[0]),i.editSettings.allowDeleting&&o&&r.push(o.removeClass("e-disable")[0]),s&&s.length&&s&&r.push(s.removeClass("e-disable")[0]),h&&h.length&&h&&r.push(h.removeClass("e-disable")[0]),n(".e-gantttoolbar").ejToolbar("disableItem",r)):(u=[],i.editSettings.allowAdding&&f&&u.push(f[0]),i.selectedItem&&(i.editSettings.allowEditing&&e&&u.push(e[0]),i.editSettings.allowDeleting&&o&&u.push(o[0]),c.updateIndentOutdentOption(i.selectedItem)),n(".e-gantttoolbar").ejToolbar("enableItem",u))},_renderGantt:function(){var i=this,r,u,f=parseInt(i._ganttWidth);r=(2*i._commonColumnWidth+3)/f*100;r=r<30?r:30;u=100-r-700/f;n("#e-ejSpliter"+i._id).ejSplitter({height:i._ganttHeight,width:i._ganttWidth,orientation:t.Orientation.Horizontal,properties:[{paneSize:r+"%",collapsible:!1},{paneSize:u+"%",collapsible:!1}],windowResizing:!0,resize:n.proxy(i._onResize,i)})},_renderTreeGrid:function(){var i=this,t=i.model;i._$treegridHelper=n("#ejTreeGrid"+i._id).ejTreeGrid({enableAltRow:t.enableAltRow,allowColumnResize:t.allowColumnResize,enableVirtualization:t.enableVirtualization,allowSorting:t.allowSorting,allowMultiSorting:t.allowMultiSorting,sortSettings:t.sortSettings,allowSelection:t.allowSelection,selectionType:"single",selectedRowIndex:t.selectedRowIndex,allowSearching:t.allowSearching,allowKeyboardNavigation:t.allowKeyboardNavigation,cssClass:t.cssClass,locale:t.locale,editSettings:t.editSettings,rowTemplate:t.rowTemplate,rowDataBound:t.rowDataBound,queryCellInfo:t.queryCellInfo,dataSource:t.dataSource,flatRecords:t.ganttRecords,parentRecords:t.parentRecords,records:i._rows,ids:i._ids,columns:i._columns,dateFormat:t.dateFormat,resourceInfoMapping:t.resourceInfoMapping,resourceNameMapping:t.resourceNameMapping,resourceIdMapping:t.resourceIdMapping,taskIdMapping:t.taskIdMapping,showGridCellTooltip:t.showGridCellTooltip,showGridExpandCellTooltip:t.showGridExpandCellTooltip,taskNameMapping:t.taskNameMapping,startDateMapping:t.startDateMapping,endDateMapping:t.endDateMapping,childMapping:t.childMapping,durationMapping:t.durationMapping,progressMapping:t.progressMapping,predecessorMapping:t.predecessorMapping,rowHeight:t.rowHeight,emptyRecordText:i._emptyRecordText,isFromGantt:i._isFromGantt,treeColumnIndex:t.treeColumnIndex})},_renderGanttChart:function(){var i=this,t=this.model;i._$ganttchartHelper=n("#ejGanttChart"+i._id).ejGanttChart({dataSource:t.dataSource,scheduleStartDate:t.scheduleStartDate,scheduleEndDate:t.scheduleEndDate,startDateMapping:t.startDateMapping,endDateMapping:t.endDateMapping,progressMapping:t.progressMapping,durationMapping:t.durationMapping,childPropertyName:t.childMapping,predecessorMapping:t.predecessorMapping,enableVirtualization:t.enableVirtualization,highlightWeekends:t.highlightWeekends,milestoneMapping:t.milestoneMapping,enableRowHover:t.enableRowHover,perDayWidth:i._perDayWidth,includeWeekend:t.includeWeekend,connectorlineWidth:t.connectorlineWidth,scheduleHeaderSettings:t.scheduleHeaderSettings,taskbarBackground:t.taskbarBackground,progressbarBackground:t.progressbarBackground,connectorLineBackground:t.connectorLineBackground,parentTaskbarBackground:t.parentTaskbarBackground,parentProgressbarBackground:t.parentProgressbarBackground,holidays:t.holidays,dateFormat:t.dateFormat,locale:t.locale,enableTaskbarTooltip:t.enableTaskbarTooltip,enableTaskbarDragTooltip:t.enableTaskbarDragTooltip,ganttRecords:t.ganttRecords,parentRecords:t.parentRecords,rows:i._rows,scheduleWeeks:i._scheduleWeeks,progressbarHeight:t.progressbarHeight,tooltipTemplate:t.taskbarTooltipTemplate,tooltipTemplateId:t.taskbarTooltipTemplateId,progressbarTooltipTemplate:t.progressbarTooltipTemplate,progressbarTooltipTemplateId:t.progressbarTooltipTemplateId,queryTaskbarInfo:t.queryTaskbarInfo,showTaskNames:t.showTaskNames,showProgressStatus:t.showProgressStatus,showResourceNames:t.showResourceNames,resourceInfoMapping:t.resourceInfoMapping,resourceNameMapping:t.resourceNameMapping,enableProgressBarResizing:t.enableProgressBarResizing,allowGanttChartEditing:t.allowGanttChartEditing,taskbarEditingTooltipTemplateId:t.taskbarEditingTooltipTemplateId,taskbarEditingTooltipTemplate:t.taskbarEditingTooltipTemplate,_ids:i._ids,stripLines:t.stripLines,_predecessorCollection:i._predecessorsCollection,weekendBackground:t.weekendBackground,allowKeyboardNavigation:t.allowKeyboardNavigation,updatedGanttRecords:i._updatedGanttRecords,renderBaseline:t.renderBaseline,baselineColor:t.baselineColor,editSettings:t.editSettings,columnHeaderTexts:i._columnHeaderTexts,localizedDays:i._days,localizedMonths:i._months,rowHeight:t.rowHeight})},createTreeGridColumns:function(){var r=this,u=r.model,i,f=[],n=u.taskIdMapping;return n.length&&(i={field:"taskId",headerText:r._columnHeaderTexts.taskId,width:30,editType:t.Gantt.EditingType.String,mappingName:n},f.push(i)),n=u.taskNameMapping,n.length&&(i={field:"taskName",headerText:r._columnHeaderTexts.taskName,width:150,editType:t.Gantt.EditingType.String,mappingName:n},f.push(i)),n=u.startDateMapping,n.length&&(i={field:"startDate",headerText:r._columnHeaderTexts.startDate,width:150,editType:t.Gantt.EditingType.DatePicker,mappingName:n},f.push(i)),n=u.endDateMapping,n.length&&(i={field:"endDate",headerText:r._columnHeaderTexts.endDate,width:150,editType:t.Gantt.EditingType.DatePicker,mappingName:n},f.push(i)),n=u.resourceInfoMapping,n.length&&(i={field:"resourceInfo",headerText:r._columnHeaderTexts.resourceInfo,width:150,editType:t.Gantt.EditingType.Dropdown,mappingName:n,dropdownData:u.resources},f.push(i)),n=u.durationMapping,n.length&&(i={field:"duration",headerText:r._columnHeaderTexts.duration,width:150,editType:t.Gantt.EditingType.Numeric,mappingName:n},f.push(i)),n=u.progressMapping,n.length&&(i={field:"status",headerText:r._columnHeaderTexts.status,width:150,editType:t.Gantt.EditingType.Numeric,mappingName:n},f.push(i)),n=u.predecessorMapping,n.length&&(i={field:"predecessor",headerText:r._columnHeaderTexts.predecessor,width:150,editType:t.Gantt.EditingType.String,mappingName:n},f.push(i)),f},_createGanttRecords:function(n){var r=this,f=r.model,i=f.ganttRecords,o=n.length,e=0,u,s=f.parentRecords,l=f.allowSorting,a=f.enableAltRow,h=r._rows,c=r._ids,t;for(e;e<o;e++)u=r._createGanttRecord(n[e],0,null),r._storedIndex++,u.isAltRow=r._storedIndex%2==0?!1:!0,u.index=r._storedIndex,h[r._storedIndex]=u,c[r._storedIndex]=u.taskId.toString(),i.push(u),s.push(u),u.childRecords&&r._addNestedGanttRecords(u.childRecords);for(t=0;t<i.length;t++)i[t].isMilestone&&(i[t].startDate=i[t].parentItem?i[t].parentItem.endDate:i[t-1].endDate,i[t].left=i[t]._calculateLeft(r._scheduleWeeks[0],r._perDayWidth,f.includeWeekend,f.dateFormat,f.endDateMapping,r._holidays)),i[t].parentItem&&(i[t].predecessor||r._updateParentItem(i[t]),i[t].hasChildRecords||i[t]._updateParentProgress(i[t].parentItem))},_addNestedGanttRecords:function(n){var t=this,o=t._rows,s=t._ids,h=t.model,c=h.ganttRecords,u=0,l=n.length,f=[],r,v=h.enableAltRow;for(u;u<l;u++)if(r=n[u],t._storedIndex++,r.isAltRow=t._storedIndex%2==0?!1:!0,r.index=t._storedIndex,o[t._storedIndex]=r,s[t._storedIndex]=r.taskId.toString(),c.push(r),f=r.childRecords,f){var e=0,a=f.length,i=null;for(e;e<a;e++)i=f[e],t._storedIndex++,i.isAltRow=t._storedIndex%2==0?!1:!0,i.index=t._storedIndex,o[t._storedIndex]=i,s[t._storedIndex]=i.taskId.toString(),c.push(i),i.childRecords&&t._addNestedGanttRecords(i.childRecords)}},_createGanttRecord:function(n,r,u,f){var s=this,e,o=s.model,c=n[o.childMapping],p=n[o.startDateMapping],w=n[o.endDateMapping],h=n[o.durationMapping]?n[o.durationMapping]:0,v=n[o.progressMapping]?n[o.progressMapping]:0,y=s._getDateFromFormat(p),l=s._getDateFromFormat(w),b=n[o.resourceInfoMapping],a=n[o.predecessorMapping],k=n[o.baselineStartDateMapping],d=s._getDateFromFormat(k,o.dateFormat),g=n[o.baselineEndDateMapping],nt=s._getDateFromFormat(g,o.dateFormat);return e=new t.Gantt.GanttRecord,e.taskId=n[o.taskIdMapping],e.taskName=n[o.taskNameMapping],e.startDate=s.getFormatedDate(y),e.endDate=s.getFormatedDate(l),e.baselineStartDate=s.getFormatedDate(d),e.baselineEndDate=s.getFormatedDate(nt),e.duration=h,!h&&l&&(e._calculateDuration(y,l,o.includeWeekend,s._holidays,n[o.milestoneMapping]),h=e.duration),e.isMilestone=h==0?!0:n[o.milestoneMapping]?!1:n[o],e.duration=e.isMilestone&&h!=0?0:h,e.status=v,e.predecessor=a&&e._calculatePredecessor(a),e.resourceInfo=b&&e._setResourceInfo(n[o.resourceInfoMapping],o.resourceIdMapping,o.resourceNameMapping,o.resources),e.parentItem=u,e.item=n,e.isSelected=s.selectedItem()?s.selectedItem()[o.taskIdMapping?o.taskIdMapping:"Task Id"]==e.taskId?!0:!1:!1,e.level=r,e.left=e._calculateLeft(s._scheduleWeeks[0],s._perDayWidth,o.includeWeekend,o.dateFormat,o.endDateMapping,s._holidays),e.width=e._calculateWidth(s._perDayWidth,o.includeWeekend,s._holidays,o.dateFormat),e.width=e.width==0?26:e.width,e.progressWidth=e._calculateProgressWidth(e.width,v),e.childRecords=c&&s._createChildRecords(c,r+1,e),e.hasChildRecords=c?!0:!1,e.expanded=f!==i?f:c?c.length>0:!1,o.enableVirtualization===!1&&(e.isExpanded=!0),o.renderBaseline&&e.baselineStartDate&&e.baselineEndDate?(e.baselineLeft=e._calculateBaselineLeft(s._scheduleWeeks[0],s._perDayWidth,o.includeWeekend,o.dateFormat,o.endDateMapping,s._holidays),e.baselineWidth=e._calculateTaskbarWidth(s._perDayWidth,o.dateFormat)):o.renderBaseline=!1,a&&s._predecessorsCollection.push(e),e},_getHoliday:function(){var n;if(this.model.holidays!=null){var t=this.model.holidays,i=[],r=t.length;if(r>0){for(n=0;n<r;n++)i[n]=this.getDateType(t[n].day);return i}}return!1},_getStringHolidays:function(){var n;if(this._holidays!=null&&this._holidays.length>0){var t=this._holidays,i=[],r=t.length;if(r>0){for(n=0;n<r;n++)i[n]=Globalize.format(t[n],this.model.dateFormat);return i}}return!1},_createChildRecords:function(n,t,i){for(var u=[],e=this,r=0,o=n.length,f,r=0;r<o;r++)n[r]&&(f=e._createGanttRecord(n[r],t,i),u.push(f));return u},_createResourceInfoCollection:function(n){var i=this,t=0,r=n.length;for(t;t<r;t++)i._resourceInfoCollection.push(i._createResourceInfo(n[t]))},_createResourceInfo:function(n){var i=this.model,t={};return t.resourceId=n[i.resourceIdMapping],t.resourceName=n[i.resourceNameMapping],t},_calculateWeekSplit:function(n,t){var i=this,r=n.getDay()==0?n.getDate()-7:n.getDate()-n.getDay();n.setDate(r);do i._scheduleWeeks.push(new Date(n)),n.setDate(n.getDate()+7);while(!(n>=t))},_updatePredecessors:function(){var u=this,i=0,f=u._predecessorsCollection,h=f.length,e,o,r=0,n,s,t;for(i;i<h;i++)for(e=f[i],o=e.predecessor,s=o.length,r=0;r<s;r++)t=o[r],n=u.model.ganttRecords[u._ids.indexOf(t.from)],t.to=e.taskId.toString(),n&&(n.predecessor?n.predecessor.push(t):(n.predecessor=[],n.predecessor.push(t),f.push(n)))},getDateType:function(n){if(n!=null){if(typeof n=="object")return n;var t=new RegExp("\\-","g"),i=new RegExp("\\.","g");return n=n.replace(t,"/"),n=n.replace(i,"/"),new Date(n)}return null},getFormatedDate:function(n){return Globalize.format(n,this.model.dateFormat)},_getProgressWidth:function(n,t){return n*t/100},_wireEvents:function(){var t=this,u=t.model,i=n("#ejTreeGrid"+t._id),r=n("#ejGanttChart"+t._id),f=t._$ejGantt;t._on(t.element,"click",t.clickHandler);t._on(t.element,"contextmenu",t._rightClick);i.ejTreeGrid({rowSelecting:n.proxy(t.rowSelecting,t)});i.ejTreeGrid({rowSelected:n.proxy(t.rowSelected,t)});i.ejTreeGrid({actionBegin:n.proxy(t.actionBegin,t)});i.ejTreeGrid({actionComplete:n.proxy(t.actionComplete,t)});u.queryCellInfo&&i.ejTreeGrid({queryCellInfo:n.proxy(t._queryCellInfo,t)});u.rowDataBound&&i.ejTreeGrid({rowDataBound:n.proxy(t._rowDataBound,t)});i.ejTreeGrid({beginEdit:n.proxy(t._beginEdit,t)});i.ejTreeGrid({endEdit:n.proxy(t._endEdit,t)});i.ejTreeGrid({expanding:n.proxy(t.expanding,t)});i.ejTreeGrid({collapsing:n.proxy(t.collapsing,t)});i.ejTreeGrid({expanded:n.proxy(t.expanded,t)});i.ejTreeGrid({collapsed:n.proxy(t.collapsed,t)});i.ejTreeGrid({refreshRow:n.proxy(t.refreshRow,t)});i.ejTreeGrid({cancelEditCell:n.proxy(t.cancelEditCell,t)});r.ejGanttChart({rowSelecting:n.proxy(t.rowSelecting,t)});r.ejGanttChart({rowSelected:n.proxy(t.rowSelected,t)});r.ejGanttChart({rowHover:n.proxy(t._ganttChartRowHover,t)});r.ejGanttChart({actionBegin:n.proxy(t.actionBegin,t)});r.ejGanttChart({actionComplete:n.proxy(t.chartactionComplete,t)});r.ejGanttChart({refreshRow:n.proxy(t.refreshRowData,t)});r.ejGanttChart({zooming:n.proxy(t.zoomingChart,t)});r.ejGanttChart({queryTaskbarInfo:n.proxy(t.queryTaskbarInfo,t)});r.ejGanttChart({expanding:n.proxy(t.expanding,t)});r.ejGanttChart({collapsing:n.proxy(t.collapsing,t)});r.ejGanttChart({expanded:n.proxy(t.expanded,t)});r.ejGanttChart({collapsed:n.proxy(t.collapsed,t)});r.ejGanttChart({taskbarEditing:n.proxy(t.taskbarEditing,t)});r.ejGanttChart({taskbarEdited:n.proxy(t.taskbarEdited,t)});f.ejSplitter({allowResizing:n.proxy(t._onResize,t)});t._enableEditingEvents()},_onResize:function(n){var t=this;t._$treegridHelper.ejTreeGrid("refreshScroller",n.prevPane.size);t._$ganttchartHelper.ejGanttChart("refreshScroller",n.nextPane.size)},clickHandler:function(t){var r=this,i;r._clearContextMenu();t.toElement&&(t.toElement.tabIndex=0,t.toElement.focus());r._isinBeginEdit&&(i=n(t.target),i.closest("td").hasClass("e-editedcell")||i.hasClass("e-date")||i.hasClass("e-arrow")||i.hasClass("e-down-arrow")?!i.closest("td").hasClass("e-editedcell")||i.hasClass("e-date")||i.hasClass("e-arrow")||i.hasClass("e-down-arrow")||i.focus():(r._$treegridHelper.ejTreeGrid("cancelEditCell"),r._isinBeginEdit=!1))},_rightClick:function(t){var i=this,o=n(t.target),s=o[0].parentNode,e,h,r,u,f={};i._$treegridHelper.ejTreeGrid("disableTooltip");n(s).hasClass("e-chartcell")||n(s).hasClass("e-ganttrowcell")?(e=i._$ganttchartHelper.ejGanttChart("getGanttChartRows"),f.target="ejTreeGrid"):(e=n(i._$treegridHelper.ejTreeGrid("getRows")),f.target="ejGanttChart");h=o.closest("tr");r=e.index(h);i._currentViewData=i.getCurrentViewData();u=i._currentViewData[r];r=i._updatedGanttRecords.indexOf(u);f.data=u;f.recordIndex=r;u&&i.model.enableContextMenu?(i._contextMenuItems=[],i._contextMenuItems=i._getContextMenuItems(),i._subContextMenuItems=[],i._subContextMenuItems=i._getsubContextMenuItems(),i._updateIndentOutdentContextmenuOption(r,u),i._renderContextMenu(t,r,u),i.rowSelected(f),i._$treegridHelper.ejTreeGrid("selectRows",r),i._$ganttchartHelper.ejGanttChart("selectRows",r)):(i.model.dataSource==null||i.model.dataSource.length==0)&&(i._contextMenuItems=[],i._subContextMenuItems=[],i._contextMenuItems=i._getContextMenuItems(),i._updateIndentOutdentContextmenuOption(r,u),i._renderContextMenu(t,r,u))},_updateIndentOutdentContextmenuOption:function(n,t){var i=this,r;n===0?i._contextMenuItems.splice(2,2):n>0?t.level===0?i._contextMenuItems.splice(3,1):(r=i._updatedGanttRecords[n-1],t.level-r.level==1&&i._contextMenuItems.splice(2,1),t.isMilestone&&i._contextMenuItems.splice(3,1),r.isMilestone&&i._contextMenuItems.splice(2,1)):n<0&&(i._contextMenuItems.splice(0,1),i._contextMenuItems.splice(1,3));i._searchString.length>0&&i._contextMenuItems.splice(1,1)},queryTaskbarInfo:function(n){this._trigger("queryTaskbarInfo",n)},zoomingChart:function(n){var t=this;t.reRenderChart(n.delta)},refreshRowData:function(n){var t=this;t._$treegridHelper.ejTreeGrid("refreshRow",n.index)},expanding:function(n){var i=this,r;i._trigger("expanding",n)||(i.model.enableVirtualization?t.TreeGrid.sendExpandCollapseRequest(i,n):(i._isInExpandCollapse=!0,t.TreeGrid.sendExpandCollapseRequest(i,n),i._isInExpandCollapse=!1,r=i._expandedRecordsCount,i._$ganttchartHelper.ejGanttChart("reRenderGanttGridLinesTable",r)))},collapsing:function(n){var i=this,r;i._trigger("collapsing",n)||(i.model.enableVirtualization?t.TreeGrid.sendExpandCollapseRequest(i,n):(i._gridRows=i.getRows(),i._isInExpandCollapse=!0,t.TreeGrid.sendExpandCollapseRequest(i,n),i._isInExpandCollapse=!1,r=i._collapsedRecordCount,i._$ganttchartHelper.ejGanttChart("reRenderGanttGridLinesTable",-r)))},expanded:function(n){var t=this;t._updatedGanttRecords=t.getUpdatedRecords();t._currentViewData=t.getCurrentViewData();t.model.enableVirtualization&&(t.model.predecessorMapping&&(t._isValidationEnabled=!1,t._$ganttchartHelper.ejGanttChart("clearConnectorLines"),t._connectorlineIds=[],t._connectorLinesCollection=[],t._createConnectorLinesCollection()),t._$ganttchartHelper.ejGanttChart("refreshHelper",t._currentViewData,t._updatedGanttRecords));t._trigger("expanded",n)},collapsed:function(n){var t=this;t._updatedGanttRecords=t.getUpdatedRecords();t._currentViewData=t.getCurrentViewData();t.model.enableVirtualization&&(t.model.predecessorMapping&&(t._isValidationEnabled=!1,t._connectorlineIds=[],t._connectorLinesCollection=[],t._$ganttchartHelper.ejGanttChart("clearConnectorLines"),t._createConnectorLinesCollection()),t._$ganttchartHelper.ejGanttChart("refreshHelper",t._currentViewData,t._updatedGanttRecords));t._trigger("collapsed",n)},refreshRow:function(n){var t=this;t._$ganttchartHelper.ejGanttChart("refreshRow",n.recordIndex)},_enableEditingEvents:function(){var t=this,i=t.model;(i.editSettings.editMode=="normal"||i.editSettings.editMode=="dialogTemplate"||i.toolbarSettings.showToolbar&&(i.editSettings.allowAdding&&i.toolbarSettings.toolbarItems.indexOf("add")!==-1||i.editSettings.allowEditing&&i.toolbarSettings.toolbarItems.indexOf("index")!==-1))&&t._on(n("#"+t._id+"_dialogEdit"),"click keypress","#EditDialog_"+t._id+"_Save ,#EditDialog_"+t._id+"_Cancel,#EditDialog_"+t._id+"_Delete",t._buttonClick)},cancelEditCell:function(){var t=this;t.model.toolbarSettings.toolbarItems.indexOf("cancel")!==-1&&t._disabledToolItems.push(n(n(".e-cancel")[0]).parent()[0]);t.model.toolbarSettings.toolbarItems.indexOf("save")!==-1&&t._disabledToolItems.push(n(n(".e-saveitem")[0]).parent()[0]);n(".e-gantttoolbar").ejToolbar("disableItem",t._disabledToolItems)},_keyPressed:function(){},_buttonClick:function(t){if(t.keyCode!==i&&t.keyCode!=13)return!0;var r=this,u=r.model;return u.editSettings.editMode=="normal"||u.editSettings.editMode=="dialogTemplate"||u.toolbarSettings.showToolbar&&(u.editSettings.allowAdding&&u.toolbarSettings.toolbarItems.indexOf("add")!==-1||u.editSettings.allowEditing&&u.toolbarSettings.toolbarItems.indexOf("index")!==-1)?t.target.id=="EditDialog_"+r._id+"_Save"?r._sendSaveRequest()||n("#"+r._id+"_dialogEdit").ejDialog("close"):t.target.id=="EditDialog_"+r._id+"_Cancel"?n("#"+r._id+"_dialogEdit").ejDialog("close"):t.target.id=="EditDialog_"+r._id+"_Delete"&&(r._$treegridHelper.ejTreeGrid("deleteRow"),n("#"+r._id+"_dialogEdit").ejDialog("close")):r._sendCancelRequest(),!1},rowSelecting:function(n){var t=this;return t.model.rowSelecting&&t._trigger("rowSelecting",n),!0},rowSelected:function(t){var i=this,r;t.target=="ejTreeGrid"&&i._$ganttchartHelper.ejGanttChart("selectRows",t.recordIndex);t.target=="ejGanttChart"&&i._$treegridHelper.ejTreeGrid("selectRows",t.recordIndex);i.model.selectedRowIndex=t.recordIndex;this.selectedItem(t.data);i.model.toolbarSettings.showToolbar&&((i.model.toolbarSettings.toolbarItems.indexOf("indent")!==-1||i.model.toolbarSettings.toolbarItems.indexOf("outdent")!==-1)&&i.updateIndentOutdentOption(t.data),r=[],i.model.editSettings.allowDeleting&&i.model.toolbarSettings.toolbarItems.indexOf("delete")!==-1&&r.push(n(n(".e-deleteitem")[0]).parent()[0]),i.model.editSettings.allowEditing&&i.model.toolbarSettings.toolbarItems.indexOf("edit")!==-1&&r.push(n(n(".e-edititem")[0]).parent()[0]),n(".e-gantttoolbar").ejToolbar("enableItem",r));i.model.rowSelected&&i._trigger("rowSelected",t)},_treeGridRowHover:function(n){var t=this;n.reason=="mouseenter"?t._$ganttchartHelper.ejGanttChart("addRowHover",n.index):n.reason=="mouseleave"&&t._$ganttchartHelper.ejGanttChart("removeRowHover")},updateIndentOutdentOption:function(t){var u=this;u._updatedGanttRecords=u.getUpdatedRecords();var e=u._updatedGanttRecords.indexOf(t),f,r=n(n(".e-indent")[0]).parent()[0],i=n(n(".e-outdent")[0]).parent()[0];e===0?(r&&n(".e-gantttoolbar").ejToolbar("disableItem",r),i&&n(".e-gantttoolbar").ejToolbar("disableItem",i),n(".e-gantttoolbar").ejToolbar("disableItem",[])):t.level===0?(r&&n(".e-gantttoolbar").ejToolbar("enableItem",r),i&&n(".e-gantttoolbar").ejToolbar("disableItem",i)):(f=u._updatedGanttRecords[e-1],t.level-f.level==1?(i&&n(".e-gantttoolbar").ejToolbar("enableItem",i),r&&n(".e-gantttoolbar").ejToolbar("disableItem",r)):(r&&n(".e-gantttoolbar").ejToolbar("enableItem",r),i&&n(".e-gantttoolbar").ejToolbar("enableItem",i)),t.isMilestone&&i&&n(".e-gantttoolbar").ejToolbar("disableItem",i),f.isMilestone&&i&&n(".e-gantttoolbar").ejToolbar("disableItem",r))},_ganttChartRowHover:function(n){var t=this;n.reason=="mouseenter"?t._$treegridHelper.ejTreeGrid("addRowHover",n.index):n.reason=="mouseleave"&&t._$treegridHelper.ejTreeGrid("removeRowHover")},actionComplete:function(t){var i=this,r=i.model,f,u;i._updatedGanttRecords=i.getUpdatedRecords();i._currentViewData=i.getCurrentViewData();i._gridRows=i.getRows();i._ganttChartRows=i.getGanttChartRows();(t.requestType==="searching"||t.requestType==="sorting")&&(i._$ganttchartHelper.ejGanttChart("clearConnectorLines"),i._$ganttchartHelper.ejGanttChart("refreshHelper",i._currentViewData,i._updatedGanttRecords),i._isValidationEnabled=!1,i._connectorlineIds=[],i._connectorLinesCollection=[],i._createConnectorLinesCollection());t.requestType==="delete"&&(r.selectedItem=null,r.selectedRowIndex=-1,f=0,!t.data.expanded&&t.data.hasChildRecords&&(f=i._$treegridHelper.ejTreeGrid("getChildCount",t.data,0),i._totalCollapseRecordCount-=f),r.parentRecords.indexOf(t.data)!==-1&&r.parentRecords.splice(r.parentRecords.indexOf(t.data),1),i.model.predecessorMapping&&(i._connectorlineIds=[],i._connectorLinesCollection=[],i._$ganttchartHelper.ejGanttChart("clearConnectorLines"),i._createConnectorLinesCollection()),i._$ganttchartHelper.ejGanttChart("refreshHelper",i.getCurrentViewData(),i.getUpdatedRecords(),i._totalCollapseRecordCount),i._isValidationEnabled=!1,i.model.toolbarSettings.showToolbar&&i.model.toolbarSettings.toolbarItems.indexOf("delete")!==-1&&(u=[],u.push(n(n(".e-deleteitem")[0]).parent()[0]),i.model.toolbarSettings.toolbarItems.indexOf("indent")!==-1&&u.push(n(n(".e-indent")[0]).parent()[0]),i.model.toolbarSettings.toolbarItems.indexOf("outdent")!==-1&&u.push(n(n(".e-outdent")[0]).parent()[0]),n(".e-gantttoolbar").ejToolbar("disableItem",u)),i.updateAltRow(i.getUpdatedRecords,0,1),i.model.enableVirtualization||i._$ganttchartHelper.ejGanttChart("reRenderGanttGridLinesTable",-1));t.requestType==="selection"&&i._$ganttchartHelper.ejGanttChart("selectRows",t.recordIndex);t.requestType==="rowHover"&&i._$ganttchartHelper.ejGanttChart("addRowHover",t.index);t.requestType==="scroll"&&i._$ganttchartHelper.ejGanttChart("onScrollHelper",t.delta);t.requestType==="save"&&(t._cAddedRecord?(i._$treegridHelper.ejTreeGrid("renderRecord",t),i._ids=i._$treegridHelper.ejTreeGrid("getUpdatedIds"),i.model.ganttRecords=i._$treegridHelper.ejTreeGrid("getUpdatedRecords"),i._updatedGanttRecords=i._$treegridHelper.ejTreeGrid("getUpdatedRecords"),i._rows=i._$treegridHelper.ejTreeGrid("getFlatRecords"),i._currentViewData=i._$treegridHelper.ejTreeGrid("getCurrentViewData"),i._$ganttchartHelper.ejGanttChart("setUpdatedRecords",i._currentViewData,i._updatedGanttRecords,i._rows,i._ids),i._$ganttchartHelper.ejGanttChart("renderRecord",t,i._totalCollapseRecordCount),t._cAddedRecord.parentItem||r.parentRecords.splice(t._cAddedRecord.index,0,t._cAddedRecord),i._$ganttchartHelper.ejGanttChart("reRenderGanttGridLinesTable",1)):t._cModifiedData&&(t._cModifiedData.left=t._cModifiedData._calculateLeft(i._scheduleWeeks[0],i._perDayWidth,r.includeWeekend,r.dateFormat,r.endDateMapping,i._holidays),t._cModifiedData.width=t._cModifiedData._calculateWidth(i._perDayWidth,r.includeWeekend,i._holidays,r.dateFormat),t._cModifiedData.progressWidth=t._cModifiedData._getProgressWidth(t._cModifiedData.width,t._cModifiedData.status),i.refreshGanttRecord(t._cModifiedData),t._cModifiedData.predecessor&&t.previousValue&&i._removeConnectorLine(t.previousValue,t._cModifiedData)),i.model.predecessorMapping&&((t._cAddedRecord&&t._cAddedRecord.predecessor||t._cModifiedData&&t._cModifiedData.predecessor)&&(i._isValidationEnabled=!0),t._cAddedRecord?(i._$ganttchartHelper.ejGanttChart("clearConnectorLines"),i._connectorlineIds=[],i._connectorLinesCollection=[],i._createConnectorLinesCollection(),i._addConnectorLine(t._cAddedRecord)):t._cModifiedData&&(t.previousValue&&i._removeConnectorLine(t.previousValue,t._cModifiedData),i._addConnectorLine(t._cModifiedData),t._cModifiedData.predecessor&&(i._isMileStoneEdited=t._cModifiedData.isMilestone,i._updatedConnectorLineCollection=[],i._connectorlineIds=[],i._validatePredecessor(t._cModifiedData),i._updatedConnectorLineCollection.length>0&&i._$ganttchartHelper.ejGanttChart("appendConnectorLine",i._updatedConnectorLineCollection)),t._cModifiedData.parentItem&&i._updateParentItem(t._cModifiedData))));i._ganttActionCompleteTrigger(t)},chartactionComplete:function(n){var t=this;t._updatedGanttRecords=t.getUpdatedRecords();t._currentViewData=t.getCurrentViewData();n.requestType==="rowHover"&&t._$treegridHelper.ejTreeGrid("addRowHover",n.index);n.requestType==="scroll"&&(t._isRenddered=!1,t.model.enableVirtualization&&t.model.predecessorMapping&&(t._connectorLinesCollection.length>0&&t._clearConnectorLines(),t._connectorlineIds=[],t._connectorLinesCollection=[],t._createConnectorLinesCollection()),n.vscrollExsist&&n.delta!==i&&t._$treegridHelper.ejTreeGrid("onScrollHelper",n.delta),t._isRenddered=!0);n.requestType==="selection"&&t._$treegridHelper.ejTreeGrid("selectRows",n.recordIndex);t._ganttActionCompleteTrigger(n)},_clearConnectorLines:function(){var n=this,t=0,h=n._connectorLinesCollection.length,f,e,o,i,s,r=0,u;for(t;t<h;t++)for(f=n._connectorLinesCollection[t],e=f&&f.ConnectorLineId.split("child")[1],o=n._rows[n._ids.indexOf(e)],i=o.predecessor,s=i&&i.length,r=0;r<s;r++)u=i[r],u.to===e&&u.isdrawn&&(u.isdrawn=!1);n._$ganttchartHelper.ejGanttChart("clearConnectorLines")},taskbarEditing:function(n){this._trigger("taskbarEditing",n)},_refreshParent:function(n){this.refreshGanttRecord(n);n.parentItem&&this._refreshParent(n.parentItem)},taskbarEdited:function(n){var i=this,t=n.data,u=i.model,r=new Date(i._scheduleWeeks[0]),e,s,o=0,l,c,f,h,a,v;if(i._isValidationEnabled=!1,n.dragging)n.previousData.left!==t.left&&(e=t.left%i._perDayWidth,s=(t.left-e)/i._perDayWidth,o=0,e>0&&(o=e>=i._perDayWidth/2?1:0),r.setDate(r.getDate()+s+o),t.left=e>=i._perDayWidth/2?t.left+i._perDayWidth-e:t.left-e,this._stringHolidays&&this._stringHolidays.indexOf(t._getFormatedDate(r,u.dateFormat))!=-1&&(r.setDate(r.getDate()+1),t.left+=i._perDayWidth),this.model.includeWeekend==!1&&(r.getDay()===0?(r.setDate(r.getDate()+1),t.left+=i._perDayWidth):r.getDay()===6&&(r.setDate(r.getDate()+2),t.left+=2*i._perDayWidth)),this._stringHolidays&&this._stringHolidays.indexOf(t._getFormatedDate(r,u.dateFormat))!=-1&&(r.setDate(r.getDate()+1),t.left+=i._perDayWidth),t.startDate=t._getFormatedDate(r,u.dateFormat),t._calculateEndDate(u.includeWeekend,this._holidays,u.dateFormat),t.width=t._calculateTaskbarWidth(i._perDayWidth,u.dateFormat),t.progressWidth=t._getProgressWidth(t.width,t.status),i._isValidationEnabled=!0);else if(n.rightResizing){if(n.previousData.width!==t.width){if(s=t.width/i._perDayWidth,l=t.width%i._perDayWidth,o=l>=i._perDayWidth/2?1:0,c=i._getDateFromFormat(t.startDate),f=t._dateUpdate(c,s-1+o),u.holidays&&u.holidays.length)for(h=0,a=u.holidays.length,h=0;h<a;h++)v=new Date(this._holidays[h]),f===v&&f.setDate(f.getDate()-1);this.model.includeWeekend==!1&&(f.getDay()==0?f.setDate(f.getDate()-2):f.getDay()==6&&f.setDate(f.getDate()-1));this._stringHolidays&&this._stringHolidays.indexOf(t._getFormatedDate(f,u.dateFormat))!=-1&&(f.setDate(f.getDate()+1),f.getDay()==6&&f.setDate(f.getDate()+2));t.endDate=t._calculateFormatedDate(f,u.dateFormat);t._calculateDuration(c,f,u.includeWeekend,u.holidays);t.width=t._calculateTaskbarWidth(i._perDayWidth,u.dateFormat);t.progressWidth=t._getProgressWidth(t.width,t.status);i._isValidationEnabled=!0}}else n.leftResizing?n.previousData.left!==t.left&&(e=t.left%i._perDayWidth,s=(t.left-e)/i._perDayWidth,o=0,e>0&&(o=e>=i._perDayWidth/2?1:0),r.setDate(r.getDate()+s+o),this._stringHolidays&&this._stringHolidays.indexOf(t._getFormatedDate(r,u.dateFormat))!=-1&&(r.setDate(r.getDate()+1),t.left+=i._perDayWidth),this.model.includeWeekend==!1&&(r.getDay()===0?(r.setDate(r.getDate()+1),t.left+=i._perDayWidth):r.getDay()===6&&(r.setDate(r.getDate()+2),t.left+=2*i._perDayWidth)),this._stringHolidays&&this._stringHolidays.indexOf(t._getFormatedDate(r,u.dateFormat))!=-1&&(r.setDate(r.getDate()+1),t.left+=i._perDayWidth),t.left=e>=i._perDayWidth/2?t.left+i._perDayWidth-e:t.left-e,t.startDate=t._calculateFormatedDate(r,u.dateFormat),t._calculateDuration(r,i._getDateFromFormat(t.endDate),u.includeWeekend,u.holidays),t.width=t._calculateTaskbarWidth(i._perDayWidth,u.dateFormat),t.progressWidth=t._getProgressWidth(t.width,t.status),i._isValidationEnabled=!0):n.progressResizing&&(t.status=t._getProgressPercent(t.width,t.progressWidth),t.parentItem&&t._updateParentProgress(t.parentItem),i._refreshParent(t));i._isValidationEnabled&&(i._updateEditedGanttRecord(t),t.predecessor&&(i._isMileStoneEdited=t.isMilestone,i._updatedConnectorLineCollection=[],i._connectorlineIds=[],i._validatePredecessor(t),i._updatedConnectorLineCollection.length>0&&i._$ganttchartHelper.ejGanttChart("appendConnectorLine",i._updatedConnectorLineCollection)),t.parentItem&&i._updateParentItem(t),i.refreshGanttRecord(t));i._trigger("taskbarEdited",n)},actionBegin:function(n){var t=this;t._trigger("actionBegin",n)||n.requestType==="beginedit"&&t._sendEditRequest()},_ganttActionCompleteTrigger:function(n){this._trigger("actionComplete",n)},_queryCellInfo:function(n){this._trigger("queryCellInfo",n)},_beginEdit:function(t){var i=this;if(i._trigger("beginEdit",t),i._isinBeginEdit=!0,i.model.toolbarSettings.showToolbar){var r=[],u=n(n(".e-cancel")[0]).parent()[0],f=n(n(".e-saveitem")[0]).parent()[0];u&&r.push(u);f&&r.push(f);n(".e-gantttoolbar").ejToolbar("enableItem",r)}},_endEdit:function(t){var i=this,r;i._isinBeginEdit=!1;t.isModified&&(i._currentViewData=i._$treegridHelper.ejTreeGrid("getCurrentViewData"),i._isValidationEnabled=!0,i._updateEditedGanttRecords(t));i.refreshGanttRecord(t.data);delete t.isModified;i.model.toolbarSettings.showToolbar&&(r=[],i.model.toolbarSettings.toolbarItems.indexOf("cancel")!==-1&&r.push(n(n(".e-cancel")[0]).parent()[0]),i.model.toolbarSettings.toolbarItems.indexOf("delete")!==-1&&r.push(n(n(".e-saveitem")[0]).parent()[0]),n(".e-gantttoolbar").ejToolbar("disableItem",r));i._trigger("endEdit",t)},_rowDataBound:function(n){this._trigger("rowDataBound",n)},_refreshToolBar:function(){var t=n("#"+this._id+"_toolbarItems");t.find("li").removeClass("e-hover")},_toolBarClick:function(t){var e=this,f=n(this.itemsContainer).closest(".e-gantt"),u=f.ejGantt("instance"),r=f.attr("id");if((u._clearContextMenu(),t.event==i&&t.target.tagName=="INPUT"&&t.currentTarget.id==r+"_search")||(n.isFunction(n.fn.ejDatePicker)&&n("#"+r+"EditForm").find(".e-datepicker").ejDatePicker("hide"),f.ejGantt("instance")._trigger("toolBarClick",t)))return!1;switch(t.currentTarget.id){case r+"_add":u._toolbarOperation(r+"_add");break;case r+"_edit":u._toolbarOperation(r+"_edit");break;case r+"_delete":u._toolbarOperation(r+"_delete");break;case r+"_update":u._toolbarOperation(r+"_update");break;case r+"_cancel":u._toolbarOperation(r+"_cancel");break;case r+"_search":u._toolbarOperation(r+"_search",n(t.currentTarget).find("input").val());break;case r+"_indent":u._toolbarOperation(r+"_indent");break;case r+"_outdent":u._toolbarOperation(r+"_outdent");break;case r+"_expandAll":u._toolbarOperation(r+"_expandAll");break;case r+"_collapseAll":u._toolbarOperation(r+"_collapseAll")}return!1},_toolbarOperation:function(t,i){var f=this.element,e=f.ejGantt("instance"),u=f.attr("id"),r=this;switch(t){case u+"_add":r._sendAddRequest();break;case u+"_edit":r._sendEditRequest();break;case u+"_delete":r._$treegridHelper.ejTreeGrid("deleteRow");break;case u+"_update":r._$treegridHelper.ejTreeGrid("endEdit");r.model.toolbarSettings.toolbarItems.indexOf("cancel")!==-1&&r._disabledToolItems.push(n(n(".e-cancel")[0]).parent()[0]);r.model.toolbarSettings.toolbarItems.indexOf("save")!==-1&&r._disabledToolItems.push(n(n(".e-saveitem")[0]).parent()[0]);n(".e-gantttoolbar").ejToolbar("disableItem",r._disabledToolItems);r._disabledToolItems=[];break;case u+"_cancel":r._$treegridHelper.ejTreeGrid("cancelEditCell");r.model.toolbarSettings.toolbarItems.indexOf("cancel")!==-1&&r._disabledToolItems.push(n(n(".e-cancel")[0]).parent()[0]);r.model.toolbarSettings.toolbarItems.indexOf("save")!==-1&&r._disabledToolItems.push(n(n(".e-saveitem")[0]).parent()[0]);n(".e-gantttoolbar").ejToolbar("disableItem",r._disabledToolItems);r._disabledToolItems=[];break;case u+"_search":r._$treegridHelper.ejTreeGrid("search",i);r._searchString=i;r._updateToolbarOptions(i);break;case u+"_indent":r._sendIndentRequest();break;case u+"_outdent":r._sendOutdentRequest();break;case u+"_expandAll":r._expandAll();break;case u+"_collapseAll":r._collapseAll()}return r._refreshToolBar(),!1},_setModel:function(t){var i=this,r,u=i.model;for(r in t)switch(r){case"sortSettings":i._sendSortingRequest(t[r]);break;case"destroy":i.destroy();break;case"allowGanttChartEditing":i._ganttChartEditing(t[r]);break;case"enableProgressBarResizing":i._resizeProgressbar(t[r]);break;case"enableTaskbarTooltip":i._showTooltip(t[r]);break;case"enableTaskbarDragTooltip":i._showEditingTooltip(t[r]);break;case"enableAltRow":i._updateAltRow(t[r]);break;case"locale":u.ganttRecords=[];u.parentRecords=[];i._clearContextMenu();u.locale=t[r];i.element.ejGantt("destroy").ejGantt(u);break;case"allowSelection":i._updateRowSelection(t[r]);break;case"editSettings":n.extend(u.editSettings,t[r]);i._updateEditMode(t[r]);break;case"taskbarBackground":i._updateTaskbarBackground(t[r]);break;case"progressbarBackground":i._updateProgressbarBackground(t[r]);break;case"parentTaskbarBackground":i._updateParentTaskbarBackground(t[r]);break;case"parentProgressbarBackground":i._updateParentProgressbarBackground(t[r]);break;case"showTaskNames":i._updateRenderTaskNames(t[r]);break;case"showProgressStatus":i._updateRendeProgressStatus(t[r]);break;case"showResourceNames":i._updateRenderResourceNames(t[r]);break;case"progressbarHeight":i._updateProgressbarHeight(t[r]);break;case"baselineColor":i._updateBaselineColor(t[r]);break;case"renderBaseline":i._updateRenderBaseline(t[r]);break;case"allowColumnResize":i._updateAllowColumnResize(t[r]);break;case"allowKeyboardNavigation":i._updateAllowKeyboardNavigation(t[r]);break;case"selectedItem":i._updateSelectedItem(t[r]);break;case"dataSource":u.dataSource=[];u.ganttRecords=[];u.parentRecords=[];u.dataSource=t[r];i.element.ejGantt("destroy").ejGantt(u);break;case"showGridCellTooltip":i._updateShowGridCellTooltip(t[r]);break;case"showGridExpandCellTooltip":i._updateShowGridExpandCellTooltip(t[r]);break;case"highlightWeekends":i._updateHighlightWeekends(t[r]);break;case"connectorLineBackground":i._updateConnectorLineBackground(t[r]);break;case"connectorlineWidth":i._updateConnectorlineWidth(t[r]);break;case"weekendBackground":i._updateWeekendBackground(t[r]);break;case"enableContextMenu":i.model.enableContextMenu=t[r]}},_updateWeekendBackground:function(n){var t=this;this.model.weekendBackground=n;t._$ganttchartHelper.ejGanttChart("updateWeekendBackground",n)},_updateConnectorlineWidth:function(n){var t=this;this.model.connectorlineWidth=n;t._$ganttchartHelper.ejGanttChart("updateConnectorlineWidth",n);t._$ganttchartHelper.ejGanttChart("clearConnectorLines");t._$ganttchartHelper.ejGanttChart("renderConnectorLines",t._connectorLinesCollection)},_updateConnectorLineBackground:function(n){var t=this;this.model.connectorLineBackground=n;t._$ganttchartHelper.ejGanttChart("updateConnectorLineBackground",n);t._$ganttchartHelper.ejGanttChart("clearConnectorLines");t._$ganttchartHelper.ejGanttChart("renderConnectorLines",t._connectorLinesCollection)},_updateHighlightWeekends:function(n){var t=this;this.model.highlightWeekends=n;t._$ganttchartHelper.ejGanttChart("updateHighlightWeekends",n)},_updateShowGridCellTooltip:function(n){var t=this;t._$treegridHelper.ejTreeGrid("updateShowGridCellTooltip",n)},_updateShowGridExpandCellTooltip:function(n){var t=this;t._$treegridHelper.ejTreeGrid("updateShowGridExpandCellTooltip",n)},_updateSelectedItem:function(n){var t=this,i={};n[t.model.taskIdMapping]!=null&&(i.recordIndex=t._ids.indexOf(n[t.model.taskIdMapping].toString()),i.item=t.model.ganttRecords[i.recordIndex],i.target="ejTreeGrid",t.rowSelected(i),t._$treegridHelper.ejTreeGrid("selectRows",i.recordIndex),t._$ganttchartHelper.ejGanttChart("selectRows",i.recordIndex),t._$ganttchartHelper.ejGanttChart("updateSelectedItem",i.recordIndex))},_updateAllowKeyboardNavigation:function(n){var t=this;t._$treegridHelper.ejTreeGrid("updateAllowKeyboardNavigation",n);t._$ganttchartHelper.ejGanttChart("updateAllowKeyboardNavigation",height)},_updateAllowColumnResize:function(n){var t=this;t._$treegridHelper.ejTreeGrid("updateAllowColumnResize",n)},_updateProgressbarHeight:function(n){var t=this;this.model.progressbarHeight=n;t._$ganttchartHelper.ejGanttChart("updateProgressbarHeight",n)},_updateBaselineColor:function(n){var t=this;this.model.baselineColor=n;t._$ganttchartHelper.ejGanttChart("updateBaselineColor",n)},_updateRenderBaseline:function(n){var t=this;this.model.renderBaseline=n;t._$ganttchartHelper.ejGanttChart("updateRenderBaseline",n);t._$ganttchartHelper.ejGanttChart("renderConnectorLines",t._connectorLinesCollection)},_updateRenderTaskNames:function(n){var t=this;this.model.showTaskNames=n;t._$ganttchartHelper.ejGanttChart("updateRenderTaskNames",n)},_updateRendeProgressStatus:function(n){var t=this;this.model.showProgressStatus=n;t._$ganttchartHelper.ejGanttChart("updateRendeProgressStatus",n)},_updateRenderResourceNames:function(n){var t=this;this.model.showResourceNames=n;t._$ganttchartHelper.ejGanttChart("updateRenderResourceNames",n)},_updateTaskbarBackground:function(n){var t=this;this.model.taskbarBackground=n;t._$ganttchartHelper.ejGanttChart("updateTaskbarBackground",n)},_updateProgressbarBackground:function(n){var t=this;this.model.progressbarBackground=n;t._$ganttchartHelper.ejGanttChart("updateProgressbarBackground",n)},_updateParentTaskbarBackground:function(n){var t=this;this.model.parentTaskbarBackground=n;t._$ganttchartHelper.ejGanttChart("updateParentTaskbarBackground",n)},_updateParentProgressbarBackground:function(n){var t=this;this.model.parentProgressbarBackground=n;t._$ganttchartHelper.ejGanttChart("updateParentProgressbarBackground",n)},_updateEditMode:function(n){var t=this;t._$treegridHelper.ejTreeGrid("updateEditMode",n)},_updateRowSelection:function(n){var t=this;t._$treegridHelper.ejTreeGrid("updateRowSelection",n)},_updateAltRow:function(n){var t=this;t._$treegridHelper.ejTreeGrid("updateAltRow",n)},openAddDialog:function(){this._sendAddRequest()},openEditDialog:function(){this._sendEditRequest()},searchItem:function(n){var t=this;t._$treegridHelper.ejTreeGrid("search",n)},deleteItem:function(){var n=this;n._$treegridHelper.ejTreeGrid("deleteRow")},expandAllItems:function(){this._expandAll()},collapseAllItems:function(){this._collapseAll()},indentItem:function(){this._sendIndentRequest()},outdentItem:function(){this._sendOutdentRequest()},cancelEdit:function(){this.sendCancelRequest()},expandCollapseRecord:function(n){var i=this,t={},r=i.model.ganttRecords[i._ids.indexOf(n)],u=r.expanded==!0?!1:!0;t.data=r;t.recordIndex=i._ids.indexOf(n);t.expanded=u;t.requestType="expandCollapse";i._$treegridHelper.ejTreeGrid("sendExpandCollapseRequest",t)},saveEdit:function(){var n=this;n._$treegridHelper.ejTreeGrid("endEdit")},_showTooltip:function(n){var t=this;this.model.enableTaskbarTooltip=n;t._$ganttchartHelper.ejGanttChart("showTooltip",n)},_showEditingTooltip:function(n){var t=this;this.model.enableTaskbarDragTooltip=n;t._$ganttchartHelper.ejGanttChart("showEditingTooltip",n)},_ganttChartEditing:function(n){var t=this;t.model.allowGanttChartEditing=n;t._$ganttchartHelper.ejGanttChart("ganttChartEditing",n)},_resizeProgressbar:function(n){var t=this;t.model.enableProgressBarResizing=n;t._$ganttchartHelper.ejGanttChart("resizeProgressbar",n)},_sendSortingRequest:function(n){var r=this,t,i;t=n.sortedColumns[0].field;i=n.sortedColumns[0].direction;r._$treegridHelper.ejTreeGrid("sortColumn",t,i)},sendCancelRequest:function(){var t=this;t._$treegridHelper.ejTreeGrid("cancelEditCell");t.model.toolbarSettings.toolbarItems.indexOf("cancel")!==-1&&t._disabledToolItems.push(n(n(".e-cancel")[0]).parent()[0]);t.model.toolbarSettings.toolbarItems.indexOf("save")!==-1&&t._disabledToolItems.push(n(n(".e-saveitem")[0]).parent()[0]);n(".e-gantttoolbar").ejToolbar("disableItem",t._disabledToolItems);t._disabledToolItems=[]},_sendAddRequest:function(){var t=this,r=t._columns,f=r.length,n=0,u={},i={};for(t._isinAddnewRecord=!0,n;n<f;n++)u[r[n].mappingName]="";i.data=u;i.requestType="add";t.renderedEditDialog(i)},_sendEditRequest:function(i){var r=this,e=r.model,u,f;t.isNullOrUndefined(i)?(r._currentTrIndex=r.model.selectedRowIndex,r._$currentTr=n(r._$treegridHelper.ejTreeGrid("getRows")).eq(r.model.selectedRowIndex)):(r._currentTrIndex=i.index(),r._$currentTr=i);f=r._$treegridHelper.ejTreeGrid("getCurrentViewData")[e.selectedRowIndex];u={rowElement:r._$currentTr,data:f};r._trigger("beginEdit",u);u.requestType="beginedit";r.renderedEditDialog(u)},_sendSaveRequest:function(){var o={},ot=document,r=this,s=r.model,c=0,l=ot.getElementById(r._id+"EditForm"),st=l&&l.length,g=n(l).closest("div"),a,ft,y,nt,u={},tt,it,f,rt,e,v,p,ut,h,w,d;if(!this.editFormValidate())return!0;for(c;c<st;c++)a=l[c].name,ft=n(l[c]),a!=i&&(a==""&&(a=l[c].id.replace(r._id,"")),a!=""&&o[a]==null&&(y=t.TreeGrid.getColumnByField(r._columns,a)),y&&l[c].id===r._id+a&&(r._cellEditType=y.editType,nt=r.getCurrentEditCellData(ft,y.dropdownData),r._isinAddnewRecord===!1&&y.mappingName===r.model.predecessorMapping&&(u.previousValue=r._updatePredecessorValue(o,nt)),l[c].type!="checkbox"&&(o[y.mappingName]=nt)));if(o.resourceId&&g.hasClass("e-addedrow")&&(tt=[],n.each(o.resourceId,function(n,t){tt.push(t.resourceId)}),o.resourceId=tt),u.data=o,it=!1,s.predecessorMapping){if(f=[],rt=!0,f=n("#treegrid"+r._id+"predecessoredit").ejTreeGrid("option","dataSource"),n.each(f,function(n,t){t.id.length>0&&t.name.length&&t.type.length||(rt=!1)}),rt){var ht=[],b=[],k=[{id:"SS",text:"Start-Start",value:"Start-Start"},{id:"SF",text:"Start-Finish",value:"Start-Finish"},{id:"FS",text:"Finish-Start",value:"Finish-Start"},{id:"FF",text:"Finish-Finish",value:"Finish-Finish"}],et;for(e=0;e<f.length;e++){for(v={},v.from=o.taskID,v.to=f[e].id,v.isdrawn=!1,v.offset=isNaN(parseInt(f[e].offset))?0:parseInt(f[e].offset),p=0;p<k.length;p++)if(f[e].type==k[p].text){v.predecessorType=k[p].id;et=k[p].id;break}ut=f[e].id+et;f[e].offset=isNaN(parseInt(f[e].offset))?0:parseInt(f[e].offset);f[e].offset!==0&&(ut+=f[e].offset<0?f[e].offset.toString():"+"+f[e].offset.toString());b.push(ut);ht.push(v)}u.predecessorString=b;it=r._editedPredecessorValidation(u)}else return alert("Fill all the columns in predecessor table"),!0;if(it)r._isinAddnewRecord===!1?u.previousValue=r._updatePredecessorValue(o,b.join(",")):o[s.predecessorMapping]=b.join(",");else return!0}return(u.requestType=t.TreeGrid.Actions.Save,u.recordIndex=r.model.selectedRowIndex!==-1?r.model.selectedRowIndex:-1,r._trigger("actionBegin",u))?!0:(g.hasClass("e-editedrow")?u._cModifiedData=r._updateRecord(o):g.hasClass("e-addedrow")&&(w=0,s.selectedItem&&(s.selectedItem.hasChildRecords?(w=s.selectedItem.level+1,h=s.selectedItem,d=0):!s.selectedItem.hasChildRecords&&s.selectedItem.parentItem?(w=s.selectedItem.level,h=s.selectedItem.parentItem,d=h.childRecords.indexOf(s.selectedItem)+1):(w=0,h=null)),u._cAddedRecord=r._createGanttRecord(o,w,h,!1),h&&(h.childRecords.length===d?h.childRecords.push(u._cAddedRecord):h.childRecords.splice(d,0,u._cAddedRecord))),u._cAddedRecord&&(u._cAddedRecord.taskId=r._getNewTaskId(u._cAddedRecord.taskId),u._cAddedRecord.index=u.recordIndex),r.actionComplete(u),r._cModifiedData=null,r._cAddedRecord=null,r._primaryKeyValues=[],r._isinAddnewRecord=!1,!1)},_recordReturnerByID:function(n){for(var r=this,i=r._rows,t=0;t<i.length;t++)if(i[t].taskId.toString()===n.toString())return i[t];return null},_editedPredecessorValidation:function(i){var f=this,l=f._rows,c=i.predecessorString.join(","),u,r,e,o,s,h;if(c.length>0)for(u=f._idFromPredecessor(c),r=0;r<u.length;r++)for(pre_id=u[r],e=[],o=u.slice(0),o.splice(r,1);pre_id!==null;)if(s=[],e.indexOf(pre_id)===-1){if(temp_rec=f._recordReturnerByID(pre_id),h="",!t.isNullOrUndefined(temp_rec.predecessor)&&temp_rec.predecessor.length>0&&(n.each(temp_rec.predecessor,function(n,t){temp_rec.taskId.toString()!==t.from&&s.push(t.from.toString())}),h=temp_rec.predecessor[0].from),i.data.taskID===temp_rec.taskId.toString()||s.indexOf(i.data.taskID)!==-1||o.indexOf(h)!==-1)return alert("Please check the predecessor ,Cyclic defendency is occurs"),!1;if(e.push(pre_id),!t.isNullOrUndefined(temp_rec.predecessor)&&temp_rec.predecessor.length>0)pre_id=temp_rec.predecessor[0].from;else break}else break;return!0},_sendCancelRequest:function(){var i=this,r={};n("#"+i._id+"EditForm").find(".e-datepicker").ejDatePicker("destroy");r.requestType=t.TreeGrid.Actions.Cancel;i.processBindings(r);i._primaryKeyValues=[];i.model.currentData=null},_updatePredecessorValue:function(n,t){var i=this,r,f,c=0,o,s=[],e=0,u,h;for(r=i.selectedItem().predecessor,t.length>0&&(f=i.selectedItem()._calculatePredecessor(t)),f&&(c=f.length),u=0,h=0,r&&(h=r.length),u=0;u<h;u++)o=r[u],o.from===i.selectedItem().taskId.toString()&&s.push(o);for(e=0;e<c;e++)s.push(f[e]);return i.selectedItem().predecessor=s,i.model.predecessorMapping&&(i.selectedItem().item[i.model.predecessorMapping]=t),r},getCurrentEditCellData:function(i,r){var f=this,o=f.model,e,u;if(n("#"+f._id+"EditForm").length){u="";switch(f._cellEditType){case t.TreeGrid.EditingType.String:u=i.val();break;case t.TreeGrid.EditingType.Numeric:u=i.ejNumericTextbox("getValue");i.ejNumericTextbox("getValue");break;case t.TreeGrid.EditingType.Dropdown:u=f._getSelectedItem(i.ejDropDownList("model.selectedItems"),r);break;case t.TreeGrid.EditingType.Boolean:u=i.is(":checked");break;case t.TreeGrid.EditingType.DatePicker:e=i.ejDatePicker("model.value");u=Globalize.format(e,o.dateFormat);break;case t.TreeGrid.EditingType.DateTimePicker:u=i.ejDateTimePicker("model.value")}return u}return null},_getSelectedItem:function(t,i){var r=0,f=t.length,u=[];if(i)for(r=0;r<f;r++)n.each(i,function(n,i){t[r]===n&&u.push(i)});return u},_updateRecord:function(n){var r=this,i=r._columns,f=i.length,t=0,u=r.getCurrentViewData()[r.model.selectedRowIndex];for(t;t<f;t++)i[t].field.toString()!=="predecessor"&&(u[i[t].field]=n[i[t].mappingName]);return u},_sendIndentRequest:function(){var r=this,u=r.model,i=r.getCurrentData(),e={},o={},n,s,h,f;if(t.isNullOrUndefined(i))alert("There is no gantt Record was not selected to perform the Indent ");else{if(r._updatedGanttRecords=r.getUpdatedRecords(),n=r._updatedGanttRecords[u.selectedRowIndex-1],n.isMilestone)return;e.data=i;e.requestType="beginedit";r._trigger("actionBegin",e)||(i.parentItem?(s=i.parentItem.childRecords.indexOf(i),i.parentItem.childRecords.splice(s,1),i.parentItem.item[u.childMapping].splice(s,1)):(h=u.dataSource.indexOf(i.item),u.dataSource.splice(h,1)),i.level===n.level?n.childRecords?n.expanded||(n.childRecords.splice(n.childRecords.length,0,i),n.item[u.childMapping].splice(n.childRecords.length,0,i.item)):(n.childRecords=[],n.childRecords.push(i),i.parentItem=n,n.item[u.childMapping]=[],n.item[u.childMapping].push(i.item)):n.level-i.level==1?(n.parentItem.childRecords.splice(n.parentItem.childRecords.length,0,i),n.parentItem.item[u.childMapping].splice(n.parentItem.childRecords.length,0,i.item),i.parentItem=n.parentItem):n.level-i.level>1&&(f=r.getParentItem(n,i.level),f.childRecords.splice(f.childRecords.length,0,i),f.item[u.childMapping].splice(f.childRecords.length,0,i.item),i.parentItem=f));n.hasChildRecords=n.childRecords?n.childRecords.length>0:!1;n.expanded=n.childRecords?n.childRecords.length>0:!1;i.level+=1;r.updateLevel(i,1);i._updateParentProgress(i);r.refreshGanttRecord(i);r.refreshGanttRecord(n);r.updateIndentOutdentOption(i);n.predecessor&&n.predecessor.length>0&&u.predecessorMapping&&(r._removeConnectorLine(n.predecessor,n),r._removePredecessor(n.predecessor,n),n.predecessor=null,n.item[u.predecessorMapping]="");o.data=i;o.requestType="endedit";this._trigger("actionComplete",o)}},_removePredecessor:function(n,t){var u=this,o=n.length,i=0,e=u.model,r,f;for(i;i<o;i++)n[i].from!==t.taskId.toString()?r=u._rows[u._ids.indexOf(n[i].from)]:n[i].to!==t.taskId.toString()&&(r=u._rows[u._ids.indexOf(n[i].to)]),f=r.predecessor.indexOf(n[i]),f!==-1&&r.predecessor.splice(f,1),r.item[e.predecessorMapping]&&(r.item[e.predecessorMapping]=u._predecessorToString(r.predecessor,r))},_predecessorToString:function(n,t){var e=this,u=[],i=0,f=n.length,r;for(i;i<f;i++)t.taskId.toString()!==n[i].from&&(r=n[i].from+n[i].predecessorsType,n[i].offset=isNaN(n[i].offset)?0:n[i].offset,n[i].offset!==0&&(n[i].offset<0?r+=n[i].offset.toString():n[i].offset>0&&(r+="+"+n[i].offset.toString())),u.push(r));return u.join(",")},getParentItem:function(n,t){var i=this;return n.parentItem.level===t?n.parentItem:i.getParentItem(n.parentItem,t)},_sendOutdentRequest:function(){var i=this,r=i.model,n=i.getCurrentData(),o={},s={},u,f;if(t.isNullOrUndefined(n))alert("There is no gantt Record was not selected to perform the Outdent ");else{if(o.data=n,o.requestType="actionBegin",!i._trigger("actionBegin",o)){if(n.level===0)return;if(i._updatedGanttRecords=i.getUpdatedRecords(),n.isMilestone)return;if(n.parentItem.childRecords&&(u=n.parentItem.childRecords.indexOf(n),n.parentItem.childRecords.splice(u,1),n.parentItem.item[r.childMapping].splice(u,1),n.parentItem.childRecords.length==0&&(n.parentItem.childRecords=null,n.parentItem.expanded=!1,n.parentItem.haschildRecords=!1),i.refreshGanttRecord(n.parentItem)),n.parentItem.parentItem?(f=n.parentItem.parentItem.childRecords.indexOf(n.parentItem),n.parentItem.parentItem.childRecords.splice(f+1,0,n),n.parentItem.parentItem.item[r.childMapping].splice(f+1,0,n.item),i.refreshGanttRecord(n.parentItem.parentItem)):(f=r.dataSource.indexOf(n.parentItem.item),r.dataSource.splice(f+1,0,n.item)),n.hasChildRecords&&i._updateChildLevel(n),n.level-=1,u!==-1&&i._removeChildRecords(n,u),n.parentItem=n.parentItem.parentItem,n.hasChildRecords&&i._refreshChildLevel(n),n.hasChildRecords=n.childRecords?n.childRecords.length>0:!1,n.expanded=n.childRecords?n.childRecords.length>0:!1,n.hasChildRecords){var e=0,c=n.childRecords.length,h=null;for(e;e<c;e++)h=n.childRecords[e],h&&i.refreshGanttRecord(h)}n._updateParentProgress(n);i.refreshGanttRecord(n)}i.updateIndentOutdentOption(n);n.predecessor&&n.predecessor.length>0&&i.model.predecessorMapping&&(i._removeConnectorLine(n.predecessor,n),i._removePredecessor(n.predecessor,n),n.predecessor=null,n.item[r.predecessorMapping]="");s.data=n;s.requestType="actionComplete";this._trigger("actionComplete",s)}},_refreshChildLevel:function(n){for(var r=this,t=0,u=n.childRecords,f=u.length,i,t=0;t<f;t++)i=u[t],r.refreshGanttRecord(i),i.hasChildRecords&&r._refreshChildLevel(i)},_updateChildLevel:function(n){for(var u=this,i=0,r=n.childRecords,f=r.length,t,i=0;i<f;i++)t=r[i],t.level=t.level-1,t.hasChildRecords&&u._updateChildLevel(t)},_removeChildRecords:function(n,t){if(n.parentItem){var e=this,u=e.model,r=0,i,o=0,f=0;for(parentChildRecords=n.parentItem.childRecords,parentChildRecordsLength=parentChildRecords&&parentChildRecords.length,r=t;r<parentChildRecordsLength;r++)i=parentChildRecords[r],i&&(n.childRecords?(f=n.childRecords.length,n.childRecords.splice(f,0,i),n.item[u.childMapping].splice(f,0,i.item)):(n.childRecords=[],n.item[u.childMapping]=[],n.childRecords.push(i),n.item[u.childMapping].push(i.item)),i.parentItem=n,o++);n.parentItem.childRecords&&(n.parentItem.childRecords.splice(t,o),n.parentItem.childRecords.length==0&&(n.parentItem.childRecords=null,n.parentItem.expanded=!1,n.parentItem.hasChildRecords=!1,e.refreshGanttRecord(n.parentItem)))}},updateChildGanttRecordLevel:function(n,t){for(var r=0,u=this,f=u.model,e=n.parentItem&&n.parentItem.parentItem&&n.parentItem.parentItem.childRecords,o=e&&e.length,i,r=t;r<o;r++)i=e[r],i.childRecords?(i.childRecords.splice(i.childRecords.length,0,i),i.item[f.childMapping].splice(i.childRecords.length,0,i.item)):(i.childRecords=[],i.item[f.childMapping]=[],i&&(i.childRecords.push(i),i.item[f.childMapping].push(i.item))),u.refreshGanttRecord(n.parentItem),n.parentItem=i,++addedChildGanttRecordCount;n.parentItem.childRecords.splice(t,addedChildGanttRecordCount);n.parentItem.childRecords.length==0&&(n.parentItem.childRecords=null,n.parentItem.expanded=!1,n.parentItem.hasChildRecords=!1);u.refreshGanttRecord(n.parentItem)},updateLevel:function(n,t){var f=this,r=0,u=n.childRecords,e=u&&u.length,i;for(r;r<e;r++)i=u[r],i.level+=t,f.refreshGanttRecord(i),i.childRecords&&f.updateLevel(i,t)},addNewGanttRecord:function(){var t=this,n={},i;i=this.model.ganttRecords[this.model.ganttRecords.length].item;n.requestType="save";n._cAddedRecord=jQuery.extend(!0,{},i);n.recordIndex=index+1;t.subContextMenuAction(n);t._clearContextMenu()},getExpandStatus:function(n){var t=n.parentItem;return t!=null?t.expanded===!1?!1:t.parentItem?t.parentItem.expanded===!1?!1:this.getExpandStatus(t.parentItem):!0:!0},subContextMenuAction:function(n){var r=this,i={},u=r.model,f;r._updatedGanttRecords=r.getUpdatedRecords();r._currentViewData=r.getCurrentViewData();r._gridRows=r.getRows();r._ganttChartRows=r.getGanttChartRows();n.requestType==="save"&&n._cAddedRecord&&(i.selectedItem=u.selectedItem,n._cAddedRecord.predecessor=null,r.model.predecessorMapping&&(n._cAddedRecord.item[u.predecessorMapping]=null),i.data=n._cAddedRecord.item,i.data.duration===0&&(i.data.duration=1),i.requestType=t.TreeGrid.Actions.Save,i.recordIndex=n.recordIndex,i._cAddedRecord=r._createGanttRecord(i.data,n._cAddedRecord.level,null),i._cAddedRecord.taskId=r._getNewTaskId(i._cAddedRecord.taskId),u.taskIdMapping&&(i._cAddedRecord.item[u.taskIdMapping]=i._cAddedRecord.taskId),i._cAddedRecord.taskName="New Task "+i._cAddedRecord.taskId,u.taskNameMapping&&(i._cAddedRecord.item[u.taskNameMapping]="New Task "+i._cAddedRecord.taskId),n._cAddedRecord.hasChildRecords&&n.position==="Below"?(i._cAddedRecord.parentItem=u.selectedItem,i._cAddedRecord.level=u.selectedItem.level+1,i._cAddedRecord.expanded=!1):n._cAddedRecord.hasChildRecords&&n.position==="Above"?n._cAddedRecord.parentItem?(i._cAddedRecord.parentItem=n._cAddedRecord.parentItem,i._cAddedRecord.level=n._cAddedRecord.parentItem.level+1,i._cAddedRecord.expanded=!1):(i._cAddedRecord.parentItem=null,i._cAddedRecord.expanded=!1):!n._cAddedRecord.hasChildRecords&&n._cAddedRecord.parentItem?(i._cAddedRecord.parentItem=n._cAddedRecord.parentItem,i._cAddedRecord.level=n._cAddedRecord.parentItem.level+1,i._cAddedRecord.expanded=!1):i._cAddedRecord.parentItem=null,i._cAddedRecord.hasChildRecords=!1,i._cAddedRecord.childRecords=null,i._cAddedRecord.index=n.recordIndex,i._cAddedRecord.isAltRow=(i._cAddedRecord.index+1)%2==0?!1:!0,i.actionRequestType=t.TreeGrid.Actions.ContextMenuAdd,i.position=n.position,u.enableVirtualization||(i._cAddedRecord.isExpanded=r.getExpandStatus(i._cAddedRecord),i._cAddedRecord.isExpanded||(r._totalCollapseRecordCount+=1)),r.actionComplete(i));f=n.recordIndex!=0&&i._cAddedRecord.isExpanded?n.recordIndex+1:n.recordIndex;r._$treegridHelper.ejTreeGrid("selectRows",f);r._$ganttchartHelper.ejGanttChart("selectRows",f)},_getNewTaskId:function(n){var t=this;return t._ids.indexOf(n.toString())==-1?(t._ids.push(n.toString()),n):(n++,t._getNewTaskId(n))},_updateNewTaskId:function(){var t=this,i=t.model;t._ids=[];n.each(t._rows,function(n,i){i&&i.taskId&&t._ids.push(i.taskId.toString())})},contextMenuAction:function(n){var t=this;n.requestType=="contextMenuAdd"&&t._sendAddRequest();n.requestType=="contextMenuIndent"&&t._sendIndentRequest();n.requestType=="contextMenuOutdent"&&t._sendOutdentRequest();n.requestType=="contextMenuDelete"&&t._$treegridHelper.ejTreeGrid("deleteRow");n.requestType=="contextMenuTaskDetails"&&t._sendEditRequest()},_renderContextMenu:function(i,r,u){var f=this,e={},o={},h,c,s,a,l,v;f._clearContextMenu();i||(i=window.event);i.pageX||i.pageY?(h=i.pageX,c=i.pageY):(i.clientX||i.clientY)&&(h=i.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=i.clientY+document.body.scrollTop+document.documentElement.scrollTop);o.requestType="ContextMenuOpen";o.contextMenuItems=f._contextMenuItems;o.innerContextMenuItems=f._subContextMenuItems;f._trigger("contextMenuOpen",o);s=t.buildTag("div.e-contextmenu","",{height:"auto",width:"150px",position:"absolute",left:h+"px",top:c+"px","background-color":"#F0F0F0",border:"1px solid #99bce8","z-index":"10"},{});a=t.buildTag("ul",n.render[f._id+"contextMenuTemplate"](o.contextMenuItems),{height:"auto",width:"auto",top:"0px",display:"inline"},{"data-icon":!1,type:"none","data-role":"list-divider"});l=t.buildTag("div.e-innerContextmenu","",{height:"auto",width:"120px",position:"absolute",left:h+152+"px",top:c+30+"px","background-color":"#F0F0F0",border:"1px solid #99bce8","z-index":"10",visibility:"hidden"},{});v=t.buildTag("ul",n.render[f._id+"subContextMenuTemplate"](o.innerContextMenuItems),{height:"auto",width:"auto",top:"0px",display:"inline"},{"data-icon":!1,type:"none","data-role":"list-divider"});s.append(a);n(document.body).append(s);o.innerContextMenuItems.length>0&&(l.append(v),n(document.body).append(l));n(s).css({height:"auto"});f._on(s,"contextmenu",function(n){n.preventDefault()});n(".e-menuitem").click(function(){var t=n(this).attr("id");switch(t){case"Task":e.requestType="contextMenuTaskDetails";f.contextMenuAction(e);f._clearContextMenu();break;case"Indent":e.requestType="contextMenuIndent";f.contextMenuAction(e);f._clearContextMenu();break;case"Outdent":e.requestType="contextMenuOutdent";f.contextMenuAction(e);f._clearContextMenu();break;case"Delete":e.requestType="contextMenuDelete";f.contextMenuAction(e);f._clearContextMenu();f._$ganttchartHelper.ejGanttChart("reRenderGanttGridLinesTable",-1);break;case"Above":e.requestType="save";e._cAddedRecord=jQuery.extend(!0,{},u);e.recordIndex=r==0?0:r;e.position="Above";f.subContextMenuAction(e);f._clearContextMenu();break;case"Below":e.requestType="save";e._cAddedRecord=jQuery.extend(!0,{},u);e.recordIndex=r;e.position="Below";f.subContextMenuAction(e);f._clearContextMenu();break;case"Open":e.requestType="contextMenuAdd";f.contextMenuAction(e);f._clearContextMenu();break;case"Add":f._setInitialData();break;default:f._clearContextMenu()}});n(".e-menuitem").mouseenter(function(){n(this).addClass("e-contextmenu-mouseover");n(this).attr("id")=="Add"||n(this).attr("id")=="Above"||n(this).attr("id")=="Below"||n(this).attr("id")=="Open"?(n(".e-innerContextmenu").css({visibility:"visible"}),n("#Add").addClass("e-contextmenu-mouseover")):n(".e-innerContextmenu").css({visibility:"hidden"})});n(".e-menuitem").mouseleave(function(){n(this).removeClass("e-contextmenu-mouseover")});i.preventDefault()},_setInitialData:function(){var r={},n=this,t=n.model,f=[],u,i={};n._ids=[];i[t.startDateMapping]=t.scheduleStartDate?t.scheduleStartDate:null;i[t.durationMapping]=5;i[t.taskNameMapping]="New Task 1";i[t.taskIdMapping]="1";f.push(i);(n.model.dataSource==null||n.model.dataSource.length==0)&&(u=n._createGanttRecord(f[0],0,null),u.index=0,r.requestType="save",r._cAddedRecord=jQuery.extend(!0,{},u),r.recordIndex=0,n.actionComplete(r),n._clearContextMenu())},sendExpandCollapseRequest:function(t){var i=this,r=t.data,u=i.model,f=i._currentViewData.indexOf(r),e=n(n(i._gridRows)[f]),o=0,s=r.expanded!==t.expanded;t.expanded?(r.expanded=t.expanded,i._expandedRecordsCount=0,i.expandGanttRecord(r,t.expanded,t),s&&(i._totalCollapseRecordCount-=i._expandedRecordsCount),u.enableAltRow&&i.updateAltRow(r,f,1)):(i._collapsedRecordCount=0,i.collapseGanttRecord(r,t.expanded),s&&(i._totalCollapseRecordCount+=i._collapsedRecordCount),r.expanded=t.expanded,e.find(".e-treegridexpand").removeClass("e-treegridexpand").addClass("e-treegridcollapse"),e.removeClass("e-treegridrowexpand").addClass("e-treegridrowcollapse"),u.enableAltRow&&i.updateAltRow(r,f,i._collapsedRecordCount+1));o=(i._updatedGanttRecords.length-i._totalCollapseRecordCount)*u.rowHeight;i._$ganttchart.ejGanttChart("updateHeight",o);t.expanded?i._trigger("expanded",t):i._trigger("collapsed",t)},expandGanttRecord:function(t,i,r){var u=this,h=".gridrowtaskId"+t.taskId.toString()+"level"+(t.level+1).toString(),c=n(h),f=0,v=c.length,l,e,o=n(h),s=u._currentViewData.indexOf(t),a=n(n(u._gridRows)[s]);for(t.hasChildRecords&&t.childRecords.length>0&&(a.find(".e-treegridcollapse").removeClass("e-treegridcollapse").addClass("e-treegridexpand"),a.removeClass("e-treegridrowcollapse").addClass("e-treegridrowexpand")),u._expandedRecordsCount+=o.length/2,o.length===0&&u.model.allowSearching&&u._searchString.length>0&&r&&u._$treegridHelper.ejTreeGrid("sendExpandCollapseRequest",r),o.css({display:"table-row"}),u.updateConnectorLines(o,i),f;f<v/2;f++)l=c[f],s=n(u._gridRows).index(l),s!==-1&&(e=u._updatedGanttRecords[s],e.isExpanded=!0,e.expanded&&u.expandGanttRecord(e,i))},updateConnectorLines:function(t,i){for(var r=this,s=t.length/2,u=0,e,f,o,u=0;u<s;u++)e=t[u],f=n(r._gridRows).index(e),f!==-1&&(o=r._currentViewData[f],o.isExpanded=i);r._connectorlineIds=[];r._connectorLinesCollection=[];r._$ganttchartHelper.ejGanttChart("clearConnectorLines");r._createConnectorLinesCollection()},collapseGanttRecord:function(t,i){var r=this,s=".gridrowtaskId"+t.taskId.toString()+"level"+(t.level+1).toString(),h=n(s),u=0,l=h.length,c,f,e,o=n(s);for(r._collapsedRecordCount+=o.length/2,o.css({display:"none"}),r.updateConnectorLines(o,i),u;u<l/2;u++)c=h[u],f=n(r._gridRows).index(c),f!==-1&&(e=r.getUpdatedRecords()[f],e.expanded&&r.collapseGanttRecord(e,i))},updateAltRow:function(t,i,r){for(var s=this,u=0,h=s._currentViewData,c=h.length,f=t.isAltRow,e,o=n(s._gridRows),u=i+r;u<c;u++)n(o[u]).css("display")!=="none"&&(e=h[u],e.isAltRow=!f,f=e.isAltRow,f?n(o[u]).addClass("e-alt-row"):n(o[u]).removeClass("e-alt-row"))},renderedEditDialog:function(i){var u=this,f,r,e;switch(i.requestType){case t.TreeGrid.Actions.Add:f=document.createElement("div");n(f).addClass("e-addedrow");f.innerHTML=n.render[u._id+"_JSONDialogEditingTemplate"](i.data);n("#"+u._id+"_dialogEdit").html(n(f));r={};r.cssClass=this.model.cssClass;r.enableModal=!0;r.width="auto";r.enableResize=!1;r.contentSelector="#"+u._id;r.rtl=u.model.rtl;r.allowKeyboardNavigation=!1;e=u._editDialogTexts.addFormTitle;r.title=e;n("#"+u._id+"_dialogEdit").ejDialog(r);n("#"+u._id+"_dialogEdit").ejDialog("open");break;case t.TreeGrid.Actions.BeginEdit:f=document.createElement("div");n(f).addClass("e-editedrow");f.innerHTML=n.render[u._id+"_JSONDialogEditingTemplate"](i.data);n("#"+u._id+"_dialogEdit").html(n(f));r={};r.cssClass=u.model.cssClass;r.rtl=r.rtl;r.width="auto";r.enableResize=!1;r.contentSelector="#"+u._id;r.modal=!0;r.allowKeyboardNavigation=!1;e=u._editDialogTexts.editFormTitle+" "+u.selectedItem().taskName;r.title=e;n("#"+u._id+"_dialogEdit").ejDialog(r);n("#"+u._id+"_dialogEdit").ejDialog("open")}u._refreshEditForm(i)},editFormValidate:function(){return n.isFunction(n.validator)?n("#"+this._id+"EditForm").validate().form():!0},getCurrentData:function(){var n=this,t=n.getUpdatedRecords();return t&&t[n.model.selectedRowIndex]},getCurrentViewData:function(){return this._$treegridHelper.ejTreeGrid("getCurrentViewData")},getRows:function(){return this._$treegridHelper.ejTreeGrid("getRows")},getGanttChartRows:function(){return this._$ganttchartHelper.ejGanttChart("getGanttChartRows")},getUpdatedRecords:function(){return this._$treegridHelper.ejTreeGrid("getUpdatedRecords")},_getToolBarHeight:function(){var t=0;return this.model.toolbarSettings.showToolbar&&(t=n(".e-gantttoolbar").height()),t},_initValidator:function(){var i=this;n("#"+this._id+"EditForm").validate({errorClass:"e-field-validation-error",errorElement:"div",wrapper:"div",errorPlacement:function(r,u){var e=u.closest("td"),f=n(r).addClass("e-error"),o=t.buildTag("div.e-errortail e-toparrow");e.find(".e-error").remove();u.hasClass("e-numerictextbox")?f.insertAfter(u.closest(".e-numeric")):f.insertAfter(u);f.prepend(o);i.model.editSettings.editMode!="normal"&&f.offset({left:u.offset().left});f.fadeIn("slow")}})},setValidation:function(){this._initValidator();for(var n=0;n<this._columns.length;n++)t.isNullOrUndefined(this._columns[n].validationRules)||this.setValidationToField(this._columns[n].field,this._columns[n].validationRules)},setValidationToField:function(i,r){var f=n("#"+this._id+i).length>0?n("#"+this._id+i):n("#"+i),u;f.rules("add",r);u=n("#"+this._id+"EditForm").validate();t.isNullOrUndefined(r.required)||(u.settings.messages.Name={},u.settings.messages.Name.required=t.TreeGrid.getColumnByField(proxy._columns,i).headerText+" is required")},_createConnectorLinesCollection:function(){for(var t=this,c=t._currentViewData.length,u=-1,i,n,f=t._predecessorsCollection,s=f.length,l=s/2,r,o=t.model.enableVirtualization,h,e=0;e<c;e++)(n=t._currentViewData[e],o!==!1||n.isExpanded!==!1)&&t._currentViewData.indexOf(n)!==-1&&(i=n.predecessor,i&&(h=n,t._addPredecessorsCollection(n,i)));if(u=h?f.indexOf(h):-1,u===-1)for(r=0;r<s;r++)(n=f[r],o!==!1||n.isExpanded!==!1)&&(i=n.predecessor,i&&t._addPredecessorsCollection(n,i));else if(u>=0&&u<=l)for(r=0;r<u;r++)(n=f[r],o!==!1||n.isExpanded!==!1)&&(i=n.predecessor,i&&t._addPredecessorsCollection(n,i));else for(r=u;r<s;r++)(n=f[r],o!==!1||n.isExpanded!==!1)&&(i=n.predecessor,i&&t._addPredecessorsCollection(n,i));t._connectorLinesCollection.length>0&&t._$ganttchartHelper&&t._$ganttchartHelper.ejGanttChart("renderConnectorLines",t._connectorLinesCollection)},_addPredecessorsCollection:function(t,i){var r=this,c,s,u,o,f,l=r.model,e={},h,a;if(i){for(c=i.length,s=0;s<c;s++)(u=i[s],o=r._rows[r._ids.indexOf(u.from)],f=r._rows[r._ids.indexOf(u.to)],!l.enableVirtualization&&(o&&o.isExpanded===!1||f&&f.isExpanded===!1))||r._isValidationEnabled&&!r._isInExpandCollapse&&f&&r._validateChildGanttRecord(o,f,u);for(h=0,n.each(i,function(n,i){return i.to===t.taskId.toString()&&h++,h}),s=0;s<c;s++)if(u=i[s],h>1&&(u.isdrawn=!1),u.isdrawn)u.isdrawn=!1;else{if(o=r._rows[r._ids.indexOf(u.from)],f=r._rows[r._ids.indexOf(u.to)],r._updatedGanttRecords.indexOf(o)===-1||r._updatedGanttRecords.indexOf(f)==-1)continue;if(!l.enableVirtualization&&(o.isExpanded===!1||f.isExpanded===!1))continue;o&&f&&(e=r._createConnectorLineObject(o,f,u),e&&(r._connectorlineIds.length>0&&r._connectorlineIds.indexOf(e.ConnectorLineId)==-1?(r._connectorLinesCollection.push(e),r._connectorlineIds.push(e.ConnectorLineId)):r._connectorlineIds.length==0?(r._connectorLinesCollection.push(e),r._connectorlineIds.push(e.ConnectorLineId)):r._connectorlineIds.indexOf(e.ConnectorLineId)!=-1&&(a=r._connectorlineIds.indexOf(e.ConnectorLineId),r._connectorLinesCollection[a]=e),u.isdrawn=!0))}}},_createConnectorLineObject:function(n,t,i){var r={},h=this,a=h.model,c,l,u=h._updatedGanttRecords.indexOf(n),f=h._updatedGanttRecords.indexOf(t),s=0,e=0,o;if(u!==-1&&f!==-1){if(!a.enableVirtualization)if(o=0,f>u){for(s=0;s<u;s++)h._updatedGanttRecords[s].isExpanded===!1&&++o;for(e=u,u-=o,e;e<f;e++)h._updatedGanttRecords[e].isExpanded===!1&&++o;f-=o}else if(u>f){for(s=0;s<f;s++)h._updatedGanttRecords[s].isExpanded===!1&&++o;for(e=f,f-=o,e;e<u;e++)h._updatedGanttRecords[e].isExpanded===!1&&++o;u-=o}if(u!=-1&&f!=-1)return c=u*a.rowHeight,l=f*a.rowHeight,r.ParentLeft=n.left,r.ChildLeft=t.left,r.ParentWidth=n.width==0?26:n.width,r.ChildWidth=t.width==0?26:t.width,r.ParentTop=c,r.ChildTop=l,r.Height=c>l?c-l:l-c,r.Type=i.predecessorsType,r.ConnectorLineId="parent"+n.taskId+"child"+t.taskId,r.milestoneParent=n.isMilestone?!0:!1,r.milestoneChild=t.isMilestone?!0:!1,r}},_validateChildGanttRecord:function(n,t,i){var r=this,u=r.model,b,f,k,e,v,o=0,c,w,s,h,y,a;o=parseInt(i.offset);switch(i.predecessorsType){case"SS":if(f=r._getDateFromFormat(n.startDate),b=r._getDateFromFormat(t.startDate),b.getTime()!==f.getTime()){t.isMilestone&&f.setDate(f.getDate()-1);r.model.includeWeekend===!1&&r._setBeforeWeekend(f);o&&(f.setDate(f.getDate()+Math.floor(o)),r.model.includeWeekend===!1&&(o<0&&r._setBeforeWeekend(f),o>0&&r._setAfterWeekend(f)));r._stringHolidays&&r._stringHolidays.indexOf(t._getFormatedDate(f,u.dateFormat))!=-1&&f.setDate(f.getDate()+1);t.startDate=t._getFormatedDate(f,u.dateFormat);var d=t.taskId.toString(),p=t.predecessor,l=p.filter(function(n){return n.to===d});l.length>1&&(c=r._getPredecessorDate(t,l,i.predecessorsType),t.isMilestone&&c.setDate(c.getDate()-1),u.includeWeekend===!1&&r._setBeforeWeekend(c),r._getDateFromFormat(t.startDate).getTime()!==c.getTime()&&(h=0,h=r._daydiff(r._getDateFromFormat(t.startDate),c),y=r._getDateFromFormat(c),a=r._calculateWeekendCount(y,h),i.offset=(h-a).toString()),t.startDate=t._getFormatedDate(c,u.dateFormat));t.left=t._calculateLeft(r._scheduleWeeks[0],r._perDayWidth,u.includeWeekend,u.dateFormat,u.endDateMapping,r._holidays);t.width=t._calculateWidth(r._perDayWidth,u.includeWeekend,r._holidays,u.dateFormat)}break;case"SF":if(f=r._getDateFromFormat(n.startDate),k=r._getDateFromFormat(t.endDate),r.dateUpdate(k,1).getTime()!==f.getTime()){f.setDate(f.getDate()-1);r.model.includeWeekend===!1&&r._setBeforeWeekend(f);o&&(f.setDate(f.getDate()+Math.floor(o)),r.model.includeWeekend===!1&&(o<0&&r._setBeforeWeekend(f),o>0&&r._setAfterWeekend(f)));r._stringHolidays&&r._stringHolidays.indexOf(t._getFormatedDate(f,u.dateFormat))!=-1&&f.setDate(f.getDate()+1);t.endDate=t._getFormatedDate(f,u.dateFormat);var d=t.taskId.toString(),p=t.predecessor,l=p.filter(function(n){return n.to===d});l.length>0&&(c=r._getPredecessorDate(t,l,i.predecessorsType),c.setDate(c.getDate()-1),r.model.includeWeekend===!1&&r._setBeforeWeekend(c),r._getDateFromFormat(t.endDate).getTime()!==c.getTime()&&(h=0,h=r._daydiff(r._getDateFromFormat(t.endDate),c),y=r._getDateFromFormat(c),a=r._calculateWeekendCount(y,h),i.offset=(h-a).toString()),t.endDate=t._getFormatedDate(c,u.dateFormat));t.left=t._calculateLeft(r._scheduleWeeks[0],r._perDayWidth,u.includeWeekend,u.dateFormat,u.endDateMapping,r._holidays);t.width=t._calculateWidth(r._perDayWidth,u.includeWeekend,r._holidays,u.dateFormat)}break;case"FS":if(e=r._getDateFromFormat(n.endDate),b=r._getDateFromFormat(t.startDate),r.dateUpdate(e,1).getTime()!==b.getTime()){if(t.isMilestone||e.setDate(e.getDate()+1),o<0?(o*=-1,o-=1,v=-1,u.includeWeekend===!1&&r._setBeforeWeekend(e)):(u.includeWeekend===!1&&r._setAfterWeekend(e),v=1),o){for(w=0;w<o;w++)r.model.includeWeekend===!1&&(v<0&&r._setBeforeWeekend(e),v>0&&r._setAfterWeekend(e)),e.setDate(e.getDate()+v);r.model.includeWeekend===!1&&r._setAfterWeekend(e)}r._stringHolidays&&r._stringHolidays.indexOf(t._getFormatedDate(e,u.dateFormat))!=-1&&e.setDate(e.getDate()+1);t.startDate=t._getFormatedDate(e,u.dateFormat);var p=t.predecessor,d=t.taskId.toString(),l=p&&p.filter(function(n){return n.to===d});if(l&&l.length>0){if(s=r._getPredecessorDate(t,l,i.predecessorsType),t.isMilestone||s.setDate(s.getDate()+1),u.includeWeekend===!1&&r._setAfterWeekend(s),r._getDateFromFormat(t.startDate).getTime()!==s.getTime()&&(h=0,h=r._daydiff(s,r._getDateFromFormat(t.startDate)),y=r._getDateFromFormat(s),a=r._calculateWeekendCount(y,h),i.offset=h>0?(h-a).toString():(h+a).toString()),o){for(w=0;w<o;w++)r.model.includeWeekend===!1&&(v<0&&r._setBeforeWeekend(s),v>0&&r._setAfterWeekend(s)),s.setDate(s.getDate()+v);r.model.includeWeekend===!1&&r._setAfterWeekend(s)}t.startDate=t._getFormatedDate(s,u.dateFormat)}t.left=t._calculateLeft(r._scheduleWeeks[0],r._perDayWidth,u.includeWeekend,u.dateFormat,u.endDateMapping);t.width=t._calculateWidth(r._perDayWidth,u.includeWeekend,r._holidays,u.dateFormat)}break;case"FF":if(e=r._getDateFromFormat(n.endDate),k=r._getDateFromFormat(t.endDate),e.getTime()!==k.getTime()){r.model.includeWeekend===!1&&r._setAfterWeekend(e);o&&(e.setDate(e.getDate()+Math.floor(o)),r.model.includeWeekend===!1&&(o<0&&r._setBeforeWeekend(e),o>0&&r._setAfterWeekend(e)));r._stringHolidays&&r._stringHolidays.indexOf(t._getFormatedDate(e,u.dateFormat))!=-1&&e.setDate(e.getDate()+1);t.endDate=t._getFormatedDate(e,u.dateFormat);var d=t.taskId.toString(),p=t.predecessor,l=p&&p.filter(function(n){return n.to===d});l&&l.length>1&&(s=r._getPredecessorDate(t,l,i.predecessorsType),u.includeWeekend===!1&&r._setAfterWeekend(s),r._getDateFromFormat(t.endDate).getTime()!==s.getTime()&&(h=0,h=r._daydiff(r._getDateFromFormat(t.endDate),s),y=r._getDateFromFormat(s),a=r._calculateWeekendCount(y,h),i.offset=(h-a).toString()),t.endDate=t._getFormatedDate(s,u.dateFormat));t.left=t._calculateLeft(r._scheduleWeeks[0],r._perDayWidth,u.includeWeekend,u.dateFormat,u.endDateMapping);t.width=t._calculateWidth(r._perDayWidth,u.includeWeekend,r._holidays,u.dateFormat)}}t.parentItem&&r._updateParentItem(t);r._isRenddered&&r.refreshGanttRecord(t)},_getPredecessorDate:function(n,t,i){var u=null,r=this,c=r.model,f=null,e=null,l,o,h=t.filter(function(t){return t.to===n.taskId.toString()}),s;if(h)for(l=h.length,o=0;o<l;o++)predecessor=h[o],parentGanttRecord=r._rows[r._ids.indexOf(predecessor.from)],childGanttRecord=r._rows[r._ids.indexOf(predecessor.to)],u===null&&(u=r._getDateFromFormat(parentGanttRecord.startDate),parseInt(predecessor.offset)&&u.setDate(u.getDate()+parseInt(predecessor.offset))),f===null&&(f=r._getDateFromFormat(parentGanttRecord.endDate),e=r._getDateFromFormat(parentGanttRecord.endDate)),r._getDateFromFormat(parentGanttRecord.startDate).getTime()<u.getTime()&&(u=r._getDateFromFormat(parentGanttRecord.startDate),parseInt(predecessor.offset)&&u.setDate(u.getDate()+parseInt(predecessor.offset))),r._getDateFromFormat(parentGanttRecord.endDate).getTime()>f.getTime()&&(f=r._getDateFromFormat(parentGanttRecord.endDate)),e.setDate(e.getDate()+parseInt(predecessor.offset)),s=r._getDateFromFormat(e),c.includeWeekend===!1&&s&&r._setAfterWeekend(s),parseInt(predecessor.offset)&&f.getTime()<s.getTime()&&f.setDate(f.getDate()+parseInt(predecessor.offset)),e.setDate(e.getDate()-parseInt(predecessor.offset)),c.includeWeekend===!1&&(r._setAfterWeekend(f),r._setAfterWeekend(e));return i=="FS"||i=="FF"?f:i=="SF"||i=="SS"?u:void 0},_renderPredecessor:function(){},_setBeforeWeekend:function(n){n.getDay()==0?n.setDate(n.getDate()-2):n.getDay()==6&&n.setDate(n.getDate()-1)},_setAfterWeekend:function(n){n.getDay()==0?n.setDate(n.getDate()+1):n.getDay()==6&&n.setDate(n.getDate()+2)},_updateEditedGanttRecords:function(n){var i=this,u=i.model,t=n.data,f=i._getDateFromFormat(t.startDate),e=!1,r;if(n.columnName==="startDate")this._stringHolidays&&this._stringHolidays.indexOf(t._getFormatedDate(f,u.dateFormat))!=-1&&f.setDate(f.getDate()+1),i.model.includeWeekend===!1&&(this._setAfterWeekend(f),this._stringHolidays&&this._stringHolidays.indexOf(t._getFormatedDate(f,u.dateFormat))!=-1&&f.setDate(f.getDate()+1)),t.startDate=i.getFormatedDate(f),t.left=t._calculateGanttRecordLeft(f,i._scheduleWeeks[0],i._perDayWidth),t.width=t._calculateWidth(i._perDayWidth,u.includeWeekend,i._holidays,u.dateFormat),t.parentItem&&i._updateParentItem(t);else if(n.columnName==="endDate")r=i._getDateFromFormat(t.endDate),this._stringHolidays&&this._stringHolidays.indexOf(t._getFormatedDate(r,u.dateFormat))!=-1&&(r.setDate(r.getDate()+1),r.getDay()==6&&r.setDate(r.getDate()+2)),u.includeWeekend===!1&&(r.getDay()==0?r.setDate(r.getDate()-2):r.getDay()==6&&r.setDate(r.getDate()-1)),t.endDate=t._calculateFormatedDate(r,u.dateFormat),t._calculateDuration(f,r,u.includeWeekend,u.holidays),t.width=t._calculateTaskbarWidth(i._perDayWidth,u.dateFormat);else if(n.columnName=="duration"){var o=t.duration,h=o-n.previousValue,s=i._calculateUpdatedDate(i._getDateFromFormat(t.endDate),h);t.isMilestone=o===0?!0:!1;t.endDate=s;t.width=t._calculateWidth(i._perDayWidth,i.model.includeWeekend,i.model.holidays,u.dateFormat);t.progressWidth=t._calculateProgressWidth(t.width,t.status);u.endDateMapping&&(t.item[u.endDateMapping]=s);t.parentItem&&i._updateParentItem(t)}else n.columnName=="predecessor"?(e=!0,n.previousValue&&i._removeConnectorLine(n.previousValue,t),i._addConnectorLine(t)):n.columnName=="status"&&(t.status=t.status>100?100:t.status,t.progressWidth=i._getProgressWidth(t.width,t.status),t.parentItem&&(t._updateParentProgress(t.parentItem),i._refreshParent(t)));t.predecessor&&(e||i._$ganttchartHelper.ejGanttChart("updateConnectorLineOffset",t),i._isMileStoneEdited=t.isMilestone,i._updatedConnectorLineCollection=[],i._connectorlineIds=[],i._validatePredecessor(t),i._updatedConnectorLineCollection.length>0&&i._$ganttchartHelper.ejGanttChart("appendConnectorLine",i._updatedConnectorLineCollection));i._isValidationEnabled=!1;i.refreshGanttRecord(t)},_removeConnectorLine:function(n,t){for(var r=this,o,u,f,i=0,s=n&&n.length,e=-1,i=0;i<s;i++)u=r._rows[r._ids.indexOf(n[i].from)],f=r._rows[r._ids.indexOf(n[i].to)],t.taskId.toString()===n[i].to.toString()&&(e=u.predecessor.indexOf(n[i]),e>=0&&u.predecessor.splice(e,1)),u&&f&&(o="parent"+u.taskId+"child"+f.taskId,r._$ganttchartHelper.ejGanttChart("removeConnectorline",o))},_addConnectorLine:function(n){var u=this,r=0,f=n.predecessor,e,i,t;if(f)for(e=f.length,r=0;r<e;r++)i=f[r],i.to===n.taskId.toString()&&(t=u._rows[u._ids.indexOf(i.from)]),t&&(t.predecessor?t.predecessor.push(i):(t.predecessor=[],t.predecessor.push(i),u._predecessorsCollection.push(t)))},_calculateUpdatedDate:function(n,t){var r=this,i=0,u;if(t>0)for(i;i<t;i++)n=r.dateUpdate(n,1),n.getDay()==0?n.setDate(n.getDate()+1):n.getDay()==6&&n.setDate(n.getDate()+2);else for(u=-1*t,i=0;i<u;i++)n=r.dateUpdate(n,-1),n.getDay()==0?n.setDate(n.getDate()-2):n.getDay()==6&&n.setDate(n.getDate()-1);return r.getFormatedDate(n)},_updateEditedGanttRecord:function(n){var t=this;if(n.predecessor)for(var o=n.predecessor,u=0,h=o.length,r,f,e,s,i,u=0;u<h;u++)t._updatedConnectorLineCollection=[],t._connectorlineIds=[],r=o[u],r.to===n.taskId.toString()&&(f=t._rows[t._ids.indexOf(r.from)],e=t._rows[t._ids.indexOf(r.to)],f&&e&&(s="parent"+f.taskId+"child"+e.taskId,t._$ganttchartHelper.ejGanttChart("removeConnectorline",s),i=t._createConnectorLineObject(f,e,r),i&&(t._connectorlineIds.length>0&&t._connectorlineIds.indexOf(i.ConnectorLineId)==-1?(t._updatedConnectorLineCollection.push(i),t._connectorlineIds.push(i.ConnectorLineId)):t._connectorlineIds.length==0&&(t._updatedConnectorLineCollection.push(i),t._connectorlineIds.push(i.ConnectorLineId)),t._$ganttchartHelper.ejGanttChart("appendConnectorLine",t._updatedConnectorLineCollection))))},_updateGanttRecord:function(n){var i=this,t=i.model;n.left=n._calculateLeft(i._scheduleWeeks[0],i._perDayWidth,t.includeWeekend,t.dateFormat,t.endDateMapping,t.holidays);n.width=n._calculateWidth(i._perDayWidth,t.includeWeekend,t.holidays,t.dateFormat);i.refreshGanttRecord(n);n.parentItem&&i._updateParentItem(n)},refreshGanttRecord:function(n){var t=this,i;t._currentViewData=t.getCurrentViewData();i=t._currentViewData.indexOf(n);t._$ganttchartHelper.ejGanttChart("refreshRow",i);t._$treegridHelper.ejTreeGrid("refreshRow",i)},_updateParentItem:function(n){var i=this,t=n.parentItem,r=i.model,l=i._getDateFromFormat(t.startDate),w=i._getDateFromFormat(n.startDate),s=i._getDateFromFormat(t.endDate),a=i._getDateFromFormat(n.endDate),p;w.getTime()<l.getTime()&&(t.startDate=n.startDate,r.startDateMapping&&(t.item[r.startDateMapping]=t.startDate));a.getTime()>s.getTime()&&(dateDiff=i._daydiff(s,a),t.endDate=n.endDate,r.endDateMapping&&(t.item[r.endDateMapping]=t.endDate));for(var o=0,h=t.childRecords,b=h&&h.length,u,f=null,e=null,c=0,k=0,v=0,y=0,o=0;o<b;o++)u=h[o],f===null&&(f=i._getDateFromFormat(u.startDate)),e===null&&(e=i._getDateFromFormat(u.endDate)),i._getDateFromFormat(u.endDate).getTime()>e.getTime()&&(e=i._getDateFromFormat(u.endDate)),i._getDateFromFormat(u.startDate).getTime()<f.getTime()&&(f=i._getDateFromFormat(u.startDate)),u.isMilestone?k++:(v+=u.duration*24,y+=u.duration*24*u.status/100);c=y/v*100;t.progressWidth=i._getProgressWidth(t.width,c);t.status=Math.round(c);l.getTime()!==f.getTime()&&(t.startDate=t._getFormatedDate(f,r.dateFormat),r.startDateMapping&&(t.item[r.startDateMapping]=t.startDate));s.getTime()!=e.getTime()&&(t.endDate=t._getFormatedDate(e,r.dateFormat),r.endDateMapping&&(t.item[r.endDateMapping]=t.endDate));t._calculateDuration(i._getDateFromFormat(t.startDate),i._getDateFromFormat(t.endDate),r.includeWeekend,r.holidays,t[r.milestoneMapping]);p=Math.ceil((i._getDateFromFormat(t.startDate)-i._scheduleWeeks[0])/864e5);t.left=p*i._perDayWidth;t.width=t._calculateWidth(i._perDayWidth,r.includeWeekend,i._holidays,r.dateFormat);i._isRenddered&&i.refreshGanttRecord(t);t.parentItem&&i._updateParentItem(t)},_validatePredecessor:function(n){var i=this,v=i.model,a,k,l;if(n.predecessor){var y=n.predecessor,u,o,e=null,h,f,r,c,p=n.taskId.toString(),s=y.filter(function(n){return n.to===p}),w=y.filter(function(n){return n.from===p}),b=s.length;if(s.length>1)for(u=0;u<s.length;u++)s[u].offset&&(a=parseInt(s[u].offset.toString().replace(/[^0-9]/g,"")),(t.isNullOrUndefined(c)||a<c||t.isNullOrUndefined(c))&&(c=a));for(u=0;u<b;u++)f=s[u],o=i._rows[i._ids.indexOf(f.from)],e=i._rows[i._ids.indexOf(f.to)],h="parent"+o.taskId+"child"+e.taskId,i._$ganttchartHelper&&i._$ganttchartHelper.ejGanttChart("removeConnectorline",h),n.taskId.toString()===f.to&&i._validateChildGanttRecord(o,e,f),n.taskId.toString()===f.from&&i._validateChildGanttRecord(o,e,f);for(u=0;u<b;u++)(f=s[u],o=i._rows[i._ids.indexOf(f.from)],e=i._rows[i._ids.indexOf(f.to)],v.enableVirtualization!==!1||o.isExpanded!==!1&&e.isExpanded!=!1)&&(r=i._createConnectorLineObject(o,e,f),r&&(i._connectorlineIds.length>0&&i._connectorlineIds.indexOf(r.ConnectorLineId)==-1?(i._updatedConnectorLineCollection.push(r),i._connectorlineIds.push(r.ConnectorLineId)):i._connectorlineIds.length==0?(i._updatedConnectorLineCollection.push(r),i._connectorlineIds.push(r.ConnectorLineId)):i._connectorlineIds.indexOf(r.ConnectorLineId)!=-1&&(l=i._connectorlineIds.indexOf(r.ConnectorLineId),i._updatedConnectorLineCollection[l]=r)));for(k=w.length,u=0;u<k;u++)(f=w[u],o=i._rows[i._ids.indexOf(f.from)],e=i._rows[i._ids.indexOf(f.to)],h="parent"+o.taskId+"child"+e.taskId,i._$ganttchartHelper&&i._$ganttchartHelper.ejGanttChart("removeConnectorline",h),i._validateChildGanttRecord(o,e,f),v.enableVirtualization!==!1||o.isExpanded!==!1&&e.isExpanded!=!1)&&(r=i._createConnectorLineObject(o,e,f),r&&(i._connectorlineIds.length>0&&i._connectorlineIds.indexOf(r.ConnectorLineId)==-1?(i._updatedConnectorLineCollection.push(r),i._connectorlineIds.push(r.ConnectorLineId)):i._connectorlineIds.length==0?(i._updatedConnectorLineCollection.push(r),i._connectorlineIds.push(r.ConnectorLineId)):i._connectorlineIds.indexOf(r.ConnectorLineId)!=-1&&(l=i._connectorlineIds.indexOf(r.ConnectorLineId),i._updatedConnectorLineCollection[l]=r)),e&&i._validatePredecessor(e))}},_calculateDateDifference:function(n,t){var i=t>=0?t:-1*t;return t>0?i-this._calculateWeekendCount(n,t):t+this._calculateWeekendCount(n,t)},_calculateWeekendCount:function(n,t){var u=t>=0?t:-1*t,r=0,i=0;if(t>0)for(i=0;i<t;i++)n.getDay()==0?(r++,n.setDate(n.getDate()+1)):n.getDay()==6?(r+=2,++i,n.setDate(n.getDate()+2)):n.setDate(n.getDate()+1);else for(i=0;i<u;i++)n.setDate(n.getDate()-1),(n.getDay()==0||n.getDay()==6)&&(r+=1);return r},_daydiff:function(n,t){return(new Date(t)-new Date(n))/864e5},dateUpdate:function(n,t){return new Date(n.getFullYear(),n.getMonth(),n.getDate()+t,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())},_collapseAll:function(){var n=this,e=n.model,u=0,i,r={},o=e.enableVirtualization,s=n.getRows(),f;for(n._gridRows=s,n._isInExpandCollapse=!0,u=0;u<n.model.parentRecords.length;u++)i=n.model.parentRecords[u],r.data=i,r.recordIndex=u,r.expanded=!1,o?i.hasChildRecords&&i.expanded&&t.TreeGrid.sendExpandCollapseRequest(n,r):(i.hasChildRecords&&i.expanded?t.TreeGrid.sendExpandCollapseRequest(n,r):t.TreeGrid.sendExpandCollapseRequest(n,r),f=n._collapsedRecordCount,n._$ganttchartHelper.ejGanttChart("reRenderGanttGridLinesTable",-f));n._isInExpandCollapse=!1},_expandAll:function(){var n=this,e=n.model,r=0,i,u={},o=e.enableVirtualization,f;for(n._isInExpandCollapse=!0,r=0;r<n._updatedGanttRecords.length;r++)i=n._updatedGanttRecords[r],u.data=i,u.recordIndex=r,u.expanded=!0,o?i.hasChildRecords&&!i.expanded&&t.TreeGrid.sendExpandCollapseRequest(n,u):i.hasChildRecords&&!i.expanded&&(t.TreeGrid.sendExpandCollapseRequest(n,u),f=n._expandedRecordsCount,n._$ganttchartHelper.ejGanttChart("reRenderGanttGridLinesTable",f));n._isInExpandCollapse=!1},_getDateFromFormat:function(n){return typeof n=="object"?new Date(n):Globalize.parseDate(n,this.model.dateFormat)},_destroy:function(){var n=this;n.element.empty().removeClass("e-gantt-core e-gantt "+n.model.cssClass)}});t.Gantt.EditingType={String:"stringedit",Boolean:"booleanedit",Numeric:"numericedit",Dropdown:"dropdownedit",DatePicker:"datepicker"};t.Gantt.ToolbarItems={Add:"add",Edit:"edit",Delete:"delete",Update:"update",Cancel:"cancel",Search:"search",Indent:"indent",Outdent:"outdent",ExpandAll:"expandAll",CollapseAll:"collapseAll"};t.Gantt.localization={};t.Gantt.localization["en-US"]={emptyRecord:"No records to display",columnHeaderTexts:{taskId:"ID",taskName:"Task Name",startDate:"Start Date",endDate:"End Date",resourceInfo:"Resources",duration:"Duration",status:"Progress",predecessor:"Predecessor",baselineStartDate:"Baseline Start Date",baselineEndDate:"Baseline End Date"},editDialogTexts:{addFormTitle:"New Task",editFormTitle:"Edit Task",saveButton:"Save",cancelButton:"Cancel"},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"}}}};t.Gantt.GanttRecord=function(){var n=this;n.taskId=null;n.taskName=null;n.startDate=null;n.endDate=null;n.duration=null;n.isMilestone=!1;n.status=null;n.predecessor=null;n.resourceInfo=null;n.parentItem=null;n.isSelected=!1;n.childRecords=null;n.hasChildRecords=!1;n.expanded=!1;n.level=0;n.left=0;n.width=0;n.progressWidth=0;n.item=null;n.baselineLeft=0;n.baselineWidth=0;n.baselineStartDate=null;n.baselineEndDate=null;n.isReadOnly=!1};t.Gantt.GanttRecord.prototype={_calculateLeft:function(n,t,i,r,u,f){var o=this,v,c=0,s=o._getDateFromFormat(o.startDate,r),e=o.endDate,l=parseInt(o.duration),h,a;if(e==null&&(e=o._getDateFromFormat(o.startDate,r),e.setDate(e.getDate()+l)),i==!1){for(s.getDay()==0&&s.setDate(s.getDate()+1),s.getDay()==6&&s.setDate(s.getDate()-1),o._updateHoliday(s,f,i),h=new Date(s),a=0;a<l;a++)h.getDay()==0?c++:h.getDay()==6&&(c+=2,h.setDate(h.getDate()+2)),h.setDate(h.getDate()+1);e=new Date(s);c=l===0?1:c;e.setDate(e.getDate()+(l+c-1));e.getDay()==0&&e.setDate(e.getDate()+1);e.getDay()==6&&e.setDate(e.getDate()+2)}return o.startDate=o._getFormatedDate(s,r),o.endDate=o._getFormatedDate(e,r),u&&(o.item[u]=o.endDate),v=Math.ceil((s-n)/864e5),v*t},_calculateBaselineLeft:function(n,t,i,r){var e,f=this,o=Globalize.parseDate(f.startDate,r),s=parseInt(f.duration),u=f.endDate;return u==null&&(u=new Date(o),u.setDate(u.getDate()+s)),e=Math.ceil((o-n)/864e5),e*t},_updateHoliday:function(n,t,i){var r=0,u=t&&t.length;if(u>0){for(r=0;r<u;r++)t[r].getDate()==n.getDate()&&n.setDate(n.getDate()+1);i==!1&&n.getDay()==6&&n.setDate(n.getDate()+2)}},_calculateGanttRecordLeft:function(n,t,i){var r=this,u=r._daydiff(t,n);return u*i},_calculateReverseLeft:function(n,t,i,r){var c,u=this,o=0,f=u.startDate,s=u.duration&&parseInt(u.duration),e,h;if(f==null&&(f=u._getDateFromFormat(u.endDate),f.setDate(f.getDate()-s)),i==!1){for(e=u._getDateFromFormat(u.endDate,r),h=0;h<s;h++)e.getDay()==0?(o+=2,e.setDate(e.getDate()-2)):e.getDay()==6&&o++,e.setDate(e.getDate()-1);f=u._getDateFromFormat(u.endDate,r);o=s===0?1:o;f.setDate(f.getDate()-(s+o-1))}return u.startDate=u._getFormatedDate(f,r),c=Math.ceil((f-n)/864e5),c*t},_calculateReverseWidth:function(n,t,i,r){var u=this,s=0,a,f,h=0,e=u.startDate,c=u.duration&&parseInt(u.duration),o=u.endDate,l;if(e==null&&(e=u._getDateFromFormat(o,t),e.setDate(e.getDate()-c+1)),i==!1){for(f=u._getDateFromFormat(o,t),h=0;h<c;h++)f.getDay()==0?(s+=2,f.setDate(f.getDate()-2)):f.getDay()==6&&s++,f.setDate(f.getDate()-1);e=u._getDateFromFormat(o,t);e.setDate(e.getDate()-(c+s-1))}if(r!=null&&r.length>0){for(f=u._getDateFromFormat(e,t),h=0;h<c;h++){for(f.setDate(f.getDate()+1),l=0;l<r.length;l++)new Date(r[l].day).getDate()==f.getDate()&&s++;i==!1&&(f.getDay()==0||f.getDay()==6)&&s++}o=u._getDateFromFormat(u.startDate,t);o.setDate(o.getDate()+(c+s-1))}return a=Math.ceil((u._getDateFromFormat(o,t)-u._getDateFromFormat(u.startDate,t))/864e5)+1,a*n},_calculateWidth:function(n,t,i,r){var u=this,o,s=u.startDate,f=u.endDate,e=u.duration;return f==null&&(e=parseInt(e),f=u._getFormatedDate(s,r),f.setDate(f.getDate()+e-1)),u._calculateEndDate(t,i,r),o=Math.ceil((u._getDateFromFormat(u.endDate,r)-u._getDateFromFormat(u.startDate,r))/864e5)+1,o*n},_calculateTaskbarWidth:function(n,t){var i=this,r=i._daydiff(i._getDateFromFormat(i.startDate,t),i._getDateFromFormat(i.endDate,t))+1;return r*n},_getFormatedDate:function(n,t){return Globalize.format(n,t)},_getDateFromFormat:function(n,t){return Globalize.parseDate(n,t)},_calculateProgressWidth:function(n,t){return n*t/100},_setResourceInfo:function(n,t,i,r){var u=0,o=n.length,e=[],f;for(u;u<o;u++)f=r.filter(function(i){return n[u]===i[t]}),f.length&&e.push(f[0]);return e},_updateEndDate:function(n,t,i){var r=this,h=new Date(n),c=r._getDateFromFormat(r.startDate,i),o=r._daydiff(h,c),u=r._getDateFromFormat(r.endDate,i),s=0,f,e;if(t==!1)for(f=0,f;f<=o;f++)u.setDate(u.getDate()+1),(u.getDay()==0||u.getDay()==6)&&(s+=1);e=r._getDateFromFormat(r.endDate,i);e.setDate(e.getDate()+o+s);r.endDate=r._getFormatedDate(e,i)},_calculateFormatedDate:function(n,t){return Globalize.format(n,t)},_updateParentProgress:function(n){var i=0,f=n.childRecords&&n.childRecords.length,r=0,u=0,t;if(n.childRecords){for(t=0;t<f;t++)r+=n.childRecords[t].duration*24,u+=n.childRecords[t].duration*24*n.childRecords[t].status/100;i=u/r*100;isNaN(i)&&(i=0);n.progressWidth=this._getProgressWidth(n.width,i);n.status=Math.round(i)}n.parentItem&&this._updateParentProgress(n.parentItem)},_getProgressWidth:function(n,t){return n*t/100},_calculatePredecessor:function(n){var u=[],i,f={},t,e=this.taskId.toString(),r;return n.split(",").forEach(function(n){t=n.split("+");r="+";n.indexOf("-")>=0&&(t=n.split("-"),r="-");i=t[0].match(/(\d+|[A-z]+)/g);f={from:i[0],predecessorsType:i.length>1?i[1].toUpperCase():"FS",offset:t.length>1?r+""+t[1]:"",isdrawn:!1,to:e};u.push(f)}),u},_updateGanttRecord:function(n,t,i,r,u,f,e,o){var s=this,c=s.left%f,l=(s.left-c)/f,h=new Date(u);h.setDate(u.getDate()+l);h.getDay()==0?h.setDate(h.getDate()+1):h.getDay()==6&&h.setDate(h.getDate()+2);s.startDate=s._getFormatedDate(h,e);s.left=s._calculateLeft(u,f,r,e,t);s.width=s._calculateWidth(f,r,o,e);s.parentItem&&s._updateParentItem(s,n,t,i,r,u,f,e,o)},_calculateUpdatedDate:function(n,t){var r=this,i=0,u;if(t>0)for(i;i<t;i++)n=r._dataSubtract(n,1),n.getDay()==0?n.setDate(n.getDate()+1):n.getDay()==6&&n.setDate(n.getDate()+2);else for(u=-1*t,i=0;i<u;i++)n=r._dataSubtract(n,-1),n.getDay()==0?n.setDate(n.getDate()-2):n.getDay()==6&&n.setDate(n.getDate()-1);return r._getFormatedDate(n)},_dataSubtract:function(n,t){return new Date(n.getFullYear(),n.getMonth(),n.getDate()+t,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())},_calculateEndDate:function(n,t,i){var u=this,e=0,r=u._getDateFromFormat(u.startDate,i),o=u.duration&&parseInt(u.duration),f,h,s;if(o===0){u.endDate=u.startDate;return}if(n===!1)for(e=1;e<o;e++)r.getDay()==0?r.setDate(r.getDate()+1):r.getDay()==6&&r.setDate(r.getDate()+2),r.setDate(r.getDate()+1);else r.setDate(r.getDate()+o-1);if(n===!1&&(r.getDay()==0?r.setDate(r.getDate()+1):r.getDay()==6&&r.setDate(r.getDate()+2)),t&&t.length)for(f=0,h=t.length,f=0;f<h;f++)s=new Date(t[f]),s>=u._getDateFromFormat(u.startDate,i)&&s<=r&&(r.setDate(r.getDate()+1),n===!1&&(r.getDay()==0?r.setDate(r.getDate()+1):r.getDay()==6&&r.setDate(r.getDate()+2)));n===!1&&(r.getDay()==0?r.setDate(r.getDate()+1):r.getDay()==6&&r.setDate(r.getDate()+2));u.endDate=u._calculateFormatedDate(r,i)},_dateUpdate:function(n,t){return new Date(n.getFullYear(),n.getMonth(),n.getDate()+t,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())},_calculateDuration:function(n,i,r,u,f){var o=this,s=o._daydiff(n,i),e;for(offset=r===!1?o._calculateDateDifference(new Date(n),s):s+1,e=0;e<u.length;e++)new Date(u[e].day)>=n&&new Date(u[e].day)<=i&&offset--;o.duration=t.isNullOrUndefined(f)?offset:offset==0&&f==!1?1:offset},_calculateDateDifference:function(n,t){var i=t>=0?t:-1*t;return t>0?i-this._calculateWeekendCount(n,t)+1:t+this._calculateWeekendCount(n,t)},_calculateWeekendCount:function(n,t){var u=t>=0?t:-1*t,r=0,i=0;if(t>0)for(i=0;i<t;i++)n.getDay()==0?(r++,n.setDate(n.getDate()+1)):n.getDay()==6?(r+=2,++i,n.setDate(n.getDate()+2)):n.setDate(n.getDate()+1);else for(i=0;i<u;i++)n.setDate(n.getDate()-1),(n.getDay()==0||n.getDay()==6)&&(r+=1);return r},_daydiff:function(n,t){return(t-n)/864e5},_getProgressPercent:function(n,t){return Math.ceil((t/n*100).toFixed(2))}};t.Gantt._getPredecessorsValue=function(n){return this.data.item?this.data.item[n]:""};t.Gantt._getCellValue=function(n){var t=this.data[n];return t?t:this.data.item&&this.data.item[n]}})(jQuery,Syncfusion),function(n,t,i){t.widget("ejTreeGrid","ej.TreeGrid",{_rootCSS:"e-treegrid",element:null,element:null,validTags:["div"],model:null,keyConfigs:{focus:"e",insertRecord:"45",deleteRecord:"46",editRecord:"113",saveRequest:"13",cancelRequest:"27",firstRowSelection:"ctrl+36",lastRowSelection:"ctrl+35",upArrow:"38",downArrow:"40",moveCellRight:"9",moveCellLeft:"shift+9",selectedRowExpand:"alt+40",totalRowExpand:"ctrl+40",selectedRowCollapse:"alt+38",totalRowCollapse:"ctrl+38"},defaults:{enableAltRow:!0,allowColumnResize:!1,enableVirtualization:!1,allowSorting:!1,allowMultiSorting:!1,sortSettings:{sortedColumns:[]},allowSelection:!0,selectionType:"single",selectedRowIndex:-1,selectedItem:null,allowKeyboardNavigation:!0,cssClass:"",locale:"en-US",editSettings:{allowEditing:!1,allowAdding:!1,allowDeleting:!1,editMode:"normal"},isEdit:!1,rowDataBound:null,queryCellInfo:null,dataSource:null,currentViewData:[],flatRecords:[],parentRecords:[],records:[],columns:[],commonWidth:150,query:t.Query(),dateFormat:"MM/dd/yyyy",rowHeight:30,emptyRecordText:null,treeColumnIndex:0,childMapping:"",idMapping:"",parentIdMapping:"",showGridCellTooltip:!1,showGridExpandCellTooltip:!1},dataTypes:{columns:"array",sortSettings:{sortedColumns:"array"},dataSource:"data",currentViewData:"array",flatRecords:"array",parentRecords:"array",records:"array"},getHeaderTable:function(){return this._$gridHeaderTable},setGridHeaderTable:function(n){this._$gridHeaderTable=n},getHeaderContent:function(){return this._$gridHeaderContent},setGridHeaderContent:function(n){this._$gridHeaderContent=n},getContentTable:function(){return this._$gridContentTable},getContent:function(){return this._$gridContent},setGridContentTable:function(n){this._$gridContentTable=n},getRows:function(){return this._$gridRows},setGridRows:function(n){this._$gridRows=n},getCurrentViewData:function(){return this.model.currentViewData},getFlatRecords:function(){return this.model.records},setHeight:function(n){this._totalHeight=n},getUpdatedRecords:function(){return this._updatedRecords},getUpdatedIds:function(){return this.model.ids},getRecordsCount:function(){return this._recordsCount},setRecordsCount:function(n){this._recordsCount=n},getExpandCollapseRecordsCount:function(){return this._expandCollapseRecordCount},_init:function(){var n=this;n._initPrivateProperties();n.model.isdesignMode&&(n.element.css({height:"250px"}),n.model.columns.length===0&&(n.model.columns=[{field:"Column1",HeaderText:"Column1"},{field:"Column2",HeaderText:"Column2"},{field:"Column3",HeaderText:"Column3"}]),n.model.childMapping.length==0&&(n.model.childMapping="Children"));n._processEditing();n._checkDataBinding();n._createTooltipTemplate()},_setModel:function(t){var i=this,r=i.model;for(var u in t)switch(u){case"enableAltRow":r.enableAltRow=t[u];i._addInitTemplate();i.refreshContent();break;case"enableVirtualization":r.enableVirtualization=t[u];i.refreshContent();break;case"allowColumnResize":r.allowColumnResize=t[u];i._enableColumnResizeEvents();break;case"allowSorting":r.allowSorting=t[u];break;case"sortSettings":n.extend(r.sortSettings,t[u]);i.refreshContent();break;case"allowSelection":i.clearSelection();r.allowSelection=t[u];break;case"selectionType":i.clearSelection();r.selectionType=t[u];break;case"selectedRowIndex":r.selectedRowIndex!=-1&&n.inArray(r.selectedRowIndex,i._selctedRowsIndexes==-1)&&i.selectRows(r.selectedRowIndex);break;case"editSettings":n.extend(r.editSettings,t[u]);i._processEditing();i._enableEditingEvents();break;case"allowKeyboardNavigation":r.allowKeyboardNavigation=t[u];break;case"dataSource":i.resetModelCollections();i.element.ejTreeGrid("destroy").ejTreeGrid(r);break;case"columns":n.extend(r.columns,t[u]);i._addInitTemplate();i.refreshContent();break;case"rowHeight":r.rowHeight=t[u];i._addInitTemplate();i.refreshContent();break;case"treeColumnIndex":r.treeColumnIndex=t[u];i._addInitTemplate();i.refreshContent()}},refreshContent:function(){var i=this,n={};n.requestType=t.TreeGrid.Actions.Refresh;i.processBindings(n)},resetModelCollections:function(){var t=this,n=t.model;n.sortSettings.sortedColumns=[];n.currentViewData=[];n.flatRecords=[];n.parentRecords=[];n.records=[]},_initPrivateProperties:function(){var i=this;i._id=i.element.attr("id");i._columnsWidthCollection=[];i._cSortedColumn=null;i._cSortedDirection=null;i._dataManager=null;i._disabledSortableColumns=[];i._filteredRecords=[];i._fieldColumnNames=[];i._multiSortRequest=null;i._$gridContainer=null;i._$gridContent=null;i._$gridContentTable=null;i._$gridHeaderTable=null;i._$gridHeaderContainer=null;i._gridHeight=i.element.height();i._recordsCount=null;i._$gridRows=null;i._gridRows=null;i._gridWidth=i.element.width();i._headerColumnNames=[];i._hiddenColumns=[];i._multiSelectCtrlRequest=!1;i._multiSelectShiftRequest=!1;i._offset=0;i._previousIndex=-1;i._prevRBottom=0;i._prevRTop=0;i._prevScrollTop=0;i._prevScrollLeft=0;i._prevVBottom=0;i._resizer=null;i._scrollTop=0;i._searchString="";i._selectedRowsIndexes=[];i._sortedRecords=[];i._storedIndex=-1;i._$tableContent=null;i._tempsortedrecords=[];i._totalHeight=0;i._viewPortHeight=0;i._visibleColumns=[];i._visibleRange=null;i._vScrollDir=1;i._vScrollDist=0;i._cellEditTemplate=n();i._cellEditingDetails={cellValue:null,rowIndex:-1,columnIndex:-1,fieldName:null,_data:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],data:null};i._tdsOffsetWidth=[];i._isEnterKeyPressed=!1;i._updatedRecords=[];i._scrollBarHeight=0;i._expandCollapseRecordCount=0;i._removedCount=0;i._$gridHeaderContent=null;i._expandedRecordsCount=0;i._totalCollapseRecordCount=0;i._collapsedRecordCount=0;i.secondaryDatasource=[];i._dropDownTemplate=i._compiledDropDownTemplate();i._dataManager=i.model.dataSource instanceof t.DataManager?i.model.dataSource:i.model.dataSource!=null?t.DataManager(i.model.dataSource):null},_checkDataBinding:function(){var t=this,i=t.model;t.element.addClass("e-treegrid-core");t._initDatasource();i.columns.length&&t._renderAfterColumnInitialize();t._viewPortHeight=t._getViewPortHeight();t._ensureDataSource();t._initGridRender();t._$gridContent=n("#"+t._id+"e-gridcontent");t._scrollBarHeight=t._$gridContent[0].offsetHeight-t._$gridContent[0].clientHeight;t._$gridContainer=n("#"+t._id+"e-gridcontainer");t._$tableContent=n("#"+t._id+"e-table");t._wireEvents();t.setWidthToColumns();t._renderScroller();i.isFromGantt&&t._addEmptyColumntoGrid()},_initDatasource:function(){var t=this,n=t.model,i;n.dataSource&&n.dataSource.length>0&&(n.idMapping&&n.parentIdMapping?n.idMapping.length>0&&n.parentIdMapping.length>0&&(i=n.dataSource.slice(0),t._reconstructDatasource(i),t._createRecords(t.secondaryDatasource)):n.flatRecords.length===0&&n.dataSource!==null&&t._createRecords(n.dataSource))},_reconstructDatasource:function(n){for(var i,u=this,f=u.model,e=[],r=0;r<n.length;r++)i={},i=t.DataManager(n).executeLocal(t.Query().where(f.parentIdMapping,t.FilterOperators.equal,n[r][f.idMapping])),(t.isNullOrUndefined(n[r][f.parentIdMapping])||n[r][f.parentIdMapping]==0)&&i.length>0?(n[r][f.childMapping]=i,u.secondaryDatasource.push(n[r])):!t.isNullOrUndefined(n[r][f.parentIdMapping])||i&&i.length>0?i&&i.length>0&&!t.isNullOrUndefined(i[0][f.parentIdMapping])&&u._appendChildDataItems(u.secondaryDatasource,i):u.secondaryDatasource.push(n[r]),i&&i.length>0?(u._datasourceChildItems=u._reconstructDatasource(i),t.isNullOrUndefined(n[r][f.childMapping])&&(n[r][f.childMapping]=u._datasourceChildItems,u._getParentIndex(n)),u._datasourceChildItems=[]):t.isNullOrUndefined(n[r][f.parentIdMapping])||e.push(n[r]);if(e&&e.length>0)return e},_appendChildDataItems:function(n,i){for(var f=this,r=f.model,u=0;u<n.length;u++)n[u][r.idMapping]===i[0][r.parentIdMapping]?n[u][r.childMapping]=i:!t.isNullOrUndefined(n[u][r.childMapping])&&n[u][r.childMapping].length>0&&f._appendChildDataItems(n[u],i);t.isNullOrUndefined(n.length)&&n&&(n[r.idMapping]===i[0][r.parentIdMapping]?n[r.childMapping]=i:!t.isNullOrUndefined(n[r.childMapping])&&n[r.childMapping].length>0&&f._appendChildDataItems(n[r.childMapping],i))},_getParentIndex:function(n){var o=this,r=o.model,f=o.secondaryDatasource,e=0,u,i;for(n.length>0&&(e=n[0][r.parentIdMapping]),i=0;i<f.length;i++){if(f[i][r.idMapping]==e&&t.isNullOrUndefined(f[i][r.childMapping]))return f[i][r.childMapping]=n,!0;if(u=f[i][r.childMapping],u)for(i=0;i<u.length;i++)if(u[i][r.idMapping]==e&&t.isNullOrUndefined(u[i][r.childMapping]))return u[i][r.childMapping]=n,!0}},processBindings:function(n){var i=this,r=i.model;if(r.query=new t.Query,i._trigger("actionBegin",n))return!0;i._ensureDataSource(n)},_ensureDataSource:function(i){var r=this,u=r.model,k=u.sortSettings.sortedColumns,s=!1,e,o,h,c,f,v,y,l,p,a,w,b;u.dataSource!=null&&(u.query.requiresCount(),r._queryManagar=u.query,(u.editSettings.allowEditing||u.editSettings.allowAdding)&&i&&i.requestType==t.TreeGrid.Actions.Save&&(!t.isNullOrUndefined(i._cModifiedData)||!t.isNullOrUndefined(i._cAddedRecord))&&(t.isNullOrUndefined(i._cAddedRecord)?n.extend(u.flatRecords[n.inArray(u.selectedItem,u.flatRecords)],i._cModifiedData):(u.selectedRowIndex===-1?(i._cAddedRecord.hasChildRecords=!1,u.flatRecords.unshift(i._cAddedRecord),u.records.unshift(i._cAddedRecord),u.dataSource.unshift(i._cAddedRecord.item),u.isFromGantt&&u.ids.unshift(i._cAddedRecord.taskId),i.recordIndex=0):(i._cAddedRecord.level=u.selectedItem.level,e=u.selectedItem?u.flatRecords.indexOf(u.selectedItem):0,i._cAddedRecord.level===0&&(e=e>0?e-1:e),i.actionRequestType!=t.TreeGrid.Actions.ContextMenuAdd&&(i.recordIndex=e>0?e-1:0),u.flatRecords.splice(e,0,i._cAddedRecord),c=u.records.indexOf(u.selectedItem),u.records.splice(c,0,i._cAddedRecord),u.isFromGantt&&u.ids.splice(c,0,i._cAddedRecord.taskId.toString()),i._cAddedRecord.level>0&&(h=u.selectedItem.parentItem,h&&(o=h.childRecords?h.childRecords.indexOf(u.selectedItem):-1,o!==-1&&(o=o===0?0:o-1),h.childRecords.splice(o,0,i._cAddedRecord))),r.setRecordsCount(u.flatRecords.length),r.setHeight(u.flatRecords.length*u.rowHeight),r.updateHeight(),s=!0),r._queryManagar.queries=[],u.isEdit=!1,r._updatedGanttRecords=u.flatRecords)),i&&i.requestType===t.TreeGrid.Actions.ExpandCollapse&&(s=!0,r.clearSelection(r.model.selectedRowIndex),r._filteredRecords=[],r._expandCollapseRecordCount=0,r.updateExpandCollapseRecords(i.data,i.expanded,i.recordIndex),r.setRecordsCount(u.flatRecords.length),r.setHeight(u.flatRecords.length*u.rowHeight),r._updatedRecords=u.flatRecords,u.allowSearching&&r._searchString.length&&(r._updateFilteredRecords(r._tempfilteredrecords),r.setRecordsCount(r._filteredRecords.length),r.setHeight(r._filteredRecords*u.rowHeight),r._updatedRecords=r._filteredRecords),u.allowSorting&&u.sortSettings.sortedColumns.length&&(r._updateExpandCollapseForSortedRecords(i.data,i.expanded),r.setHeight(r._sortedRecords*u.rowHeight),r._updatedRecords=r._sortedRecords),r.updateHeight(),u.enableAltRow&&r._updateAltRow()),u.editSettings.allowDeleting&&i&&i.requestType===t.TreeGrid.Actions.Delete&&(f=i.data,r._removedCount=0,l=r._getFilteredChildRecordsCount(f),l+=1,r._removedCount=0,f.parentItem&&(p=f.parentItem.childRecords,o=p.indexOf(f),f.parentItem.childRecords.splice(o,1),f.parentItem.item[r.model.childMapping].splice(o,1)),a=u.parentRecords.indexOf(f),a!==-1&&u.parentRecords.splice(a,1),v=r.model.flatRecords.indexOf(f),r.model.flatRecords.splice(v,l),r.setRecordsCount(u.flatRecords.length),r.setHeight(u.flatRecords.length*u.rowHeight),s=!0,e=u.records.indexOf(f),w=r.getChildCount(f,0),u.records.splice(e,w+1),r._updatedRecords=u.flatRecords,y=u.dataSource.indexOf(f.item),r.model.dataSource.splice(y,1),u.selectedItem=null,u.selectedRowIndex=-1),u.allowSearching&&r._searchString.length?(r._queryManagar.search(r._searchString,r.getColumnFieldNames(),t.FilterOperators.contains,!0),r._filteredRecords=u.records.filter(function(n){return n.hasChildRecords===!1}),b=new t.DataManager(r._filteredRecords),r._tempfilteredrecords=b.executeLocal(r._queryManagar).result,r._updateFilteredRecords(r._tempfilteredrecords),r.setRecordsCount(r._filteredRecords.length),r._updatedRecords=r._filteredRecords,u.allowSorting&&u.sortSettings.sortedColumns.length>0&&r._sortingRecords(),r.setHeight(r._updatedRecords.length*u.rowHeight),r.updateHeight(),s=!0,u.enableAltRow&&r._updateAltRow()):u.allowSorting&&k.length>0&&(s=r._sortingRecords()),s||(r.setRecordsCount(u.flatRecords.length),r.setHeight(u.flatRecords.length*u.rowHeight),r._updatedRecords=u.flatRecords,r.updateHeight()),i||(i={},i.requestType=t.TreeGrid.Actions.Refresh),r._updateCurrentViewData(),(u.isFromGantt||i.requestType!=="save")&&i.requestType!=="sorting"&&i.requestType!=="searching"&&i.requestType!=="delete"||r.renderRecords(i))},_processEditing:function(){var n=this,t=n.model;t.editSettings.allowEditing&&t.editSettings.editMode==="cellEditing"&&n._addCellEditTemplate()},_renderAfterColumnInitialize:function(){var n=this;n.element.append(n._renderGridHeader())},_renderGridHeader:function(){var f=this,e=f.model,s=document,h=t.buildTag("div.e-gridheadercontainer","",{overflow:"hidden"},{}),c=t.buildTag("table.e-table","",{},{cellspacing:"0px","border-spacing":"0px"}),p=t.buildTag("thead"),w=t.buildTag("tbody.e-hide"),l=t.buildTag("tr.e-columnheader"),b=n(s.createElement("colgroup")),k=n(s.createElement("tr")),r=0,u=e.columns,g=u.length,o,d,a,v,y=e.isFromGantt?t.buildTag("div.e-gridheader#"+f._id+"e-gridheader","",{},""):t.buildTag("div.e-gridheader#"+f._id+"e-gridheader","",{"border-top-style":"solid","border-left-style":"solid","border-right-style":"solid","border-top-width":"thin","border-left-width":"thin","border-right-width":"thin"},"");for(f.setGridHeaderContent(y),f._$gridHeaderContainer=h,f._hiddenColumns=[],e.allowSorting&&l.css({cursor:"pointer"}),r;r<g;r++)o=t.buildTag("th.e-headercell","",{height:"45px"},{}),d=s.createElement("td"),a=t.buildTag("div.e-headercelldiv",u[r].headerText==i?u[r].headerText=u[r].field:u[r].headerText,{},{unselectable:"on"}),o.append(a),v=s.createElement("col"),k.append(d),l.append(o),b.append(v),u[r].visible===!1?o.addClass("e-hide")&&n(v).css("display","none")&&f._hiddenColumns.push(u[r].headerText):(f._visibleColumns.push(u[r].headerText),u[r].visible=!0),u[r].allowSorting===!1&&(f._disabledSortableColumns.push(u[r].headerText),o.css({cursor:"normal"})),t.isNullOrUndefined(u[r].headerTemplateID)||a.html(n(u[r].headerTemplateID).hide().html()).parent().addClass("headertemplate"),u[r].width==i&&e.commonWidth!==i?f._columnsWidthCollection[r]=e.commonWidth:f._columnsWidthCollection.push(u[r].width),f._fieldColumnNames[u[r].headerText]=u[r].field,f._headerColumnNames[u[r].field]=u[r].headerText;return p.append(l),w.append(k),c.append(b).append(p).append(w),h.html(c),y.html(h),f.setGridHeaderTable(c),y},_initGridRender:function(){var n=this;n._addInitTemplate();n._renderGrid();n.model.allowColumnResize&&(n._resizer=new t.Grid.gridResize(n))},_renderGrid:function(){var n=this;n._renderGridContent().insertAfter(n.element.children(".e-gridheader"));n._initialEndRendering()},_renderGridContent:function(){var i=this,o=document,r=i.model,s=n(o.createElement("tbody")),f=t.buildTag("div.e-gridcontent#"+i._id+"e-gridcontent","",{height:i._viewPortHeight},{unselectable:"on"}),e=t.buildTag("div.e-gridcontainer#"+i._id+"e-gridcontainer","",{},{}),u,h;return r.enableVirtualization&&e.css({height:i._totalHeight}),u=t.buildTag("table.e-table#"+i._id+"e-table","",{top:"0px"},{cellspacing:"0px"}),u.append(i.getHeaderTable().find("colgroup").clone()).append(s),e.html(u),f.html(e),i.setGridContentTable(u),r.dataSource===null?(h=t.buildTag("td",r.emptyRecordText,{},{colSpan:r.columns.length}),s.append(n(o.createElement("tr")).append(h))):i.renderRecords(),r.isFromGantt||f.css({"border-bottom-style":"solid","border-bottom-width":"thin","border-left-style":"solid","border-left-width":"thin","border-right-style":"solid","border-right-width":"thin","-moz-box-sizing":"border-box",width:"auto",height:"auto"}),u.css({position:"relative"}),f},_initialEndRendering:function(){var n=this,t=n.model.selectedRowIndex;t!=-1&&(n._rowSelectingEventTrigger()||(n.selectRows(t),n._rowSelectedEventTrigger(t)))},_addCellEditTemplate:function(){for(var n=this,e=n.model,r=e.columns,i=0,u=t.buildTag("div","",{display:"none"},{id:n._id+"_CellEditTemplate"}),f,o=r&&r.length,i=0;i<o;i++)f=t.buildTag("div","",{},{id:r[i].field+"_CellEdit"}),t.TreeGrid._initCellEditType(n,f,n._id,i),u.append(f);u.children().length&&(n._cellEditTemplate=u)},_addInitTemplate:function(){var i=this,r=i.model,e=r.columns,f=0,v=e.length,h,o,u={},s,c,l,a;if(e.length===0)return!1;for(u["_"+i._id+"rowClassName"]=t.TreeGrid._getrowClassName,u["_"+i._id+"expandStatus"]=n.proxy(i._getExpandStatusRecord,i),u["_"+i._id+"cellValue"]=i._getCellValue,u["_"+i._id+"itemDetails"]=n.proxy(i._convertItemToString,i),n.views.helpers(u),s="<tr class='e-treegridrows {{:~_"+i._id+"rowClassName()}} ",r.enableAltRow&&(s+="{{if isAltRow}}e-alt-row{{/if}} "),s+="{{if expanded}}e-treegridrowexpand {{else hasChildRecords}} e-treegridrowcollapse {{/if}} 'style='display:{{:~_"+i._id+"expandStatus(#data)}}'role='row'>",f=0;f<v;f++)h=e[f].field,e[f].isTemplateColumn?(c=e[f].templateID,l=e[f].template,c?o="<td style='height:"+r.rowHeight+"px;'class='{{if isSelected}}e-rowcell e-selectionbackground e-intend {{else}}e-rowcell e-intend {{/if}}'role='gridcell''tabindex='-1'aria-label={{:~_"+i._id+"itemDetails(#data)}}>"+n("#"+c)[0].innerHTML+"<\/td>":l&&(o="<td style='height:"+r.rowHeight+"px;class='{{if isSelected}}e-rowcell e-selectionbackground e-intend {{else}}e-rowcell e-intend {{/if}}'role='gridcell'tabindex='-1'aria-label={{:~_"+i._id+"itemDetails(#data)}}>"+l+"<\/td>")):f===r.treeColumnIndex?o="<td style='height:"+r.rowHeight+"px;'class='{{if isSelected}}e-rowcell e-selectionbackground e-intend {{else}}e-rowcell e-intend {{/if}}'role='gridcell'tabindex='-1'aria-label={{:~_"+i._id+"itemDetails(#data)}}><div  style='height:20px;' unselectable='on'>{{if hasChildRecords}}<div class='intend'style='height:1px; float:left; width:{{:level*20}}px; display:inline-block;'><\/div>{{else !hasChildRecords}}<div class='intend'style='height:1px; float:left; width:{{:(level+1)*20}}px; display:inline-block;'><\/div>{{/if}}<div class='{{if expanded}}e-treegridexpand e-icon{{else hasChildRecords}}e-treegridcollapse e-icon{{/if}}'style='float: left;display:inline-block; unselectable='on''><\/div><div class='e-cell'style='display:inline-block;width:100%' unselectable='on'>{{:#data['"+h+"']}}<\/div><\/div><\/td>":r.isFromGantt&&e[f].mappingName===r.resourceInfoMapping?(u={},u["_"+i._id+"resourceName"]=i._getResourceName,n.views.helpers(u),o="<td  style='height:"+r.rowHeight+"px;'class='{{if isSelected}}e-rowcell e-selectionbackground{{else}}e-rowcell {{/if}}'role='gridcell'tabindex='-1'aria-label={{:~_"+i._id+"itemDetails(#data)}}>{{:~_"+i._id+"resourceName('"+i._id+"Object','"+r.resourceNameMapping+"','"+h+"')}}<\/td>"):r.isFromGantt&&e[f].mappingName===r.predecessorMapping?(u={},u["_"+i._id+"predecessor"]=i._getPredecessorsValue,n.views.helpers(u),o="<td  style='height:"+r.rowHeight+"px;'class='{{if isSelected}}e-rowcell e-selectionbackground{{else}}e-rowcell {{/if}}' role='gridcell'tabindex='-1'aria-label={{:~_"+i._id+"itemDetails(#data)}}>{{:~_"+i._id+"predecessor('"+i._id+"Object','"+r.predecessorMapping+"','"+h+"')}}<\/td>"):o="<td  style='height:"+r.rowHeight+"px;'class='{{if isSelected}}e-rowcell e-selectionbackground{{else}}e-rowcell{{/if}}'role='gridcell'tabindex='-1'aria-label={{:~_"+i._id+"itemDetails(#data)}} unselectable='on'>{{:~_"+i._id+"cellValue('"+h+"')}}<\/td>",s+=o;r.isFromGantt&&(s+="<td class='e-extendcolumn'><\/td><\/tr>");a={};a[i._id+"_Template"]=s;n.templates(a)},_convertItemToString:function(n){for(var r,f="",t={},u=this.model.columns,i=0;i<u.length;i++)t[u[i].field]=n.item[u[i].field];for(r in t)t.hasOwnProperty(r)&&(f+=r+""+t[r]+"\n");return f},_getCellValue:function(n){var t=this.data[n];return t?t:this.data.item&&this.data.item[n]},_getResourceName:function(n,t,i){var e=this,r=e.data[i],u=0,o=r&&r.length,f=[];if(r&&r.length>0)for(u;u<o;u++)f.push(r[u][t]);return f},_getPredecessorsValue:function(n,t){return this.data.item[t]},_getExpandStatusRecord:function(n){var t=this;return t.getExpandStatus(n)?"table-row":"none"},_createRecords:function(n){var i=this,u=i.model,f=u.flatRecords,e=n.length,r=0,t,o=u.parentRecords,s=u.records;for(r;r<e;r++)t=i._createRecord(n[r],0,null),i._storedIndex++,t.isAltRow=i._storedIndex%2==0?!1:!0,o.push(t),t.index=i._storedIndex,s[i._storedIndex]=t,f.push(t),t.childRecords&&i._addNestedRecords(t.childRecords)},_createRecord:function(t,r,u,f){var s=this,e,o=t[s.model.childMapping];return e=n.extend({},t),e.parentItem=u,e.item=t,e.childRecords=o&&s._createChildRecords(o,r+1,e),e.hasChildRecords=o?!0:!1,e.expanded=f!==i?f:o?o.length>0:!1,e.isSelected=!1,e.level=r,e},_createChildRecords:function(n,t,i){for(var o=this,f=[],r=0,s=n.length,u=null,e,r=0;r<s;r++)u=n[r],u&&(e=o._createRecord(u,t,i),f.push(e));return f},_addNestedRecords:function(n){for(var t=this,o=t.model,s=o.flatRecords,u=0,c=n.length,h=o.records,f=[],r,u=0;u<c;u++)if(r=n[u],t._storedIndex++,r.isAltRow=t._storedIndex%2==0?!1:!0,r.index=t._storedIndex,h[t._storedIndex]=r,s.push(r),f=r.childRecords,f)for(var e=0,l=f.length,i=null,e=0;e<l;e++)i=f[e],t._storedIndex++,i.index=t._storedIndex,i.isAltRow=t._storedIndex%2==0?!1:!0,h[t._storedIndex]=i,s.push(i),i.childRecords&&t._addNestedRecords(i.childRecords)},_wireEvents:function(){var t=this,i=t.model;t._$gridContent.bind("scroll",n.proxy(t._onScroll,t));t._on(t.element,"click",t._onClick);t._on(t.element,"click","#"+t._id+"e-gridheader",t._onHeaderClick);t._on(t.element,"mousedown","#"+t._id+"e-gridheader",t._headerMouseDown);t.model.showGridCellTooltip&&(t._on(t.element,"mouseenter",".e-rowcell",t._mouseHover),t._on(t.element,"mouseleave",".e-rowcell",t._cellMouseLeave));t._enableColumnResizeEvents();i.isFromGantt&&t._on(t.element,"mousewheel DOMMouseScroll",t._mouseWheel);t._enableEditingEvents()},_mouseHover:function(i){i.preventDefault();var u=n(i.target),r=this,f=0,e=0,l=r.getRows(),a=u.closest("tr"),s=u[0].parentNode,v=l.index(a),c=r.model.currentViewData[v],y,h,o;r._cellMouseLeave();i||(i=window.event);i.originalEvent.pageX||i.originalEvent.pageY?(f=i.originalEvent.pageX,e=i.originalEvent.pageY):(i.originalEvent.clientX||i.originalEvent.clientY)&&(f=i.originalEvent.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e=i.originalEvent.clientY+document.body.scrollTop+document.documentElement.scrollTop);f+200>r._windowWidth&&(f-=f+200-r._windowWidth);e+150>r._windowHeight&&(e-=e+150-r._windowHeight);c&&(y={ttiptaskname:c.taskName},h=t.buildTag("table.e-tooltiptable","",{padding:"0"},{cellspacing:"1"}),r.model.showGridExpandCellTooltip==!1?u[0].firstChild&&u[0].firstChild.textContent?o=t.buildTag("tbody",u[0].firstChild.textContent,{},{}):s.childNodes.length>0&&s.childNodes[1]&&s.childNodes[1].textContent&&(o=t.buildTag("tbody",s.childNodes[1].textContent,{},{})):r.model.showGridExpandCellTooltip==!0&&u[0].firstChild&&u[0].firstChild.childNodes.length>0&&u[0].firstChild&&u[0].firstChild.textContent&&(o=t.buildTag("tbody",u[0].firstChild.textContent,{},{})),h.append(o),o&&(!r.model.showGridExpandCellTooltip&&r.model.showGridCellTooltip==!0&&u[0].firstChild||r.model.showGridExpandCellTooltip&&r.model.showGridCellTooltip==!0)&&(r._mouseOverTooltip=t.buildTag("div.e-tooltipgantt#tooltipgantt"+r._id+"",h,{top:e+10+"px",left:f+15+"px",position:"absolute","z-index":"5",padding:"0","border-radius":"3px"},{}),n(document.body).append(r._mouseOverTooltip)))},_cellMouseLeave:function(){var t=this;n("#tooltipgantt").remove();n(t._mouseOverTooltip).remove()},disableTooltip:function(){this._cellMouseLeave()},_createTooltipTemplate:function(){var i=this,u,e=i.model.columnHeaderTexts,f={_getTaskName:i._tooltipTaskName},t,r;n.views.helpers(f);t="<tr class='e-tooltip_rowcell'>";u="{{if ~_getTaskName()}}<td class='e-tooltiptaskname' style='height:auto;width:auto;font-weight:normal;'>{{:ttiptaskname}}<\/td>{{/if}}";t+=u;t+="<\/tr>";r={};r[i._id+"tooltipTemplate"]=t;n.templates(r)},_tooltipTaskName:function(){return this.data.ttiptaskname},_onScroll:function(n){var t=this,r;t.model.showGridCellTooltip&&t._cellMouseLeave();n.scrollLeft!=i&&(t._scrollLeft=n.scrollLeft,r=Math.abs(t._scrollLeft-t._prevScrollLeft));r&&(t._$gridHeaderContainer.scrollLeft(t._scrollLeft),t._prevScrollLeft=t._scrollLeft);n.scrollTop!=i&&t.model.enableVirtualization&&(t._scrollTop=n.scrollTop,t._vScrollDir=t._prevScrollTop<=t._scrollTop?1:-1,t._vScrollDist=Math.abs(t._scrollTop-t._prevScrollTop),t._vScrollDist&&(t._updateCurrentViewData(),t._prevScrollTop=t._scrollTop))},_onClick:function(i){var r=this,u=r.model,e=n(i.target),f;if(u.enableVirtualization&&r.element[0].focus(),e.hasClass("e-treegridexpand")||e.hasClass("e-treegridcollapse")){var s=e.closest("tr"),l=r.getRows(),a=l.index(s),o=u.currentViewData&&u.currentViewData[a],h=r._updatedRecords.indexOf(o),f={},c;f.data=o;f.recordIndex=h;f.expanded=s.hasClass("e-treegridrowexpand")?!1:!0;c=f.expanded?r._trigger("expanding",f):r._trigger("collapsing",f);c||u.isFromGantt||t.TreeGrid.sendExpandCollapseRequest(r,f)}else if(e.hasClass("e-rowcell")||e.parent().hasClass("e-rowcell")||e.closest("td").hasClass("e-rowcell")&&e.hasClass("e-cell")){if(!u.allowSelection)return;u.selectionType==t.TreeGrid.SelectionType.Multiple&&(i.ctrlKey&&(r._multiSelectCtrlRequest=!0),i.shiftKey&&(r._multiSelectShiftRequest=!0,r.selectRows(r._previousIndex,r.getRows().index(e.closest("tr")))));r._multiSelectShiftRequest||(h=r.getRows().index(e.closest("tr")),h!=-1&&(o=u.currentViewData[h],f={rowElement:s,recordIndex:u.selectedRowIndex},r._trigger("rowSelecting",f)||(u.selectedItem=o,u.selectedRowIndex=r._updatedRecords.indexOf(o),r.selectRows(u.selectedRowIndex),f={rowElement:s,data:r.model.selectedItem,target:"ejTreeGrid",recordIndex:u.selectedRowIndex},r._trigger("rowSelected",f))));r._multiSelectShiftRequest=!1}},_onHeaderClick:function(i){var r=this,f=r.model,u,e,o;if(r._cellMouseLeave(),n(i.target).is(".e-ascending, .e-descending")&&(i.target=i.target.parentNode),u=n(i.target),r.getHeaderTable().find(".e-columnheader").find(".e-headercellactive").removeClass("e-headercellactive"),u.hasClass("e-headercelldiv")){if(!f.allowSorting)return!1;e=n.trim(u.text());o=u.find("span").hasClass("e-ascending")?t.sortOrder.Descending:t.sortOrder.Ascending;f.allowMultiSorting&&i.ctrlKey&&(r._multiSortRequest=!0);r.sortColumn(e,o)}return!1},_headerMouseDown:function(t){var i=this,r=i.model,u;i._cellMouseLeave();r.allowColumnResize&&i._resizer._mouseDown(t);n(t.target).hasClass("headercelldiv")&&n(t.target).hasClass("headercell")&&(u=n(t.target).hasClass("headercelldiv")?n(t.target).parent():n(t.target),r.headerEffects&&u.addClass("headercellactive"))},_enableColumnResizeEvents:function(){var n=this;n.model.allowColumnResize?(n._on(n.element,"mousemove",n._mouseMove),n._on(n.element,"mouseup",n._mouseUp)):(n._off(n.element,"mousemove",n._mouseMove),n._off(n.element,"mouseup",n._mouseUp))},_mouseMove:function(n){var t=this;t.model.allowColumnResize&&t._resizer._mouseMove(n)},_mouseUp:function(t){var i=this;i.model.allowColumnResize&&(i.model.isEdit&&n(t.target).hasClass("e-headercelldiv")&&i.saveCell(),i._resizer._mouseUp(t))},_enableEditingEvents:function(){var n=this,t=n.model;t.editSettings.allowEditing?(t.editSettings.editMode=="cellEditing"&&n._on(n.element,"mousedown",".e-gridcontent",n._saveCellHandler),n._on(this.element,"dblclick",".e-gridcontent",n._editdblClickHandler)):(t.editSettings.editMode=="cellEditing"&&n._off(n.element,"mousedown",".e-gridcontent",n._saveCellHandler),n._off(this.element,"dblclick",".e-gridcontent",n._editdblClickHandler))},_saveCellHandler:function(t){var i=n(t.target),r=this;t.stopPropagation();i.closest(".e-popup").length==0&&i.closest(".e-rowcell").find("#"+r._id+"EditForm").length==0&&r.saveCell()},_editdblClickHandler:function(i){var r=this,u=r.model,e=n("#"+r._id+"EditForm"),f={};if(u.editSettings.editMode==="normal"&&(f.requestType=t.TreeGrid.Actions.BeginEdit,r._trigger("actionBegin",f)),r._cellEditingDetails.cancelSave){r._cellEditingDetails.cancelSave=!1;return}e.length===0&&(u.editSettings.editMode=="cellEditing"&&r.element.focus(),r._cellEditingDetails.columnIndex=r.getCellIndex(i),r._cellEditingDetails.rowIndex=r.getRowIndex(i),fieldName=r._cellEditingDetails.columnIndex>=0&&u.columns[r._cellEditingDetails.columnIndex].field,fieldName&&u.editSettings.allowEditing&&u.editSettings.editMode==t.TreeGrid.EditMode.CellEditing&&r.cellEdit(r._cellEditingDetails.rowIndex,fieldName))},_mouseWheel:function(n){var t=this,i=null,f=n;n=n.originalEvent;try{n.preventDefault?n.preventDefault():f.preventDefault()}catch(o){}if(t._$gridContent.height()>t._$gridContainer.height()){t._$gridContent.ejScroller("scrollY",0,!0);return}if(n.wheelDelta?(i=-n.wheelDelta/120,window.opera&&parseFloat(window.opera.version,10)<10&&(i=-i)):n.detail&&(i=n.detail/3),!i)return!1;var e=t._$gridContent.ejScroller("option","scrollTop"),r=e+i*57,u=parseInt(t._updatedRecords.length*30)-(t._viewPortHeight-18);return r>u&&(r=u),r<0&&(r=0),t._updateScrollTop(r),!0},_keyPressed:function(t,i,r){var u=this,v=u.element,s=v.ejTreeGrid("instance"),f=s.model,l,a,c,h,e,o;if(!f.allowKeyboardNavigation||i.tagName=="INPUT"&&r.code!=40&&r.code!=38&&r.code!=13&&r.code!=27&&r.code!=9||r.code!=113&&i.tagName=="TD")return!0;l=!1;a=n(i);switch(t){case"saveRequest":f.editSettings.editMode=="cellEditing"&&s._moveCurrentCell("down");break;case"cancelRequest":f.editSettings.editMode=="cellEditing"&&s.cancelEditCell();break;case"editRecord":f.editSettings.allowEditing&&f.editSettings.editMode=="cellEditing"&&(s._cellEditingDetails.rowIndex=f.selectedRowIndex,s._cellEditingDetails.columnIndex=u.getCellIndex(r,i),s._cellEditingDetails.columnIndex!==-1&&(fieldName=s.model.columns[s._cellEditingDetails.columnIndex].field,fieldName&&s.cellEdit(s._cellEditingDetails.rowIndex,fieldName)));break;case"firstRowSelection":u._rowSelectingEventTrigger()||(u.selectRows(0),h=u._updatedRecords.indexOf(f.selectedItem),e=h!==-1&&h*f.rowHeight,o=u._$gridContent.scrollTop(),o>e&&(args={requestType:"scroll",delta:e},u._completeAction(args),u._$gridContent.scrollTop(e),f.enableVirtualization&&u.element[0].focus()),u._rowSelectedEventTrigger(0));break;case"lastRowSelection":u._rowSelectedEventTrigger()||(c=u._updatedRecords.length-1,u.selectRows(c),h=f.selectedItem&&u._updatedRecords.indexOf(f.selectedItem),e=c!==-1&&h*f.rowHeight,e+u.model.rowHeight>=u._viewPortHeight&&(o=e+u.model.rowHeight-(u._viewPortHeight-u._scrollBarHeight),args={requestType:"scroll",delta:o},u._completeAction(args),u._$gridContent.scrollTop(o),f.enableVirtualization&&u.element[0].focus()),u._rowSelectedEventTrigger(c));break;case"moveCellLeft":f.editSettings.allowEditing&&f.editSettings.editMode=="cellEditing"&&(l=u._moveCurrentCell("left"));break;case"moveCellRight":f.editSettings.allowEditing&&f.editSettings.editMode=="cellEditing"&&a&&(l=u._moveCurrentCell("right"));break;case"downArrow":c=u._updatedRecords.length-1;u.model.selectedRowIndex!=c&&(u.selectRows(u.model.selectedRowIndex+1),h=f.selectedItem&&u._updatedRecords.indexOf(f.selectedItem),e=c!==-1&&h*f.rowHeight,e+u.model.rowHeight>=u._viewPortHeight&&(o=e+u.model.rowHeight-(u._viewPortHeight-u._scrollBarHeight),u._$gridContent.height()<u._$gridContainer.height()&&(o+=18),args={requestType:"scroll",delta:o},u._completeAction(args),u._$gridContent.children(".e-content").scrollTop(o),f.enableVirtualization&&u.element[0].focus()),u._rowSelectedEventTrigger(u.model.selectedRowIndex));break;case"upArrow":u.model.selectedRowIndex!==0&&u.selectRows(u.model.selectedRowIndex-1);h=u._updatedRecords.indexOf(f.selectedItem);e=h!==-1&&h*f.rowHeight;o=u._$gridContent.children(".e-content").scrollTop();o>e&&(args={requestType:"scroll",delta:e},u._completeAction(args),u._$gridContent.scrollTop(e),f.enableVirtualization&&u.element[0].focus());u._rowSelectedEventTrigger(u.model.selectedRowIndex);break;default:l=!0}return l},_rowSelectingEventTrigger:function(){var t=this,n=t.model,r={},i,u;return n.currentViewData.length<=0&&(n.selectedRowIndex=-1),n.selectedRowIndex!==-1&&n.currentViewData.length>0&&(u=t.getRows(),i=n.currentViewData[n.selectedRowIndex],n.selectedItem=i,r={rowElement:u.eq(n.selectedRowIndex),data:i,recordIndex:n.selectedRowIndex}),t._trigger("rowSelecting",r)},_rowSelectedEventTrigger:function(n){var t=this,r=t.model,i={},u=t.getRows();r.currentViewData.length>0&&(i={rowElement:u.eq(n),data:t.model.selectedItem,target:"ejTreeGrid",recordIndex:n},t._trigger("rowSelected",i))},_eventBindings:function(){var t=this,i=t.model,n=0,r=t._gridRows,u=r.length;if(i.queryCellInfo!=null||i.rowDataBound!=null)for(n;n<u;n++)t._rowEventTrigger(r[n],i.flatRecords[n])},_rowEventTrigger:function(t,i){var f=this;f._trigger("rowDataBound",{rowElement:t,data:i});var u=t.cells,o=n(t).find(".e-rowcell"),r=0,s=u.length,e,h=f.model.columns;for(r;r<s;r++)n(u[r]).hasClass("e-rowcell")&&(e=h[o.index(u[r])]),e&&f._cellEventTrigger(u[r],i,e)},_cellEventTrigger:function(n,t,i){var r={cellElement:n,data:t,column:i};r.cellValue=r.column&&t[r.column.field];this._trigger("queryCellInfo",r)},_completeAction:function(i){var r=this,f=r.model,e=f.sortSettings.sortedColumns,u,o;if(f.isEdit=!1,t.TreeGrid.Actions.Sorting==i.requestType&&f.allowSorting||t.TreeGrid.Actions.Refresh==i.requestType){if(f.allowSorting)for(r._multiSortRequest||(r.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending").remove(),r.getHeaderTable().find("[aria-sort]").removeAttr("aria-sort")),u=0;u<e.length;u++)r._addSortElementToColumn(e[u].field,e[u].direction);r._multiSortRequest=!1}else(t.TreeGrid.Actions.BeginEdit==i.requestType||t.TreeGrid.Actions.Add==i.requestType)&&(o=n("#"+r._id+"EditForm"),r.model.isEdit=!0,r.setWidthToColumns(),t.TreeGrid.Actions.Add==i.requestType&&o.find(".e-field:disabled").not(".e-identity").removeAttr("disabled").removeClass("e-disable"));r._trigger("actionComplete",i)},sendDataRenderingRequest:function(i){var r=this,u,f;if(r.model.currentViewData.length)switch(i.requestType){case t.TreeGrid.Actions.Delete:case t.TreeGrid.Actions.Refresh:case t.TreeGrid.Actions.Save:case t.TreeGrid.Actions.Sorting:case t.TreeGrid.Actions.Searching:case t.TreeGrid.Actions.ExpandCollapse:u=document.createElement("div");r.getContentTable().find("colgroup").first().replaceWith(r._getMetaColGroup());f=r.getContentTable().children("tbody");f.empty();u.innerHTML=["<table>",n.render[r._id+"_Template"](r.model.currentViewData),"<\/table>"].join("");r.getContentTable().get(0).replaceChild(u.firstChild.firstChild,r.getContentTable().get(0).lastChild);r._gridRows=r.getContentTable().get(0).rows;r.setGridRows(n(r.getContentTable().get(0).rows));r._eventBindings()}else r.getContentTable().find("tbody").empty().append(r._getEmptyTbody()),r._gridRows=null,r.setGridRows(null);r._completeAction(i)},sortColumn:function(r,u){var f=this,o=f.model,h=o.sortSettings.sortedColumns,s={},e=0,l=h.length,c;if(o.allowSorting&&n.inArray(r,f._disabledSortableColumns)==-1&&r.length!=0){for(f._multiSortRequest||(o.sortSettings.sortedColumns=[]),s.requestType=t.TreeGrid.Actions.Sorting,s.columnName=r,f._cSortedColumn=f.getFieldNameByHeaderText(r),f._cSortedDirection=s.columnSortDirection=u===i?t.sortOrder.Ascending:u,e;e<l;e++)if(h[e].field==f._cSortedColumn){h.splice(e,1);break}o.sortSettings.sortedColumns.push({field:f._cSortedColumn,direction:f._cSortedDirection});c=f.processBindings(s);c&&(f._cSortedDirection=f._cSortedColumn=null)}},deleteRow:function(n){var i=this,u,f,r={};if(t.isNullOrUndefined(n)&&(n=i.getRowByIndex(i.model.selectedRowIndex)),u=i.getRows().index(n),f=i.model.currentViewData[u],r.tr=n,r.data=f,r.requestType=t.TreeGrid.Actions.Delete,i._trigger("actionBegin",r))return!0;i.processBindings(r)},search:function(n){var r=this,i={};i.requestType=t.TreeGrid.Actions.Searching;i.keyValue=n;r._searchString=n;r.processBindings(i)},endEdit:function(){var n=this;return n.model.editSettings.editMode=="cellEditing"?n.saveCell():!0},getVisibleRange:function(){var n=this,r=n._scrollTop/n.model.rowHeight,u=r-Math.floor(r),t,i,f=n.model;return n._offset=u*f.rowHeight,t=Math.floor(r),i=n._getRowPosition(n._scrollTop+n._viewPortHeight),t=Math.max(0,t),i=Math.min(n.getRecordsCount(),i),n._visibleRange={top:t,bottom:i},n._visibleRange},setWidthToColumns:function(){var i=this,s=i.model,f=i.getContentTable().children("colgroup").find("col"),r=i.getHeaderTable().children("colgroup").find("col"),o=i._gridWidth,u=s.columns.length,n,e;for(f.length>u&&f.splice(0,f.length-u),r.length>u&&r.splice(0,r.length-u),n=0;n<r.length;n++)t.isNullOrUndefined(i._columnsWidthCollection[n])?(e=(o/u).toFixed(2)+"px",f.eq(n).css("width",e),r.eq(n).css("width",e),i._columnsWidthCollection[n]=(o/u).toFixed(2)):(f.eq(n).width(i._columnsWidthCollection[n]),r.eq(n).width(i._columnsWidthCollection[n]))},cellEdit:function(i,r){var u=this,o,s=u.model,f,e;return(u.model.showGridCellTooltip&&u._cellMouseLeave(),u.model.isEdit&&u.saveCell(),o=n("#"+u._id+"EditForm"),o.length>0)?!0:u.model.selectedItem?s.isFromGantt&&(r==="status"||r==="startDate"||r==="endDate"||r==="duration"||r==="predecessor")&&u.model.selectedItem.hasChildRecords||r==="baselineStartDate"||r==="baselineEndDate"?!1:u.getRows()[i]?(f=n(u.getRows()[i]),columnIndex=u.getColumnIndexByField(r),$targetTd=f.find(".e-rowcell").eq(columnIndex),column=u.model.columns[columnIndex],data=u.model.selectedItem,beginEditArgs={},args={validationRules:t.isNullOrUndefined(column.validationRules)?{}:n.extend(!0,{},column.validationRules),columnName:column.field,value:data[r]?data[r]:data.item&&data.item[r],data:data,columnObject:column,cell:$targetTd},isEditable=!0,s.isFromGantt&&args.columnName==="predecessor"&&(e=args.data.item[u.model.predecessorMapping],args.value=e?e:""),beginEditArgs.data=data,beginEditArgs.columnIndex=columnIndex,beginEditArgs.rowElement=f,beginEditArgs.cellElement=$targetTd,u._cellEventTrigger(f[0].cells[u._cellEditingDetails.columnIndex],data,args.columnObject),u._trigger("beginEdit",beginEditArgs))?!1:((n.inArray(r,u._primaryKeys)!=-1||args.columnObject.allowEditing===!1)&&(n.extend(u._cellEditingDetails,{cellValue:args.value,rowIndex:i,fieldName:r,data:args.data,columnIndex:columnIndex}),isEditable=!1),f.hasClass("e-insertedrow")&&!args.columnObject.isTemplateColumn&&(isEditable=!0),isEditable&&n.extend(u._cellEditingDetails,{rowIndex:i,cellValue:args.value,columnIndex:columnIndex,fieldName:r,cellEditType:args.columnObject.editType,data:data}),u._renderCellEditObject(args,$targetTd),f.addClass("e-editedrow"),u._cellEditingDetails.columnIndex===0?args.cell&&args.cell.addClass("e-editedfirstcell"):args.cell&&args.cell.addClass("e-editedcell"),!0):void 0:!1},saveCell:function(){var r=this,u=r.model,l,k,s,f,nt;if(n("#"+r._id+"EditForm").length>0){if(!r.editFormValidate())return!0;if(r._cellEditingDetails.columnIndex>=0){var p=n("#"+r._id+"EditForm"),w=p.closest("tr"),tt=p.closest("td"),b,i={},e=u.columns[r._cellEditingDetails.columnIndex],c=n("#"+r._id+r._cellEditingDetails.fieldName),o;if(i={columnName:e.field,value:r.getCurrentEditCellData(),data:r._cellEditingDetails.data,previousValue:r._cellEditingDetails.cellValue,columnObject:e,cellElement:tt,rowElement:w},(r._cellEditingDetails.cellEditType=="datetimepicker"||r._cellEditingDetails.cellEditType=="dropdownedit"||r._cellEditingDetails.cellEditType=="datepicker")&&c.data("ejWidgets")&&c[c.data("ejWidgets")[0]]("destroy"),r._cellEditingDetails.cellEditType==="datepicker"&&(i.value=r.getFormatedDate(i.value)),t.isNullOrUndefined(e.format)?i.columnObject.type=="boolean"?(l={},l[i.columnObject.field]=i.value,i.cellElement.empty().html(n(n.templates.Grid_JSONTemplate.render(l))[0].cells[r._cellEditingDetails.columnIndex].innerHTML)):i.cellElement.empty().html(i.value):(b=r.formatting(e.format,i.value),i.cellElement.empty().html(b)),k=(r._cellEditingDetails.cellEditType=="datepicker"||r._cellEditingDetails.cellEditType=="datetimepicker")&&i.value instanceof Date&&i.previousValue instanceof Date?i.value.getTime()!==i.previousValue.getTime():i.value!==i.previousValue,u.isEdit=!1,s=r._cellEditingDetails.fieldName,u.isFromGantt&&s==="predecessor"){var a=[],d=[],v=[],h=0,g,y;for(i.previousValue=i.data.predecessor,d=i.previousValue,i.value.length>0&&(v=i.data._calculatePredecessor(i.value)),g=v.length,f=0,nt=i.previousValue&&i.previousValue.length,f=0;f<nt;f++)y=d[f],y.from===i.data.taskId.toString()&&a.push(y);for(h=0;h<g;h++)a.push(v[h]);i.data[r._cellEditingDetails.fieldName]=a;i.data.item[u.predecessorMapping]=i.value}else if(k){if(u.isFromGantt)switch(s){case"taskId":i.data.item[u.taskIdMapping]=i.value;break;case"taskName":i.data.item[u.taskNameMapping]=i.value;break;case"startDate":i.data.item[u.startDateMapping]=i.value;break;case"endDate":i.data.item[u.endDateMapping]=i.value;break;case"resourceInfo":i.data.item[u.resourceInfoMapping]=r._getResourceId(i.value);break;case"Duration":i.data.item[u.durationMapping]=i.value;break;case"Progress":i.data.item[u.progressMapping]=i.value;break;default:i.data.item[r._cellEditingDetails[s]]=i.value}else i.data.item[r._cellEditingDetails.fieldName]=i.value;i.data[r._cellEditingDetails.fieldName]=i.value}u.isFromGantt&&(i.columnName==="startDate"||i.columnName==="endDate"||i.columnName==="duration"||i.columnName==="predecessor"||i.columnName=="status")&&(i.isModified=!0);r._cellEditingDetails.columnIndex===0?(o=n(n.render[r._id+"_Template"](i.data))[0].cells[r._cellEditingDetails.columnIndex],i.cellElement.removeClass("e-editedcell").replaceWith(o)):(o=n(n.render[r._id+"_Template"](i.data))[0].cells[r._cellEditingDetails.columnIndex],i.cellElement.removeClass("e-editedcell").replaceWith(o));r._trigger("endEdit",i);r._cellEventTrigger(i.rowElement[0].cells[r._cellEditingDetails.columnIndex],i.data,i.columnObject);w.removeClass("e-editedrow")}}return!1},editFormValidate:function(){return n.isFunction(n.validator)?n("#"+this._id+"EditForm").validate({onsubmit:!1}).form():!0},getCurrentEditCellData:function(){var u=this,f=u.model,r,i;if(n("#"+u._id+"EditForm").length){r=n("#"+u._id+u._cellEditingDetails.fieldName);switch(u._cellEditingDetails.cellEditType){case t.TreeGrid.EditingType.String:i=r.val();break;case t.TreeGrid.EditingType.Numeric:i=r.ejNumericTextbox("getValue");r.ejNumericTextbox("getValue");break;case t.TreeGrid.EditingType.Dropdown:i=f.isFromGantt?u._getSelectedItem(r.ejDropDownList("model.selectedItems")):r.ejDropDownList("model.value");break;case t.TreeGrid.EditingType.Boolean:i=r.is(":checked");break;case t.TreeGrid.EditingType.DatePicker:i=r.ejDatePicker("model.value");break;case t.TreeGrid.EditingType.DateTimePicker:i=r.ejDateTimePicker("model.value")}return typeof i=="string"&&i.length&&f.columns[u._cellEditingDetails.columnIndex].type=="number"&&(i=parseFloat(i)),i}return null},_getResourceId:function(n){for(var i=[],t=0,r=n.length,t=0;t<r;t++)i.push(n[t][this.model.resourceIdMapping]);return i},_getSelectedItem:function(t){var r=this,i=0,e=t.length,u=r.model.columns[r._cellEditingDetails.columnIndex].dropdownData,f=[];if(u)for(i=0;i<e;i++)n.each(u,function(n,r){t[i]===n&&f.push(r)});return f},getFormatedDate:function(n){return Globalize.format(n,this.model.dateFormat)},formatting:function(t,i){var r,u,s,e,o,h,c,f;return t=t.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),r=this,u=t,s=t.split("{0:"),h=t.split("}"),e=s[0],o=h[1],t.indexOf("{0:")!=-1?(c=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),f=c.exec(t),f!=null&&i!=null?e!=null&&o!=null?e+Globalize.format(i,f[2])+o:Globalize.format(i,f[2]):i!=null?i:""):r.data!=null&&r.data.Value==null?(n.each(r.data,function(n,t){u=u.replace(new RegExp("\\{"+n+"\\}","gm"),t)}),u):r.data.Value},getColumnIndexByField:function(n){var r=this,i=r.model.columns,u=i.length,t=0;for(t;t<u;t++)if(i[t].field==n)break;return t},getBrowserDetails:function(){var n=navigator.userAgent.match(/(firefox|chrome|opera|msie|safari)\s?\/?(\d+(.\d+)*)/i);return!navigator.userAgent.match(/Trident\/7\./)?{browser:n[1].toLowerCase(),version:n[2]}:{browser:"msie",version:jQuery.uaMatch(navigator.userAgent).version}},setValidation:function(){var r=this,i=r.model.columns,u=i.length,n=0;for(r._initValidator(),n;n<u;n++)t.isNullOrUndefined(i[n].validationRules)||r.setValidationToField(i[n].field,i[n].validationRules)},setValidationToField:function(i,r){var u=this,e=n("#"+u._id+i).length>0?n("#"+u._id+i):n("#"+i),f;e.rules("add",r);f=n("#"+u._id+"EditForm").validate({onsubmit:!1});t.isNullOrUndefined(r.required)||(f.settings.messages[i]={},f.settings.messages[i].required=t.TreeGrid.getColumnByField(u.model.columns,i).headerText+" is required")},getFieldNameByHeaderText:function(n){var i=this;return t.isNullOrUndefined(i._fieldColumnNames[n])?null:i._fieldColumnNames[n]},clearSelection:function(i){var r=this,e=r.model,o,i,s,h,a,c,f,l,u;if(e.selectedRowIndex!=-1&&(o=r.getRows(),!t.isNullOrUndefined(i))){if(r.getRowByIndex(i).removeAttr("aria-selected").find(".e-selectionbackground").removeClass("e-selectionbackground").removeClass("e-active"),s=n.inArray(i,this._selectedRowsIndexes),s!=-1&&this._selectedRowsIndexes.splice(s,1),h=e.flatRecords[i],h)h.isSelected=!1;else if(o&&o.removeAttr("aria-selected").find(".e-rowcell").removeClass("e-selectionbackground").removeClass("e-active"),a=new t.DataManager(e.flatRecords),c=new t.Query,c.search(!0,["isSelected"],t.FilterOperators.Equals,!0),f=a.executeLocal(c),l=f&&f.length,l>0)for(u=0,u=0;u<l;u++)f[u].isSelected=!1;r._selectedRowsIndexes.length||(r.model.selectedRowIndex=-1,r.model.selectedItem=null)}},updateExpandCollapseRecords:function(n,t,i){var r=this;n.expanded=t;r._removedCount=0;r._expandCollapseRecordCount=r.getChildRecordsCount(n);t?(r._tempRecordIndex=r.model.records.indexOf(n),n.hasChildRecords&&r._addNestedExpandCollapseRecords(n.childRecords,n.level,n,i)):r.model.flatRecords.splice(i+1,r._expandCollapseRecordCount)},getChildRecordsCount:function(n){var r=this,i=n.childRecords,t=0,f=i?i.length:0,u;for(t;t<f;t++)r._filteredRecords.length>0?(u=r._filteredRecords.indexOf(i[t]),u!=-1&&(++r._removedCount,i[t].hasChildRecords&&i[t].expanded&&r.getChildRecordsCount(i[t]))):(++r._removedCount,i[t].hasChildRecords&&i[t].expanded&&r.getChildRecordsCount(i[t]));return r._removedCount},getExpandStatus:function(n){var t=n.parentItem;return t!=null?t.expanded===!1?!1:t.parentItem?t.parentItem.expanded===!1?!1:this.getExpandStatus(t.parentItem):!0:!0},getColumnFieldNames:function(){var i=[],t=this.model.columns,n=0,r=t.length;for(n;n<r;n++)t[n].field&&i.push(t[n].field);return i},renderRecords:function(n){var i=this;n||(n={},n.requestType=t.TreeGrid.Actions.Refresh);this.sendDataRenderingRequest(n)},selectRows:function(r,u){var f=this,e=f.model,c=f.getRows(),s;if((e.editSettings.allowEditing||e.editSettings.allowAdding)&&n("#"+f._id+"EditForm").length>0&&f.endEdit()){c=f.getRows();return}if(t.isNullOrUndefined(u)||t.isNullOrUndefined(r)){r=t.isNullOrUndefined(r)?u:r;switch(e.selectionType){case t.TreeGrid.SelectionType.Multiple:if(f._multiSelectCtrlRequest){s=n.inArray(r,f._selectedRowsIndexes);s!=-1&&f.clearSelection(r)&&f._selectedRowsIndexes.splice(s,0);s==-1&&(f._selectedRowsIndexes.push(r),f.getRowByIndex(r).attr("aria-selected","true").find(".e-rowcell").addClass("e-selectionbackground e-active").attr("tabindex","0"));break}case t.TreeGrid.SelectionType.Single:f.clearSelection(f._previousIndex);r<=f._updatedRecords.length-1&&(f._selectedRowsIndexes=[],f._selectedRowsIndexes.push(r),f.getRowByIndex(r).attr("aria-selected","true").find(".e-rowcell").addClass("e-selectionbackground e-active").attr("tabindex",0),f._updatedRecords[r].isSelected=!0,e.selectedItem=f._updatedRecords[r])}}else if(e.selectionType==t.TreeGrid.SelectionType.Multiple){f.clearSelection();f._selectedRowsIndexes=[];var h=r-u<0?c.slice(r,u+1):c.slice(u,r+1),o=0,l=h.length;for(o;o<l;o++)f._selectedRowsIndexes.push(h[o].rowIndex),e.flatRecords[h[o].rowIndex].isSelected=!0;n(h).attr("aria-selected","true").find(".e-rowcell").addClass("e-selectionbackground e-active").attr("tabindex","0")}return f._previousIndex=f._selectedRowsIndexes.length?r:i,e.selectedRowIndex!=r&&(e.selectedRowIndex=r),f._multiSelectCtrlRequest=!1,!1},getCellIndex:function(t,i){var r=n(t.target),u;return(i&&(r=n(i)),r.prop("tagName")=="TD")?r.index():r.prop("tagName")=="DIV"&&r.hasClass("e-cell")?(u=r.closest("td"),u.index()):-1},getRowIndex:function(t){var e=this,r=n(t.target),u=e.getRows(),i=u.index(r.parent()),f;return i==-1&&(f=r.closest("tr"),i=u.index(f)),i},getRowByIndex:function(i,r){var f,e;try{var u=this,o=u.getRows(),s=u._gridRows,h=n();return u.model.enableVirtualization&&(f=u._updatedRecords[i],i=u.model.currentViewData.indexOf(f)),t.isNullOrUndefined(r)?(u.model.enableVirtualization&&(e=u._updatedRecords[r],r=u.model.currentViewData.indexOf(e)),n(s[i])):n(o.slice(i,r))}catch(c){return n()}},cancelEditCell:function(){var t=this,i=t._gridRows[t.model.selectedRowIndex],r;({})[t._cellEditingDetails.fieldName]=t._cellEditingDetails.cellValue;data=t.model.selectedItem;r=n(i).hasClass("e-insertedrow")?i.cells[t._cellEditingDetails.columnIndex]:i.cells[t._cellEditingDetails.columnIndex];n(r).removeClass("e-editedcell").empty().html(n(n.render[t._id+"_Template"](data))[0].cells[t._cellEditingDetails.columnIndex].innerHTML);t.element.focus();t._trigger("cancelEditCell")},refreshRow:function(t){var i=this,r=i.model.currentViewData[t];r&&n(i._gridRows[t]).replaceWith(n(n.render[i._id+"_Template"](r)));i.setGridRows(n(i.getContentTable().get(0).rows))},renderRecord:function(t){var r=this,h=n.render[this._id+"_Template"](t._cAddedRecord),i=r.model,u,e,s,f,o,c,l,a,v;r._gridRows!=null&&r._gridRows.length>0?(s=i.currentViewData.indexOf(i.selectedItem),t.position?t.position=="Above"?r.getRows().eq(s).before(h):t.position=="Below"&&r.getRows().eq(s).after(h):s===-1?(t._cAddedRecord.index=0,r.getRows().eq(0).before(h)):r.getRows().eq(s).after(h),i.isFromGantt&&(r.setGridRows(n(r.getContentTable().get(0).rows)),t._cAddedRecord.hasChildRecords=!1,t._cAddedRecord.expanded=!1,t._cAddedRecord.parentItem?t._cAddedRecord.parentItem.hasChildRecords&&t.position=="Below"?(f=i.flatRecords.indexOf(t._cAddedRecord.parentItem),o=i.flatRecords[f].childRecords.indexOf(t.selectedItem),o===-1?i.flatRecords[f].childRecords.splice(0,0,t._cAddedRecord):i.flatRecords[f].childRecords.splice(o+1,0,t._cAddedRecord)):t._cAddedRecord.parentItem.hasChildRecords&&t.position=="Above"&&(f=i.flatRecords.indexOf(t._cAddedRecord.parentItem),o=i.flatRecords[f].childRecords.indexOf(t.selectedItem),o===-1?i.flatRecords[f].childRecords.push(t._cAddedRecord):i.flatRecords[f].childRecords.splice(o,0,t._cAddedRecord)):i.parentRecords.splice(t._cAddedRecord.index,0,t._cAddedRecord),i.selectedItem?(c=i.records.indexOf(i.selectedItem),l=i.flatRecords.indexOf(i.selectedItem),t.position=="Above"?(e=c,u=l):(e=c+1,u=l+1)):(e=0,u=0),r.getExpandStatus(t._cAddedRecord)&&i.enableVirtualization?u===i.flatRecords.length?(i.flatRecords.push(t._cAddedRecord),i.dataSource.push(t._cAddedRecord.item)):(i.flatRecords.splice(u,0,t._cAddedRecord),i.dataSource.splice(u,0,t._cAddedRecord.item)):i.enableVirtualization||(u===i.flatRecords.length?(i.flatRecords.push(t._cAddedRecord),i.dataSource.push(t._cAddedRecord.item)):(i.flatRecords.splice(u,0,t._cAddedRecord),i.dataSource.splice(u,0,t._cAddedRecord.item))),e===i.records.length?(i.records.push(t._cAddedRecord),i.ids.push(t._cAddedRecord.taskId.toString())):(i.records.splice(e,0,t._cAddedRecord),i.ids.splice(e,0,t._cAddedRecord.taskId.toString())),r.setRecordsCount(i.flatRecords.length),r.setHeight(i.flatRecords.length*i.rowHeight),r._updatedRecords=i.flatRecords,r._updateCurrentViewData())):(r._gridRows==null||r._gridRows.length==0)&&(i.selectedRowIndex===-1&&(t._cAddedRecord.hasChildRecords=!1,t.recordIndex=0),i.flatRecords.push(t._cAddedRecord),i.dataSource==null&&(i.dataSource=[]),i.dataSource.push(t._cAddedRecord.item),i.records.push(t._cAddedRecord),i.ids.push(t._cAddedRecord.taskId.toString()),r._updatedGanttRecords=i.flatRecords,r._updatedRecords=i.flatRecords,r.setRecordsCount(i.flatRecords.length),r.setHeight(i.flatRecords.length*i.rowHeight),r._updateCurrentViewData(),r.getContentTable().find("tbody").empty().append(r._getEmptyTbody()),a=document.createElement("div"),r.getContentTable().find("colgroup").first().replaceWith(r._getMetaColGroup()),v=r.getContentTable().children("tbody"),v.empty(),a.innerHTML=["<table>",n.render[r._id+"_Template"](r.model.currentViewData),"<\/table>"].join(""),r.getContentTable().get(0).replaceChild(a.firstChild.firstChild,r.getContentTable().get(0).lastChild),r._gridRows=r.getContentTable().get(0).rows,r.setGridRows(n(r.getContentTable().get(0).rows)),r._eventBindings())},onScrollHelper:function(n){var t=this,i;t._$gridContent.ejScroller("scrollY",n,!0);i=t._$gridContent.ejScroller("isHScroll");i||t._$gridContent.scrollTop(n)},isVScroll:function(){return this._$gridContent.hasClass("e-scroller")?this._$gridContent.ejScroller("isVScroll"):!1},refreshScroller:function(n){var t=this,i,r;t._$gridContent.removeClass("e-borderbox");i=t._$gridContent.ejScroller("option","scrollTop");t._$gridContent.ejScroller("option",{persist:!0});t._$gridContent.ejScroller("option",{width:n});r=t._$gridContent.ejScroller("isHScroll");t.model.isFromGantt&&(r?t._$gridContent.removeClass("e-borderbox"):t._$gridContent.addClass("e-borderbox"));t._$gridContent.ejScroller("option",{scrollTop:i});r?t._$gridContent.scrollTop(0):t._$gridContent.scrollTop(i)},refreshHeight:function(){var n=this;n._$gridContent.ejScroller("refresh")},_getViewPortHeight:function(){var n=this;return n.element.height()-n._$gridHeaderContent.height()-parseFloat(n._$gridHeaderContent.css("border-top-width"))-parseFloat(n._$gridHeaderContent.css("border-bottom-width"))},_updateScrollCss:function(){var n=this,t;n.model.isFromGantt||(t=n.isVScroll(),t?n._$gridHeaderContent.addClass("e-scrollcss"):n._$gridHeaderContent.removeClass("e-scrollcss"))},_updateCurrentViewData:function(){var n=this,i=n.model,r={},u,f=!1;i.enableVirtualization?(n.getVisibleRange(),i.currentViewData=n._updatedRecords.slice(n._visibleRange.top,n._visibleRange.bottom),n._vScrollDist!==0&&(u=n._scrollTop-n._offset,(n._prevRTop-n._visibleRange.top!=0||n._prevRBottom-n._visibleRange.bottom!=0)&&(r.requestType=t.TreeGrid.Actions.Refresh,n.sendDataRenderingRequest(r),f=!0),n._$tableContent.css({top:u}),n._prevRTop=n._visibleRange.top,n._prevRBottom=n._visibleRange.bottom)):i.currentViewData=n._updatedRecords;n._isEnterKeyPressed&&(n._isEnterKeyPressed=!1,i.allowSelection&&i.editSettings.allowEditing&&(f||(n._cellEditingDetails.rowIndex+=1),n._rowSelectingEventTrigger()||(n.selectRows(n._cellEditingDetails.rowIndex),n._rowSelectedEventTrigger(n._cellEditingDetails.rowIndex)),n.cellEdit(n._cellEditingDetails.rowIndex,n.model.columns[n._cellEditingDetails.columnIndex].field)))},_getRowPosition:function(n){return Math.ceil(n/this.model.rowHeight)},_getMetaColGroup:function(){return this.getHeaderTable().find("colgroup").clone()},_getEmptyTbody:function(){var i=this,r=t.buildTag("td",i.model.emptyRecordText,{},{colSpan:i.model.columns.length});return n(document.createElement("tr")).append(r)},_addSortElementToColumn:function(i,r){var u=this,e=t.TreeGrid.getColumnByField(u.model.columns,i),o=n.inArray(e,u.model.columns),f=u.getHeaderTable().find("thead").find(".e-headercell").eq(o).find(".e-headercelldiv");f.find(".e-ascending,.e-descending").remove();f.append(u._createSortElement().addClass("e-"+r).addClass("e-icon"));f.parent().attr("aria-sort",r)},_createSortElement:function(){return t.buildTag("span","&nbsp;")},_renderCellEditObject:function(i,r){var u=this,e=t.buildTag("form.#"+u._id+"EditForm","",{},{}),h=u._cellEditTemplate,f,o,s={};s[i.columnObject.field]=i.value;columnIndex=u.getColumnIndexByField(i.columnObject.field);columnIndex===u.model.treeColumnIndex?r.find(".e-cell").empty():r.empty();o=h.find("#"+i.columnObject.field+"_CellEdit").html();f=i.columnObject.field==="predecessor"?n(n.templates(o).render(i.data)):n(n.templates(o).render(s));f.get(0).tagName=="SELECT"&&(f.val(s[i.columnObject.field]),f.val()==null&&f.val(f.find("option").first().val()));e.append(f);columnIndex===u.model.treeColumnIndex?r.find(".e-cell").append(e):r.append(e);u._setoffsetWidth();u._refreshEditForm();n.isFunction(n.validator)&&!n.isEmptyObject(i.validationRules)&&(u._initValidator(),u.setValidationToField(i.columnObject.field,i.validationRules));u.model.isEdit=!0},_setoffsetWidth:function(){var u=this,i,f=n("#"+u._id+"EditForm"),t=0,e,r;for(i=u.model.editSettings.editMode=="cellEditing"?f.closest("td"):f.find("tr").find(".e-rowcell"),e=i.length,t;t<e;t++)r=n(i.children()[0]).children(),u._tdsOffsetWidth[t]=r.length>1?i.get(t).offsetWidth-r[0].offsetWidth-r[1].offsetWidth:i.get(t).offsetWidth},getIndexofresourceInfo:function(n){var u=this,f=u._cellEditingDetails.data,i=f.resourceInfo,t=0,e=i&&i.length,r=[];for(t;t<e;t++)r.push(n.indexOf(i[t]));return r},_refreshEditForm:function(){var s=this,d=document.getElementById(s._id+"EditForm"),w=!1,b=n(d).find("input,select"),k=86,c=0,g=b.length,r,o,f=s.model,h,u={},y,e,p,l,a,v;for(c;c<g;c++){if(r=b.eq(c),f.editSettings.editMode=="cellEditing"&&(k=95),o=s._tdsOffsetWidth[c]*(k/100),r.hasClass("e-numerictextbox"))h=o,y=r.val(),u.width=h,u.height="21px",u.showSpinButton=!0,u.cssClass=f.cssClass,y.length&&(u.value=parseFloat(y)),p=t.TreeGrid.getColumnByField(f.columns,r.prop("name")),t.isNullOrUndefined(p.editParams)||n.extend(u,p.editParams),r.ejNumericTextbox(u),r.prop("name",r.prop("name").replace(s._id,""));else if(r.hasClass("e-datepicker"))h=o,u.width=h,u.height="21px",u.cssClass=f.cssClass,u.displayDefaultDate=!0,u.dateFormat=f.dateFormat,r.val().length&&(u.value=new Date(r.val())),e=t.TreeGrid.getColumnByField(f.columns,r.prop("name")),e.format!==i&&e.format.length>0&&(l=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),a=l.exec(e.format),u.dateFormat=a[2]),t.isNullOrUndefined(e.editParams)||n.extend(u,e.editParams),r.ejDatePicker(u);else if(r.hasClass("e-datetimepicker"))h=o,u={width:h,height:"21px",cssClass:f.css,showButton:!1},r.val().length&&(u.value=new Date(r.val())),e=t.TreeGrid.getColumnByField(f.columns,r.prop("name")),e.format!==i&&e.format.length>0&&(l=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),a=l.exec(e.format),u.dateTimeFormat=a[2]),t.isNullOrUndefined(e.editParams)||n.extend(u,e.editParams),r.ejDateTimePicker(u);else if(r.hasClass("e-dropdownlist"))v=f.columns[s._cellEditingDetails.columnIndex].dropdownData,f.isFromGantt?r.ejDropDownList({width:o+"px",height:21,showCheckbox:!0,dataSource:v,popupWidth:"auto",fields:{id:f.resourceIdMapping,text:f.resourceNameMapping,value:f.resourceNameMapping},selectedItems:s.getIndexofresourceInfo(v)}):(r.css({position:"absolute","margin-top":"-13px"}),r.ejDropDownList({width:o+"px",height:"21px",dataSource:v})),r.ejDropDownList("setSelectedValue",r.val());else switch(r.prop("tagName")){case"INPUT":r.attr("type")!="checkbox"?(r.css("text-align",r.attr("name")!=null&&t.TreeGrid.getColumnByField(f.columns,r.attr("name"))!=null?t.TreeGrid.getColumnByField(f.columns,r.attr("name")).textAlign:"center"),r.outerWidth(o).height(19)):r.width(o>0?r.width()>o?o:r.width():1);break;case"SELECT":r.width(o).height(20)}r.is(":disabled")||w||r.is(":hidden")&&typeof r.data("ejDropDownList")!="object"||s._isEnterKeyPressed||(s._focusElements(r.closest("td")),w=!0)}},_initValidator:function(){var i=this;n("#"+i._id+"EditForm").validate({onclick:!1,onfocusout:!1,errorClass:"e-field-validation-error",errorElement:"div",wrapper:"div",errorPlacement:function(r,u){var e=u.closest("td"),f=n(r).addClass("e-error"),o=t.buildTag("div.e-errortail e-toparrow");e.find(".e-error").remove();u.hasClass("e-numerictextbox")?f.insertAfter(u.closest(".e-numeric")):f.insertAfter(u);f.prepend(o);i.model.editSettings.editMode!="normal"&&f.offset({left:u.offset().left});f.fadeIn("slow")}})},_focusElements:function(n){var i=this,t;n.length&&(n.focus(),t=n.children(),t[0]&&(t[0].tagName.toLowerCase()=="select"||t[0].tagName.toLowerCase()=="input"?(t.focus().select(),t[0].focus()):t.find(".e-field.e-dropdownlist").length?t.find(".e-ddl").focus():t.find("input,select").select().focus()));i._$gridHeaderContainer.scrollLeft(i._$gridContent.children(".e-content").scrollLeft())},updateHeight:function(n){var t=this;t._$gridContainer&&t._$gridContent&&(n?(t._$gridContainer.css({height:n+"px",width:"auto"}),t._$gridContent.ejScroller("refresh")):t._$gridContainer.css({height:t._totalHeight+"px"}),t._$gridContent.hasClass("e-scroller")&&(t._$gridContent.ejScroller("refresh"),t._updateScrollCss()))},_addNestedExpandCollapseRecords:function(t,i,r,u){var f=this,l=f.model,h=l.flatRecords,a=l.records,c=0,y=t.length,e,v,s,o;for(c;c<y;c++)if(u++,f._tempRecordIndex++,e=a[f._tempRecordIndex],n.inArray(e,h)===-1&&h.splice(u,0,e),e&&e.isExpanded===!1&&(e.isExpanded=!0),e.hasChildRecords)if(e.expanded)for(v=e.childRecords.length,s=0,s;s<v;s++)u++,f._tempRecordIndex++,o=a[f._tempRecordIndex],h.splice(u,0,o),o.hasChildRecords&&(o.expanded?u=f._addNestedExpandCollapseRecords(o.childRecords,i+1,o,u):f._tempRecordIndex+=f.getChildCount(o,0));else f._tempRecordIndex+=f.getChildCount(e,0);return u},getChildCount:function(n,t){var r,u=this,i;if(!n.hasChildRecords)return 0;for(i=0;i<n.childRecords.length;i++)r=n.childRecords[i],t++,r.hasChildRecords&&(t=u.getChildCount(r,t));return t},_updateFilteredRecords:function(t){var i=this,u=0,f=t.length,r;for(i._filteredRecords=[],i._filteredGanttRecords=[],u;u<f;u++)r=t[u],r.parentItem!=null?(i._addParentRecord(r.parentItem),n.inArray(r,i._filteredRecords)===-1&&i.getExpandStatus(r)&&i._filteredRecords.push(r)):n.inArray(r,i._filteredRecords)===-1&&i.getExpandStatus(r)&&i._filteredRecords.push(r)},_addParentRecord:function(t){var i=this;t.parentItem?(i._addParentRecord(t.parentItem),n.inArray(t,i._filteredRecords)===-1&&i.getExpandStatus(t)&&i._filteredRecords.push(t)):n.inArray(t,i._filteredRecords)===-1&&i.getExpandStatus(t)&&i._filteredRecords.push(t)},_updateExpandCollapseForSortedRecords:function(n,t){var i=this,r=0,o=i._sortedRecords.length,u,f=i._sortedRecords.indexOf(n),e;if(t)i._addNestedSortRecords(n,f);else{for(e=0,r=f+1;r<o;r++)if(u=i._sortedRecords[r],u.level===n.level)break;else i.getExpandStatus(u)||e++;i._sortedRecords.splice(f+1,e)}},_addNestedSortRecords:function(i,r){var u=this,c,o=u.model.sortSettings.sortedColumns,s,e,l,h,f;if(o.length)for(s=o.length-1,u._queryManagar.queries=[],e=s;e>=0;e--)u._queryManagar.sortBy(o[e].field,o[e].direction);if(i.hasChildRecords)for(l=t.DataManager(i.childRecords),c=l.executeLocal(u._queryManagar).result,s=c.length,h=0;h<s;h++)f=c[h],u._filteredRecords.length?n.inArray(f,u._filteredRecords)!==-1&&u._sortedRecords.splice(++r,0,f):u._sortedRecords.splice(++r,0,f),f.hasChildRecords&&f.expanded&&u._addNestedSortRecords(f,r)},_updateAltRow:function(){for(var r=this,n=0,t=r._updatedRecords,u=t.length,i,n=0;n<u;n++)i=t[n],i.isAltRow=n%2==0?!0:!1},_getFilteredChildRecordsCount:function(n){for(var t=this,u=t.model,f=n&&n.childRecords&&n.childRecords.length,i=0,r,i=0;i<f;i++)r=n.childRecords[i],u.enableVirtualization?t.getExpandStatus(r)&&t._removedCount++:t._removedCount++,r.childRecords&&t._getFilteredChildRecordsCount(r);return t._removedCount},_sortingRecords:function(){var n=this,u=n.model,r=u.sortSettings.sortedColumns,f,i,e,o;if(n._queryManagar.queries=[],r.length)for(f=r.length-1,i=f;i>=0;i--)n._queryManagar.sortBy(r[i].field,r[i].direction);return e=new t.DataManager(u.parentRecords),o=e.executeLocal(n._queryManagar).result,n._sortedRecords=[],n._storedIndex=-1,n._createSortedRecords(o),n._tempsortedrecords=n._sortedRecords,n._updateSortedRecords(n._tempsortedrecords),n.setRecordsCount(n._sortedRecords.length),n._updatedRecords=n._sortedRecords,!0},_createSortedRecords:function(i){var r=this,u=r._sortedRecords,f,e=r.model.enableAltRow;n.each(i,function(n,i){if(r._searchString.length>0?r._filteredRecords.length>0&&r._filteredRecords.indexOf(i)!==-1&&(r._storedIndex++,e&&(i.isAltRow=r._storedIndex%2==0?!1:!0),u[r._storedIndex]=i):(r._storedIndex++,e&&(i.isAltRow=r._storedIndex%2==0?!1:!0),u[r._storedIndex]=i),i.hasChildRecords&&i.expanded){f=t.DataManager(i.childRecords);var o=f.executeLocal(r._queryManagar).result;r._createSortedRecords(o)}})},_updateSortedRecords:function(i){var u=this,f=0,s=i.length,r,h=this.model,e,o;for(f;f<s;f++)r=i[f],(u.getExpandStatus(r)||!h.enableVirualization)&&(u._filteredRecords.length>0?n.inArray(r,u._filteredRecords)!==-1&&n.inArray(r,u._sortedRecords)===-1&&u._sortedRecords.push(r):n.inArray(r,u._sortedRecords)===-1&&u._sortedRecords.push(r),r.hasChildRecords&&r.childRecords.length>0&&r.expanded&&(e=t.DataManager(r.childRecords),o=e.executeLocal(u._queryManagar).result,u._updateSortedRecords(o)))},_removeSortElementFromColumn:function(i){var r=this,f=t.TreeGrid.getColumnByField(r.model.columns,i),e=n.inArray(f,r.model.columns),u=r.getHeaderTable().find("thead").find(".e-headercell").eq(e).find(".e-headercelldiv");u.find(".ascending,.descending").remove();u.parent().removeAttr("aria-sort")},_addEmptyColumntoGrid:function(){n(".e-gridheadercontainer table colgroup").append(t.buildTag("col","",{width:"auto"},{}));n(".e-gridheadercontainer table thead tr").append(t.buildTag("th.e-headercell"))},_updateScrollTop:function(n){var i={},t=this,r;i.requestType="scroll";i.delta=n;r=t._$gridContent.ejScroller("isHScroll");r?t._$gridContent.scrollTop(0):t._$gridContent.scrollTop(n);t._$gridContent.ejScroller("scrollY",n,!0);t._completeAction(i)},_moveCurrentCell:function(n){var t=this,i=t._cellEditingDetails.rowIndex,u=t._cellEditingDetails.columnIndex,r=t.model;if(i==-1&&u==-1)return!0;t.model.isEdit&&(t.saveCell(),t.model.isEdit=!1);switch(n){case"right":if(!t._rowSelectingEventTrigger()&&!t.selectRows(t._cellEditingDetails.rowIndex)){if(i==t._gridRows.length-1&&u==r.columns.length-1)return!0;u==r.columns.length-1?(t._cellEditingDetails.columnIndex=0,t._cellEditingDetails.rowIndex=i+1):t._cellEditingDetails.columnIndex=u+1;t.cellEdit(t._cellEditingDetails.rowIndex,r.columns[t._cellEditingDetails.columnIndex].field)}break;case"left":if(i==0&&u==0)return!0;u==0?(t._cellEditingDetails.columnIndex=r.columns.length-1,t._cellEditingDetails.rowIndex=i-1):t._cellEditingDetails.columnIndex=u-1;t.selectRows(t._cellEditingDetails.rowIndex);t.cellEdit(t._cellEditingDetails.rowIndex,r.columns[t._cellEditingDetails.columnIndex].field);break;case"up":if(i==0)return!0;t._cellEditingDetails.rowIndex=i-1;t.selectRows(t._cellEditingDetails.rowIndex);t._rowSelectedEventTrigger(t._cellEditingDetails.rowIndex);t.cellEdit(t._cellEditingDetails.rowIndex,r.columns[t._cellEditingDetails.columnIndex].field);break;case"down":i+1==t.getRows().length-1&&t.model.enableVirtualization&&(t._isEnterKeyPressed=!0,t._updateScrollTop(t._$gridContent.scrollTop()+r.rowHeight-t._offset));t._isEnterKeyPressed||t._updatedRecords.length>i+1&&(t.selectRows(i+1)||(t._rowSelectedEventTrigger(t._cellEditingDetails.rowIndex+1),t._cellEditingDetails.rowIndex=i+1,t.cellEdit(t._cellEditingDetails.rowIndex,r.columns[t._cellEditingDetails.columnIndex].field),args={},args.requestType="scroll",args.delta=t._$gridContent.children(".e-content").scrollTop(),t._trigger("actionComplete",args)))}return!1},_findColumnsWidth:function(){for(var t=this,i=t.model.columns.length,r=t.getHeaderTable().find("colgroup").find("col"),n=0;n<i;n++)t._columnsWidthCollection[n]=r.eq(n).width()},_calculateWidth:function(){for(var t=this.getHeaderTable().find("colgroup").find("col"),i=0,n=0;n<t.length;n++)i+=t.eq(n).width();return i},_compiledDropDownTemplate:function(){var i=t.buildTag("select"),r=t.buildTag("option","{{:text}}",{},{value:"{{:value}}"});return i.append(r),n.templates(i.html())},_renderScroller:function(){var i=this,r=i.model,u=r.flatRecords.length*r.rowHeight,f=i._viewPortHeight<0?u:i._viewPortHeight,e,o,s;i._$gridContent.css({height:f+"px"});i._$gridContainer.css({height:u+"px"});i._$gridContent.hasClass("e-scroller")?i._$gridContent.ejScroller("refresh"):($div=t.buildTag("div",{},{width:"auto",height:"auto"}),$div.append(i._$gridContainer),i._$gridContent.append($div),e=i._gridHeight?f:"auto",o=i.element.width()-2,i._$gridContent.ejScroller({height:i.model.isFromGantt?0:e,width:o,scroll:n.proxy(i._onScroll,i)}));i._updateScrollCss();s=i._$gridContent.ejScroller("isHScroll");i.model.isFromGantt&&(s?i._$gridContent.removeClass("borderbox"):i._$gridContent.addClass("borderbox"))},_destroy:function(){var n=this;n.element.empty().removeClass("e-treegrid-core e-treegrid "+n.model.cssClass)}});t.TreeGrid.Actions={Sorting:"sorting",BeginEdit:"beginedit",Save:"save",Add:"add",Delete:"delete",Cancel:"cancel",Refresh:"refresh",Searching:"searching",ExpandCollapse:"expandcollapse",Selection:"selection",rowHover:"rowHover",Scroll:"scroll",ContextMenuAdd:"contextMenuAdd"};t.TreeGrid.SelectionType={Single:"single",Multiple:"multiple"};t.TreeGrid.EditMode={Normal:"normal",CellEditing:"cellEditing"};t.TreeGrid.EditingType={String:"stringedit",Boolean:"booleanedit",Numeric:"numericedit",Dropdown:"dropdownedit",DatePicker:"datepicker"};t.TreeGrid=t.TreeGrid||{};t.TreeGrid._initCellEditType=function(i,r,u,f){var s=i,h=s.model,e=h.columns,o=e[f],c,l,a,v,y,p,w;t.isNullOrUndefined(e[f].editType)&&(o.editType="stringedit");switch(o.editType){case"stringedit":h.isFromGantt?(c={},c["_"+u+"cellValue"]=t.TreeGrid._getCellValue,o.field==="predecessor"&&(c["_"+u+"predecessorCell"]=t.Gantt._getPredecessorsValue),n.views.helpers(c),l=o.field==="predecessor"?t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:~_"+u+"predecessorCell('"+h.predecessorMapping+"')}}",id:u+o.field,name:o.field}):t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:~_"+s._id+"cellValue('"+e[f].field+"')}}",id:s._id+h.columns[f].field,name:h.columns[f].field})):l=t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:#data['"+o.field+"']}}",id:u+o.field,name:o.field});r.html(l);break;case"booleanedit":r.html("{{if "+e[f].field+'}} <input class="e-field e-checkbox" type ="checkbox" id='+s._id+e[f].field+"name="+e[f].field+'checked="checked"><\/input>{{else}} <input class="e-field e-checkbox" type ="checkbox" id='+s._id+e[f].field+"name="+e[f].field+" > {{/if}}");break;case"numericedit":a=t.buildTag("input.e-numerictextbox e-field","",{},{type:"text",value:"{{:#data['"+e[f].field+"']}}",id:s._id+e[f].field,name:e[f].field});r.append(a);break;case"datepicker":case"datetimepicker":v=t.buildTag("input.e-"+e[f].editType+" e-field","",{},{type:"text",value:"{{:#data['"+e[f].field+"']}}",id:u+e[f].field,name:e[f].field});r.append(v);break;case"dropdownedit":h.isFromGantt?(y=t.buildTag("input.e-field e-dropdownlist e-field","",{},{type:"text",value:"{{:#data['"+e[f].field+"']}}",id:u+e[f].field,name:e[f].field}),r.append(y)):t.isNullOrUndefined(o.dropdownData)||(p=o.dropdownData,w=s._compiledDropDownTemplate(),r.get(0).innerHTML=["<select>",w.render(p),"<\/select>"].join(""),r.find("select").prop({id:s._id+o.field,name:o.field}).addClass("e-field e-dropdownlist"))}};t.TreeGrid._getCellValue=function(n){var t=this.data[n];return t?t:this.data.item&&this.data.item[n]};t.TreeGrid._getrowClassName=function(){var n="gridrowIndex",t=this;return t.data.parentItem&&(n+=t.data.parentItem.index.toString()),n+="level",n+t.data.level.toString()};t.TreeGrid.getColumnByField=function(n,t){var i=0;for(i;i<n.length;i++)if(n[i].field==t)break;return i==n.length?null:n[i]};t.TreeGrid.sendExpandCollapseRequest=function(i,r){var u=i,o=u.model;if(r.requestType=t.TreeGrid.Actions.ExpandCollapse,o.enableVirtualization)u._isFromGantt?u._$treegridHelper.ejTreeGrid("processBindings",r):u.processBindings(r),r.expanded?u._trigger("expanded",r):u._trigger("collapsed",r),u._isFromGantt?(u._$treegridHelper.ejTreeGrid("sendDataRenderingRequest",r),u._updatedGanttRecords=u.getUpdatedRecords(),u._currentViewData=u.getCurrentViewData(),u.model.enableVirtualization&&(u.model.predecessorMapping&&(u._isValidationEnabled=!1,u._connectorlineIds=[],u._connectorLinesCollection=[],u._$ganttchartHelper.ejGanttChart("clearConnectorLines"),u._createConnectorLinesCollection()),u._$ganttchartHelper.ejGanttChart("refreshHelper",u._currentViewData,u._updatedGanttRecords),u._$treegridHelper.ejTreeGrid("refreshHeight"))):(u.sendDataRenderingRequest(r),u._$gridContent.ejScroller("refresh"));else{var f=r.data,s,e,h=0,c=f.expanded!==r.expanded;s=u._isFromGantt?u._currentViewData.indexOf(f):u.model.currentViewData.indexOf(f);e=n(u.getRows()[s]);r.expanded?(f.expanded=r.expanded,u._expandedRecordsCount=0,t.TreeGrid.expandRecord(u,f,r.expanded,r),c&&(u._totalCollapseRecordCount-=u._expandedRecordsCount),e.find(".e-treegridcollapse").removeClass("e-treegridcollapse").addClass("e-treegridexpand"),e.removeClass("e-treegridrowcollapse").addClass("e-treegridrowexpand"),o.enableAltRow&&t.TreeGrid.updateAltRow(u,f,s,1)):(u._collapsedRecordCount=0,t.TreeGrid.collapseRecord(u,f,r.expanded),c&&(u._totalCollapseRecordCount+=u._collapsedRecordCount),f.expanded=r.expanded,e.find(".e-treegridexpand").removeClass("e-treegridexpand").addClass("e-treegridcollapse"),e.removeClass("e-treegridrowexpand").addClass("e-treegridrowcollapse"),o.enableAltRow&&t.TreeGrid.updateAltRow(u,f,s,u._collapsedRecordCount+1));h=(u.getUpdatedRecords().length-u._totalCollapseRecordCount)*o.rowHeight;u._isFromGantt?(u._$treegridHelper.ejTreeGrid("updateHeight",h),u._$ganttchart.ejGanttChart("updateHeight",h)):u.updateHeight(h);r.expanded?u._trigger("expanded",r):u._trigger("collapsed",r)}};t.TreeGrid.expandRecord=function(i,r,u,f){var e=i,a=".gridrowIndex"+r.index.toString()+"level"+(r.level+1).toString(),v=n(a),h=0,l=v.length,y,c,b=e.model,s=n(a),o,p=e.getRows(),w=n(p[o]);for(o=e._isFromGantt?e._currentViewData.indexOf(r):b.currentViewData.indexOf(r),r.hasChildRecords&&r.childRecords.length>0&&(w.find(".e-treegridcollapse").removeClass("e-treegridcollapse").addClass("e-treegridexpand"),w.removeClass("e-treegridrowcollapse").addClass("e-treegridrowexpand")),e._expandedRecordsCount+=e._isFromGantt?s.length/2:s.length,s.length===0&&e.model.allowSearching&&e._seacrhString&&e._seacrhString.length>0&&f&&e._$treegridHelper.ejTreeGrid("sendExpandCollapseRequest",f),s.css({display:"table-row"}),e._isFromGantt&&(l=l/2),h;h<l;h++)y=v[h],o=p.index(y),o!==-1&&(c=e._isFromGantt?e._updatedGanttRecords[o]:e._updatedRecords[o],c.isExpanded=!0,c.expanded&&t.TreeGrid.expandRecord(e,c,u));e._isFromGantt&&e.updateConnectorLines(s,u)};t.TreeGrid.collapseRecord=function(i,r,u){var f=i,p=f.model,l=".gridrowIndex"+r.index.toString()+"level"+(r.level+1).toString(),a=n(l),e=0,s=a.length,v,h,c,o=n(l),w=f.getRows(),y;for(f._collapsedRecordCount+=f._isFromGantt?o.length/2:o.length,o.css({display:"none"}),f._isFromGantt&&(f.updateConnectorLines(o,u),s=s/2),e;e<s;e++)v=a[e],y=f.getRows(),h=f.getRows().index(v),h!==-1&&(c=f.getUpdatedRecords()[h],c.expanded&&t.TreeGrid.collapseRecord(f,c,u))};t.TreeGrid.updateAltRow=function(t,i,r,u){for(var e=t,f=0,l=e.model,c=e._isFromGantt?e._currentViewData:l.currentViewData,a=c.length,o=i.isAltRow,s,h=e.getRows(),f=r+u;f<a;f++)n(h[f]).css("display")!=="none"&&(s=c[f],s.isAltRow=!o,o=s.isAltRow,o?n(h[f]).addClass("e-alt-row"):n(h[f]).removeClass("e-alt-row"))};jQuery.uaMatch=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}}}(jQuery,Syncfusion),function(n,t,i){t.widget("ejGanttChart","ej.GanttChart",{element:null,model:null,_rootCSS:"e-ganttchart",keyConfigs:{focus:"e",insertRecord:"45",deleteRecord:"46",editRecord:"113",saveRequest:"13",cancelRequest:"27",firstRowSelection:"36",lastRowSelection:"35",upArrow:"38",downArrow:"40",moveCellRight:"9",moveCellLeft:"shift+9",selectedRowExpand:"alt+40",totalRowExpand:"ctrl+40",selectedRowCollapse:"alt+38",totalRowCollapse:"ctrl+38"},defaults:{childPropertyName:"",taskIdMapping:"",taskNameMapping:"",startDateMapping:"",endDateMapping:"",childMapping:"",finishDateMapping:"",durationMapping:"",milestoneMapping:"",progressMapping:"",predecessorMapping:"",resourceInfoMapping:"",resourceNameMapping:"",resourceCollection:[],holidays:[{day:null,label:null,background:null}],stripLines:[{day:null,label:null,lineStyle:"dotted",lineColor:"#169dd7",lineWidth:2}],enableTaskbarTooltip:!0,enableTaskbarDragTooltip:!0,highlightWeekends:!0,scheduleStartDate:null,scheduleEndDate:null,enableProgressBarResizing:!0,rowHeight:30,progressbarHeight:100,connectorlineWidth:1,dateFormat:"MM/dd/yyyy",locale:"en-US",taskbarBackground:"#DE8080",progressbarBackground:"#C44647",weekendBackground:"#F2F2F2",connectorLineBackground:"#383838",parentTaskbarBackground:"#383838",parentProgressbarBackground:"#1C1C1C",selectedItem:null,selectedRowIndex:-1,perDayWidth:null,queryTaskbarInfo:null,taskbarTemplate:null,progressbarTemplate:null,parenttaskbarTemplate:null,parentprogressbarTemplate:null,rows:[],ganttRecords:[],scheduleWeeks:[],updatedGanttRecords:[],tooltipTemplate:null,tooltipTemplateId:null,progressbarTooltipTemplateId:null,taskbarEditingTooltipTemplateId:null,taskbarEditingTooltipTemplate:null,progressbarTooltipTemplate:null,showTaskNames:!0,showProgressStatus:!0,showResourceNames:!0,enableRowHover:!1,includeWeekend:!1,allowZooming:!1,allowGanttChartEditing:!0,allowKeyboardNavigation:!0,renderBaseline:!1,baselineColor:"#fba41c ",editSettings:{allowEditing:!1,allowAdding:!1,allowDeleting:!1,editMode:"normal",dialogEditorTemplateId:null},scheduleHeaderSettings:{weekHeaderFormat:"MMM dd , yyyy",dayHeaderFormat:"ddd",weekendBackground:"#F2F2F2"},localizedDays:null,localizedMonths:null,columnHeaderTexts:null},updateHighlightWeekends:function(n){var t=this;t.model.highlightWeekends=n;t.model.highlightWeekends==!0?t._renderWeekends():t._$weekendContainer.remove()},updateWeekendBackground:function(n){var t=this;t.model.weekendBackground=n;t._$weekendContainer.remove();t._renderWeekends()},showTooltip:function(n){var t=this;t.model.enableTaskbarTooltip=n;t._createTaskbarTemplate();t._refresh()},showEditingTooltip:function(n){var t=this;t.model.enableTaskbarDragTooltip=n;t._createTaskbarTemplate();t._refresh()},updateConnectorLineBackground:function(n){var t=this;t.model.connectorLineBackground=n;t._createConnectorLineTemplate()},updateConnectorlineWidth:function(n){var t=this;t.model.connectorlineWidth=parseInt(n);t._createConnectorLineTemplate()},updateTaskbarBackground:function(n){var t=this;t.model.taskbarBackground=n;this._createTaskbarTemplate();this._refresh()},updateProgressbarBackground:function(n){this.model.progressbarBackground=n;this._createTaskbarTemplate();this._refresh()},updateParentTaskbarBackground:function(n){this.model.parentTaskbarBackground=n;this._createTaskbarTemplate();this._refresh()},updateParentProgressbarBackground:function(n){this.model.parentProgressbarBackground=n;this._createTaskbarTemplate();this._refresh()},updateRenderTaskNames:function(n){var t=this;t.model.showTaskNames=n;t._createTaskbarTemplate();t._refresh()},updateRendeProgressStatus:function(n){var t=this;t.model.showProgressStatus=n;t._createTaskbarTemplate();t._refresh()},updateRenderResourceNames:function(n){var t=this;t.model.showResourceNames=n;t._createTaskbarTemplate();t._refresh()},ganttChartEditing:function(n){var t=this;t.model.allowGanttChartEditing=n},resizeProgressbar:function(n){var t=this;t.model.enableProgressBarResizing=n},updateAllowKeyboardNavigation:function(n){this.model.allowKeyboardNavigation=n},updateProgressbarHeight:function(n){var t=this;this.model.progressbarHeight=n;t._createTaskbarTemplate();t._refresh()},updateBaselineColor:function(n){var t=this;this.model.baselineColor=n;t._createTaskbarTemplate();t._refresh()},updateRenderBaseline:function(n){var t=this;this.model.renderBaseline=n;t._createTaskbarTemplate();t._refresh();t._createConnectorLineTemplate()},_getWeekWidth:function(){return this.model.perDayWidth*7},_getHeight:function(){return this._containerHeight},_setHeight:function(n){this._containerHeight=n},getGanttChartRows:function(){return this._ganttChartRows},getUpdatedRecords:function(){return this.model.ganttRecords},setUpdatedRecords:function(n,t,i,r){var u=this;u._currentViewData=n;u.model.updatedGanttRecords=t;u.model.ganttRecords=t;u.model.rows=i;u.model._ids=r},_getFormatedDate:function(n,t){return Globalize.format(n,t)},_getViewportHeight:function(){var n=this,t=n._$headerContainer;return n.element.height()-t.height()-parseFloat(t.css("border-bottom-width"))},_init:function(){var r=this,u=r.model,f,e;r.element.addClass("e-ganttchart-core");r._initPrivateProperties();r._initialize();r._renderGanttChart();r._$bodyContainer.append(r._$bodyContent);r._$ganttChartContainer.append(r._$bodyContainer);n(r._$bodyContainer).css({height:r._viewportHeight+"px"});r.model.enableVirtualization&&n(r._$bodyContent).css({height:u.rowHeight*u.ganttRecords.length+"px"});n(r._$bodyContent).css({width:u.scheduleWeeks.length*r._scheduleWeekWidth+"px"});r.createGridLinesTable();r.renderGanttRecords();r._scrollBarHeight=r._$bodyContainer[0].offsetHeight-r._$bodyContainer[0].clientHeight;f=t.buildTag("div");f.append(r._$bodyContent);r._$bodyContainer.append(f);r._$bodyContainer.ejScroller({width:r.element.width(),enableTouchScroll:!1,height:r._getViewportHeight(),scroll:function(n){var t=n.scrollTop;if(n.requestType="scroll",n.delta=t,r._completeAction(n),t!=i)r.onScrollHelper(t);else r._handleScroll(n)}});e=r._$bodyContainer.ejScroller("isHScroll");e?r._$bodyContainer.removeClass("borderbox"):r._$bodyContainer.addClass("borderbox");r._wireEvents()},reRenderGanttChart:function(t,i){var r=this;r._wireEvents();r.model.perDayWidth=t;r.model.ganttRecords=i;r._scheduleWeekWidth=r._getWeekWidth();n(r._$secondaryCanvas).empty();n(r._$headerContainer).empty();n(r._$scheduleDiv).empty();r._renderGanttChart();r._$bodyContainer.append(r._$bodyContent);r._$ganttChartContainer.append(r._$bodyContainer);n(r._$bodyContent).css({width:r.model.scheduleWeeks.length*r._scheduleWeekWidth+"px"})},_initPrivateProperties:function(){var t=this;t._viewportHeight=0;t._prevScrollTop=0;t._scrollTop=0;t._vScrollDir=1;t._$ganttChartContainer=null;t._$headerContainer=null;t._$bodyContainer=null;t._$bodyContent=null;t._$dependencyViewContainer=null;t._$secondaryCanvas=null;t._$ganttViewTable=null;t._$ganttViewTablebody=null;t._weekdays=[];t._rowMargin=0;t._renderedRange=null;t._visibleRange=null;t._vTop=null;t._vBottom=null;t._rTop=null;t._rBottom=null;t._vscrollDist=0;t._containerHeight=0;t._currentViewData=[];t._id=this.element.attr("id");t._ganttChartRows=null;t._projectStartDate=new Date;t._projectEndDate=new Date(null);t._filteredRecords=[];t._sortedRecords=[];t._tempSortedRecords=[];t._scheduleWeekWidth=t._getWeekWidth();t._tempFilteredRecords=[];t._prevLeft=0;t._allowDragging=!1;t._leftResizing=!1;t._rightResizing=!1;t._progressResizing=!1;t._editingContainer=null;t._allowExpandCollapse=!0;t._leftResizer=null;t._taskbarItem=null;t._progressbarItem=null;t._progressResizer=null;t._rightResizer=null;t._tasknameContainer=null;t._mousePosX=0;t._currMousePosX=0;t._currMousePosY=0;t._prevItem={};t._mouseTarget=null;t._mouseDown=!1;t._$scheduleDiv=null;t._leftResizerGripper=null;t._rightResizerGripper=null;t._progressHandle=null;t._progressHandleChild=null;t._mouseOverTooltip=document.getElementById(this.model.tooltipTemplate);t._progressBarTooltipID=document.getElementById(this.model.progressbarTooltipTemplateId);t._taskbarEditingTooltipID=document.getElementById(this.model.taskbarEditingTooltipTemplateId);t._ids=null;t._scrollBarHeight=0;t._windowWidth=n(window).width();t._windowHeight=n(window).height();t._editingItem=null;t._editingTarget=null;t.tooltipState=null;t._visibleRecordsCount=0;t._$gridLinesTablebody=null},_initialize:function(){var n=this;n._$ganttChartContainer=t.buildTag("div.e-ganttviewercontainer#ganttviewercontainer"+n._id,"",{width:"100%"},{});n._$headerContainer=t.buildTag("div.e-ganttviewerheaderContainer#ganttviewerheaderContainer"+n._id,"",{},{});n._$bodyContainer=t.buildTag("div.e-ganttviewerbodyContianer#ganttviewerbodyContianer"+n._id,"",{"-ms-touch-action":"none","touch-action":"none"},{});n._$bodyContent=t.buildTag("div.e-ganttviewerbodyContent#ganttviewerbodyContent"+n._id,"",{},{});n._$dependencyViewContainer=t.buildTag("div.e-ganttviewerbodyContianer-dependencyViewContainer#dependencyViewContainer"+n._id,"",{"z-index":"4",position:"absolute"},{});n._$secondaryCanvas=t.buildTag("div.e-ganttviewerbodyContianer-secondaryCanvas","",{"z-index":"3",position:"absolute"},{});n._$weekendsContainer=t.buildTag("div.e-ganttviewerbodyContianer-weekendsContainer","",{"z-index":"1",position:"absolute"},{});n._$ganttViewTable=t.buildTag("table.e-ganttviewerbodyContianer-ganttViewTable#ganttViewTable"+n._id,"",{"z-index":"5",position:"absolute"},{cellspacing:"0px"});n._$scheduleDiv=t.buildTag("div.e-gantt-schedule-container#gantt-schedule"+n._id+"","",{},{})},_renderGanttChart:function(){var i=this,u=i.model,f,e,o,s,r;if(i._createSchedule(i._getDateType(u.scheduleStartDate),i._getDateType(u.scheduleEndDate)),i._viewportHeight=i._getViewportHeight(),f=u.scheduleWeeks.length,i._$ganttViewTable.css("width",f*i._scheduleWeekWidth+"px"),e=t.buildTag("colgroup","",{},{}),o=n(document.createElement("col")),o.css("width",f*this._scheduleWeekWidth+"px"),e.append(o),i._$ganttViewTable.append(e),i._createTooltipTemplate(),i._createEditingTooltipTemplate(),i._createProgressbarTooltipTemplate(),i._createTaskbarTemplate(),i._createConnectorLineTemplate(),i._updateCurrentViewData(),i.model.highlightWeekends==!0&&i._renderWeekends(),i.model.stripLines!=null&&this._renderStripLines(i.model.stripLines),i.model.holidays!=null)for(s=i.model.holidays.length,r=0;r<s;r++)i._renderHoliday(i.model.holidays[r])},renderConnectorLines:function(t){var i=this,r=n.render[i._id+"ConnectorLineTemplate"](t);n(i._$dependencyViewContainer).empty();i._$dependencyViewContainer.append(r);i._$bodyContent.append(i._$dependencyViewContainer)},clearConnectorLines:function(){n(this._$dependencyViewContainer).empty()},appendConnectorLine:function(t){var i=this,r=n.render[i._id+"ConnectorLineTemplate"](t);i._$dependencyViewContainer.append(r)},removeConnectorline:function(t){n("#ConnectorLine"+t).remove()},_wireEvents:function(){var t=this,i=jQuery.uaMatch(navigator.userAgent);t._on(t.element,"mouseenter",".e-gantt-milestone-container,.e-gantt-childtaskbar,.e-gantt-childtaskbar-progress,.e-gantt-parenttaskbar-innerdiv,.e-gantt-parenttaskbar-progress",this._mouseHover);t._on(t.element,"mouseleave",".e-gantt-milestone-container,.e-gantt-childtaskbar,.e-gantt-childtaskbar-progress,.e-gantt-parenttaskbar-innerdiv,.e-gantt-parenttaskbar-progress",this._mouseLeave);t._on(t.element,"click",t._cellClickHandler);t._on(t.element,"mouseenter",".taskbarresizer-left",t._resizerleftOver);t._on(t.element,"mouseleave",".taskbarresizer-left",t._resizerleftLeave);t._on(t.element,"mouseenter",".taskbarresizer-right",t._resizerrightOver);t._on(t.element,"mouseleave",".taskbarresizer-right",t._resizerrightLeave);t._on(t.element,"mouseenter",".progressbarresizer-right",t._progressresizerOver);t._on(t.element,"mouseleave",".progressbarresizer-right",t._progressresizerLeave);i.browser.toLowerCase()!="msie"?t._on(t.element,"mousedown",".e-tasklabel,.e-parentContainer,.e-childContainer,.e-gantt-milestone-container",t._mousedown):t._on(t.element,"mousedown",".e-tasklabel,.e-parentContainer,.e-childContainer,.e-gantt-milestone-container",t._mousedown);n(t._$bodyContainer).bind("mouseup",n.proxy(t._handleMouseUp,t));n(document).bind("mouseup",n.proxy(t._tooltipMouseup,t));i.browser.toLowerCase()=="msie"&&(t._on(t.element,"MSPointerDown",".e-tasklabel,.e-parentContainer,.e-childContainer,.e-gantt-milestone-container",t._mousedown),n(document.body).bind("MSPointerMove",function(n){n.preventDefault()}),n(document.body).bind("MSPointerMove",n.proxy(t.handleMouseMove,t)),n(t._$bodyContainer).bind("MSPointerUp",n.proxy(t._handleMouseUp,t)));i.browser.toLowerCase()=="chrome"&&(t._on(t.element,"touchstart",".e-tasklabel,.e-parentContainer,.e-childContainer,.e-gantt-milestone-container",t._mousedown),n(document.body).bind("touchmove",function(n){n.preventDefault()}),n(document.body).bind("touchmove",n.proxy(t.handleMouseMove,t)),t._on(t.element,"touchend",".e-tasklabel,.e-parentContainer,.e-childContainer,.e-gantt-milestone-container",t._handleMouseUp),t._on(t.element,"touchleave",".e-tasklabel,.e-parentContainer,.e-childContainer,.e-gantt-milestone-container",t._handleMouseUp),n(t._$bodyContainer).bind("touchend",n.proxy(t._handleMouseUp,t)),n(t._$bodyContainer).bind("touchleave",n.proxy(t._handleMouseUp,t)));t._on(t.element,"mouseenter",".e-stripline",t._stripLineMouseOver);t._on(t.element,"mouseleave",".e-stripline",t._stripLineMouseLeave);t._enableEditingEvents()},_enableEditingEvents:function(){var n=this,t=n.model;t.editSettings.allowEditing&&t.editSettings.editMode==="normal"&&n._on(this.element,"dblclick",".e-ganttviewerbodyContent",n._editdblClickHandler)},_editdblClickHandler:function(){var n=this,i={};n.model.editSettings.editMode==="normal"&&(i.requestType=t.GanttGridTree.actions.BeginEdit,n._trigger("actionBegin",i))},_enableRowHover:function(){var n=this;n.model.enableRowHover?n._on(n.element,"mouseleave mouseenter","#ganttviewerbodyContent,.e-ganttviewerbodyContent tr,.e-ganttviewerbodyContent"+n._id,n._rowHover):n._on(n.element,"mouseleave mouseenter","#ganttviewerbodyContent,.e-ganttviewerbodyContent tr,.e-ganttviewerbodyContent"+n._id)},_stripLineMouseLeave:function(){n(this._mouseOverTooltip).remove()},_stripLineMouseOver:function(i){var s,v;i.target.style.cursor="pointer";var r=this,u=r.model,h=n(i.target),l,c,f,a,e=0,o=0;l=h.hasClass("e-striplinespan")?h[0].parentNode:h[0];c=l.id.match(/(\d+|[A-z]+)/g);(i.type=="mouseenter"||i.type=="mousemove")&&(i||(i=window.event),i.originalEvent.pageX||i.originalEvent.pageY?(e=i.originalEvent.pageX,o=i.originalEvent.pageY):(i.originalEvent.clientX||i.originalEvent.clientY)&&(e=i.originalEvent.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,o=i.originalEvent.clientY+document.body.scrollTop+document.documentElement.scrollTop),f=t.buildTag("table.e-tooltiptable","",{width:"auto"},{cellspacing:"2px",cellpadding:"2px"}),a=t.buildTag("tbody","<tr><td>"+u.stripLines[c[1]].day+"<\/td><\/tr><tr><td>"+u.stripLines[c[1]].label+"<\/td><\/tr>",{},{}),f.append(a),u.tooltipTemplate==null?r._mouseOverTooltip=t.buildTag("div.e-tooltipgantt#tooltipgantt"+r._id+"",f,{top:o+"px",left:e+15+"px",position:"absolute","z-index":"6"},{}):(typeof u.tooltipTemplate!="object"?(s=n.parseHTML(u.tooltipTemplate),r._mouseOverTooltip=s[0]):(v=n(u.tooltipTemplate)[0].innerHTML,s=n.parseHTML(v),r._mouseOverTooltip=s[1]),n(r._mouseOverTooltip).css({left:e+15+"px",top:o+"px",position:"absolute"}),n(r._mouseOverTooltip).addClass("customTooltip"),r._mouseOverTooltip.innerHTML="<table>"+f[0].innerHTML+"<\/table>"),n(document.body).append(r._mouseOverTooltip))},_tooltipMouseup:function(){var n=this;n._mouseTarget!=null&&n._handleMouseUp(n._mouseTarget)},_clearTooltip:function(){var t=this;n(t._mouseOverTooltip).remove();n(t._taskbarEditingTooltipID).remove();n(t._progressBarTooltipID).remove();n(".e-editingtooltip").remove();n(".e-progressbartooltip").remove()},_mouseWheel:function(n){if(this.model.allowZooming){var r=this,i={},t=null;if(n=n.originalEvent,n.preventDefault(),n.wheelDelta?t=-n.wheelDelta/120:n.detail&&(t=n.detail/3),!t)return;i.requestType="scroll";i.delta=t;r._enbleZooming(i)}},_resizerrightOver:function(n){var t=this,i=n.target,r=i.parentNode;t.model.allowGanttChartEditing==!0&&(this._mouseDown==!1&&(n.target.style.cursor="w-resize"),t._setEditingElements(r))},_resizerrightLeave:function(){var n=this;n.model.allowGanttChartEditing==!0&&n._removeEditingElements()},_resizerleftOver:function(n){var t=this,i=n.target,r=i.parentNode;t.model.allowGanttChartEditing==!0&&(this._mouseDown==!1&&(n.target.style.cursor="e-resize"),t._setEditingElements(r))},_resizerleftLeave:function(){var n=this;n.model.allowGanttChartEditing==!0&&n._removeEditingElements()},_progressresizerOver:function(n){var t=this,i=n.target,r=i.parentNode;t.model.allowGanttChartEditing==!0&&(t._mouseDown==!1&&(i.style.cursor="col-resize"),t._setEditingElements(r))},_progressresizerLeave:function(){var n=this;n.model.allowGanttChartEditing==!0&&n._removeEditingElements()},_setEditingElements:function(t){var i=this,r;n(t).hasClass("e-childContainer")&&(i._leftResizerGripper=t.childNodes[0],i._rightResizerGripper=t.childNodes[4],r=t.childNodes[3],i._progressHandle=r.firstChild,i._progressHandleChild=r.childNodes[1]);n(i._leftResizerGripper).addClass("gripper");n(i._rightResizerGripper).addClass("gripper");i.model.progressMapping&&(n(i._progressHandle).addClass("e-progresshandle"),n(i._progressHandleChild).addClass("e-progresshandleafter"))},_removeEditingElements:function(){var t=this;n(t._leftResizerGripper).removeClass("gripper");n(t._rightResizerGripper).removeClass("gripper");t.model.progressMapping&&(n(t._progressHandle).removeClass("e-progresshandle"),n(t._progressHandleChild).removeClass("e-progresshandleafter"))},refreshHeight:function(){var n=this;n._$bodyContainer.ejScroller("refresh")},_mousedown:function(i){var r=this;r._clearTooltip();r._mouseDown=!0;var e=n(i.target),c=r.getGanttChartRows(),h=e.closest("tr"),s=c.index(h),f=r._currentViewData[s],u=e[0].parentNode,o=jQuery.uaMatch(navigator.userAgent);t.isNullOrUndefined(f)||(r._editingItem=f,r._editingTarget=e,(n(u).hasClass("e-gantt-childtaskbar-progress")||n(u).hasClass("progressbarresizer-right"))&&(u=u.parentNode),(n(u).hasClass("e-childContainer")||n(u).hasClass("e-gantt-milestone"))&&(n(h).addClass("e-editmode"),r._mouseTarget=i),r.model.allowGanttChartEditing&&(n(u).hasClass("e-childContainer")||n(u).hasClass("e-gantt-milestone"))&&((i.target.style.cursor=="e-resize"&&(n(u).hasClass("e-childContainer")||n(u).hasClass("e-gantt-milestone"))||i.type=="touchstart"&&i.target.className=="taskbarresizer-left"&&o.browser.toLowerCase()=="chrome")&&(r._updateEditingType(),r._leftResizing=!0),(i.target.style.cursor=="w-resize"&&(n(u).hasClass("e-childContainer")||n(u).hasClass("e-gantt-milestone"))||i.type=="touchstart"&&i.target.className=="taskbarresizer-right"&&o.browser.toLowerCase()=="chrome")&&(r._updateEditingType(),r._rightResizing=!0),(i.target.style.cursor=="col-resize"&&(n(u).hasClass("e-childContainer")||n(u).hasClass("e-gantt-milestone"))||i.type=="touchstart"&&i.target.className=="progressbarresizer-right"&&o.browser.toLowerCase()=="chrome")&&(r._updateEditingType(),r._progressResizing=!0),i.target.style.cursor=="move"&&(n(u).hasClass("e-childContainer")||n(u).hasClass("e-gantt-milestone"))&&(r._updateEditingType(),r._allowDragging=!0),i.target.style.cursor==""&&(n(u).hasClass("e-childContainer")||n(u).hasClass("e-gantt-milestone"))&&(r._updateEditingType(),r._allowDragging=!0),i||(i=window.event),i.originalEvent.pageX||i.originalEvent.pageY?(r._currMousePosX=i.originalEvent.pageX,r._currMousePosY=i.originalEvent.pageY,r.dragPosX=i.originalEvent.pageX):i.originalEvent.clientX||i.originalEvent.clientY?r.dragPosX=i.originalEvent.clientX+document.body.scrollLeft+document.documentElement.scrollLeft:i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches.length>0&&(r._currMousePosX=i.originalEvent.changedTouches[0].pageX,r._currMousePosY=i.originalEvent.changedTouches[0].pageY,r.dragPosX=i.originalEvent.changedTouches[0].pageX),r._prevItem.left=f.left,r._prevItem.status=f.status,r._prevItem.duration=f.duration,r._prevItem.startDate=f.startDate,r._prevItem.endDate=f.endDate,r._prevItem.width=f.width,n(r._$bodyContainer).bind("mousemove",n.proxy(r.handleMouseMove,r)),o.browser.toLowerCase()=="chrome"&&(r._on(r.element,"touchend",".e-tasklabel,.e-parentContainer,.e-childContainer,.e-gantt-milestone-container",r._handleMouseUp),r._on(r.element,"touchleave",".e-tasklabel,.e-parentContainer,.e-childContainer,.e-gantt-milestone-container",r._handleMouseUp),n(r._$bodyContainer).bind("touchend",n.proxy(r._handleMouseUp,r)),n(r._$bodyContainer).bind("touchleave",n.proxy(r._handleMouseUp,r)),n(document.body).bind("touchend",n.proxy(r._handleMouseUp,r)),n(document.body).bind("touchleave",n.proxy(r._handleMouseUp,r)))),n(u).hasClass("e-parentContainer")&&r._allowExpandCollapse&&f&&f.hasChildRecords&&r._expandCollapse(s),r._appendTooltip(e,s))},handleMouseMove:function(n){this._updateOnmouseMove(n)},_handleMouseUp:function(){var t=this,r={},o=t.getGanttChartRows(),f,u,e=0,i;t._editingTarget!=null&&t._editingItem!=null&&(f=t._editingTarget,u=f.closest("tr"),e=o.index(u),i=t._editingItem,n(u).hasClass("e-editmode")&&(n(u).removeClass("e-editmode"),t._mouseTarget=null));t._editingTarget=null;t._editingItem=null;t._clearTooltip();t._$ganttChartContainer[0].style.cursor="auto";t._allowExpandCollapse=!0;i!=null&&t.updateConnectorLineOffset(i);i!=null&&(t._allowDragging||t._leftResizing||t._rightResizing||t._progressResizing)&&(r.editingFields={startdate:i.startDate,enddate:i.endDate,progress:i.status,duration:i.duration},r.data=i,r.previousData=t._prevItem,r.dragging=t._allowDragging,r.leftResizing=t._leftResizing,r.rightResizing=t._rightResizing,r.progressResizing=t._progressResizing,t._taskbarEdited(r));r.cancel&&t._getPrevItem(i,e);n("#ganttviewerbodyContianer"+t._id).unbind("mousemove");t._updateEditingType();t._mouseDown=!1},_keyPressed:function(n,t,i,r){var u=this,c=u.element,l=c.ejGanttChart("instance"),f=l.model,h,s,e,o;if(r.stopImmediatePropagation(),r.preventDefault(),!f.allowKeyboardNavigation)return!0;switch(n){case"downArrow":u._rowSelectingEventTrigger()||(h=u.model.updatedGanttRecords.length-1,u.model.selectedRowIndex!=h&&(u.selectRows(u.model.selectedRowIndex+1),f.selectedItem.isSelected=!0,s=f.selectedItem&&u.model.updatedGanttRecords.indexOf(f.selectedItem),e=h!==-1&&s*f.rowHeight,e+u.model.rowHeight>=u._viewportHeight&&(o=e+u.model.rowHeight-(u._viewportHeight-u._scrollBarHeight),u._$bodyContainer.ejScroller("isVScroll")&&(o+=18),args={requestType:"scroll",delta:o},u._$bodyContainer.ejScroller("scrollY",o,!0),f.enableVirtualization&&u.element[0].focus()),u._rowSelectedEventTrigger(u.model.selectedRowIndex)));break;case"upArrow":u._rowSelectingEventTrigger()||(u.model.selectedRowIndex!==0&&(u.selectRows(u.model.selectedRowIndex-1),f.selectedItem.isSelected=!0),s=u.model.updatedGanttRecords.indexOf(f.selectedItem),e=s!==-1&&s*f.rowHeight,o=u._$bodyContainer.children(".e-content").scrollTop(),o>e&&(args={requestType:"scroll",delta:e},u._$bodyContainer.ejScroller("scrollY",e,!0),f.enableVirtualization&&u.element[0].focus()),u._rowSelectedEventTrigger(u.model.selectedRowIndex));break;case"firstRowSelection":u._rowSelectingEventTrigger()||(u.selectRows(0),s=f.updatedGanttRecords.indexOf(f.selectedItem),e=s!==-1&&s*f.rowHeight,o=u._$bodyContainer.scrollTop(),o>e&&(args={requestType:"scroll",delta:e},u._completeAction(args),u._$bodyContainer.children(".e-content").scrollTop(e),f.enableVirtualization&&u.element[0].focus()),u._rowSelectedEventTrigger(0));break;case"lastRowSelection":u._rowSelectedEventTrigger()||(h=f.updatedGanttRecords.length-1,u.selectRows(h),s=f.selectedItem&&f.updatedGanttRecords.indexOf(f.selectedItem),e=h!==-1&&s*f.rowHeight,e+u.model.rowHeight>=u._viewportHeight&&(o=e+u.model.rowHeight-(u._viewportHeight-u._scrollBarHeight),args={requestType:"scroll",delta:o},u._completeAction(args),u._$bodyContainer.children(".e-content").scrollTop(o),f.enableVirtualization&&u.element[0].focus()),u._rowSelectedEventTrigger(h))}return!0},_rowSelectingEventTrigger:function(){var t=this,n=t.model,r={},i,u;return n.selectedRowIndex!==-1&&(u=t.getGanttChartRows(),i=t.model.updatedGanttRecords[n.selectedRowIndex],n.selectedItem=i,r={rowElement:u.eq(n.selectedRowIndex),data:i,recordIndex:n.selectedRowIndex}),t._trigger("rowSelecting",r)},_rowSelectedEventTrigger:function(n){var t=this,i,r=t.getGanttChartRows();i={rowElement:r.eq(n),data:t.model.selectedItem,target:"ejGanttChart",recordIndex:n};t._trigger("rowSelected",i)},_updateEditingType:function(){var n=this;n._leftResizing=!1;n._allowDragging=!1;n._rightResizing=!1;n._progressResizing=!1},updateConnectorLineOffset:function(n){var u,o=this.model,r=n.predecessor,s=[],h,c,e,f,t,i;if(r){for(i=0;i<r.length;i++)r[i].to===n.taskId.toString()&&(u=o.rows[o._ids.indexOf(r[i].from)],f=o.rows[o._ids.indexOf(r[i].to)],h=new Date(u.startDate),c=new Date(u.endDate),r[i].predecessorsType=="FS"&&(c.getDay()>=5&&(e=2),f.left<u.left+u.width?(t=(u.left+u.width-f.left)/this.model.perDayWidth,t=f.isMilestone==!0?t-1:t,r[i].offset=Math.floor(-t)):(t=(f.left-(u.left+u.width))/this.model.perDayWidth,e&&this.model.includeWeekend==!1&&(t=t-e),t>=0&&(r[i].offset=Math.floor(t)))),r[i].predecessorsType=="SS"&&(f.left<u.left?(t=(u.left-f.left)/this.model.perDayWidth,r[i].offset=Math.floor(-t)):f.left>u.left&&(t=(f.left-u.left)/this.model.perDayWidth,r[i].offset=Math.floor(t))),r[i].predecessorsType=="SF"&&(h.getDay()==5&&(e=2*this.model.perDayWidth),f.left+f.width<u.left?(t=(u.left-(f.left+f.width))/this.model.perDayWidth,e&&this.model.includeWeekend==!1&&(t=t-e),t>0&&(r[i].offset=Math.floor(-t))):f.left+f.width>u.left&&(t=(f.left+f.width-u.left)/this.model.perDayWidth,e&&this.model.includeWeekend==!1&&(t=t-e),t>0&&(r[i].offset=Math.floor(t)))),r[i].predecessorsType=="FF"&&(f.left+f.width<u.left+u.width?(t=(u.left+u.width-(f.left+f.width))/this.model.perDayWidth,r[i].offset=Math.floor(-t)):f.left+f.width>u.left+u.width&&(t=(f.left+f.width-(u.left+u.width))/this.model.perDayWidth,r[i].offset=Math.floor(t))),r[i].offset<0?s.push(r[i].from+""+r[i].predecessorsType+""+r[i].offset+"d"):r[i].offset>=1?s.push(r[i].from+""+r[i].predecessorsType+"+"+r[i].offset+"d"):s.push(r[i].from));s.length>0&&(n.item[o.predecessorMapping]=s.join(","))}},_getPrevItem:function(n,t){var i=this;n.left=i._prevItem.left;n.width=i._prevItem.width;n.startDate=i._prevItem.startDate;n.endDate=i._prevItem.endDate;n.duration=i._prevItem.duration;n.status=i._prevItem.status;n.progressWidth=this._getProgressWidth(n.width,n.status);this.refreshRow(t)},_enableLeftResizing:function(t,i){var r=this;t.target.style.cursor="e-resize";n(r._leftResizer).addClass("gripper");n(r._rightResizer).addClass("gripper");r.dragPosX>r._mousePosX?(r._mousePosX=r.dragPosX-r._mousePosX,i.left>0&&(i.left+30<i.left+i.width&&(i.left-=r._mousePosX),i.width+=r._mousePosX)):(r._mousePosX-=r.dragPosX,i.left+30<i.left+i.width&&(i.left+=r._mousePosX),i.width-=r._mousePosX);this.dragPosX=t.originalEvent.pageX==0?t.originalEvent.targetTouches[0].pageX:t.originalEvent.pageX;i.width=i.width<r.model.perDayWidth?r.model.perDayWidth:i.width;i.progressWidth=r._getProgressWidth(i.width,i.status);r._setItemPosition(i);r._taskbarItem&&r._taskbarItem.childNodes.length>0&&r._taskbarItem.removeChild(r._taskbarItem.lastChild)},_enableProgressResizing:function(t,i){var r=this,u,f;t.target.style.cursor="col-resize";n(r._leftResizer).addClass("gripper");n(r._rightResizer).addClass("gripper");r._progressResizer&&(r._progressHandle=r._progressResizer.firstChild,r._progressHandleChild=r._progressResizer.childNodes[1]);r.dragPosX>r._mousePosX?(r._mousePosX=r.dragPosX-r._mousePosX,i.left>0&&(i.progressWidth-=r._mousePosX)):(r._mousePosX-=r.dragPosX,i.progressWidth+=r._mousePosX);this.dragPosX=t.originalEvent.pageX==0?t.originalEvent.targetTouches[0].pageX:t.originalEvent.pageX;i.progressWidth=i.progressWidth>i.width?i.width:i.progressWidth;i.progressWidth=i.progressWidth<0?0:i.progressWidth;u=i.width-i.progressWidth;f=u<=4?4-u:0;n(r._progressbarItem).css({width:i.progressWidth+"px",left:i.left+"px","border-top-right-radius":f+"px","border-bottom-right-radius":f+"px"});n(r._progressResizer).css({left:i.left+i.progressWidth-10+"px"});n(r._progressHandle).addClass("e-progresshandle");n(r._progressHandleChild).addClass("e-progresshandleafter")},_enableRightResizing:function(t,i){var r=this;t.target.style.cursor="w-resize";n(r._leftResizer).addClass("gripper");n(r._rightResizer).addClass("gripper");r.dragPosX>r._mousePosX?(r._mousePosX=r.dragPosX-r._mousePosX,i.left>0&&(i.width-=r._mousePosX)):(r._mousePosX-=r.dragPosX,i.width+=r._mousePosX);this.dragPosX=t.originalEvent.pageX==0?t.originalEvent.targetTouches[0].pageX:t.originalEvent.pageX;i.width=i.width<r.model.perDayWidth?r.model.perDayWidth:i.width;i.progressWidth=r._getProgressWidth(i.width,i.status);n(r._taskbarItem).css({left:i.left+"px",width:i.width+"px"});n(r._progressbarItem).css({width:i.progressWidth+"px",left:i.left+"px"});n(r._rightResizer).css({left:i.left+i.width-12+"px"});n(r._progressResizer).css({left:i.left+i.progressWidth-10+"px"});n(r._tasknameContainer).css({left:i.left+"px",width:i.width+"px"});r._taskbarItem&&r._taskbarItem.childNodes.length>0&&r._taskbarItem.removeChild(r._taskbarItem.lastChild)},_enableDragging:function(t,i){var r=this;t.target.style.cursor="move";n(t.target.parentNode).hasClass("e-parentContainer")&&(r._allowExpandCollapse=!1);this.dragPosX>r._mousePosX?(r._mousePosX=r.dragPosX-r._mousePosX,i.left>0&&(i.left-=r._mousePosX)):(r._mousePosX-=r.dragPosX,i.left+=r._mousePosX);this.dragPosX=t.originalEvent.pageX==0?t.originalEvent.targetTouches[0].pageX:t.originalEvent.pageX;i.left=i.left<0?0:i.left;n(r._progressbarItem).css({left:i.left+"px"});n(r._taskbarItem).css({left:i.left+"px"});n(r._rightResizer).css({left:i.left+i.width-12+"px"});n(r._leftResizer).css({left:i.left+2+"px"});n(r._progressResizer).css({left:i.left+i.progressWidth-10+"px"});n(r._tasknameContainer).css({left:i.left+"px",width:i.width+"px"});r._taskbarItem&&r._taskbarItem.childNodes.length>0&&r._taskbarItem.removeChild(r._taskbarItem.lastChild)},_appendTooltip:function(i,r){var u=this,s,o,c=n(i),e=u._currentViewData[r],l=u.model.columnHeaderTexts,h,f;e!=null&&(u._currMousePosX+150>u._windowWidth&&(u._currMousePosX-=u._currMousePosX+150-u._windowWidth),h=c[0],(n(h).hasClass("e-parentContainer")||n(h).hasClass("e-childContainer"))&&(u._editingContainer=h,u._leftResizer=u._editingContainer.childNodes[0],u._taskbarItem=u._editingContainer.childNodes[1],u._progressbarItem=u._editingContainer.childNodes[2],u._progressResizer=u._editingContainer.childNodes[3],u._rightResizer=u._editingContainer.childNodes[4]),this.model.enableTaskbarDragTooltip&&!c.hasClass("e-parentContainer")&&(this._progressResizing==!0?(u._$ganttChartContainer[0].style.cursor="col-resize",o=t.buildTag("table.e-tooltiptable","",{},{cellspacing:"2px",cellpadding:"2px"}),f=t.buildTag("tbody","",{},{}),f[0].innerHTML="<tr><td>"+l.status+" : "+e.status+"%<\/td><\/tr>",o.append(f),u.model.progressbarTooltipTemplate?(u._progressBarTooltipID=t.buildTag("div.e-progressbartooltip#progressbartooltip"+u._id+"","",{top:u._currMousePosY-95+"px",left:u._currMousePosX+"px",position:"absolute","z-index":"6"},{}),f=t.buildTag("tbody",n.render[u._id+"progressbarTooltipTemplate"](e),{},{}),u._progressBarTooltipID[0].innerHTML="<table>"+f[0].innerHTML+"<\/table>"):u.model.progressbarTooltipTemplateId?(u._progressBarTooltipID=t.buildTag("div.e-progressbartooltip#progressbartooltip"+u._id+"","",{top:u._currMousePosY-95+"px",left:u._currMousePosX+"px",position:"absolute","z-index":"6"},{}),f=t.buildTag("tbody",n.render[u._id+"progressbarTooltipTemplate"](e),{},{}),u._progressBarTooltipID[0].innerHTML="<table>"+f[0].innerHTML+"<\/table>"):u._progressBarTooltipID=t.buildTag("div.e-progressbartooltip#progressbartooltip"+u._id+"",o,{top:u._currMousePosY-65+"px",left:u._currMousePosX+"px",position:"absolute","z-index":"6"},{onselectstart:"return false"}),u._progressBarTooltipID&&n(document.body).append(u._progressBarTooltipID)):(u._leftResizing==!0?(u._$ganttChartContainer[0].style.cursor="e-resize",s={ttipstartDate:e.startDate,ttipduration:e.duration}):u._rightResizing==!0?(u._$ganttChartContainer[0].style.cursor="w-resize",s={ttipendDate:e.endDate,ttipduration:e.duration}):u._allowDragging==!0&&(u._$ganttChartContainer[0].style.cursor="move",s={ttipstartDate:e.startDate,ttipendDate:e.endDate}),o=t.buildTag("table.e-tooltiptable","",{},{cellspacing:"2px",cellpadding:"2px"}),u.model.taskbarEditingTooltipTemplate?(u._taskbarEditingTooltipID=t.buildTag("div.e-editingtooltip#editingtooltip"+u._id+"","",{top:u._currMousePosY-95+"px",left:u._currMousePosX+"px",position:"absolute","z-index":"6"},{}),u.tooltipState="editingTemplateID",f=t.buildTag("tbody",n.render[u._id+"editingTooltipTemplate"](e),{},{}),u._taskbarEditingTooltipID[0].innerHTML="<table>"+f[0].innerHTML+"<\/table>"):u.model.taskbarEditingTooltipTemplateId?(u._taskbarEditingTooltipID=t.buildTag("div.e-editingtooltip#editingtooltip"+u._id+"","",{top:u._currMousePosY-95+"px",left:u._currMousePosX+"px",position:"absolute","z-index":"6"},{}),u.tooltipState="editingTemplate",f=t.buildTag("tbody",n.render[u._id+"editingTooltipTemplate"](e),{},{}),u._taskbarEditingTooltipID[0].innerHTML="<table>"+f[0].innerHTML+"<\/table>"):(u.tooltipState="",s&&(f=t.buildTag("tbody",n.render[u._id+"editingTooltipTemplate"](s),{},{}),o.append(f)),u._taskbarEditingTooltipID=t.buildTag("div.e-editingtooltip#editingtooltip"+u._id+"",o,{top:u._currMousePosY-95+"px",left:u._currMousePosX+"px",position:"absolute","z-index":"6"},{})),u._taskbarEditingTooltipID&&n(document.body).append(u._taskbarEditingTooltipID))))},_setItemPosition:function(t){var i=this;n(i._leftResizer).css({left:t.left+2+"px"});n(i._rightResizer).css({left:t.left+t.width-12+"px"});n(i._taskbarItem).css({left:t.left+"px",width:t.width+"px"});n(i._progressbarItem).css({left:t.left+"px",width:t.progressWidth+"px"});n(i._progressResizer).css({left:t.left+t.progressWidth-10+"px"});n(i._tasknameContainer).css({left:t.left+"px",width:t.width+"px"})},_getTemplate:function(t){var i,r;return typeof t!="object"?(i=n.parseHTML(this.model.tooltipTemplate),i[0]):(r=n(t)[0].innerHTML,i=n.parseHTML(r),i[1])},_updateOnmouseMove:function(t){var i=this,e={},o,f=i._editingTarget?i._editingTarget:null,h=i.getGanttChartRows(),s=f?f.closest("tr"):null,c=h.index(s),r=i._editingItem,u=f?f[0].parentNode:null;(n(u).hasClass("progressbarresizer-right")||n(u).hasClass("e-gantt-childtaskbar-progress"))&&(u=u.parentNode);r!=null&&(e.editingFields={startdate:r.startDate,enddate:r.endDate,progress:r.status,duration:r.duration},e.rowData={rowData:r},i._taskbarEditing(e),e.cancel||(t||(t=window.event),t.originalEvent.pageX||t.originalEvent.pageY?(i._mousePosX=t.originalEvent.pageX,o=t.originalEvent.pageY):t.originalEvent.clientX||t.originalEvent.clientY?(i._mousePosX=t.originalEvent.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,o=t.originalEvent.clientY+document.body.scrollTop+document.documentElement.scrollTop):(t.originalEvent.touches[0].pageX||t.originalEvent.touches[0].pageY)&&(i._mousePosX=t.originalEvent.targetTouches[0].pageX,o=t.originalEvent.targetTouches[0].pageY),f.hasClass("e-gantt-milestone")?n(s).hasClass("e-editmode")&&this._editMilestone(t):(n(u).hasClass("e-childContainer")&&(i._editingContainer=u,i._leftResizer=i._editingContainer.childNodes[0],i._taskbarItem=i._editingContainer.childNodes[1],i._progressbarItem=i._editingContainer.childNodes[2],i._progressResizer=i._editingContainer.childNodes[3],i._rightResizer=i._editingContainer.childNodes[4],i._tasknameContainer=i._editingContainer.childNodes[5]),n(s).hasClass("e-editmode")&&!n(u).hasClass("e-parentContainer")&&(i._leftResizing==!0?(i._enableLeftResizing(t,r),i._updateEditedItem(r,"leftResizing")):i._progressResizing==!0&&i.model.enableProgressBarResizing&&i.model.progressMapping?(i._enableProgressResizing(t,r),i._updateEditedItem(r,"progressResizing")):i._rightResizing==!0?(i._enableRightResizing(t,r),i._updateEditedItem(r,"rightResizing")):i._allowDragging==!0&&(i._enableDragging(t,r),i._updateEditedItem(r,"dragging")))),i._clearTooltip(),i._appendTooltip(f,c)))},_editMilestone:function(t){var i=this,u=i._editingTarget,f=u[0].parentNode,e=i.getGanttChartRows(),o=u.closest("tr"),s=e.index(o),r=i._editingItem;r!=null&&(t||(t=window.event),t.originalEvent.pageX||t.originalEvent.pageY?i._mousePosX=t.originalEvent.pageX:t.originalEvent.clientX||t.originalEvent.clientY?i._mousePosX=t.originalEvent.clientX+document.body.scrollLeft+document.documentElement.scrollLeft:(t.originalEvent.touches[0].pageX||t.originalEvent.touches[0].pageY)&&(i._mousePosX=t.originalEvent.targetTouches[0].pageX,posy=t.originalEvent.targetTouches[0].pageY),t.target.style.cursor="move",i.dragPosX>i._mousePosX?(i._mousePosX=i.dragPosX-i._mousePosX,r.left>0&&(r.left-=i._mousePosX)):(i._mousePosX-=i.dragPosX,r.left+=i._mousePosX),this.dragPosX=t.originalEvent.pageX==0?t.originalEvent.targetTouches[0].pageX:t.originalEvent.pageX,r.left=r.left<0?0:r.left,n(f).css({left:r.left+"px"}),i._updateEditedItem(r,"dragging"),i._appendTooltip(u,s))},_updateEditedItem:function(n,i){var l=this,r=l.model,f=n._getFormatedDate(r.scheduleWeeks[0],r.dateFormat),f=n._getDateFromFormat(f,r.dateFormat),e,s,o,a,c,u,h,v,y;switch(i){case"dragging":e=n.left%r.perDayWidth;s=(n.left-e)/r.perDayWidth;o=0;e>0&&(o=e>=r.perDayWidth/2?1:0);f.setDate(f.getDate()+s+o);n.startDate=n._calculateFormatedDate(f,r.dateFormat);n._calculateEndDate(r.includeWeekend,r.holidays,r.dateFormat);break;case"leftResizing":e=n.left%r.perDayWidth;s=(n.left-e)/r.perDayWidth;o=0;e>0&&(o=e>=r.perDayWidth/2?1:0);f.setDate(f.getDate()+s+o);n.startDate=n._calculateFormatedDate(f,r.dateFormat);n._calculateDuration(f,new Date(n.endDate),r.includeWeekend,r.holidays,!1);Globalize.parseDate(n.startDate,this.model.dateFormat).getTime()==Globalize.parseDate(n.endDate,this.model.dateFormat).getTime()&&t.isNullOrUndefined(n.isMilestone)&&n.isMilestone==!1&&n.duration==0&&(n.duration=1);break;case"rightResizing":if(s=n.width/r.perDayWidth,a=n.width%r.perDayWidth,o=a>=r.perDayWidth/2?1:0,c=new Date(n.startDate),u=n._dateUpdate(c,s-1+o),n.endDate=n._calculateFormatedDate(u,r.dateFormat),r.holidays&&r.holidays.length)for(h=0,v=r.holidays.length,h=0;h<v;h++)y=new Date(r.holidays[h]),u===y&&u.setDate(u.getDate()-1);this.model.includeWeekend==!1&&(u.getDay()==0?u.setDate(u.getDate()-2):u.getDay()==6&&u.setDate(u.getDate()-1));n._calculateDuration(c,u,r.includeWeekend,r.holidays,!1);break;case"progressResizing":n.status=l._getProgressPercent(n.width,n.progressWidth)}},_mouseOverTooltip:function(){n(proxy._mouseOverTooltip).remove();this._mouseDown==!1&&(n(proxy._leftResizerGripper).removeClass("gripper"),n(proxy._rightResizerGripper).removeClass("gripper"),proxy.model.progressMapping&&(n(proxy._progressHandle).removeClass("e-progresshandle"),n(proxy._progressHandleChild).removeClass("e-progresshandleafter")))},_mouseLeave:function(){var t=this;n(".e-tooltipgantt").remove();n(".progressbarresizer-right").css({"background-image":"none"});n(t._mouseOverTooltip).remove();this._mouseDown==!1&&(n(t._leftResizerGripper).removeClass("gripper"),n(t._rightResizerGripper).removeClass("gripper"),t.model.progressMapping&&(n(t._progressHandle).removeClass("e-progresshandle"),n(t._progressHandleChild).removeClass("e-progresshandleafter")))},_mouseHover:function(i){var s=n(i.target),r=this,u=0,f=0,v=r.getGanttChartRows(),y=s.closest("tr"),h=s[0].parentNode,l,p=v.index(y),e=r._currentViewData[p],a,c,o;r._rightResizing==!1&&r._leftResizing==!1&&r._progressResizing==!1&&r._mouseDown==!1&&(s.hasClass("e-gantt-parenttaskbar-innerdiv")||s.hasClass("e-gantt-parenttaskbar-progress")||r.model.allowGanttChartEditing&&(i.target.style.cursor="move"),(i.type=="mouseenter"||i.type=="mousemove")&&(i||(i=window.event),i.originalEvent.pageX||i.originalEvent.pageY?(u=i.originalEvent.pageX,f=i.originalEvent.pageY):(i.originalEvent.clientX||i.originalEvent.clientY)&&(u=i.originalEvent.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,f=i.originalEvent.clientY+document.body.scrollTop+document.documentElement.scrollTop),u+200>r._windowWidth&&(u-=u+200-r._windowWidth),f+150>r._windowHeight&&(f-=f+150-r._windowHeight),n(h).hasClass("e-childContainer")&&r.model.allowGanttChartEditing&&(r._leftResizerGripper=h.childNodes[0],r._rightResizerGripper=h.childNodes[4],l=h.childNodes[3],r._progressHandle=l.firstChild,r._progressHandleChild=l.childNodes[1],n(r._leftResizerGripper).addClass("gripper"),n(r._rightResizerGripper).addClass("gripper"),r.model.progressMapping&&(n(r._progressHandle).addClass("e-progresshandle"),n(r._progressHandleChild).addClass("e-progresshandleafter"))),e&&r.model.enableTaskbarTooltip&&(a={ttipstartDate:e.startDate,ttipendDate:e.endDate,ttipduration:e.duration,ttipprogress:e.status,ttiptaskname:e.taskName},c=t.buildTag("table.e-tooltiptable","",{},{cellspacing:"5"}),r.model.tooltipTemplate==null&&r.model.tooltipTemplateId==null?(r.tooltipState="",o=t.buildTag("tbody",n.render[r._id+"tooltipTemplate"](a),{},{}),c.append(o),r._mouseOverTooltip=t.buildTag("div.e-tooltipgantt#tooltipgantt"+r._id+"",c,{top:f+10+"px",left:u+15+"px",position:"absolute","z-index":"6","border-radius":"5px"},{}),r._mouseOverTooltip.innerHTML="<table>"+c[0].innerHTML+"<\/table>",n(document.body).append(r._mouseOverTooltip)):r.model.tooltipTemplate?(r._mouseOverTooltip=t.buildTag("div.e-tooltipgantt#tooltipgantt"+r._id+"","",{top:f+10+"px",left:u+15+"px",position:"absolute","z-index":"6","border-radius":"5px"},{}),n(document.body).append(r._mouseOverTooltip),r.tooltipState="Template",o=t.buildTag("tbody",n.render[r._id+"tooltipTemplate"](e),{},{}),r._mouseOverTooltip[0].innerHTML="<table>"+o[0].innerHTML+"<\/table>"):r.model.tooltipTemplateId&&(r._mouseOverTooltip=t.buildTag("div.e-tooltipgantt#tooltipgantt"+r._id+"","",{top:f+10+"px",left:u+15+"px",position:"absolute","z-index":"6","border-radius":"5px"},{}),n(document.body).append(r._mouseOverTooltip),r.tooltipState="TemplateID",o=t.buildTag("tbody",n.render[r._id+"tooltipTemplate"](e),{},{}),r._mouseOverTooltip[0].innerHTML="<table>"+o[0].innerHTML+"<\/table>"),n(r._mouseOverTooltip).css({left:u+15+"px",top:f+"px",position:"absolute"}),n(r._mouseOverTooltip).addClass("customTooltip"))))},_createEditingTooltipTemplate:function(){var t=this,f,r=t.model.columnHeaderTexts,s={_getStartDate:t._tooltipStartDate,_getEndDate:t._tooltipEndDate,_getDuration:t._tooltipDuration,_getTaskName:t._tooltipTaskName,_getProgress:t._tooltipProgress},e=t.model.taskbarEditingTooltipTemplateId,o=t.model.taskbarEditingTooltipTemplate,i,u;n.views.helpers(s);e?i=n("#"+e)[0].innerHTML:o?i=o:(i="<tr class='e-tooltip_rowcell'>",f="{{if ~_getTaskName()}}<td class='e-tooltiptaskname' style='width:40px;text-align:left;' colspan='3';>{{:ttiptaskname}}<\/td>{{/if}}<\/tr><tr>{{if ~_getStartDate()}}<td class='e-tooltiptd-alignleft' style='width:30px;white-space:nowrap;'>"+r.startDate+"<\/td><td class='e-tooltiptd-aligncenter' style='width:10px;font-weight:bold;'>:<\/td><td class='e-tooltiptd-alignright' style='width:30px;white-space:nowrap;'>{{:ttipstartDate}}<\/td> {{/if}}<\/tr><tr>{{if ~_getEndDate()}}<td class='e-tooltiptd-alignleft' style='width:30px;white-space:nowrap;'>"+r.endDate+"<\/td><td class='e-tooltiptd-aligncenter' style='width:10px;font-weight:bold;'>:<\/td><td class='e-tooltiptd-alignright' style='width:30px;white-space:nowrap;'>{{:ttipendDate}}<\/td>{{/if}}<\/tr><tr>{{if ~_getDuration()}}<td class='e-tooltiptd-alignleft' style='width:30px;white-space:nowrap;'>"+r.duration+"<\/td><td class='e-tooltiptd-aligncenter' style='width:10px;font-weight:bold;'>:<\/td><td class='e-tooltiptd-alignright' style='width:30px;white-space:nowrap;'>{{:ttipduration}} days<\/td>{{/if}}<\/tr><tr>{{if ~_getProgress()}}<td class='e-tooltiptd-alignleft' style='width:30px;white-space:nowrap;'>"+r.status+"<\/td><td class='e-tooltiptd-aligncenter' style='width:10px;font-weight:bold;'>:<\/td><td class='e-tooltiptd-alignright' style='width:30px;white-space:nowrap;'>{{:ttipprogress}}%<\/td>{{/if}}",i+=f,i+="<\/tr>");u={};u[t._id+"editingTooltipTemplate"]=i;n.templates(u)},_createProgressbarTooltipTemplate:function(){var t=this,u=t.model.progressbarTooltipTemplateId,f=t.model.progressbarTooltipTemplate,i,r;u?i=n("#"+t.model.progressbarTooltipTemplateId)[0].innerHTML:t.model.progressbarTooltipTemplate&&(i=t.model.progressbarTooltipTemplate);r={};r[t._id+"progressbarTooltipTemplate"]=i;n.templates(r)},_createTooltipTemplate:function(){var t=this,f,r=t.model.columnHeaderTexts,e={_getStartDate:t._tooltipStartDate,_getEndDate:t._tooltipEndDate,_getDuration:t._tooltipDuration,_getTaskName:t._tooltipTaskName,_getProgress:t._tooltipProgress},o=t.model.tooltipTemplateId,s=t.model.tooltipTemplate,i,u;n.views.helpers(e);o?i=n("#"+t.model.tooltipTemplateId)[0].innerHTML:t.model.tooltipTemplate?i=t.model.tooltipTemplate:(i="<tr class='e-tooltip_rowcell'>",f="{{if ~_getTaskName()}}<td class='e-tooltiptaskname' style='width:40px;text-align:left;' colspan='3';>{{:ttiptaskname}}<\/td>{{/if}}<\/tr><tr>{{if ~_getStartDate()}}<td class='e-tooltiptd-alignleft' style='width:30px;white-space:nowrap;'>"+r.startDate+"<\/td><td class='e-tooltiptd-aligncenter' style='width:10px;font-weight:bold;'>:<\/td><td class='e-tooltiptd-alignright' style='width:30px;white-space:nowrap;'>{{:ttipstartDate}}<\/td> {{/if}}<\/tr><tr>{{if ~_getEndDate()}}<td class='e-tooltiptd-alignleft' style='width:30px;white-space:nowrap;'>"+r.endDate+"<\/td><td class='e-tooltiptd-aligncenter' style='width:10px;font-weight:bold;'>:<\/td><td class='e-tooltiptd-alignright' style='width:30px;white-space:nowrap;'>{{:ttipendDate}}<\/td>{{/if}}<\/tr><tr>{{if ~_getDuration()}}<td class='e-tooltiptd-alignleft' style='width:30px;white-space:nowrap;'>"+r.duration+"<\/td><td class='e-tooltiptd-aligncenter' style='width:10px;font-weight:bold;'>:<\/td><td class='e-tooltiptd-alignright' style='width:30px;white-space:nowrap;'>{{:ttipduration}} days<\/td>{{/if}}<\/tr><tr>{{if ~_getProgress()}}<td class='e-tooltiptd-alignleft' style='width:30px;white-space:nowrap;'>"+r.status+"<\/td><td class='e-tooltiptd-aligncenter' style='width:10px;font-weight:bold;'>:<\/td><td class='e-tooltiptd-alignright' style='width:30px;white-space:nowrap;'>{{:ttipprogress}}%<\/td>{{/if}}",i+=f,i+="<\/tr>");u={};u[t._id+"tooltipTemplate"]=i;n.templates(u)},_tooltipTaskName:function(){return this.data.ttiptaskname},_tooltipProgress:function(){return this.data.ttipprogress},_tooltipStartDate:function(){return this.data.ttipstartDate},_tooltipEndDate:function(){return this.data.ttipendDate},_tooltipDuration:function(){return this.data.ttipduration},_cellClickHandler:function(t){var e=n(t.target),o=e.closest("tr"),i=this,r={},u,f,s=i.getGanttChartRows();(i.model.selectedRowIndex!==-1&&(u=i.model.updatedGanttRecords&&i.model.updatedGanttRecords[i.model.selectedRowIndex],r={rowElement:o,recordIndex:i.model.selectedRowIndex}),i._trigger("rowSelecting",r))||(f=s.index(e.parent()),f==-1&&(f=s.index(o)),f!==-1&&(u=i._currentViewData[f],i.model.selectedRowIndex=i.model.updatedGanttRecords.indexOf(u),i.selectRows(i.model.selectedRowIndex),r.target="ejGanttChart",r.data=u,r.recordIndex=i.model.selectedRowIndex,i._trigger("rowSelected",r),i.prevSelectedItem!=null&&(i.prevSelectedItem.isSelected=!1,i.model.updatedGanttRecords[i.model.selectedRowIndex].isSelected=!0),i.prevSelectedItem=u,i.element[0].focus()))},getRowByIndex:function(i,r){var e,o;try{var u=this,f=u.getGanttChartRows(),s=n(f),h=n();return u.model.enableVirtualization&&(e=u.model.updatedGanttRecords[i],i=u._currentViewData.indexOf(e)),t.isNullOrUndefined(r)?(u.model.enableVirtualization&&(o=u.model.updatedGanttRecords[r],r=u._currentViewData.indexOf(o)),n(f[i])):n(s.slice(i,r))}catch(c){return n()}},selectRows:function(n){var t=this,u=t.getGanttChartRows(),i,r;t.model.selectedItem&&(t.model.selectedItem.isSelected=!1);u.removeClass("e-gantt-mouseclick");r=t.getRowByIndex(n);r.addClass("e-gantt-mouseclick");t.model.selectedRowIndex=n;i=t.model.updatedGanttRecords[n];t.model.selectedItem=i},updateSelectedItem:function(t){var i=this,r=n(i.getGanttChartRows());r.removeClass("e-gantt-mouseclick");i.model.ganttRecords[t].isSelected=!0;i.model.selectedItem=i.model.ganttRecords[t];this._refresh();i._rowSelectedEventTrigger(t)},ganttrowHover:function(t){var r=this,i;r.model.enableRowHover&&(i=r.getGanttChartRows(),i.removeClass("e-gantt_mousehover").addClass("e-gantt_mouseleave"),n(i[t]).addClass("e-gantt_mousehover").removeClass("e-gantt_mouseleave"))},_rowHover:function(t){var i=this,e=n(t.target),f,u={},r,o;return i.model.enableRowHover?(f=n(i.getGanttChartRows()),r=f.index(e.parent()),r==-1&&(o=e.closest("tr"),r=f.index(o)),u.index=r,t.type=="mouseenter"?(u.reason="mouseenter",i.addRowHover(r)):(u.reason="mouseleave",i.removeRowHover()),i._trigger("rowHover",u),!1):!1},addRowHover:function(t){var i=this.getGanttChartRows();t!=null&&t!=-1&&n(i[t]).addClass("e-enablerowhover")},removeRowHover:function(){var n=this.getGanttChartRows();n.removeClass("e-enablerowhover")},updateHeight:function(t){var i=this,r=i.model;r.stripLines&&n(".e-stripline,.e-stripLines").css({height:t+"px"});r.holidays&&n(".e-holidays,.e-holiday").css({height:t+"px"});n(".e-secondary_canvas").css({height:t+"px"});n(".e-weekends").css({height:t+"px"});t<i._viewportHeight?t<=r.rowHeight?n(".e-holiday-label").css({top:0}):n(".e-holiday-label").css({top:t/2}):n(".e-holiday-label").css({top:i._viewportHeight/2});i._$bodyContainer.ejScroller("refresh");r.enableVirtualization},_completeAction:function(n){var t=this;n.vscrollExsist=t._$bodyContainer.ejScroller("isVScroll");t._trigger("actionComplete",n)},_taskbarEditing:function(n){var t=this;t._trigger("taskbarEditing",n)},_taskbarEdited:function(n){var t=this;t._trigger("taskbarEdited",n)},_queryTaskbarinfo:function(n){this._trigger("queryTaskbarInfo",n);this._updateTaskbarItems(n)},_refreshRow:function(n){var t=this;t._trigger("refreshRow",n)},_enbleZooming:function(n){var t=this;t._trigger("zooming",n)},_updateTaskbarItems:function(t){var s=this.getGanttChartRows(),h=this.model.rows.indexOf(t.data),r=s[h],i;if(r)if(i=r.childNodes.length>1?r.childNodes[1].firstChild:r.childNodes[0].firstChild,n(i).hasClass("e-parentContainer")){var c=i.firstChild,l=i.childNodes[1],u=c.style,f=l.style;u.backgroundColor!=t.parentTaskbarBackground&&(u.backgroundColor=t.parentTaskbarBackground);f.backgroundColor!=t.parentProgressbarBackground&&(f.backgroundColor=t.parentProgressbarBackground)}else if(n(i).hasClass("e-childContainer")){var a=i.childNodes[1],v=i.childNodes[2],e=a.style,o=v.style;e.backgroundColor!=t.taskbarBackground&&(e.backgroundColor=t.taskbarBackground);o.backgroundColor!=t.progressbarBackground&&(o.backgroundColor=t.progressbarBackground)}},_expandCollapse:function(n){var i=this,t={},r=i._currentViewData[n];t.data=r;t.recordIndex=i.model.updatedGanttRecords&&i.model.updatedGanttRecords.indexOf(r);t.source="ganttChart";t.expanded=!r.expanded;r&&(t.expanded?i._trigger("expanding",t):i._trigger("collapsing",t))},_getExpandStatus:function(n){var t=n.parentItem;return t!=null?t.expanded===!1?!1:t.parentItem?t.parentItem.expanded===!1?!1:this._getExpandStatus(t.parentItem):!0:!0},onScrollHelper:function(t){var i=this,f,r,u;if(!i._$bodyContainer.ejScroller("isVScroll")){i._$bodyContainer.ejScroller("scrollY",0,!0);return}i._mouseLeave();f=n("#ganttviewerbodyContianer"+this._id);n(".e-ganttviewerbodyContent").scrollTop(t);n(".e-ganttviewerbodyContent").parent(".e-content").scrollTop(t);r=parseInt(i.model.updatedGanttRecords.length*30)-(i._viewportHeight-18);t>r&&(t=r);t<0&&(t=0);u={scrollTop:t};i._handleScroll(u)},_handleScroll:function(n){var t=this,n=n||{},e=t._$headerContainer,o=t._$bodyContainer,r=0,u,f;n.scrollTop!==i&&(t._scrollTop=n.scrollTop);n.scrollLeft!==i&&(r=n.scrollLeft);u=r-t._prevLeft;f=t._scrollTop-t._prevScrollTop;u&&e.scrollLeft(r);t.model.enableVirtualization&&(t._vscrollDist=Math.abs(t._scrollTop-t._prevScrollTop),t._vscrollDist&&(t._vScrollDir=t._prevScrollTop<=t._scrollTop?1:-1,t._updateCurrentViewData(),t.renderGanttRecords(),t._prevScrollTop=t._scrollTop));n.requestType="scroll";n.delta=t._scrollTop;t._prevLeft=r;t._prevScrollTop=t._scrollTop;u===0&&f!==0&&t._completeAction(n)},refreshHelper:function(t,i,r){var u=this,f,e,o;u._currentViewData=t;u.model.updatedGanttRecords=i;i&&(u._refresh(),u._setHeight(i.length*u.model.rowHeight),u.model.enableVirtualization?(n("#ganttviewerbodyContent"+u._id+"").css({height:u._containerHeight+"px"}),u.updateHeight(u._containerHeight)):(f=0,f=r?(i.length-r)*u.model.rowHeight:i.length*u.model.rowHeight,u.updateHeight(f)),e=u._$bodyContainer.ejScroller("isVScroll"),o=u._$bodyContainer.ejScroller("isHScroll"),(e||o)&&u._$bodyContainer.ejScroller("refresh"))},reRenderGanttGridLinesTable:function(n){var t=this;t._visibleRecordsCount=t._visibleRecordsCount+n<0?t._visibleRecordsCount:t._visibleRecordsCount+n;t._visibleRecordsCount>0&&(t._$gridLinesTablebody.empty().append(t._createGridLinesTableRow(t._visibleRecordsCount)),t._$bodyContainer.ejScroller("refresh"))},_refresh:function(){var i=this,u=i.model,r=n.render[i._id+"_CustomTemplate2"](i._currentViewData);i._$ganttViewTablebody=n("#ganttViewTablebody"+i._id+"");i._$ganttViewTablebody.empty().append(r);u.enableVirtualization?(i._visibleRecordsCount=i._currentViewData.length,i._$gridLinesTablebody.empty().append(i._createGridLinesTableRow(i._currentViewData.length))):((i._visibleRecordsCount==0||i._visibleRecordsCount>i._currentViewData.length)&&(i._visibleRecordsCount=i._currentViewData.length),i._$gridLinesTablebody.empty().append(i._createGridLinesTableRow(i._visibleRecordsCount)));i._$ganttViewTablebody[0]!=null?this._ganttChartRows=n(i._$ganttViewTablebody[0].childNodes):(i._$ganttViewTablebody=t.buildTag("tbody.e-gantt-viewer-ganttViewTablebody#ganttViewTablebody"+i._id+"",r,{},{}),i._ganttChartRows=n(i._$ganttViewTablebody[0].childNodes));i._eventBindings()},refreshRow:function(t){var i=this,u=n(i.getGanttChartRows()[t]),r=i._currentViewData[t];t!=-1&&r&&(u.replaceWith(n.render[i._id+"_CustomTemplate2"](r)),i._setGanttChartRows(n(i._$ganttViewTablebody[0].childNodes)))},refreshScroller:function(n){var t=this,i,r,u;t._$bodyContainer.removeClass("borderbox");i=t._$bodyContainer.ejScroller("option","scrollTop");t._$bodyContainer.ejScroller("option",{width:n});r=t._$bodyContainer.ejScroller("isHScroll");r?t._$bodyContainer.removeClass("borderbox"):t._$bodyContainer.addClass("borderbox");u=t._$bodyContainer.ejScroller("isVScroll");u&&t._$bodyContainer.ejScroller("scrollY",i,!0)},renderRecord:function(t,i){var r=this,f=r.model,u;addedchartRow=n.render[this._id+"_CustomTemplate2"](t._cAddedRecord);r._ganttChartRows.length!=0&&(u=r._currentViewData.indexOf(f.selectedItem),t.position?t.position=="Above"?r.getGanttChartRows().eq(u-1).before(addedchartRow):t.position=="Below"&&r.getGanttChartRows().eq(u).after(addedchartRow):u==-1?r.getGanttChartRows().eq(0).before(addedchartRow):r.getGanttChartRows().eq(u).after(addedchartRow),r._setGanttChartRows(n(r._$ganttViewTablebody[0].childNodes)));r._ganttChartRows.length==0&&(r._updateCurrentViewData(),r._refresh(),r._setGanttChartRows(n(r._$ganttViewTablebody[0].childNodes)));f.enableVirtualization===!1?r._setHeight((r.model.ganttRecords.length-i)*r.model.rowHeight):r._setHeight(r.model.ganttRecords.length*r.model.rowHeight);r.updateHeight(r._containerHeight);r._$bodyContainer.ejScroller("refresh")},_setGanttChartRows:function(n){this._ganttChartRows=n},deleteChartRows:function(n,t){for(var r=this,u=r.getGanttChartRows(),i=n;i<n+t;i++)u.splice(i,1)},_eventBindings:function(){var h=n(this.getGanttChartRows()),c=h.length,r,t={},f,e,o,s,i,u;if(c!=0)for(u=0;u<c;u++)r=h[u],n(r).hasClass("e-ganttrowcell")&&(i=r.childNodes.length>1?r.childNodes[1].firstChild:r.childNodes[0].firstChild,n(i).hasClass("e-parentContainer")?(s=i.firstChild,o=i.childNodes[1]):n(i).hasClass("e-childContainer")&&(e=i.childNodes[1],f=i.childNodes[2]),t.data=this.model.ganttRecords[u],t.taskbar=r,t.taskbarBackground=e!=null?e.style.backgroundColor:null,t.progressbarBackground=f!=null?f.style.backgroundColor:null,t.parentTaskbarBackground=s!=null?s.style.backgroundColor:null,t.parentProgressbarBackground=o!=null?o.style.backgroundColor:null,this._queryTaskbarinfo(t))},_updateCurrentViewData:function(){var t=this,i=0;this.model.enableVirtualization?(this._getRenderedRowRange(),this._currentViewData=this.model.updatedGanttRecords.slice(t._renderedRange.top,t._renderedRange.bottom),t._vscrollDist!==0&&(i=t._scrollTop-t._rowMargin),n("#ganttViewTable"+t._id+"").css({top:i+"px"}),n("#ganttgridLinesTable"+t._id+"").css({top:i+"px"}),t._vTop=t._visibleRange.top,t._vBottom=t._visibleRange.bottom,t._rTop=t._renderedRange.top,t._rBottom=t._renderedRange.bottom):this._currentViewData=this.model.updatedGanttRecords},renderGanttRecords:function(){var n=this;n._refresh();n._$ganttViewTable.append(n._$ganttViewTablebody);n._$bodyContent.append(n._$ganttViewTable)},_getRenderedRowRange:function(){var n=this,t,i;return n._getVisibleRowRange(),t=n._visibleRange.top,i=n._visibleRange.bottom,n._renderedRange={top:t,bottom:i},n._renderedRange},_getVisibleRowRange:function(){var n=this,r=n._scrollTop/n.model.rowHeight,f=r-Math.floor(r),t,i,u;n._rowMargin=f*n.model.rowHeight;t=Math.floor(r);u=n.model.ganttRecords.length;i=n._getrowposition(n._scrollTop+n._viewportHeight);t=Math.max(0,t);i=Math.min(u,i);n._visibleRange={top:t,bottom:i}},_getrowposition:function(n){return Math.ceil(n/this.model.rowHeight)},_getDateType:function(n){if(n!=null){if(typeof n=="object")return n;var t=new RegExp("\\-","g"),i=new RegExp("\\.","g");return n=n.replace(t,"/"),n=n.replace(i,"/"),new Date(n)}return null},_createScheduleWeekTemplate:function(){var t=this,u,f=t.model,e=f.scheduleHeaderSettings.weekHeaderFormat,o={renderWeek:n.proxy(t._getWeeksplit,t)},i,r;n.views.helpers(o);i="<th class='e-schedule-week-headercell' style='box-sizing:border-box;-moz-box-sizing:border-box;'>";u="<div class='e-schedule-week-headercell-content'  style='width:"+(t._scheduleWeekWidth-1)+"px;margin:auto;white-space:nowrap;'>{{:~renderWeek('"+e+"',#data)}}<\/div>";i+=u;i+="<\/th>";r={};r[t._id+"ScheduleWeekTemplate"]=i;n.templates(r)},_getWeeksplit:function(n,t){var r=new Date(t),u=this,f=u.model,i;return i=Globalize.format(r,n,f.locale),i.toLowerCase().replace(/(-(\w)|(^| )(\w)|:(\w)|,(\w)|\/(\w)|\.(\w))/g,function(n){return n.toUpperCase()})},_createScheduleDayTemplate:function(){var t=this,f,e=t.model,i=e.scheduleHeaderSettings.dayHeaderFormat,o={renderDay:n.proxy(t._getDayTemplate,t)},r,u;n.views.helpers(o);r="<th  class='e-schedule-day-headercell  e-headercell-weekend' style='-moz-box-sizing:border-box;box-sizing:border-box;background-color:"+this.model.scheduleHeaderSettings.weekendBackground+"'>";f="<div class='e-schedule-day-headercell-content' style='width:"+(t.model.perDayWidth-1)+"px;position:static;box-sizing:border-box;'>{{:~renderDay('"+i+"',0,#data)}}<\/div><th  class='e-schedule-day-headercell' style='-moz-box-sizing:border-box;box-sizing:border-box;'><div class='e-schedule-day-headercell-content' style='width:"+(t.model.perDayWidth-1)+"px;position:static;box-sizing:border-box;'>{{:~renderDay('"+i+"',1,#data)}}<\/div><th  class='e-schedule-day-headercell' style='-moz-box-sizing:border-box;box-sizing:border-box;'><div class='e-schedule-day-headercell-content' style='width:"+(t.model.perDayWidth-1)+"px;position:static;box-sizing:border-box;'>{{:~renderDay('"+i+"',2,#data)}}<\/div><th  class='e-schedule-day-headercell' style='-moz-box-sizing:border-box;box-sizing:border-box;'><div class='e-schedule-day-headercell-content' style='width:"+(t.model.perDayWidth-1)+"px;position:static;box-sizing:border-box;'>{{:~renderDay('"+i+"',3,#data)}}<\/div><th  class='e-schedule-day-headercell' style='-moz-box-sizing:border-box;box-sizing:border-box;'><div class='e-schedule-day-headercell-content' style='width:"+(t.model.perDayWidth-1)+"px;position:static;box-sizing:border-box;'>{{:~renderDay('"+i+"',4,#data)}}<\/div><th  class='e-schedule-day-headercell' style='-moz-box-sizing:border-box;box-sizing:border-box;'><div class='e-schedule-day-headercell-content' style='width:"+(t.model.perDayWidth-1)+"px;position:static;box-sizing:border-box;'>{{:~renderDay('"+i+"',5,#data)}}<\/div><th  class='e-schedule-day-headercell  e-headercell-weekend' style='-moz-box-sizing:border-box;box-sizing:border-box;background-color:"+this.model.scheduleHeaderSettings.weekendBackground+"'><div class='e-schedule-day-headercell-content' style='width:"+(t.model.perDayWidth-1)+"px;position:static;box-sizing:border-box;'>{{:~renderDay('"+i+"',6,#data)}}<\/div>";r+=f;r+="<\/th>";u={};u[t._id+"_CustomTemplate1"]=r;n.templates(u)},_getDayTemplate:function(n,t,i){var r=new Date(i),f=this,u=f.model;r.setDate(r.getDate()+t);switch(n){case"D":case"d":return("0"+r.getDate()).slice(-2);case"DD":case"dd":return r.getDate();case"DDD":case"ddd":case"DDDD":case"dddd":return Globalize.format(r,n,u.locale)[0].toUpperCase();default:return Globalize.format(r,n,u.locale)[0].toUpperCase()}},_createSchedule:function(i,r){var u=this,a=u.model.scheduleWeeks.length,h,l,o,e,s,c,f;i=i==null?u._projectStartDate:i;r=r==null?u._projectEndDate:r;u._createScheduleWeekTemplate();f=t.buildTag("table.e-schedule-headerrow-week","",{display:"block"},{"cell-spacing":"0"});h=t.buildTag("colgroup","",{},{});l=n(document.createElement("col"));l.css("width",a*this._scheduleWeekWidth+"px");h.append(l);o=t.buildTag("thead.e-ejganttschedule","",{display:"block","border-collapse":"collapse"},{});e=t.buildTag("tr",n.render[this._id+"ScheduleWeekTemplate"](u.model.scheduleWeeks),{},{});s=t.buildTag("th.schedule","",{},{});c=t.buildTag("div.schedule","",{width:"20px"},{});s.append(c);e.append(s);o.append(e);f.append(h);f.append(o);u._$scheduleDiv.append(f);e=null;u._createScheduleDayTemplate();f=t.buildTag("table.e-schedule-headerrow-day","",{display:"block","border-collapse":"collapse"},{"cell-spacing":"0"});o=t.buildTag("thead.e-ejganttschedule","",{display:"block","border-collapse":"collapse"},{});e=t.buildTag("tr",n.render[this._id+"_CustomTemplate1"](u.model.scheduleWeeks),{},{});s=t.buildTag("th.schedule","",{},{});c=t.buildTag("div.schedule","",{width:"20px"},{});s.append(c);e.append(s);o.append(e);f.append(h);f.append(o);u._$scheduleDiv.append(f);u._$headerContainer.append(u._$scheduleDiv);u._$ganttChartContainer.append(u._$headerContainer);n("#"+u._id).append(u._$ganttChartContainer)},createGridLinesTable:function(){var i=this,u=i.model,f=u.scheduleWeeks.length,e,r=t.buildTag("table.e-ganttgridLinesTable#ganttgridLinesTable"+i._id,"",{"z-index":"2",position:"absolute",width:f*i._scheduleWeekWidth+"px"},{cellspacing:"0px"}),o;$colsgroup=t.buildTag("colgroup","",{},{});$column=n(document.createElement("col"));$column.css("width",f*this._scheduleWeekWidth+"px");$colsgroup.append($column);r.append($colsgroup);e=i._createGridLinesTableRow(u.ganttRecords.length);o=t.buildTag("tbody.e-gantt-viewer-gridLinesTablebody#gridLinesTablebody"+i._id+"",e,{},{});i._$gridLinesTablebody=o;r.append(i._$gridLinesTablebody);i._$bodyContent.append(r)},_createGridLinesTableRow:function(n){for(var r=this,t="",i=0;i<n;i++)t+="<tr style='display:table-row;height:"+this.model.rowHeight+"px'><td class='e-ganttgridlines'><\/td><\/tr>";return t},_createTaskbarTemplate:function(){var i=this,s=i.model.scheduleWeeks.length*i._scheduleWeekWidth,u=i.model,a,h=4,r,c=0,e=u.baselineColor,v={_getType:i._getTypedata,_expander:i._addRecordExpandCollapse,_milestoneMapping:i._isMilestone,_resources:n.proxy(i._getResourceInfo,i),_rowClassName:t.TreeGrid._getrowClassName,_expandStatus:n.proxy(i._getExpandStatusRecord,i),_borderRadius:i._getBorderRadius},o,f,l;u.renderBaseline?(r=u.rowHeight-h-5,c=0):r=u.rowHeight-10;n.views.helpers(v);u.progressMapping||(this.model.showProgressStatus=!1);u.resourceInfoMapping||(u.showResourceNames=!1);o="<tr class='{{:~_rowClassName()}}  {{if isSelected}}e-ganttrowcell {{:~_expander()}} e-gantt-mouseclick{{else}}e-ganttrowcell {{:~_expander()}}{{/if}}' id='chartrowcell"+i._id+"' style='display:{{:~_expandStatus(#data)}};'>";f="{{:~_borderRadius()}}";a="{{if ~_getType()}}{{if "+this.model.showTaskNames+"}}<td class='e-chartcell'><div class='e-tasknameContainer'  unselectable='on' style='left:-{{:width}}px;width:{{:left+width}}px;'><span class='e-taskbarname'  style='margin-top:"+this.model.rowHeight/2+"px;margin-right:30px;font-weight:bold'>{{:taskName}}<\/span><\/div><\/td>{{/if}}<td  class='e-chartcell' vertical-align='middle' style='width:"+s+"px;'><div class='e-parentContainer' unselectable='on' style='height:29px;z-index:3;'><div class='e-gantt-parenttaskbar-innerdiv {{:~_expander()}}' style='left:{{:left}}px;margin-top:5px;width:{{:width}}px;height:"+r+"px;background-color:"+this.model.parentTaskbarBackground+" ;'><\/div><div  class='e-gantt-parenttaskbar-progress {{:~_expander()}}  progressbar' id='progressbar' style='margin-top:5px;border-style:{{if progressWidth}}solid{{else}}none{{/if}}; left:{{:left}}px;width:{{:progressWidth}}px;height:"+r+"px;position:absolute;background-color:"+this.model.parentProgressbarBackground+";z-index:3;border-top-right-radius:"+f+"px;border-bottom-right-radius:"+f+"px;'><\/div><\/div>{{if "+this.model.renderBaseline+" }}<div  class='e-baselinebar' style='margin-top:-4px;left:{{:baselineLeft}}px;width:{{:baselineWidth}}px;height:"+h+"px;background-color: "+e+";position:absolute;z-index:3;box-sizing:border-box;-moz-box-sizing:border-box;'><\/div>{{/if}}<\/td>{{if "+this.model.showResourceNames+"}}<td class='e-chartcell' ><div class='e-resourceinfo'  unselectable='on' style='margin-top:5px;left:{{:left+width+30}}px;margin:0;margin-left:5px;margin-top:-9px;position:absolute;background-color:transparent;font-weight:bold'><span class='e-resourcename'  style='margin-top:"+this.model.rowHeight/2+"px;margin-right:30px;outline:none;'>{{:~_resources(#data)}}<\/span><\/div><\/td>{{/if}}{{else ~_milestoneMapping()}}{{if "+this.model.showTaskNames+"}}<td class='e-chartcell'><div class='e-tasknameContainer'  unselectable='on' style='left:-{{:width+150}}px;width:{{:left+width+150}}px;'><span class='e-taskbarname'  style='margin-top:"+this.model.rowHeight/2+"px;margin-right:30px;'>{{:taskName}}<\/span><\/div><\/td>{{/if}}<td class='e-chartcell' style='width:"+s+"px;'><div class='e-gantt-milestone-container' style=height:29px;><div class='e-gantt-milestone' style='position:absolute;left:{{:left}}px;'><div class='e-gantt-milestone milestone-top'  style='top:3px;'><\/div><div class='e-gantt-milestone milestone-bottom'  style='top:15px;'><\/div><\/div><\/div>{{if "+this.model.renderBaseline+" }}<div class='e-baseline-gantt-milestone-container' ><div class='e-baseline-gantt-milestone' style='position:absolute;left:{{:baselineLeft}}px;z-index:2;'><div class='e-baseline-gantt-milestone baseline-milestone-top'  style=' border-bottom-color: "+e+";z-index:2;top:-26px;'><\/div><div class='e-baseline-gantt-milestone baseline-milestone-bottom'  style=' border-top-color: "+e+";z-index:2;top:-14px;'><\/div><\/div><\/div>{{/if}}<\/td>{{if "+this.model.showResourceNames+"}}<td class='e-chartcell' ><div class='e-resourceinfo'  unselectable='on' style='margin-top:5px;left:{{:left+56}}px;margin:0;margin-left:5px;margin-top:-9px;position:absolute;background-color:transparent;'><span class='e-resourcename'  style='margin-top:"+this.model.rowHeight/2+"px;margin-right:30px;'>{{:~_resources(#data)}}<\/span><\/div><\/td>{{/if}}{{else}}{{if "+this.model.showTaskNames+"}}<td class='e-chartcell'><div class='e-tasknameContainer'  unselectable='on' style='left:-{{:width}}px;width:{{:left+width}}px;'><span class='e-taskbarname'  style='margin-top:"+this.model.rowHeight/2+"px;margin-right:30px;'>{{:taskName}}<\/span><\/div><\/td>{{/if}}<td class='e-chartcell' style='width:"+s+"px;'><div  class='e-childContainer'  unselectable='on' style='height:29px;'><div class='taskbarresizer-left e-icon' style='left:{{:left+2}}px;width:10px;margin-top:5px;height:"+r+"px;'><\/div><div  class='e-gantt-childtaskbar' style='left:{{:left}}px;width:{{:width}}px;height:"+r+"px;background-color:"+this.model.taskbarBackground+";margin-top:5px;'><\/div><div  class='e-gantt-childtaskbar-progress  progressbar' id='progressbar' style='border-style:{{if progressWidth}}solid{{else}}none{{/if}}; left:{{:left}}px;width:{{:progressWidth}}px;text-align:right;line-height:"+r+"px;margin-top:5px;height:"+this.model.progressbarHeight*(r/100)+"px;position:absolute;background-color:"+this.model.progressbarBackground+";border-top-right-radius:"+f+"px;border-bottom-right-radius:"+f+"px;'>{{if "+this.model.showProgressStatus+"}}<span class='e-tasklabel' style=''>{{:status}}%<\/span>{{/if}}<\/div><div class='progressbarresizer-right' style='left:{{:left+progressWidth-10}}px;width:20px;margin-top:5px;height:"+r+"px;position:absolute;z-index:4;'><div class='progressbarresizer-right' style='top:"+(22-c/2)+"px;margin-top:5px;position:absolute;'><div class='e-progresshandler-element'><\/div><\/div><div class='progressbarresizer-right' style='top:"+(17-c/2)+"px;margin-top:5px;position:absolute;'><div class='e-progresshandlerafter-element'><\/div><\/div><\/div><div class='taskbarresizer-right e-icon' style='left:{{:left+width-12}}px;width:10px;height:"+r+"px;position:absolute;z-index:2;margin-top:5px;'><\/div><\/div>{{if "+this.model.renderBaseline+" }}<div  class='e-baselinebar' style='margin-top:-4px;left:{{:baselineLeft}}px;width:{{:baselineWidth}}px;height:"+h+"px;background-color: "+e+";position:absolute;z-index:3;box-sizing:border-box;-moz-box-sizing:border-box;'><\/div>{{/if}}<\/td>{{if "+this.model.showResourceNames+"}}<td class='e-chartcell' ><div class='e-resourceinfo'  unselectable='on' style='left:{{:left+width+30}}px;margin:0;margin-left:5px;margin-top:-9px;position:absolute;text-align:left;background-color:transparent;'><span class='e-resourcename'  style='margin-top:"+this.model.rowHeight/2+"px;margin-right:30px;'>{{:~_resources(#data)}}<\/span><\/div><\/td>{{/if}}{{/if}}";o+=a;o+="<\/tr>";l={};l[this._id+"_CustomTemplate2"]=o;n.templates(l)},_getResourceInfo:function(n){var i=null,r,t;if(n.resourceInfo!=null){if(r=n.resourceInfo.length,r>0){for(t=0;t<r;t++)i==null?i=n.resourceInfo[t][this.model.resourceNameMapping]:i+=" , "+n.resourceInfo[t][this.model.resourceNameMapping];return i}return n.resourceInfo[0][this.model.resourceNameMapping]}return String.empty},_getrowClassName:function(){var n="gridrowtaskId",t=this;return t.data.parentItem&&(n+=t.data.parentItem.taskId.toString()),n+="level",n+t.data.level.toString()},_getExpandStatusRecord:function(n){var t=this;return t._getExpandStatus(n)?"table-row":"none"},_isMilestone:function(){return this.data.isMilestone?!0:!1},_addRecordExpandCollapse:function(){return this.data.expanded?"e-chartexpand":!this.data.expanded&&this.data.hasChildRecords?"e-chartcollapse":!1},_getTypedata:function(){return this.data.hasChildRecords},_getBorderRadius:function(){var n=this,t=n.data.width-n.data.progressWidth;return t<=4?4-t:0},_createConnectorLineTemplate:function(){var u=this,t=this.model.connectorlineWidth,o,r,i=this.model.connectorLineBackground,h={_getWidthVal:u._getWidth,_getTop:u._getPredecessorTop,_getPosition:u._getParentPosition,_setContainerWidthSSType2:u._getContainerWidthSSType2,_setInnerChildWidthSSType2:u._getInnerChildWidthSSType2,_setInnerElementLeftSSType2:u._getInnerElementLeftSSType2,_setInnerElementWidthSSType2:u._getInnerElementWidthSSType2,_isMilestone:u._isTaskMilestone,_isMilestoneParent:u._isMilestoneParent},f,s,e;u.model.renderBaseline?(o=0,r=this.model.rowHeight/2-o):r=this.model.rowHeight/2;n.views.helpers(h);f="<div  id='ConnectorLine{{:ConnectorLineId}}' style='background-color=black'>";s="{{if ~_getPosition()=='FSType1'}}<div style='left:{{:ParentLeft+ParentWidth}}px;top:{{:ParentTop+"+r+"}}px;width:{{:(ChildLeft - (ParentLeft + ParentWidth + 20))}}px;height:{{:Height}}px;position:absolute'><div class='e-line' style='left:{{if milestoneParent}}-7px{{else}}0px{{/if}};width:{{if milestoneParent}}{{:(ChildLeft-(ParentLeft + ParentWidth + 10))+"+t+"-2}}px{{else}}{{:(ChildLeft-(ParentLeft + ParentWidth + 10))+"+t+"-10}}px{{/if}};height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:(ChildLeft-(ParentLeft + ParentWidth + 10))+"+t+"-10}}px;width:"+t+"px;height:{{:Height-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:(ChildLeft-(ParentLeft + ParentWidth + 10))+"+t+"-10}}px;width:10px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='connectorline-rightarrow' style='left:{{:(ChildLeft - (ParentLeft + ParentWidth + 10))}}px;border-left: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><\/div>{{else  ~_getPosition()=='FSType2'}}<div style='left:{{:ParentLeft}}px;top:{{:ParentTop+"+r+"}}px;width:{{:~_getWidthVal()}}px;height:{{:Height}}px;position:absolute'><div class='e-line' style='left:{{if milestoneParent}}{{:ParentWidth-7}}px{{else}}{{:ParentWidth}}px{{/if}};width:{{if milestoneParent}}17px{{else}}10px{{/if}};height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:ParentWidth+10-"+t+"}}px;width:"+t+"px;height:{{:Height-14-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:(ParentWidth - (((ParentLeft + ParentWidth) - ChildLeft) + 20))}}px;width:{{:(((ParentLeft + ParentWidth) - ChildLeft) + 30 )}}px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:(ParentWidth - (((ParentLeft + ParentWidth) - ChildLeft) + 20))}}px;width:"+t+"px;height:{{:14-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:(ParentWidth - (((ParentLeft + ParentWidth) - ChildLeft) + 20))}}px;width:10px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='connectorline-rightarrow' style='left:{{:(ParentWidth - (((ParentLeft + ParentWidth) - ChildLeft) + 10))}}px;border-left: 10px solid "+i+";border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;top:{{:-6-"+t+"}}px;width:0;height:0;position:relative'><\/div><\/div>{{else ~_getPosition()=='FSType3'}}<div style='left:{{:ChildLeft-20}}px;top:{{:ChildTop+"+r+"}}px;width:{{:ParentWidth+ChildWidth}}px;height:{{:Height}}px;position:absolute'><div class='connectorline-rightarrow' style='left:10px;border-left: 10px solid "+i+";border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;top:{{:-6-"+t+"}}px;width:0;height:0;position:relative'><\/div><div class='e-line' style='width:10px;height:"+t+"px;background-color:"+i+";position:relative;top:-13px;'><\/div><div class='e-line' style='width:"+t+"px;height:{{:Height-14-"+t+"}}px;background-color:"+i+";position:relative;top:-13px;'><\/div><div class='e-line' style='width:{{:(((ParentLeft + ParentWidth) - ChildLeft) + 30)}}px;height:"+t+"px;background-color:"+i+";position:relative;top:-13px;'><\/div><div class='e-line' style='left:{{:(((ParentLeft + ParentWidth) - ChildLeft) + 30)}}px;width:"+t+"px;height:{{:12-"+t+"}}px;background-color:"+i+";position:relative;top:-13px;'><\/div><div class='e-line' style='left:{{:(((ParentLeft + ParentWidth) - ChildLeft) + 20)}}px;width:10px;height:"+t+"px;background-color:"+i+";position:relative;top:-13px;'><\/div><\/div>{{else ~_getPosition()=='FSType4'}}<div style='left:{{:ParentLeft+ParentWidth}}px;top:{{:ChildTop+"+r+"}}px;width:{{:(ChildLeft - (ParentLeft + ParentWidth + 20))}}px;height:{{:Height}}px;position:absolute'><div class='connectorline-rightarrow' style='left:{{:(ChildLeft - (ParentLeft + ParentWidth + 10))}}px;border-left: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><div class='e-line' style='left:{{:(ChildLeft - (ParentLeft + ParentWidth) - 20)}}px;top:-13px;width:10px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='top:-13px;left:{{:(ChildLeft - (ParentLeft + ParentWidth) - 20)}}px;width:"+t+"px;height:{{:Height-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='{{if ~_isMilestoneParent()}}left:-6px;{{/if}}top:-13px;width:{{if ~_isMilestoneParent()}}{{:(ChildLeft-(ParentLeft + ParentWidth+20 )+ 6)+"+t+"}}px;{{else}}{{:(ChildLeft-(ParentLeft + ParentWidth + 20))+"+t+"}}px;{{/if}}height:"+t+"px;background-color:"+i+";position:relative'><\/div><\/div>{{else ~_getPosition()=='SSType4'}}<div  style='left:{{:ParentLeft-10}}px;top:{{:ChildTop+"+r+"}}px;width:{{:ChildLeft-ParentLeft}}px;height:{{:Height}}px;position:absolute'><div class='connectorline-rightarrow' style='left:{{:ChildLeft-ParentLeft}}px;border-left: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><div class='e-line' style='top:-13px;width:{{:ChildLeft-ParentLeft}}px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='top:-13px;width:"+t+"px;height:{{:Height-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='top:-13px;width:10px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><\/div>{{else ~_getPosition()=='SSType3'}}<div  style='left:{{:ChildLeft-20}}px;top:{{:ChildTop+"+r+"}}px;width:{{:ParentLeft-ChildLeft}}px;height:{{:Height}}px;position:absolute'><div class='connectorline-rightarrow' style='left:10px;border-left: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><div class='e-line' style='top:-13px;width:10px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='top:-13px;width:"+t+"px;height:{{:Height-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='top:-13px;width:{{:ParentLeft-ChildLeft+20}}px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><\/div>{{else ~_getPosition()=='SSType2'}}<div  style='left:{{:~_setInnerElementLeftSSType2()}}px;top:{{:ParentTop+"+r+"}}px;width:{{:~_setContainerWidthSSType2()}}px;height:{{:Height}}px;position:absolute'><div class='e-line' style='width:{{:~_setInnerChildWidthSSType2()}}px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='width:"+t+"px;height:{{:Height-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='width:{{:~_setInnerElementWidthSSType2()}}px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='connectorline-rightarrow' style='left:{{:~_setInnerElementWidthSSType2()}}px;border-left: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><\/div>{{else ~_getPosition()=='SSType1'}}<div  style='left:{{:ChildLeft-20}}px;top:{{:ParentTop+"+r+"}}px;width:{{:ParentLeft-ChildLeft}}px;height:{{:Height}}px;position:absolute'><div class='e-line' style='width:{{:ParentLeft-ChildLeft+20}}px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='width:"+t+"px;height:{{:Height-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='width:10px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='connectorline-rightarrow' style='left:10px;border-left: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><\/div>{{else ~_getPosition()=='FFType1'}}<div class='FFtype1' style='left:{{:ChildLeft+ChildWidth}}px;top:{{:ParentTop+"+r+"}}px;width:{{:((ChildLeft + ChildWidth)-(ParentLeft + ParentWidth))+30}}px;height:{{:Height}}px;position:absolute'><div class='e-line' style='left:{{if ~_isMilestoneParent()}}{{:((ParentLeft + ParentWidth) - (ChildLeft + ChildWidth))-10}}px;{{else}}{{:((ParentLeft + ParentWidth) - (ChildLeft + ChildWidth))}}px;{{/if}}width:{{if ~_isMilestoneParent()}}30px;{{else}}20px;{{/if}}height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{if ~_isMilestoneParent()}}{{:((ParentLeft + ParentWidth) - (ChildLeft + ChildWidth))+20}}px;{{else}}{{:((ParentLeft + ParentWidth) - (ChildLeft + ChildWidth))+20}}px;{{/if}}width:"+t+"px;height:{{:Height-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{if ~_isMilestone()}}4px;{{else}}10px;{{/if}}width:{{if ~_isMilestone()}}{{:((ParentLeft + ParentWidth) - (ChildLeft + ChildWidth))+16}}px;{{else}}{{:((ParentLeft + ParentWidth) - (ChildLeft + ChildWidth))+10}}px;{{/if}}height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='connectorline-leftarrow' style='{{if ~_isMilestone()}}left:-6px;{{/if}}border-right: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><\/div>{{else ~_getPosition()=='FFType2'}}<div style='left:{{:ParentLeft+ParentWidth}}px;top:{{:ParentTop+"+r+"}}px;width:{{:((ChildLeft +ChildWidth)-(ParentLeft + ParentWidth))+20}}px;height:{{:Height}}px;position:absolute'><div class='e-line' style='{{if ~_isMilestoneParent()}}left:-6px;{{/if}}width:{{if ~_isMilestoneParent()}}{{:((ChildLeft +ChildWidth)-(ParentLeft + ParentWidth))+26}}px;{{else}}{{:((ChildLeft +ChildWidth)-(ParentLeft + ParentWidth))+20}}px;{{/if}}height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:((ChildLeft +ChildWidth)-(ParentLeft + ParentWidth))+20}}px;width:"+t+"px;height:{{:Height-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{if ~_isMilestone()}}{{:((ChildLeft +ChildWidth)-(ParentLeft + ParentWidth))+4}}px;{{else}}{{:((ChildLeft +ChildWidth)-(ParentLeft + ParentWidth))+10}}px;{{/if}}width:{{if ~_isMilestone()}}16px;{{else}}10px;{{/if}}height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='connectorline-leftarrow' style='left:{{if ~_isMilestone()}}{{:((ChildLeft +ChildWidth)-(ParentLeft + ParentWidth))-6}}px;{{else}}{{:((ChildLeft +ChildWidth)-(ParentLeft + ParentWidth))}}px;{{/if}}border-right: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><\/div>{{else ~_getPosition()=='FFType3'}}<div  style='left:{{:ChildLeft+ChildWidth}}px;top:{{:ChildTop+"+r+"}}px;width:{{:((ParentLeft + ParentWidth) - (ChildLeft + ChildWidth))+20}}px;height:{{:Height}}px;position:absolute'><div class='connectorline-leftarrow' style='top:-12.5px;border-right: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><div class='e-line' style='width:{{:((ParentLeft + ParentWidth) - (ChildLeft + ChildWidth))+20}}px;top:-12.5px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:((ParentLeft + ParentWidth) - (ChildLeft + ChildWidth))+20}}px;top:-12.5px;width:"+t+"px;height:{{:Height-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:((ParentLeft + ParentWidth) - (ChildLeft + ChildWidth))}}px;top:-12.5px;width:20px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><\/div>{{else ~_getPosition()=='FFType4'}}<div  style='left:{{:ParentLeft+ParentWidth}}px;top:{{:ChildTop+"+r+"}}px;width:{{:((ChildLeft +ChildWidth)-(ParentLeft + ParentWidth))+20}}px;height:{{:Height}}px;position:absolute'><div  class='connectorline-leftarrow' style='left:{{:((ChildLeft +ChildWidth)-(ParentLeft + ParentWidth))}}px;border-right: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><div class='e-line' style='left:{{:((ChildLeft +ChildWidth)-(ParentLeft + ParentWidth))+10}}px;top:-13px;width:10px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:((ChildLeft +ChildWidth)-(ParentLeft + ParentWidth))+20}}px;top:-13px;width:"+t+"px;height:{{:Height-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='width:{{:((ChildLeft +ChildWidth)-(ParentLeft + ParentWidth))+20}}px;top:-13px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><\/div>{{else  ~_getPosition()=='SFType4'}}<div style='left:{{:ParentLeft-10}}px;top:{{:ChildTop+"+r+"}}px;width:{{:((ChildLeft + ChildWidth) - (ParentLeft ))+20}}px;height:{{:Height}}px;position:absolute'><div class='connectorline-leftarrow' style='left:{{:((ChildLeft + ChildWidth) - (ParentLeft ))+10}}px;top:-13px;border-right: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><div class='e-line' style='left:{{:((ChildLeft + ChildWidth) - (ParentLeft ))+20}}px;top:-13px;width:10px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:((ChildLeft + ChildWidth) - (ParentLeft ))+30}}px;top:-13px;width:"+t+"px;height:{{:Height-15-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='top:-13px;width:{{:((ChildLeft + ChildWidth) - (ParentLeft ))+30}}px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='top:-13px;width:"+t+"px;height:{{:12-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='top:-13px;width:10px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><\/div>{{else ~_getPosition()=='SFType3'}}<div style='left:{{:ChildLeft+ChildWidth}}px;top:{{:ChildTop+"+r+"}}px;width:{{:((ParentLeft)-(ChildLeft + ChildWidth))}}px;height:{{:Height}}px;position:absolute'><div class='connectorline-leftarrow' style='top:-13px;border-right: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><div class='e-line' style='left:10px;top:-13px;width:10px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:20px;top:-13px;width:"+t+"px;height:{{:Height-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:20px;top:-13px;width:{{:(ChildLeft-(ParentLeft + ParentWidth + 20))+"+t+"}}px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><\/div>{{else  ~_getPosition()=='SFType1'}}<div style='left:{{:ParentLeft-10}}px;top:{{:ParentTop+"+r+"}}px;width:{{:ChildLeft+ChildWidth+20}}px;height:{{:Height}}px;position:absolute'><div class='e-line' style='width:10px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='width:"+t+"px;height:{{:Height-15-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='width:{{:((ChildLeft + ChildWidth) - (ParentLeft ))+30}}px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:((ChildLeft + ChildWidth) - (ParentLeft ))+30}}px;width:"+t+"px;height:{{:12-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:((ChildLeft + ChildWidth) - (ParentLeft ))+20}}px;width:10px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='connectorline-leftarrow' style='left:{{:((ChildLeft + ChildWidth) - (ParentLeft ))+10}}px;border-right: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><\/div>{{else ~_getPosition()=='SFType2'}}<div  style='left:{{:ChildLeft+ChildWidth}}px;top:{{:ParentTop+"+r+"}}px;width:{{:((ParentLeft) - (ChildLeft + ChildWidth))}}px;height:{{:Height}}px;position:absolute'><div class='e-line' style='left:{{:((ParentLeft) - (ChildLeft + ChildWidth))-10}}px;width:10px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:{{:((ParentLeft) - (ChildLeft + ChildWidth))-10}}px;width:"+t+"px;height:{{:Height-"+t+"}}px;background-color:"+i+";position:relative'><\/div><div class='e-line' style='left:10px;width:{{:((ParentLeft) - (ChildLeft + ChildWidth))-20}}px;height:"+t+"px;background-color:"+i+";position:relative'><\/div><div class='connectorline-leftarrow' style='border-right: 10px solid "+i+";top:{{:-6-"+t+"}}px;border-bottom-width:{{:5+"+t+"}}px;border-top-width:{{:5+"+t+"}}px;width:0;height:0;position:relative'><\/div><\/div>{{/if}}";f+=s;f+="<\/div>";e={};e[this._id+"ConnectorLineTemplate"]=f;n.templates(e)},_isTaskMilestone:function(){return this.data.milestoneChild?!0:!1},_isMilestoneParent:function(){return this.data.milestoneParent?!0:!1},_getInnerChildWidthSSType2:function(){return this.data.ParentLeft+this.data.ParentWidth<this.data.ChildLeft?10:this.data.ParentLeft==this.data.ChildLeft?20:this.data.ChildLeft-this.data.ParentLeft},_getInnerElementLeftSSType2:function(){return this.data.ParentLeft==this.data.ChildLeft?this.data.ParentLeft-20:this.data.ParentLeft-10},_getInnerElementWidthSSType2:function(){return this.data.ParentLeft==this.data.ChildLeft?10:this.data.ChildLeft-this.data.ParentLeft},_getContainerWidthSSType2:function(){return this.data.ParentLeft==this.data.ChildLeft?20:this.data.ChildLeft-this.data.ParentLeft},_getPredecessorTop:function(){return this.data.ParentTop>this.data.ChildTop?!0:!1},_getParentPosition:function(){if(this.data.ParentTop<this.data.ChildTop){if(this.data.Type=="FF")return this.data.ChildLeft>=this.data.ParentLeft||this.data.ChildLeft+this.data.ChildWidth>=this.data.ParentLeft&&this.data.milestoneParent?"FFType2":"FFType1";if(this.data.ParentLeft<this.data.ChildLeft&&this.data.ChildLeft>this.data.ParentLeft+this.data.ParentWidth+25){if(this.data.Type=="FS")return"FSType1";if(this.data.Type=="SF")return"SFType1";if(this.data.Type=="SS")return"SSType2";if(this.data.Type=="FF")return"FFType2"}else if(this.data.ParentLeft<this.data.ChildLeft&&this.data.ChildLeft<this.data.ParentLeft+this.data.ParentWidth||this.data.ParentLeft==this.data.ChildLeft||this.data.ParentLeft>this.data.ChildLeft){if(this.data.ParentLeft>this.data.ChildLeft+this.data.ChildWidth+25&&this.data.Type=="SF")return"SFType2";if(this.data.ParentLeft>this.data.ChildLeft){if(this.data.Type=="SS")return"SSType1";if(this.data.Type=="SF")return"SFType1";if(this.data.Type=="FF")return"FFType1"}else if(this.data.ChildLeft+this.data.ChildWidth>this.data.ParentLeft+this.data.ParentWidth&&this.data.Type=="FF")return"FFType2";if(this.data.Type=="FS")return"FSType2";if(this.data.Type=="SS")return"SSType2";if(this.data.Type=="FF")return"FFType1";if(this.data.Type=="SF")return"SFType1"}else if(this.data.ParentLeft+25<this.data.ChildLeft){if(this.data.Type=="FS")return"FSType2";if(this.data.Type=="FF")return"FFType2"}}else if(this.data.ParentTop>this.data.ChildTop)if(this.data.ParentLeft<this.data.ChildLeft&&this.data.ChildLeft>this.data.ParentLeft+this.data.ParentWidth){if(this.data.Type=="FS")return"FSType4";if(this.data.ParentLeft<this.data.ChildLeft||this.data.ChildLeft+this.data.ChildWidth>this.data.ParentLeft+this.data.ParentWidth){if(this.data.Type=="SS")return"SSType4";if(this.data.Type=="FF")return"FFType4"}else if(this.data.ChildLeft+this.data.ChildWidth>this.data.ParentLeft+this.data.ParentWidth&&this.data.Type=="FF")return"FFType4"}else if(this.data.ParentLeft<this.data.ChildLeft&&this.data.ChildLeft<this.data.ParentLeft+this.data.ParentWidth||this.data.ParentLeft==this.data.ChildLeft||this.data.ParentLeft>this.data.ChildLeft){if(this.data.ChildLeft+this.data.ChildWidth<=this.data.ParentLeft+this.data.ParentWidth){if(this.data.Type=="FF")return"FFType3";if(this.data.Type=="SF")return"SFType3"}else if(this.data.ChildLeft+this.data.ChildWidth>this.data.ParentLeft+this.data.ParentWidth){if(this.data.Type=="FF")return"FFType4";if(this.data.Type=="SF")return"SFType4"}if(this.data.Type=="FS")return"FSType3";if(this.data.Type=="SS")return"SSType3"}else if(this.data.ParentLeft<this.data.ChildLeft&&this.data.Type=="FS")return"FSType3";return!1},_getWidth:function(){return this.data.ChildLeft+this.data.ChildWidth<this.data.ParentLeft+this.data.ParentWidth?this.data.ParentWidth:this.data.ChildWidth+this.data.ParentWidth},_renderWeekends:function(){for(var n=this,i=0,f=n.model.perDayWidth+1,r=n.model.ganttRecords.length*this.model.rowHeight,h=n.model.scheduleWeeks.length,e,o,u=t.buildTag("div.e-secondary_canvas","",{height:r+"px"},{}),s=0;s<h;s++)e=t.buildTag("div.e-weekends","",{left:i+"px",width:f+"px",height:r+"px","background-color":this.model.weekendBackground},{}),o=t.buildTag("div.e-weekends","",{left:i+n.model.perDayWidth*6+"px",width:f+"px",height:r+"px","background-color":this.model.weekendBackground},{}),u.append(e),u.append(o),i=i+this._scheduleWeekWidth;n._$weekendsContainer.append(u);n._$bodyContent.append(n._$weekendsContainer)},_renderStripLines:function(n){for(var u,h,r=this,f=r.model.ganttRecords.length*this.model.rowHeight,c=n.length,e,o,l=r.model.scheduleWeeks[0],a=this.model.perDayWidth,s=t.buildTag("div.e-stripLines","",{height:f+"px"},{}),i=0;i<c;i++)e=this._getDateType(n[i].day),o=(e-this._getDateType(l))/864e5*a,n[i].lineWidth=n[i].lineWidth>30?30:n[i].lineWidth,u=t.buildTag("div.e-stripline#stripline"+[i]+"","",{left:o+"px",width:"1px",height:f+"px","border-left-width":n[i].lineWidth+"px","border-left-color":n[i].lineColor,"border-left-style":n[i].lineStyle},{}),h=t.buildTag("span.e-striplinespan",n[i].label,{"background-color":n[i].lineColor},{}),n[i].day&&n[i].day.length>0&&(n[i].label&&n[i].label.length>0&&u.append(h),s.append(u));r._$secondaryCanvas.append(s);r._$bodyContent.append(r._$secondaryCanvas)},_getProgressWidth:function(n,t){return n*t/100},_getProgressPercent:function(n,t){return Math.ceil((t/n*100).toFixed(2))},_renderHoliday:function(n){for(var o,i=this,a=this._getDateType(n.day),v=i.model.scheduleWeeks.length,r=0,s=0,h,c,u,f,y=i.model.ganttRecords.length,l,e=0;e<v;e++){if(o=(a-this._getDateType(i.model.scheduleWeeks[e]))/864e5,o<0){s=r*this.model.perDayWidth;break}r==0&&(r=o)}l=y*this.model.rowHeight;h=n.label!=null?n.label.length:0;n.background==null&&(n.background="white");c=t.buildTag("div.e-holiday-label",n.label,{top:i._getHolidayLabelHeight(h)+"px"},{});u=t.buildTag("div.e-secondary-canvas-holiday");f=t.buildTag("div.e-holidays","",{left:s+"px",width:i.model.perDayWidth+"px",height:l+"px","background-color":n.background},{});n.label!=null&&f.append(c);u.append(f);i._$secondaryCanvas.append(u);i._$bodyContent.append(i._$secondaryCanvas)},_getHolidayLabelHeight:function(){var n=this,r=n.model,t=n._getHeight(),i=r.ganttRecords.length*n.model.rowHeight;return t>0?t/2:n._viewportHeight<i?n._viewportHeight/2:i/2},_destroy:function(){var n=this;n.element.empty().removeClass("e-ganttchart-core e-ganttchart"+n.model.cssClass)}});t.GanttChart.contextMenuItem={taskDetails:"Task Details....",add:"Add new task",indent:"Indent",outdent:"Outdent",Delete:"Delete"};jQuery.uaMatch=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}}}(jQuery,Syncfusion),function(n,t){t.Grid=t.Grid||{};t.Grid.gridResize=function(t){this.$headerTable=t.getHeaderTable();this.gridInstance=t;this._colMinWidth=15;this._$visualElement=n();this._currentCell=-1;this._allowStart=!1;this._oldWidth=null;this._orgX=null;this._orgY=null;this._extra=null;this._expand=!1};t.Grid.gridResize.prototype={_mouseHover:function(t){var r,o;if(!this._$visualElement.is(":visible")&&(n(t.target).is(".e-headercelldiv")&&(t.target=t.target.parentNode),r=n(t.target),r.hasClass("e-headercell"))){var e=t.target,u=e.getBoundingClientRect(),i=0,f=0;(t.type="mousemove")?(i=t.clientX,f=t.clientY):(t.type="touchmove")?(i=evt.originalEvent.changedTouches[0].clientX,f=evt.originalEvent.changedTouches[0].clientY):(t.type="MSPointerMove")&&(i=t.originalEvent.clientX,f=t.originalEvent.clientY);o=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.getHeaderContent().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left:this.gridInstance.getHeaderTable().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left;(i>=u.left+document.documentElement.scrollLeft+e.offsetWidth-5||i<=u.left+3)&&i<o&&i>=u.left&&f<=u.top+document.documentElement.scrollTop+t.target.offsetHeight?(r.parent().css("cursor","col-resize"),this._currentCell=this.gridInstance.getHeaderContent().find(".e-headercell").index(e),this._allowStart=!0):(r.parent().css("cursor","pointer"),this._allowStart=!1,this._currentCell=-1)}},_start:function(t,i){var e=this.gridInstance.getHeaderTable().find(".e-columnheader"),u=e.find(".e-headercell"),r,f;(this._currentCell!=-1&&this._currentCell<u.length&&(r=u[this._currentCell]),typeof r!="undefined")&&(f=r.getBoundingClientRect(),this._tableY=f.top+parseInt(navigator.userAgent.indexOf("WebKit")!=-1?document.body.scrollTop:document.documentElement.scrollTop),this._allowStart?(this._$visualElement=n(document.createElement("div")),_height=this.gridInstance.element.find(".e-gridcontent").first().height()+this.gridInstance.element.find(".e-gridheader").height(),this._$visualElement.addClass("e-reSizeColbg").appendTo(this.gridInstance.element).css({height:_height+"px",cursor:"col-resize"}),this._$visualElement.css({left:t,top:this._tableY}),this._oldWidth=r.offsetWidth,this._orgX=t,this._orgY=i,this._extra=t-this._orgX,this._expand=!0):this._currentCell=-1)},_mouseMove:function(n){if(this._expand){var t=0,i=0;(n.type="mousemove")?(t=n.clientX,i=n.clientY):(n.type="touchmove")?(t=evt.originalEvent.changedTouches[0].clientX,i=evt.originalEvent.changedTouches[0].clientY):(n.type="MSPointerMove")&&(t=n.originalEvent.clientX,i=n.originalEvent.clientY);navigator.userAgent.indexOf("WebKit")!=-1&&(t=n.pageX,i=n.pageY);t+=document.documentElement.scrollLeft;n.preventDefault();this._moveVisual(t)}else this._mouseHover(n)},_reSize:function(n){var c=this,i,r,f,o,t;if(this._initialTableWidth=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.getHeaderTable().first().parent().width()+this.gridInstance.getHeaderTable().last().parent().width():this.gridInstance.getHeaderTable().parent().width(),this.gridInstance.model.enableRTL||this._getResizableCell(),r=this.gridInstance.getHeaderTable().find(".e-columnheader"),this._currentCell!=-1&&this._expand){this._expand=!1;var s=r.find(".e-headercell").filter(":visible"),h=s[this._currentCell],e=h.offsetWidth,u=n-this._orgX;parseInt(u)+parseInt(e)>this._colMinWidth&&(u!=0&&r.css("cursor","default"),this._resizeColumnUsingDiff(e,u),i=this.gridInstance.element.find(".e-gridcontent").first(),this.gridInstance.model.allowScrolling&&i.ejScroller("refresh"),f=this.gridInstance.getBrowserDetails(),f.browser=="msie"&&(o=this.gridInstance.getContentTable().width(),t=this.gridInstance._calculateWidth(),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns>0?(this.gridInstance.getHeaderTable().last().width(t-this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width()),this.gridInstance.getContentTable().last().width(t-this.gridInstance.getContent().find(".e-frozencontentdiv").width()),this.gridInstance.model.showSummary&&this.gridInstance.getFooterTable().last().width(t-this.gridInstance.getFooterContent().find(".e-frozenfootertdiv").width())):(this.gridInstance.getHeaderTable().width(t),this.gridInstance.model.showSummary&&this.gridInstance.getFooterTable().width(t)),parseInt(f.version,10)>8&&this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length&&(t>o?(this.gridInstance.getContentTable().width(t),this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",2e3/i.find("table").first().width()+"%")):(this.gridInstance.getContentTable().css("width","100%"),this.gridInstance._groupingAction(),this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",(this.gridInstance.getHeaderTable().find("colgroup").find("col").first().width()/i.find("table").first().width()*100).toFixed(2)+"%"))),this.gridInstance.getHeaderTable().parent().scrollLeft(i.find(".e-content").scrollLeft()-1)))}this._$visualElement.remove();this._expand=!1;this._currentCell=-1;this._allowStart=!1},_getFrozenResizeWidth:function(){for(var t=this.gridInstance.getHeaderTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumn:0),i=0,n=0;n<t.length;n++)t.eq(n).css("display")!="none"&&(i+=parseInt(t[n].style.width.replace("px","")));return i},_diaplayFinder:function(){return n(this).css("display")!="none"},_resizeColumnUsingDiff:function(t,i){var p=this,r=parseInt(i)+parseInt(t),a,v,o,u,s,f,h;if(r>0&&i!=0){r<this._colMinWidth&&(r=this._colMinWidth);var i=r-t,c=this.gridInstance.getHeaderTable().find("colgroup").find("col"),y=c.filter(this._diaplayFinder).eq(this._currentCell),e,l,w=c.slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumns:0);if(this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){if(this._currentCell>=0&&this._currentCell<this.gridInstance.model.scrollSettings.frozenColumns&&this._getFrozenResizeWidth()+i>this.gridInstance.element.find(".e-headercontent").first().width())return;e=this.gridInstance.getContentTable().find("colgroup").find("col").filter(this._diaplayFinder).eq(this._currentCell)}else e=this.gridInstance.getContentTable().find("colgroup").first().find("col").filter(this._diaplayFinder).eq(this._currentCell);if(this.gridInstance.model.showSummary&&(l=this.gridInstance.getFooterTable().find("colgroup").find("col").filter(this._diaplayFinder).eq(this._currentCell),l.outerWidth(r)),y.outerWidth(r),this.gridInstance.model.isEdit&&(a=this.gridInstance.getContentTable().find(".e-editedrow,.e-addedrow").find("table").find("colgroup"),n(a[0].children[this._currentCell-this.gridInstance.model.groupSettings?this.gridInstance.model.groupSettings.groupedColumns.length:0]).width(r)),this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length)for(v=this.gridInstance.getContentTable().find(".e-recordtable"),o=v.find("colgroup"),u=0;u<o.length;u++)n(o[u].children[this._currentCell-this.gridInstance.model.groupSettings.groupedColumns.length]).width(r);if(e.width(r),this.gridInstance._findColumnsWidth(),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){for(s=this.gridInstance.getContentTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings.frozenColumns),f=0,u=0;u<s.length;u++)f+=parseInt(s[u].style.width.replace("px",""));this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(f);h=this.gridInstance.model.enableRTL?"margin-right":"margin-left";this.gridInstance.getContent().find(".e-frozencontentdiv").width(f).next().css(h,f+"px");this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(f).next().css(h,f+"px");this.gridInstance.model.showSummary&&this.gridInstance.getFooterContent().find(".e-frozenfooterdiv").width(f)}this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor","default")}},_mouseUp:function(n){if(this._expand){var t=n.clientX,i=n.clientY;navigator.userAgent.indexOf("WebKit")!=-1&&(t=n.pageX,i=n.pageY);t+=document.documentElement.scrollLeft;this._reSize(t,i)}},_getResizableCell:function(){for(var i,r=this.gridInstance.getHeaderTable().find(".e-columnheader"),t=r.find(".e-headercell").not(".e-hide"),u=navigator.userAgent.indexOf("WebKit")!=-1?document.body.scrollLeft:document.documentElement.scrollLeft,n=0;n<t.length;n++)if(point=t[n].getBoundingClientRect(),i=point.left+u+5,i>this._orgX){this._currentCell=n-1;return}},_moveVisual:function(n){var t=this.gridInstance.getHeaderContent().find("div").first()[0].getBoundingClientRect();t.left+document.documentElement.scrollLeft+t.width<n||n<t.left+document.documentElement.scrollLeft?this._$visualElement.remove():this._currentCell!=-1&&this._$visualElement.css({left:n,top:this._tableY})},_mouseDown:function(t){if(this._allowStart&&n(t.target).closest("tr").css("cursor")=="col-resize"){var i=t.clientX,r=t.clientY;navigator.userAgent.indexOf("WebKit")!=-1&&(i=t.pageX,r=t.pageY);i+=document.documentElement.scrollLeft;t.button!=2&&this._start(i,r);t.preventDefault()}return!1}}}(jQuery,Syncfusion)