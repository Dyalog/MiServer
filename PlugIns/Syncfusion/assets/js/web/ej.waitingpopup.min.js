/*!
*  filename: ej.waitingpopup.min.js
*  version : 12.3
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min"],n):n()})(function(){(function(n,t){t.widget("ejWaitingPopup","ej.WaitingPopup",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-waitingpopup",defaults:{showOnInit:!1,showImage:!0,cssClass:"",text:null,template:null,create:null,destroy:null},dataTypes:{showOnInit:"boolean",showImage:"boolean",cssClass:"string"},show:function(){this._refreshPanel();this.maindiv.css("display","block");this.model.showOnInit=!0},hide:function(){this.maindiv.css("display","none");this.model.showOnInit=!1},refresh:function(){this._refreshPanel()},_setText:function(n){n?this.popupText?this.popupText.html(n):(this._generateTextTag(n),this._setContentPosition()):this.popupText&&(this.popupText.remove(),this.popupText=null)},_showImage:function(n){n?(this.popupImage=t.buildTag("span.e-image"),this.popupText?this.popupImage.insertBefore(this.popupText):this.maindiv.append(this.popupImage)):this.popupImage&&(this.popupImage.remove(),this.popupImage=null)},_setTemplate:function(){var i=this.model.template;typeof i=="string"&&(i=n(i));this.templateObj=typeof i=="object"&&typeof i.css=="function"?i:t.buildTag("div","",{"text-align":"center"}).append(i);this.templateObj.css({visibility:"visible",display:"block"});this.maindiv.append(this.templateObj)},_setTheme:function(n){this.maindiv.removeClass(this.model.cssClass).addClass(n)},_init:function(){this._initialize();this._render()},_setModel:function(n){for(var t in n)switch(t){case"text":this._setText(n[t]);break;case"cssClass ":this._setTheme(n[t]);break;case"showOnInit":this._setVisibility(n[t]);break;case"showImage":this._showImage(n[t]);this._setContentPosition();break;case"template":this.maindiv.empty();n[t]?(this.model.template=n[t],this._setTemplate()):(this.model.template=n[t]=null,this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text));this._setContentPosition()}},_destroy:function(){this.maindiv.remove()},_initialize:function(){this.maindiv=null;this.popupText=null;this.popupImage=null;this.templateObj=null},_render:function(){var i=n("#"+this.element.context.id+"_WaitingPopup").get(0);i&&n(i).remove();this.maindiv=t.buildTag("div.e-waitpopup-pane e-widget "+this.model.cssClass+"#"+this.element[0].id+"_WaitingPopup");this.model.template?this._setTemplate():(this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text));n("body").append(this.maindiv);this._setVisibility(this.model.showOnInit)},_refreshPanel:function(){this.maindiv.width(this.element.outerWidth());this.maindiv.height(this.element.outerHeight());this._setPanelPosition();this._setContentPosition()},_setPanelPosition:function(){var n=this.element.offset();this.maindiv.css({left:Math.ceil(n.left)+"px",top:Math.ceil(n.top)+"px","z-index":this._maxZindex()+1})},_setContentPosition:function(){if(this.model.template==null){var t=0,r=0,i,n=null;i=this.element.outerHeight();this.popupText&&(t=this.popupText.outerHeight());this.popupImage&&(r=this.popupImage.outerHeight());this.popupImage&&(n=Math.ceil((i-(r+t))/2),this.popupImage.css("top",n+"px"));this.popupText&&(n||(n=Math.ceil((i-t)/2)),this.popupText.css("top",n+"px"))}else this.templateObj.css({position:"relative",left:Math.ceil((this.element.outerWidth()-this.templateObj.outerWidth())/2),top:Math.ceil((this.element.outerHeight()-this.templateObj.outerHeight())/2)})},_generateTextTag:function(n){this.popupText=t.buildTag("div.e-text",n);this.maindiv.append(this.popupText)},_setVisibility:function(n){n?this.show():this.hide()},_maxZindex:function(){for(var r=document.getElementsByTagName("div"),t=0,i,n=0;n<r.length-1;n++)i=parseInt(r[n].style.zIndex,10),i>t&&(t=i);return t}})})(jQuery,Syncfusion)})