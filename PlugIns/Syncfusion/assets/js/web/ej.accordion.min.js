/*!
*  filename: ej.accordion.min.js
*  version : 12.3
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min"],n):n()})(function(){(function(n,t){t.widget("ejAccordion","ej.Accordion",{_rootCSS:"e-acrdn",element:null,model:null,validTags:["div","span"],_setFirst:!1,defaults:{collapsible:!1,ajaxSettings:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},events:"click",customIcon:{header:"e-collaps",selectedHeader:"e-expand"},heightAdjustMode:"content",enableAnimation:!0,selectedItemIndex:0,cssClass:"",enableRTL:!1,showRoundedCorner:!1,allowKeyboardNavigation:!0,enableMultipleOpen:!1,expandSpeed:300,collapseSpeed:300,selectedItems:[0],disabledItems:[],enabledItems:[],enablePersistence:!1,enabled:!0,ajaxLoad:null,ajaxBeforeLoad:null,click:null,beforeActive:null,ajaxSuccess:null,ajaxError:null,create:null,destroy:null},dataTypes:{cssClass:"string",collapsible:"boolean",enabled:"boolean",events:"string",heightAdjustMode:"enum",ajaxSettings:"data",customIcon:"data",selectedItems:"data",disabledItems:"data",enableAnimation:"boolean"},_setModel:function(n){var i,r,u;if(!this.model.enabled&&t.isNullOrUndefined(n.enabled))return!1;for(i in n)switch(i){case"events":this._off(this._headers,this.model.events);this._on(this._headers,n[i],this._headerEventHandler);break;case"disabledItems":this.disableItems(n[i]);break;case"enabledItems":this.enableItems(n[i]);break;case"enabled":this._enabledAction(n[i]);break;case"selectedItemIndex":this._activeTab(n[i]);break;case"heightAdjustMode ":this._setHeightStyle(n[i]);break;case"cssClass":this._changeSkin(n[i]);break;case"showRoundedCorner":this._roundedCorner(n[i]);break;case"customIcon":r=this.model.customIcon;u=n[i];this._headers.find("span."+r.header).removeClass(r.header).addClass(u.header);this._headers.find("span."+r.selectedHeader).removeClass(r.selectedHeader).addClass(u.selectedHeader);break;case"allowKeyboardNavigation":n[i]?(this._off(this.element,"keydown"),this._on(this.element,"keydown",this._keyPress)):this._off(this.element,"keydown");break;case"enableRTL":n[i]?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl");break;case"enableAnimation":this.model.enableAnimation=n[i];break;case"selectedItems":this._selectedItemsAction(n[i]);break;case"expandSpeed":this.model.expandSpeed=parseInt(this.model.expandSpeed);case"collapseSpeed":this.model.collapseSpeed=parseInt(this.model.collapseSpeed)}},_destroy:function(){this._removeBaseClass();this.element.children(".e-disable").removeClass("e-disable");this.element.removeClass("e-acrdn");this._headers.removeClass("e-active  e-state-disabled");this._contentPanels.removeClass("e-content-active e-disable");n(this._headers.find(".e-icon")).remove()},_init:function(){this._renderControl()},_renderControl:function(){this._headers=this.element.find("> :even");this.element.attr("tabindex",0).attr("role","tablist");this._contentPanels=this._headers.next();this._nagativeIndexCheck(this.model.selectedItemIndex);this._addBaseClass();this._setHeightStyle(this.model.heightAdjustMode);this._renderHeaderIcon();this._wireEvents();this._roundedCorner(this.model.showRoundedCorner);this._selectedItemsAction(this.model.selectedItems);this._enabledAction(this.model.enabled);this._setEnabledItems()},_setEnabledItems:function(){for(var t=0;t<this.getItemsCount();t++)n.inArray(t,this.model.disabledItems)<0&&n.inArray(t,this.model.enabledItems)<0&&this.model.enabledItems.push(t)},_changeSkin:function(n){this.model.cssClass!=n&&this.element.removeClass(this.model.cssClass).addClass(n)},_selectedItemsAction:function(n){if(this.model.enableMultipleOpen)for(var t=0;t<n.length;t++)this._activeTab(n[t],!0);else this.collapseALL&&this.model.collapsible||this._activeTab(this.model.selectedItemIndex,!0)},_enabledAction:function(n){n?this.element.removeClass("e-disable"):this.element.addClass("e-disable")},_addBaseClass:function(){this.element.addClass(this.model.cssClass+" e-widget");this.model.enableRTL&&this.element.addClass("e-rtl");this._headers.addClass(" e-select").attr("role","tab").attr("tabindex",0);this._contentPanels.addClass("e-content").attr("role","tabpanel").attr("aria-hidden",!0).hide();n(this._contentPanels[this.model.selectedItemIndex]).show()},_removeBaseClass:function(){this._headers.removeClass(" e-select");this._contentPanels.removeClass("e-content").show()},_roundedCorner:function(n){n?(this._headers.addClass("e-corner-all"),this.element.find(".e-active").removeClass("e-corner-all").addClass("e-corner-top"),this.element.find(".e-acrdn-content-active").addClass("e-corner-bottom")):this._headers.hasClass("e-corner-all")&&(this._headers.removeClass("e-corner-all"),this.element.find(".e-active").removeClass("e-corner-top"),this.element.find(".e-acrdn-content-active").addClass("e-corner-bottom"))},_nagativeIndexCheck:function(n){var i,t;if(n<0&&this.model.collapsible)for(this.collapseALL=!0,i=this.getItemsCount(),t=0;t<i;t++)this._hideTab(t);else(n<0||n>=this._headers.length)&&(this.model.selectedItemIndex=0)},_activeTab:function(t,i){var r,u,f;if(n.inArray(t,this.model.disabledItems)<0){if(r={activeIndex:t},!0===this._trigger("beforeClick",r))return!1;this.model.enableMultipleOpen||this._hideTab(this.model.selectedItemIndex);this.model.selectedItemIndex=t;u=this.model.customIcon;this._headers.attr("tabindex",0).removeAttr("aria-expanded");this._activeHeader=this._headers.eq(t).addClass("e-active ").attr("aria-selected",!0).attr("tabindex",0).attr("aria-expanded",!0);this._activeHeader.find(".e-icon").removeClass(u.header).addClass(u.selectedHeader);this._addSelectedItems(t);this._ajaxLoad();this._roundedCorner(this.model.showRoundedCorner);r={activeHeader:this._activeHeader,activeIndex:this.model.selectedItemIndex};f=this;this._activeContent=this._activeHeader.next().addClass("e-acrdn-content-active").removeAttr("aria-hidden",!1).slideDown(this.model.enableAnimation?this.model.expandSpeed:0,"easeOutQuad",function(){i||f._trigger("click",r)})}},_hideTab:function(n){var i=this.model.customIcon,t,r;n>=0&&(t={inActiveIndex:n},this._trigger("beforeClick",t),this._activeHeader=this._headers.eq(n).removeClass("e-active ").removeAttr("aria-selected").attr("tabindex",0).attr("aria-expanded",!1),this._activeHeader.find(".e-icon").removeClass(i.selectedHeader).addClass(i.header),t={inActiveHeader:this._activeHeader,inActiveIndex:n},r=this,this._activeHeader.next().removeClass("e-acrdn-content-active").attr("aria-hidden",!0).slideUp(this.model.enableAnimation?this.model.collapseSpeed:0,"easeOutQuad",function(){r._trigger("click",t)}),this._deleteSelectedItems(n))},_renderHeaderIcon:function(){var n,i;this._headers.find(".e-icon").length<=0&&(n=this.model.customIcon,n&&(i=t.buildTag("span.e-icon "+n.header).prependTo(this._headers),this.collapseALL&&this.model.collapsible||this._headers.eq(this.model.selectedItemIndex).find(".e-icon").removeClass(n.header).addClass(n.selectedHeader)))},_ajaxLoad:function(){var t=this._activeHeader.find("a[href]"),r,i;t.length>0&&(r=n(this._contentPanels[this.model.selectedItemIndex]),i=n(t).attr("href"),i&&i!=="#"&&this._sendAjaxOptions(r,t[0]))},_sendAjaxOptions:function(t,i){if(!0===this._trigger("ajaxBeforeLoad",{url:i}))return!1;t.addClass("e-load");var r=this,u=n(i).html(),f=i.href.replace("#",""),e={type:this.model.ajaxSettings.type,cache:this.model.ajaxSettings.cache,url:f,data:this.model.ajaxSettings.data,dataType:this.model.ajaxSettings.dataType,contentType:this.model.ajaxSettings.contentType,async:this.model.ajaxSettings.async,success:function(n){try{r._ajaxSuccessHandler(n,t,i,u)}catch(f){}},error:function(){try{r._ajaxErrorHandler(data,i,r.model.selectedItemIndex,u)}catch(n){}}};this._sendAjaxRequest(e)},_sendAjaxRequest:function(t){n.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(t,i,r,u){u!=null&&n(r).html(u);i.removeClass("e-load");i.html(t).addClass("e-acrdn-loaded");var f={data:t,url:r,content:i};this._trigger("ajaxSuccess",f);this._trigger("ajaxLoad",{url:r})},_ajaxErrorHandler:function(n,t){this._trigger("ajaxError",{data:n,url:t});this._trigger("ajaxLoad",{url:t})},_setHeightStyle:function(i){var u=this,r,f;t.Accordion.HeightAdjustMode.Fill==i?(r=this._getDimension(n(this.element).parent(),"height"),n(this.element).parent().css({overflow:"auto"}),u._headers.each(function(){r-=u._getDimension(n(this),"outerHeight")}),f=0,u._headers.next().each(function(){f=Math.max(f,u._getDimension(n(this),"innerHeight")-u._getDimension(n(this),"height"))}).height(r-f).css({overflow:"auto"})):t.Accordion.HeightAdjustMode.Auto==i&&(r=0,u._headers.next().each(function(){r=Math.max(r,u._getDimension(n(this),"outerHeight"))}).height(r),this.maxAutoHeight=r)},_getDimension:function(t,i){var u,f=n(t).parents().andSelf().filter(":hidden"),r={visibility:"hidden",display:"block"},e=[];return f.each(function(){var t={};for(var n in r)t[n]=this.style[n],this.style[n]=r[n];e.push(t)}),u=/(outer)/g.test(i)?n(t)[i](!0):n(t)[i](),f.each(function(n){var i=e[n];for(var t in r)this.style[t]=i[t]}),u},_headerEventHandler:function(t){if(this.model.enabled){t.preventDefault();var r=n(t.currentTarget),i=this._headers.index(r);this.model.enableMultipleOpen&&this._headers.eq(i).hasClass("e-active")?this._hideTab(i):this.model.selectedItemIndex==i&&this.model.collapsible?(this._hideTab(this.model.selectedItemIndex),this.model.selectedItemIndex=-1):this._headers.eq(i).hasClass("e-active")||this._activeTab(i)}},_addSelectedItems:function(t){n.inArray(t,this.model.selectedItems)<0&&this.model.selectedItems.push(t)},_deleteSelectedItems:function(t){n.inArray(t,this.model.selectedItems)>-1&&(position=n.inArray(t,this.model.selectedItems),this.model.selectedItems.splice(position,1))},_deleteDisabledItems:function(t){n.inArray(t,this.model.disabledItems)>-1&&(position=n.inArray(t,this.model.disabledItems),this.model.disabledItems.splice(position,1))},_addEnabledItems:function(t){n.inArray(t,this.model.enabledItems)<0&&this.model.enabledItems.push(t)},_deleteEnabledItems:function(t){n.inArray(t,this.model.enabledItems)>-1&&(position=n.inArray(t,this.model.enabledItems),this.model.enabledItems.splice(position,1))},_keyPress:function(i){if(this.model.enabled){var r,u,f=n(i.target);if((f.hasClass("e-select")||f.hasClass("e-acrdn"))&&(r=this.model.selectedItemIndex),code=i.keyCode?i.keyCode:i.which?i.which:i.charCode,f.hasClass("e-select")||f.hasClass("e-acrdn"))switch(code){case 39:case 40:i.preventDefault();r=r==this.getItemsCount()-1?0:r+1;this._activeTab(r);u=n(this._headers[r]);break;case 38:case 37:i.preventDefault();r=r==0?this.getItemsCount()-1:r-1;this._activeTab(r);u=n(this._headers[r]);break;case 35:i.preventDefault();u=n(this._headers[this.getItemsCount()-1]);this._activeTab(this.getItemsCount()-1);break;case 36:i.preventDefault();u=n(this._headers[0]);this._activeTab(0);break;case 32:case 13:i.preventDefault();n(this._headers[r]).hasClass("e-active")&&(this.model.enableMultipleOpen||this.model.collapsible)?this._hideTab(r):this._activeTab(r)}else if(i.ctrlKey&&!f.hasClass("e-acrdn"))switch(code){case 38:i.preventDefault();r=this._contentPanels.index(f.parent(".e-content"));u=n(this._headers[r]);this._activeTab(r);break;case 33:i.preventDefault();u=n(this._headers[0]);this._activeTab(0);break;case 34:i.preventDefault();u=n(this._headers[this.getItemsCount()-1]);this._activeTab(this.getItemsCount()-1)}t.isNullOrUndefined(u)||(u.addClass("e-focus"),u.focus())}},_wireEvents:function(){this._on(this._headers,this.model.events,this._headerEventHandler);this.model.allowKeyboardNavigation&&this._on(this.element,"keydown",this._keyPress)},_unWireEvents:function(){this._off(this._headers,this.model.events);this.model.allowKeyboardNavigation&&this._off(this.element,"keydown")},enableItems:function(t){if(!this.model.enabled)return!1;if(n.isArray(t))for(var i=0;i<t.length;i++)n(this._headers[t[i]]).removeClass("e-disable"),n(this._contentPanels[t[i]]).removeClass("e-disable"),this._on(n(this._headers[t[i]]),this.model.events,this._headerEventHandler),this.model.enabledItems.push(t[i]),this._deleteDisabledItems(t[i]);else n(this._headers[t]).removeClass("e-disable"),n(this._contentPanels[t]).removeClass("e-disable"),this._on(n(this._headers[t]),this.model.events,this._headerEventHandler),this.model.enabledItems.push(t[i]),this._deleteDisabledItems(t)},disableItems:function(t){if(!this.model.enabled)return!1;if(n.isArray(t))for(var i=0;i<t.length;i++)n(this._headers[t[i]]).addClass("e-disable"),n(this._contentPanels[t[i]]).addClass("e-disable"),n(this._headers[t[i]]).unbind(this.model.events),this.model.disabledItems.push(t[i]),this._deleteEnabledItems(t[i]);else n(this._headers[t]).addClass("e-disable"),n(this._contentPanels[t]).addClass("e-disable"),n(this._headers[t]).unbind(this.model.events),this.model.disabledItems.push(t),this._deleteEnabledItems(t[i])},disable:function(){for(var t=0;t<this._headers.length;t++)n(this._headers[t]).addClass("e-disable"),n(this._contentPanels[t]).addClass("e-disable"),this.model.disabledItems.push(t);this.model.enabledItems=[];this._unWireEvents()},enable:function(){for(var t=0;t<this._headers.length;t++)n(this._headers[t]).removeClass("e-disable"),n(this._contentPanels[t]).removeClass("e-disable");this.model.disabledItems=[];this._setEnabledItems();this._unWireEvents();this._wireEvents()},_selected:function(n){if(!this.model.enabled)return!1;n!=null&&this.model.selectedItemIndex!=n&&this._activeTab(n)},show:function(){if(!this.model.enabled)return!1;this.element.css("visibility","visible")},hide:function(){if(!this.model.enabled)return!1;this.element.css("visibility","hidden")},getItemsCount:function(){if(this._headers)return this._headers.length}});t.Accordion.HeightAdjustMode={Content:"content",Auto:"auto",Fill:"fill"}})(jQuery,Syncfusion)})