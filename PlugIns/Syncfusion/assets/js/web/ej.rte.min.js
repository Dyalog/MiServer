/*!
*  filename: ej.rte.min.js
*  version : 13.2.0.29
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./../common/ej.scroller.min","./../common/ej.draggable.min","./ej.button.min","./ej.togglebutton.min","./ej.splitbutton.min","./ej.checkbox.min","./ej.radiobutton.min","./ej.dropdownlist.min","./ej.dialog.min","./ej.toolbar.min","./ej.editor.min","./ej.menu.min","./ej.tab.min","./ej.slider.min","./ej.treeview.min","./ej.uploadbox.min","./ej.splitter.min","./ej.colorpicker.min","./ej.slider.min","./ej.fileexplorer.min","./ej.grid.min"],n):n()})(function(){(function(n,t,i){t.widget("ejRTE","ej.RTE",{element:null,model:null,_rootCSS:"e-rte",validTags:["textarea"],_setFirst:!1,defaults:{allowEditing:!0,isResponsive:!1,allowKeyboardNavigation:!0,cssClass:"",height:"370",width:"786",enabled:!0,htmlAttributes:{},enableXHTML:!1,maxLength:7e3,minWidth:400,maxWidth:null,minHeight:280,maxHeight:null,showToolbar:!0,showFooter:!1,showHtmlSource:!0,showWordCount:!0,showHtmlTagInfo:!0,showClearAll:!0,iframeAttribute:"color:#5C5C5C",showClearFormat:!0,showFontOption:!0,showDimensions:!1,showRoundedCorner:!1,locale:"en-US",name:"",tools:{formatStyle:["format"],style:["bold","italic","underline","strikethrough"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],lists:["unorderedList","orderedList"],indenting:["outdent","indent"],doAction:["undo","redo"],links:["createLink"],images:["image","video"],tables:["createTable","addRowAbove","addRowBelow","addColumnLeft","addColumnRight","deleteRow","deleteColumn","deleteTable"]},toolsList:["formatStyle","font","style","scripts","alignment","lists","indenting","copyPaste","doAction","clear","links","images","tables","casing","customTool"],colorCode:["000000","FFFFFF","C4C4C4","ADADAD","595959","262626","4f81bd","dbe5f1","b8cce4","95b3d7","366092","244061","c0504d","f2dcdb","e5b9b7","d99694","953734","632423","9bbb59","ebf1dd","d7e3bc","c3d69b","76923c","4f6128","8064a2","e5e0ec","ccc1d9","b2a2c7","5f497a","3f3151","f79646","fdeada","fbd5b5","fac08f","e36c09","974806"],format:[{text:"Paragraph",value:"<p>",spriteCssClass:"e-paragraph"},{text:"Quotation",value:"<blockquote>",spriteCssClass:"e-quotation"},{text:"Heading 1",value:"<h1>",spriteCssClass:"e-h1"},{text:"Heading 2",value:"<h2>",spriteCssClass:"e-h2"},{text:"Heading 3",value:"<h3>",spriteCssClass:"e-h3"},{text:"Heading 4",value:"<h4>",spriteCssClass:"e-h4"},{text:"Heading 5",value:"<h5>",spriteCssClass:"e-h5"},{text:"Heading 6",value:"<h6>",spriteCssClass:"e-h6"}],fontName:[{text:"Segoe UI",value:"Segoe UI"},{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"Courier New,Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"Lucida Console,Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"Times New Roman,Times,serif"},{text:"Trebuchet MS",value:"Trebuchet MS,Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1",value:"1"},{text:"2 (10pt)",value:"2"},{text:"3 (12pt)",value:"3"},{text:"4 (14pt)",value:"4"},{text:"5 (18pt)",value:"5"},{text:"6 (24pt)",value:"6"},{text:"7 (36pt)",value:"7"}],tableRows:7,tableColumns:9,colorPaletteRows:6,colorPaletteColumns:6,showCustomTable:!0,value:null,undoStackLimit:50,enableResize:!0,enablePersistence:!1,enableRTL:!1,imageBrowser:{filePath:"",extensionAllow:"*.png,*.gif,*.jpg,*.jpeg",ajaxAction:"",uploadAction:"",ajaxSettings:""},fileBrowser:{filePath:"",extensionAllow:"*.doc,*.docx,*.pdf,*.txt",ajaxAction:"",uploadAction:""},change:null,execute:null,keydown:null,keyup:null,create:null,destroy:null,preRender:null},dataTypes:{iframeAttribute:"string",cssClass:"string",name:"string",enabled:"boolean",enableXHTML:"boolean",isResponsive:"boolean",enablePersistence:"boolean",showRoundedCorner:"boolean",toolsList:"array",colorCode:"array",format:"data",fontName:"data",fontSize:"data",htmlAttributes:"data",tools:{formatStyle:"array",font:"array",style:"array",scripts:"array",alignment:"array",lists:"array",indenting:"array",copyPaste:"array",doAction:"array",clear:"array",links:"array",images:"array",tables:"array",casing:"array",customTool:"array"}},observables:["value"],value:t.util.valueFunction("value"),_setModel:function(i){var r,f,e,s,c,h,u,o;for(r in i){switch(r){case"allowEditing":this._enableEdit(i[r]);break;case"showToolbar":i[r]?t.isNullOrUndefined(this._rteToolbar)?this._renderToolBar():this._rteToolbar.show():this._rteToolbar.hide();break;case"showFooter":this.model.showFooter=i[r];i[r]?t.isNullOrUndefined(this._rteFooter)?this._renderFooter():this._rteFooter.show():this._rteFooter.hide();break;case"isResponsive":this.model.isResponsive=i[r];this._renderToolBarList();f=n(this._rteIframe).outerHeight();e=n(this._rteToolbar).outerHeight();n(this._rteWapper).height(f+e);t.isNullOrUndefined(n(this._rteFooter))||(s=n(this._rteFooter).outerHeight(),n(this._rteWapper).height(f+s+e));break;case"enabled":this._disabled(i[r]);break;case"height":this._rteWapper.height(i[r]);break;case"width":this._rteWapper.css("width",i[r]);break;case"cssClass":this._changeSkin(i[r]);break;case"showHtmlSource":this._footerElement("div.e-rte-source",i[r]);break;case"showHtmlTagInfo":this._footerElement("div.e-rte-htmltaginfo",i[r]);break;case"showWordCount":this._footerElement("div.e-rte-wordcount",i[r]);break;case"showClearAll":this._footerElement("div.clearAll",i[r]);break;case"showClearFormat":this._footerElement("div.clearFormat",i[r]);break;case"enableResize":this._footerElement("div.e-rte-resize",i[r]);break;case"fontName":this._fontStyleDDL.ejDropDownList({dataSource:i[r]});break;case"fontSize":this._fontSizeDDL.ejDropDownList({dataSource:i[r]});break;case"format":this._formatDDL.ejDropDownList({dataSource:i[r]});break;case"value":this._getDocument().body.innerHTML=t.util.getVal(i[r]);c={text:this._getText(),htmlText:this.getHtml()};this._onChange();break;case"showDimensions":i[r]?(this._imgDialog.find("div.e-rte-imgdimensions").show(),this._imgDialog.find("div.e-rte-videoDimensions").show()):(this._imgDialog.find("div.e-rte-imgdimensions").hide(),this._imgDialog.find("div.e-rte-videoDimensions").hide());break;case"showFontOption":i[r]?this._rteWapper.find("ul.e-rte-fontgroup").show():this._rteWapper.find("ul.e-rte-fontgroup").hide();break;case"locale":this.model.locale=i[r];h=this.model;this.element.ejRTE("destroy").ejRTE(h);break;case"tableRows":this.model.tableRows=i[r];u=this._createTable.find("div.e-rte-table").html("");this._drawTable(u);break;case"iframeAttribute":this._updateIframeSkin(i[r]);break;case"tableColumns":this.model.tableColumns=i[r];u=this._createTable.find("div.e-rte-table").html("");this._drawTable(u);break;case"showCustomTable":o=this._createTable.find("div.customtable-group");i[r]?t.isNullOrUndefined(this._customTableDialog)?this._createCustomTable():o.show():o.hide();break;case"colorPaletteRows":this.model.colorPaletteRows=i[r];this._updateColorPalette();break;case"colorPaletteColumns":this.model.colorPaletteColumns=i[r];this._updateColorPalette();break;case"colorCode":this.model.colorCode=i[r];this._updateColorPalette();break;case"name":this.model.name=i[r];this._checkNameAttr();break;case"enableRTL":this._enableRTL(i[r]);break;case"htmlAttributes":this._addAttr(i[r]);break;case"showRoundedCorner":this._roundedCorner(i[r])}r!="locale"&&this._setIframeHeight()}},_init:function(){t.isNullOrUndefined(this.element)||this.element[0].type!="textarea"||(this.element.hide(),this._initialize(),this._render(),this.model.allowEditing&&this._wireEvents(),this._updateIframeSkin(this.model.iframeAttribute),this.model.enabled==!1&&this._disabled(this.model.enabled),this._addAttr(this.model.htmlAttributes))},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i._rteWapper.addClass(n):t=="required"?i.element.attr(t,n):t=="disabled"&&n=="disabled"?i.disable():t=="readOnly"&&n=="readOnly"?i._enableEdit(!1):i._rteWapper.attr(t,n)})},_disabled:function(n){n!=!0?this.disable():this.enable()},_destroy:function(){this.element.insertBefore(this._rteWapper);t.isNullOrUndefined(this._formatDDL)||this._formatDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontStyleDDL)||this._fontStyleDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontSizeDDL)||this._fontSizeDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontColorSplit)||this._fontColorSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._bgColorSplit)||this._bgColorSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._customTableDialog)||(t.isNullOrUndefined(this._customTableDialog.find(".e-rte-ddlAlignment"))||this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList("destroy"),t.isNullOrUndefined(this._customTableDialog.find(".e-rte-txtBorder"))||this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList("destroy"));t.isNullOrUndefined(this._linkDialog)||n(this._linkDialog).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._imgDialog)||(this._imgDialog.find(".e-rte-imgBorderStyle").ejDropDownList("destroy"),n(this._imgDialog).closest("div.e-rte.e-dialog-wrap").remove());t.isNullOrUndefined(this._videoDialog)||n(this._videoDialog).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._createTable)||n(this._createTable).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._sourceDialog)||n(this._sourceDialog).closest("div.e-dialog-wrap").remove();t.isNullOrUndefined(this._customTableDialog)||n(this._customTableDialog).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._alertWindow)||n(this._alertWindow).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._eTblDialog)||(this._eTblDialog.find(".e-rte-dropdown").ejDropDownList("destroy"),n(this._eTblDialog).closest("div.e-rte.e-dialog-wrap").remove());t.isNullOrUndefined(this._explorerObj)||this._explorerObj.destroy();t.isNullOrUndefined(this._imgPicker)||this._imgPicker.destroy();t.isNullOrUndefined(this._fileDialog)||n(this._fileDialog).closest("div.e-rte.e-dialog-wrap").remove();this._rteWapper.remove();this.element.show();this._createTable=null},_initialize:function(){this._toolsList=this.model.toolsList;this._rteId=this.element[0].id;this._rteId=this._rteId?this._rteId:"";this._backupArray=[];this._undoRedoPosition=0;this._fontColor="#000000";this._bgColor="#ffffff";this._imgWidth=0;this._imgHeight=0;this._videoWidth=0;this._videoHeight=0;this._keypressFlag=!0;this._styleItems=t.isNullOrUndefined(this.model.tools.style)?[]:this.model.tools.style;this._alignItems=t.isNullOrUndefined(this.model.tools.alignment)?[]:this.model.tools.alignment;this._listItems=t.isNullOrUndefined(this.model.tools.lists)?[]:this.model.tools.lists;this._scriptsItems=t.isNullOrUndefined(this.model.tools.scripts)?[]:this.model.tools.scripts},_render:function(){this._renderWrapper();this._checkNameAttr();this.model.showToolbar&&this._renderToolBar();this._trigger("preRender",this.element);this._renderEditArea();this.model.showFooter&&this._renderFooter();this._setIframeHeight();this._renderAlertDialog();this._roundedCorner(this.model.showRoundedCorner)},_checkNameAttr:function(){this.model.name?this.element.attr({name:this.model.name}):this.element.attr({name:this.element[0].id})},_enableEdit:function(n){this.model.allowEditing=n;n?(this._wireEvents(),this.model.showToolbar&&this._toolBarItems.ejToolbar("option","click",this._toolBarClick),this._rteIframe.contents().find("body").attr("contenteditable",!0)):(this._unwireEvents(),this.model.showToolbar&&this._toolBarItems.ejToolbar("option","click",null),this._rteIframe.contents().find("body").attr("contenteditable",!1))},_changeSkin:function(n){this._rteWapper.removeClass(this.model.cssClass).addClass(n);this._subControlsSetModel("cssClass",n)},_updateIframeSkin:function(n){try{var t=this._rteIframe.contents().find("body");this.model.enableRTL===!0?(t.attr("style",n),this._enableRTL(this.model.enableRTL)):t.attr("style",n)}catch(i){return!1}},_renderWrapper:function(){this._rteWapper=t.buildTag("div.e-rte e-rte-wrapper e-widget e-box "+this.model.cssClass+"#"+this._rteId+"_wrapper","",{},{role:"presentation"}).insertBefore(this.element);this._rteWapper.css("height",this.model.height).css("width",this.model.width).css("min-height",this.model.minHeight).css("min-width",this.model.minWidth).css("max-height",this.model.maxHeight).css("max-width",this.model.maxWidth);this._rteWapper.append(this.element.hide())},_renderToolBar:function(){this._rteToolbar=t.buildTag("div.e-rte-toolbar #"+this._rteId+"_tools").insertAfter(this.element);this._crateToolbarTemplate();this._initToolBarItems();this._renderToolBarList();this._renderToolBarItems();t.isNullOrUndefined(this._explorerObj)||this._rteToolbar.find("li.e-rteItem-image").length>0&&this._explorerObj.setModel({showFooter:!1,showTreeview:!1});t.isNullOrUndefined(this._fileBrowserObj)||this._rteToolbar.find("li.e-rteItem-fileBrowser").length>0&&this._fileBrowserObj.setModel({showFooter:!1,showTreeview:!1});t.browserInfo().name==="msie"&&t.browserInfo().version==="8.0"&&this._toolBarObj.disableItemByID(this._rteId+"video")},_renderToolBarList:function(){var n={};n.click=this.model.allowEditing?this._toolBarClick:null;n.cssClass=this.model.cssClass;n.enableRTL=this.model.enableRTL;n.enableSeparator=this.model.isResponsive?!0:!1;n.isResponsive=this.model.isResponsive;n.height=n.isResponsive?"36px":"auto";n.showRoundedCorner=this.model.showRoundedCorner;this._toolBarItems.ejToolbar(n);this._toolBarObj=this._toolBarItems.ejToolbar("instance")},_crateToolbarTemplate:function(){var i,r,u;this._toolBarItems=t.buildTag("div#"+this._rteId+"_toolbar").appendTo(this._rteToolbar).height(30);for(i in this._toolsList)i=this._toolsList[i],t.isNullOrUndefined(this.model.tools[i])||(i=="customTool"?t.isNullOrUndefined(this.model.tools[i])||this._customTools(this.model.tools[i]):this.model.tools[i].length>0&&this._createToolsItems(this.model.tools[i],i));this.model.fileBrowser.filePath!=""&&(r=t.buildTag("ul#"+this._rteId+"-file-exporer"),u=n("<li id='"+this._rteId+"fileBrowser' class='e-rte-explorer e-rteItem-fileBrowser' title='"+this._getLocalizedLabels("fileBrowser")+"' ><div class='e-rte-toolbar-icon e-fileBrowser' unselectable = 'on'><\/div><\/li>"),u.appendTo(r),r.appendTo(this._toolBarItems))},_createToolsItems:function(i,r){var f=t.buildTag("ul#"+(this._rteId+r)),e,u;for(r=="font"&&f.addClass("e-rte-fontgroup"),r=="formatStyle"&&f.addClass("e-rte-format"),u=0;u<i.length;u++)e=n("<li id='"+(this._rteId+i[u].replace(/ /g,""))+"' class='e-rteItem-"+i[u]+"' ><div class='e-rte-toolbar-icon "+i[u]+"' unselectable = 'on'><\/div><\/li>"),i[u]==="video"&&t.browserInfo().name==="msie"&&t.browserInfo().version==="8.0"?e.attr("title",this._getLocalizedLabels("html5Support")):e.attr("title",this._getLocalizedLabels(i[u].replace(/ /g,""))),e.appendTo(f);f.appendTo(this._toolBarItems);r!="font"||this.model.showFontOption||f.hide()},_customTools:function(i){for(var e,f,u,r=0;r<i.length;r++)e=t.buildTag("ul"),f=n("<li id='"+i[r].name+"' title='"+i[r].tooltip+"' ><div class='"+(t.isNullOrUndefined(i[r].css)?"":i[r].css)+"'>"+i[r].name+"<\/div><\/li>"),u=i[r].action,typeof u=="string"&&(u=t.util.getObject(u,window)),t.isNullOrUndefined(i[r].action)||this._on(f,"click",u),n(i[r].template).appendTo(f.find("div")),f.appendTo(e),e.appendTo(this._toolBarItems)},_initToolBarItems:function(){this._rteToolbar.find("li.e-rteItem-format").length>0&&this._renderFormat();this._rteToolbar.find("li.e-rteItem-createLink").length>0&&this._renderLinkDialog();this._rteToolbar.find("li.e-rteItem-video").length>0&&this._renderVideoDialog();this._rteToolbar.find("li.e-rteItem-image").length>0&&this._renderImageDialog();this._rteToolbar.find("li.e-rteItem-createTable").length>0&&this._renderTableDialog();this._rteToolbar.find("li.e-rteItem-fontName").length>0&&this._renderFontStyle();this._rteToolbar.find("li.e-rteItem-fontSize").length>0&&this._renderFontSize();this._rteToolbar.find("li.e-rteItem-fontColor").length>0&&this._renderFontColor();this._rteToolbar.find("li.e-rteItem-backgroundColor").length>0&&this._renderBGColor();this._rteToolbar.find("li.e-rteItem-createTable").length>0&&this._renderEditTableDialog();this._rteToolbar.find("li.e-rteItem-fileBrowser").length>0&&this._renderFileBrowserDialog();this.model.showClearAll||this._rteToolbar.find("li.e-rteItem-clearAll").hide()},_renderToolBarItems:function(){this._toolBarObj.disableItemByID(this._rteId+"undo");this._toolBarObj.disableItemByID(this._rteId+"redo");this.model.enableRTL?this._toolBarObj.selectItemByID(this._rteId+"justifyRight"):this._toolBarObj.selectItemByID(this._rteId+"justifyLeft");var n=this._rteToolbar.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable");this.model.isResponsive&&n.length==0?this._toolBarObj._liTemplte.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable").hide():this._rteToolbar.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable").hide()},_renderEditArea:function(){this._rteEditor=t.buildTag("div.editarea #"+this._rteId+"_editor").appendTo(this._rteWapper);this._rteIframe=t.buildTag("iframe.content-iframe #"+this._rteId+"_Iframe","",{},{frameborder:"0"}).appendTo(this._rteEditor);this._setIFrames();navigator.userAgent.match(/iPad/i)!=null&&this._rteEditor.addClass("e-ipadscroll")},_xhtmlTagValidation:function(){var e,o,n,f,r,t;if(this.model.value!=null){if(this.model.value=this.model.value.replace(/\r/gi," ").replace(/\n/gi,"<br/> ").replace(/\r\n/gi," ").replace(/( )+/gi," ").replace(/&nbsp;/gi," ").replace(/&bull;/gi,"*").replace(/&ltquo;/gi,"<").replace(/&rtquo;/gi,">").replace(/&trze;/gi,"(tm)").replace(/&copy;/gi,"(c)").replace(/&reg;/gi,"(r)"),this.model.value.indexOf("<body>")!=-1&&(e=this.model.value.indexOf("<body>"),o=this.model.value.slice(0,e+6),this.model.value=this.model.value.replace(o,""),this.model.value=this.model.value.replace("<\/body><\/html>","")),n=this.model.value,n=n.replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>"),n=this._imageXhtml(n),n=this._styleXhtml(n),n=this._startXhtml(n),n.indexOf("alt=")!=-1){for(var a=/alt=\"(.*?)\"/ig,u=[],s,h=0;(s=a.exec(n))!=null;)u[h]=s[0],h++;for(t=0;t<u.length;t++)n=n.replace(u[t],'alt=""')}if(n=this._fontXhtml(n),n.indexOf("ol")!=-1){for(var v=/<ol(.*)<\/ol>/ig,c,l=0,i=[];(c=v.exec(n))!==null;)i[l]=c[0].toString(),l++;for(f=[],r=0;r<i.length;r++)f[r]=i[r];for(t=0;t<i.length;t++)i[t]=i[t].replace(/<br\/>/gi,"");for(t=0;t<i.length;t++)n=n.replace(f[t],i[t])}n=n.replace(/<o:p>/gi,"").replace(/<\/o:p>/gi,"");this.model.value=n}},_setIFrames:function(){var i=null,r,u;this.value()!=null&&this.value()!=""&&(i=this.value().replace(/'/g,'"'));i==null&&this.value(n.trim(this.element[0].value));this.model.enableXHTML&&this._xhtmlTagValidation();r=t.browserInfo().name=="msie"&&parseInt(t.browserInfo().version)==8;u="<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:-1px 5px 0;height:100%;min-height:100%;padding-top:1px;font-size: 13px;font-family:Segoe UI;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;}"+(r?"html{padding-top:0px}":"")+"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}"+(this.model.enableRTL?"ul,ol{padding:0 2.5em 0 0}":"ul,ol{padding:0 0 0 2.5em}")+"a{color:#00a} blockquote{margin-right: 0}.e-rte-table{margin: 0.2em 0 0.5em;border: 1px solid;}.e-rte-table caption{border: 1px solid;border-bottom:none}.e-rte-table,.e-rte-table td{outline:0; min-height:1px;vertical-align: top;text-indent: 5px;} .e-rte-table p{margin:0;padding:0;}<\/style><\/head><body autocorrect='off' contenteditable="+(this.model.allowEditing?"true":"false")+">"+n.trim(this.value())+"<\/body><\/html>";this._rteIframe.css({width:"100%"});this.element[0].value=="<div><\/div>"&&(this.element[0].innerHTML=this.value());this._setContent(u);(!t.isNullOrUndefined(this.model.undoStackLimit)||this.model.undoStackLimit!==""||this.model.undoStackLimit>0)&&(this._backupArray[0]=this.getHtml())},_setIframeHeight:function(){var i=(!t.isNullOrUndefined(this._rteToolbar)&&this._rteToolbar.is(":visible")?this._rteToolbar.outerHeight():6)+(!t.isNullOrUndefined(this._rteFooter)&&this._rteFooter.is(":visible")?this._rteFooter.outerHeight():0);this._rteIframe.height(i==0?this.model.height:this._rteWapper.outerHeight()-i-(parseInt(this.model.showToolbar?n(".e-rte .e-toolbarspan").css("border-bottom-width"):0)+parseInt(n(".e-rte-wrapper").css("border-bottom-width"))+parseInt(n(".e-rte-wrapper").css("border-top-width"))+parseInt(this.model.showFooter?n(".e-rte-footer").css("border-top-width"):0)));n("div#"+this._rteId+"_editor").css("height",n("div.e-ipadscroll#"+this._rteId+"_editor").height())},_renderFooter:function(){var r=this.model,i,n;this._rteFooter=t.buildTag("div.e-rte-footer #"+this._rteId+"_footer").appendTo(this._rteWapper);i=t.buildTag("div.e-rte-footer-left");this._htmlSource=t.buildTag("div.e-rte-icons e-rte-footeritems e-rte-footericon e-rte-source","",{},{title:this._getLocalizedLabels("viewHtml")}).appendTo(i);this._htmlInfo=t.buildTag("div.e-rte-htmltaginfo e-rte-footeritems").appendTo(i);i.appendTo(this._rteFooter);n=t.buildTag("div.e-rte-footer-right");this._wordCount=t.buildTag("div.e-rte-wordcount e-rte-footeritems").appendTo(n);this._clearFormat=t.buildTag("div.e-rte-icons clearFormat e-rte-footericon e-rte-footeritems","",{},{title:this._getLocalizedLabels("clearFormat")}).appendTo(n);this._clearAll=t.buildTag("div.e-rte-icons clearAll e-rte-footericon e-rte-footeritems","",{},{title:this._getLocalizedLabels("clearAll")}).appendTo(n);this._resize=t.buildTag("div.e-icons e-rte-resize e-rte-footeritems").appendTo(n);n.appendTo(this._rteFooter);this._footerEvents("_on");this.model.showHtmlSource||this._htmlSource.hide().removeClass("e-rte-footeritems");this.model.showHtmlTagInfo||this._htmlInfo.hide().removeClass("e-rte-footeritems");this.model.showWordCount||this._wordCount.hide().removeClass("e-rte-footeritems");this.model.showClearAll||this._clearAll.hide().removeClass("e-rte-footeritems");this.model.showClearFormat||this._clearFormat.hide().removeClass("e-rte-footeritems");r.showFooter&&this.model.enableRTL&&this._rteFooter.addClass("e-rtl");r.enableResize?this._enableResize():this._resize.hide().removeClass("e-rte-footeritems");this._updateCharCount()},_footerElement:function(n,t){if(this.model.showFooter){var i=this._rteFooter.find(n);t?i.show().addClass("e-rte-footeritems"):i.hide().addClass("e-rte-footeritems")}},_updateColorPalette:function(){var t=n("ul#"+this._rteId+"_colorTable"),i=n("ul#"+this._rteId+"_colorBGTable");t.find("div.e-rte-table").remove();t.find("li").append(this._colorTable());i.find("div.e-rte-table").remove();i.find("li").append(this._colorTable())},_enableRTL:function(n){n?this._rteIframe.contents().find("body").css("direction","rtl"):this._rteIframe.contents().find("body").css("direction","ltr");this._subControlsSetModel("enableRTL",n)},_roundedCorner:function(n){n?this._rteWapper.addClass("e-corner-all"):this._rteWapper.hasClass("e-corner-all")&&this._rteWapper.removeClass("e-corner-all");this._subControlsSetModel("showRoundedCorner",n)},_subControlsSetModel:function(n,i){t.isNullOrUndefined(this._formatDDL)||this._formatDDL.ejDropDownList("option",n,i);t.isNullOrUndefined(this._fontStyleDDL)||this._fontStyleDDL.ejDropDownList("option",n,i);t.isNullOrUndefined(this._fontSizeDDL)||this._fontSizeDDL.ejDropDownList("option",n,i);t.isNullOrUndefined(this._fontColorSplit)||this._fontColorSplit.ejSplitButton("option",n,i);t.isNullOrUndefined(this._bgColorSplit)||this._bgColorSplit.ejSplitButton("option",n,i);t.isNullOrUndefined(this._toolBarItems)||(n=="showRoundedCorner"&&this._toolBarItems.hasClass("e-corner-top")&&this._toolBarItems.removeClass("e-corner-top").addClass("e-corner-all"),this._toolBarItems.ejToolbar("option",n,i),n=="showRoundedCorner"&&this._toolBarItems.hasClass("e-corner-all")&&this._toolBarItems.removeClass("e-corner-all").addClass("e-corner-top"));t.isNullOrUndefined(this._linkDialog)||(this._linkDialog.ejDialog("option",n,i),this._linkDialog.find(".e-rte-btn").ejButton("option",n,i),this._chkTarget.ejCheckBox("option",n,i),n=="showRoundedCorner"&&(i==!0?this._linkDialog.find(".e-inputtext").addClass("e-corner-all"):this._linkDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._imgDialog)||(this._imgDialog.ejDialog("option",n,i),this._imgDialog.find("div.e-rte-imageTab").ejTab("option",n,i),this._imgDialog.find(".e-rte-imgBorderPx").ejNumericTextbox("option",n,i),this._imgDialog.find(".e-rte-imgBorderStyle").ejDropDownList("option",n,i),this._chkImgDimensions.ejCheckBox("option",n,i),this._dialogchkTarget.ejCheckBox("option",n,i),this._imgDialog.find(".e-rte-btn").ejButton("option",n,i),n=="showRoundedCorner"&&(i==!0?this._imgDialog.find(".e-inputtext").addClass("e-corner-all"):this._imgDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._videoDialog)||(this._videoDialog.ejDialog("option",n,i),this._videoDialog.find(".e-rte-btn").ejButton("option",n,i),this._chkvideoDimensions.ejCheckBox("option",n,i),n=="showRoundedCorner"&&(i==!0?this._videoDialog.find(".e-inputtext").addClass("e-corner-all"):this._videoDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._createTable)||this._createTable.ejDialog("option",n,i);t.isNullOrUndefined(this._sourceDialog)||(this._sourceDialog.ejDialog("option",n,i),this._sourceDialog.find(".e-rte-btn").ejButton("option",n,i),n=="showRoundedCorner"&&(i==!0?this._sourceDialog.find(".e-inputtext").addClass("e-corner-all"):this._sourceDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._alertWindow)||(this._alertWindow.ejDialog("option",n,i),this._alertWindow.find(".e-rte-btn").ejButton("option",n,i));t.isNullOrUndefined(this._customTableDialog)||(this._customTableDialog.ejDialog("option",n,i),this._customTableDialog.find(".e-rte-btn").ejButton("option",n,i),this._customTableDialog.find(".numerictextbox").ejNumericTextbox("option",n,i),this._customTableDialog.find(".e-rte-txtColumns").ejNumericTextbox("option",n,i),this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList("option",n,i),this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList("option",n,i),this._chkTblCaption.ejCheckBox("option",n,i),n=="showRoundedCorner"&&(i==!0?this._customTableDialog.find(".e-inputtext").addClass("e-corner-all"):this._customTableDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._eTblDialog)||(this._eTblDialog.ejDialog("option",n,i),this._eTblDialog.find(".e-numerictextbox").ejNumericTextbox("option",n,i),this._eTblDialog.find(".e-rte-dropdown").ejDropDownList("option",n,i),this._getTableObj("_Tab").ejTab("option",n,i),this._eTblDialog.find(".e-rte-btn").ejButton("option",n,i),this._eTblCaption.ejCheckBox("option",n,i),n=="showRoundedCorner"&&(i==!0?this._eTblDialog.find(".e-inputtext").addClass("e-corner-all"):this._eTblDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._fileDialog)||(this._fileDialog.ejDialog("option",n,i),this._fileDialog.find(".e-rte-btn").ejButton("option",n,i),this._chkFileTarget.ejCheckBox("option",n,i),n=="showRoundedCorner"&&(i==!0?this._fileDialog.find(".e-inputtext").addClass("e-corner-all"):this._fileDialog.find(".e-inputtext").removeClass("e-corner-all")))},_createHtmlSource:function(){t.isNullOrUndefined(this._htmlSource)?(this._htmlSource=t.buildTag("div.e-rte-icons e-rte-footeritems e-rte-source").appendTo(this._rteFooter),this._on(this._htmlSource,"click",this._sourceCodeManager),this._renderSourceDialog()):this._htmlSource.show()},_createHtmlTagsInfo:function(){t.isNullOrUndefined(this._htmlInfo)?this._htmlInfo=t.buildTag("div.e-rte-htmltaginfo e-rte-footeritems").appendTo(this._rteFooter):this._htmlInfo.show()},_createWordCount:function(){t.isNullOrUndefined(this._wordCount)?this._wordCount=t.buildTag("div.e-rte-wordcount e-rte-footeritems").appendTo(this._rteFooter):this._wordCount.show()},_enableResize:function(){this.model.enableResize&&this.model.enabled&&(this._rteWapper.addClass("e-resizable"),this._resizeRTE())},_resizeRTE:function(){var i=this;this._overlayElement=t.buildTag("div.e-rte-overlay");this._rteEditor.css("position","relative");this._rteWapper.find("div.e-rte-resize").ejResizable({minHeight:parseInt(i.model.minHeight),minWidth:parseInt(i.model.minWidth),maxHeight:parseInt(i.model.maxHeight),maxWidth:parseInt(i.model.maxWidth),resizeStart:function(n){i._rteEditor.append(i._overlayElement);i._trigger("resizeStart",{event:n})},resize:function(t){var r=n(t.element).parents("div.e-rte-wrapper");i._rteWapper.height(n(r).height());i._rteWapper.width(n(r).width());i._setIframeHeight();i._trigger("resize",{event:t});i.model.isResponsive&&i._toolBarObj._reSizeHandler()},resizeStop:function(n){i._overlayElement.remove();i._trigger("resizeStop",{event:n})},helper:function(t){var r=n(t.element).parents("div.e-rte-wrapper");return i._rteWapper.height(n(r).height()),i._rteWapper.width(n(r).width()),i._setIframeHeight(),n(i._rteWapper)}})},_getDialogModel:function(){var n=this._rteWapper;return dialogModel={enableResize:!1,showOnInit:!1,enableModal:!0,cssClass:this.model.cssClass,content:n,enableRTL:this.model.enableRTL}},_labelFor:function(n){return this._rteId?" for="+this._rteId+n+" ":""},_TagId:function(n){return this._rteId?" id="+this._rteId+n+" ":""},_renderLinkDialog:function(){var i=this.model.enableRTL?"e-rtlrte":"",r=this._linkDialog=t.buildTag("div#"+this._rteId+"_link"),f=n("<div class='e-rte-label "+i+"'><label "+this._labelFor("_link_url")+">"+this._getLocalizedLabels("linkWebUrl")+"<\/label><\/div><div class='e-rte-field "+i+"'><input type='text'  data-role ='none' class='e-inputtext e-rte-linkUrl' "+this._TagId("_link_url")+"/><\/div><div class='e-rte-label "+i+"'><label "+this._labelFor("_link_text")+">"+this._getLocalizedLabels("linkText")+"<\/label><\/div><div class='e-rte-field "+i+"'><input type='text' data-role ='none' class='e-inputtext e-rte-linkText' "+this._TagId("_link_text")+"><\/div><div class='e-rte-label "+i+"'><label "+this._labelFor("_link_title")+">"+this._getLocalizedLabels("linkToolTip")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text' data-role ='none' class='e-inputtext e-rte-linkTitle' "+this._TagId("_link_title")+"><\/div><div class='e-rte-label "+i+"'><\/div><div class='e-rte-field "+i+"'><input type='checkbox' class='e-rte-linkTarget'  data-role ='none' "+this._TagId("_link_target")+"><label "+this._labelFor("_link_target")+" style='padding: 5px;'>"+this._getLocalizedLabels("linkOpenInNewWindow")+"<\/label><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn "+i+"' type='button' data-role ='none' id='link_insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn "+i+"'type='button' data-role ='none' id='link_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>"),u;f.appendTo(r);r.appendTo(this._rteWapper);u=this._getDialogModel();u.title=this._getLocalizedLabels("createLink");u.content=null;u.closeIconTooltip=this._getLocalizedLabels("closeIcon");u.showRoundedCorner=this.model.showRoundedCorner;r.ejDialog(u);n(n(r.parents()).find(".e-dialog-wrap")).addClass("e-rte");this.model.showRoundedCorner&&r.find(".e-inputtext").addClass("e-corner-all");this._chkTarget=r.find(".e-rte-linkTarget");this._chkTarget.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});r.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(r.find(".e-rte-btn"),"click",this._linkBtnClick);this._on(this._linkDialog.find(".e-rte-linkUrl"),"keypress",this._urlValidation)},_renderImageDialog:function(){var u=this,o="",i,f,r,e;this._imgDialog=t.buildTag("div#"+this._rteId+"_Image");i=this.model.enableRTL?"e-rtlrte":"";f="<div "+this._TagId("_img_Tab")+" class='e-rte-imageTab'><ul><li class='e-first'><a href='#"+this._rteId+"_general'>"+this._getLocalizedLabels("general")+" <\/a><\/li><li class='e-nofirst'><a href='#"+this._rteId+"_advanced'>"+this._getLocalizedLabels("advanced")+" <\/a><\/li><\/ul><div id='"+this._rteId+"_general'><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_url")+">"+this._getLocalizedLabels("imageWebUrl")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text'  data-role ='none' class='e-inputtext e-rte-imgUrl' "+this._TagId("_img_url")+"><\/div><\/div><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_text")+">"+this._getLocalizedLabels("imageAltText")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text'  data-role ='none'  class='e-inputtext e-rte-imgText' "+this._TagId("_img_text")+"><\/div><\/div><div class='e-rte-imgdimensions' "+this._TagId("_imgdimensions")+"><div class='e-rte-label "+i+"'><label>"+this._getLocalizedLabels("dimensions")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("dimensions")+"'  data-role ='none' class='e-inputtext e-dimensions e-rte-imgX' maxlength='3' "+this._TagId("_imgX")+"><label style='padding: 5px;'>X<\/label><input type='text'  data-role ='none'  title='"+this._getLocalizedLabels("dimensions")+"' style='margin-right: 5px;' class='e-inputtext e-dimensions e-rte-imgY' maxlength='3' "+this._TagId("_imgY")+"><\/div><input type='checkbox' class='e-rte-imgConsrn' data-role ='none'"+this._TagId("_img_consrn")+"<label "+this._labelFor("_img_consrn")+"  style='padding: 5px;'>"+this._getLocalizedLabels("constrainProportions")+"<\/label><\/div><\/div><div id='"+this._rteId+"_advanced'><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_link")+">"+this._getLocalizedLabels("imageLink")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text'  data-role ='none' class='e-inputtext e-rte-imgLink' "+this._TagId("_img_link")+"><\/div><\/div><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_border_px")+">"+this._getLocalizedLabels("imageBorder")+"<\/label><\/div><div class='e-rte-field "+i+"'><div class='e-img-border-field'><input type='text' data-role ='none' title='"+this._getLocalizedLabels("imageBorder")+"' class='e-rte-imgBorderPx' maxlength='3' "+this._TagId("_img_border_px")+"><\/div><div class='e-img-border-field'><select class='e-rte-imgBorderStyle'  data-role ='none' "+this._TagId("_img_border_style")+"><option value='solid'>"+this._getLocalizedLabels("solid")+"<\/option><option value='dotted'>"+this._getLocalizedLabels("dotted")+"<\/option><option value='dashed'>"+this._getLocalizedLabels("dashed")+"<\/option><option value='double'>"+this._getLocalizedLabels("doubled")+"<\/option><\/select><\/div><div class='e-img-border-field'><input  data-role ='none' type='text' title='"+this._getLocalizedLabels("imageBorder")+"' class='e-inputtext e-rte-imgBorderColor' "+this._TagId("_img_border_color")+"><\/div><\/div><\/div><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_style")+">"+this._getLocalizedLabels("imageStyle")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text' data-role ='none'  class='e-inputtext e-rte-imgStyle' "+this._TagId("_img_style")+"><\/div><\/div><div class='e-img-field-group'><div class='e-rte-label "+i+"'><\/div><div class='e-rte-field "+i+"'><input type='checkbox' class='e-rte-imgLinkTarget' data-role ='none' "+this._TagId("_img_link_target")+"><label "+this._labelFor("_img_link_target")+" style='padding: 5px;'>"+this._getLocalizedLabels("linkOpenInNewWindow")+"<\/label><\/div><\/div><\/div><\/div><div class='e-rte-button'><button class='e-rte-btn "+i+"' data-role ='none'  type='button' id='"+this._rteId+"_img_insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn "+i+"' type='button' data-role ='none' id='"+this._rteId+"_img_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>";this.model.imageBrowser.filePath!=""&&(o="<div "+this._TagId("_img_explorer")+" class='e-rte-explorer e-rte-imgBrowser'><\/div>");f=n(o+f);f.appendTo(this._imgDialog);this._imgDialog.appendTo(this._rteWapper);this.model.showDimensions||this._rteWapper.find("div.e-rte-imgdimensions").hide();r=this._getDialogModel();r.width=r.width=this.model.imageBrowser.filePath!==""?"720px":"470px";r.title=this._getLocalizedLabels("image");r.content=null;r.closeIconTooltip=this._getLocalizedLabels("closeIcon");r.showRoundedCorner=this.model.showRoundedCorner;r.open=function(){t.isNullOrUndefined(u._imgSplitObj)||u._imgSplitObj.option("enableAutoResize",!0)};r.close=function(){t.isNullOrUndefined(u._imgSplitObj)||u._imgSplitObj.option("enableAutoResize",!1)};this._imgDialog.ejDialog(r);this._imgDialog.parents("#"+this._rteId+"_Image_wrapper").css({visibility:"hidden",display:"block"});n(n(this._imgDialog.parents()).find(".e-dialog-wrap")).addClass("e-rte");this.model.imageBrowser.filePath!=""&&(e={upload:{url:this.model.imageBrowser.uploadAction}},this.model.imageBrowser.ajaxSettings&&n.extend(!0,e,this.model.imageBrowser.ajaxSettings),this._explorerObj=this._imgDialog.find("div.e-rte-imgBrowser").ejFileExplorer({allowMultiSelection:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"690px",height:"300px",path:this.model.imageBrowser.filePath,fileTypes:this.model.imageBrowser.extensionAllow,layout:"list",select:function(n){u._UpdateImgDetails(n)},tools:{creation:["NewFolder","Open"],navigation:["Back","Forward"],addressBar:["Addressbar"],editing:["Refresh","Upload","Delete"],searchBar:["Searchbar"]},toolsList:["creation","navigation","addressBar","editing","searchBar"],enableResize:!1,showContextMenu:!1,ajaxAction:this.model.imageBrowser.ajaxAction,locale:this.model.locale,ajaxSettings:e}).data("ejFileExplorer"),this._imgSplitObj=this._imgDialog.find(".e-splitter").data("ejSplitter"),this._imgSplitObj.option("enableAutoResize",!1));this.model.showRoundedCorner&&this._imgDialog.find(".e-inputtext").addClass("e-corner-all");this._imgDialog.find("div.e-rte-imageTab").ejTab({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!0,showRoundedCorner:this.model.showRoundedCorner});this._imgDialog.find(".e-rte-imgBorderPx").ejNumericTextbox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",minValue:0,value:0,showRoundedCorner:this.model.showRoundedCorner});this._imgDialog.find(".e-rte-imgBorderStyle").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!0,showRoundedCorner:this.model.showRoundedCorner});this._chkImgDimensions=this._imgDialog.find(".e-rte-imgConsrn");this._chkImgDimensions.ejCheckBox({check:!0,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._imgDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._imgPicker=this._imgDialog.find(".e-rte-imgBorderColor").ejColorPicker({cssClass:this.model.cssClass,modelType:"palette",buttonText:{apply:this._getLocalizedLabels("buttonApply"),cancel:this._getLocalizedLabels("buttonCancel")}}).data("ejColorPicker");this._imgDialog.parents("#"+this._rteId+"_Image_wrapper").css({visibility:"visible",display:"none"});this._dialogchkTarget=this._imgDialog.find(".e-rte-imgLinkTarget");this._dialogchkTarget.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._imgDialog.find(".e-rte-btn"),"click",this._imageBtnClick);this._on(this._imgDialog.find(".e-rte-imgUrl"),"keypress",this._urlValidation);this._on(this._imgDialog.find("input.e-dimensions"),"change",this._recalcImgSize)},_renderFileBrowserDialog:function(){var u=this,o="",r=this.model.enableRTL?"e-rtlrte":"",f,i,e;this._fileDialog=t.buildTag("div#"+this._rteId+"_fileDialog");f="<div class='e-rte-elements'><div class='e-rte-label "+r+"'><label "+this._labelFor("_file_url")+">"+this._getLocalizedLabels("linkWebUrl")+"<\/label><\/div><div class='e-rte-field "+r+"'><input type='text'  data-role ='none' class='e-inputtext e-rte-fileUrl' "+this._TagId("_file_url")+"/><\/div><div class='e-rte-label "+r+"'><label "+this._labelFor("_file_text")+">"+this._getLocalizedLabels("linkText")+"<\/label><\/div><div class='e-rte-field "+r+"'><input type='text' data-role ='none' class='e-inputtext e-rte-fileText' "+this._TagId("_file_text")+"><\/div> <\/div><div class='e-rte-field'><input type='checkbox' class='e-rte-fileTarget'  data-role ='none' "+this._TagId("_file_target")+"><label "+this._labelFor("_link_target")+" style='padding: 5px;'>"+this._getLocalizedLabels("linkOpenInNewWindow")+"<\/label><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn "+r+"' type='button' data-role ='none' id='"+this._rteId+"_file_insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn "+r+"'type='button' data-role ='none' id='"+this._rteId+"_file_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>";o="<div "+this._TagId("_file_explorer")+" class='e-rte-explorer e-rte-fileBrowser'><\/div>";f=n(o+f);f.appendTo(this._fileDialog);this._fileDialog.appendTo(this._rteWapper);i=this._getDialogModel();i.width="720px";i.title=this._getLocalizedLabels("fileBrowser");i.content=null;i.showRoundedCorner=this.model.showRoundedCorner;i.open=function(){t.isNullOrUndefined(u._fileSplitObj)||u._fileSplitObj.option("enableAutoResize",!0)};i.close=function(){t.isNullOrUndefined(u._fileSplitObj)||u._fileSplitObj.option("enableAutoResize",!1)};this._fileDialog.ejDialog(i);this._fileDialog.parents("#"+this._rteId+"_fileDialog_wrapper").css({visibility:"hidden",display:"block"});n(n(this._fileDialog.parents()).find(".e-dialog-wrap")).addClass("e-rte");e={upload:{url:this.model.fileBrowser.uploadAction}};this.model.fileBrowser.ajaxSettings&&n.extend(!0,e,this.model.fileBrowser.ajaxSettings);this._fileBrowserObj=this._fileDialog.find("div.e-rte-fileBrowser").ejFileExplorer({allowMultiSelection:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"690px",height:"300px",path:this.model.fileBrowser.filePath,fileTypes:this.model.fileBrowser.extensionAllow,layout:"list",select:function(n){u._UpdateFileDetails(n)},tools:{creation:["NewFolder","Open"],navigation:["Back","Forward"],addressBar:["Addressbar"],editing:["Refresh","Upload","Delete"],searchBar:["Searchbar"]},toolsList:["creation","navigation","addressBar","editing","searchBar"],enableResize:!1,showContextMenu:!1,ajaxAction:this.model.fileBrowser.ajaxAction,locale:this.model.locale,ajaxSettings:e}).data("ejFileExplorer");this._fileSplitObj=this._fileDialog.find(".e-splitter").data("ejSplitter");this._fileSplitObj.option("enableAutoResize",!1);this.model.showRoundedCorner&&this._fileDialog.find(".e-inputtext").addClass("e-corner-all");this._fileDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._fileDialog.parents("#"+this._rteId+"_fileDialog_wrapper").css({visibility:"visible",display:"none"});this._chkFileTarget=f.find(".e-rte-fileTarget");this._chkFileTarget.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._fileDialog.find(".e-rte-btn"),"click",this._fileBtnClick)},_UpdateImgDetails:function(t){n(this._imgURL).hasClass("e-error")&&this._imgURL.removeClass("e-error");t.path===""?this._imgURL.val("http://"):this._imgDialog.find("div.e-rte-imageTab").find(".e-rte-imgUrl").val(t.path+(t.name[0]?t.name[0]:""))},_UpdateFileDetails:function(t){n(this._fileURL).hasClass("e-error")&&this._fileURL.removeClass("e-error");t.path===""?this._fileURL.val("http://"):this._fileDialog.find(".e-rte-fileUrl").val(t.path+(t.name[0]?t.name[0]:""))},_fileBtnClick:function(n){n.target.id===this._rteId+"_file_cancel"?(this._clearFileFields(),this._fileDialog.ejDialog("close")):n.target.id===this._rteId+"_file_insert"&&(this._restoreSelection(this._selectionRange),this._fileDialog.find("e-rte-fileUrl").val()!=""?this._onInsertFileLink():this._linkDialog.ejDialog("close"),this._onChange(),this._setBackupData())},_clearFileFields:function(){this._fileURL=this._fileDialog.find(".e-rte-fileUrl");this._fileURL.val("http://");this._fileLinkText=this._fileDialog.find(".e-rte-fileText");this._fileLinkText.val("");this._chkFileTarget.ejCheckBox({check:!1})},_onGetInsertFileContent:function(n){this._selectedHTML=this._fileLinkText.val()===""?n:this._fileLinkText.val()},_onInsertFileLink:function(){var i,f,o=this._fileURL.val().match(/(ftp:|http:|https:)\/\//g),u=this._fileURL.val().startsWith("~")?this._fileURL.val().replace(this._fileURL.val().substr("0","1"),".."):this._fileURL.val(),r,e;if(t.isNullOrUndefined(o)&&u!==""||!t.isNullOrUndefined(o)&&o[0].length<u.length)r=this._isIE()?this._currentSelNode:this._getSelectedNode(),t.isNullOrUndefined(r)||r.tagName.toUpperCase()!="A"?t.isNullOrUndefined(r)||r.tagName.toUpperCase()!="IMG"?(i=t.buildTag("a","",{},{href:u}),i[0].target=this._chkFileTarget.ejCheckBox("isChecked")?"_blank":"_self",this._focus(),this._isIE()?(t.isNullOrUndefined(this._selectedHTML)?this._onGetInsertFileContent(u):this._selectedHTML.length==0&&this._onGetInsertFileContent(u),i[0].innerHTML=this._selectedHTML,f=i[0].outerHTML):(this._fileLinkText.val()===""?i.html(u):i.html(this._fileLinkText.val()),f=n("<div>").append(n(i).clone()).html()),f&&(this._isIE()?this._pasteHtml(f):this._getDocument().execCommand("inserthtml",!1,f),this._focus())):(e=n(r).parent("a")[0],t.isNullOrUndefined(e)?(i=t.buildTag("a","",{},{href:u}),n(r.outerHTML).appendTo(n(i)),n(r).replaceWith(n(i)),i[0].target=this._chkFileTarget.ejCheckBox("isChecked")?"_blank":"_self"):(e.href=u,e.target=this._chkFileTarget.ejCheckBox("isChecked")?"_blank":"_self")):(r.href=u,r.innerHTML=this._fileLinkText.val(),r.target=this._chkFileTarget.ejCheckBox("isChecked")?"_blank":"_self"),this._fileDialog.ejDialog("close");else return this._fileURL.addClass("e-error"),!1},_onFileImage:function(){var e=this._fileDialog.find(".e-rte-imgUrl"),s=this._fileDialog.find(".e-rte-imgText"),i=this,h,u;this._restoreSelection(this._selectionRange);var o="",f=i._fileDialog.find("e-rte-fileUrl").val(),r=i._isIE()?i._currentSelNode:i._getSelectedNode();if(t.isNullOrUndefined(r)||(o=r.nodeName.toUpperCase()),o!="p")h=n("<p>",{src:e.val(),error:function(){e.addClass("e-error")},success:function(){var u=t.buildTag("p"),r,e;if(f!="")if(i._isUrl(n.trim(f)))r=t.buildTag("a","",{},{href:f}),r[0].target=i._dialogchkTarget.ejCheckBox("isChecked")?"_blank":"_self",n(u[0].outerHTML).appendTo(r),u=r;else return i._imageLink.addClass("e-error"),!1;e=u[0].outerHTML;i.executeCommand("inserthtml",e)}});else if(r.src=e.val(),r.alt=s.val(),i._setImageProperties(n(r),imgX,imgY,imageStyle,borderPx,borderStyle,borderColor),u=n(r).parent("a"),f!="")if(i._isUrl(n.trim(f)))u.length>0?u.attr("href",f):(u=t.buildTag("a","",{},{href:f}),n(r.outerHTML).appendTo(u),n(r).replaceWith(u));else return i._imageLink.addClass("e-error"),!1;else u.length>0&&u.attr("href","");i._fileDialog.ejDialog("close")},_renderVideoDialog:function(){var r,u,i;this._videoDialog=t.buildTag("div#"+this._rteId+"_video");r=this.model.enableRTL?"e-rtlrte":"";u=n("<div><label>"+this._getLocalizedLabels("embedVideo")+"<\/label><\/div><textarea class='e-rte-video e-inputtext'  aria-label="+this._getLocalizedLabels("embedVideo")+"><\/textarea><div class='e-rte-videoDimensions'"+this._TagId("_videodimensions")+" style='margin-top:7px'><div class='e-rte-label'><label>"+this._getLocalizedLabels("dimensions")+" <\/label><\/div><div><input type='text'  data-role ='none' title='"+this._getLocalizedLabels("dimensions")+"' class='e-inputtext e-dimensions e-rte-videoX' maxlength='3' "+this._TagId("_videoX")+"><label style='padding: 5px;'>X<\/label><input type='text'  data-role ='none'  title='"+this._getLocalizedLabels("dimensions")+"' style='margin-right: 5px;' class='e-inputtext e-dimensions e-rte-videoY' maxlength='3'"+this._TagId("_videoY")+"><input type='checkbox' class='e-rte-videoConsrn' data-role ='none'"+this._TagId("_video_consrn")+"<label "+this._labelFor("_video_consrn")+"style='padding: 5px;'>"+this._getLocalizedLabels("constrainProportions")+"<\/label><\/div><\/div><div class='e-rte-button e-fieldseparate'><button id='video_insert'type='button' data-role ='none' class='e-rte-btn "+r+"'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button id='video_cancel' type='button' data-role ='none' class='e-rte-btn "+r+"'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");u.appendTo(this._videoDialog);this._videoDialog.appendTo(this._rteWapper);this.model.showDimensions||this._rteWapper.find(".e-rte-videoDimensions").hide();i=this._getDialogModel();i.width="460px";i.closeIconTooltip=this._getLocalizedLabels("closeIcon");i.title=this._getLocalizedLabels("video");i.content=null;i.showRoundedCorner=this.model.showRoundedCorner;this._videoDialog.ejDialog(i);n(n(this._videoDialog.parents()).find(".e-dialog-wrap")).addClass("e-rte");this.model.showRoundedCorner&&this._videoDialog.find(".e-inputtext").addClass("e-corner-all");this._chkvideoDimensions=this._videoDialog.find(".e-rte-videoConsrn");this._chkvideoDimensions.ejCheckBox({checked:!0,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._videoDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._videoDialog.find(".e-rte-btn"),"click",this._insertVideo);this._on(this._videoDialog.find("input.e-dimensions"),"change",this._recalcVideoSize)},_renderTableDialog:function(){var i,n;this._createTable=t.buildTag("div.e-rte-table-picker#"+this._rteId+"_table");this._tblheaderDiv=t.buildTag("div.e-rte-tableheader");this._tblheaderDiv.html(this._getLocalizedLabels("createTable"));this._tblheaderDiv.appendTo(this._createTable);i=t.buildTag("div.e-rte-table");this._drawTable(i);i.appendTo(this._createTable);this._createCustomTable();this._createTable.appendTo(this._rteWapper);n=this._getDialogModel();n.enableModal=!1;n.showHeader=!1;n.width="230px";n.showRoundedCorner=this.model.showRoundedCorner;this._createTable.ejDialog(n)},_createCustomTable:function(){var r=n("<div class='customtable-group e-rte-createCustomTableLink' "+this._TagId("_createCustomTableLink")+"><span class='e-rte-toolbar-icon customtable-image'><\/span><a class='customtable-link' role='button' title='"+this._getLocalizedLabels("customTable")+"'>"+this._getLocalizedLabels("customTable")+"<\/a><\/div><div class='customtable-group e-rte-eTblProperties' "+this._TagId("_eTblProperties")+"><span class='e-rte-toolbar-icon customtable-image'><\/span><a class='customtable-link' role='button' title='"+this._getLocalizedLabels("editTable")+"'>"+this._getLocalizedLabels("editTable")+"<\/a><\/div>"),u,i;this._on(r,"click",this._openCustomTable);r.appendTo(this._createTable);this.model.showCustomTable||this._createTable.find("#"+this._rteId+"_createCustomTableLink").hide();this._customTableDialog=t.buildTag("div.e-rte-customtable#"+this._rteId+"_customTable");u=n("<div class='e-fieldgroup'><div class='e-rte-tablefields'><label "+this._labelFor("_txtColumns")+">"+this._getLocalizedLabels("tableColumns")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='numerictextbox e-rte-txtColumns' "+this._TagId("_txtColumns")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtRows")+">"+this._getLocalizedLabels("tableRows")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='numerictextbox e-rte-txtRows' "+this._TagId("_txtRows")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtWidth")+">"+this._getLocalizedLabels("tableWidth")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-rte-txtWidth'"+this._TagId("_txtWidth")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtHeight")+">"+this._getLocalizedLabels("tableHeight")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-rte-txtHeight'"+this._TagId("_txtHeight")+"><\/div><\/div><div class='e-fieldseparate'><div class='e-rte-tablefields'><label "+this._labelFor("_txtSpacing")+">"+this._getLocalizedLabels("tableCellSpacing")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-rte-txtSpacing' "+this._TagId("_txtSpacing")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtPadding")+">"+this._getLocalizedLabels("tableCellPadding")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-rte-txtPadding'"+this._TagId("_txtPadding")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtBorder")+">"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-tablefields'><select class='e-rte-txtBorder' data-role ='none' "+this._TagId("_txtBorder")+"><option value='solid'>Solid<\/option><option value='dotted'>Dotted<\/option><option value='dashed'>Dashed<\/option><option value='double'>Double<\/option><\/select><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_chkCaption")+">"+this._getLocalizedLabels("tableCaption")+"<\/label><\/div><div class='e-rte-tablefields'><input type='checkbox' class='e-rte-chkCaption'  data-role ='none'"+this._TagId("_chkCaption")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_ddlAlignment")+">"+this._getLocalizedLabels("tableAlignment")+"<\/label><\/div><div class='e-rte-tablefields'><select class='e-rte-ddlAlignment' data-role ='none' "+this._TagId("_ddlAlignment")+"><option value='left'>Left<\/option><option value='right'>Right<\/option><option value='center'>Center<\/option><\/select><\/div><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn' data-role ='none' id='insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn' data-role ='none' id='cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");u.appendTo(this._customTableDialog);i=this._getDialogModel();i.width="480px";i.title=this._getLocalizedLabels("customTable");i.content=null;i.showRoundedCorner=this.model.showRoundedCorner;this._customTableDialog.ejDialog(i);n(n(this._customTableDialog.parents()).find(".e-dialog-wrap")).addClass("e-rte");this.model.showRoundedCorner&&this._customTableDialog.find(".e-inputtext").addClass("e-corner-all");this._createTable.find("div.e-rte-eTblProperties").addClass("e-disable");this._customTableDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._customTableDialog.find(".numerictextbox").ejNumericTextbox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",minValue:1,value:3,showRoundedCorner:this.model.showRoundedCorner});this._customTableDialog.find(".e-rte-txtColumns").ejNumericTextbox({maxValue:63,showRoundedCorner:this.model.showRoundedCorner});this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!1,showRoundedCorner:this.model.showRoundedCorner});this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!0,showRoundedCorner:this.model.showRoundedCorner});this._chkTblCaption=this._customTableDialog.find(".e-rte-chkCaption");this._chkTblCaption.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._customTableDialog.find(".e-rte-btn"),"click",this._insertCustomTable)},_renderEditTableDialog:function(){var i,u,r;this._eTblDialog=t.buildTag("div#"+this._rteId+"_eTbl");i=this._rteId;u=n("<div id='"+this._rteId+"_eTbl_Tab'><ul><li class='e-first'><a href='#"+this._rteId+"_eTblTable'>"+this._getLocalizedLabels("table")+" <\/a><\/li><li class='e-nofirst'><a href='#"+this._rteId+"_eTblRow'>"+this._getLocalizedLabels("row")+" <\/a><\/li><li class='e-nofirst'><a href='#"+this._rteId+"_eTblColumn'>"+this._getLocalizedLabels("column")+" <\/a><\/li><li class='e-nofirst'><a href='#"+this._rteId+"_eTblCell'>"+this._getLocalizedLabels("cell")+" <\/a><\/li><\/ul><div id='"+this._rteId+"_eTblTable'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblWidth")+">"+this._getLocalizedLabels("tableWidth")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblWidth")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblHeight")+">"+this._getLocalizedLabels("tableHeight")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblHeight")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblCellSpace")+">"+this._getLocalizedLabels("tableCellSpacing")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-numerictextbox' "+this._TagId("_eTblCellSpace")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblCellPad")+">"+this._getLocalizedLabels("tableCellPadding")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-numerictextbox' "+this._TagId("_eTblCellPad")+"><\/div><div class='e-rte-tablefields'><label  "+this._labelFor("_eTblAlign")+">"+this._getLocalizedLabels("tableAlignment")+"<\/label><\/div><div class='e-rte-tablefields'><select id='"+i+"_eTblAlign' data-role ='none'  class='e-rte-dropdown'><option value='left'>Left<\/option><option value='right'>Right<\/option><option value='center'>Center<\/option><\/select><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblCaption")+">"+this._getLocalizedLabels("tableCaption")+"<\/label><\/div><div class='e-rte-tablefields'><input type='checkbox' data-role ='none' "+this._TagId("_eTblCaption")+"><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblBrdrPx")+">"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-stylefield'><div class='e-img-border-field'><input  data-role ='none' type='text' title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext e-numerictextbox' maxlength='3'  "+this._TagId("_eTblBrdrPx")+"><\/div><div class='e-img-border-field'><select "+this._TagId("_eTbl_border_style")+" class='e-rte-dropdown' data-role ='none' ><option value='solid'>Solid<\/option><option value='dotted'>Dotted<\/option><option value='dashed'>Dashed<\/option><option value='solid'>Double<\/option><\/select><\/div><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext' maxlength='7' "+this._TagId("_eTbl_border_color")+"><\/div><\/div><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblStyle")+">"+this._getLocalizedLabels("imageStyle")+" <\/label><\/div><div class='e-rte-stylefield'><input  data-role ='none' type='text' class='e-inputtext' "+this._TagId("_eTblStyle")+"><\/div><\/div><\/div><div id='"+i+"_eTblRow'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblRHeight")+">"+this._getLocalizedLabels("tableHeight")+"<\/label><\/div><div class='e-rte-tablefields'><input  data-role ='none' type='text' class='e-inputtext' "+this._TagId("_eTblRHeight")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblRAlign")+">"+this._getLocalizedLabels("textAlign")+"<\/label><\/div><div class='e-rte-tablefields'><select "+this._TagId("_eTblRAlign")+" data-role ='none'  class='e-rte-dropdown'><option value='left'>Left<\/option><option value='right'>Right<\/option><option value='center'>Center<\/option><\/select><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblRBrdrPx")+">"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-stylefield'><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext e-numerictextbox' maxlength='3'  "+this._TagId("_eTblRBrdrPx")+"><\/div><div class='e-img-border-field'><select "+this._TagId("_eTblRBrdrStyle")+" data-role ='none' class='e-rte-dropdown'><option value='solid'>Solid<\/option><option value='dotted'>Dotted<\/option><option value='dashed'>Dashed<\/option><option value='solid'>Double<\/option><\/select><\/div><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext' maxlength='7' "+this._TagId("_eTblRBrdrColor")+"><\/div><\/div><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblRStyle")+">"+this._getLocalizedLabels("imageStyle")+" <\/label><\/div><div class='e-rte-stylefield'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblRStyle")+"><\/div><\/div><\/div><div id='"+i+"_eTblColumn'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblCWidth")+">"+this._getLocalizedLabels("tableWidth")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblCWidth")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblCAlign")+">"+this._getLocalizedLabels("textAlign")+"<\/label><\/div><div class='e-rte-tablefields'><select "+this._TagId("_eTblCAlign")+" data-role ='none'  class='e-rte-dropdown'><option value='left'>Left<\/option><option value='right'>Right<\/option><option value='center'>Center<\/option><\/select><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblCBrdrPx")+">"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-stylefield'><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext e-numerictextbox' maxlength='3'  "+this._TagId("_eTblCBrdrPx")+"><\/div><div class='e-img-border-field'><select "+this._TagId("_eTblCBrdrStyle")+" data-role ='none' class='e-rte-dropdown'><option value='solid'>Solid<\/option><option value='dotted'>Dotted<\/option><option value='dashed'>Dashed<\/option><option value='solid'>Double<\/option><\/select><\/div><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext' maxlength='7' "+this._TagId("_eTblCBrdrColor")+"><\/div><\/div><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblCStyle")+">"+this._getLocalizedLabels("imageStyle")+" <\/label><\/div><div class='e-rte-stylefield'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblCStyle")+"><\/div><\/div><\/div><div id='"+i+"_eTblCell'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblClWidth")+">"+this._getLocalizedLabels("tableWidth")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblCWidth")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblClAlign")+">"+this._getLocalizedLabels("textAlign")+"<\/label><\/div><div class='e-rte-tablefields'><select "+this._TagId("_eTblClAlign")+" data-role ='none'  class='e-rte-dropdown'><option value='left'>Left<\/option><option value='right'>Right<\/option><option value='center'>Center<\/option><\/select><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblClBrdrPx")+">"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-stylefield'><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext e-numerictextbox' maxlength='3' "+this._TagId("_eTblClBrdrPx")+" ><\/div><div class='e-img-border-field'><select "+this._TagId("_eTblClBrdrStyle")+" data-role ='none' class='e-rte-dropdown'><option value='solid'>Solid<\/option><option value='dotted'>Dotted<\/option><option value='dashed'>Dashed<\/option><option value='solid'>Double<\/option><\/select><\/div><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext' maxlength='7' "+this._TagId("_eTblClBrdrColor")+"><\/div><\/div><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblClStyle")+">"+this._getLocalizedLabels("imageStyle")+" <\/label><\/div><div class='e-rte-stylefield'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblClStyle")+"><\/div><\/div><\/div><\/div><div class='e-rte-button'><button class='e-rte-btn' data-role ='none' id='"+i+"_eTbl_apply'>"+this._getLocalizedLabels("dialogApply")+"<\/button><button class='e-rte-btn' data-role ='none' id='"+i+"_eTbl_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");u.appendTo(this._eTblDialog);this._eTblDialog.appendTo(this._rteWapper);r=this._getDialogModel();r.width="470px";r.title=this._getLocalizedLabels("editTable");r.content=null;r.showRoundedCorner=this.model.showRoundedCorner;this._eTblDialog.ejDialog(r);n(n(this._eTblDialog.parents()).find(".e-dialog-wrap")).addClass("e-rte");this.model.showRoundedCorner&&this._eTblDialog.find(".e-inputtext").addClass("e-corner-all");this._eTblDialog.find(".e-numerictextbox").ejNumericTextbox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",minValue:0,value:0,showRoundedCorner:this.model.showRoundedCorner});this._eTblDialog.find(".e-rte-dropdown").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",showRoundedCorner:this.model.showRoundedCorner});this._eTblAlign=this._getTableObj("Align").data("ejDropDownList");this._eTblAlign.option("enabled",!1);this._getTableObj("_Tab").find("li:nth-child(3)").css("display","none");this._getTableObj("_Tab").ejTab({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!0,showRoundedCorner:this.model.showRoundedCorner});this._eTblCaption=this._getTableObj("Caption");this._eTblCaption.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._eTblDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._eTblDialog.find(".e-rte-btn"),"click",this._eTblBtnClick)},_drawTable:function(n){for(var r,i=0;i<this.model.tableRows;i++){for(rowDiv=t.buildTag("div.e-rtetablerow"),r=0;r<this.model.tableColumns;r++)tableCell=t.buildTag("div.e-rte-tablecell e-default"),tableCell.appendTo(rowDiv);rowDiv.appendTo(n)}},_renderSourceDialog:function(){var r,i;this._sourceDialog=t.buildTag("div#"+this._rteId+"_Source");r=n("<textarea class='e-rte-srctextarea e-inputtext'><\/textarea><div class='e-rte-button e-fieldseparate'><button id='src_update' data-role ='none' class='e-rte-btn'>"+this._getLocalizedLabels("dialogUpdate")+"<\/button><button id='src_cancel' class='e-rte-btn'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");r.appendTo(this._sourceDialog);i=this._getDialogModel();i.title=this._getLocalizedLabels("viewHtml");i.width="auto";i.content=null;i.showRoundedCorner=this.model.showRoundedCorner;this._sourceDialog.ejDialog(i);this.model.showRoundedCorner&&this._sourceDialog.find(".e-inputtext").addClass("e-corner-all");this._sourceDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._sourceDialog.find(".e-rte-btn"),"click",this._srcBtnClick)},_renderAlertDialog:function(){var r,i;this._alertWindow=t.buildTag("div#"+this._rteId+"_Alert");r=n("<p class='e-alerttext'><\/p><div class='e-rte-button e-fieldseparate'><button data-role ='none' class='e-rte-btn e-alert-ok' type='button'>"+this._getLocalizedLabels("dialogOk")+"<\/button><button class='e-rte-btn e-alert-cancel' data-role='none'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");r.appendTo(this._alertWindow);i=this._getDialogModel();i.showHeader=!1;i.width="auto";i.content=null;i.showRoundedCorner=this.model.showRoundedCorner;this._alertWindow.ejDialog(i);n(n(this._alertWindow.parents()).find(".e-dialog-wrap")).addClass("e-rte");this._alertWindow.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._alertWindow.find(".e-rte-btn"),"click",this._alertBtnClick);this._alertWindow.find(".e-alert-cancel").hide()},_alertBtnClick:function(t){if(n.trim(this._alertWindow.find(".e-alerttext").html())==this._getLocalizedLabels("deleteAlert")&&n(t.target).hasClass("e-alert-ok")){this._getDocument().body.innerHTML="";this.model.showToolbar&&this._toolBarObj.selectItemByID(this._rteId+"justifyLeft");this._setBackupData();this._updateCharCount();var i=this._isIE()?this._currentSelNode:this._getSelectedNode();this._updateTagInfo(i);this._onChange()}this._alertWindow.ejDialog("close");this._alertWindow.find(".e-alert-cancel").hide()},_openAlert:function(n){this._alertWindow.find(".e-alerttext").html(n);this._alertWindow.ejDialog("open")},_renderFormat:function(){this._formatDDL=t.buildTag("input#"+this._rteId+"_format","","",{type:"text",title:this._getLocalizedLabels("format"),"data-role":"none"});var n={};n.dataSource=this.model.format;n.width="105px";n.enableRTL=this.model.enableRTL;n.popupWidth="175px";n.popupHeight="auto";n.selectedItemIndex=0;n.popupHide=this._formatChange;n.cssClass="e-rte-format-ddl";n.showRoundedCorner=this.model.showRoundedCorner;n.fields={text:"text",value:"value",spriteCssClass:"spriteCssClass"};this._formatDDL.appendTo(this._rteToolbar.find("li.e-rteItem-format").html(""));this._formatDDL.ejDropDownList(n);this._formatPopupStyle()},_formatPopupStyle:function(){for(var i=n("#"+this._rteId+"_format_popup").find("li"),t=0;t<i.length;t++)n(i[t]).addClass(this.model.format[t].spriteCssClass)},_renderFontStyle:function(){this._fontStyleDDL=t.buildTag("input#"+this._rteId+"_fontName","","",{type:"text",title:this._getLocalizedLabels("fontName"),"data-role":"none"});var n={};n.dataSource=this.model.fontName;n.enableRTL=this.model.enableRTL;n.selectedItemIndex=0;n.popupHide=this._fontStyleChange;n.showRoundedCorner=this.model.showRoundedCorner;n.fields={text:"text",value:"value"};this._fontStyleDDL.appendTo(this._rteToolbar.find("li.e-rteItem-fontName").html(""));this._fontStyleDDL.ejDropDownList(n)},_renderFontSize:function(){this._fontSizeDDL=t.buildTag("input#"+this._rteId+"_fontSize","","",{type:"text",title:this._getLocalizedLabels("fontSize"),"data-role":"none"});var n={};n.dataSource=this.model.fontSize;n.width="100px";n.enableRTL=this.model.enableRTL;n.selectedItemIndex=1;n.popupHide=this._fontSizeChange;n.showRoundedCorner=this.model.showRoundedCorner;n.fields={text:"text",value:"value"};this._fontSizeDDL.appendTo(this._rteToolbar.find("li.e-rteItem-fontSize").html(""));this._fontSizeDDL.ejDropDownList(n)},_renderFontColor:function(){var f=this,u,i,r;this._fontColorSplit=t.buildTag("button#"+this._rteId+"_fontColor","",{},{type:"button","data-role":"none"});u=n("<ul id='"+this._rteId+"_colorTable' class='e-rte-colorpalette'><li><\/li><\/ul>");u.find("li").append(this._colorTable());i={};i.width="50px";i.contentType="textandimage";i.targetID=this._rteId+"_colorTable";i.enableRTL=this.model.enableRTL;i.prefixIcon="e-fontcolor-icon";i.showRoundedCorner=this.model.showRoundedCorner;this._fontColorSplit.appendTo(this._rteToolbar.find("li.e-rteItem-fontColor").html(""));r=n("#"+this._rteId+"_colorTable").get(0);r&&(n(r).parent().hasClass("e-menu-wrap")?n(r).parent().remove():n(r).remove());u.appendTo(this._rteToolbar.find("li.e-rteItem-fontColor"));this._fontColorSplit.ejSplitButton(i);this._splitObj=this._fontColorSplit.ejSplitButton("instance");this._splitObj.option("beforeOpen",function(){f._bindClickOperation("FontColor")});this._on(this._fontColorSplit,"click",this._fontColorClick);this._fontColorSplit.find("span.e-fontcolor-icon").removeClass("e-icon");this._fontColorSplit.find("span.e-btntxt").css("background-color",this._fontColor)},_renderBGColor:function(){var f=this,u,i,r;this._bgColorSplit=t.buildTag("button#"+this._rteId+"_backgroundColor","",{},{type:"button","data-role":"none"});u=n("<ul id='"+this._rteId+"_colorBGTable' class='e-rte-colorpalette'><li><\/li><\/ul>");u.find("li").append(this._colorTable());i={};i.width="50px";i.contentType="textandimage";i.targetID=this._rteId+"_colorBGTable";i.enableRTL=this.model.enableRTL;i.prefixIcon="e-bgcolor-icon";i.showRoundedCorner=this.model.showRoundedCorner;this._bgColorSplit.appendTo(this._rteToolbar.find("li.e-rteItem-backgroundColor").html(""));r=n("#"+this._rteId+"_colorBGTable").get(0);r&&(n(r).parent().hasClass("e-menu-wrap")?n(r).parent().remove():n(r).remove());u.appendTo(this._rteToolbar.find("li.e-rteItem-backgroundColor"));this._bgColorSplit.ejSplitButton(i);this._bgSplitObj=this._bgColorSplit.ejSplitButton("instance");this._bgSplitObj.option("beforeOpen",function(){f._bindClickOperation("BGColor")});this._on(this._bgColorSplit,"click",this._bgColorClick);this._bgColorSplit.find("span.e-bgcolor-icon").removeClass("e-icon");this._bgColorSplit.find("span.e-btntxt").css("background-color",this._bgColor)},_bindClickOperation:function(t){var i=this,u=t=="BGColor"?i._bgSplitObj:i._splitObj,r=t=="BGColor"?"_colorBGTable":"_colorTable";SplitMenu=n("#"+i._rteId+r).ejMenu("instance");t=="BGColor"?i._bgSplitMenu=SplitMenu:i._splitMenu=SplitMenu;SplitMenu.model.close=function(){u.contstatus=!1;i._off(n("#"+i._rteId+r).find("div.e-rte-palettetable"),"click",t=="BGColor"?i._bgColorPaletteClick:i._colorPaletteClick)};i._on(n("#"+i._rteId+r).find("div.e-rte-palettetable"),"click",t=="BGColor"?i._bgColorPaletteClick:i._colorPaletteClick)},_colorTable:function(){for(var u,f=t.buildTag("div.e-rte-table"),i=0,n,r,e=0;e<this.model.colorPaletteRows;e++){for(r=t.buildTag("div.e-rtetablerow"),u=0;u<this.model.colorPaletteColumns;u++)i<this.model.colorCode.length&&(n="#"+this.model.colorCode[i],tableCell=t.buildTag("div.e-rte-palettetable","",{"background-color":n},{title:n,"color-code":n}),tableCell.appendTo(r),i++);r.appendTo(f)}return f},_recalcVideoSize:function(n){var r,u,t,i;r=this._videoDialog.find(".e-rte-videoX");u=this._videoDialog.find(".e-rte-videoY");t=r.val();i=u.val();this._chkvideoDimensions.ejCheckBox("isChecked")&&this._videoWidth&&this._videoHeight&&t&&i&&(n.target.id==r[0].id?(i=Math.round(t/this._videoWidth*i),u.val(i)):(t=Math.round(i/this._videoHeight*t),r.val(t)));this._videoWidth=t;this._videoHeight=i},_recalcImgSize:function(n){var r,u,t,i;r=this._imgDialog.find(".e-rte-imgX");u=this._imgDialog.find(".e-rte-imgY");t=r.val();i=u.val();this._chkImgDimensions.ejCheckBox("isChecked")&&this._imgWidth&&this._imgHeight&&t&&i&&(n.target.id==r[0].id?(i=Math.round(t/this._imgWidth*i),u.val(i)):(t=Math.round(i/this._imgHeight*t),r.val(t)));this._imgWidth=t;this._imgHeight=i},_urlValidation:function(t){var i=n(t.target);i.hasClass("e-error")&&i.removeClass("e-error")},_linkBtnClick:function(n){n.target.id==="link_cancel"?(this._clearLinkFields(),this._linkDialog.ejDialog("close")):n.target.id==="link_insert"&&(this._restoreSelection(this._selectionRange),this._txtURL.val()!=""?this._onInsertLink():(this._onUnlink(),this._linkDialog.ejDialog("close")),this._onChange(),this._setBackupData())},_imageBtnClick:function(n){if(n.target.id===this._rteId+"_img_cancel")this._imgDialog.ejDialog("close");else if(n.target.id===this._rteId+"_img_insert"){var i=this._imgURL.val().match(/(ftp:|http:|https:)\/\//g);if(t.isNullOrUndefined(i)&&this._imgURL.val()!==""||!t.isNullOrUndefined(i)&&i[0].length<this._imgURL.val().length)this._onInsertImage(),this._onChange(),this._setBackupData();else return this._imgURL.addClass("e-error"),!1}},_srcBtnClick:function(t){if(t.target.id==="src_update"){var i=n.trim(this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value);this._getDocument().body.innerHTML=i;this._onChange();this._updateCharCount()}this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value="";this._sourceDialog.ejDialog("close")},_eTblBtnClick:function(n){n.target.id===this._rteId+"_eTbl_cancel"?this._eTblDialog.ejDialog("close"):n.target.id===this._rteId+"_eTbl_apply"&&(this._oneditTable(),this._onChange(),this._setBackupData())},_insertCustomTable:function(i){var f,r,u;if(i.target.id==="insert"){var e=this._customTableDialog.find(".e-rte-txtColumns").ejNumericTextbox("getValue"),o=this._customTableDialog.find(".e-rte-txtRows").ejNumericTextbox("getValue"),s=this._customTableDialog.find(".e-rte-txtHeight").val(),h=this._customTableDialog.find(".e-rte-txtWidth").val(),c=this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList("getSelectedValue"),l=this._customTableDialog.find(".e-rte-txtSpacing").val(),a=this._customTableDialog.find(".e-rte-txtPadding").val(),v=this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList("getSelectedValue"),y=this._chkTblCaption.ejCheckBox("isChecked");t.isNullOrUndefined(this._tableInsertAt)||t.isNullOrUndefined(this._tableInsertAt.startContainer)||this._restoreSelection(this._tableInsertAt);f=this._tableGenerator(o,e,!1,h,s,l,a,c,v,y);this.executeCommand("inserthtml",f);r=n(this._getDocument()).find("table.e-rte-table");r.attr("contentEditable",!1);r.find("td").attr("contentEditable",!0);u=this._customTableDialog.find(".e-rte-ddlAlignment").data("ejDropDownList");u.option("value")=="Center"&&r.attr("style","margin: 0 auto");this._onChange();u.option({value:"",enabled:!1})}this._customTableDialog.ejDialog("close");this._clearTableFields()},_clearTableFields:function(){this._customTableDialog.find(".e-rte-txtColumns").ejNumericTextbox("option","value",3);this._customTableDialog.find(".e-rte-txtRows").ejNumericTextbox("option","value",3);this._customTableDialog.find(".e-rte-txtHeight").val("");this._customTableDialog.find(".e-rte-txtWidth").val("");this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList("clearText");this._customTableDialog.find(".e-rte-txtSpacing").val("");this._customTableDialog.find(".e-rte-txtPadding").val("");var n=this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList("clearText"),t=this._chkTblCaption.ejCheckBox({check:!1})},_clearEditTableFields:function(){this._eTblHeight=this._eTblDialog.find("input").val("");this._eTblDialog.find(".e-numerictextbox").data("ejNumericTextbox").option("value","");this._eTblDialog.find(".e-rte-dropdown").data("ejDropDownList").option("value","");this._eTblAlign.disable();this._eTblCaption.ejCheckBox({check:!1})},_clearLinkFields:function(){this._txtURL=this._linkDialog.find(".e-rte-linkUrl");this._txtURL.removeClass("e-error");this._txtURL.val("http://");this._txtLinkText=this._linkDialog.find(".e-rte-linkText");this._txtLinkText.val("");this._txtLinkTitle=this._linkDialog.find(".e-rte-linkTitle");this._txtLinkTitle.val("");this._chkTarget.ejCheckBox({check:!1});this._txtURL.focus()},_clearImgFields:function(){this._imgURL=this._imgDialog.find(".e-rte-imgUrl").val("http://").removeClass("e-error");this._imgDialog.find(".e-rte-imgText").val("");this._chkImgDimensions.ejCheckBox({checked:!0});this._imageLink=this._imgDialog.find(".e-rte-imgLink");this._imageLink.removeClass("e-error");this._imageLink.val("");this._imageBorderPx=this._imgDialog.find(".e-rte-imgBorderPx").data("ejNumericTextbox");this._imageBorderPx.option("value",0);this._imageBorderStyle=this._imgDialog.find(".e-rte-imgBorderStyle").data("ejDropDownList");this._imageBorderStyle.option("value","");this._imgPicker.option("value",null);this._imgDialog.find(".e-selected-color").removeAttr("style");this._imageStyle=this._imgDialog.find(".e-rte-imgStyle");this._imageStyle.val("");this._dialogchkTarget.ejCheckBox({check:!1})},_videoManager:function(){var n=this._getSelectedNode();this._editVideo=null;n&&!t.isNullOrUndefined(n.tagName)&&n.tagName.toLowerCase()==="iframe"&&(this._editVideo=n,this._videoWidth=parseInt(n.width),this._videoHeight=parseInt(n.height),this._videoDialog.find("textarea.e-rte-video").val(n.outerHTML),this._videoDialog.find(".e-rte-videoX").val(this._videoWidth),this._videoDialog.find(".e-rte-videoY").val(this._videoHeight));this._videoDialog.ejDialog("open");this._videoDialog.find("textarea.e-rte-video").focus()},_sourceCodeManager:function(){t.isNullOrUndefined(this._sourceDialog)&&this._renderSourceDialog();this._updateTagInfo("body");this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value=this.getHtml();this._sourceDialog.ejDialog("open");this._sourceDialog.find("textarea.e-rte-srctextarea").focus()},_hyperLinkManager:function(){this._linkDialog.ejDialog("open");this._clearLinkFields();var i=this._isIE()?this._currentSelNode:this._getSelectedNode();!t.isNullOrUndefined(i)&&i.tagName.toUpperCase()=="A"?this._txtLinkText.val(n(i).html()):this._txtLinkText.val(this._getSelText());this._selectedHTML=this._getSelText();this._hyperLinkSelection=this._getDocument().selection;i&&!/^(A)$/.test(i.nodeName)&&i.tagName.toUpperCase()=="IMG"&&(i=n(i).parent("a")[0]);i&&/^(A)$/.test(i.nodeName)&&(this._txtURL.val(i.href),this._txtLinkTitle.val(i.title));this._hyperLinkSelection!=null&&(this._hyperLinkSelRange=this._hyperLinkSelection.createRange())},_fileBrowserManager:function(){this._fileDialog.ejDialog("open");this._clearFileFields();var i=this._isIE()?this._currentSelNode:this._getSelectedNode();!t.isNullOrUndefined(i)&&i.tagName.toUpperCase()=="A"?this._fileLinkText.val(n(i).html()):this._fileLinkText.val(this._getSelText());this._selectedHTML=this._getSelText();this._hyperLinkSelection=this._getDocument().selection;i&&!/^(A)$/.test(i.nodeName)&&i.tagName.toUpperCase()=="IMG"&&(i=n(i).parent("a")[0]);i&&/^(A)$/.test(i.nodeName)&&this._fileURL.val(i.href);this._hyperLinkSelection!=null&&(this._hyperLinkSelRange=this._hyperLinkSelection.createRange())},_tableManager:function(){var t=this._rteToolbar.find("li.e-rteItem-createTable"),i,r,u;this.model.isResponsive&&t.length==0?(u=n(this._toolBarObj._liTemplte).outerHeight()-n(this._toolBarObj._liTemplte).height(),t=this._toolBarObj._liTemplte.find("li.e-rteItem-createTable"),n("#"+this._rteId+"_table_wrapper").css({visibility:"hidden",display:"block"}),r=n(this._toolBarObj._liTemplte).offset().top+n(this._toolBarObj._liTemplte).outerHeight()+u-n("#"+this._rteId+"_table_wrapper").offsetParent().offset().top,i=n(t).offset().left-n("#"+this._rteId+"_table_wrapper").offsetParent().offset().left,n("#"+this._rteId+"_table_wrapper").css({visibility:"visible"})):(i=n(t).position().left,r=n(t).position().top+t.height()+7);this._createTable.ejDialog("option","position",{X:i,Y:r});this._createTable.ejDialog("open")},_eTblManager:function(){var s,i,u,e,o,f,r;this._clearEditTableFields();s=this._rteId;i=this._currentSelNode;t.isNullOrUndefined(i)||i.tagName.toLowerCase()!=="td"||(u=n(i).closest("tbody").closest("table"),this._getTableObj("Height").val(u.attr("height")),this._getTableObj("Width").val(u.attr("width")),this._getTableObj("CellSpace").data("ejNumericTextbox").option("value",u[0].cellSpacing),this._getTableObj("CellPad").data("ejNumericTextbox").option("value",u[0].cellPadding),e=u[0].align,t.isNullOrUndefined(e)||e==""||(this._eTblAlign.enable(),this._eTblAlign.option("value",e)),o=n(n(i).closest("tbody")).prev("caption"),o.length>0&&this._eTblCaption.ejCheckBox({checked:!0}),u[0].style!=""&&(this._getTableObj("BrdrPx").data("ejNumericTextbox").option("value",u[0].style.borderWidth.split("px")[0]),r=this._getTableObj("_border_style").data("ejDropDownList"),u[0].style.borderStyle!=""?r.option("value",u[0].style.borderStyle):r.option({selectedItemIndex:0}),r.inputElement.val(u[0].style.borderStyle),this._getTableObj("_border_color").val(u[0].style.borderColor)),this._getTableObj("Style").val(u.attr("style")),f=n(i).closest("tr"),this._getTableObj("RHeight").val(f.attr("height")),this._getTableObj("RAlign").data("ejDropDownList").option("value",f[0].style.textAlign),f[0].style!=""&&(this._getTableObj("RBrdrPx").data("ejNumericTextbox").option("value",f[0].style.borderWidth.split("px")[0]),r=this._getTableObj("RBrdrStyle").data("ejDropDownList"),f[0].style.borderStyle!=""?r.option("value",f[0].style.borderStyle):r.option({selectedItemIndex:0}),r.inputElement.val(f[0].style.borderStyle),this._getTableObj("RBrdrColor").val(f[0].style.borderColor)),this._getTableObj("RStyle").val(f.attr("style")),this._getTableObj("CWidth").val(n(i).attr("width")),this._getTableObj("CAlign").data("ejDropDownList").option("value",i.style.textAlign),i.style!=""&&(this._getTableObj("CBrdrPx").data("ejNumericTextbox").option("value",i.style.borderLeftWidth.split("px")[0]),r=this._getTableObj("CBrdrStyle").data("ejDropDownList"),i.style.borderStyle!=""?r.option("value",i.style.borderStyle):r.option({selectedItemIndex:0}),r.inputElement.val(i.style.borderStyle),this._getTableObj("CBrdrColor").val(i.style.borderColor)),this._getTableObj("CStyle").val(n(i).attr("style")),this._getTableObj("ClWidth").val(n(i).attr("width")),this._getTableObj("ClAlign").data("ejDropDownList").option("value",i.style.textAlign),i.style!=""&&(this._getTableObj("ClBrdrPx").data("ejNumericTextbox").option("value",i.style.borderLeftWidth.split("px")[0]),r=this._getTableObj("ClBrdrStyle").data("ejDropDownList"),i.style.borderStyle!=""?r.option("value",i.style.borderStyle):r.option({selectedItemIndex:0}),r.inputElement.val(i.style.borderStyle),this._getTableObj("ClBrdrColor").val(i.style.borderColor)),this._getTableObj("ClStyle").val(n(i).attr("style")))},_getTableObj:function(n){return this._eTblDialog.find("#"+this._rteId+"_eTbl"+n)},_imageManager:function(){var i,u,r;this._clearImgFields();i=this._isIE()?this._currentSelNode:this._getSelectedNode();t.isNullOrUndefined(i)||i.tagName.toLowerCase()!=="img"||(this._imgWidth=parseInt(i.width),this._imgHeight=parseInt(i.height),this._imgDialog.find(".e-rte-imgUrl").val(i.src),this._imgDialog.find(".e-rte-imgText").val(i.alt),this._imgDialog.find(".e-rte-imgX").val(this._imgWidth),this._imgDialog.find(".e-rte-imgY").val(this._imgHeight),u=n(i).parent("a"),u.length>0&&this._imageLink.val(u.attr("href")),i.style!=""&&(this._imageBorderPx.option("value",i.style.borderWidth.split("px")[0]),this._imageBorderStyle.option("value",i.style.borderStyle),i.style.borderColor.length>0&&(t.browserInfo().name==="msie"&&t.browserInfo().version==="8.0"?this._imgPicker.option("value",i.style.borderColor):(r=i.style.borderColor.split("(")[1].split(")")[0],r=r.split(","),r={r:n.trim(r[0]),g:n.trim(r[1]),b:n.trim(r[2])},this._imgPicker.option("value",this._imgPicker.RGBToHEX(r))))),this._imageStyle.val(n(i).attr("style")));this._imgDialog.ejDialog("open");t.isNullOrUndefined(this._explorerObj)&&this._imgDialog.find(".e-rte-imgUrl").focus()},_toolBarClick:function(i){var s=n(this.itemsContainer).closest("div.e-rte").find("textarea.e-rte"),r=s.ejRTE("instance"),e=s.attr("id"),f=i.currentTarget.id.replace(e,""),o,u;if((n(i.currentTarget).hasClass("e-rteItem-copy")||n(i.currentTarget).hasClass("e-rteItem-cut")||n(i.currentTarget).hasClass("e-rteItem-paste"))&&!r._isIE()?r._openAlert(r._getLocalizedLabels("copyPastAlert")):(t.browserInfo().name!="chrome"&&(u=r._scriptsItems.indexOf(f),r._scriptsItems.indexOf(f)>=0&&n("#"+e+r._scriptsItems[u==0?1:0]).hasClass("e-active")&&r._selectCommand(e+r._scriptsItems[u==0?1:0])),r._selectCommand(i.currentTarget.id)),r._styleItems.indexOf(f)>=0||r._scriptsItems.indexOf(f)>=0)n(i.currentTarget).hasClass("e-isactive")?this.deselectItemByID(i.currentTarget.id):this.selectItemByID(i.currentTarget.id),n(i.currentTarget).hasClass("e-isactive")?n(i.currentTarget).removeClass("e-isactive"):n(i.currentTarget).addClass("e-isactive"),r._scriptsItems.indexOf(f)>=0&&(u=r._scriptsItems.indexOf(f),n("#"+e+r._scriptsItems[u==0?1:0]).removeClass("e-isactive"),this.deselectItemByID(e+r._scriptsItems[u==0?1:0]));else if(r._alignItems.indexOf(f)>=0)for(this.selectItemByID(i.currentTarget.id),u=r._alignItems.indexOf(f),o=0;o<r._alignItems.length;o++)o!=u&&this.deselectItemByID(e+r._alignItems[o]);else r._listItems.indexOf(f)>=0&&(n(i.currentTarget).hasClass("e-isactive")?this.deselectItemByID(i.currentTarget.id):this.selectItemByID(i.currentTarget.id),n(i.currentTarget).hasClass("e-isactive")?n(i.currentTarget).removeClass("e-isactive"):n(i.currentTarget).addClass("e-isactive"),u=r._listItems.indexOf(f),n("#"+e+r._listItems[u==0?1:0]).removeClass("e-isactive"),u==0?this.deselectItemByID(e+r._listItems[1]):this.deselectItemByID(e+r._listItems[0]))},_toggleEditTable:function(){var n=this._isIE()?this._currentSelNode:this._getSelectedNode(),i,r;if(t.isNullOrUndefined(n))return!1;t.isNullOrUndefined(this._toolBarItems)||(r=this._rteToolbar.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable"),i=this.model.isResponsive&&r.length==0?this._toolBarObj._liTemplte.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable"):this._toolBarItems.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable"),t.isNullOrUndefined(n.tagName)||(n&&n.tagName&&n.tagName.toLowerCase()=="td"||n.tagName.toLowerCase()=="table"||n.tagName.toLowerCase()=="tr"?(i.show(),this._createTable.find("div.e-rte-eTblProperties").removeClass("e-disable")):t.isNullOrUndefined(this._createTable)||(i.hide(),this._createTable.find("div.e-rte-eTblProperties").addClass("e-disable"))));this._setIframeHeight()},_formatChange:function(){var i=n(this.element).closest("div.e-rte").find("textarea.e-rte"),t=i.ejRTE("instance"),r=i.attr("id");this.getSelectedValue()!==""&&t._onFormatBlock(this.getSelectedValue());t._focus();t._onChange()},_fontStyleChange:function(){var t=n(this.element).closest("div.e-rte").find("textarea.e-rte"),i=t.ejRTE("instance"),r=t.attr("id");this.getSelectedValue()!==""&&i._onFontName(this.getSelectedValue());i._onChange()},_fontSizeChange:function(){var t=n(this.element).closest("div.e-rte").find("textarea.e-rte"),i=t.ejRTE("instance"),r=t.attr("id");this.getSelectedValue()!==""&&i._onFontSize(this.getSelectedValue());i._onChange()},_colorPaletteClick:function(n){var t;(t=n.target.getAttribute("color-code"))&&(this._focus(),this._onFontColor(t),this._splitMenu.hide(n),this._fontColor=t,this._fontColorSplit.find("span.e-btntxt").css("background-color",t))},_bgColorPaletteClick:function(n){var t;(t=n.target.getAttribute("color-code"))&&(this._focus(),this._onBGColor(t),this._bgSplitMenu.hide(n),this._bgColor=t,this._bgColorSplit.find("span.e-btntxt").css("background-color",t))},_fontColorClick:function(n){if(this._onFontColor(this._fontColor),t.isNullOrUndefined(this._splitMenu))return!1;this._splitMenu.hide(n)},_bgColorClick:function(n){if(this._onBGColor(this._bgColor),t.isNullOrUndefined(this._bgSplitMenu))return!1;this._bgSplitMenu.hide(n)},_selectCommand:function(n){var t=this._rteId,i;n==t+"format"||n==t+"fontName"||n==t+"fontSize"||n==t+"fontColor"||n==t+"backgroundColor"||this._focus();switch(n){case t+"bold":this._onBold();break;case t+"italic":this._onItalics();break;case t+"underline":this._onUnderLine();break;case t+"strikethrough":this._onStrikeThrough();break;case t+"justifyLeft":this._onJustifyLeft();break;case t+"justifyRight":this._onJustifyRight();break;case t+"justifyCenter":this._onJustifyCenter();break;case t+"justifyFull":this._onJustifyFull();break;case t+"cut":this._onCut();break;case t+"copy":this._onCopy();break;case t+"paste":this._onPaste();break;case t+"clearFormat":this._onClearFormat();break;case t+"clearAll":this._clearAllManager();break;case t+"orderedList":this._onOrderList();break;case t+"unorderedList":this._onUnorderList();break;case t+"undo":this._undo();break;case t+"redo":this._redo();break;case t+"indent":this._onIndent();this._indentdepth++;break;case t+"outdent":this._onOutdent();this._indentdepth>0&&this._indentdepth--;break;case t+"createLink":this._hyperLinkManager();break;case t+"image":this._imageManager();break;case t+"createTable":this._tableManager();break;case t+"addRowAbove":this.insertRow(!0);break;case t+"addRowBelow":this.insertRow(!1);break;case t+"addColumnLeft":this.insertColumn(!0);break;case t+"addColumnRight":this.insertColumn(!1);break;case t+"deleteRow":this.removeRow();break;case t+"deleteColumn":this.removeColumn();break;case t+"deleteTable":this.removeTable();break;case t+"superscript":this._onSuperScript();break;case t+"subscript":this._onSubScript();break;case t+"upperCase":this._onUpperCase();break;case t+"lowerCase":this._onLowerCase();break;case t+"video":this._videoManager();break;case t+"fileBrowser":this._fileBrowserManager();break;default:this._onChange()}n!=t+"createLink"&&n!=t+"image"&&n!=t+"video"&&n!=t+"createTable"&&this._onChange();n!=t+"undo"&&n!=t+"redo"&&this._setBackupData();i=this._isIE()?this._currentSelNode:this._getSelectedNode();this._updateTagInfo(i)},_focus:function(){browserInfo=t.browserInfo();browserInfo.name=="webkit"?this._getWindow().focus():this._getWindow().document.body.focus();this._restoreSelection(this._selectionRange)},_getWindow:function(){return n(n(this._rteWapper.find(".content-iframe"))[0].contentWindow)[0]},_getDocument:function(){var n=this._rteWapper.find(".content-iframe");try{return n.contents()[0]}catch(t){return""}},_onBold:function(){var n;this.executeCommand("bold",n)},_onItalics:function(){var n;this.executeCommand("italic",n)},_onStrikeThrough:function(){var n;this.executeCommand("strikethrough",n)},_onUnderLine:function(){var n;this.executeCommand("underline",n)},_onJustifyLeft:function(){var n;this.executeCommand("JustifyLeft",n)},_onJustifyRight:function(){var n;this.executeCommand("JustifyRight",n)},_onJustifyCenter:function(){var n;this.executeCommand("JustifyCenter",n)},_onJustifyFull:function(){this._alignFlag=!0;this.executeCommand("justifyfull")},_onCut:function(){var n;this.executeCommand("cut",n)},_onCopy:function(){var n;this.executeCommand("copy",n)},_onPaste:function(){var n;this.executeCommand("paste",n)},_onOrderList:function(){var n;this.executeCommand("insertorderedlist",n)},_onUnorderList:function(){var n;this.executeCommand("insertunorderedlist",n)},_onUndo:function(){this.executeCommand("undo",null)},_onDelete:function(){this.executeCommand("delete",null)},_onRedo:function(){this.executeCommand("redo",null)},_onClearFormat:function(){var n;this.executeCommand("removeformat",n);this._setBackupData();this._onChange();this._updateIframeSkin(this.model.iframeAttribute)},_onFormatBlock:function(i){this._focus();var r;r=document.getSelection?this._getSelectedNode():this._getWindow().document.selection.createRange().parentElement();this._onClearFormat();this.executeCommand("formatBlock",i);t.isNullOrUndefined(this._tempEle)||t.isNullOrUndefined(this._tempEle.get(0))||(n(this._tempEle).get(0).nodeName=="OL"?n(n(this._tempEle).get(0)).find("li").each(function(){n(this).contents().unwrap()}):n(this._tempEle).get(0).nodeName=="LI"&&this._tempEle.contents().unwrap())},_onFontName:function(n){this.executeCommand("fontName",n)},_onFontSize:function(n){this.executeCommand("fontSize",n)},_onFontColor:function(n){this.executeCommand("foreColor",n);this._onChange();this._updateIframeSkin(this.model.iframeAttribute)},_onBGColor:function(n){this.executeCommand("backColor",n);this._onChange()},_onIndent:function(){this._getWindow().document.body.style.wordWrap="break-word";var t=document.getSelection?this._getWindow().document.getSelection().focusNode:this._getWindow().document.selection.createRange().parentElement();t&&/^(OL|UL|LI)$/.test(t.nodeName)?this._listIndent(t):t&&/^(#text)$/.test(t.nodeName)&&/^(OL|UL|LI)$/.test(n(t).parent()[0].nodeName)?this._listIndent(n(t).parents("li")[0],t):this.executeCommand("indent",!1);t&&n(t).focus();this._updateIframeSkin(this.model.iframeAttribute)},_onOutdent:function(){var t=document.getSelection?this._getWindow().document.getSelection().focusNode:this._getWindow().document.selection.createRange().parentElement();t&&/^(OL|UL|LI)$/.test(t.nodeName)?this._listOutdent(t):t&&/^(#text)$/.test(t.nodeName)&&/^(OL|UL|LI)$/.test(n(t).parent()[0].nodeName)?this._listOutdent(n(t).parents("li")[0],t):this.executeCommand("outdent",!1)},_onSelectAll:function(){this.executeCommand("selectall")},_onHyperLink:function(n){this.executeCommand("createlink",n)},_onInsertLink:function(){var r,u,i,f;if(!this._isUrl(n.trim(this._txtURL.val())))return this._txtURL.addClass("e-error"),!1;i=t.browserInfo().name=="msie"||t.browserInfo().name=="chrome"?this._currentSelNode:this._getSelectedNode();t.isNullOrUndefined(i)||i.tagName.toUpperCase()!="A"?t.isNullOrUndefined(i)||i.tagName.toUpperCase()!="IMG"?(r=t.buildTag("a","",{},{href:this._txtURL.val(),title:this._txtLinkTitle.val()}),r[0].target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"_self",this._focus(),this._isIE()?(this._selectedHTML.length==0&&(this._selectedHTML=this._txtLinkText.val()===""?this._txtURL.val():this._txtLinkText.val()),r[0].innerHTML=this._selectedHTML,u=r[0].outerHTML):(this._txtLinkText.val()===""?r.html(this._txtURL.val()):r.html(this._txtLinkText.val()),u=n("<div>").append(n(r).clone()).html()),u&&(this._isIE()?this._pasteHtml(u):this._getDocument().execCommand("inserthtml",!1,u),this._focus())):(f=n(i).parent("a")[0],t.isNullOrUndefined(f)?(r=t.buildTag("a","",{},{href:this._txtURL.val(),title:this._txtLinkTitle.val()}),r[0].target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"_self",n(i.outerHTML).appendTo(n(r)),n(i).replaceWith(n(r))):(f.href=this._txtURL.val(),f.title=this._txtLinkTitle.val(),f.target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"_self")):(i.href=this._txtURL.val(),i.title=this._txtLinkTitle.val(),i.innerHTML=this._txtLinkText.val(),i.target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"_self");this._linkDialog.ejDialog("close")},_setImageProperties:function(i,r,u,f,e,o,s){this.model.showDimensions&&(r!=""&&(i[0].width=r),u!=""&&(i[0].height=u));i=n(i).attr("style",f);border=e+"px ";border+=!t.isNullOrUndefined(o)&&o!=""?o+" ":"solid ";border+=!t.isNullOrUndefined(s)&&s!=""?s:"#000000";i=i.css("border",border)},_onInsertImage:function(){var o=this._imgDialog.find(".e-rte-imgUrl"),h=this._imgDialog.find(".e-rte-imgText"),c=this._imgDialog.find(".e-rte-imgX").val(),l=this._imgDialog.find(".e-rte-imgY").val(),i=this,s,w,r;this._restoreSelection(this._selectionRange);var a="",f=i._imageLink.val(),v=i._imageBorderPx.getValue(),y=i._imageBorderStyle.getSelectedValue(),e=i._imgPicker.getValue(),p=i._imageStyle.val(),u=i._isIE()?i._currentSelNode:i._getSelectedNode();if(t.isNullOrUndefined(u)||(a=u.nodeName.toUpperCase()),e=!t.isNullOrUndefined(e)&&e.length>0?e:"",s=o.val().startsWith("~")?o.val().replace(o.val().substr("0","1"),".."):o.val(),a!="IMG")w=n("<img>",{src:s,error:function(){o.addClass("e-error")},success:function(){var r=t.buildTag("img","",{},{alt:h.val(),src:s}),u,o;if(i._setImageProperties(r,c,l,p,v,y,e),f!="")if(i._isUrl(n.trim(f)))u=t.buildTag("a","",{},{href:f}),u[0].target=i._dialogchkTarget.ejCheckBox("isChecked")?"_blank":"_self",n(r[0].outerHTML).appendTo(u),r=u;else return i._imageLink.addClass("e-error"),!1;o=r[0].outerHTML;i.executeCommand("inserthtml",o)}});else{if(u.src=s,u.alt=h.val(),i._setImageProperties(n(u),c,l,p,v,y,e),r=n(u).parent("a"),f!="")if(i._isUrl(n.trim(f)))r.length>0?r.attr("href",f):(r=t.buildTag("a","",{},{href:f}),n(u.outerHTML).appendTo(r),n(u).replaceWith(r));else return i._imageLink.addClass("e-error"),!1;else r.length>0&&r.attr("href","");!t.isNullOrUndefined(r)&&r.length>0&&(r[0].target=this._dialogchkTarget.ejCheckBox("isChecked")?"_blank":"_self")}i._imgDialog.ejDialog("close")},_insertVideo:function(i){var u=n.trim(this._videoDialog.find("textarea.e-rte-video")[0].value),f=this._videoDialog.find(".e-rte-videoX").val(),e=this._videoDialog.find(".e-rte-videoY").val(),r;this._restoreSelection(this._selectionRange);i.target.id==="video_insert"&&u!==""?(r=n(u)[0],this.model.showDimensions&&!t.isNullOrUndefined(r)&&(f!=""&&(r.width=f),e!=""&&(r.height=e)),this._editVideo&&n(this._editVideo).remove(),t.isNullOrUndefined(r)||this.executeCommand("inserthtml",r.outerHTML),this._onChange(),this._setBackupData(),this._videoDialog.ejDialog("close")):i.target.id==="video_cancel"?this._videoDialog.ejDialog("close"):this._openAlert(this._getLocalizedLabels("videoError"));this._videoDialog.find("textarea.e-rte-video")[0].value="";this._videoDialog.find(".e-rte-videoX").val("");this._videoDialog.find(".e-rte-videoY").val("");this._chkvideoDimensions.ejCheckBox({check:!0})},_oneditTable:function(){var i=this._currentSelNode,c=n(i).closest("tbody").closest("table"),s=n(n(i).closest("tbody")).prev("caption"),h,f,l,r,u,o;this._eTblCaption.ejCheckBox("isChecked")?s.length==0&&t.buildTag("caption").append(n('<br type="_moz">')).insertBefore(n(n(i).closest("tbody"))):s.length>0&&s.remove();h=this._eTblAlign.getSelectedValue();f=this._getTableObj("Style").val();h=="center"&&(f+=";margin: 0 auto;");f&&c.attr("style",f);c.attr({width:this._getTableObj("Width").val(),height:this._getTableObj("Height").val(),cellPadding:this._getTableObj("CellPad").data("ejNumericTextbox").getValue(),cellSpacing:this._getTableObj("CellSpace").data("ejNumericTextbox").getValue(),align:h}).css({"border-width":this._getTableObj("BrdrPx").data("ejNumericTextbox").getValue()+"px","border-style":this._getTableObj("_border_style").data("ejDropDownList").getSelectedValue(),"border-color":this._getTableObj("_border_color").val()});l=n(i).closest("tr");l.attr({style:this._getTableObj("RStyle").val()}).css({height:this._getTableObj("RHeight").val(),"text-align":this._getTableObj("RAlign").data("ejDropDownList").getSelectedValue(),"border-width":this._getTableObj("RBrdrPx").data("ejNumericTextbox").getValue()+"px","border-style":this._getTableObj("RBrdrStyle").data("ejDropDownList").getSelectedValue(),"border-color":this._getTableObj("RBrdrColor").val()});r=this._getTableObj("CBrdrPx").data("ejNumericTextbox").getValue()+"px ";r+=this._getTableObj("CBrdrStyle").data("ejDropDownList").getSelectedValue()+" ";r+=this._getTableObj("CBrdrColor").val();var a=n(i).closest("tr"),e=a.closest("table").find("tr"),v=a.find("td").index(i);for(u=0;u<e.length;u++)o=n(n(e[u]).find("td")[v]),e.length>1?(o.attr({style:this._getTableObj("CStyle").val()}).css({width:this._getTableObj("ColumnHeight").val(),"text-align":this._getTableObj("CAlign").data("ejDropDownList").getSelectedValue(),"border-left":r,"border-right":r}),u==0&&o.css("border-top",r),u==e.length-1&&o.css("border-bottom",r)):n(i).css("border",r);n(i).attr({style:this._getTableObj("ClStyle").val()}).css({width:this._getTableObj("CellHeight").val(),"text-align":this._getTableObj("ClAlign").data("ejDropDownList").getSelectedValue(),"border-width":this._getTableObj("ClBrdrPx").data("ejNumericTextbox").getValue()+"px","border-style":this._getTableObj("ClBrdrStyle").data("ejDropDownList").getSelectedValue(),"border-color":this._getTableObj("ClBrdrColor").val()});this._eTblDialog.ejDialog("close")},_clearAllManager:function(){this._alertWindow.find(".e-alert-cancel").show();this._openAlert(this._getLocalizedLabels("deleteAlert"))},_onUnlink:function(){var n;this.executeCommand("unlink",n)},_onSuperScript:function(){var n;this.executeCommand("SuperScript",n)},_onSubScript:function(){var n;this.executeCommand("SubScript",n)},_onInsertTable:function(n,t,i){var r=this._tableGenerator(n,t,i);this.executeCommand("inserthtml",r)},_onUpperCase:function(){if(document.getSelection){var a=this._getWindow().getSelection(),i=this._saveSelection(),r=i.commonAncestorContainer,f=i.commonAncestorContainer.children;if(f!=null){var e=i.cloneContents(),o=this._changeCase(e,"Upper"),s=n(o).clone(),u=document.createElement("div");n(u).append(n(s));u.innerHTML!=null&&u.innerHTML!=""&&this._getWindow().document.execCommand("inserthtml",!1,u.innerHTML)}else{var h=r.nodeValue.substring(i.startOffset,i.endOffset).toUpperCase(),c=r.nodeValue.substr(0,i.startOffset),l=r.nodeValue.substring(i.endOffset);r.nodeValue=c+h+l}}else{if(this._getWindow().document.selection.type.toLowerCase()=="control")return;this._seleText=t.isNullOrUndefined(this._seleText)?"":this._seleText;this._getDocument().selection.createRange().pasteHTML(this._seleText.toUpperCase())}},_changeCase:function(n,t){var i=n.childNodes,r;if(i.length>0)for(r=0;r<i.length;r++)i[r].nodeType==3?i[r].nodeValue=t=="Upper"?i[r].nodeValue.toUpperCase():i[r].nodeValue.toLowerCase():i[r].nodeType==1&&i[r].tagName.toUpperCase()!="FONT"&&this._changeCase(i[r],t);return i},_onLowerCase:function(){if(document.getSelection){var a=this._getWindow().getSelection(),i=this._saveSelection(),r=i.commonAncestorContainer,f=i.commonAncestorContainer.children;if(f!=null){var e=i.cloneContents(),o=this._changeCase(e,"Lower"),s=n(o).clone(),u=document.createElement("div");n(u).append(n(s));u.innerHTML!=null&&u.innerHTML!=""&&this._getWindow().document.execCommand("inserthtml",!1,u.innerHTML)}else{var h=r.nodeValue.substring(i.startOffset,i.endOffset).toLowerCase(),c=r.nodeValue.substr(0,i.startOffset),l=r.nodeValue.substring(i.endOffset);r.nodeValue=c+h+l}}else{if(this._getWindow().document.selection.type.toUpperCase()=="control")return;this._seleText=t.isNullOrUndefined(this._seleText)?"":this._seleText;this._getDocument().selection.createRange().pasteHTML(this._seleText.toLowerCase())}},_listIndent:function(n){var i,r;return(i=n.previousSibling,i&&this._isListNode(i))?(i.appendChild(n),!0):i&&i.nodeName=="LI"&&this._isListNode(i.lastChild)?(i.lastChild.appendChild(n),this._combineLists(n.lastChild,i.lastChild,n),!0):(i=n.nextSibling,i&&this._isListNode(i))?(i.insertBefore(n,i.firstChild),!0):i&&i.nodeName=="LI"&&this._isListNode(n.lastChild)?!1:(i=n.previousSibling,i&&i.nodeName=="LI")?(r=t.buildTag(n.parentNode.nodeName)[0],i.appendChild(r),r.appendChild(n),this._combineLists(n.lastChild,r,n),!0):!0},_combineLists:function(t,i,r){var u;if(this._isListNode(t)){while(u=r.lastChild.firstChild)i.appendChild(u);n(t).remove()}},_isListNode:function(n){return n&&/^(OL|UL)$/.test(n.nodeName)},_isFirstChild:function(n){return n.parentNode.firstChild==n},_isLastChild:function(n){return n.parentNode.lastChild==n},_removeEmptyList:function(t){t&&n(t).children().length===0&&n(t).remove()},_listOutdent:function(t){var r=n(t.parentNode),i=r[0].parentNode;return(t=n(t),this._isFirstChild(t[0])&&this._isLastChild(t[0]))?(i.nodeName=="LI"?(t.insertAfter(i),this._removeEmptyList(i),r.remove()):this._isListNode(i)?r.remove():this.executeCommand("outdent",!1),!0):this._isFirstChild(t[0])?(i.nodeName=="LI"?(t.insertAfter(i),t[0].appendChild(r[0]),this._removeEmptyList(i)):this._isListNode(i)?i.insertBefore(t[0],r[0]):this.executeCommand("outdent",!1),!0):this._isLastChild(t[0])?(i.nodeName=="LI"?t.insertAfter(i):this._isListNode(i)?t.insertAfter(r[0]):this.executeCommand("outdent",!1),!0):(this.executeCommand("outdent",!1),!1)},_updateIndent:function(i){t.isNullOrUndefined(this._toolBarObj)||(n("#"+this._rteId+"indent").hasClass("e-disable")||this._toolBarObj.enableItemByID(this._rteId+"indent"),i&&/^(LI)$/.test(i.nodeName)&&n(i).parents(i.parentNode.nodeName).last().find("li").index(i)===0&&this._toolBarObj.disableItemByID(this._rteId+"indent"))},_updateCharCount:function(){if(this.model.showFooter&&this.model.showWordCount){var t=this._getText();this._wordCount.html(this._getLocalizedLabels("characters")+" : "+n.trim(t).length)}},_updateTagInfo:function(i){var e="",u,o=1,r,f;if(this._curNode=t.isNullOrUndefined(i)?"":i.tagName?i.tagName.toLowerCase():"html",this.model.showFooter&&this.model.showHtmlTagInfo){if(this._curNode!="body"&&this._curNode!="html"&&this._curNode!==""){for(r=n(i).parents(),f=r.length-1;f>=0;f--)u=r[f].tagName.toLowerCase(),u!="body"&&u!="html"?e+=" » "+u:o++;e+=" » "+this._curNode;n(i).parents().length>0&&(t.isNullOrUndefined(r[r.length-o])||(this._pTag=r[r.length-o].tagName.toLowerCase()))}this._tags=e;this._responsiveTagList()}},_responsiveTagList:function(){n(this._htmlInfo).html(this._tags);n(this._rteWapper).outerWidth()<n(this._rteWapper).find(".e-rte-footer-left").outerWidth()+n(this._rteWapper).find(".e-rte-footer-right").outerWidth()?n(this._htmlInfo).html(" » "+this._pTag+" » ... ...  » "+this._curNode):n(this._htmlInfo).html(this._tags)},_updateValue:function(){var n=this._updateXhtml();this.value(n);this.element.val(n)},_imageXhtml:function(n){for(var v=/<img(.*?)>/ig,c,u=0,i=[],s,f,r,e;(c=v.exec(n))!==null;)i[u]=c[0].toString(),u++;for(s=[],f=0;f<i.length;f++)s[f]=i[f];for(r=0;r<i.length;r++)i[r].indexOf("/")==-1?i[r]=i[r].substr(0,i[r].length)+"/"+i[r].substr(i[r].length-1,i[r].length):i[r].lastIndexOf("/")!=i[r].length-2&&(i[r]=i[r].substr(0,i[r].length-1)+"/"+i[r].substr(i[r].length-1,i[r].length));var l=/(alt)=("[^"]*")/i,o=/(src)=("[^"]*")/g,a=/(src)=('[^"]*')/g;for(r=0;r<i.length;r++){var y=t.isNullOrUndefined(l.exec(i[r]))?/(alt)=('[^"]*')/i.exec(i[r]):l.exec(i[r]),p=t.isNullOrUndefined(o.exec(i[r]))?a.exec(i[r]):o.exec(i[r]),h=t.isNullOrUndefined(i[r].match(o))?i[r].match(a):i[r].match(o),w=t.isNullOrUndefined(i[r].match(/(alt)=("[^"]*")/g))?i[r].match(/(alt)=('[^"]*')/g):i[r].match(/(alt)=("[^"]*")/g);if(y==null)i[r]=i[r].substr(0,i[r].length-2)+' alt=""'+i[r].substr(i[r].length-2,i[r].length);else for(u=w.length-1;u>0;u--)i[r]=i[r].replace(h[u],"");if(p==null)i[r]=i[r].substr(0,i[r].length-2)+' src=""'+i[r].substr(i[r].length-2,i[r].length);else for(u=h.length-1;u>0;u--)i[r]=i[r].replace(h[u],"")}for(e=0;e<i.length;e++)n=n.replace(s[e],i[e]);return n},_styleXhtml:function(n){for(var b=/<((?:(?!\/)).)*?>/ig,c,l=0,r=[],h,s,o,f,u,i;(c=b.exec(n))!==null;)r[l]=c[0].toString(),l++;for(h=[],s=0;s<r.length;s++)h[s]=r[s];for(i=0;i<r.length;i++){if(r[i].indexOf("style=")!=-1){if(r[i].indexOf("<table")!=-1&&r[i].indexOf("align=")!=-1){var e=/( align)=("[^"]*")/i.exec(r[i]),t=e[0];t=t=='align="center"'?r[i].indexOf("float:")!=-1?"":t.replace(/\"/gi,"").replace("=",":").replace("align","float"):t=='align="left"'?r[i].indexOf("float:")!=-1?"":t.replace(/\"/gi,"").replace("=",":").replace("align","float"):t=='align="right"'?r[i].indexOf("float:")!=-1?"":t.replace(/\"/gi,"").replace("=",":").replace("align","float"):r[i].indexOf("float:")!=-1?"":t.replace(/\"/gi,"").replace("=",":").replace("align","float");o=/(style)=("[^"]*")/i;f=o.exec(r[i]);f!=null&&(u=f[0],t!=""&&(u=u.substr(0,u.length-1)+t+';"'),r[i]=r[i].replace(e[0],"").replace(f[0],u))}if(r[i].indexOf("height=")!=-1){var a=/( height)=("[^"]*")/i,e=a.exec(r[i]),t=e[0];t=t.replace(/\"/gi,"").replace("=",":");o=/(style)=("[^"]*")/i;f=o.exec(r[i]);f!=null&&(u=f[0],u=u.substr(0,u.length-1)+t+';"',r[i]=r[i].replace(e[0],"").replace(f[0],u))}if(r[i].indexOf("width=")!=-1){var v=/( width)=("[^"]*")/i,e=v.exec(r[i]),t=e[0];t=t.replace(/\"/gi,"").replace("=",":");o=/(style)=("[^"]*")/i;f=o.exec(r[i]);f!=null&&(u=f[0],u=u.substr(0,u.length-1)+t+';"',r[i]=r[i].replace(e[0],"").replace(f[0],u))}if(r[i].indexOf("type=")!=-1){var y=/( type)=("[^"]*")/i,e=y.exec(r[i]),t=e[0];t=t=='type="a"'?t.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("a","lower-alpha"):t=='type="A"'?t.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("a","upper-alpha"):t=='type="1"'?t.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("1","decimal"):t=='type="i"'?t.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("i","lower-roman"):t=='type="I"'?t.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("I","upper-roman"):t.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type");o=/(style)=("[^"]*")/i;f=o.exec(r[i]);f!=null&&(u=f[0],u=u.substr(0,u.length-1)+t+';"',r[i]=r[i].replace(e[0],"").replace(f[0],u))}if(r[i].indexOf("valign=")!=-1){var p=/( valign)=("[^"]*")/i,e=p.exec(r[i]),t=e[0];t=t=='valign="center"'?r[i].indexOf("vertical-align:")!=-1?"":t.replace(/\"/gi,"").replace("=",":").replace("valign","vertical-align"):t=='valign="left"'?r[i].indexOf("vertical-align:")!=-1?"":t.replace(/\"/gi,"").replace("=",":").replace("valign","vertical-align"):t=='valign="right"'?r[i].indexOf("vertical-align:")!=-1?"":t.replace(/\"/gi,"").replace("=",":").replace("valign","vertical-align"):r[i].indexOf("vertical-align:")!=-1?"":t.replace(/\"/gi,"").replace("=",":").replace("valign","vertical-align");o=/(style)=("[^"]*")/i;f=o.exec(r[i]);f!=null&&(u=f[0],t!=""&&(u=u.substr(0,u.length-1)+t+';"'),r[i]=r[i].replace(e[0],"").replace(f[0],u))}if(r[i].indexOf("align=")!=-1){var w=/( align)=("[^"]*")/i,e=w.exec(r[i]),t=e[0];t=t=='align="center"'?r[i].indexOf("text-align:")!=-1?"":t.replace(/\"/gi,"").replace("=",":").replace("align","text-align"):t=='align="left"'?r[i].indexOf("text-align:")!=-1?"":t.replace(/\"/gi,"").replace("=",":").replace("align","text-align"):t=='align="right"'?r[i].indexOf("text-align:")!=-1?"":t.replace(/\"/gi,"").replace("=",":").replace("align","text-align"):r[i].indexOf("text-align:")!=-1?"":t.replace(/\"/gi,"").replace("=",":").replace("align","text-align");o=/(style)=("[^"]*")/i;f=o.exec(r[i]);f!=null&&(u=f[0],t!=""&&(u=u.substr(0,u.length-1)+t+';"'),r[i]=r[i].replace(e[0],"").replace(f[0],u))}}if(r[i].indexOf("style=")==-1){if(r[i].indexOf("height=")!=-1){var a=/(height)=("[^"]*")/i,e=a.exec(r[i]),t=e[0];t=t.replace(/\"/gi,"").replace("=",":");r[i]=r[i].replace(e[0],'style="'+t+';"')}if(r[i].indexOf("width=")!=-1){var v=/(width)=("[^"]*")/i,e=v.exec(r[i]),t=e[0];t=t.replace(/\"/gi,"").replace("=",":");r[i]=r[i].replace(e[0],'style="'+t+';"')}if(r[i].indexOf("type=")!=-1){var y=/(type)=("[^"]*")/i,e=y.exec(r[i]),t=e[0];t=t=='type="a"'?t.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("a","lower-alpha"):t=='type="A"'?t.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("a","upper-alpha"):t=='type="1"'?t.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("1","decimal"):t=='type="i"'?t.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("i","lower-roman"):t=='type="I"'?t.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("I","upper-roman"):t.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type");r[i]=r[i].replace(e[0],'style="'+t+';"')}if(r[i].indexOf("valign=")!=-1){var p=/(valign)=("[^"]*")/i,e=p.exec(r[i]),t=e[0];t=t=='valign="center"'?t.replace(/\"/gi,"").replace("=",":").replace("valign","text-align"):t=='valign="left"'?t.replace(/\"/gi,"").replace("=",":").replace("valign","text-align"):t=='valign="right"'?t.replace(/\"/gi,"").replace("=",":").replace("valign","text-align"):t.replace(/\"/gi,"").replace("=",":").replace("valign","text-align");r[i]=r[i].replace(e[0],'style="'+t+';"')}if(r[i].indexOf("align=")!=-1){var w=/(align)=("[^"]*")/i,e=w.exec(r[i]),t=e[0];t=t=='align="center"'?t.replace(/\"/gi,"").replace("=",":").replace("align","text-align"):t=='align="left"'?t.replace(/\"/gi,"").replace("=",":").replace("align","text-align"):t=='align="right"'?t.replace(/\"/gi,"").replace("=",":").replace("align","text-align"):t.replace(/\"/gi,"").replace("=",":").replace("align","text-align");r[i]=r[i].replace(e[0],'style="'+t+';"')}}}for(i=0;i<r.length;i++)n=n.replace(h[i],r[i]);return n},_startXhtml:function(n){var t;if(n.indexOf("start=")!=-1){for(var f=/start=\"(.*?)\"/ig,i=[],r=0,u;(u=f.exec(n))!=null;)i[r]=u[0],r++;for(t=0;t<i.length;t++)n=n.replace(i[t],"")}return n},_fontXhtml:function(n){var t;if(n.indexOf("<font")!=-1){for(var f=/<font(.*?)>/ig,i=[],r=0,u;(u=f.exec(n))!=null;)i[r]=u[0],r++;for(t=0;t<i.length;t++)n=n.replace(i[t],"").replace(/<\/font>/gi,"")}return n},_tdXhtml:function(n){for(var o=/<td((?:(?!<\/td>).))*?<td/ig,f,e=0,i=[],r,u,t;(f=o.exec(n))!=null;)i[e]=f[0],e++;for(r=[],t=0;t<i.length;t++)r[t]=i[t];for(t=0;t<i.length;t++)u=i[t].lastIndexOf("<td"),i[t]=i[t].substr(0,u)+"<\/td>"+i[t].substr(u,i[t].length);for(t=0;t<i.length;t++)n=n.replace(r[t],i[t]);return n},_ptagXhtml:function(n){var f=/<\/p>((?:(?!<p).))*<\/p>/ig,r,e=0,i=[],u,t;if((r=f.exec(n))!=null)while((r=f.exec(n))!=null)i[e]=r[0],e++;for(u=[],t=0;t<i.length;t++)u[t]=i[t];for(t=0;t<i.length;t++)i[t].indexOf("<p")==-1&&(i[t]=i[t].substr(0,i[t].length-4));for(t=0;t<i.length;t++)n=n.replace(u[t],i[t]);return n},_updateXhtml:function(){var l=this._getDocument().body.innerHTML,t,yt,v,d,nt,pt,u,c,k,lt,st,tt,at,ht,h,y,ii,wt,bt,i,p,g,s,kt,n;if(this.model.enableXHTML){if(l=l.replace(/hhh/g,""),l=l.replace(/<br>/g,"<br/>"),l=l.replace(/contenteditable="false"/g,""),l=l.replace(/contenteditable="true"/g,""),l=l.replace(/&nbsp;/g," "),l=l.replace(/<hr>/g,"<hr/>"),l=this._imageXhtml(l),t=l,t=t.replace(/\s+/g," "),t=t.replace(/> </gi,"><"),t.indexOf("<table")!=-1){for(var dt=/<table(.*?)<\/table>/ig,ut,ft=0,r=[];(ut=dt.exec(t))!=null;)r[ft]=ut[0],ft++;for(d=[],n=0;n<r.length;n++)d[n]=r[n];for(n=0;n<r.length;n++)if(r[n]=r[n].replace(/<p>/gi,""),r[n]=r[n].replace(/<\/p>/gi,""),r[n].indexOf("<p")!=-1)for(yt=0;yt<r[n].length;yt++)if(nt=r[n].indexOf("<p"),v=0,nt!=-1)for(i=nt+4;i<r[n].length-7;i++)r[n].charAt(i)==">"&&v==0&&(r[n]=r[n].substr(0,nt)+r[n].substr(i+1,r[n].length-1),v++);for(n=0;n<r.length;n++)t=t.replace(d[n],r[n])}if(t.indexOf("<td")!=-1)for(n=0;n<2;n++)t=this._tdXhtml(t);if(t.indexOf("<tr")!=-1){for(var dt=/<tr(.*?)<\/tr>/ig,ut,ft=0,r=[];(ut=dt.exec(t))!=null;)r[ft]=ut[0],ft++;for(d=[],n=0;n<r.length;n++)d[n]=r[n];for(n=0;n<r.length;n++)y=r[n].lastIndexOf("<\/tr>"),lt=r[n].charAt(y-5)+r[n].charAt(y-4)+r[n].charAt(y-3)+r[n].charAt(y-2)+r[n].charAt(y-1),lt!="<\/td>"&&(r[n]=r[n].substr(0,y)+"<\/td>"+r[n].substr(y,r[n].length));for(n=0;n<r.length;n++)t=t.replace(d[n],r[n])}if(t.indexOf("<input")!=-1){for(var gt=/<input((?:(?!\/).))*?>/ig,ut,ft=0,r=[];(ut=gt.exec(t))!=null;)r[ft]=ut[0],ft++;for(d=[],n=0;n<r.length;n++)d[n]=r[n];for(n=0;n<r.length;n++)nt=r[n].indexOf(">"),r[n]=r[n].substr(0,nt)+"/"+r[n].substr(nt,r[n].length-1),v++;for(n=0;n<r.length;n++)t=t.replace(d[n],r[n]);t=t.replace(/<\/input>/gi,"")}if(t.indexOf("<param")!=-1){for(var gt=/<param((?:(?!\/).))*?>/ig,ut,ft=0,r=[];(ut=gt.exec(t))!=null;)r[ft]=ut[0],ft++;for(d=[],n=0;n<r.length;n++)d[n]=r[n];for(n=0;n<r.length;n++)nt=r[n].indexOf(">"),r[n]=r[n].substr(0,nt)+"/"+r[n].substr(nt,r[n].length-1),v++;for(n=0;n<r.length;n++)t=t.replace(d[n],r[n]);t=t.replace(/<\/param>/gi,"")}if(t.indexOf("<p ")!=-1||t.indexOf("<p>")!=-1){for(var fi=/<p(.*)<\/p>/ig,ni,ti=0,ot=[];(ni=fi.exec(t))!=null;)ot[ti]=ni[0],ti++;for(pt=[],n=0;n<ot.length;n++)pt[n]=ot[n];if(s=ot[0].length-1,u=ot[0],u.indexOf("<p")!=-1)for(c=u.indexOf("<p");c<=s;c++)if(y="",n=0,c<s-3&&(y=u.charAt(c)+u.charAt(c+1)),y=="<p")for(k=c+1;k<=s;k++)if((lt=u.charAt(k)+u.charAt(k+1)+u.charAt(k+2)+u.charAt(k+3))=="<\/p>"&&n++,(lt=u.charAt(k)+u.charAt(k+1))=="<p"){if(n==0&&u.indexOf("<div")!=-1&&(st=u.substr(c,k-c),st.indexOf("<div")!=-1)){for(tt=st.indexOf("<div"),at=0,h=c+tt+1;h<u.length-1;h++)y=u.charAt(h)+u.charAt(h+1)+u.charAt(h+2)+u.charAt(h+3)+u.charAt(h+4)+u.charAt(h+5),y=="<\/div>"&&at==0&&(ht=h);u=u.substr(0,c+tt)+"<\/span><\/p>"+u.substr(c+tt,-(c+tt)+ht+6)+"<p><span>"+u.substr(ht+6,u.length-1);n++}if(n==0){if(u.indexOf("<table")!=-1&&(st=u.substr(c,k-c),st.indexOf("<table")!=-1)){for(tt=st.indexOf("<table"),at=0,h=c+tt+1;h<u.length-1;h++)y=u.charAt(h)+u.charAt(h+1)+u.charAt(h+2)+u.charAt(h+3)+u.charAt(h+4)+u.charAt(h+5)+u.charAt(h+6)+u.charAt(h+7),y=="<\/table>"&&at==0&&(ht=h);u=u.substr(0,c+tt)+"<\/span><\/p>"+u.substr(c+tt,-(c+tt)+ht+8)+"<p><span>"+u.substr(ht+8,u.length-1);n++}n==0&&(u=u.substr(0,k-1)+"<\/p>"+u.substr(k,u.length-1),s++,n++)}}for(u=u.replace(/<\/p><\/p>/gi,"<\/p>"),ii=[],n=0;n<ot.length;n++)ii[n]=ot[n];for(n=0;n<2;n++)u=this._ptagXhtml(u);for(var ei=/<p(.*?)<\/p>/ig,ri,s=0,w=[];(ri=ei.exec(u))!=null;)w[s]=ri[0],s++;for(wt=[],n=0;n<w.length;n++)wt[n]=w[n];for(i=0;i<w.length;i++){if(w[i].indexOf("<table")!=-1){for(var ct=/<table(.*)<\/table>/ig,it,rt=0,o=[];(it=ct.exec(w[i]))!=null;)o[rt]=it[0],rt++;for(p=[],n=0;n<o.length;n++)p[n]=o[n];o[0]="<\/span><\/p>"+o[0]+"<p><span>";w[i]=w[i].replace(p[0],o[0])}if(w[i].indexOf("<div")!=-1){for(var ct=/<div(.*)<\/div>/ig,it,rt=0,o=[];(it=ct.exec(w[i]))!=null;)o[rt]=it[0],rt++;for(p=[],n=0;n<o.length;n++)p[n]=o[n];o[0]="<\/span><\/p>"+o[0]+"<p><span>";w[i]=w[i].replace(p[0],o[0])}}for(n=0;n<w.length;n++)u=u.replace(wt[n],w[n]);t=t.replace(pt[0],u)}if(t.indexOf("<span")!=-1){for(var oi=/<span(.*?)<\/span>/ig,ui,v=0,a=[];(ui=oi.exec(t))!=null;)a[v]=ui[0],v++;for(bt=[],n=0;n<a.length;n++)bt[n]=a[n];for(i=0;i<a.length;i++){if(a[i].indexOf("<table")!=-1){for(var ct=/<table(.*)<\/table>/ig,it,rt=0,o=[];(it=ct.exec(a[i]))!=null;)o[rt]=it[0],rt++;for(p=[],n=0;n<o.length;n++)p[n]=o[n];o[0]="<\/span>"+o[0]+"<span>";a[i]=a[i].replace(p[0],o[0])}if(a[i].indexOf("<div")!=-1){for(var ct=/<div(.*)<\/div>/ig,it,rt=0,o=[];(it=ct.exec(a[i]))!=null;)o[rt]=it[0],rt++;for(p=[],n=0;n<o.length;n++)p[n]=o[n];o[0]="<\/span>"+o[0]+"<span>";a[i]=a[i].replace(p[0],o[0])}if(a[i].indexOf("<p")!=-1){for(var ct=/<p(.*)<\/p>/ig,it,rt=0,o=[];(it=ct.exec(a[i]))!=null;)o[rt]=it[0],rt++;for(p=[],n=0;n<o.length;n++)p[n]=o[n];o[0]="<\/span>"+o[0]+"<span>";a[i]=a[i].replace(p[0],o[0])}}for(n=0;n<a.length;n++)t=t.replace(bt[n],a[n])}if(t.indexOf("<ol")!=-1){for(var vt=/<ol(.*?)<\/ol>/ig,et,v=0,e=[];(et=vt.exec(t))!==null;)e[v]=et[0].toString(),v++;for(g=[],s=0;s<e.length;s++)g[s]=e[s];for(n=0;n<e.length;n++)e[n]=e[n].replace(/<br\/>/gi,"");for(n=0;n<e.length;n++)t=t.replace(g[n],e[n])}if(t.indexOf("<table")!=-1){for(var vt=/<table(.*?)><\/table>/ig,et,v=0,e=[];(et=vt.exec(t))!==null;)e[v]=et[0].toString(),v++;for(g=[],s=0;s<e.length;s++)g[s]=e[s];for(n=0;n<e.length;n++)e[n]=e[n].replace(/<br\/>/gi,"");for(n=0;n<e.length;n++)t=t.replace(g[n],e[n])}if(t.indexOf("style")!=-1){for(var vt=/style="(.*?)"/ig,et,v=0,e=[];(et=vt.exec(t))!==null;)e[v]=et[1].toString(),v++;for(g=[],s=0;s<e.length;s++)g[s]=e[s];for(n=0;n<e.length;n++)e[n]=e[n].replace(/"/gi,"");for(n=0;n<e.length;n++)t=t.replace(g[n],e[n])}if(t.indexOf("style")!=-1){for(var vt=/style='(.*?)'/ig,et,v=0,e=[];(et=vt.exec(t))!==null;)e[v]=et[1].toString(),v++;for(g=[],s=0;s<e.length;s++)g[s]=e[s];for(n=0;n<e.length;n++)e[n]=e[n].replace(/"/gi,"");for(n=0;n<e.length;n++)t=t.replace(g[n],e[n])}if(t=this._styleXhtml(t),t=this._fontXhtml(t),t.indexOf("<br ")!=-1||t.indexOf("<br>")!=-1){for(var b=/<br(.*?)>/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(n=0;n<f.length;n++)t=t.replace(f[n],"<br/>")}if(t.indexOf("<b ")!=-1||t.indexOf("<b>")!=-1){for(var b=/<b((?:(?!r).))*?>/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(n=0;n<f.length;n++)t=t.replace(f[n],"<strong>").replace(/<\/b>/gi,"<\/strong>")}if(t.indexOf("<b ")!=-1){for(var b=/<b (.*?)>/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(n=0;n<f.length;n++)t=t.replace(f[n],"<strong>").replace(/<\/b>/gi,"<\/strong>")}if(t.indexOf("<u")!=-1){for(var b=/<u((?:(?!l).))*?>/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(n=0;n<f.length;n++)t=t.replace(f[n],'<span style="text-decoration: underline;">').replace(/<\/u>/gi,"<\/span>")}if(t.indexOf("<hr")!=-1){for(var b=/<hr(.*?)>/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(n=0;n<f.length;n++)t=t.replace(f[n],"<hr/>")}if(t=this._startXhtml(t),t.indexOf("v:shapes=")!=-1){for(var b=/v:shapes=\"(.*?)\"/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(n=0;n<f.length;n++)t=t.replace(f[n],"")}if(t.indexOf("v:")!=-1){for(var b=/<v:(.*?)>/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(n=0;n<f.length;n++)t=t.replace(f[n],"")}if(t.indexOf("/v:")!=-1){for(var b=/<\/v:(.*?)>/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(n=0;n<f.length;n++)t=t.replace(f[n],"")}if(t.indexOf("o:")!=-1){for(var b=/<o:(.*?)>/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(n=0;n<f.length;n++)t=t.replace(f[n],"")}if(t.indexOf("/o:")!=-1){for(var b=/<\/o:(.*?)>/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(n=0;n<f.length;n++)t=t.replace(f[n],"")}if(t.indexOf("role=")!=-1){for(var b=/role=\"(.*?)\"/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(n=0;n<f.length;n++)t=t.replace(f[n],"")}if(t.indexOf("target=")!=-1){for(var b=/target=\"(.*?)\"/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(n=0;n<f.length;n++)t=t.replace(f[n],"")}if(t.indexOf("language=")!=-1){for(var b=/language=\"(.*?)\"/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(n=0;n<f.length;n++)t=t.replace(f[n],"")}if(t.indexOf("lang=")!=-1){for(var b=/lang=\"(.*?)\"/ig,f=[],i=0;(htmlTagdup=b.exec(t))!=null;)f[i]=htmlTagdup[0],i++;for(kt=[],n=0;n<f.length;n++)kt[n]=f[n];for(n=0;n<f.length;n++)t=t.replace(kt[n],f[n].toLowerCase())}t=t.replace(/<\/td><\/td>/gi,"<\/td>");t=t.replace(/<\/th><\/td>/gi,"<\/th>");t="<div>"+t+"<\/div>";l=t;this.model.value=l}return l},_setClearFormat:function(){var n=this._rteToolbar.find(".e-active").length},_updateToolbarStatus:function(){var i=!1,t;if(this.model.showToolbar){for(t=0;t<this._styleItems.length;t++)this._getCommandStatus(n.trim(this._styleItems[t].toLowerCase()))?(this._toolBarObj.selectItemByID(this._rteId+this._styleItems[t]),n("#"+this._rteId+this._styleItems[t]).addClass("e-isactive")):(this._toolBarObj.deselectItemByID(this._rteId+this._styleItems[t]),n("#"+this._rteId+this._styleItems[t]).removeClass("e-isactive"));for(t=0;t<this._alignItems.length;t++)this._getCommandStatus(n.trim(this._alignItems[t].toLowerCase()))?(this._toolBarObj.selectItemByID(this._rteId+this._alignItems[t]),i=!0):this._toolBarObj.deselectItemByID(this._rteId+this._alignItems[t]);for(i||this._toolBarObj.selectItemByID(this._rteId+"justifyLeft"),t=0;t<this._scriptsItems.length;t++)this._getCommandStatus(n.trim(this._scriptsItems[t].toLowerCase()))?(this._toolBarObj.selectItemByID(this._rteId+this._scriptsItems[t]),n("#"+this._rteId+this._scriptsItems[t]).addClass("e-isactive")):(this._toolBarObj.deselectItemByID(this._rteId+this._scriptsItems[t]),n("#"+this._rteId+this._scriptsItems[t]).removeClass("e-isactive"));this._getCommandStatus("InsertOrderedList")?(this._toolBarObj.selectItemByID(this._rteId+"orderedList"),n("#"+this._rteId+"orderedList").addClass("e-isactive")):(this._toolBarObj.deselectItemByID(this._rteId+"orderedList"),n("#"+this._rteId+"orderedList").removeClass("e-isactive"));this._getCommandStatus("InsertUnorderedList")?(this._toolBarObj.selectItemByID(this._rteId+"unorderedList"),n("#"+this._rteId+"unorderedList").addClass("e-isactive")):(this._toolBarObj.deselectItemByID(this._rteId+"unorderedList"),n("#"+this._rteId+"unorderedList").removeClass("e-isactive"))}},_updateFormat:function(){if(this._formatDDL&&this.model.showToolbar&&!t.isNullOrUndefined(this.model.tools.formatStyle)){var i=n.trim(this._getCommandValue("formatblock").replace(/'/g,""));this._isIE()||(i="<"+i+">");this._formatDDL.hasClass("e-dropdownlist")&&(t.isNullOrUndefined(i)||i==""?this._formatDDL.ejDropDownList({value:this._getLocalizedLabels("format")}):!n(this._formatDDL).parents("ul.e-rte-format").length==0&&this._formatDDL.ejDropDownList("setSelectedValue",i))}},_updateFontOptionStatus:function(){var i,r;this.model.showFontOption&&this.model.showToolbar&&!t.isNullOrUndefined(this.model.tools.font)&&(i=n.trim(this._getCommandValue("fontname").replace(/"/g,"").replace(/'/g,"").replace(/, /g,",")),(t.isNullOrUndefined(i)||i=="")&&(i="Segoe UI"),this._fontStyleDDL.hasClass("e-dropdownlist")&&!n(this._fontStyleDDL).parents("ul.e-rte-fontgroup").length==0&&this._fontStyleDDL.ejDropDownList("setSelectedValue",i),r=this._getCommandValue("fontsize"),(t.isNullOrUndefined(r)||r=="")&&(r=2),this._fontSizeDDL.hasClass("e-dropdownlist")&&!n(this._fontSizeDDL).parents("ul.e-rte-fontgroup").length==0&&this._fontSizeDDL.ejDropDownList("setSelectedValue",r))},_getSelText:function(){var n="",r,t,i;return this._isIE()?n=this._seleText:window.getSelection?(r=this._getWindow().getSelection(),i=this._saveSelection(),t=document.createTextNode(i.toString()),n=t.nodeValue):document.getSelection&&(n=this._getWindow().document.getSelection()),n},_isIE:function(){var n=!1,i=t.browserInfo();return i.name=="msie"&&(n=!0),n},_isIE8:function(){var n=!1,i=t.browserInfo();return i.name=="msie"&&i.version=="8.0"&&(n=!0),n},_isUrl:function(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(n)},_pasteHtml:function(t){var u,r,e,o,s,h,a,c,f,i,l;if(this._focus(),window.getSelection){if(u=this._getWindow().getSelection(),u.getRangeAt&&u.rangeCount){for(r=u.getRangeAt(0),e=r.commonAncestorContainer,o=e.nodeType==3?n(e).parentsUntil("body"):n(e).children(),i=o.length-1;i>=0;i--)if(o[i].textContent==r.toString()){r.selectNode(o[i]);break}for(r.deleteContents(),s=document.createElement("div"),s.innerHTML=t,h=this._getDocument().createDocumentFragment();a=s.firstChild;)c=h.appendChild(a);r.insertNode(h);c&&(r=r.cloneRange(),r.setStartAfter(c),r.collapse(!0),u.removeAllRanges(),u.addRange(r))}}else if(this._getDocument().selection&&this._getDocument().selection.type!="Control")if(!this._ieSelectionRange||this._ieSelectionRange.offsetLeft==0&&this._ieSelectionRange.offsetTop==0&&this._ieSelectionRange.boundingHeight==0)this._getDocument().body.insertAdjacentHTML("afterBegin",t);else{for(f=this._ieParents(this._getRange()),l=!1,i=f.length-1;i>=0;i--)if(f[i].innerText==this._getRange().text){f[i].nodeName=="BODY"?f[i].innerHTML=t:f[i].outerHTML=t;l=!0;break}l||this._getRange().pasteHTML(t)}},_ieParents:function(n){var t=[];for(n.parentElement=n.parentElement();n.parentElement.nodeName!="HTML";){if(n.parentElement.nodeName=="TD"||n.parentElement.nodeName=="TH")break;t.push(n.parentElement);n=n.parentElement}return t},_getLocalizedLabels:function(n){return t.RTE.Locale[this.model.locale][n]===i?t.RTE.Locale["en-US"][n]:t.RTE.Locale[this.model.locale][n]},_getSelectedNode:function(){var s=this._getRange(),e,i=this._ieSelectionRange&&s.offsetLeft==0&&s.offsetTop==0&&s.boundingHeight==0?this._ieSelectionRange:s,r=i.startContainer,o=i.endContainer,f=i.startOffset,u=i.endOffset;return(t.isNullOrUndefined(i.commonAncestorContainer)||(this._tempEle=i.commonAncestorContainer.nodeName=="BODY"?n(i.commonAncestorContainer):n(i.cloneContents()).text()==n(n(n(i.startContainer).parents("li")).contents()[0]).text()&&f==0&&u==n(i.startContainer).parents("li").text().length||f==u||f==0&&u==1?n(n(i.startContainer).parents("li")):i.commonAncestorContainer.nodeName=="OL"&&f!=u&&u!=0&&u!=1?n(i.commonAncestorContainer):n(i.startContainer)),!i)?this._getDocument().selection:i.setStart?(e=i.commonAncestorContainer,!i.collapsed&&(r==o&&u-f<2&&r.hasChildNodes()&&(e=r.childNodes[f]),r.nodeType===3&&o.nodeType===3&&(r=r.length===f?this._skipEmptyNode(r.nextSibling,!0):r.parentNode,o=u===0?this._skipEmptyNode(o.previousSibling,!1):o.parentNode,r&&r===o)))?r:e&&e.nodeType==3?e.parentNode:e:i.item?i.item(0):i.parentElement()},_skipEmptyNode:function(n,t){for(var i=n;n&&n.nodeType===3&&n.length===0;)n=t?n.nextSibling:n.previousSibling;return n||i},_getSelection:function(){var n;return this._isIE()?(n=this._getDocument().selection.createRange(),n.type=this._getDocument().selection.type):(n=window.getSelection(),n.rangeCount&&(sText=n.getRangeAt(0)),n.type=this._getWindow().getSelection().type),n},_saveSelection:function(){var i=this._getWindow(),r=i.document,n=i.getSelection?i.getSelection():r.selection,t,u;return n&&(n.createRange?t=n.createRange():n.rangeCount>0&&n.getRangeAt(0)?t=n.getRangeAt(0):n.anchorNode&&n.focusNode&&r.createRange?(t=r.createRange(),t.setStart(n.anchorNode,n.anchorOffset),t.setEnd(n.focusNode,n.focusOffset),t.collapsed!==n.isCollapsed&&(t.setStart(n.focusNode,n.focusOffset),t.setEnd(n.anchorNode,n.anchorOffset))):(u=document.getElementsByTagName("iframe")[0],i=u.contentWindow,t=i.document.createRange(),t.setStart(i.document.body,0),t.setEnd(i.document.body,0))),t},_restoreSelection:function(n){var i=this._getWindow(),r=i.document,t=i.getSelection?i.getSelection():r.selection;t&&n&&(n.select?n.select():t.removeAllRanges&&t.addRange&&(t.removeAllRanges(),t.addRange(n)))},_getRange:function(){var n,u;if(this._isIE8())return n=this._saveSelection(),u=this._ieSelectionRange&&n.offsetLeft==0&&n.offsetTop==0&&n.boundingHeight==0?this._ieSelectionRange:n,u;if(this._isIE())return this._ieSelection=window.getSelection&&(t.isNullOrUndefined(this._selectionRange)?!1:this._selectionRange.length>0)?this._selectionRange:this._saveSelection();if(this._getWindow().getSelection().rangeCount>0)return this._getWindow().getSelection().getRangeAt(0);var f=document.getElementsByTagName("iframe")[0],i=f.contentWindow,r=i.document.createRange();return r.setStart(i.document.body,0),r.setEnd(i.document.body,0),r},_setBackupData:function(){var t=this.getHtml(),i=this._backupArray.length;i==this.model.undoStackLimit+1&&this._backupArray.splice(0,1);t!=this._backupArray[i-1]&&this.model.undoStackLimit>0&&this._backupArray.push(t);this._undoRedoPosition=this._backupArray.length-1;this.model.showToolbar&&this._rteToolbar.find("li.e-rteItem-undo")&&this._backupArray.length>1&&!n("#"+this._rteId+"undo").hasClass("e-rteTooldisable")&&this._toolBarObj.enableItemByID(this._rteId+"undo")},_getSelectedHtmlString:function(){var i,e,o,r,u,f,t,s;if(typeof document.selection!="undefined"){for(i=this._ieParents(this._getRange()),e=!1,t=i.length-1;t>=0;t--)if(i[t].innerText==this._getRange().text){o=i[t].nodeName=="BODY"?i[t].innerHTML:i[t].outerHTML;e=!0;break}return e||(o=this._getRange().htmlText.substring(0,1)=="<"?this._getRange().text:this._getRange().htmlText),o}for(r=this._getRange(),u=r.commonAncestorContainer,f=u.nodeType==3?n(u).parentsUntil("body"):n(u).children(),t=f.length-1;t>=0;t--)if(f[t].textContent==r.toString()){r.selectNode(f[t]);break}return s=document.createElement("div"),s.appendChild(r.cloneContents()),s.innerHTML},_getText:function(){var n=this._getDocument().body;if(n!=null)return this._isIE()?n.innerText:n.textContent},_validateMaxLength:function(n){if(this.model.maxLength!=null){var t=this.model.maxLength,i=this._getText();t<=i.length&&(n.keyCode<47||n.ctrlKey&&n.keyCode==65||n.ctrlKey&&n.keyCode==67||n.ctrlKey&&n.keyCode==86||n.ctrlKey&&n.keyCode==88||(this._keypressFlag=!1,this._cancelEvent(n)))}},_cancelEvent:function(n){return n.returnValue=!1,n.stopPropagation(),n.preventDefault(),!1},_alignToolUpdate:function(n){for(var t=0;t<this._alignItems.length;t++)this._alignItems[t]===n?this._toolBarObj.selectItemByID(this._rteId+n):this._toolBarObj.deselectItemByID(this._rteId+this._alignItems[t])},_getCommandStatus:function(n){return this._getDocument().queryCommandState(n)},_getCommandValue:function(n){var i=this._getDocument().queryCommandValue(n),r;if(this._isIE()){if(n=="fontname"){for(r=0;r<this.model.fontName.length;r++)if(i==this.model.fontName[r].text){i=this.model.fontName[r].value;break}(t.isNullOrUndefined(i)||i=="")&&(i=this.model.fontName[0].value)}if(n=="formatblock"){for(r=2;r<this.model.format.length;r++)if(i==this.model.format[r].text){i=this.model.format[r].value;break}i=="Normal"&&(i=this.model.format[0].value)}}return i},_undo:function(){this._undoRedoPosition>0&&(this.setHtml(this._backupArray[this._undoRedoPosition-1]),this._undoRedoPosition--,this._updateToolbarStatus(),this._updateFontOptionStatus(),this._updateFormat(),this._updateCharCount(),this._toolBarObj.enableItemByID(this._rteId+"redo"));this._undoRedoPosition==0&&(this._toolBarObj.disableItemByID(this._rteId+"undo"),this._toolBarObj.enableItemByID(this._rteId+"redo"));this._focus()},_redo:function(){var n;this._undoRedoPosition!=this._backupArray.length&&(this._backupArray[this._undoRedoPosition+1]!=null?(n=this._backupArray[this._undoRedoPosition+1],this.setHtml(n),this._undoRedoPosition++):(n=this._backupArray[this._backupArray.length-2],t.isNullOrUndefined(n)||this.setHtml(n),this._undoRedoPosition=this._backupArray.length-2),this._updateToolbarStatus(),this._updateFontOptionStatus(),this._updateFormat(),this._updateCharCount(),t.isNullOrUndefined(this._toolBarObj)||(this._backupArray.length-1>0&&this._toolBarObj.enableItemByID(this._rteId+"undo"),this._undoRedoPosition==this._backupArray.length-1&&this._toolBarObj.disableItemByID(this._rteId+"redo")));this._focus()},_setContent:function(n){var t=this._getDocument();t!=""&&(t.open(),t.write(n),t.close(),t.EditMode=!0)},_tableCellStart:function(){this._tableInsertAt=this._saveSelection()},_tableCellSelect:function(i){var r,e=n(i.target),u=e.parent().index(),f=e.index();this._createTable.find("div.e-rte-tablecell").each(function(){r=n(this);r.index()<=f&&r.parent().index()<=u?r.addClass("e-active"):r.removeClass("e-active")});this._tblheaderDiv.html(f+1+"x"+(u+1)+" Table");n(this._getDocument()).find("table.e-rte-tableremove").remove();t.isNullOrUndefined(this._tableInsertAt)||(this._restoreSelection(this._tableInsertAt),this._onInsertTable(u+1,f+1,!0))},_tableCellLeave:function(){this._createTable.find("div.e-rte-tablecell").removeClass("e-active");n(this._getDocument()).find("table.e-rte-tableremove").remove();this._tblheaderDiv.html(this._getLocalizedLabels("createTable"))},_tableCellDown:function(i){var u=n(i.target),f=u.parent().index()+1,e=u.index()+1,r;this._focus();n(this._getDocument()).find("table.e-rte-tableremove").remove();t.isNullOrUndefined(this._tableInsertAt)||(this._restoreSelection(this._tableInsertAt),this._onInsertTable(f,e,!1));r=n(this._getDocument()).find("table.e-rte-table");r.attr("contentEditable",!1);r.find("td").attr("contentEditable",!0);this._createTable.ejDialog("close");this._setBackupData();this._onChange();this.model.isResponsive&&this._toolBarObj._liTemplte&&(this._toolBarObj._liTemplte.addClass("e-display-none"),this._toolBarObj.contstatus=!1)},_tableGenerator:function(n,i,r,u,f,e,o,s,h,c){var l="e-rte-table";r&&(l+=" e-rte-tableremove");u=t.isNullOrUndefined(u)||u==""?"width='100%'":"width="+u+"'";f=t.isNullOrUndefined(f)||f==""?"":"height='"+f+"'";e=t.isNullOrUndefined(e)||e==""?"":"cellspacing='"+e+"'";o=t.isNullOrUndefined(o)||o==""?"":"cellpadding='"+o+"'";s=t.isNullOrUndefined(s)?"":" align='"+s+"'";switch(h){case"dotted":borderstyle="dotted";break;case"double":return this._border="style='border:3px double black'",borderstyle="double","<table border='1' class='"+l+"' "+u+" "+f+" "+this._border+" "+e+" "+o+" "+s+">"+(c?"<caption><\/caption>":"")+Array(n+1).join("<tr>"+Array(i+1).join("<td><br _moz_dirty=''/><\/td>")+"<\/tr>")+"<\/table>";case"dashed":borderstyle="dashed";break;case"solid":borderstyle="solid";break;default:borderstyle="solid"}return borderstyle!="double"?(this._border="style='border:1px "+borderstyle+" black'","<table border='1' class='"+l+"' "+u+" "+f+" "+this._border+" "+e+" "+o+" "+s+">"+(c?"<caption><\/caption>":"")+Array(n+1).join("<tr>"+Array(i+1).join("<td><br _moz_dirty=''/><\/td>")+"<\/tr>")+"<\/table>"):"<table border='1' class='"+l+"' "+u+" "+f+" "+this._border+" "+e+" "+o+" "+s+">"+(c?"<caption><\/caption>":"")+Array(n+1).join("<tr>"+Array(i+1).join("<td><br _moz_dirty=''/><\/td>")+"<\/tr>")+"<\/table>"},_openCustomTable:function(n){n.currentTarget.id==this._rteId+"_createCustomTableLink"?this._customTableDialog.ejDialog("open"):this._createTable.find("div.e-rte-eTblProperties").hasClass("e-disable")||(this._eTblManager(),this._eTblDialog.ejDialog("open"),this._on(this._getTableObj("Width"),"focusout",this._widthFocusOut))},_documentClick:function(i){if(!t.isNullOrUndefined(this._createTable)&&n(i.target).parents("#"+this._rteId+"tables").length<=0?(this._createTable.ejDialog("isOpened")&&this._createTable.ejDialog("close"),this._createTable.find("div.e-rte-eTblProperties").addClass("e-disable")):n(this._createTable.find("div.e-rte-eTblProperties").hasClass("e-disable")).addClass("e-disable"),this._isIE()&&!window.getSelection){var r=i.target.id;r==""&&(r=i.target.parentNode.id);(r==this._rteId+"_fontSize"||r==this._rteId+"_fontName"||r==this._rteId+"_format"||r==this._rteId+"_fontSize_dropdown"||r==this._rteId+"_fontName_dropdown"||r==this._rteId+"_format_dropdown")&&this._restoreSelection(this._selectionRange)}},_iframeFocus:function(i){!t.isNullOrUndefined(this._createTable)&&this._createTable.ejDialog("isOpened")&&this._createTable.ejDialog("close");!n(this._fontSizeDDL).parents("ul.e-rte-fontgroup").length==0&&!t.isNullOrUndefined(this._fontSizeDDL)&&this._fontSizeDDL.hasClass("e-dropdownlist")&&this._fontSizeDDL.ejDropDownList("hidePopup");!n(this._fontStyleDDL).parents("ul.e-rte-fontgroup").length==0&&!t.isNullOrUndefined(this._fontStyleDDL)&&this._fontStyleDDL.hasClass("e-dropdownlist")&&this._fontStyleDDL.ejDropDownList("hidePopup");!n(this._formatDDL).parents("ul.e-rte-format").length==0&&!t.isNullOrUndefined(this._formatDDL)&&this._formatDDL.hasClass("e-dropdownlist")&&this._formatDDL.ejDropDownList("hidePopup");t.isNullOrUndefined(this._createTable)||this._createTable.ejDialog("close");t.isNullOrUndefined(this._splitMenu)||this._splitMenu.hide(i);t.isNullOrUndefined(this._bgSplitMenu)||this._bgSplitMenu.hide(i)},_iframeKeyDown:function(t){var i,r;if(this.model.showToolbar&&this.model.allowKeyboardNavigation)if(t&&t.ctrlKey==!0){if(t.keyCode==66)return t.preventDefault(),i=this._toolBarItems.find("li.e-rteItem-bold"),i.hasClass("e-disable")||(this._onBold(),i.hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+"bold"):this._toolBarObj.selectItemByID(this._rteId+"bold")),!1;if(t.keyCode==73)return t.preventDefault(),i=this._toolBarItems.find("li.e-rteItem-italic"),i.hasClass("e-disable")||(this._onItalics(),i.hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+"italic"):this._toolBarObj.selectItemByID(this._rteId+"italic")),!1;if(t.keyCode==85)return t.preventDefault(),i=this._toolBarItems.find("li.e-rteItem-underline"),i.hasClass("e-disable")||(this._onUnderLine(),i.hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+"underline"):this._toolBarObj.selectItemByID(this._rteId+"underline")),!1;if(t.keyCode!=76||t.altKey){if(t.keyCode==82)return t.preventDefault(),i=this._toolBarItems.find("li.e-rteItem-justifyRight"),i.hasClass("e-disable")||(this._onJustifyRight(),this._alignToolUpdate("justifyRight")),!1;if(t.keyCode!=69||t.altKey)if(t.keyCode!=74||t.altKey)if(t.keyCode!=90||t.altKey){if(t.keyCode==89)return t.preventDefault(),i=this._toolBarItems.find("li.e-rteItem-redo"),i.hasClass("e-disable")||this._onRedo(),!1;if(t.keyCode==67)i=this._toolBarItems.find("li.e-rteItem-copy"),i.hasClass("e-disable")&&(this._keypressFlag=!1,t.preventDefault());else if(t.keyCode==88)i=this._toolBarItems.find("li.e-rteItem-cut"),i.hasClass("e-disable")&&(this._keypressFlag=!1,t.preventDefault());else if(t.keyCode==86)i=this._toolBarItems.find("li.e-rteItem-paste"),i.hasClass("e-disable")&&(this._keypressFlag=!1,t.preventDefault());else{if(t.keyCode==77)return t.shiftKey==!0?(t.preventDefault(),i=this._toolBarItems.find("li.e-rteItem-outdent"),i.hasClass("e-disable")||(this._onOutdent(),this._indentdepth>0&&this._indentdepth--),!1):(t.preventDefault(),i=this._toolBarItems.find("li.e-rteItem-indent"),i.hasClass("e-disable")||(this._onIndent(),this._indentdepth++),!1);if(t.keyCode==75)return t.preventDefault(),i=this._toolBarItems.find("li.e-rteItem-createLink"),i.hasClass("e-disable")||this._hyperLinkManager(),!1}}else return t.preventDefault(),i=this._toolBarItems.find("li.e-rteItem-undo"),i.hasClass("e-disable")||this._onUndo(),!1;else return t.preventDefault(),i=this._toolBarItems.find("li.e-rteItem-justifyFull"),i.hasClass("e-disable")||(this._onJustifyFull(),this._alignToolUpdate("justifyFull")),!1;else return t.preventDefault(),i=this._toolBarItems.find("li.e-rteItem-justifyCenter"),i.hasClass("e-disable")||(this._onJustifyCenter(),this._alignToolUpdate("justifyCenter")),!1}else return t.preventDefault(),i=this._toolBarItems.find("li.e-rteItem-justifyLeft"),i.hasClass("e-disable")||(this._onJustifyLeft(),this._alignToolUpdate("justifyLeft")),!1}else if(t.keyCode==127){if((this.getHtml()==this.getSelHtmlString()||this._currentIFrame.get_Text()==this._currentIFrame.getSelText())&&(r=this.ClearAllManager(),!r))return t.preventDefault(),r}else t.keyCode==8&&(ele=this._getSelectedNode(),n(ele).parents("BLOCKQUOTE").length>0&&(this._onOutdent(),t.preventDefault()));else t.ctrlKey==!0&&(t.keyCode==66||t.keyCode==73||t.keyCode==85||t.keyCode==76||t.keyCode==82||t.keyCode==69||t.keyCode==74||t.keyCode==90||t.keyCode==89||t.keyCode==67||t.keyCode==88||t.keyCode==86||t.keyCode==8||t.keyCode==46)&&t.preventDefault();this.model.maxLength!=null&&this._validateMaxLength(t);this._trigger("keydown",{keyCode:t.keyCode})},_iframeKeypress:function(n){if(!this._keypressFlag)return n.preventDefault(),this._keypressFlag=!0,!1},_iframeKeyUp:function(n){this._toggleEditTable();this._setBackupData();this._updateToolbarStatus();this._updateFontOptionStatus();this._updateFormat();this._updateCharCount();var i=this._getSelectedNode();this._updateTagInfo(i);this._isIE()?(this._selectionRange="",this._ieSelectionRange=this._getRange(),this._seleText=t.isNullOrUndefined(this._getWindow().document.selection)?this._selectionRange.toString():this._getWindow().document.selection.createRange().text):this._ieSelectionRange=this._ieSelection;this._trigger("keyup",{keyCode:n.keyCode})},_iframeMouseUp:function(n){this._currentSelNode=n.target;this._toggleEditTable();this._updateToolbarStatus();this._updateFontOptionStatus();this._updateFormat();this._isIE()?(this._selectionRange="",this._ieSelectionRange=this._getRange(),this._seleText=t.isNullOrUndefined(this._getWindow().document.selection)?this._selectionRange.toString():this._getWindow().document.selection.createRange().text):this._ieSelectionRange=this._ieSelection},_iframeMouseDown:function(i){t.browserInfo().name=="msie"&&t.browserInfo().version=="8.0"&&this._focus();this._updateTagInfo(i.target);this._updateIndent(i.target);(t.browserInfo().name=="msie"||t.browserInfo().name=="chrome")&&i.ctrlKey==!0&&i.which==1&&(i.target.tagName.toUpperCase()!="A"||t.isNullOrUndefined(n(i.target).attr("href"))||window.open(n(i.target).attr("href"),n(i.target).attr("target")));this.model.isResponsive&&this._toolBarObj._liTemplte.children("ul").length>0&&(this._toolBarObj.contstatus=!0,this._toolBarObj._liTemplte.addClass("e-display-none"),this._toolBarObj.contstatus=!1);this._iframeFocus()},_iframeFocusOut:function(){this._onChange();this._selectionRange=this._isIE8()?this._getRange():this._saveSelection();this._seleText=t.isNullOrUndefined(this._getWindow().document.selection)?this._selectionRange.toString():this._getWindow().document.selection.createRange().text},_widthFocusOut:function(t){var r,u,f;t.currentTarget.id===this._rteId+"_txtWidth"?(r=this._customTableDialog,u="#"+this._rteId+"_ddlAlignment",f="#"+this._rteId+"_txtWidth"):(r=this._eTblDialog,u="#"+this._rteId+"_eTblAlign",f="#"+this._rteId+"_eTblWidth");var i=r.find(f).val(),e=n(u).data("ejDropDownList"),o=i&&!isNaN(i)||i.slice(-2)=="px"||i.slice(-2)=="em"||i.slice(-2)=="pt"||i.slice(-1)=="%"?!0:!1;e.option("enabled",o)},_wireEvents:function(){var i=n(this._getDocument());this._getDocument()!=""&&(t.isNullOrUndefined(this._createTable)||(this._on(this._createTable,"mouseenter","div.e-rte-tablecell",this._tableCellStart),this._on(this._createTable,"mousemove","div.e-rte-tablecell",this._tableCellSelect),this._on(this._createTable,"mouseleave","div.e-rte-table",this._tableCellLeave),this._on(this._createTable,"mousedown","div.e-rte-tablecell",this._tableCellDown),this._on(n(document),"click",this._documentClick)),this._on(i,"focus",this._iframeFocus),this._on(i,"keydown",this._iframeKeyDown),this._on(i,"keypress",this._iframeKeypress),this._on(i,"keyup",this._iframeKeyUp),this._on(i,"mouseup",this._iframeMouseUp),this._on(i,"mousedown",this._iframeMouseDown),this._on(i,"focusout",this._iframeFocusOut),t.isNullOrUndefined(this._customTableDialog)||this._on(this._customTableDialog.find(".e-rte-txtWidth"),"focusout",this._widthFocusOut))},_unwireEvents:function(){var i=n(this._getDocument());t.isNullOrUndefined(this._createTable)||(this._off(this._createTable.find("div.e-rte-tablecell"),"mousemove"),this._off(this._createTable.find("div.e-rte-table"),"mouseleave"),this._off(this._createTable.find("div.e-rte-tablecell"),"mousedown"),this._off(n(document),"click",this._documentClick));this._off(i,"focus");this._off(i,"keydown");this._off(i,"keyup");this._off(i,"mouseup");this._off(i,"mousedown");this._off(i,"blur");t.isNullOrUndefined(this._customTableDialog)||this._off(this._customTableDialog.find(".e-rte-txtWidth"),"focusout")},_footerEvents:function(n){this[n](this._htmlSource,"click",this._sourceCodeManager);this[n](this._clearFormat,"click",this._onClearFormat);this[n](this._clearAll,"click",this._clearAllManager)},_onChange:function(){if(_prevhtml=n.trim(this.value()),_prevhtml!==this.getHtml()){this._updateValue();var t={text:this._getText(),htmlText:this.getHtml()};this._trigger("change",t)}},disable:function(){this._unwireEvents();this.model.showToolbar&&this._toolBarObj.disable();this._rteIframe.contents().find("body").attr("contenteditable",!1);this._rteEditor.addClass("e-disable");this.model.showFooter&&(this._rteFooter.addClass("e-disable"),this._resize.removeClass("e-resizable"),this._footerEvents("_off"))},enable:function(){this._wireEvents();this.model.showToolbar&&this._toolBarObj.enable();this._rteIframe.contents().find("body").attr("contenteditable",!0);this._rteEditor.removeClass("e-disable");this.model.showFooter&&(this._rteFooter.removeClass("e-disable"),this._resize.addClass("e-resizable"),this._footerEvents("_on"))},disableToolbarItem:function(i){t.isNullOrUndefined(i)||this._toolBarObj.disableItemByID(i);i==this._rteId+"undo"&&n("#"+i).addClass("e-rteTooldisable")},enableToolbarItem:function(i){t.isNullOrUndefined(i)||this._toolBarObj.enableItemByID(i);i==this._rteId+"undo"&&n("#"+i).hasClass("e-rteTooldisable");n("#"+i).removeClass("e-rteTooldisable")},removeToolbarItem:function(n){t.isNullOrUndefined(n)||this._toolBarObj.removeItemByID(n);this._setIframeHeight()},refresh:function(){this._unwireEvents();this._setIFrames();this._setIframeHeight();this._wireEvents();this.model.enableRTL&&this._rteIframe.contents().find("body").css("direction","rtl")},show:function(){this._rteWapper.show()},hide:function(){this._rteWapper.hide()},setColorPickerType:function(n){n=="palette"||n==="picker"?this._imgPicker.option("modelType",n):this._imgPicker.option("modelType","default")},getHtml:function(){if(this.model.enableXHTML)return n.trim(this.model.value);try{return n.trim(this._getDocument().body.innerHTML)}catch(t){return""}},setHtml:function(t){this._getDocument().body.innerHTML="";this._getDocument().body.innerHTML=n.trim(t)},getText:function(){return this._getText()},executeCommand:function(i,r){var u,f;if(this._isIE8()&&t.isNullOrUndefined(this._ieSelectionRange)&&(this._ieSelectionRange=this._getRange()),this._trigger("execute",{commandName:i}))return!1;if(u="",t.browserInfo().name=="chrome"&&this._getWindow().getSelection().rangeCount==0&&this._restoreSelection(this._saveSelection()),i=="underline"){if(window.getSelection&&(u=n(this._getWindow().getSelection().anchorNode).parents("a"),u.length>0)){n(u).css("text-decoration",n(u).css("text-decoration")=="none"?"underline":"none");return}}else{if(i.toLowerCase()=="inserthtml"){this._isIE()?this._pasteHtml(r):this._getDocument().execCommand(i,!1,r);return}i.toLowerCase()=="formatblock"&&this._isIE()&&r.charAt(0)!="<"&&r.charAt(r.length-1)!=">"&&(r="<"+r+">")}t.browserInfo().name=="msie"&&this._focus();this._isIE()&&i=="fontName"&&(r=r.substring(0,r.indexOf(",")));!t.isNullOrUndefined(this._tempEle)&&this._tempEle.length>0&&this._tempEle.get(0).nodeName=="#text"&&n(this._tempEle.parents("li")).length>0&&n(this._tempEle.parents("li")).prop("style")["font-size"]!=""&&(f=n(this._tempEle.parents("li")).css("font-size"));this._getDocument().execCommand(i,!1,r);this._onChange();i!="fontName"&&i!="fontSize"&&i!="indent"&&i!="outdent"&&(this._toolBarObj.itemsContainer.find("li#"+this._rteId+i).hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+i):this._toolBarObj.selectItemByID(this._rteId+i));t.isNullOrUndefined(this._tempEle)||this._bulletsResizing(f,i);this._setBackupData()},_bulletsResizing:function(i,r){if(!t.isNullOrUndefined(this._tempEle.get(0)))var u=this._tempEle.get(0).tagName=="BODY"?this._tempEle.find("li"):this._tempEle.get(0).nodeName!="#text"?n(this._tempEle.parents("body")).find("li"):"";u!=""&&n(u).each(function(){fonttag=n(this).find("font")[0]||"";fonttag!=""&&(n(this).css("font-size",n(n(fonttag)[0]).css("font-size")),n(u).find("font").removeAttr("style"))});r=="fontSize"&&(this._getCommandStatus("InsertOrderedList")||this._getCommandStatus("InsertOrderedList"))&&(this._tempEle.get(0).tagName=="LI"||this._tempEle.get(0).tagName=="OL")&&(this._tempEle.css("font-Size",this._tempEle.find("font").css("font-Size")),n(this._tempEle.find("font")).removeProp("style")["font-size"]);i!=null&&(n(this._tempEle.parents("li")).css("font-size",i),n(this._tempEle.parents("li")).find("font").removeAttr("style"))},focus:function(){this._focus()},getCommandStatus:function(n){if(t.isNullOrUndefined(n)||n!="")return this._getCommandStatus(n)},getSelectedHtml:function(){return this._getSelectedHtmlString()},insertRow:function(i,r){var e=t.isNullOrUndefined(r)?this._getSelectedNode():r,o="<td "+this._border+"contentEditable='true'><br _moz_dirty=''/><\/td>",u=n(e).closest("tr"),s=u.find("td").length,f=n("<tr>"+Array(s+1).join(o)+"<\/tr>");i?f.insertBefore(u):f.insertAfter(u);u.find("td:first").focus()},insertColumn:function(i,r){for(var e=t.isNullOrUndefined(r)?this._getSelectedNode():r,o="<td "+this._border+"contentEditable='true'><br _moz_dirty=''/><\/td>",s=n(e).closest("tr"),u,h=s.closest("table").find("tr"),c=s.find("td").index(e),f=0;f<h.length;f++)u=n(h[f]).find("td")[c],i?n(o).insertBefore(u):n(o).insertAfter(u)},removeRow:function(i){var r=t.isNullOrUndefined(i)?this._getSelectedNode():i;curRow=n(r).closest("tr").remove()},removeColumn:function(i){for(var u=t.isNullOrUndefined(i)?this._getSelectedNode():i,f=n(u).closest("tr"),e=f.closest("table").find("tr"),o=f.find("td").index(u),r=0;r<e.length;r++)n(n(e[r]).find("td")[o]).remove()},removeTable:function(i){var r=t.isNullOrUndefined(i)?n(this._getSelectedNode()).closest("table"):i;n(r).remove()}});t.RTE.Locale={};t.RTE.Locale["en-US"]={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Align text center",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",unorderedList:"Insert unordered list",orderedList:"Insert ordered list",indent:"Indent",fileBrowser:"File Browser",outdent:"Decrease Indent",cut:"Cut",copy:"Copy",paste:"Paste",paragraph:"Paragraph",undo:"Undo",redo:"Redo",upperCase:"Upper Case",lowerCase:"Lower Case",clearAll:"Clear All",clearFormat:"Clear Format",createLink:"Insert/Edit hyperlink",image:"Insert image",video:"Insert video",editTable:"Edit Table Properties",embedVideo:"Paste your embed code below",viewHtml:"View HTML",fontName:"Select font family",fontSize:"Select font size",fontColor:"Select color",format:"Format",backgroundColor:"Background color",style:"Styles",deleteAlert:"Are you sure you want to clear all the contents?",copyPastAlert:"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.",videoError:"The text area can not be empty",imageWebUrl:"Web Address",imageAltText:"Image description",dimensions:"Dimensions",constrainProportions:"Constrain Proportions",linkWebUrl:"Web Address",imageLink:"Image as Link",imageBorder:"Image Border",imageStyle:"Style",linkText:"Text",linkToolTip:"ToolTip",html5Support:"This tool icon only enabled in HTML5 supported browsers",linkOpenInNewWindow:"Open link in new window",tableColumns:"No.of Columns",tableRows:"No.of Rows",tableWidth:"Width",tableHeight:"Height",tableCellSpacing:"Cell spacing",tableCellPadding:"Cell padding",tableBorder:"Border",tableCaption:"Caption",tableAlignment:"Alignment",textAlign:"Text align",dialogUpdate:"Update",dialogInsert:"Insert",dialogCancel:"Cancel",dialogApply:"Apply",dialogOk:"Ok",createTable:"Create table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete the row",deleteColumn:"Delete the column",deleteTable:"Delete the table",customTable:"Create custom table...",characters:"Characters",general:"General",advanced:"Advanced",table:"Table",row:"Row",column:"Column",cell:"Cell",solid:"Solid",dotted:"Dotted",dashed:"Dashed",doubled:"Doubled"}})(jQuery,Syncfusion)});