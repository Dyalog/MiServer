/*!
*  filename: ej.rte.min.js
*  version : 12.2.0.36
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t,i){t.widget("ejRTE","ej.RTE",{element:null,model:null,_rootCSS:"e-rte",validTags:["textarea"],_setFirst:!1,defaults:{allowEditing:!0,allowKeyboardNavigation:!0,cssClass:"",height:"370",width:"786",enabled:!0,maxLength:7e3,minWidth:400,maxWidth:null,minHeight:280,maxHeight:null,showToolbar:!0,showFooter:!1,showHtmlSource:!0,showWordCount:!0,showHtmlTagInfo:!0,showClearAll:!0,iframeAttribute:"color:#5C5C5C",showClearFormat:!0,showFontOption:!0,showDimensions:!1,locale:"en-US",name:"",tools:{formatStyle:["format"],style:["bold","italic","underline","strikethrough"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],lists:["unorderedList","orderedList"],indenting:["outdent","indent"],doAction:["undo","redo"],links:["createLink"],images:["image","video"],tables:["createTable","addRowAbove","addRowBelow","addColumnLeft","addColumnRight","deleteRow","deleteColumn","deleteTable"]},toolsList:["formatStyle","font","style","scripts","alignment","lists","indenting","copyPaste","doAction","clear","links","images","tables","casing","customTool"],colorCode:["000000","FFFFFF","C4C4C4","ADADAD","595959","262626","4f81bd","dbe5f1","b8cce4","95b3d7","366092","244061","c0504d","f2dcdb","e5b9b7","d99694","953734","632423","9bbb59","ebf1dd","d7e3bc","c3d69b","76923c","4f6128","8064a2","e5e0ec","ccc1d9","b2a2c7","5f497a","3f3151","f79646","fdeada","fbd5b5","fac08f","e36c09","974806"],format:[{text:"Paragraph",value:"<p>",spriteCssClass:"e-paragraph"},{text:"Quotation",value:"<blockquote>",spriteCssClass:"e-quotation"},{text:"Heading 1",value:"<h1>",spriteCssClass:"e-h1"},{text:"Heading 2",value:"<h2>",spriteCssClass:"e-h2"},{text:"Heading 3",value:"<h3>",spriteCssClass:"e-h3"},{text:"Heading 4",value:"<h4>",spriteCssClass:"e-h4"},{text:"Heading 5",value:"<h5>",spriteCssClass:"e-h5"},{text:"Heading 6",value:"<h6>",spriteCssClass:"e-h6"}],fontName:[{text:"Segoe UI",value:"Segoe UI"},{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1",value:"1"},{text:"2 (10pt)",value:"2"},{text:"3 (12pt)",value:"3"},{text:"4 (14pt)",value:"4"},{text:"5 (18pt)",value:"5"},{text:"6 (24pt)",value:"6"},{text:"7 (36pt)",value:"7"}],tableRows:7,tableColumns:9,colorPaletteRows:6,colorPaletteColumns:6,showCustomTable:!0,value:null,undoStackLimit:50,enableResize:!0,enablePersistence:!1,enableRTL:!1,change:null,execute:null,keydown:null,keyup:null,create:null,destroy:null},dataTypes:{iframeAttribute:"string",cssClass:"string",name:"string",enabled:"boolean",enablePersistence:"boolean",tools:"data",toolsList:"data",colorCode:"data",format:"data",fontName:"data",fontSize:"data"},observables:["value"],value:t.util.valueFunction("value"),_setModel:function(n){var i,f,r,u;if(!this.model.enabled&&t.isNullOrUndefined(n.enabled))return!1;for(i in n)switch(i){case"allowEditing":this._enableEdit(n[i]);break;case"showToolbar":n[i]?t.isNullOrUndefined(this._rteToolbar)?this._renderToolBar():this._rteToolbar.show():this._rteToolbar.hide();this._setIframeHeight();break;case"showFooter":this.model.showFooter=n[i];n[i]?t.isNullOrUndefined(this._rteFooter)?this._renderFooter():this._rteFooter.show():this._rteFooter.hide();this._setIframeHeight();break;case"enabled":this._disabled(!n[i]);break;case"height":this._rteWapper.height(n[i]);this._setIframeHeight();break;case"width":this._rteWapper.width(n[i]);break;case"cssClass":this._changeSkin(n[i]);break;case"showHtmlSource":this._footerElement("div.e-rte-source",n[i]);break;case"showHtmlTagInfo":this._footerElement("div.e-rte-htmltaginfo",n[i]);break;case"showWordCount":this._footerElement("div.e-rte-wordcount",n[i]);break;case"showClearAll":this._footerElement("div.clearAll",n[i]);break;case"showClearFormat":this._footerElement("div.clearFormat",n[i]);break;case"enableResize":this._footerElement("div.e-rte-resize",n[i]);break;case"fontName":this._fontStyleDDL.ejDropDownList({dataSource:n[i]});break;case"fontSize":this._fontSizeDDL.ejDropDownList({dataSource:n[i]});break;case"format":this._formatDDL.ejDropDownList({dataSource:n[i]});break;case"value":this._getDocument().body.innerHTML=t.util.getVal(n[i]);break;case"showDimensions":n[i]?(this._rteWapper.find("#"+this._rteId+"_imgdimensions").show(),this._rteWapper.find("#"+this._rteId+"_videodimensions").show()):(this._rteWapper.find("#"+this._rteId+"_imgdimensions").hide(),this._rteWapper.find("#"+this._rteId+"_videodimensions").hide());break;case"locale":this.model.locale=n[i];f=this.model;this.element.ejRTE("destroy").ejRTE(f);break;case"tableRows":this.model.tableRows=n[i];r=this._createTable.find("div.e-rte-table").html("");this._drawTable(r);break;case"iframeAttribute":this._updateIframeSkin(n[i]);break;case"tableColumns":this.model.tableColumns=n[i];r=this._createTable.find("div.e-rte-table").html("");this._drawTable(r);break;case"showCustomTable":u=this._createTable.find("div.customtable-group");n[i]?t.isNullOrUndefined(this._customTableDialog)?this._createCustomTable():u.show():u.hide();break;case"colorPaletteRows":this.model.colorPaletteRows=n[i];this._updateColorPalette();break;case"colorPaletteColumns":this.model.colorPaletteColumns=n[i];this._updateColorPalette();break;case"colorCode":this.model.colorCode=n[i];this._updateColorPalette();break;case"enableRTL":this._enableRTL(n[i])}},_init:function(){t.isNullOrUndefined(this.element)||this.element[0].type!="textarea"||(this._initialize(),this._render(),this.model.allowEditing&&this._wireEvents(),this._updateIframeSkin(this.model.iframeAttribute))},_destroy:function(){this.element.insertBefore(this._rteWapper);t.isNullOrUndefined(this._formatDDL)||this._formatDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontStyleDDL)||this._fontStyleDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontSizeDDL)||this._fontSizeDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontColorSplit)||this._fontColorSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._bgColorSplit)||this._bgColorSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._customTableDialog)||t.isNullOrUndefined(this._customTableDialog.find("#"+this._rteId+"_ddlAlignment"))||this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").ejDropDownList("destroy");this._rteWapper.remove();this.element.show();this._createTable=null},_initialize:function(){this._toolsList=this.model.toolsList;this._rteId=this.element[0].id;this._backupArray=[];this._undoRedoPosition=0;this._fontColor="";this._bgColor="";this._imgWidth=0;this._imgHeight=0;this._videoWidth=0;this._videoHeight=0;this._keypressFlag=!0;this._styleItems=t.isNullOrUndefined(this.model.tools.style)?[]:this.model.tools.style;this._alignItems=t.isNullOrUndefined(this.model.tools.alignment)?[]:this.model.tools.alignment;this._listItems=t.isNullOrUndefined(this.model.tools.lists)?[]:this.model.tools.lists;this._scriptsItems=t.isNullOrUndefined(this.model.tools.scripts)?[]:this.model.tools.scripts},_render:function(){this._renderWrapper();this._checkNameAttr();this.model.showToolbar&&this._renderToolBar();this._renderEditArea();this.model.showFooter&&this._renderFooter();this._setIframeHeight();this._renderAlertDialog();this._focus()},_checkNameAttr:function(){this.model.name?this.element.attr({name:this.model.name}):this.element.attr({name:this.element[0].id})},_enableEdit:function(n){n?(this._wireEvents(),this.model.showToolbar&&this._toolBarItems.ejToolbar("option","click",this._toolBarClick),this._rteIframe.contents().find("body").attr("contenteditable",!0)):(this._unwireEvents(),this.model.showToolbar&&this._toolBarItems.ejToolbar("option","click",null),this._rteIframe.contents().find("body").attr("contenteditable",!1))},_changeSkin:function(n){this._rteWapper.removeClass(this.model.cssClass).addClass(n);this._subControlsSetModel("cssClass",n)},_updateIframeSkin:function(n){var t=this._rteIframe.contents().find("body");this.model.enableRTL===!0?(t.attr("style",n),this._enableRTL(this.model.enableRTL)):t.attr("style",n)},_renderWrapper:function(){this._rteWapper=t.buildTag("div.e-rte e-rte-wrapper "+this.model.cssClass+"#"+this._rteId+"_wrapper","",{},{role:"presentation"}).insertBefore(this.element);this._rteWapper.height(this.model.height).width(this.model.width);this._rteWapper.append(this.element.hide())},_renderToolBar:function(){this._rteToolbar=t.buildTag("div.e-rte-toolbar #"+this._rteId+"_tools").insertAfter(this.element);this._crateToolbarTemplate();var n={};n.click=this.model.allowEditing?this._toolBarClick:null;n.cssClass=this.model.cssClass;n.enableRTL=this.model.enableRTL;this._toolBarItems.ejToolbar(n);this._initToolBarItems()},_crateToolbarTemplate:function(){this._toolBarItems=t.buildTag("div#"+this._rteId+"_toolbar").appendTo(this._rteToolbar).height(30);for(var n in this._toolsList)n=this._toolsList[n],t.isNullOrUndefined(this.model.tools[n])||(n=="customTool"?t.isNullOrUndefined(this.model.tools[n])||this._customTools(this.model.tools[n]):this.model.tools[n].length>0&&this._createToolsItems(this.model.tools[n],n))},_createToolsItems:function(i,r){var f,e,u;if(r=="font"&&!this.model.showFontOption)return!1;for(f=t.buildTag("ul#"+(this._rteId+r)),r=="font"&&f.addClass("e-rte-fontgroup"),r=="formatStyle"&&f.addClass("e-rte-format"),u=0;u<i.length;u++)e=n("<li id='"+(this._rteId+i[u].trim())+"' title='"+this._getLocalizedLabels(i[u].trim())+"' ><div class='e-rte-toolbar-icon "+i[u]+"'><\/div><\/li>"),e.appendTo(f);f.appendTo(this._toolBarItems)},_customTools:function(i){var r,e,f,u;for(r in i)e=t.buildTag("ul"),f=n("<li id='"+i[r].name+"' title='"+i[r].tooltip+"' ><div class='"+(t.isNullOrUndefined(i[r].css)?"":i[r].css)+"'>"+i[r].name+"<\/div><\/li>"),u=i[r].action,typeof u=="string"&&(u=t.util.getObject(u,window)),t.isNullOrUndefined(i[r].action)||this._on(f,"click",u),n(i[r].template).appendTo(f.find("div")),f.appendTo(e),e.appendTo(this._toolBarItems)},_initToolBarItems:function(){this._toolBarObj=this._toolBarItems.ejToolbar("instance");this._rteToolbar.find("#"+this._rteId+"format").length>0&&this._renderFormat();this._rteToolbar.find("#"+this._rteId+"createLink").length>0&&this._renderLinkDialog();this._rteToolbar.find("#"+this._rteId+"video").length>0&&this._renderVideoDialog();this._rteToolbar.find("#"+this._rteId+"image").length>0&&this._renderImageDialog();this._rteToolbar.find("#"+this._rteId+"createTable").length>0&&this._renderTableDialog();this._rteToolbar.find("#"+this._rteId+"fontName").length>0&&this._renderFontStyle();this._rteToolbar.find("#"+this._rteId+"fontSize").length>0&&this._renderFontSize();this._rteToolbar.find("#"+this._rteId+"fontColor").length>0&&this._renderFontColor();this._rteToolbar.find("#"+this._rteId+"backgrounColor").length>0&&this._renderBGColor();this.model.showClearAll||this._rteToolbar.find("#"+this._rteId+"clearAll").hide();this.model.showClearAll||this._rteToolbar.find("#"+this._rteId+"clearAll").hide();this._toolBarObj.disableItemByID(this._rteId+"undo");this._toolBarObj.disableItemByID(this._rteId+"redo");this._toolBarObj.selectItemByID(this._rteId+"justifyLeft");this._toolBarItems.find("#"+this._rteId+"addColumnLeft, #"+this._rteId+"addColumnRight, #"+this._rteId+"addRowAbove, #"+this._rteId+"addRowBelow, #"+this._rteId+"deleteRow, #"+this._rteId+"deleteColumn, #"+this._rteId+"deleteTable").hide()},_renderEditArea:function(){var n=t.buildTag("div.editarea #"+this._rteId+"_editer").appendTo(this._rteWapper);this._rteIframe=t.buildTag("iframe.content-iframe #"+this._rteId+"_Iframe").appendTo(n);this._setIFrames()},_setIFrames:function(){this.value(this.value()==null?n.trim(this.element[0].value):this.value());this._iframeId=this._rteId+"_Iframe";var i="<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:-1px 5px 0;height:100%;min-height:100%; padding-top: 1px;font-size: 13px;font-family:Segoe UI;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;padding:0 .2em} ul,ol{padding-left:2.5em} a{color:#00a} blockquote{margin-right: 0}.e-rte-table{border-spacing:0;margin: 0.2em 0 0.5em;border: 1px solid;}.e-rte-table caption{border: 1px solid;border-bottom:none}.e-rte-table,.e-rte-table td{outline:0;border-collapse: collapse; min-height:1px;vertical-align: top;text-indent: 5px;} .e-rte-table p{margin:0;padding:0;}<\/style><\/head><body autocorrect='off' contenteditable="+(this.model.allowEditing?"true":"false")+">"+n.trim(this.value())+"<\/body><\/html>";this._rteIframe.css({width:"100%"});this._setContent(i);(!t.isNullOrUndefined(this.model.undoStackLimit)||this.model.undoStackLimit!==""||this.model.undoStackLimit>0)&&(this._backupArray[0]=this.getHtml())},_setIframeHeight:function(){var n=(!t.isNullOrUndefined(this._rteToolbar)&&this._rteToolbar.is(":visible")?this._rteToolbar.outerHeight():6)+(!t.isNullOrUndefined(this._rteFooter)&&this._rteFooter.is(":visible")?this._rteFooter.outerHeight():0);this._rteIframe.height(n==0?this.model.height:this._rteWapper.outerHeight()-n-1)},_renderFooter:function(){var e=this.model,i,r,n;this._rteFooter=t.buildTag("div.e-rte-footer #"+this._rteId+"_footer").appendTo(this._rteWapper);i=t.buildTag("div.e-rte-footer-left");r=t.buildTag("div.e-rte-icons e-rte-footeritems e-rte-footericon e-rte-source","",{},{title:this._getLocalizedLabels("viewHtml")}).appendTo(i);this._htmlInfo=t.buildTag("div.e-rte-htmltaginfo e-rte-footeritems").appendTo(i);i.appendTo(this._rteFooter);n=t.buildTag("div.e-rte-footer-right");this._wordCount=t.buildTag("div.e-rte-wordcount e-rte-footeritems").appendTo(n);var u=t.buildTag("div.e-rte-icons clearFormat e-rte-footericon e-rte-footeritems","",{},{title:this._getLocalizedLabels("clearFormat")}).appendTo(n),f=t.buildTag("div.e-rte-icons clearAll e-rte-footericon e-rte-footeritems","",{},{title:this._getLocalizedLabels("clearAll")}).appendTo(n),o=t.buildTag("div.e-icons e-rte-resize e-rte-footeritems").appendTo(n);n.appendTo(this._rteFooter);this._on(r,"click",this._sourceCodeManager);this._on(u,"click",this._onClearFormat);this._on(f,"click",this._clearAllManager);this.model.showHtmlSource||r.hide().removeClass("e-rte-footeritems");this.model.showHtmlTagInfo||this._htmlInfo.hide().removeClass("e-rte-footeritems");this.model.showWordCount||this._wordCount.hide().removeClass("e-rte-footeritems");this.model.showClearAll||f.hide().removeClass("e-rte-footeritems");this.model.showClearFormat||u.hide().removeClass("e-rte-footeritems");e.enableResize?this._enableResize():o.hide().removeClass("e-rte-footeritems");this._updateCharCount()},_footerElement:function(n,t){var i=this._rteFooter.find(n);t?i.show().addClass("e-rte-footeritems"):i.hide().addClass("e-rte-footeritems")},_updateColorPalette:function(){var t=n("ul#"+this._rteId+"_colorTable"),i=n("ul#"+this._rteId+"_colorBGTable");t.find("div.e-rte-table").remove();t.find("li").append(this._colorTable());i.find("div.e-rte-table").remove();i.find("li").append(this._colorTable())},_enableRTL:function(n){n?this._rteIframe.contents().find("body").css("direction","rtl"):this._rteIframe.contents().find("body").css("direction","");this._subControlsSetModel("enableRTL",n)},_subControlsSetModel:function(n,i){t.isNullOrUndefined(this._toolBarItems)||this._toolBarItems.ejToolbar({prop:i});t.isNullOrUndefined(this._linkDialog)||this._linkDialog.ejDialog({prop:i});t.isNullOrUndefined(this._imgDialog)||this._imgDialog.ejDialog({prop:i});t.isNullOrUndefined(this._videoDialog)||this._videoDialog.ejDialog({prop:i});t.isNullOrUndefined(this._createTable)||this._createTable.ejDialog({prop:i});t.isNullOrUndefined(this._sourceDialog)||this._sourceDialog.ejDialog({prop:i});t.isNullOrUndefined(this._customTableDialog)||(t.isNullOrUndefined(this._customTableDialog)||this._customTableDialog.ejDialog({prop:i}),this._customTableDialog.find(".numerictextbox").ejNumericTextbox({prop:i}),this._customTableDialog.find("#ddlAlignment").ejDropDownList({prop:i}),t.isNullOrUndefined(this._customTableDialog)||this._customTableDialog.find(".e-rte-btn").ejButton({prop:i}));t.isNullOrUndefined(this._videoDialog)||this._videoDialog.find(".e-rte-btn").ejButton({prop:i});t.isNullOrUndefined(this._imgDialog)||this._imgDialog.find(".e-rte-btn").ejButton({prop:i});t.isNullOrUndefined(this._linkDialog)||this._linkDialog.find(".e-rte-btn").ejButton({prop:i});t.isNullOrUndefined(this._fontStyleDDL)||this._fontStyleDDL.ejDropDownList({prop:i});t.isNullOrUndefined(this._fontSizeDDL)||this._fontSizeDDL.ejDropDownList({prop:i});t.isNullOrUndefined(this._formatDDL)||this._formatDDL.ejDropDownList({prop:i});t.isNullOrUndefined(this._fontColorSplit)||this._fontColorSplit.ejSplitButton({prop:i});t.isNullOrUndefined(this._bgColorSplit)||this._bgColorSplit.ejSplitButton({prop:i})},_createHtmlSource:function(){t.isNullOrUndefined(this._htmlSource)?(this._htmlSource=t.buildTag("div.e-rte-icons e-rte-footeritems e-rte-source").appendTo(this._rteFooter),this._on(this._htmlSource,"click",this._sourceCodeManager),this._renderSourceDialog()):this._htmlSource.show()},_createHtmlTagsInfo:function(){t.isNullOrUndefined(this._htmlInfo)?this._htmlInfo=t.buildTag("div.e-rte-htmltaginfo e-rte-footeritems").appendTo(this._rteFooter):this._htmlInfo.show()},_createWordCount:function(){t.isNullOrUndefined(this._wordCount)?this._wordCount=t.buildTag("div.e-rte-wordcount e-rte-footeritems").appendTo(this._rteFooter):this._wordCount.show()},_enableResize:function(){this.model.enableResize&&this.model.enabled&&(this._rteWapper.addClass("e-resizable"),this._resizeRTE())},_resizeRTE:function(){var t=this;this._rteWapper.find("div.e-rte-resize").ejResizable({minHeight:parseInt(t.model.minHeight),minWidth:parseInt(t.model.minWidth),maxHeight:parseInt(t.model.maxHeight),maxWidth:parseInt(t.model.maxWidth),resizeStart:function(n){t._trigger("resizeStart",{event:n})},resize:function(i){var r=n(i.element).parents("div.e-rte-wrapper");t._rteWapper.height(n(r).height());t._rteWapper.width(n(r).width());t._setIframeHeight();t._trigger("resize",{event:i})},resizeStop:function(n){t._trigger("resizeStop",{event:n})},helper:function(i){var r=n(i.element).parents("div.e-rte-wrapper");return t._rteWapper.height(n(r).height()),t._rteWapper.width(n(r).width()),t._setIframeHeight(),n(t._rteWapper)}})},_getDialogModel:function(){return dialogModel={enableResize:!1,showOnInit:!1,enableModal:!0,cssClass:this.model.cssClass,content:"#"+this._rteId+"_wrapper",enableRTL:this.model.enableRTL}},_renderLinkDialog:function(){var i=this._linkDialog=t.buildTag("div#"+this._rteId+"_link"),u=n("<div class='e-rte-label'><label for="+this._rteId+"_link_url>"+this._getLocalizedLabels("linkWebUrl")+"<\/label><\/div><div class='e-rte-field'><input type='text' class='e-inputtext' id='"+this._rteId+"_link_url'/><\/div><div class='e-rte-label'><label for="+this._rteId+"_link_text>"+this._getLocalizedLabels("linkText")+"<\/label><\/div><div class='e-rte-field'><input type='text' class='e-inputtext' id='"+this._rteId+"_link_text'><\/div><div class='e-rte-label'><label for="+this._rteId+"_link_title>"+this._getLocalizedLabels("linkToolTip")+" <\/label><\/div><div class='e-rte-field'><input type='text' class='e-inputtext' id='"+this._rteId+"_link_title'><\/div><div class='e-rte-label'><\/div><div class='e-rte-field'><input type='checkbox' id='"+this._rteId+"_link_target'><label for='"+this._rteId+"_link_target' style='padding: 5px;'>"+this._getLocalizedLabels("linkOpenInNewWindow")+"<\/label><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn' id='link_insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn' id='link_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>"),r;u.appendTo(i);i.appendTo(this._rteWapper);r=this._getDialogModel();r.title=this._getLocalizedLabels("createLink");i.ejDialog(r);this._chkTarget=i.find("#"+this._rteId+"_link_target");this._chkTarget.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});i.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._on(i.find(".e-rte-btn"),"click",this._linkBtnClick);this._on(this._linkDialog.find("#"+this._rteId+"_link_url"),"keypress",this._urlValidation)},_renderImageDialog:function(){var r,i;this._imgDialog=t.buildTag("div#"+this._rteId+"_Image");r=n("<div class='e-rte-label'><label for="+this._rteId+"_img_url>"+this._getLocalizedLabels("imageWebUrl")+" <\/label><\/div><div class='e-rte-field'><input type='text' class='e-inputtext' id='"+this._rteId+"_img_url'><\/div><div class='e-rte-label'><label for="+this._rteId+"_img_text>"+this._getLocalizedLabels("imageAltText")+" <\/label><\/div><div class='e-rte-field'><input type='text' class='e-inputtext' id='"+this._rteId+"_img_text'><\/div><div id='"+this._rteId+"_imgdimensions'><div class='e-rte-label'><label>"+this._getLocalizedLabels("dimensions")+" <\/label><\/div><div class='e-rte-field'><input type='text' title='"+this._getLocalizedLabels("dimensions")+"' class='e-inputtext e-dimensions' maxlength='3' id='"+this._rteId+"_imgX'><label style='padding: 5px;'>X<\/label><input type='text' title='"+this._getLocalizedLabels("dimensions")+"' style='margin-right: 5px;' class='e-inputtext e-dimensions' maxlength='3' id='"+this._rteId+"_imgY'><\/div><input type='checkbox' id='"+this._rteId+"_img_consrn'><label for='"+this._rteId+"_img_consrn'  style='padding: 5px;'>"+this._getLocalizedLabels("constrainProportions")+"<\/label><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn' id='img_insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn' id='img_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");r.appendTo(this._imgDialog);this._imgDialog.appendTo(this._rteWapper);this.model.showDimensions||this._rteWapper.find("#"+this._rteId+"_imgdimensions").hide();i=this._getDialogModel();i.width="470px";i.title=this._getLocalizedLabels("image");this._imgDialog.ejDialog(i);this._chkImgDimensions=this._imgDialog.find("#"+this._rteId+"_img_consrn");this._chkImgDimensions.ejCheckBox({check:!0,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._imgDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._on(this._imgDialog.find(".e-rte-btn"),"click",this._imageBtnClick);this._on(this._imgDialog.find("#"+this._rteId+"_img_url"),"keypress",this._urlValidation);this._on(this._imgDialog.find("input.e-dimensions"),"change",this._recalcImgSize)},_renderVideoDialog:function(){var r,i;this._videoDialog=t.buildTag("div#"+this._rteId+"_video");r=n("<div><label>"+this._getLocalizedLabels("embedVideo")+"<\/label><\/div><textarea class='e-rte-video e-inputtext'  aria-label="+this._getLocalizedLabels("embedVideo")+"><\/textarea><div id='"+this._rteId+"_videodimensions' style='margin-top:7px'><div class='e-rte-label'><label>"+this._getLocalizedLabels("dimensions")+" <\/label><\/div><div><input type='text' title='"+this._getLocalizedLabels("dimensions")+"' class='e-inputtext e-dimensions' maxlength='3' id='"+this._rteId+"_videoX'><label style='padding: 5px;'>X<\/label><input type='text' title='"+this._getLocalizedLabels("dimensions")+"' style='margin-right: 5px;' class='e-inputtext e-dimensions' maxlength='3' id='"+this._rteId+"_videoY'><input type='checkbox' id='"+this._rteId+"_video_consrn'><label for='"+this._rteId+"_video_consrn'  style='padding: 5px;'>"+this._getLocalizedLabels("constrainProportions")+"<\/label><\/div><\/div><div class='e-rte-button e-fieldseparate'><button id='video_insert' class='e-rte-btn'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button id='video_cancel' class='e-rte-btn'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");r.appendTo(this._videoDialog);this._videoDialog.appendTo(this._rteWapper);this.model.showDimensions||this._rteWapper.find("#"+this._rteId+"_videodimensions").hide();i=this._getDialogModel();i.width="460px";i.title=this._getLocalizedLabels("video");this._videoDialog.ejDialog(i);this._chkvideoDimensions=this._videoDialog.find("#"+this._rteId+"_video_consrn");this._chkvideoDimensions.ejCheckBox({checked:!0,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._videoDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._on(this._videoDialog.find(".e-rte-btn"),"click",this._insertVideo);this._on(this._videoDialog.find("input.e-dimensions"),"change",this._recalcVideoSize)},_renderTableDialog:function(){var i,n;this._createTable=t.buildTag("div.e-rte-table-picker#"+this._rteId+"_table");this._tblheaderDiv=t.buildTag("div.e-rte-tableheader");this._tblheaderDiv.html(this._getLocalizedLabels("createTable"));this._tblheaderDiv.appendTo(this._createTable);i=t.buildTag("div.e-rte-table");this._drawTable(i);i.appendTo(this._createTable);this.model.showCustomTable&&this._createCustomTable();this._createTable.appendTo(this._rteWapper);n=this._getDialogModel();n.modal=!1;n.showHeader=!1;n.width="auto";this._createTable.ejDialog(n)},_createCustomTable:function(){var r=n("<div class='customtable-group'><span class='e-rte-toolbar-icon customtable-image'><\/span><a class='customtable-link' href='#' role='button' title='"+this._getLocalizedLabels("customTable")+"'>"+this._getLocalizedLabels("customTable")+"<\/a><\/div>"),u,i;this._on(r,"click",this._openCustomTable);r.appendTo(this._createTable);this._customTableDialog=t.buildTag("div#"+this._rteId+"_customTable");u=n("<div class='e-fieldgroup'><div class='e-rte-tablefields'><label for="+this._rteId+"_txtColumns>"+this._getLocalizedLabels("tableColumns")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='numerictextbox' id='"+this._rteId+"_txtColumns'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_txtRows>"+this._getLocalizedLabels("tableRows")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='numerictextbox' id='"+this._rteId+"_txtRows'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_txtWidth>"+this._getLocalizedLabels("tableWidth")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='e-inputtext' id='"+this._rteId+"_txtWidth'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_txtHeight>"+this._getLocalizedLabels("tableHeight")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='e-inputtext' id='"+this._rteId+"_txtHeight'><\/div><\/div><div class='e-fieldseparate'><div class='e-rte-tablefields'><label for="+this._rteId+"_txtSpacing>"+this._getLocalizedLabels("tableCellSpacing")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='e-inputtext' id='"+this._rteId+"_txtSpacing'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_txtPadding>"+this._getLocalizedLabels("tableCellPadding")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='e-inputtext' id='"+this._rteId+"_txtPadding'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_txtBorder>"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='e-inputtext' id='"+this._rteId+"_txtBorder'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_chkCaption>"+this._getLocalizedLabels("tableCaption")+"<\/label><\/div><div class='e-rte-tablefields'><input type='checkbox' id='"+this._rteId+"_chkCaption'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_ddlAlignment>"+this._getLocalizedLabels("tableAlignment")+"<\/label><\/div><div class='e-rte-tablefields'><select id='"+this._rteId+"_ddlAlignment'><option value='left'>Left<\/option><option value='right'>Right<\/option><option value='center'>Center<\/option><\/select><\/div><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn' id='insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn' id='cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");u.appendTo(this._customTableDialog);i=this._getDialogModel();i.width="480px";i.title=this._getLocalizedLabels("customTable");this._customTableDialog.ejDialog(i);this._customTableDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._customTableDialog.find(".numerictextbox").ejNumericTextbox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",minValue:1,value:3});this._customTableDialog.find("#"+this._rteId+"_txtColumns").ejNumericTextbox({maxValue:63});this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!1});this._chkTblCaption=this._customTableDialog.find("#"+this._rteId+"_chkCaption");this._chkTblCaption.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._on(this._customTableDialog.find(".e-rte-btn"),"click",this._insertCustomTable)},_drawTable:function(n){for(var r,i=0;i<this.model.tableRows;i++){for(rowDiv=t.buildTag("div.e-rtetablerow"),r=0;r<this.model.tableColumns;r++)tableCell=t.buildTag("div.e-rte-tablecell e-default"),tableCell.appendTo(rowDiv);rowDiv.appendTo(n)}},_renderSourceDialog:function(){var r,i;this._sourceDialog=t.buildTag("div#"+this._rteId+"_Source");r=n("<textarea class='e-rte-srctextarea e-inputtext'><\/textarea><div class='e-rte-button e-fieldseparate'><button id='src_update' class='e-rte-btn'>"+this._getLocalizedLabels("dialogUpdate")+"<\/button><button id='src_cancel' class='e-rte-btn'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");r.appendTo(this._sourceDialog);i=this._getDialogModel();i.title=this._getLocalizedLabels("viewHtml");i.width="auto";i.content=null;this._sourceDialog.ejDialog(i);this._sourceDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._on(this._sourceDialog.find(".e-rte-btn"),"click",this._srcBtnClick)},_renderAlertDialog:function(){var r,i;this._alertWindow=t.buildTag("div");r=n("<p class='e-alerttext'><\/p><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn e-alert-ok'>"+this._getLocalizedLabels("dialogOk")+"<\/button><button class='e-rte-btn e-alert-cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");r.appendTo(this._alertWindow);i=this._getDialogModel();i.showHeader=!1;i.width="auto";this._alertWindow.ejDialog(i);this._alertWindow.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._on(this._alertWindow.find(".e-rte-btn"),"click",this._alertBtnClick);this._alertWindow.find(".e-alert-cancel").hide()},_alertBtnClick:function(t){n.trim(this._alertWindow.find(".e-alerttext").html())==this._getLocalizedLabels("deleteAlert")&&n(t.target).hasClass("e-alert-ok")&&(this._getDocument().body.innerHTML="",this._toolBarObj.selectItemByID(this._rteId+"justifyLeft"),this._setBackupData(),this._updateCharCount(),this._onChange());this._alertWindow.ejDialog("close");this._alertWindow.find(".e-alert-cancel").hide()},_openAlert:function(n){this._alertWindow.find(".e-alerttext").html(n);this._alertWindow.ejDialog("open")},_renderFormat:function(){this._formatDDL=t.buildTag("input#"+this._rteId+"_format","","",{type:"text",title:this._getLocalizedLabels("format")});var n={};n.dataSource=this.model.format;n.height="25px";n.width="105px";n.enableRTL=this.model.enableRTL;n.popupWidth="175px";n.popupHeight="auto";n.selectedItemIndex=0;n.popupHide=this._formatChange;n.fields={text:"text",value:"value",spriteCssClass:"spriteCssClass"};this._formatDDL.appendTo(this._rteToolbar.find("#"+this._rteId+"format").html(""));this._formatDDL.ejDropDownList(n);this._formatPopupStyle()},_formatPopupStyle:function(){for(var i=n("#"+this._rteId+"_format_popup").find("li"),t=0;t<i.length;t++)n(i[t]).addClass(this.model.format[t].spriteCssClass)},_renderFontStyle:function(){this._fontStyleDDL=t.buildTag("input#"+this._rteId+"_fontName","","",{type:"text",title:this._getLocalizedLabels("fontName")});var n={};n.dataSource=this.model.fontName;n.height="25px";n.enableRTL=this.model.enableRTL;n.selectedItemIndex=0;n.popupHide=this._fontStyleChange;n.fields={text:"text",value:"value"};this._fontStyleDDL.appendTo(this._rteToolbar.find("#"+this._rteId+"fontName").html(""));this._fontStyleDDL.ejDropDownList(n)},_renderFontSize:function(){this._fontSizeDDL=t.buildTag("input#"+this._rteId+"_fontSize","","",{type:"text",title:this._getLocalizedLabels("fontSize")});var n={};n.dataSource=this.model.fontSize;n.height="25px";n.width="100px";n.enableRTL=this.model.enableRTL;n.selectedItemIndex=1;n.popupHide=this._fontSizeChange;n.fields={text:"text",value:"value"};this._fontSizeDDL.appendTo(this._rteToolbar.find("#"+this._rteId+"fontSize").html(""));this._fontSizeDDL.ejDropDownList(n)},_renderFontColor:function(){var r,i;this._fontColorSplit=t.buildTag("button#"+this._rteId+"_fontColor","",{},{type:"button"});r=n("<ul id='"+this._rteId+"_colorTable' class='e-rte-colorpalette'><li><\/li><\/ul>");r.find("li").append(this._colorTable());i={};i.height="25px";i.width="50px";i.contentType="textandimage";i.targetID=this._rteId+"_colorTable";i.enableRTL=this.model.enableRTL;i.prefixIcon="e-fontcolor-icon";this._fontColorSplit.appendTo(this._rteToolbar.find("#"+this._rteId+"fontColor").html(""));r.appendTo(this._rteToolbar.find("#"+this._rteId+"fontColor"));this._fontColorSplit.ejSplitButton(i);this._splitMenu=r.ejMenu("instance");this._on(r.find("div.e-rte-palettetable"),"click",this._colorPaletteClick);this._on(this._fontColorSplit,"click",this._fontColorClick);this._fontColorSplit.find("span.e-fontcolor-icon").removeClass("e-icon");this._fontColorSplit.find("span.e-btntxt").css("background-color","black")},_renderBGColor:function(){var r,i;this._bgColorSplit=t.buildTag("button#"+this._rteId+"_backgrounColor","",{},{type:"button"});r=n("<ul id='"+this._rteId+"_colorBGTable' class='e-rte-colorpalette'><li><\/li><\/ul>");r.find("li").append(this._colorTable());i={};i.height="25px";i.width="50px";i.contentType="textandimage";i.targetID=this._rteId+"_colorBGTable";i.enableRTL=this.model.enableRTL;i.prefixIcon="e-bgcolor-icon";this._bgColorSplit.appendTo(this._rteToolbar.find("#"+this._rteId+"backgrounColor").html(""));r.appendTo(this._rteToolbar.find("#"+this._rteId+"backgrounColor"));this._bgColorSplit.ejSplitButton(i);this._bgSplitMenu=r.ejMenu("instance");this._on(r.find("div.e-rte-palettetable"),"click",this._bgColorPaletteClick);this._on(this._bgColorSplit,"click",this._bgColorClick);this._bgColorSplit.find("span.e-bgcolor-icon").removeClass("e-icon");this._bgColorSplit.find("span.e-btntxt").css("background-color","white")},_colorTable:function(){for(var u,f=t.buildTag("div.e-rte-table"),i=0,n,r,e=0;e<this.model.colorPaletteRows;e++){for(r=t.buildTag("div.e-rtetablerow"),u=0;u<this.model.colorPaletteColumns;u++)i<this.model.colorCode.length&&(n="#"+this.model.colorCode[i],tableCell=t.buildTag("div.e-rte-palettetable","",{"background-color":n},{title:n,"color-code":n}),tableCell.appendTo(r),i++);r.appendTo(f)}return f},_recalcVideoSize:function(n){var r,u,t,i;r=this._videoDialog.find("#"+this._rteId+"_videoX");u=this._videoDialog.find("#"+this._rteId+"_videoY");t=r.val();i=u.val();this._chkvideoDimensions.ejCheckBox("isChecked")&&this._videoWidth&&this._videoHeight&&t&&i&&(n.target.id==r[0].id?(i=Math.round(t/this._videoWidth*i),u.val(i)):(t=Math.round(i/this._videoHeight*t),r.val(t)));this._videoWidth=t;this._videoHeight=i},_recalcImgSize:function(n){var r,u,t,i;r=this._imgDialog.find("#"+this._rteId+"_imgX");u=this._imgDialog.find("#"+this._rteId+"_imgY");t=r.val();i=u.val();this._chkImgDimensions.ejCheckBox("isChecked")&&this._imgWidth&&this._imgHeight&&t&&i&&(n.target.id==r[0].id?(i=Math.round(t/this._imgWidth*i),u.val(i)):(t=Math.round(i/this._imgHeight*t),r.val(t)));this._imgWidth=t;this._imgHeight=i},_urlValidation:function(t){var i=n(t.target);i.hasClass("e-error")&&i.removeClass("e-error")},_linkBtnClick:function(n){n.target.id==="link_cancel"?(this._clearLinkFields(),this._linkDialog.ejDialog("close")):n.target.id==="link_insert"&&(this._restoreSelection(this._selectionRange),this._txtURL.val()!=""?this._onInsertLink():(this._onUnlink(),this._linkDialog.ejDialog("close")),this._onChange(),this._setBackupData())},_imageBtnClick:function(n){n.target.id==="img_cancel"?this._imgDialog.ejDialog("close"):n.target.id==="img_insert"&&(this._onInsertImage(),this._onChange(),this._setBackupData())},_srcBtnClick:function(t){if(t.target.id==="src_update"){var i=n.trim(this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value);this._getDocument().body.innerHTML=i;this._onChange();this._updateCharCount()}this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value="";this._sourceDialog.ejDialog("close")},_insertCustomTable:function(i){var f,r,u;if(i.target.id==="insert"){var e=this._customTableDialog.find("#"+this._rteId+"_txtColumns").ejNumericTextbox("getValue"),o=this._customTableDialog.find("#"+this._rteId+"_txtRows").ejNumericTextbox("getValue"),s=this._customTableDialog.find("#"+this._rteId+"_txtHeight").val(),h=this._customTableDialog.find("#"+this._rteId+"_txtWidth").val(),c=this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").ejDropDownList("getSelectedValue"),l=this._customTableDialog.find("#"+this._rteId+"_txtSpacing").val(),a=this._customTableDialog.find("#"+this._rteId+"_txtPadding").val(),v=this._customTableDialog.find("#"+this._rteId+"_txtBorder").val(),y=this._chkTblCaption.ejCheckBox("isChecked");t.isNullOrUndefined(this._tableInsertAt)||t.isNullOrUndefined(this._tableInsertAt.startContainer)||this._restoreSelection(this._tableInsertAt);f=this._tableGenerator(o,e,!1,h,s,l,a,c,v,y);this.executeCommand("inserthtml",f);r=n(this._getDocument()).find("table.e-rte-table");r.attr("contentEditable",!1);r.find("td").attr("contentEditable",!0);u=this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").data("ejDropDownList");u.option("value")=="Center"&&r.attr("style","margin: 0 auto");this._onChange();u.option({value:"",enabled:!1})}this._customTableDialog.ejDialog("close");this._clearTableFields()},_clearTableFields:function(){this._customTableDialog.find("#"+this._rteId+"_txtColumns").ejNumericTextbox("option","value",3);this._customTableDialog.find("#"+this._rteId+"_txtRows").ejNumericTextbox("option","value",3);this._customTableDialog.find("#"+this._rteId+"_txtHeight").val("");this._customTableDialog.find("#"+this._rteId+"_txtWidth").val("");this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").ejDropDownList("clearText");this._customTableDialog.find("#"+this._rteId+"_txtSpacing").val("");this._customTableDialog.find("#"+this._rteId+"_txtPadding").val("");var n=this._customTableDialog.find("#"+this._rteId+"_txtBorder").val(""),t=this._chkTblCaption.ejCheckBox({check:!1})},_clearLinkFields:function(){this._txtURL=this._linkDialog.find("#"+this._rteId+"_link_url");this._txtURL.removeClass("e-error");this._txtURL.val("http://");this._txtLinkText=this._linkDialog.find("#"+this._rteId+"_link_text");this._txtLinkText.val("");this._txtLinkTitle=this._linkDialog.find("#"+this._rteId+"_link_title");this._txtLinkTitle.val("");this._chkTarget.ejCheckBox({check:!1});this._txtURL.focus()},_clearImgFields:function(){this._imgDialog.find("#"+this._rteId+"_img_url").val("http://").removeClass("e-error");this._imgDialog.find("#"+this._rteId+"_img_text").val("");this._chkImgDimensions.ejCheckBox({checked:!0})},_videoManager:function(){var n=this._getSelectedNode();this._editVideo=null;n&&n.tagName.toLowerCase()==="iframe"&&(this._editVideo=n,this._videoWidth=parseInt(n.width),this._videoHeight=parseInt(n.height),this._videoDialog.find("textarea.e-rte-video").val(n.outerHTML),this._videoDialog.find("#"+this._rteId+"_videoX").val(this._videoWidth),this._videoDialog.find("#"+this._rteId+"_videoY").val(this._videoHeight));this._videoDialog.ejDialog("open");this._videoDialog.find("textarea.e-rte-video").focus()},_sourceCodeManager:function(){t.isNullOrUndefined(this._sourceDialog)&&this._renderSourceDialog();this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value=this.getHtml();this._sourceDialog.ejDialog("open");this._sourceDialog.find("textarea.e-rte-srctextarea").focus()},_hyperLinkManager:function(){this._linkDialog.ejDialog("open");this._clearLinkFields();this._txtLinkText.val(this._getSelText());this._selectedHTML=this._getSelText();this._hyperLinkSelection=this._getDocument().selection;var n=this._getSelectedNode();n&&/^(A)$/.test(n.nodeName)&&(this._txtURL.val(n.href),this._txtLinkTitle.val(n.title));this._hyperLinkSelection!=null&&(this._hyperLinkSelRange=this._hyperLinkSelection.createRange())},_tableManager:function(){var n=this._rteToolbar.find("#"+this._rteId+"createTable");this._createTable.ejDialog("option","position",{X:n.position().left,Y:n.position().top+n.height()+7});this._createTable.ejDialog("open")},_imageManager:function(){this._clearImgFields();var n=this._getSelectedNode();n&&n.tagName.toLowerCase()==="img"&&(this._imgWidth=parseInt(n.width),this._imgHeight=parseInt(n.height),this._imgDialog.find("#"+this._rteId+"_img_url").val(n.src),this._imgDialog.find("#"+this._rteId+"_img_text").val(n.alt),this._imgDialog.find("#"+this._rteId+"_imgX").val(this._imgWidth),this._imgDialog.find("#"+this._rteId+"_imgY").val(this._imgHeight));this._imgDialog.ejDialog("open");this._imgDialog.find("#"+this._rteId+"_img_url").focus()},_toolBarClick:function(t){var o=n(this.itemsContainer).closest("div.e-rte").find("textarea.e-rte"),i=o.ejRTE("instance"),r=o.attr("id"),u=t.currentTarget.id.replace(r,""),f,e;if(t.currentTarget.id!=r+"copy"&&t.currentTarget.id!=r+"cut"&&t.currentTarget.id!=r+"paste"||i._isIE()?i._selectCommand(t.currentTarget.id):i._openAlert(i._getLocalizedLabels("copyPastAlert")),i._styleItems.indexOf(u)>=0||i._scriptsItems.indexOf(u)>=0)n(t.currentTarget).hasClass("e-active")?this.deselectItemByID(t.currentTarget.id):this.selectItemByID(t.currentTarget.id);else if(i._alignItems.indexOf(u)>=0)for(this.selectItemByID(t.currentTarget.id),e=i._alignItems.indexOf(u),f=0;f<i._alignItems.length;f++)f!=e&&this.deselectItemByID(r+i._alignItems[f]);else i._listItems.indexOf(u)>=0&&(n(t.currentTarget).hasClass("e-active")?this.deselectItemByID(t.currentTarget.id):this.selectItemByID(t.currentTarget.id),e=i._listItems.indexOf(u),e==0?this.deselectItemByID(r+i._listItems[1]):this.deselectItemByID(r+i._listItems[0]))},_toggleEditTable:function(){var n=this._getSelectedNode(),t=this._toolBarItems.find("#"+this._rteId+"addColumnLeft, #"+this._rteId+"addColumnRight, #"+this._rteId+"addRowAbove, #"+this._rteId+"addRowBelow, #"+this._rteId+"deleteRow, #"+this._rteId+"deleteColumn, #"+this._rteId+"deleteTable");n&&n.tagName&&(n.tagName.toLowerCase()=="td"||n.tagName.toLowerCase()=="table"||n.tagName.toLowerCase()=="tr")?t.show():t.hide();this._setIframeHeight()},_formatChange:function(){var i=n(this.element).closest("div.e-rte").find("textarea.e-rte"),t=i.ejRTE("instance"),r=i.attr("id");this.getSelectedValue()!==""&&t._onFormatBlock(this.getSelectedValue());t._focus();t._onChange()},_fontStyleChange:function(){var t=n(this.element).closest("div.e-rte").find("textarea.e-rte"),i=t.ejRTE("instance"),r=t.attr("id");this.getSelectedValue()!==""&&i._onFontName(this.getSelectedValue());i._onChange()},_fontSizeChange:function(){var t=n(this.element).closest("div.e-rte").find("textarea.e-rte"),i=t.ejRTE("instance"),r=t.attr("id");this.getSelectedValue()!==""&&i._onFontSize(this.getSelectedValue());i._onChange()},_colorPaletteClick:function(n){var t;(t=n.target.getAttribute("color-code"))&&(this._focus(),this._onFontColor(t),this._splitMenu.hide(n),this._bgSplitMenu.hide(n),this._fontColor=t,this._fontColorSplit.find("span.e-btntxt").css("background-color",t))},_bgColorPaletteClick:function(n){var t;(t=n.target.getAttribute("color-code"))&&(this._focus(),this._onBGColor(t),this._splitMenu.hide(n),this._bgSplitMenu.hide(n),this._bgColor=t,this._bgColorSplit.find("span.e-btntxt").css("background-color",t))},_fontColorClick:function(n){this._onFontColor(this._fontColor);this._splitMenu.hide(n)},_bgColorClick:function(n){this._onBGColor(this._bgColor);this._bgSplitMenu.hide(n)},_selectCommand:function(n){var t=this._rteId,i;n==t+"format"||n==t+"fontName"||n==t+"fontSize"||n==t+"fontColor"||n==t+"backgrounColor"||this._focus();switch(n){case t+"bold":this._onBold();break;case t+"italic":this._onItalics();break;case t+"underline":this._onUnderLine();break;case t+"strikethrough":this._onStrikeThrough();break;case t+"justifyLeft":this._onJustifyLeft();break;case t+"justifyRight":this._onJustifyRight();break;case t+"justifyCenter":this._onJustifyCenter();break;case t+"justifyFull":this._onJustifyFull();break;case t+"cut":this._onCut();break;case t+"copy":this._onCopy();break;case t+"paste":this._onPaste();break;case t+"clearFormat":this._onClearFormat();break;case t+"clearAll":this._clearAllManager();break;case t+"orderedList":this._onOrderList();break;case t+"unorderedList":this._onUnorderList();break;case t+"undo":this._undo();break;case t+"redo":this._redo();break;case t+"indent":this._onIndent();this._indentdepth++;break;case t+"outdent":this._onOutdent();this._indentdepth>0&&this._indentdepth--;break;case t+"createLink":this._hyperLinkManager();break;case t+"image":this._imageManager();break;case t+"createTable":this._tableManager();break;case t+"addRowAbove":this.insertRow(!0);break;case t+"addRowBelow":this.insertRow(!1);break;case t+"addColumnLeft":this.insertColumn(!0);break;case t+"addColumnRight":this.insertColumn(!1);break;case t+"deleteRow":this.removeRow();break;case t+"deleteColumn":this.removeColumn();break;case t+"deleteTable":this.removeTable();break;case t+"superscript":this._onSuperScript();break;case t+"subscript":this._onSubScript();break;case t+"upperCase":this._onUpperCase();break;case t+"lowerCase":this._onLowerCase();break;case t+"video":this._videoManager();break;default:this._onChange()}n!=t+"createLink"&&n!=t+"image"&&n!=t+"video"&&n!=t+"createTable"&&this._onChange();n!=t+"undo"&&n!=t+"redo"&&this._setBackupData();i=this._getSelectedNode();this._updateTagInfo(i)},_focus:function(){this._getWindow().focus();this._restoreSelection(this._selectionRange)},_getWindow:function(){var n=document.getElementById(this._iframeId);return n.contentWindow},_getDocument:function(){var n=document.getElementById(this._iframeId);return n.contentWindow.document},_onBold:function(){var n;this.executeCommand("bold",n)},_onItalics:function(){var n;this.executeCommand("italic",n)},_onStrikeThrough:function(){var n;this.executeCommand("strikethrough",n)},_onUnderLine:function(){var n;this.executeCommand("underline",n)},_onJustifyLeft:function(){var n;this.executeCommand("JustifyLeft",n)},_onJustifyRight:function(){var n;this.executeCommand("JustifyRight",n)},_onJustifyCenter:function(){var n;this.executeCommand("JustifyCenter",n)},_onJustifyFull:function(){this._alignFlag=!0;this.executeCommand("justifyfull")},_onCut:function(){var n;this.executeCommand("cut",n)},_onCopy:function(){var n;this.executeCommand("copy",n)},_onPaste:function(){var n;this.executeCommand("paste",n)},_onOrderList:function(){var n;this.executeCommand("insertorderedlist",n)},_onUnorderList:function(){var n;this.executeCommand("insertunorderedlist",n)},_onUndo:function(){this.executeCommand("undo",null)},_onDelete:function(){this.executeCommand("delete",null)},_onRedo:function(){this.executeCommand("redo",null)},_onClearFormat:function(){var n;this.executeCommand("removeformat",n);this._setBackupData();this._onChange();this._updateIframeSkin(this.model.iframeAttribute)},_onFormatBlock:function(n){this._focus();this.executeCommand("formatBlock",n)},_onFontName:function(n){this.executeCommand("fontName",n)},_onFontSize:function(n){this.executeCommand("fontSize",n)},_onFontColor:function(n){this.executeCommand("foreColor",n);this._onChange();this._updateIframeSkin(this.model.iframeAttribute)},_onBGColor:function(n){this.executeCommand("backColor",n);this._onChange()},_onIndent:function(){this._getWindow().document.body.style.wordWrap="break-word";var t=this._getWindow().document.getSelection().focusNode;t&&/^(OL|UL|LI)$/.test(t.nodeName)?this._listIndent(t):t&&/^(#text)$/.test(t.nodeName)&&/^(OL|UL|LI)$/.test(n(t).parent()[0].nodeName)?this._listIndent(n(t).parents("li")[0],t):this.executeCommand("indent",!1);t&&n(t).focus();this._updateIframeSkin(this.model.iframeAttribute)},_onOutdent:function(){var t=this._getWindow().document.getSelection().focusNode;t&&/^(OL|UL|LI)$/.test(t.nodeName)?this._listOutdent(t):t&&/^(#text)$/.test(t.nodeName)&&/^(OL|UL|LI)$/.test(n(t).parent()[0].nodeName)?this._listOutdent(n(t).parents("li")[0],t):this.executeCommand("outdent",!1)},_onSelectAll:function(){this.executeCommand("selectall")},_onHyperLink:function(n){this.executeCommand("createlink",n)},_onInsertLink:function(){var i,r;if(!this._isUrl(n.trim(this._txtURL.val())))return this._txtURL.addClass("e-error"),!1;i=t.buildTag("a","",{},{href:this._txtURL.val(),title:this._txtLinkTitle.val()});i.target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"_self";this._focus();this._isIE()?(this._selectedHTML.length==0&&(this._selectedHTML=this._txtLinkText.val()),i[0].innerHTML=this._selectedHTML,r=i[0].outerHTML):(i.html(this._txtLinkText.val()),r=n("<div>").append(n(i).clone()).html());r&&(this._isIE()?this._pasteHtml(r):this._getDocument().execCommand("inserthtml",!1,r),this._focus());this._linkDialog.ejDialog("close")},_onInsertImage:function(){var i=this._imgDialog.find("#"+this._rteId+"_img_url"),e=this._imgDialog.find("#"+this._rteId+"_img_text"),u=this._imgDialog.find("#"+this._rteId+"_imgX").val(),f=this._imgDialog.find("#"+this._rteId+"_imgY").val(),r=this,o;this._restoreSelection(this._selectionRange);o=n("<img>",{src:i.val(),error:function(){i.addClass("e-error")},load:function(){var n=t.buildTag("img","",{},{alt:e.val(),src:i.val()});r.model.showDimensions&&(u!=""&&n.width(u),f!=""&&n.height(f));r.executeCommand("inserthtml",n[0].outerHTML);r._imgDialog.ejDialog("close")}})},_insertVideo:function(i){var r=n.trim(this._videoDialog.find("textarea.e-rte-video")[0].value),f=this._videoDialog.find("#"+this._rteId+"_videoX").val(),s=this._videoDialog.find("#"+this._rteId+"_videoY").val(),o,e,u;this._restoreSelection(this._selectionRange);u=n(r);i.target.id==="video_insert"&&r!==""?(o=u[0].src,t.isNullOrUndefined(o)||o.indexOf("http:")!=-1||(e=r.indexOf("src=")+5,r=r.substr(0,e)+"http:"+r.substr(e)),u=n(r)[0],this.model.showDimensions&&(f!=""&&(u.width=f),f!=""&&(u.height=s)),this._editVideo&&n(this._editVideo).remove(),this.executeCommand("inserthtml",u.outerHTML),this._onChange(),this._setBackupData(),this._videoDialog.ejDialog("close")):i.target.id==="video_cancel"?this._videoDialog.ejDialog("close"):this._openAlert(this._getLocalizedLabels("videoError"));this._videoDialog.find("textarea.e-rte-video")[0].value="";this._videoDialog.find("#"+this._rteId+"_videoX").val("");this._videoDialog.find("#"+this._rteId+"_videoY").val("");this._chkvideoDimensions.ejCheckBox({check:!0})},_clearAllManager:function(){this._alertWindow.find(".e-alert-cancel").show();this._openAlert(this._getLocalizedLabels("deleteAlert"))},_onUnlink:function(){var n;this.executeCommand("unlink",n)},_onSuperScript:function(){var n;this.executeCommand("SuperScript",n)},_onSubScript:function(){var n;this.executeCommand("SubScript",n)},_onInsertTable:function(n,t,i){var r=this._tableGenerator(n,t,i);this.executeCommand("inserthtml",r)},_onUpperCase:function(){var u;if(this._isIE()){if(this._getWindow().document.selection.type.toLowerCase()=="control")return;u=this._getWindow().document.selection.createRange();this._getDocument().selection.createRange().pasteHTML(this._seleText.toUpperCase())}else{var f=this._getWindow().getSelection(),t=f.getRangeAt(0),i=t.commonAncestorContainer,e=t.commonAncestorContainer.children;if(e!=null){var o=t.extractContents(),s=this._changeCase(o,"Upper"),h=n(s).clone(),r=document.createElement("div");n(r).append(n(h));r.innerHTML!=null&&r.innerHTML!=""&&this._getWindow().document.execCommand("inserthtml",!1,r.innerHTML)}else{var c=i.nodeValue.substring(t.startOffset,t.endOffset).toUpperCase(),l=i.nodeValue.substr(0,t.startOffset),a=i.nodeValue.substring(t.endOffset);i.nodeValue=l+c+a}}},_changeCase:function(n,t){var i=n.childNodes,r;if(i.length>0)for(r=0;r<i.length;r++)i[r].nodeType==3?i[r].nodeValue=t=="Upper"?i[r].nodeValue.toUpperCase():i[r].nodeValue.toLowerCase():i[r].nodeType==1&&i[r].tagName.toUpperCase()!="FONT"&&this.changeCase(i[r],t);return i},_onLowerCase:function(){var u=this._getWindow().getSelection(),t=u.getRangeAt(0),i=t.commonAncestorContainer,f=t.commonAncestorContainer.children;if(f!=null){var e=t.extractContents(),o=this.changeCase(e,"Lower"),s=n(o).clone(),r=document.createElement("div");n(r).append(n(s));r.innerHTML!=null&&r.innerHTML!=""&&this._getWindow().document.execCommand("inserthtml",!1,r.innerHTML)}else{var h=i.nodeValue.substring(t.startOffset,t.endOffset).toLowerCase(),c=i.nodeValue.substr(0,t.startOffset),l=i.nodeValue.substring(t.endOffset);i.nodeValue=c+h+l}},_listIndent:function(n){var i,r;return(i=n.previousSibling,i&&this._isListNode(i))?(i.appendChild(n),!0):i&&i.nodeName=="LI"&&this._isListNode(i.lastChild)?(i.lastChild.appendChild(n),this._combineLists(n.lastChild,i.lastChild,n),!0):(i=n.nextSibling,i&&this._isListNode(i))?(i.insertBefore(n,i.firstChild),!0):i&&i.nodeName=="LI"&&this._isListNode(n.lastChild)?!1:(i=n.previousSibling,i&&i.nodeName=="LI")?(r=t.buildTag(n.parentNode.nodeName)[0],i.appendChild(r),r.appendChild(n),this._combineLists(n.lastChild,r,n),!0):!0},_combineLists:function(t,i,r){var u;if(this._isListNode(t)){while(u=r.lastChild.firstChild)i.appendChild(u);n(t).remove()}},_isListNode:function(n){return n&&/^(OL|UL)$/.test(n.nodeName)},_isFirstChild:function(n){return n.parentNode.firstChild==n},_isLastChild:function(n){return n.parentNode.lastChild==n},_removeEmptyList:function(t){t&&n(t).children().length===0&&n(t).remove()},_listOutdent:function(t){var r=n(t.parentNode),i=r[0].parentNode;return(t=n(t),this._isFirstChild(t[0])&&this._isLastChild(t[0]))?(i.nodeName=="LI"?(t.insertAfter(i),this._removeEmptyList(i),r.remove()):this._isListNode(i)?r.remove():this.executeCommand("outdent",!1),!0):this._isFirstChild(t[0])?(i.nodeName=="LI"?(t.insertAfter(i),t[0].appendChild(r[0]),this._removeEmptyList(i)):this._isListNode(i)?i.insertBefore(t[0],r[0]):this.executeCommand("outdent",!1),!0):this._isLastChild(t[0])?(i.nodeName=="LI"?t.insertAfter(i):this._isListNode(i)?t.insertAfter(r[0]):this.executeCommand("outdent",!1),!0):(this.executeCommand("outdent",!1),!1)},_updateIndent:function(t){this._toolBarObj.enableItemByID(this._rteId+"indent");t&&/^(LI)$/.test(t.nodeName)&&n(t).parents(t.parentNode.nodeName).last().find("li").index(t)===0&&this._toolBarObj.disableItemByID(this._rteId+"indent")},_updateCharCount:function(){if(this.model.showFooter&&this.model.showWordCount){var t=this._getText();this._wordCount.html(this._getLocalizedLabels("characters")+" : "+n.trim(t).length)}},_updateTagInfo:function(t){var u="",i,e=t.tagName.toLowerCase(),f,r;if(this.model.showFooter&&this.model.showHtmlTagInfo&&e!="body"){for(f=n(t).parents(),r=f.length-1;r>=0;r--)i=f[r].tagName.toLowerCase(),i!="body"&&i!="html"&&(u+=" » "+i);u+=" » "+e;this._htmlInfo.html(u)}},_updateValue:function(){this.value(this._getDocument().body.innerHTML)},_setClearFormat:function(){var n=this._rteToolbar.find(".e-active").length},_updateToolbarStatus:function(){var n;if(this.model.showToolbar){for(n=0;n<this._styleItems.length;n++)this._getCommandStatus(this._styleItems[n].toLowerCase())?this._toolBarObj.selectItemByID(this._rteId+this._styleItems[n]):this._toolBarObj.deselectItemByID(this._rteId+this._styleItems[n]);for(n=0;n<this._alignItems.length;n++)this._getCommandStatus(this._alignItems[n].toLowerCase())?this._toolBarObj.selectItemByID(this._rteId+this._alignItems[n]):this._toolBarObj.deselectItemByID(this._rteId+this._alignItems[n]);for(n=0;n<this._scriptsItems.length;n++)this._getCommandStatus(this._scriptsItems[n].toLowerCase())?this._toolBarObj.selectItemByID(this._rteId+this._scriptsItems[n]):this._toolBarObj.deselectItemByID(this._rteId+this._scriptsItems[n]);this._getCommandStatus("InsertOrderedList")?this._toolBarObj.selectItemByID(this._rteId+"orderedList"):this._toolBarObj.deselectItemByID(this._rteId+"orderedList");this._getCommandStatus("InsertUnorderedList")?this._toolBarObj.selectItemByID(this._rteId+"unorderedList"):this._toolBarObj.deselectItemByID(this._rteId+"unorderedList")}},_updateFormat:function(){if(this._formatDDL&&this.model.showToolbar&&!t.isNullOrUndefined(this.model.tools.formatStyle)){var i=n.trim(this._getCommandValue("formatblock").replace("'","").replace("'",""));t.isNullOrUndefined(i)||i==""?this._formatDDL.ejDropDownList({value:this._getLocalizedLabels("format")}):this._formatDDL.ejDropDownList("setSelectedValue",i)}},_updateFontOptionStatus:function(){var i,r;this.model.showFontOption&&this.model.showToolbar&&!t.isNullOrUndefined(this.model.tools.font)&&(i=n.trim(this._getCommandValue("fontname").replace("'","").replace("'","")),t.isNullOrUndefined(i)||i==""&&(i="Segoe UI"),this._fontStyleDDL.ejDropDownList("setSelectedValue",i),r=this._getCommandValue("fontsize"),t.isNullOrUndefined(r)||r==""&&(r=2),this._fontSizeDDL.ejDropDownList("setSelectedValue",r))},_getSelText:function(){var n="",i,r,t;return this._isIE()?n=this._seleText:window.getSelection?(i=this._getWindow().getSelection(),t=document.createRange(),t=i.getRangeAt(0),r=document.createTextNode(t.toString()),n=r.nodeValue):document.getSelection&&(n=this._getWindow().document.getSelection()),n},_isIE:function(){var n=!1,i=t.browserInfo();return i.name=="msie"&&(n=!0),n},_isUrl:function(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(n)},_pasteHtml:function(n){var i,t,r,u,e,f;if(window.getSelection){if(i=this._getWindow().getSelection(),i.getRangeAt&&i.rangeCount){for(t=i.getRangeAt(0),t.deleteContents(),r=document.createElement("div"),r.innerHTML=n,u=this._getDocument().createDocumentFragment();e=r.firstChild;)f=u.appendChild(e);t.insertNode(u);f&&(t=t.cloneRange(),t.setStartAfter(f),t.collapse(!0),i.removeAllRanges(),i.addRange(t))}}else this._getDocument().selection&&this._getDocument().selection.type!="Control"&&this._getDocument().selection.createRange().pasteHTML(n)},_getLocalizedLabels:function(n){return t.RTE.Locale[this.model.locale][n]===i?t.RTE.Locale["en-US"][n]:t.RTE.Locale[this.model.locale][n]},_getSelectedNode:function(){var i,n=this._getRange(),t=n.startContainer,r=n.endContainer,u=n.startOffset,f=n.endOffset;return n?n.setStart?(i=n.commonAncestorContainer,!n.collapsed&&(t==r&&f-u<2&&t.hasChildNodes()&&(i=t.childNodes[u]),t.nodeType===3&&r.nodeType===3&&(t=t.length===u?this._skipEmptyNode(t.nextSibling,!0):t.parentNode,r=f===0?this._skipEmptyNode(r.previousSibling,!1):r.parentNode,t&&t===r)))?t:i&&i.nodeType==3?i.parentNode:i:n.item?n.item(0):n.parentElement():this._getDocument().selection},_skipEmptyNode:function(n,t){for(var i=n;n&&n.nodeType===3&&n.length===0;)n=t?n.nextSibling:n.previousSibling;return n||i},_getSelection:function(){var n;return this._isIE()?(n=this._getDocument().selection.createRange(),n.type=this._getDocument().selection.type):(n=window.getSelection(),n.rangeCount&&(sText=n.getRangeAt(0)),n.type=this._getWindow().getSelection().type),n},_saveSelection:function(){var i=this._getWindow(),r=i.document,n=i.getSelection?i.getSelection():r.selection,t;return n&&(n.createRange?t=n.createRange():n.getRangeAt(0)?t=n.getRangeAt(0):n.anchorNode&&n.focusNode&&r.createRange&&(t=r.createRange(),t.setStart(n.anchorNode,n.anchorOffset),t.setEnd(n.focusNode,n.focusOffset),t.collapsed!==n.isCollapsed&&(t.setStart(n.focusNode,n.focusOffset),t.setEnd(n.anchorNode,n.anchorOffset)))),t},_restoreSelection:function(n){var i=this._getWindow(),r=i.document,t=i.getSelection?i.getSelection():r.selection;t&&n&&(n.select?n.select():t.removeAllRanges&&t.addRange&&(t.removeAllRanges(),t.addRange(n)))},_getRange:function(){if(this._isIE())return t.isNullOrUndefined(this._selectionRange)?this._saveSelection():this._selectionRange;if(this._getWindow().getSelection().rangeCount>0)return this._getWindow().getSelection().getRangeAt(0);var r=document.getElementsByTagName("iframe")[0],n=r.contentWindow,i=n.document.createRange();return i.setStart(n.document.body,0),i.setEnd(n.document.body,0),n.document.body.focus(),i},_setBackupData:function(){var n=this.getHtml(),t=this._backupArray.length;t==this.model.undoStackLimit+1&&this._backupArray.splice(0,1);n!=this._backupArray[t-1]&&this.model.undoStackLimit>0&&this._backupArray.push(n);this._undoRedoPosition=this._backupArray.length-1;this.model.showToolbar&&this._rteToolbar.find("#"+this._rteId+"undo")&&this._backupArray.length>1&&this._toolBarObj.enableItemByID(this._rteId+"undo")},_getSelectedHtmlString:function(){return document.selection?this._getWindow().document.selection.createRange().htmlText:this._seleText},_getText:function(){var n=this._getDocument().body;if(n!=null)return this._isIE()?n.innerText:n.textContent},_validateMaxLength:function(n){if(this.model.maxLength!=null){var t=this.model.maxLength,i=this._getText();t<=i.length&&(n.keyCode<47||n.ctrlKey&&n.keyCode==65||n.ctrlKey&&n.keyCode==67||n.ctrlKey&&n.keyCode==86||n.ctrlKey&&n.keyCode==88||(this._keypressFlag=!1,this._cancelEvent(n)))}},_cancelEvent:function(n){return n.returnValue=!1,n.stopPropagation(),n.preventDefault(),!1},_alignToolUpdate:function(n){for(var t=0;t<this._alignItems.length;t++)this._alignItems[t]===n?this._toolBarObj.selectItemByID(this._rteId+"underline"):this._toolBarObj.deselectItemByID(this._rteId+"underline")},_getCommandStatus:function(n){return this._getDocument().queryCommandState(n)},_getCommandValue:function(n){return this._getDocument().queryCommandValue(n)},_undo:function(){this._undoRedoPosition>0&&(this.setHtml(this._backupArray[this._undoRedoPosition-1]),this._undoRedoPosition--,this._updateToolbarStatus(),this._updateFontOptionStatus(),this._updateFormat(),this._updateCharCount(),this._toolBarObj.enableItemByID(this._rteId+"redo"));this._undoRedoPosition==0&&(this._toolBarObj.disableItemByID(this._rteId+"undo"),this._toolBarObj.enableItemByID(this._rteId+"redo"));this._focus()},_redo:function(){var n;this._undoRedoPosition!=this._backupArray.length&&(this._backupArray[this._undoRedoPosition+1]!=null?(n=this._backupArray[this._undoRedoPosition+1],this.setHtml(n),this._undoRedoPosition++):(n=this._backupArray[this._backupArray.length-2],this.setHtml(n),this._undoRedoPosition=this._backupArray.length-2),this._updateToolbarStatus(),this._updateFontOptionStatus(),this._updateFormat(),this._updateCharCount(),t.isNullOrUndefined(this._toolBarObj)||(this._backupArray.length-1>0&&this._toolBarObj.enableItemByID(this._rteId+"undo"),this._undoRedoPosition==this._backupArray.length-1&&this._toolBarObj.disableItemByID(this._rteId+"redo")));this._focus()},_setContent:function(n){var t=this._getDocument();t.open();t.write(n);t.close();t.EditMode=!0},_tableCellStart:function(){this._tableInsertAt=this._saveSelection()},_tableCellSelect:function(i){var r,e=n(i.target),u=e.parent().index(),f=e.index();this._createTable.find("div.e-rte-tablecell").each(function(){r=n(this);r.index()<=f&&r.parent().index()<=u?r.addClass("e-active"):r.removeClass("e-active")});this._tblheaderDiv.html(f+1+"x"+(u+1)+" Table");n(this._getDocument()).find("table.e-rte-tableremove").remove();t.isNullOrUndefined(this._tableInsertAt)||t.isNullOrUndefined(this._tableInsertAt.startContainer)||(this._restoreSelection(this._tableInsertAt),this._onInsertTable(u+1,f+1,!0))},_tableCellLeave:function(){this._createTable.find("div.e-rte-tablecell").removeClass("e-active");n(this._getDocument()).find("table.e-rte-tableremove").remove();this._tblheaderDiv.html(this._getLocalizedLabels("createTable"))},_tableCellDown:function(i){var u=n(i.target),f=u.parent().index()+1,e=u.index()+1,r;this._focus();n(this._getDocument()).find("table.e-rte-tableremove").remove();t.isNullOrUndefined(this._tableInsertAt)||t.isNullOrUndefined(this._tableInsertAt.startContainer)||(this._restoreSelection(this._tableInsertAt),this._onInsertTable(f,e,!1));r=n(this._getDocument()).find("table.e-rte-table");r.attr("contentEditable",!1);r.find("td").attr("contentEditable",!0);this._createTable.ejDialog("close");this._setBackupData();this._onChange()},_tableGenerator:function(n,i,r,u,f,e,o,s,h,c){var l="e-rte-table";return r&&(l+=" e-rte-tableremove"),u=t.isNullOrUndefined(u)||u==""?"width='100%'":"width="+u+"'",f=t.isNullOrUndefined(f)||f==""?"":"height='"+f+"'",e=t.isNullOrUndefined(e)||e==""?"":"cellspacing='"+e+"'",o=t.isNullOrUndefined(o)||o==""?"":"cellpadding='"+o+"'",h=t.isNullOrUndefined(h)||h==""?"border='1'":"border='"+h+"'",s=t.isNullOrUndefined(s)?"":" align='"+s+"'","<table class='"+l+"' "+u+" "+f+" "+h+" "+e+" "+o+" "+s+">"+(c?"<caption><\/caption>":"")+Array(n+1).join("<tr>"+Array(i+1).join("<td><br _moz_dirty=''/><\/td>")+"<\/tr>")+"<\/table>"},_openCustomTable:function(){this._customTableDialog.ejDialog("open")},_documentClick:function(i){!t.isNullOrUndefined(this._createTable)&&n(i.target).parents("#"+this._rteId+"tables").length<=0&&this._createTable.ejDialog("isOpened")&&this._createTable.ejDialog("close")},_iframeFocus:function(n){!t.isNullOrUndefined(this._createTable)&&this._createTable.ejDialog("isOpened")&&this._createTable.ejDialog("close");t.isNullOrUndefined(this._fontSizeDDL)||this._fontSizeDDL.ejDropDownList("hidePopup");t.isNullOrUndefined(this._fontStyleDDL)||this._fontStyleDDL.ejDropDownList("hidePopup");t.isNullOrUndefined(this._formatDDL)||this._formatDDL.ejDropDownList("hidePopup");t.isNullOrUndefined(this._createTable)||this._createTable.ejDialog("close");t.isNullOrUndefined(this._splitMenu)||this._splitMenu.hide(n);t.isNullOrUndefined(this._bgSplitMenu)||this._bgSplitMenu.hide(n)},_iframeKeyDown:function(n){var t,i;if(this.model.showToolbar&&this.model.allowKeyboardNavigation)if(n&&n.ctrlKey==!0){if(n.keyCode==66)return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"bold"),t.hasClass("e-disable")||(this._onBold(),t.hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+"bold"):this._toolBarObj.selectItemByID(this._rteId+"bold")),!1;if(n.keyCode==73)return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"italic"),t.hasClass("e-disable")||(this._onItalics(),t.hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+"italic"):this._toolBarObj.selectItemByID(this._rteId+"italic")),!1;if(n.keyCode==85)return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"underline"),t.hasClass("e-disable")||(this._onUnderLine(),t.hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+"underline"):this._toolBarObj.selectItemByID(this._rteId+"underline")),!1;if(n.keyCode!=76||n.altKey){if(n.keyCode==82)return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"justifyRight"),t.hasClass("e-disable")||(this._onJustifyRight(),this._alignToolUpdate("justifyRight")),!1;if(n.keyCode!=69||n.altKey)if(n.keyCode!=74||n.altKey)if(n.keyCode!=90||n.altKey){if(n.keyCode==89)return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"rddo"),t.hasClass("e-disable")||this._onRedo(),!1;if(n.keyCode==67)t=this._toolBarItems.find("#"+this._rteId+"copy"),t.hasClass("e-disable")&&(this._keypressFlag=!1,n.preventDefault());else if(n.keyCode==88)t=this._toolBarItems.find("#"+this._rteId+"cut"),t.hasClass("e-disable")&&(this._keypressFlag=!1,n.preventDefault());else if(n.keyCode==86)t=this._toolBarItems.find("#"+this._rteId+"paste"),t.hasClass("e-disable")&&(this._keypressFlag=!1,n.preventDefault());else{if(n.keyCode==77)return n.shiftKey==!0?(n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"outdent"),t.hasClass("e-disable")||(this._onOutdent(),this._indentdepth>0&&this._indentdepth--),!1):(n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"indent"),t.hasClass("e-disable")||(this._onIndent(),this._indentdepth++),!1);if(n.keyCode==75)return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"createLink"),t.hasClass("e-disable")||this._hyperLinkManager(),!1}}else return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"undo"),t.hasClass("e-disable")||this._onUndo(),!1;else return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"justifyFull"),t.hasClass("e-disable")||(this._onJustifyFull(),this._alignToolUpdate("justifyFull")),!1;else return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"justifyCenter"),t.hasClass("e-disable")||(this._onJustifyCenter(),this._alignToolUpdate("justifyCenter")),!1}else return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"justifyLeft"),t.hasClass("e-disable")||(this._onJustifyLeft(),this._alignToolUpdate("justifyLeft")),!1}else if(n.keyCode==127&&(this.getHtml()==this.getSelHtmlString()||this._currentIFrame.get_Text()==this._currentIFrame.getSelText())&&(i=this.ClearAllManager(),!i))return n.preventDefault(),i;this.model.maxLength!=null&&this._validateMaxLength(n);this._trigger("keydown",{keyCode:n.keyCode})},_iframeKeypress:function(n){if(!this._keypressFlag)return n.preventDefault(),this._keypressFlag=!0,!1},_iframeKeyUp:function(n){this._toggleEditTable();this._setBackupData();this._updateToolbarStatus();this._updateFontOptionStatus();this._updateFormat();this._updateCharCount();var t=this._getSelectedNode();this._updateTagInfo(t);this._onChange();this._trigger("keyup",{keyCode:n.keyCode})},_iframeMouseUp:function(){this._toggleEditTable();this._updateToolbarStatus();this._updateFontOptionStatus();this._updateFormat()},_iframeMouseDown:function(n){this._updateTagInfo(n.target);this._updateIndent(n.target)},_iframeFocusOut:function(){this._onChange();this._selectionRange=this._saveSelection();this._seleText=t.isNullOrUndefined(this._getWindow().document.selection)?this._selectionRange.toString():this._getWindow().document.selection.createRange().text},_widthFocusOut:function(){var n=this._customTableDialog.find("#"+this._rteId+"_txtWidth").val();n&&!isNaN(n)||n.slice(-2)=="px"||n.slice(-2)=="em"||n.slice(-2)=="pt"||n.slice(-1)=="%"?this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").ejDropDownList({enabled:!0}):this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").ejDropDownList({enabled:!1})},_wireEvents:function(){var i=n(this._getDocument());t.isNullOrUndefined(this._createTable)||(this._on(this._createTable,"mouseenter","div.e-rte-tablecell",this._tableCellStart),this._on(this._createTable,"mousemove","div.e-rte-tablecell",this._tableCellSelect),this._on(this._createTable,"mouseleave","div.e-rte-table",this._tableCellLeave),this._on(this._createTable,"mousedown","div.e-rte-tablecell",this._tableCellDown),this._on(n(document),"click",this._documentClick));this._on(i,"focus",this._iframeFocus);this._on(i,"keydown",this._iframeKeyDown);this._on(i,"keypress",this._iframeKeypress);this._on(i,"keyup",this._iframeKeyUp);this._on(i,"mouseup",this._iframeMouseUp);this._on(i,"mousedown",this._iframeMouseDown);this._on(i,"focusout",this._iframeFocusOut);t.isNullOrUndefined(this._customTableDialog)||this._on(this._customTableDialog.find("#"+this._rteId+"_txtWidth"),"focusout",this._widthFocusOut)},_unwireEvents:function(){var i=n(this._getDocument());t.isNullOrUndefined(this._createTable)||(this._off(this._createTable.find("div.e-rte-tablecell"),"mousemove"),this._off(this._createTable.find("div.e-rte-table"),"mouseleave"),this._off(this._createTable.find("div.e-rte-tablecell"),"mousedown"),this._off(n(document),"click"));this._off(i,"focus");this._off(i,"keydown");this._off(i,"keyup");this._off(i,"mouseup");this._off(i,"mousedown");this._off(i,"blur");t.isNullOrUndefined(this._customTableDialog)||this._off(this._customTableDialog.find("#"+this._rteId+"_txtWidth"),"focusout")},_onChange:function(){if(_prevhtml=n.trim(this.value()).replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"<\/$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"").replace(/&nbsp;/g," "),_prevhtml!==this.getHtml()){this._updateValue();var t={text:this._getText(),htmlText:this.getHtml()};this._trigger("change",t)}},disableToolbarItem:function(n){t.isNullOrUndefined(n)||this._toolBarObj.disableItemByID(n)},enableToolbarItem:function(n){t.isNullOrUndefined(n)||this._toolBarObj.enableItemByID(n)},removeToolbarItem:function(n){t.isNullOrUndefined(n)||this._toolBarObj.removeItemByID(n)},show:function(){this._rteWapper.show()},hide:function(){this._rteWapper.hide()},getHtml:function(){var t=this._getDocument().body.innerHTML;return n.trim(t).replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"<\/$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"").replace(/&nbsp;/g," ")},setHtml:function(n){this._getDocument().body.innerHTML=n},getText:function(){return this._getText()},executeCommand:function(t,i){if(this._trigger("execute",{commandName:t}))return!1;var r="";if(t=="underline"){if(window.getSelection&&(r=n(this._getWindow().getSelection().anchorNode).parents("a"),r.length>0)){n(r).css("text-decoration",n(r).css("text-decoration")=="none"?"underline":"none");return}}else if(t.toLowerCase()=="inserthtml"){this._isIE()?this._pasteHtml(i):this._getDocument().execCommand(t,!1,i);return}this._getDocument().execCommand(t,!1,i);this._setBackupData()},focus:function(){this._focus()},getCommandStatus:function(n){if(t.isNullOrUndefined(n)||n!="")return this._getCommandStatus(n)},getSelectedHtml:function(){return this._getSelectedHtmlString()},insertRow:function(i,r){var e=t.isNullOrUndefined(r)?this._getSelectedNode():r,u=n(e).closest("tr"),o=u.find("td").length,f=n("<tr>"+Array(o+1).join("<td contentEditable='true'><br _moz_dirty=''/><\/td>")+"<\/tr>");i?f.insertBefore(u):f.insertAfter(u);u.find("td:first").focus()},insertColumn:function(i,r){for(var e=t.isNullOrUndefined(r)?this._getSelectedNode():r,o="<td contentEditable='true'><br _moz_dirty=''/><\/td>",s=n(e).closest("tr"),u,h=s.closest("table").find("tr"),c=s.find("td").index(e),f=0;f<h.length;f++)u=n(h[f]).find("td")[c],i?n(o).insertBefore(u):n(o).insertAfter(u)},removeRow:function(i){var r=t.isNullOrUndefined(i)?this._getSelectedNode():i;curRow=n(r).closest("tr").remove()},removeColumn:function(i){for(var u=t.isNullOrUndefined(i)?this._getSelectedNode():i,f=n(u).closest("tr"),e=f.closest("table").find("tr"),o=f.find("td").index(u),r=0;r<e.length;r++)n(n(e[r]).find("td")[o]).remove()},removeTable:function(i){var r=t.isNullOrUndefined(i)?n(this._getSelectedNode()).closest("table"):i;n(r).remove()}});t.RTE.Locale={};t.RTE.Locale["en-US"]={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Align text center",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",unorderedList:"Insert unordered list",orderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",cut:"Cut",copy:"Copy",paste:"Paste",paragraph:"Paragraph",undo:"Undo",redo:"Redo",upperCase:"Upper Case",lowerCase:"Lower Case",clearAll:"Clear All",clearFormat:"Clear Format",createLink:"Insert/Edit hyperlink",image:"Insert image",video:"Insert video",embedVideo:"Paste your embed code below",viewHtml:"View HTML",fontName:"Select font family",fontSize:"Select font size",fontColor:"Select color",format:"Format",backgrounColor:"Background color",style:"Styles",deleteAlert:"Are you sure you want to clear all the contents?",copyPastAlert:"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.",videoError:"The text area can not be empty",imageWebUrl:"Web Address",imageAltText:"Image description",dimensions:"Dimensions",constrainProportions:"Constrain Proportions",linkWebUrl:"Web Address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",tableColumns:"No.of Columns",tableRows:"No.of Rows",tableWidth:"Table width",tableHeight:"Table height",tableCellSpacing:"Cell spacing",tableCellPadding:"Cell padding",tableBorder:"Border",tableCaption:"Caption",tableAlignment:"Alignment",dialogUpdate:"Update",dialogInsert:"Insert",dialogCancel:"Cancel",dialogOk:"Ok",createTable:"Create table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete the row",deleteColumn:"Delete the column",deleteTable:"Delete the table",customTable:"Create custom table...",characters:"Characters"}})(jQuery,Syncfusion)