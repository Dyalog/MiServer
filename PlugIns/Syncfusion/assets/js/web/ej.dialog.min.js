/*!
*  filename: ej.dialog.min.js
*  version : 12.2.0.36
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t,i){t.widget("ejDialog","ej.Dialog",{_rootCSS:"e-dialog",element:null,model:null,validTags:["div","span"],_setFirst:!1,defaults:{showOnInit:!0,showOnInit:!0,closeOnEscape:!0,closeIconTooltip:"close",allowDraggable:!0,height:"auto",minHeight:0,minWidth:0,maxHeight:null,maxWidth:null,enableModal:!1,position:null,enableResize:!0,showHeader:!0,contentType:null,contentUrl:null,ajaxSettings:{type:"GET",cache:!1,url:"",data:{},dataType:"html",contentType:"html",async:!0},title:"",width:400,zIndex:1e3,cssClass:"",enableRTL:!1,allowKeyboardNavigation:!0,showRoundedCorner:!1,actionButtons:["close"],faviconCSS:null,content:null,enablePersistence:!1,enabled:!0,enableAutoResize:!1,beforeClose:null,close:null,beforeOpen:null,open:null,drag:null,dragStart:null,dragStop:null,resize:null,resizeStart:null,resizeStop:null,contentLoad:null,ajaxSuccess:null,ajaxError:null,create:null,destroy:null},dataTypes:{showOnInit:"boolean",closeOnEscape:"boolean",closeIconTooltip:"string",allowDraggable:"boolean",enableModal:"boolean",enableResize:"boolean",enableAutoResize:"boolean",showHeader:"boolean",title:"string",zIndex:"number",cssClass:"string",contentUrl:"string",contentType:"string",ajaxSettings:"data",actionButtons:"array"},_setModel:function(i){if(!this.model.enabled&&t.isNullOrUndefined(i.enabled))return!1;for(var r in i)switch(r){case"closeIconTooltip":this._ejDialog.find("div.e-dialog-icon").attr("title",i[r]);break;case"title":this._ejDialog.find("span.e-title").html(i[r]);break;case"width":this.model.width=i[r];this._setSize();this._setContainerSize();this._resetScroller();break;case"height":this.model.height=i[r];this._setSize();this._setContainerSize();this._resetScroller();break;case"position":this.model.position=i[r];this._dialogPosition();break;case"cssClass":this._changeSkin(i[r]);break;case"showRoundedCorner ":this._roundedCorner(i[r]);break;case"contentType":this._appendContent(i[r]);break;case"enabled":this.model.enabled=i[r];this._enabledAction(i[r]);break;case"contentUrl":this.model.contentUrl=i[r];this._appendContent(this.model.contentType);break;case"content":this._ejDialog.appendTo(n(i[r]));break;case"minHeight":this._ejDialog.css("minHeight",i[r]);break;case"minWidth":this._ejDialog.css("minWidth",i[r]);break;case"zIndex":this._ejDialog.css("z-index",i[r]);break;case"faviconCSS  ":this._dialogCustom.find("span").removeClass().addClass(i[r]);break;case"enableAutoResize":this.model.enableAutoResize=i[r];this._ejDialog.addClass("e-dialog-resize");this._wireResizing();break;case"allowDraggable":this.model.allowDraggable=i[r];i[r]?this._enableDrag():this._dialogTitlebar.removeClass("e-draggable");break;case"enableResize":this.model.enableResize=i[r];i[r]?this._enableResize():(this._ejDialog.removeClass("e-resizable"),this._ejDialog.find(".e-resize-handle").remove());break;case"showHeader":this.model.showHeader=i[r];i[r]?(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this._enableDrag()):this._ejDialog.find(".e-titlebar").remove();break;case"enableRTL":i[r]?this._ejDialog.addClass("e-rtl"):this._ejDialog.removeClass("e-rtl");break;case"actionButtons":t.isNullOrUndefined(this._dialogTitlebar)||(this._removeAllIcons(),this._iconsRender(i[r]));case"enableModal":this._enableModal(i[r])}},_destroy:function(){this._overLay&&this._overLay.remove();this._cloneElement.appendTo(this._ejDialog.parent());this._ejDialog.remove();this._cloneElement.removeClass("e-dialog");this.element=this._cloneElement;this._isOpen=!1},keyConfigs:[37,38,39,40],_init:function(){this._widthPercent=null;this._heightPercent=null;this._renderControl();this._wireEvents()},_renderControl:function(){this._cloneElement=this.element.clone();this.element.attr("tabindex",0).attr("role","dialog").attr("aria-labelledby",this.element.prop("id")+"_title");this._ejDialog=t.buildTag("div.e-dialog e-widget e-box"+this.model.cssClass+" e-dialog-wrap e-shadow#"+this.element.prop("id")+"_wrapper","",{display:"none",zIndex:this.model.zIndex},{tabidex:0});this.model.enableAutoResize?this._ejDialog.addClass("e-dialog-resize"):"";this.wrapper=this._ejDialog;t.isNullOrUndefined(this.model.content)?this._ejDialog.appendTo(document.body):this._ejDialog.appendTo(n(this.model.content));this.model.enableRTL&&this._ejDialog.addClass("e-rtl");this.model.showHeader&&this._renderTitleBar();this.model.showHeader&&this._iconsRender(this.model.actionButtons);this._appendContent(this.model.contentType);this._enabledAction(this.model.enabled);this._enableDrag();this._setSize();this._sizeInPercent();this.model.showOnInit&&this.model.contentType!="ajax"&&this.open();this._setContainerSize();this._renderScroller();this._roundedCorner(this.model.showRoundedCorner);this.scroller=this.contentDiv.data("ejScroller")},_setContainerSize:function(){this.model.height!="auto"&&(this.contentDiv.height(this._ejDialog.height()-n(this._ejDialog.find("div.e-titlebar")).outerHeight()),this.element.outerHeight(this._ejDialog.height()-n(this._ejDialog.find("div.e-titlebar")).outerHeight()))},_enableDrag:function(){this.model.allowDraggable&&this.model.showHeader&&(this._dialogTitlebar.addClass("e-draggable"),this._dragDialog())},_enableResize:function(){if(this.model.enableResize&&this.model.enabled){this._ejDialog.addClass("e-resizable");var n=t.buildTag("div.e-icon e-resize-handle");n.appendTo(this._ejDialog);this._resizeDialog()}},_changeSkin:function(n){this.model.cssClass!=n&&this._ejDialog.removeClass(this.model.cssClass).addClass(n)},_enableModal:function(n){n?this._isOpen&&this._createOverlay():this._overLay&&this._overLay.remove()},_enabledAction:function(n){n?(this._ejDialog.removeClass("e-disable"),this._enableResize()):(this._ejDialog.addClass("e-disable"),this._ejDialog.removeClass("e-resizable"),this._ejDialog.find(".e-resize-handle").remove())},_renderTitleBar:function(){this._elementTitle=this.element.attr("title");typeof this._elementTitle!="string"&&(this._elementTitle="");this.model.title=this.model.title||this._elementTitle;this._dialogTitlebar=t.buildTag("div#"+this.element.prop("id")+"_title.e-titlebar e-header").prependTo(this._ejDialog);this.model.title&&t.buildTag("span.e-title",this.model.title).prependTo(this._dialogTitlebar)},_iconsRender:function(n){for(var t=0;t<n.length;t++)switch(n[t]){case"close":this._closeIcon();break;case"collapsible":this._collapsibleIcon();break;case"maximize":this._maximizeIcon();break;case"minimize":this._minimizeIcon();break;case"pin":this._pinIcon();break;case"custom":this._customIcon()}},_removeAllIcons:function(){this._dialogTitlebar.find("div.e-dialog-icon").remove()},_appendContent:function(n){var i,r;this.contentDiv=t.isNullOrUndefined(this.contentDiv)?t.buildTag("div.e-dialog-scroller"):this.contentDiv;this.element.removeAttr("title").addClass("e-widget-content");t.isNullOrUndefined(this.model.contentUrl)||t.isNullOrUndefined(n)?this.element.show().appendTo(this.contentDiv):n=="ajax"?(this.model.ajaxSettings.url=this.model.contentUrl,this._sendAjaxOptions(this.element,this.model.ajaxSettings.url)):n=="iframe"?(i=t.buildTag("iframe.e-iframe","",{width:"100%"},{scrolling:"no",frameborder:0,src:this.model.contentUrl}),this.element.append(i).show().appendTo(this.contentDiv),this._trigger("contentLoad",{contentType:n,url:this.model.contentUrl})):n=="image"&&(r=t.buildTag("img.e-images","","",{src:this.model.contentUrl}),this.element.append(r).show().appendTo(this.contentDiv),this._trigger("contentLoad",{contentType:n,url:this.model.contentUrl}));this.contentDiv.appendTo(this._ejDialog)},_roundedCorner:function(n){n?(this._ejDialog.addClass("e-corner-all"),this._dialogTitlebar.addClass("e-corner-top"),this._dialogClose.addClass("e-corner-all")):this._ejDialog.hasClass("e-corner-all")&&(this._ejDialog.removeClass("e-corner-all"),this._dialogTitlebar.removeClass("e-corner-top"),this._dialogClose.removeClass("e-corner-all"))},_reRenderScroller:function(){this.scroller!=i&&this.scroller.refresh()},_renderScroller:function(){var n=this.model.width,t;this.model.height==="auto"||this.model.height==="100%"||(this.model.width==="auto"||this.model.width==="100%"||(n=this.element.outerWidth()),t=this.element.outerHeight(),this.contentDiv.ejScroller({width:n,height:t,enableRTL:this.model.enableRTL}),this.scroller=this.contentDiv.data("ejScroller"),this.contentDiv.width("100%"))},_dialogMaxZindex:function(){var r=this.element.parents(),i,t;return i=n("body").children(),index=i.index(this.popup),i.splice(index,1),n(i).each(function(n,t){r.push(t)}),t=Math.max.apply(t,n.map(r,function(t){if(n(t).css("position")!="static")return parseInt(n(t).css("z-index"))||1})),!t||t<1e4?t=1e4:t+=1,t},_setZindex:function(){var n=this._dialogMaxZindex();this.model.zIndex<=n&&this._ejDialog.css({zIndex:n+1})},_createOverlay:function(){var n=this._ejDialog.css("zIndex");this._overLay=t.buildTag("div#"+this.element.attr("id")+"_overLay.e-overlay","",{zIndex:n-1});this._overLay.appendTo(document.body)},_sendAjaxOptions:function(t,i){t.addClass("e-load");var r=this,u=this.model.title,e=i,f={success:function(n){try{r._ajaxSuccessHandler(n,t,i,u)}catch(f){}},error:function(n){try{r._ajaxErrorHandler(n.statusText,t,i,u)}catch(n){}}};n.extend(!0,f,this.model.ajaxSettings);this._sendAjaxRequest(f)},_sendAjaxRequest:function(t){n.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(n,t,i){t.removeClass("e-load");t.html(n).addClass("e-dialog-loaded").appendTo(this._ejDialog);t.appendTo(this.contentDiv);this._dialogPosition();this.open();this._trigger("ajaxSuccess",{data:n,url:i})},_ajaxErrorHandler:function(n,t,i){t.addClass("e-dialog-loaded");t.appendTo(this.contentDiv);this._dialogPosition();this.open();this._trigger("ajaxError",{data:n,url:i})},_closeIcon:function(){this._dialogClose=t.util.buildTag("div.e-dialog-icon");var n=t.util.buildTag("span.e-icon e-close","",{},{role:"presentation"});n.appendTo(this._dialogClose);this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.closeIconTooltip);this._on(this._dialogClose,"touchstart click",this._closeClick)},_collapsibleIcon:function(){this._dialogCollapsible=t.util.buildTag("div.e-dialog-icon");var n=t.util.buildTag("span.e-icon e-collapse-arrow","",{},{role:"presentation"});n.appendTo(this._dialogCollapsible);this._dialogCollapsible.appendTo(this._dialogTitlebar);this._on(this._dialogCollapsible,"mousedown",this._collapsibleClick)},_maximizeIcon:function(){this._dialogMaximize=t.util.buildTag("div.e-dialog-icon");var n=t.util.buildTag("span.e-icon e-maximize","",{},{role:"presentation"});n.appendTo(this._dialogMaximize);this._dialogMaximize.appendTo(this._dialogTitlebar);this._on(this._dialogMaximize,"mousedown",this._maximizeClick)},_minimizeIcon:function(){this._dialogMinimize=t.util.buildTag("div.e-dialog-icon");var n=t.util.buildTag("span.e-icon e-minimize","",{},{role:"presentation"});n.appendTo(this._dialogMinimize);this._dialogMinimize.appendTo(this._dialogTitlebar);this._on(this._dialogMinimize,"mousedown",this._minimizeClick)},_pinIcon:function(){this._dialogPin=t.util.buildTag("div.e-dialog-icon");var n=t.util.buildTag("span.e-icon e-unpin","",{},{role:"presentation"});n.appendTo(this._dialogPin);this._dialogPin.appendTo(this._dialogTitlebar);this._on(this._dialogPin,"mousedown",this._pinClick)},_customIcon:function(){this._dialogCustom=t.util.buildTag("div.e-dialog-icon");var n=t.util.buildTag("span.e-dialog-custom","",{},{role:"presentation"});n.appendTo(this._dialogCustom);this._dialogCustom.appendTo(this._dialogTitlebar);t.isNullOrUndefined(this.model.faviconCSS)||n.addClass(this.model.faviconCSS)},_setSize:function(){var n=this.model;this._ejDialog.css({width:n.width,minWidth:n.minWidth});this._ejDialog.css({height:n.height,minHeight:n.minHeight})},_resetScroller:function(){var t=parseInt(this.model.height)-n(this._ejDialog.find("div.e-titlebar")).outerHeight();this.contentDiv.ejScroller({width:this.model.width,height:t});this.element.width("auto");this.scroller=this.contentDiv.data("ejScroller");this.scroller.refresh()},_dragDialog:function(){var t=this;this._dialogTitlebar.ejDraggable({handle:".e-titlebar",cursorAt:{top:0,left:0},dragStart:function(n){return t._clickHandler(),!t.dialogPin&&t.model.allowDraggable&&t.model.enabled||(n.cancel=!0),t._trigger("dragStart",{event:n})?(n.cancel=!0,!1):void 0},drag:function(n){t._trigger("drag",{event:n})},dragStop:function(n){t._ejDialog.focus();t._trigger("dragStop",{event:n})},helper:function(){return n(t._ejDialog).addClass("dragClone")}})},_resizeDialog:function(){var t=this,i=!1;this._ejDialog.find("div.e-resize-handle").ejResizable({minHeight:parseInt(t.model.minHeight),minWidth:parseInt(t.model.minWidth),maxHeight:parseInt(t.model.maxHeight),maxWidth:parseInt(t.model.maxWidth),handle:"e-widget-content",resizeStart:function(n){i||t._trigger("resizeStart",{event:n});i=!0},resize:function(i){var r=n(i.element).parents("div.e-dialog-wrap");t.model.height=n(r).height();t.model.width=n(r).width();t._setSize();t._resetScroller();t._trigger("resize",{event:i})},resizeStop:function(n){t._ejDialog.focus();t._sizeInPercent();i&&t._trigger("resizeStop",{event:n});i=!1},helper:function(i){var r=n(i.element).parents("div.e-dialog-wrap");return t.model.height=n(r).height(),t.model.width=n(r).width(),t._setSize(),t._resetScroller(),n(t._ejDialog)}})},_dialogPosition:function(){var i,r,u;this._ejDialog.parents("form").length>0&&t.isNullOrUndefined(this.model.content)&&this._ejDialog.appendTo(this._ejDialog.parents("form"));this.model.position!=null?(this._ejDialog.css("position","absolute"),this._ejDialog.css("left",this.model.position.X+"px"),this._ejDialog.css("top",this.model.position.Y+"px")):(t.isNullOrUndefined(this.model.content)?(i=(n(window).outerWidth()-this._ejDialog.outerWidth())/2,r=(n(window).outerHeight()-this._ejDialog.outerHeight())/2):(u=n(this.model.content).position(),i=(n(this.model.content).outerWidth()-this._ejDialog.width())/2+Math.ceil(u.left),r=(n(this.model.content).outerHeight()-this._ejDialog.height())/2+Math.ceil(u.top)),this._ejDialog.css({top:r,left:i}),this._ejDialog.css("position","absolute"))},_closeClick:function(n){n.stopPropagation();this.close(n)},_collapsibleClick:function(t){n(t.target).hasClass("e-collapse-arrow")?(this._dialogCollapsible.find("span.e-collapse-arrow").removeClass("e-collapse-arrow").addClass("e-expand-arrow"),this._ejDialog.find("div.e-resize-handle").hide(),this._ejDialog.find(".e-widget-content").parent().slideUp("fast"),this._ejDialog.removeClass("e-shadow"),this._ejDialog.css("minHeight","0"),this._ejDialog.height("auto")):n(t.target).hasClass("e-expand-arrow")&&(this._dialogCollapsible.find("span.e-expand-arrow").removeClass("e-expand-arrow").addClass("e-collapse-arrow"),this._ejDialog.addClass("e-shadow"),this._ejDialog.find(".e-widget-content").parent().slideDown("fast"),this._ejDialog.find("div.e-resize-handle").show(),this._ejDialog.height(this.model.height))},_maximizeClick:function(t){var i=n(t.target);i.hasClass("e-maximize")?(this._ejDialog.css("top","0px").css("left","0px").css("position","fixed"),this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"}),i.removeClass("e-maximize").addClass("e-restore"),this._maximize=!0,this.dialogPin=!0):i.hasClass("e-restore")&&(this.element.height(""),this.element.width(""),this._restoreDialog(),i.removeClass("e-restore").addClass("e-maximize"))},_minimizeClick:function(t){var i=n(t.target),r;i.hasClass("e-minimize")&&(this._maximize&&this._setSize(),r=n(window).height()-this._ejDialog.height()+this.element.height()+14,this._ejDialog.css("top","").css("bottom","0").css("left","0").css("position","fixed"),this._ejDialog.css("minHeight","0"),this._ejDialog.css("height",this._ejDialog.height()-this.contentDiv.height()),this.contentDiv.hide(),i.parent().hide(),this._dialogTitlebar.find(".e-maximize").removeClass("e-maximize").addClass("e-restore"),this.dialogPin=!0)},_pinClick:function(t){var i=n(t.target);i.hasClass("e-unpin")?(this.dialogPin=!0,i.removeClass("e-unpin").addClass("e-pin")):i.hasClass("e-pin")&&(this.dialogPin=!1,i.removeClass("e-pin").addClass("e-unpin"))},_restoreDialog:function(){this.dialogPin=!1;this.contentDiv.show();this._ejDialog.css("position","absolute").css("bottom","");this._setSize();this._dialogPosition();this._reRenderScroller();this._dialogTitlebar.find(".e-minimize").parent().show()},_clickHandler:function(){var n=this._dialogMaxZindex();parseInt(this._ejDialog.css("zIndex"))<n&&this._ejDialog.css({zIndex:n+1})},_docKeyDown:function(n){this.model.enabled&&(code=n.keyCode?n.keyCode:n.which?n.which:n.charCode,this.model.closeOnEscape&&code===27&&(this.close(n),n.preventDefault()))},_keyDown:function(t){code=t.keyCode?t.keyCode:t.which?t.which:t.charCode;this.model.allowKeyboardNavigation&&this.model.enabled&&n(t.target).hasClass("e-dialog")&&n.inArray(code,this.keyConfigs)>-1&&this.model.allowDraggable&&!this.dialogPin&&(this._keyPressed(code,t.ctrlKey),t.preventDefault())},_keyPressed:function(n,t){switch(n){case 40:t?this._resetWidthHeight(this.model.width,this._ejDialog.height()+3):this._ejDialog.css("top",this._ejDialog.position().top+3+"px");break;case 39:t?this._resetWidthHeight(this._ejDialog.width()+3,this._ejDialog.height()):this._ejDialog.css("left",this._ejDialog.position().left+3+"px");break;case 38:t?this._resetWidthHeight(this._ejDialog.width()-3,this._ejDialog.height()):this._ejDialog.css("top",this._ejDialog.position().top-3+"px");break;case 37:t?this._ejDialog.width(this._ejDialog.width()-3):this._ejDialog.css("left",this._ejDialog.position().left-3+"px")}},_sizeInPercent:function(){if(!this._enableWindowResize())return!1;var n=this._getParentObj();this._widthPercent=this._convertPixelToPercentage(n.outerWidth(),this._ejDialog.outerWidth());this._heightPercent=this._convertPixelToPercentage(n.outerHeight(),this._ejDialog.outerHeight());this._widthPercent>100&&(this._widthPercent=100,this._ejDialog.outerWidth(n.outerWidth()),this.model.width=this._ejDialog.width());this._heightPercent>100&&(this._heightPercent=100,this._ejDialog.outerHeight(n.outerHeight()),this.model.height=this._ejDialog.height())},_getParentObj:function(){return t.isNullOrUndefined(this.model.content)?this._ejDialog.parent()[0].nodeName=="BODY"?n(window):"":n(this.model.content)},_convertPercentageToPixel:function(n,t){return Math.round(t*n/100)},_convertPixelToPercentage:function(n,t){return Math.round(t/n*100)},_reSizeHandler:function(){var t;this._dialogPosition();t=this._getParentObj();this._ejDialog.outerWidth(this._convertPercentageToPixel(t.outerWidth(),this._widthPercent));this._ejDialog.outerHeight(this._convertPercentageToPixel(t.outerHeight(),this._heightPercent));this.contentDiv.width(this._ejDialog.width());this.element.outerWidth(this.contentDiv.width());this.contentDiv.height(this._ejDialog.height()-n(this._ejDialog.find("div.e-titlebar")).outerHeight());this.element.outerHeight(this._ejDialog.height()-n(this._ejDialog.find("div.e-titlebar")).outerHeight());this.scroller=this.contentDiv.ejScroller({width:this._ejDialog.width(),height:this.element.outerHeight(),rtl:this.model.rtl});this.scroller=this.contentDiv.data("ejScroller");this.scroller.refresh();this._dialogPosition()},_enableWindowResize:function(){return this.model.enableAutoResize||isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&this.model.height!="auto"?!0:!1},_wireResizing:function(){this._enableWindowResize()?n(window).bind("resize",n.proxy(this._reSizeHandler,this)):n(window).unbind("resize",n.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(n(document),"keydown",this._docKeyDown);this._on(this._ejDialog,"keydown",this._keyDown);this._wireResizing()},open:function(){if(!this.model.enabled)return!1;if(this._isOpen)return!0;if(!0==this._trigger("beforeOpen"))return!1;this.element.css("display","block");this._setZindex();this._dialogPosition();var n=this;return this._ejDialog.fadeIn(400,"easeOutQuad",function(){n._trigger("open")}),this.model.enableModal==!0&&this._createOverlay(),this._ejDialog.eq(0).focus(),this._isOpen=!0,this},close:function(n){if(!this._isOpen||!this.model.enabled)return!0;if(!0==this._trigger("beforeClose",{event:n}))return!1;this._isOpen=!1;this.element.css("display","none");var t=this;return this._ejDialog.fadeOut(300,"easeOutQuad",function(){t._trigger("close",{event:n})}),this.model.enableModal&&this._overLay&&this._overLay.remove(),this},isOpened:function(){return this._isOpen}})})(jQuery,Syncfusion)