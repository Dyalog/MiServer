/*!
*  filename: ej.uploadbox.min.js
*  version : 12.4.0.24
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.scroller.min","./../common/ej.draggable.min","./ej.dialog.min"],n):n()})(function(){(function(n,t,i){t.widget("ejUploadbox","ej.Uploadbox",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-uploadbox",defaults:{buttonText:{browse:"Browse",upload:"Upload",cancel:"Cancel"},width:"100px",height:"35px",dialogPosition:{X:"",Y:""},dialogText:{title:"Upload Box",name:"Name",size:"Size",status:"Status"},locale:"en-US",asyncUpload:!0,enabled:!0,multipleFilesSelection:!1,autoUpload:!1,showFileDetails:!0,fileSize:31457280,extensionsAllow:"",extensionsDeny:"",saveUrl:"",removeUrl:"",cssClass:"",enableRTL:!1,create:null,fileSelect:null,begin:null,cancel:null,complete:null,remove:null,error:null,destroy:null},dataTypes:{buttonText:"data",dialogText:"data",disbled:"boolean",multipleFilesSelection:"boolean",autoUpload:"boolean",showFileDetails:"boolean",fileSize:"number",extensionsAllow:"string",extensionsDeny:"string",saveUrl:"string",removeUrl:"string",cssClass:"string",enableRTL:"boolean"},disable:function(){this.element.addClass("e-disable");this.element.find(".e-uploadbtn").addClass("e-disable");this.element.find(".e-uploadclosebtn").addClass("e-disable");this.element.find(".e-file-cancel").addClass("e-disable");this.element.find(".e-dialog-icon").addClass("e-disable");this.diaObj&&(this.diaObj.option("allowDraggable",!1),this.diaObj.option("beforeClose",this._onBeforeClose));this.model.enabled=!1},enable:function(){this.element.hasClass("e-disable")&&(this.element.removeClass("e-disable"),this.model.enabled=!0);this.element.find(".e-uploadbtn.e-disable").removeClass("e-disable");this.element.find(".e-uploadclosebtn.e-disable").removeClass("e-disable");this.element.find(".e-file-cancel.e-disable").removeClass("e-disable");this.element.find(".e-dialog-icon.e-disable").removeClass("e-disable");this.diaObj&&(this.diaObj.option("allowDraggable",!0),this.diaObj.option("beforeClose",this._onBeforeClose))},_init:function(){this.s=t.browserInfo();this._initialize();this._wireEvents();this.model.asyncUpload||this._initObjectsSyncUpload();this._controlStatus(this.model.enabled);this._buttonText(this.model.buttonText)},_setModel:function(n){if(!this.model.enabled&&t.isNullOrUndefined(n.enabled))return!1;for(var i in n)switch(i){case"buttonText":this._buttonText(n[i]);break;case"dialogText":this._dialogText(n[i]);break;case"cssClass ":this._setSkin(n[i]);break;case"enableRTL":this._setRTL(n[i]);break;case"enabled":this._controlStatus(n[i]);break;case"locale":this.model.locale=n[i];this._buttonText(t.Uploadbox.Locale[this.model.locale].buttonText);this._dialogText(t.Uploadbox.Locale[this.model.locale].dialogText);break;case"height":this.model.height=n[i];this._setHeight(this.model.height);break;case"width":this.model.width=n[i];this._setWidth(this.model.width);break;case"dialogPosition":this.model.dialogPosition=n[i];this._dialogPosition()}},_controlStatus:function(n){n!=!0?this.disable():this.enable()},_setRTL:function(n){n?(this.element.addClass("e-rtl"),this.s.name=="msie"&&this.inputupload.css("right","-153px")):(this.element.removeClass("e-rtl"),this.s.name=="msie"&&this.inputupload.css("right","0px"));this.updialog&&this.updialog.ejDialog({enableRTL:n})},_getLocalizedLabels:function(n){var r;return r=n=="browse"||n=="upload"||n=="cancel"?"buttonText":"dialogText",t.Uploadbox.Locale[this.model.locale]===i||t.Uploadbox.Locale[this.model.locale][n]===i?t.Uploadbox.Locale[this.model.locale][r][n]:t.Uploadbox.Locale[this.model.locale][n]},_buttonText:function(t){n.extend(this.model.buttonText,t);this.buttondiv.val(this.model.buttonText.browse);this.element.find(".e-file-upload .e-uploadbtn").html(this.model.buttonText.upload);this.element.find(".e-file-upload .e-uploadclosebtn").html(this.model.buttonText.cancel)},_dialogText:function(t){n.extend(this.model.dialogText,t);this.diaObj==i||this.diaObj.option("title",this.model.dialogText.title);n(".e-head-content .e-head-name").html(this.model.dialogText.name);n(".e-head-content .e-head-size").html(this.model.dialogText.size);n(".e-head-content .e-head-status").html(this.model.dialogText.status)},_destroy:function(){this.element.hasClass("e-uploadbox")&&(this.element.removeClass("e-uploadbox e-widget"),this.element.empty())},_setSkin:function(n){this.element.removeClass(this.model.cssClass);this.element.addClass(n)},_initialize:function(){this.control=this.element[0];this.element.addClass("e-widget "+this.model.cssClass);this.innerdiv=t.buildTag("div.e-selectpart e-select");this.element.append(this.innerdiv);this.buttondiv=t.buildTag("input.e-inputbtn e-btn#"+this.control.id+"_SelectButton","",{},{type:"button","data-role":"none",value:this._getLocalizedLabels("browse")});this.inputupload=t.buildTag("input.e-uploadinput","",{},{type:"file","data-role":"none",name:this.control.id});this.model.multipleFilesSelection&&this.inputupload.attr("multiple","multiple");this.innerdiv.append(this.buttondiv);this.innerdiv.append(this.inputupload);this._Selector=this.buttondiv[0];this._setRTL(this.model.enableRTL);this.Uploadframes=[];this.UploadForms=[];this.UploadType=this._isXhrSupported()?"Xhr":"IFrame";this.model.width!=""&&this._setWidth(this.model.width);this.model.height!=""&&this._setHeight(this.model.height)},_setWidth:function(n){this.element.width(n)},_setHeight:function(n){this.element.height(n)},_dialogPosition:function(){var n,t;return this.model.asyncUpload?(n=this.element.position().left+this.element.find(".e-selectpart").width(),t=this.element.position().top+this.element.find(".e-selectpart").height()):(n=(this.element.offset().left+this.element.width())/3,t=this.element.offset().top),{xpos:this.model.dialogPosition.X!==""?this.model.dialogPosition.X:n,ypos:this.model.dialogPosition.Y!==""?this.model.dialogPosition.Y:t}},_wireEvents:function(){this._on(this.element,"click",this._disableclickselect);this._bindInputChangeEvent()},_disableclickselect:function(n){this.element.hasClass("e-disable")&&n.preventDefault()},_bindInputChangeEvent:function(){this._on(this.inputupload,"change",this._inputValueChange)},_inputValueChange:function(t){var r,i;if(r=n(t.target),this.element.find(".e-uploadbtn").removeAttr("disabled").removeClass("e-disable"),i=this._getInputFileInfo(r),this._trigger("fileSelect",i))return!1;this._isAllowed(i)&&(this.model.asyncUpload?this.UploadType=="Xhr"?this._onXhrSelect(t):this._onSelectIFrame(t):this._onSelectSyncUpload(t))},__uploadButtonClick:function(t){var i=this.element.find(".e-uploadbtn");i.hasClass("e-disable")?t.preventDefault():this.UploadType=="Xhr"?this._xhrOnUploadButtonClick(t):this._onUploadButtonClickIFrame(t);n(t.target).attr("disabled","disabled").addClass("e-disable")},_actionClick:function(t){var r,i,u,f;r=n(t.target);i=r.closest(".e-upload-file");u=n(i).data("file");r.hasClass("e-file-delete")?(this._trigger("remove",{fileStatus:u}),this.UploadType=="Xhr"?this._xhrOnRemove(t,i):this._onRemoveIFrame(t,i)):r.hasClass("e-file-cancel")?(this._trigger("cancel",{fileStatus:u}),f=this.element.find(".e-file-cancel"),f.hasClass("e-disable")?t.preventDefault():this.model.asyncUpload?this.UploadType=="Xhr"?this._xhrOnCancel(t,i):this._onCancelIFrame(t,i):this._onCancelSyncUpload(t,i)):r.hasClass("e-file-retry")&&(this.UploadType=="Xhr"?this._xhrOnRetry(t,i):this._onRetryIFrame(t,i))},_removeFileEntry:function(n){n.remove()},_isFileUpload:function(t){var i=n(t).find("div.e-icon");return i.is(".e-file-cancel")},_isXhrSupported:function(){return this.s.name=="msie"&&parseInt(this.s.version)<9||this.s.name=="safari"&&this.s.name=="chrome"&&this.s.version=="536"?!1:typeof FormData!="undefined"&&typeof File!="undefined"},_getFileName:function(t){return n.map(this._getAllFileInfo(t),function(n){return n.name}).join(", ")},_getFileSize:function(t){var i=this;return n.map(this._getAllFileInfo(t),function(n){return i._formatSize(n.size)}).join(", ")},_pushFile:function(i,r){var s,f,e,u,o,c,h;for(c=n("<div class='e-head-content'><div class='e-file-head e-head-name'>"+this._getLocalizedLabels("name")+"<\/div><div class='e-file-head e-head-size'>"+this._getLocalizedLabels("size")+"<\/div><div class='e-file-head e-head-status'>"+this._getLocalizedLabels("status")+"<\/div><\/div>"),filedialog=this.updialog,filedialog&&filedialog.length!=0?this.model.showFileDetails&&this.diaObj.open():(this.updialog=t.buildTag("div.uploaddialog#"+this.element[0].id+"_dialog","",{},{title:this._getLocalizedLabels("title")}),this.element.append(this.updialog)),s=this.element.find(".e-ul"),s.length==0&&(c.appendTo(this.updialog),s=t.buildTag("ul.e-ul").appendTo(this.updialog),fileListActions=t.buildTag("div.e-file-upload").appendTo(this.updialog),dialogActions=t.buildTag("button.e-uploadclosebtn e-btn e-select",this._getLocalizedLabels("cancel"),{},{type:"button","data-role":"none"}).appendTo(fileListActions),this._on(dialogActions,"click",this._dialogclose)),h=this._dialogPosition(),this.updialog.ejDialog({showOnInit:!1,width:510,cssClass:this.model.cssClass,close:n.proxy(this._uploadFileListDelete,this),position:{X:h.xpos,Y:h.ypos},enableRTL:this.model.enableRTL,content:"#"+this.element[0].id,enableResize:!1}),this.diaObj=this.updialog.data("ejDialog"),this.model.multipleFilesSelection||this.element.find(".e-ul>.e-upload-file").remove(),u=0;u<i.length;u++)f=n("<li class='e-upload-file'><div class='e-file-list'><div class='e-file-progress e-file-view'><div class='e-file-name e-file-view'><span class='e-file-name-txt'>"+i[u].name+"<\/span><\/div><\/div><div class='e-file-size e-file-view'><span class='e-file-name-txt'>"+this._formatSize(i[u].size)+"<\/span><\/div><div class='e-file-percentage e-file-view'><div class='e-file-progress-bar'><div class='e-file-progress-status'><\/div><\/div><\/div><div class='e-action-perform'><div class='e-icon e-file-view'><\/div><\/div><\/div><\/li>").appendTo(s).data(r),(this._getFileSize(i[u]).toString().toLowerCase()=="nankb"||i[u].size==null)&&f.find(".e-file-size").remove(),o="cancel",f.find(".e-icon").remove().addClass(o.toString()),o=="cancel"?e=t.buildTag("div.e-icon e-file-cancel","",{},{title:"cancel"}):o=="remove"?e=t.buildTag("div.e-icon e-file-delete","",{},{title:"remove"}):o=="retry"&&(e=t.buildTag("div.e-icon e-file-retry","",{},{title:"retry"})),f.find(".e-action-perform").append(e),this._on(e,"click",this._actionClick);return this.model.showFileDetails&&this.diaObj.open(),this._buttonText(this.model.buttonText),this._dialogText(this.model.dialogText),f},_pushFileDetails:function(i){var u,o,r,e,f;return o=n("<div class='e-head-content'><div class='e-file-head e-head-name'>"+this._getLocalizedLabels("name")+"<\/div><div class='e-file-head e-head-size'>"+this._getLocalizedLabels("size")+"<\/div><div class='e-file-head e-head-status'>"+this._getLocalizedLabels("status")+"<\/div><\/div>"),u=this,filedialog=this.updialog,filedialog&&filedialog.length!=0?this.model.showFileDetails&&u.diaObj.open():(this.updialog=t.buildTag("div.uploaddialog#"+this.element[0].id+"_dialog","",{},{title:this._getLocalizedLabels("title")}),this.element.append(this.updialog)),r=this.element.find(".e-ul"),r.length==0&&(o.appendTo(this.updialog),r=t.buildTag("ul.e-ul").appendTo(this.updialog),fileListActions=t.buildTag("div.e-file-upload").appendTo(this.updialog),dialogActions=t.buildTag("button.e-uploadclosebtn e-btn e-select",this._getLocalizedLabels("cancel"),{},{type:"button","data-role":"none"}).appendTo(fileListActions),this._on(dialogActions,"click",this._dialogclose)),f=this._dialogPosition(),this.model.multipleFilesSelection||this.element.find(".e-ul>.e-upload-file").remove(),e=n("<li class='e-upload-file'><div class='e-file-list'><div class='e-file-progress e-file-view'><div class='e-file-name e-file-view'><span class='e-file-name-txt'>"+i.name+"<\/span><\/div><\/div><div class='e-file-size e-file-view'><span class='e-file-name-txt'>"+this._formatSize(0)+"\\"+this._formatSize(i.size)+"<\/span><\/div><div class='e-file-percentage e-file-view'><div class='e-file-progress-bar'><div class='e-file-progress-status'><\/div><\/div><\/div><div class='e-action-perform'><div class='e-icon e-file-view'><\/div><\/div><\/div><\/li>").appendTo(r).data("file",i),this.updialog.ejDialog({showOnInit:!1,width:520,height:"auto",cssClass:this.model.cssClass,close:n.proxy(this._uploadFileListDelete,this),position:{X:f.xpos,Y:f.ypos},enableRTL:this.model.enableRTL,content:"#"+this.element[0].id,enableResize:!1}),u.diaObj=this.updialog.data("ejDialog"),this.model.showFileDetails&&u.diaObj.open(),this._buttonText(this.model.buttonText),this._dialogText(this.model.dialogText),e},_setProgress:function(t,i,r){var u,f,e,o;u=n(t).find(".e-file-progress-status");u.width(i+"%");f=n(t).find(".e-file-size .e-file-name-txt");e=this._formatSize(r.loaded);o=this._formatSize(r.total);f.html(e+"\\"+o)},_setAction:function(n,i){var r;n.find(".e-icon").remove().addClass(i.toString());i=="cancel"?r=t.buildTag("div.e-icon e-file-cancel","",{},{title:"cancel"}):i=="remove"?r=t.buildTag("div.e-icon e-file-delete","",{},{title:"remove"}):i=="retry"&&(r=t.buildTag("div.e-icon e-file-retry","",{},{title:"retry"}));n.find(".e-action-perform").append(r);this._on(r,"click",this._actionClick)},_setStatus:function(n,i){var u,r=t.buildTag("div");i=="success"&&(n.find(".file-status").addClass("e-file-status-success").html("Completed"),n.find(".e-file-percentage").html("").attr("title","Completed"),r.addClass("e-icon e-file-percentage-success"),n.find(".e-file-percentage").append(r));i=="failed"&&(n.find(".file-status").addClass("e-file-status-failed").html("Failed"),n.find(".e-file-percentage").html("").attr("title","Failed"),r.addClass("e-icon e-file-percentage-failed"),n.find(".e-file-percentage").append(r));i=="progress"&&n.find(".file-status").addClass("file-status-inprogress").html("in progress");i=="uploading"&&(n.find(".file-status").addClass("file-status-inprogress").html("uploading"),u=n.find(".e-file-percentage"),u.html(""))},_createInputandBind:function(){var n=t.buildTag("input","",{},{type:"file","data-role":"none"});n.attr("name",this.control.id).attr("autocomplete","off").attr("class","e-uploadinput");this.model.multipleFilesSelection&&n.attr("multiple","multiple");n.appendTo(this.element.find(".e-selectpart"));this.inputupload=n;this._bindInputChangeEvent()},_showUploadButton:function(){var n=this.element.find(".e-uploadbtn");n.length==0&&(n=t.buildTag("button.e-uploadbtn e-btn e-select",this._getLocalizedLabels("upload"),{},{type:"button","data-role":"none"}),this.element.find(".e-file-upload").append(n),this._on(n,"click",this.__uploadButtonClick));this._buttonText(this.model.buttonText)},_resetFileInput:function(n){var t=n.clone(!1,!1);this._on(t,"change",this._inputValueChange);n.replaceWith(t)},_isAllowed:function(t){var s,i,u,r,f,h,e,o=this;return s=this.element.find(".e-uploadinput"),i=!1,u=this,this.model.extensionsAllow!=""&&(f=this.model.extensionsAllow.split(","),n(t).each(function(){if(n.inArray(this.extension,f)==-1)return r={action:"Files Processing",error:f+o._getLocalizedLabels("AllowError"),files:t},u._trigger("error",r),i=!0,!1})),this.model.extensionsDeny!=""&&(e=this.model.extensionsDeny.split(","),n(t).each(function(){if(n.inArray(this.extension,e)!=-1)return r={action:"Files Processing",error:e+o._getLocalizedLabels("DenyError"),files:t},u._trigger("error",r),i=!0,!1})),this.model.fileSize!=""&&(h=this.model.fileSize,n(t).each(function(){if(this.size>h)return r={action:"Files Processing",error:o._getLocalizedLabels("filedetail"),files:t},u._trigger("error",r),i=!0,!1})),i&&this._resetFileInput(s),!i},_fileListRemove:function(){fileList=this.element.find(".e-upload-file .e-file-delete");fileList.length==0&&(this.element.find(".e-uploadbtn").attr("disabled","disabled").addClass("e-disable"),this.updialog.ejDialog("close"))},_uploadHide:function(){fileList=this.element.find(".e-upload-file .e-file-cancel");fileList.length==0&&(this.element.find(".e-ul").empty(),this.element.find(".e-uploadbtn").attr("disabled","disabled").addClass("e-disable"),this.updialog.ejDialog("close"))},_onBeforeClose:function(i){t.isNullOrUndefined(i.event)||(i.cancel=n(i.event.currentTarget).hasClass("e-disable")?!0:!1)},_dialogclose:function(t){var f=this.element.find(".e-uploadclosebtn"),r,u,i;u=this.updialog.find(".e-ul").children().first();r=n(u).data("file");f.hasClass("e-disable")?t.preventDefault():(this.updialog.find(".e-ul").empty(),i=this.element.find(".e-uploadinput"),this._resetFileInput(i),this.updialog.ejDialog("close"));this._trigger("cancel",{fileStatus:r})},_uploadFileListDelete:function(){var n;this.updialog.find(".e-ul").empty();n=this.element.find(".e-uploadinput");this._resetFileInput(n)},_onXhrSelect:function(t){var r,u,i,f;r=n(t.target);u=this._getInputFileInfo(r);this._xhrBeforeUpload(u,r);i=this;n.each(u,function(t,r){f=n(r).data("filelist");i._setAction(f,"cancel");i.model.autoUpload?i._xhrPerformUpload(r):i._showUploadButton()})},_xhrBeforeUpload:function(t){var i,r,u,f;return i=t,r=this,n.each(i,function(t,i){u=r._createFormObjectXhr(i);n(i).data("formobject",u);f=r._pushFileDetails(i);n(i).data("filelist",f)}),i},_xhrPerformUpload:function(t){var u,i,f,r;this._trigger("begin");u=this.model.saveUrl;i=this;f=n(t).data("formobject");r=new XMLHttpRequest;n(t).data("xhr",r);r.addEventListener("load",function(n){i._onRequestSuccess(i,n,t)},!1);r.addEventListener("error",function(n){i._onRequestError(i,n,t)},!1);r.upload.addEventListener("progress",function(n){i._onRequestProgress(i,n,t)},!1);r.open("POST",u);r.send(f)},_xhrOnUploadButtonClick:function(){var t,i,r;t=this;n(".e-ul li.e-upload-file",t.control).each(function(){i=n(this);r=t._isFileUpload(i);r&&t._xhrPerformUpload(n(i).data("file"))})},_xhrOnRemove:function(t,i){var r=n(i).find(".e-file-name").text().toString().split(","),u=this;n.ajax({url:this.model.removeUrl,type:"POST",data:"fileNames="+r,success:function(){n(i).remove();u._fileListRemove()}})},_xhrOnCancel:function(t,i){var r,u;r=n(i).data("file");u=n(r).data("xhr");u&&n(r).data("xhr").abort();n(r).data("xhr",null);n(i).data("file",null);n(i).remove();this._uploadHide()},_xhrOnRetry:function(t,i){var r=n(i).data("file");this._xhrPerformUpload(r)},_onRequestSuccess:function(t,i,r){var u=n(r).data("xhr");u.status>=200&&u.status<=299?t._onXhrUploadSuccess(t,i,r):t._onRequestError(t,i,r)},_onXhrUploadSuccess:function(t,i,r){var u,e,o,s,f,h,c;u=n(r).data("filelist");e=n(r).data("xhr");t.model.removeUrl?(t._setAction(u,"remove"),t._setStatus(u,"success")):(u.find(".e-icon").remove(),t._setStatus(u,"success"));n(r).length>0&&(o=n(u).find(".e-file-progress-status"),o.width("100%"),s=n(r)[0].size,f=this._formatSize(s),h=n(u).find(".e-file-size .e-file-name-txt"),h.html(f+"\\"+f));c={files:r,xhr:e,e:i};t._trigger("complete",c)},_onRequestError:function(t,i,r){var f,u,e;f=n(r).data("filelist");u=n(r).data("xhr");t._setAction(f,"retry");t._setStatus(f,"failed");e={action:"File Processing",error:u.status+u.statusText,files:r,xhr:u,e:i};t._trigger("error",e)},_onRequestProgress:function(t,i,r){var f,u;f=Math.round(i.loaded*100/i.total);u=n(r).data("filelist");t._setProgress(u,f,i);t._setStatus(u,"progress")},_createFormObjectXhr:function(n){var t=new FormData;return t.append(this.control.id,n.rawFile),t},_getInputFileInfo:function(n){var t=n[0];return t.files?this._getAllFileInfo(t.files):[{name:this._GetName(t.value),extension:this._getFileExtensionType(t.value),size:this._getFileSizeinIE(t.value)}]},_getFileSizeinIE:function(n){var t,i;t=null;i=null;try{t=new ActiveXObject("Scripting.FileSystemObject")}catch(r){i=null}return t&&(i=t.getFile(n).size),i},_getFileExtensionType:function(n){return n.match?n.match(/\.([^\.]+)$/)[0]||"":""},_getAllFileInfo:function(t){var i=this;return n.map(t,function(n){return i._getFileInfo(n||t)})},_GetName:function(n){var t=n.lastIndexOf("\\");return t!=-1?n.substr(t+1):n},_getFileInfo:function(n){var t=n.name||n.fileName||n;return{name:t,extension:this._getFileExtensionType(t),size:n.size||n.fileSize,rawFile:n}},_formatSize:function(n){var t=-1;do n=n/1024,t++;while(n>99);return Math.max(n,.1).toFixed(1)+["KB","MB","GB","TB","PB","EB"][t]},_onSelectIFrame:function(t){var r,u,i,f;r=n(t.target);u=this._getInputFileInfo(r);i=this._beforeUploadIFrame(u);f=i.data("iframe");this.model.autoUpload?this._performUploadIFrame(i):this._showUploadButton();this._off(this.inputupload,"change");this._bindInputChangeEvent()},_onRemoveIFrame:function(t,i){var r,u,f,e;r=i.data("iframe");e=n(i).data("file");u=e[0].name;f=this;r?(this._removeFileEntry(i),this.model.removeUrl&&n.ajax({url:this.model.removeUrl,type:"POST",data:"fileNames="+u,success:function(){f._fileListRemove()}})):this._removeFileEntry(i)},_onCancelIFrame:function(n,t){var i;this._trigger("cancel",{Status:t});i=t.data("iframe");i&&(this._removeFileEntry(t),typeof i.stop!="undefined"?i.stop():i.document&&(i.document.execCommand("Stop"),i.contentWindow.location.href=i.contentWindow.location.href),this._processServerResponse(i,""));this._uploadHide()},_onRetryIFrame:function(n,t){this._performUploadIFrame(t)},_beforeUploadIFrame:function(n){var t,r,i;return t=this._createFrame(this.control.id+"_Iframe"+this.Uploadframes.length),this.Uploadframes.push(t),r=this._createForm(this.model.saveUrl,t[0].id),this.element.find("input.e-uploadinput").removeClass("e-uploadinput").css("display","none").appendTo(r),this._createInputandBind(),i=this._pushFile(n,{iframe:t,form:r,file:n}),t.data({filelist:i}),this._setAction(i,"cancel"),i},_performUploadIFrame:function(n){var r,t,i;this._trigger("begin");r=n.data("file");this._setStatus(n,"uploading");t=n.data("iframe");i=n.data("form");t.appendTo(document.body);i.appendTo(document.body);this._on(t,"load",this._removeFramesIFrame);i.submit()},_onUploadButtonClickIFrame:function(){var t,i,r;t=this;n(".e-ul li.e-upload-file",t.control).each(function(){i=n(this);r=t._isFileUpload(i);r&&t._performUploadIFrame(i)})},_removeFramesIFrame:function(t){var u,i,r;u=n(t.target);r=u.data("filelist");try{i=u.contents().text()}catch(t){i="Server Error trying to get server response: "+t}i.substring(0,12)!="Server Error"?(this._processServerResponse(u,i),this._setIframeProgress(r,100,t),this._setStatus(r,"progress"),this._successIframeUpload(r,i)):this._failureIframeUpload(r,i)},_setIframeProgress:function(t,i){var r;r=n(t).find(".e-file-progress-status");r.width(i+"%")},_successIframeUpload:function(n,t){fileEntry=n.data("file");this.model.removeUrl?(this._setAction(n,"remove"),this._setStatus(n,"success")):(n.find(".file-action").remove(),this._setStatus(n,"success"));args={files:fileEntry,responseText:t};this._trigger("complete",args)},_failureIframeUpload:function(n,t){fileEntry=n.data("file");this.model.saveUrl?(this._setAction(n,"retry"),this._setStatus(n,"failed")):(n.find(".file-action").remove(),this._setStatus(n,"failed"));args={files:fileEntry,responseText:t};this._trigger("error",args)},_processServerResponse:function(t){var i;i=n(document.body).find("form[target='"+n(t).attr("id")+"']");setTimeout(function(){i.remove();t.remove()},0)},_createDivBlock:function(n){return t.buildTag("div."+n)},_createForm:function(n,i){return t.buildTag("form","",{},{enctype:"multipart/form-data",method:"POST",action:n,target:i})},_createFrame:function(n){return t.buildTag("iframe#"+n,"",{display:"none"},{name:n})},_createInput:function(n){return t.buildTag("input","",{},{type:"file",name:n,"data-role":"none"})},_initObjectsSyncUpload:function(){this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data");this._wireEventsSyncUpload()},_wireEventsSyncUpload:function(){var t=this.element.closest("form")[0];this._on(n(t),"submit",this._formSubmitSyncUpload);this._on(n(t),"reset",this._formResetSyncUpload)},_onSelectSyncUpload:function(t){var i,r,u,f;i=n(t.target);r=this._getInputFileInfo(i);u=n(".e-selectpart",this.control);this.element.find("input.e-uploadinput").removeClass("e-uploadinput").css("display","none").appendTo(u);this._createInputandBind();f=this._pushFile(r,{file:r,Input:i})},_onCancelSyncUpload:function(n,t){var i=t.data("Input");t.data("file",null);t.data("Input",null);t.remove();i.remove();this._uploadHide()},_formSubmitSyncUpload:function(){var t,i;t=n(".e-uploadinput",this.control);t.attr("name","");i=this.control;setTimeout(function(){t.attr("name",i.id)},0)},_formResetSyncUpload:function(){n(".e-selectpart",this.control).children('input[type="file"]').each(function(){this.className==" "&&n(this).remove()});n(".e-ul",this.control).remove()}});t.Uploadbox.Locale={};t.Uploadbox.Locale["en-US"]={buttonText:{upload:"Upload",browse:"Browse",cancel:"Cancel"},dialogText:{title:"Upload Box",name:"Name",size:"Size",status:"Status"},filedetail:"File size is too large.Please select valid file size.",DenyError:"Extension Files not accepted",AllowError:"Extension Only allowed"}})(jQuery,Syncfusion)})