/*!
*  filename: ej.splitter.min.js
*  version : 12.3
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.scroller.min"],n):n()})(function(){(function(n,t,i){t.widget("ejSplitter","ej.Splitter",{element:null,model:null,validTags:["div","span"],_rootCSS:"e-splitter",_setFirst:!1,defaults:{cssClass:"",orientation:"horizontal",enableAnimation:!0,properties:[],height:null,width:null,enableAutoResize:!1,enableRTL:!1,animationSpeed:300,beforeExpandCollapse:null,expandCollapse:null,resize:null,create:null,destroy:null},dataTypes:{cssClass:"string",orientation:"enum",properties:"data",enableAutoResize:"boolean",enableRTL:"boolean",animationSpeed:"number",enableAnimation:"boolean"},_init:function(){this._initialize();this._render();this._wireEvents(this.model.enableAutoResize)},_setModel:function(n){for(var t in n)switch(t){case"cssClass ":this._changeSkin(n[t]);break;case"enableAutoResize":this._windowResizing(n[t]);break;case"enableRTL":this._rtl(n[t]);break;case"orientation":this._setOrientation(n[t]);break;case"enableAnimation":this.model.enableAnimation=n[key]}},refresh:function(){this._setPanesSize();this._getPanesPercent()},collapse:function(n){this._clickArrow(n,!0,!0)},expand:function(n){this._clickArrow(n,!1,!0)},_clickArrow:function(t,i,r){if(this._inMovement||t<0||t>this.panes.length)return!1;var u,e=i?"e-collapse":"e-expand",f=this.element.children(".e-splitbar:not(.e-shadowbar)");if(u=t==f.length?this._clickArrow(t-1,!i,!1):n(f[t]).children("."+e),r)u.css("display")!="none"&&u.mousedown();else return u},addItem:function(i,r,u){var o=this.panes.length,r,f,d,c,b,h,k,nt;if(u=this._getNumber(u),t.isNullOrUndefined(u)&&(u=o),u<0||u>o)return"";r=this._getPaneProperty(r);r=this._checkMinMaxSize(r);f=t.buildTag("div.e-pane e-"+this.model.orientation.substr(0,1)+"-pane");this.element.append(f[this.containerCss](r.paneSize));d=r.paneSize=f[this.containerCss]();f.remove();var l=u,g=o,e,a,v,y,s={},p=0,w=!1;for(c=d+this._bar,a=0;a<2;a++){for(e=l;e<g;e++)if(b=n(this.panes[e])[this.containerCss](),h=b-this.model.properties[e].minSize,h>=c-p){s[e]=b-(c-p);w=!0;break}else h>0&&(s[e]=this.model.properties[e].minSize,p+=h);if(w)break;else g=l,l=0}if(!w)return"";for(k in s)n(this.panes[k])[this.containerCss](s[k]);return u==o?(v="insertBefore",y=1,f.insertAfter(n(this.panes[u-1]))):(v="insertAfter",y=0,f.insertBefore(n(this.panes[u]))),this.model.properties.splice(u,0,r),this.panes.splice(u,0,f),nt=this._createSplitBar(u-y),nt[v](f),f.append(i),this._updateModel(),f},removeItem:function(i){var r=this.panes.length-1,f,u,e,o;if(i=this._getNumber(i),t.isNullOrUndefined(i)&&(i=r),i<0||i>r||r<1)return null;f=n(this.panes[i]);o=f[this.containerCss]()+this._bar;f.remove();e=this.element.children(".e-splitbar:not(.e-shadowbar)");i==r?(u=n(this.panes[i-1]),n(e[i-1]).remove()):(u=n(this.panes[i+1]),n(e[i]).remove());u[this.containerCss](u[this.containerCss]()+o);this._removeArrays(i);this._updateModel()},_checkMinMaxSize:function(n){return n.paneSize<n.minSize&&(n.paneSize=n.minSize),n.paneSize>n.maxSize&&(n.paneSize=n.maxSize),n},_removeArrays:function(n){this.model.properties.splice(n,1);this.panes.splice(n,1);this.oldPaneSize.splice(n,1);this.oldPanePercent.splice(n,1);this._sizePercent.splice(n,1)},_getNumber:function(n){return n=parseFloat(n),isNaN(n)?null:n},_updateModel:function(){for(var t=0;t<this.panes.length;t++)this.model.properties[t].paneSize=n(this.panes[t])[this.containerCss]();this._getPanesPercent()},_getPaneProperty:function(t){return n.extend({paneSize:10,minSize:10,maxSize:null,collapsible:!0,resizable:!0},t)},_changeSkin:function(n){this.element.removeClass(this.model.cssClass).addClass(n)},_windowResizing:function(n){n?this._wireEvents(n):this._unWireEvents()},_setOrientation:function(n){this._unWireEvents();this._destroy();this.model.orientation=n;this._init()},_destroy:function(){this.element.removeClass("e-widget "+this.model.cssClass+" e-"+this.model.orientation);this.element.children(".e-splitbar").remove();this.element.children(".e-pane").removeClass("e-pane e-"+this.model.orientation.substr(0,1)+"-pane").height("").width("")},_initialize:function(){this.panes=[];this.oldPaneSize=[];this.oldPanePercent=[];this.shadowBar=null;this._inMovement=!1;this.containerCss=this.model.orientation=="horizontal"?"width":"height";this.displayCss=this.model.orientation=="horizontal"?"left":"top";this._bar=7},_render:function(){this.element.addClass("e-widget "+this.model.cssClass+" e-"+this.model.orientation).attr("data-role","splitter");for(var i=this.element[0],t=0,r=0;t<i.children.length;t++)n(i.children[t]).addClass("e-pane"),this.panes.push(i.children[t]);this._setPanesProperty();this._insertSplitBar();this._setDimentions();this._setPanesSize();this._getPanesPercent();this._checkProperties();this.element.find(".e-pane").addClass("e-"+this.model.orientation.substr(0,1)+"-pane")},_setPanesProperty:function(){for(var n=0;n<this.panes.length;n++)this.model.properties[n]!=i?(this.model.properties[n].paneSize=this.model.properties[n].paneSize==i?"0px":this.model.properties[n].paneSize,this.model.properties[n].minSize=isNaN(parseFloat(this.model.properties[n].minSize))?10:parseFloat(this.model.properties[n].minSize),this.model.properties[n].maxSize=isNaN(parseFloat(this.model.properties[n].maxSize))?null:parseFloat(this.model.properties[n].maxSize),this.model.properties[n].collapsible=this.model.properties[n].collapsible!=!1?!0:!1,this.model.properties[n].resizable=this.model.properties[n].resizable!=!1?!0:!1):this.model.properties.push({paneSize:"0px",minSize:10,maxSize:null,collapsible:!0,resizable:!0})},_insertSplitBar:function(){if(this.panes.length>1)for(var t,n=0;n<this.panes.length-1;n++)t=this._createSplitBar(n),t.insertAfter(this.panes[n])},_createSplitBar:function(n){var r=this.model.orientation.substr(0,1),u,f,i,e=!1;return i=t.buildTag("span.e-box e-splitbar e-"+r+"-bar").attr("aria-expanded",!0),this.model.properties[n].collapsible&&this.model.properties[n+1].collapsible&&(u=t.buildTag("span.e-icon e-collapse e-"+r+"-arrow "+r+"-backward"),i.append(u),f=t.buildTag("span.e-icon e-expand e-"+r+"-arrow "+r+"-forward"),i.append(f),e=!0,this._on(u,"mousedown",this._collapseArrowClick),this._on(f,"mousedown",this._expandArrowClick)),this.model.properties[n].resizable&&this.model.properties[n+1].resizable&&(i.addClass("e-resize"),e=!0,this._on(i,t.eventType.mouseDown,this._mouseDownOnDivider)),e?(i.attr({role:"separator",tabindex:"0"}),this._on(i,"focus focusout",this._focusOnDivider)):i.attr({role:"presentation"}),i},_getPanesPercent:function(){this._sizePercent=[];for(var r=this.element[this.containerCss](),i=r-(this.panes.length-1)*this._bar,t=0;t<this.panes.length;t++)n(this.panes[t]).hasClass("collapsed")||(this.oldPaneSize[t]=n(this.panes[t])[this.containerCss]()),this.oldPanePercent[t]=this._convertToPercent(i,this.oldPaneSize[t]),this._sizePercent.push(this._convertToPercent(i,n(this.panes[t])[this.containerCss]()))},_setDimentions:function(){this.model.height&&this.element.css("height",this.model.height);this.model.width&&this.element.css("width",this.model.width)},_checkProperties:function(){this.model.enableRTL&&this._rtl(this.model.enableRTL);this._prevSize=this.element[this.containerCss]()},_rtl:function(n){n?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_setPanesSize:function(){var r=this.containerCss,l=0,t=0,f=this.element[r](),p=!1,e=this._bar,v=[],o,i,u=this.panes.length,a,w,s,h,c,y;if(u>1)for(i=0;i<u;i++)n(this.panes[i]).css(r,this.model.properties[i].paneSize),e=i==u-1?0:e,o=Math.round(n(this.panes[i])[r]()),o<=0?(l++,v.push(i),t+=e):p?(n(this.panes[i]).css(r,0),t+=o+e,this.model.properties[i].paneSize=0):(t+=o+e,t>f&&(t-=o-e,a=f-t,w=u-i-1,a-=w*e,n(this.panes[i]).css(r,a),p=!0,t+=a+e),this.model.properties[i].paneSize=o);else u==1&&(n(this.panes[0]).css(r,"100%"),t=f);if(u>1&&t!=f)if(h=n(this.panes[u-1]),t>f)s=t-f,h.css(r,s);else if(t<f)if(s=f-t,l>0)for(y=Math.round(s/l),c=0;c<l;c++)n(this.panes[v[c]]).css(r,y),this.model.properties[v[c]].paneSize=y;else h.css(r,Math.round(h[r]()+s)),this.model.properties[u-1].paneSize=h[r]();u>1&&this._checkPaneSize()},_getUnit:function(n){return n=="px"?"px":n=="pt"?"pt":n.substr(1)=="%"?"%":"px"},_getNormalValue:function(n){var i,t,r,u;return this.model.orientation=="vertical"?(i=n.y-this.element.offset().top,t=i/this.element.outerHeight(),r=this.element.height()):(i=n.x-this.element.offset().left,t=i/this.element.outerWidth(),r=this.element.width()),t>1&&(t=1),t<0&&(t=0),u=t*r,this._trimValue(u)},_trimValue:function(n){var t,i,r;return t=1,i=n%t,r=n-i,Math.abs(i)*2>=t&&(r+=i>0?t:-t),parseFloat(r.toFixed(5))},_getSplitbarIndex:function(){return this.element.children(".e-splitbar:not(.e-shadowbar)").index(this.currentSplitBar)},_paneResize:function(){var t,i,r,u,f,e,o,s;if(this.shadowBar==null)return!1;this.currentSplitBar=this.shadowBar.next();e=this._getSplitbarIndex();i=this.shadowBar.prev();r=this.currentSplitBar.next();u=e;f=e+1;t=this.shadowBar.offset()[this.displayCss];t=t-this.currentSplitBar.offset()[this.displayCss];n(i).css(this.containerCss,t+n(i)[this.containerCss]()+"px");n(r).css(this.containerCss,n(r)[this.containerCss]()-t+"px");this.oldPaneSize[u]=n(i)[this.containerCss]();this.oldPaneSize[f]=n(r)[this.containerCss]();this.shadowBar.remove();this._checkPaneSize();o={item:i,index:u,size:this.oldPaneSize[u]};s={item:r,index:f,size:this.oldPaneSize[f]};this._updateModelValue(o,s);this._trigger("resize",{prevPane:o,nextPane:s,splitbarIndex:e})},_checkPaneSize:function(){for(var r=0,o,f,u=this.panes.length,e,i,t=0;t<u;t++)o=n(this.panes[t])[this.containerCss](),r+=o+this._bar;if(r-=this._bar,f=typeof getComputedStyle=="function"?parseFloat(window.getComputedStyle(this.element[0])[this.containerCss]):this.element[this.containerCss]()-1,r!=f)if(e=f-r,i=n(this.panes[u-1])[this.containerCss](),i==0){for(t=u-1;t>=0;t--)if(n(this.panes[t]).hasClass("expanded")&&!n(this.panes[t]).hasClass("collapsed")){i=n(this.panes[t])[this.containerCss]();n(this.panes[t]).css(this.containerCss,Math.floor(i+e));break}}else n(this.panes[u-1]).css(this.containerCss,Math.floor(i+e))},_maxminDraggableRange:function(n){var l,a,v,y,o,r,u,f,e,t,i,s,h,c;l=this.shadowBar.prev();this.currentSplitBar=this.shadowBar.next();a=this.currentSplitBar.next();v=l[this.containerCss]();y=a[this.containerCss]();o=this.displayCss=="left"?this.currentSplitBar[0].offsetLeft:this.currentSplitBar[0].offsetTop;r=o-v;u=y+o;c=this._getSplitbarIndex();f=c;e=c+1;t=this.model.properties[f].maxSize;i=this.model.properties[e].maxSize;t=t!=null?parseInt(t,10):null;i=i!=null?parseInt(i,10):null;this.model.properties[f].minSize=parseInt(this.model.properties[f].minSize,10);this.model.properties[e].minSize=parseInt(this.model.properties[e].minSize,10);s=this.model.properties[f].minSize;h=this.model.properties[e].minSize;this.shadowBar.removeClass("e-end-indicaton");n>u-h?(this.resizedPosition=u-h,this.shadowBar.addClass("e-end-indicaton")):n<r+s&&(this.resizedPosition=r+s,this.shadowBar.addClass("e-end-indicaton"));t!=null&&n>r+t&&(this.resizedPosition=r+t,this.shadowBar.addClass("e-end-indicaton"));i!=null&&n<u-i&&(this.resizedPosition=u-i,this.shadowBar.addClass("e-end-indicaton"))},_collapseArrowClick:function(t){var f,e,u,i,c,o,s,v,r,w,y,l,a,p,h;if(this.shadowBar==null){if(f=n(t.target),this._inMovement=!0,this.currentSplitBar=f.parent(),r={},w=this.panes.length,e=this._getSplitbarIndex(),u=this.currentSplitBar.prev(),i=this.currentSplitBar.next(),c=e,o=e+1,s=u[this.containerCss](),v=i[this.containerCss](),y=this,l={item:u,index:c,size:s},a={item:i,index:o,size:v},this._raiseEvent("beforeExpandCollapse",l,a,e))return!1;if(i.hasClass("collapsed")){if(s<this.oldPaneSize[o])return f.addClass("e-end-indicaton"),this._inMovement=!1,n(document).bind("mouseup",n.proxy(this._mouseUpOnArrow,this)),!1;u.removeClass("expanded");i.removeClass("collapsed");f.parent().addClass("e-resize");f.siblings().css("display","block");o!=w-1&&(h=i.next(),h.find(".e-collapse").css("display","block"),h.next().hasClass("collapsed")||(h.addClass("e-resize"),h.attr("aria-expanded",!0)));r[this.containerCss]=this.oldPaneSize[o];i.animate(r,this.model.enableAnimation?this.model.animationSpeed:0);r[this.containerCss]=s-this.oldPaneSize[o];u.animate(r,this.model.enableAnimation?this.model.animationSpeed:0,function(){y._raiseEvent("expandCollapse",l,a,e)})}else this.oldPaneSize[c]=s,u.addClass("collapsed"),i.addClass("expanded"),this.currentSplitBar.attr("aria-expanded",!1),f.parent().removeClass("e-resize"),f.css("display","none"),c!=0&&(p=u.prev(),p.find(".e-expand").css("display","none"),p.removeClass("e-resize")),r[this.containerCss]=0,u.animate(r,this.model.enableAnimation?this.model.animationSpeed:0),r[this.containerCss]=s+v,i.animate(r,this.model.enableAnimation?this.model.animationSpeed:0,function(){y._raiseEvent("expandCollapse",l,a,e)})}},_expandArrowClick:function(t){var f,e,i,u,o,h,y,s,r,w,p,c,l,a,v;if(this.shadowBar==null){if(f=n(t.target),this._inMovement=!0,this.currentSplitBar=f.parent(),r={},w=this.panes.length,e=this._getSplitbarIndex(),i=this.currentSplitBar.prev(),u=this.currentSplitBar.next(),o=e,h=e+1,y=i[this.containerCss](),s=u[this.containerCss](),p=this,c={item:u,index:h,size:s},l={item:i,index:o,size:y},this._raiseEvent("beforeExpandCollapse",c,l,e))return!1;if(i.hasClass("collapsed")){if(s<this.oldPaneSize[o])return f.addClass("e-end-indicaton"),this._inMovement=!1,n(document).bind("mouseup",n.proxy(this._mouseUpOnArrow,this)),!1;i.removeClass("collapsed");u.removeClass("expanded");this.currentSplitBar.attr("aria-expanded",!0);f.parent().addClass("e-resize");f.siblings().css("display","block");o!=0&&(v=i.prev(),v.find(".e-expand").css("display","block"),v.prev().hasClass("collapsed")||v.addClass("e-resize"));r[this.containerCss]=this.oldPaneSize[o];i.animate(r,this.model.enableAnimation?this.model.animationSpeed:0);r[this.containerCss]=s-this.oldPaneSize[o];u.animate(r,this.model.enableAnimation?this.model.animationSpeed:0,function(){p._raiseEvent("expandCollapse",c,l,e)})}else this.oldPaneSize[h]=s,i.addClass("expanded"),u.addClass("collapsed"),f.parent().removeClass("e-resize"),f.css("display","none"),h!=w-1&&(a=u.next(),a.find(".e-collapse").css("display","none"),a.removeClass("e-resize"),a.attr("aria-expanded",!1)),r[this.containerCss]=y+s,i.animate(r,this.model.enableAnimation?this.model.animationSpeed:0),r[this.containerCss]=0,u.animate(r,this.model.enableAnimation?this.model.animationSpeed:0,function(){p._raiseEvent("expandCollapse",c,l,e)})}},_raiseEvent:function(n,t,i,r){return n=="expandCollapse"&&(this._inMovement=!1,this._updateModelValue(t,i)),this._trigger(n,{collapsed:t,expanded:i,splitbarIndex:r})},_updateModelValue:function(n,t){this.model.properties[n.index].paneSize=n.item[this.containerCss]();this.model.properties[t.index].paneSize=t.item[this.containerCss]();this._getPanesPercent()},_mouseUpOnArrow:function(){this.element.find(".e-end-indicaton").removeClass("e-end-indicaton");n(document).unbind("mouseup",n.proxy(this._mouseUpOnArrow,this))},_keydownOnDivider:function(t){var i=t.keyCode,u,r;if(i==37||i==38||i==39||i==40){if(t.preventDefault(),u=n(t.data.target),t.ctrlKey)this.shadowBar==null&&(this.currentSplitBar=u,r=this._getSplitbarIndex(),this.model.orientation=="vertical"?t.keyCode==38?this.collapse(r):t.keyCode==40&&this.expand(r):t.keyCode==37?this.collapse(r):t.keyCode==39&&this.expand(r));else if(u.hasClass("e-resize")){var e=this.shadowBar!=null?this.shadowBar:u,f=e.offset(),o={pageX:f.left,pageY:f.top};n.extend(!0,t,o);(this.model.orientation=="vertical"&&(t.keyCode==38||t.keyCode==40)||this.model.orientation=="horizontal"&&(t.keyCode==37||t.keyCode==39))&&(t.keyCode==38?t.pageY-=5:t.keyCode==40?t.pageY+=5:t.keyCode==37?t.pageX-=5:t.keyCode==39&&(t.pageX+=5),this._mouseMoveOnDivider(t))}}else i==13?(t.preventDefault(),this._mouseUpOnDivider()):i==27&&(t.preventDefault(),this.shadowBar!=null&&this.shadowBar.remove(),this.shadowBar=null,this._mouseUpOnDivider(),this.element.children(".e-splitbar.e-hover").focusout())},_focusOnDivider:function(t){t.type=="focus"?n(t.target).hasClass("e-hover")||(n(t.target).addClass("e-hover"),n(document).bind("keydown",{target:t.target},n.proxy(this._keydownOnDivider,this))):(this.element.children(".e-splitbar.e-hover").removeClass("e-hover"),this._mouseUpOnDivider(),n(document).unbind("keydown",n.proxy(this._keydownOnDivider,this)))},_mouseDownOnDivider:function(i){i.preventDefault();var r=n(i.target);r.hasClass("e-splitbar")&&r.hasClass("e-resize")?(r.hasClass("e-hover")||r.focus(),n(document).bind(t.eventType.mouseMove,{target:i.target},n.proxy(this._mouseMoveOnDivider,this)),n(document).bind(t.eventType.mouseUp,n.proxy(this._mouseUpOnDivider,this)),n(document).bind("mouseleave",n.proxy(this._mouseUpOnDivider,this))):(r.hasClass("e-expand")||r.hasClass("e-collapse"))&&r.parent().focus()},_mouseMoveOnDivider:function(t){var r,i;t=t.type=="touchmove"?t.originalEvent.changedTouches[0]:t;r={x:t.pageX,y:t.pageY};this.resizedPosition=this._getNormalValue(r);this.shadowBar==null&&(i=n(t.data.target),this.shadowBar=i.clone().addClass("e-shadowbar").removeClass("e-hover").insertBefore(i),this.shadowBar.children().remove());this._maxminDraggableRange(this.resizedPosition);this.shadowBar.css(this.displayCss,this.resizedPosition)},_mouseUpOnDivider:function(){this._paneResize();n(document).unbind(t.eventType.mouseMove,n.proxy(this._mouseMoveOnDivider,this));n(document).unbind(t.eventType.mouseUp,n.proxy(this._mouseUpOnDivider,this));n(document).unbind("mouseleave",n.proxy(this._mouseUpOnDivider,this));this.shadowBar=null},_windowResized:function(){var i=typeof getComputedStyle=="function"?parseFloat(window.getComputedStyle(this.element[0])[this.containerCss]):this.element[this.containerCss]()-1,r,u,t,f;if(this._prevSize==i)return!1;for(r=this.panes.length,u=i-(r-1)*this._bar,this._prevSize=i,t=0;t<r;t++)f=this._convertToPixel(u,this._sizePercent[t]),n(this.panes[t]).css(this.containerCss,f+"px");for(t=0;t<this.oldPaneSize.length;t++)this.oldPaneSize[t]=this._convertToPixel(u,this.oldPanePercent[t]);this._checkPaneSize()},_convertToPercent:function(n,t){return t*100/n},_convertToPixel:function(n,t){return Math.floor(n*t/100)},_wireEvents:function(t){t&&n(window).bind("resize",n.proxy(this._windowResized,this))},_unWireEvents:function(){n(window).unbind("resize",n.proxy(this._windowResized,this))}})})(jQuery,Syncfusion)})