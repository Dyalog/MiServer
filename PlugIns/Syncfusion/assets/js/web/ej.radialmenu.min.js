/*!
*  filename: ej.radialmenu.min.js
*  version : 13.2.0.29
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.radialmenubase.min"],n):n()})(function(){(function(n,t){t.widget("ejRadialMenu","ej.RadialMenu",{_rootCSS:"e-radialmenu",element:null,model:null,_setFirst:!0,defaults:{imageClass:"e-radialimage",backImageClass:"e-backimage",targetElementId:null,mouseDown:null,mouseUp:null,select:null,autoOpen:!1},dataTypes:{autoOpen:"boolean"},_init:function(){this._id=this.element[0].id;t.browserInfo().name=="msie"&&t.browserInfo().version<9||(this._initialization(),this._prefix="e-",this._renderRadial(),this._wireEvents())},_renderRadial:function(){this._radial=t.buildTag("div.e-radial e-abs "+this.model.imageClass+"").css({left:this._startXY-22+"px",top:this._startXY-22+"px"});this._radialContainer=t.buildTag("div.e-rel").css({height:this._diameter,width:this._diameter});this.element.append(this._radialContainer.append(this._radial)).addClass("e-radialmenu e-overlow e-user-select");this.model.autoOpen?this.show():this.hide();this._renderRadialMenu();var n=this._childArcGroup.children(),i=this._polygonGroup.children();this._on(n,"mouseenter",this._arcOverHandler);this._on(n,"mouseleave",this._arcOverHandler);this._on(i,"mouseenter",this._arcOverHandler);this._on(i,"mouseleave",this._arcOverHandler);this._itemsEvents(this._menuItemsGroup.children(),this._menuItemsPaths.children(),this._menuItemsArcGroup.children())},_wireEvents:function(){this._radialClick=n.proxy(this._radialClickHandler,this);this._targetClick=n.proxy(this._targetClickHandler,this);this._mouseDown=n.proxy(this._mouseDownHandler,this);this._mouseUp=n.proxy(this._mouseUpHandler,this);t.listenEvents([this._radial,this._radialSVGDiv,this._radialSVGDiv,n(document)],[t.endEvent(),t.startEvent(),t.endEvent(),t.endEvent()],[this._radialClick,this._mouseDown,this._mouseUp,this._targetClick],!1)},_itemsEvents:function(n,t,i){this._on(n,"mouseenter",this._itemOverHandler);this._on(n,"mouseleave",this._itemOverHandler);this._on(t,"mouseenter",this._itemOverHandler);this._on(t,"mouseleave",this._itemOverHandler);this._on(i,"mouseenter",this._itemOverHandler);this._on(i,"mouseleave",this._itemOverHandler)},_radialClickHandler:function(){var t=this;this._radial.hasClass("e-backarrow")?(this._radial.removeClass("e-backarrow "+this.model.backImageClass+"").addClass(this.model.imageClass),this.model.enableAnimation?(this._menuChildSVGDiv.removeClass("e-scaleshow").addClass("e-scalehide"),setTimeout(function(){n("#"+t._id+"_menuchildsvgdiv.e-abs").remove()},150),setTimeout(function(){n("#"+t._id+"_childsvgdiv.e-abs").removeClass("e-scalehide e-displaynone").addClass("e-scaleshow")},200)):(this._menuChildSVGDiv.remove(),this._radialChildSVGDiv.removeClass("e-displaynone"))):this._radialCircleSVGDiv.hasClass("e-displaynone")?this.model.enableAnimation?(this._radialCircleSVGDiv.removeClass("e-displaynone e-radialhide").addClass("e-radialshow"),this._radialChildSVGDiv.removeClass("e-displaynone e-radialhide").addClass("e-radialshow")):(this._radialCircleSVGDiv.removeClass("e-displaynone"),this._radialChildSVGDiv.removeClass("e-displaynone")):this.model.enableAnimation?(this._radialCircleSVGDiv.removeClass("e-radialshow").addClass("e-radialhide"),this._radialChildSVGDiv.removeClass("e-radialshow e-scaleshow").addClass("e-radialhide"),setTimeout(function(){n("#"+t._id+"_circlesvgdiv.e-abs").addClass("e-displaynone");n("#"+t._id+"_childsvgdiv.e-abs").addClass("e-displaynone")},160)):(this._radialCircleSVGDiv.addClass("e-displaynone"),this._radialChildSVGDiv.addClass("e-displaynone"));this._childTarget=!1},_mouseDownHandler:function(n){this._eventAction(n);this._event&&this.model.mouseDown&&this._trigger("mouseDown",this._data);this._event=!1},_mouseUpHandler:function(t){var i=n(t.target);(i.attr("class")=="e-active"||t.target.tagName=="polygon")&&(this._index=parseInt(i.attr("index")),this._renderRadialChildMenu(this._index),this._childTarget=!0,this._itemsEvents(this._childItemsGroup.children(),this._childItemsPaths.children(),this._childItemArcGroup.children()));this._eventAction(t);this._event&&this.model.mouseUp&&this._trigger("mouseUp",this._data);this._event&&this.model.select&&this._trigger("select",this._data);this._event=!1},_eventAction:function(t){var i=n(t.target),r,u;i.attr("class")=="e-itembgcolor"||i.attr("class")=="e-default"?(r=i.index(),u=this._childTarget?n(this._childItemsGroup.children()[i.index()]).text():n(this._menuItemsGroup.children()[i.index()]).text(),this._event=!0,this._data=this._childTarget?{index:this._index,childIndex:r,text:u}:{index:r,text:u}):(t.target.tagName=="text"||t.target.tagName=="image")&&(r=i.parent().index(),u=i.parent().text(),this._event=!0,this._data=this._childTarget?{index:this._index,childIndex:r,text:u}:{index:r,text:u})},_radialChildAnimate:function(){var t=this;setTimeout(function(){n("#"+t._id+"_childsvgdiv.e-abs").removeClass("e-scalehide e-scaleshow").addClass("e-displaynone")},150)},_arcOverHandler:function(t){var i=n(t.target),u=parseInt(i.attr("index")),r=n("#childarcgroup path[index="+u+"]");t.type=="mouseenter"?i.attr("class")=="e-childdefault"?i.attr("class","e-active"):r.attr("class","e-active"):i.attr("class")=="e-active"?i.attr("class","e-childdefault"):r.attr("class","e-childdefault")},_itemOverHandler:function(t){var i=n(t.currentTarget).index(),r=this._childTarget?n(this._childItemsArcPaths.children()[i]):n(this._menuItemsArcPaths.children()[i]);t.type=="mouseenter"?r.attr("class","e-childdefault"):r.attr("class","e-arcbgcolor")},_targetClickHandler:function(t){var u=n(t.target),f=t.clientX,e=t.clientY,i,r,o=n("#"+this.model.targetElementId+""),s=n(u.closest(".e-radialmenu")).length,h=n("#"+this._id+"_circlesvgdiv.e-abs").hasClass("e-displaynone"),c,l;this.model.targetElementId?(i=o.width(),r=o.height()):(i=window.innerWidth,r=window.innerHeight);s==0&&n(u.closest(o)).length==0&&this.model.targetElementId?h?this.hide():this.menuHide():n(u.closest("div.e-radial")).length==0&&h?(c=f>i-this.model.radius?i-this._diameter:f>this.model.radius?f-this.model.radius:0,l=e>r-this.model.radius?r-this._diameter:e>this.model.radius?e-this.model.radius:0,this.model.autoOpen?this.show():this.hide(),this.element.css({position:"absolute",top:l+"px",left:c+"px"})):s==0&&this.menuHide()},show:function(){this.element.removeClass("e-displaynone")},hide:function(){this.element.addClass("e-displaynone")},menuHide:function(){var t=this;n("#"+t._id+"_menuchildsvgdiv.e-abs").length!=0?(this._radial.removeClass("e-backarrow "+this.model.backImageClass+"").addClass(this.model.imageClass),this.model.enableAnimation?(this._radialCircleSVGDiv.removeClass("e-radialshow e-radialhide e-scaleshow e-scalehide").addClass("e-displaynone"),this._radialChildSVGDiv.removeClass("e-radialshow e-radialhide e-scaleshow e-scalehide").addClass("e-displaynone"),this._menuChildSVGDiv.removeClass("e-scaleshow").addClass("e-radialhide"),setTimeout(function(){n("#"+t._id+"_menuchildsvgdiv.e-abs").removeClass("e-radialhide").remove()},150)):(this._radialCircleSVGDiv.addClass("e-displaynone"),this._radialChildSVGDiv.addClass("e-displaynone"),this._menuChildSVGDiv.remove())):this.model.enableAnimation?(this._radialCircleSVGDiv.removeClass("e-radialshow").addClass("e-radialhide"),this._radialChildSVGDiv.removeClass("e-radialshow e-scaleshow").addClass("e-radialhide"),setTimeout(function(){n("#"+t._id+"_circlesvgdiv.e-abs").addClass("e-displaynone").removeClass("e-radialshow e-radialhide e-scaleshow e-scalehide");n("#"+t._id+"_childsvgdiv.e-abs").addClass("e-displaynone").removeClass("e-radialshow e-radialhide e-scaleshow e-scalehide")},160)):(this._radialCircleSVGDiv.addClass("e-displaynone"),this._radialChildSVGDiv.addClass("e-displaynone"))}});n.extend(!0,t.RadialMenu.prototype,t.RadialMenuBase.prototype)})(jQuery,Syncfusion)});