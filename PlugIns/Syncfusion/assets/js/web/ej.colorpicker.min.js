/*!
*  filename: ej.colorpicker.min.js
*  version : 12.4.0.24
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.button.min","./ej.slider.min","./ej.splitbutton.min","./ej.menu.min"],n):n()})(function(){(function(n,t){t.widget("ejColorPicker","ej.ColorPicker",{_rootCSS:"e-colorpicker",element:null,model:null,validTags:["input","div"],_setFirst:!1,defaults:{enableOpacity:!0,opacityValue:100,columns:10,palette:"basicpalette",custom:[],presetType:"basic",modelType:"default",showPreview:!0,value:null,displayInline:!1,buttonText:{apply:"Apply",cancel:"Cancel"},tooltipText:{switcher:"Switcher",addbutton:"Add Color",basic:"Basic",monochrome:"Mono Chrome",flatcolors:"Flat Color",seawolf:"Sea Wolf",webcolors:"Web Colors",sandy:"Sandy",pinkshades:"Pink Shades",misty:"Misty",citrus:"Citrus",vintage:"Vintage",moonlight:"Moon Light",candycrush:"Candy Crush",currentcolor:"Current Color",selectedcolor:"Selected Color"},showRecentColors:!1,toolIcon:null,cssClass:"",enabled:!0,change:null,select:null,open:null,close:null,create:null,destroy:null},datetypes:{columns:"number",modelType:"enum",palette:"enum",presetType:"enum",cssClass:"string",opacityValue:"number",displayInline:"boolean",showRecentColors:"boolean",enabled:"boolean",showPreview:"boolean",enableOpacity:"boolean",buttonText:"data",custom:"data"},observables:["value"],value:t.util.valueFunction("value"),_setModel:function(n){if(!this.model.enabled&&t.isNullOrUndefined(n.enabled))return!1;for(var r in n)switch(r){case"enableOpacity":this.model.enableOpacity=n[r];this._previewSlider(this.model.enableOpacity);break;case"opacityValue":if(this.model.enableOpacity){this.model.opacityValue=n[r];this._changeAlpha();this._opacity.option("value",this.model.opacityValue);this._updateValue();break}else return!1;case"custom":this.model.custom=n[r];this._reInitialize();break;case"palette":this.model.palette=n[r];this._reInitialize();break;case"columns":this.model.columns=n[r];this._reInitialize();break;case"presetType":if(this.model.presetType=n[r],t.isNullOrUndefined(i[this.model.presetType]))return!1;this._reInitialize();break;case"value":this.setValue(t.util.getVal(n[r]));break;case"modelType":this.model.modelType=n[r];this.model.modelType=="default"?this._defaultRender():this._reInitialize();break;case"tooltipText":this._toolTipText(n[r]);break;case"showPreview":this.model.showPreview=n[r];this._previewPane(this.model.showPreview);break;case"buttonText":this._buttonText(n[r]);break;case"displayInline":this._setDisplayInline(n[r]);break;case"cssClass":this.model.cssClass=n[r];break;case"enabled":this.model.enabled=n[r];this._enabled(this.model.enabled);break;case"showRecentColors":this.model.showRecentColors=n[r];this._previewColor(this.model.showRecentColors)}},_defaultRender:function(){this._pickerType();this.PaletteWrapper=this._layoutType(this.model.palette);this.PaletteWrapper.addClass("e-hide");this.model.displayInline&&!this.element.is("input")&&this._footer.removeClass("e-hide");this.popupList.prepend(this.PaletteWrapper)},_pickerType:function(){this._modelType="picker";this.PaletteWrapper.removeAttr("style");this.PaletteWrapper.addClass("e-hide");this._gradient.removeClass("e-hide");this._gradient.fadeIn(200);this._presetTag.parents(".e-split.e-widget").addClass("e-hide");this._switcher.removeAttr("class");this._switcher.addClass("e-color-image e-pickerModel");this._switch=!0;this._rgbValue();this._hueGradient();this._updateUI();this._templateWrapper.find("#"+this._id+"hsv").ejButton("enable");this._switchEvents();this._unSwitchEvents();this._hideUnBindEvents();this._showBindEvents();this.model.modelType=="default"?this._changeTag.removeClass("e-hide"):this._changeTag.addClass("e-hide");this.popupList.prepend(this._gradient)},_paletteType:function(){this._gradient.removeAttr("style");this._presetTag.parents(".e-split.e-widget").removeClass("e-hide");this.PaletteWrapper.removeClass("e-hide");this.PaletteWrapper.fadeIn(200);this._templateWrapper.find("#"+this._id+"hsv").ejButton("disable");this._switch=!1;this._disableHSVButton();this._cellSelect();this._switchEvents();this._unSwitchEvents();this.model.modelType=="default"?this._changeTag.removeClass("e-hide"):this._changeTag.addClass("e-hide");this._splitObj.option("prefixIcon","e-color-image e-"+this.model.presetType);this.popupList.prepend(this.PaletteWrapper)},_reInitialize:function(){this._destroyPalette(!1)},_destroyPalette:function(n){(this.model.modelType=="default"||this.model.modelType=="picker"||this.model.modelType=="palette")&&this.PaletteWrapper.remove();n||this._temp!=this.model.columns&&this.model.palette!=="custompalette"?this.PaletteWrapper=this._presetType(this._presetsId):this.model.modelType=="palette"&&(this._modelType="palette",this.PaletteWrapper=this._layoutType(this.model.palette),this._hideUnBindEvents(),this._showBindEvents());this.model.modelType=="picker"?(this._pickerType(),this.model.displayInline&&!this.element.is("input")&&this._footer.addClass("e-hide")):this.model.modelType=="palette"?(this._gradient.addClass("e-hide"),this._paletteType(),n||this.model.palette=="custompalette"?"":this._splitObj.option("prefixIcon","e-color-image e-"+this.model.presetType)):this.model.modelType=="default"&&this._modelType=="palette"&&(this.PaletteWrapper=this._layoutType(this.model.palette),this._gradient.addClass("e-hide"),this._paletteType());this._temp=this.model.columns;this.model.palette=="custompalette"||this.model.modelType=="picker"?this._presetTag.parents(".e-split.e-widget").addClass("e-hide"):this._presetTag.parents(".e-split.e-widget").removeClass("e-hide")},_previewColor:function(n){n?(this._swatchesArea.fadeIn(200),this._bindRecentEvent()):(this._swatchesArea.fadeOut(200),this._unBindRecentEvent())},_buttonText:function(t){n.extend(this.model.buttonText,t);this._buttonTag.html(this.model.buttonText.apply);this._cancelTag.html(this.model.buttonText.cancel)},_toolTipText:function(t){n.extend(this.model.tooltipText,t);this._addTitleText()},_previewPane:function(n){n?this._previewTag.removeClass("e-hide"):this._previewTag.addClass("e-hide")},_previewSlider:function(n){n?this._opacity.enable():this._opacity.disable()},_destroy:function(){this.isPopupOpen&&this.hide();this.popupContainer.remove();this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove(),n("#"+this._id+"_Presets").parent(".e-menu-wrap").remove());this.element.is("input")&&this.element.attr("type","text");this.element.removeClass("e-colorpicker e-input")},_init:function(){this._browser=t.browserInfo();this._isFocused=!1;this.isPopupOpen=!1;this._dataBind=!1;this._modelType="picker";this.model.palette==="basicpalette"?this._presetsId="e-presets30":"";this._renderControl();this.model.palette==="custompalette"?this._presetTag.parents(".e-split.e-widget").addClass("e-hide"):"";this.popupContainer.find("button.e-presets").ejSplitButton({targetID:this._id+"_Presets"});this.value()?(this._setValue(this.value()),this._switch&&this._rgbValue(),this._alphaGradient(this.value())):(this._colorSlider.option("value",parseInt(this._hsv.h)),this._opacity.option("value",this.model.opacityValue));this._hsvValue();this._alphaGradient(this.RGBToHEX(this.rgb));this._hueGradient();this._addTitleText();this._temp=this.model.columns},_renderControl:function(){this._createWrapper();this._renderPopupPanelWrapper();this._renderPopupElement();this._selectedButton=this._groupTag.find(".e-click");this._setDisplayInline(this.model.displayInline);this._previewPane(this.model.showPreview);this._previewColor(this.model.showRecentColors);this._switch&&this._previewSlider(this.model.enableOpacity);this._wireEvents();this._switchEvents()},_createWrapper:function(){this.element.is("input")&&(this.element.addClass("e-input"),this.spanElement=t.buildTag("span.e-selected-color"),this.wrapper=t.buildTag("span.e-colorwidget e-picker e-widget "+this.model.cssClass+"#"+this._id+"Wrapper").attr({tabindex:"0","aria-expanded":!1,"aria-haspopup":!0,"aria-owns":this._id+"_popup"}),this.container=t.buildTag("span.e-in-wrap e-box"),this.drpbtnspan=t.buildTag("span.e-icon e-down-arrow","",{},{"aria-label":"select"}),this.dropdownbutton=t.buildTag("span.e-select#"+this._id+"_dropdown","",{},{role:"button"}).append(this.drpbtnspan),this.iconWrapper=t.buildTag("span.e-tool-icon "+this.model.toolIcon),this.container.insertAfter(this.element),t.isNullOrUndefined(this.model.toolIcon)?this.container.append(this.spanElement):(this.iconWrapper.append(this.spanElement),this.container.addClass("e-tool"),this.container.append(this.iconWrapper)),this.container.append(this.element,this.dropdownbutton),this.wrapper.insertBefore(this.container),this.wrapper.append(this.container),this.element.attr({type:"hidden"}).val(this.value()));this._checkNameAttr()},_addTitleText:function(){this._switcher.attr("title",this.model.tooltipText.switcher);this._spanTag.attr("title",this.model.tooltipText.addbutton);this._presetLi.find("#e-presets00").attr("title",this.model.tooltipText.webcolors);this._presetLi.find("#e-presets01").attr("title",this.model.tooltipText.vintage);this._presetLi.find("#e-presets02").attr("title",this.model.tooltipText.seawolf);this._presetLi.find("#e-presets10").attr("title",this.model.tooltipText.sandy);this._presetLi.find("#e-presets11").attr("title",this.model.tooltipText.pinkshades);this._presetLi.find("#e-presets12").attr("title",this.model.tooltipText.moonlight);this._presetLi.find("#e-presets20").attr("title",this.model.tooltipText.monochrome);this._presetLi.find("#e-presets21").attr("title",this.model.tooltipText.misty);this._presetLi.find("#e-presets22").attr("title",this.model.tooltipText.flatcolors);this._presetLi.find("#e-presets30").attr("title",this.model.tooltipText.basic);this._presetLi.find("#e-presets31").attr("title",this.model.tooltipText.candycrush);this._presetLi.find("#e-presets32").attr("title",this.model.tooltipText.citrus);this._currentTag.attr("title",this.model.tooltipText.currentcolor);this._previousTag.attr("title",this.model.tooltipText.selectedcolor)},_renderPopupPanelWrapper:function(){var r,i,u;for(this.popupContainer=t.buildTag("div.e-colorpicker e-box e-popup e-widget "+this.model.cssClass+"#"+this._id+"_popup","",{role:"grid","aria-readonly":"true",tabIndex:0,style:"visibility:hidden"}),n("body").append(this.popupContainer),this.popupList=t.buildTag("div.e-popupWrapper"),this._gradient=t.buildTag("div.e-container"),this._colorArea=t.buildTag("div.e-hsv-color"),this._gradientArea=t.buildTag("div.e-hsv-gradient"),this._handleArea=t.buildTag("div.e-draghandle e-color-image").attr({tabindex:"0"}),this._colorArea.append(this._gradientArea,this._handleArea),this._picker=t.buildTag("div.e-gradient"),this._hueSlider=t.buildTag("div.e-widget e-hue e-state-default#"+this._id+"hue"),this._alphaSlider=t.buildTag("div.e-widget e-opacity e-state-default#"+this._id+"alpha"),this._picker.append(this._hueSlider,this._alphaSlider),this._gradient.append(this._colorArea,this._picker),this.popupList.append(this._gradient),this._footerBlock=t.buildTag("div.e-footerContainer"),this._templateWrapper=t.buildTag("div.e-buttons"),this._groupTag=t.buildTag("div.e-groupButton"),this._formEle=t.buildTag("div.e-form"),this._rgb=t.buildTag("button.e-rgbButton e-click#"+this._id+"rgba","",{},{type:"button"}),this._hexCode=t.buildTag("button.e-hexButton#"+this._id+"hex","",{},{type:"button"}),this._hsva=t.buildTag("button.e-hsvButton#"+this._id+"hsv","",{},{type:"button"}),this._groupTag.append(this._rgb,this._hexCode,this._hsva),this._codeEditor=t.buildTag("div.e-codeeditor"),this._inputTag=t.buildTag("input.e-color-code","",{},{type:"text",tabindex:"0",maxLength:"22"}),this._codeEditor.append(this._inputTag),this._formEle.append(this._groupTag,this._codeEditor),this._previewTag=t.buildTag("div.e-preview").attr({tabindex:"0"}),this._currentTag=t.buildTag("div.e-current").attr({tabindex:"0"}),this._previousTag=t.buildTag("div.e-previous").attr({tabindex:"0"}),this._previewTag.append(this._currentTag,this._previousTag),this._templateWrapper.append(this._formEle,this._previewTag),this._swatchesArea=t.buildTag("div.e-color-labels"),r=11,this._divTag=t.buildTag("div.e-recent-color"),this._addTag=t.buildTag("div.e-colorblock e-block"),this._spanTag=t.buildTag("div.e-color e-color-image e-add"),this._addTag.append(this._spanTag),this._divTag.append(this._addTag),i=0;i<r;i++)this._liTag=t.buildTag("div.e-colorblock e-block"),u=t.buildTag("div.e-color e-color-image e-empty"),this._liTag.append(u),this._divTag.prepend(this._liTag);this._swatchesArea.append(this._divTag);this._footer=t.buildTag("div.e-footer");this._swatches=t.buildTag("div.e-element");this._changeTag=t.buildTag("div.e-switcher");this._switcher=t.buildTag("div.e-color-image");this._presetTag=t.buildTag("button.e-presets#"+this._id+"-split");this._presets=t.buildTag("div");this._buttonTag=t.buildTag("button.e-applyButton","",{},{type:"button"});this._cancelTag=t.buildTag("button.e-cancelButton","",{},{type:"button"});this._changeTag.append(this._switcher);this._presetTag.append(this._presets);this._swatches.append(this._changeTag,this._presetTag);this._footer.append(this._swatches,this._buttonTag,this._cancelTag);this._footerBlock.append(this._templateWrapper,this._swatchesArea,this._footer);this.PaletteWrapper=this._layoutType(this.model.palette);this.popupList.append(this.PaletteWrapper,this._footerBlock);this._presetContainer=t.buildTag("ul.e-presetWrapper#"+this._id+"_Presets","",{},{style:"top:87px"});this._presetLi=t.buildTag("li.e-item");this._presetLi.append(this._renderPresets());this._presetContainer.append(this._presetLi);this.popupList.append(this._presetContainer);this.popupContainer.append(this.popupList);(this._browser.name="msie"&&(this._browser.version=="9.0"||this._browser.version=="8.0"))?this._hueSlider.addClass("e-color-image e-filter"):this._hueSlider.addClass("e-common")},_colorPresetsClick:function(n){this._presetsId=n.currentTarget.id;this._presetsId==="e-presets00"?this.model.presetType="webcolors":this._presetsId==="e-presets01"?this.model.presetType="vintage":this._presetsId==="e-presets02"?this.model.presetType="seawolf":this._presetsId==="e-presets10"?this.model.presetType="sandy":this._presetsId==="e-presets11"?this.model.presetType="pinkshades":this._presetsId==="e-presets12"?this.model.presetType="moonlight":this._presetsId==="e-presets20"?this.model.presetType="monochrome":this._presetsId==="e-presets21"?this.model.presetType="misty":this._presetsId==="e-presets22"?this.model.presetType="flatcolors":this._presetsId==="e-presets30"?this.model.presetType="basic":this._presetsId==="e-presets31"?this.model.presetType="candycrush":this._presetsId==="e-presets32"&&(this.model.presetType="citrus");this._splitObj.option("prefixIcon","e-color-image e-"+this.model.presetType);this._destroyPalette(!0,!1)},_renderPresets:function(){var r=t.buildTag("div.e-presets-table"),f=t.buildTag("span.e-presetHeader"),e,u,n,i;for(f.html("Swatches"),r.append(f),e=0,n=0;n<4;n++){for(u=t.buildTag("ul.e-tablerow"),i=0;i<3;i++)tableCell=t.buildTag("li.e-color-image e-preset-row#e-presets"+[n]+[i]),tableCell.appendTo(u);u.appendTo(r)}return r},_renderPopupElement:function(){var t=this;this._hsv={h:360,s:100,v:100};this._templateWrapper.find("#"+this._id+"rgba").ejButton({text:"RGBA",type:"button"});this._templateWrapper.find("#"+this._id+"hex").ejButton({text:"HEX",type:"button"});this._templateWrapper.find("#"+this._id+"hsv").ejButton({text:"HSVA",type:"button"});this._applyObj=this.popupContainer.find("button.e-applyButton").ejButton({text:this.model.buttonText.apply,type:"button"}).data("ejButton");this._cancelObj=this.popupContainer.find("button.e-cancelButton").ejButton({text:this.model.buttonText.cancel,type:"button"}).data("ejButton");this._splitObj=this.popupContainer.find("#"+this._id+"-split").ejSplitButton({size:"normal",showRoundedCorner:!0,contentType:"imageonly"}).data("ejSplitButton");this._presetTag.parents(".e-split.e-widget").css({height:"27px"});this.model.custom.length==0?this._splitObj.option("prefixIcon","e-color-image e-"+this.model.presetType):"";this._splitObj._getXYpos=function(t){return n("#"+this.model.targetID).ejMenu({animationType:"none"}),n("#"+this.model.targetID).ejMenu("hide",t),btnpos=this.dropbutton.offset(),btnposx=btnpos.left-this.dropbutton.prev().outerWidth()-1,btnposy=btnpos.top-n("#"+this.model.targetID).outerHeight()-1,{x:btnposx,y:btnposy}};this._colorSlider=this.popupContainer.find("#"+this._id+"hue").ejSlider({orientation:"Vertical",minValue:0,maxValue:360,change:function(n){t._changeHue(n)},slide:function(n){t._changeHue(n)}}).data("ejSlider");this._opacity=this.popupContainer.find("#"+this._id+"alpha").ejSlider({value:this.model.opacityValue,orientation:"Vertical",incrementStep:5,value:100,change:function(n){t._changeAlpha(n)},slide:function(n){t._changeAlpha(n)}}).data("ejSlider");this._colorSlider.firstHandle.css({height:"13px",margin:"0px 0px -12px -2px",width:"13px"});this._opacity.firstHandle.css({height:"13px",margin:"0px 0px -12px -2px",width:"13px"});this.popupContainer.css({visibility:"visible",display:"none"});this.model.modelType=="picker"?(this._modelType="picker",this._gradient.removeClass("e-hide"),this._changeTag.addClass("e-hide"),this.PaletteWrapper.addClass("e-hide"),this._presetTag.parents(".e-split.e-widget").addClass("e-hide"),this._switch=!0):this.model.modelType=="palette"?(this._modelType="palette",this._changeTag.addClass("e-hide"),this._presetTag.parents(".e-split.e-widget").removeClass("e-hide"),this.PaletteWrapper.removeClass("e-hide"),this._gradient.addClass("e-hide"),this._templateWrapper.find("#"+this._id+"hsv").ejButton("disable"),this._switch=!1):this.model.modelType=="default"&&(this._modelType="picker",this._gradient.removeClass("e-hide"),this._switcher.addClass("e-pickerModel"),this.PaletteWrapper.addClass("e-hide"),this._presetTag.parents(".e-split.e-widget").addClass("e-hide"),this._switch=!0)},_layoutType:function(n){return typeof n=="string"&&n=="basicpalette"?this._collection=this._paletteGenerate(i[this.model.presetType],this.model.columns):typeof n=="string"&&n=="custompalette"&&this.model.modelType=="palette"&&(this._collection=this._paletteGenerate(this.model.custom,this.model.columns)),n=="custompalette"?this._collection.addClass("e-custom"):"",this._collection},_presetType:function(n){return n==="e-presets00"?this._collection=this._paletteGenerate(i.webcolors,this.model.columns):n==="e-presets01"?this._collection=this._paletteGenerate(i.vintage,this.model.columns):n==="e-presets02"?this._collection=this._paletteGenerate(i.seawolf,this.model.columns):n==="e-presets10"?this._collection=this._paletteGenerate(i.sandy,this.model.columns):n==="e-presets11"?this._collection=this._paletteGenerate(i.pinkshades,this.model.columns):n==="e-presets12"?this._collection=this._paletteGenerate(i.moonlight,this.model.columns):n==="e-presets20"?this._collection=this._paletteGenerate(i.monochrome,this.model.columns):n==="e-presets21"?this._collection=this._paletteGenerate(i.misty,this.model.columns):n==="e-presets22"?this._collection=this._paletteGenerate(i.flatcolors,this.model.columns):n==="e-presets30"?this._collection=this._paletteGenerate(i.basic,this.model.columns):n==="e-presets31"?this._collection=this._paletteGenerate(i.candycrush,this.model.columns):n==="e-presets32"&&(this._collection=this._paletteGenerate(i.citrus,this.model.columns)),this._collection},_paletteGenerate:function(i,r){var u;for(this._PresetTable=t.buildTag("div.e-palette-color").attr({role:"presentation"}),this._tag=t.buildTag("div.e-row"),u=0;u<i.length;u++)u&&u%r==0&&(this._tag=t.buildTag("div.e-row")),this._td=t.buildTag("div.e-item").attr({role:"gridcell","aria-label":"#"+n.trim(i[u]),value:"#"+n.trim(i[u]),style:"background-color:#"+n.trim(i[u]),tabindex:"0"}),this._tag.append(this._td),this._PresetTable.append(this._tag);return this._PresetTable},_checkNameAttr:function(){this.element.attr("name")||this.element.attr({name:this.element[0].id})},_enabled:function(n){n?this.enable():this.disable()},_setDisplayInline:function(t){this.model.displayInline=t;t&&this.element.is("input")?(this.popupContainer.insertAfter(this.wrapper),this._setPopupPosition()):t?(this.element.append(this.popupContainer),this.popupContainer.find("button.e-applyButton").css({display:"none"}),this.popupContainer.find("button.e-cancelButton").css({display:"none"}),this._footer.css({display:"none"})):(this.popupContainer.css("display","none"),n("body").append(this.popupContainer),this._isOpen=!1,this._bindIconClick(),this._isFocused=!1,this.isPopupOpen=!1,this.wrapper.removeClass("e-focus"));t&&(this.show(),this.element.is("input")&&this._off(n(this.dropdownbutton),"mousedown",this._iconClick))},_bindIconClick:function(){var i=n._data(n(this.dropdownbutton)[0],"events");t.isNullOrUndefined(i)?this._on(this.dropdownbutton,"mousedown",this._iconClick):i.mousedown.length==0?this._on(this.dropdownbutton,"mousedown",this._iconClick):""},_unBindIconClick:function(){this._off(this.dropdownbutton,"mousedown",this._iconClick)},_setPopupPosition:function(){var n=this.wrapper,t=n.offset(),r=t.left,i=n.outerHeight(),u=(i-n.height())/2,f=this._getZindexPartial();this.popupContainer.css({left:r+3+"px",position:"absolute",top:t.top+i-u+3+"px","z-index":f})},_getZindexPartial:function(){var r=this.element.parents(),i,t;return i=n("body").children(),index=i.index(this.popupList),i.splice(index,1),n(i).each(function(n,t){r.push(t)}),t=Math.max.apply(t,n.map(r,function(t){if(n(t).css("position")!="static")return parseInt(n(t).css("z-index"))||1})),!t||t<1e4?t=1e4:t+=1,t},_setValue:function(n){var t;this.value(n);n&&(t=this._HexToHSV(n),this._oldValue=this.rgb,this._switch&&(this._valueOperation(),this._colorSlider.option("value",parseInt(this._hsv.h))),this._inputTagValue(this._selectedButton),this.element.is("input")&&this._updateValue(),this._switch||(this._updateUI(),this.element.val(this.value())))},setValue:function(n){this._setValue(n);this._hueGradient();this._trigger("change",{value:this.value()})},enable:function(){if(this.wrapper.hasClass("e-disable")){this.wrapper.removeClass("e-disable");this.container.hasClass("e-disable")&&this.container.removeClass("e-disable");this.popupList.removeClass("e-disable");this.dropdownbutton.removeClass("e-disable");var t=this._switch;this._switch=!0;this._cancelObj.enable();this._colorSlider.enable();this._opacity.enable();this._splitObj.enable();this._applyObj.enable();this._wireEvents();this._switchEvents();this._switch=t;n(this._inputTag).removeAttr("readonly");this._on(this.dropdownbutton,"mousedown",this._iconClick);this._switcher.hasClass("e-paletteModel")?(this._on(n(document),"keydown",this._keyDown),this._on(this._collection,"mousedown",this._onSelect)):this._on(n(document),"keydown",this._onKeyDown)}},disable:function(){if(!this.wrapper.hasClass("e-disable")){this.wrapper.addClass("e-disable");this.container.hasClass("e-disable")||this.container.addClass("e-disable");this.popupList.addClass("e-disable");this.dropdownbutton.addClass("e-disable");var t=this._switch;this._switch=!1;this._cancelObj.disable();this._colorSlider.disable();this._opacity.disable();this._splitObj.disable();this._applyObj.disable();this._unWireEvents();this._unSwitchEvents();this._switch=t;this._unBindIconClick();n(this._inputTag).attr("readonly","readonly");this._switcher.hasClass("e-paletteModel")?(this._off(n(document),"keydown",this._keyDown),this._off(this._collection,"mousedown",this._onSelect)):this._off(n(document),"keydown",this._onKeyDown)}this.isPopupOpen&&!this.model.displayInline&&this.hide()},getColor:function(){return this.rgb},getValue:function(){return this.value()},_alphaGradient:function(n){var i=t.browserInfo(),n=t.isNullOrUndefined(n)?"#000000":n;i.name=="mozilla"?this.popupList.find("#"+this._id+"alpha").attr({style:"background:-moz-linear-gradient(center top,"+n+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}):i.name=="msie"&&(i.version=="9.0"||i.version=="8.0")?this.popupList.find("#"+this._id+"alpha").attr({style:"filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="+n+", endColorstr='#ffffff',GradientType=0 );"}):i.name=="msie"?this.popupList.find("#"+this._id+"alpha").attr({style:"background:-ms-linear-gradient(top,"+n+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}):i.name=="chrome"||i.name=="safari"?this.popupList.find("#"+this._id+"alpha").attr({style:"background:-webkit-linear-gradient(top,"+n+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}):i.name=="opera"&&this.popupList.find("#"+this._id+"alpha").attr({style:"background:-o-linear-gradient(top,"+n+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"});i.name=="msie"&&i.version=="8.0"&&this.popupList.find("#"+this._id+"alpha").children(".e-handle").css({background:this._formRGB(this.rgb),filter:"alpha(opacity="+this.rgb.a*100+")"})},_hueGradient:function(){var n=this._hsv,t={h:this._hsv.h,s:100,v:100};this.popupList.find("#"+this._id+"hue").children(".e-handle").css({background:this._formRGB(this.HSVToRGB(t))});this._hsv=n},_changeEvent:function(){var n;this._change&&(n=this.RGBToHEX(this.rgb),this._alphaGradient(n),this._trigger("change",{value:n}))},_selectEvent:function(){this.value(this.RGBToHEX(this.rgb));this.element.is("input")&&this._updateValue();this._previousColor!==this.value()&&(this.element.attr({value:this.value()}),this._trigger("select",{value:this.value()}))},_changeHue:function(n){this._hsv.h=Math.round(n.value);this._hueGradient();this._hsvValue();this._changeEvent()},_changeAlpha:function(n){this.rgb.a=t.isNullOrUndefined(n)?this.model.opacityValue/100:n.value/100;(this._browser.name="msie"&&this._browser.version=="8.0")?(this._currentTag.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+this.rgb.a*100+")"}),this.popupList.find("#"+this._id+"alpha").children(".e-handle").css({background:this._formRGB(this.rgb),filter:"alpha(opacity="+this.rgb.a*100+")"})):(this._currentTag.css("background-color",this._formRGBA(this.rgb)),this.popupList.find("#"+this._id+"alpha").children(".e-handle").css({background:this._formRGBA(this.rgb)}));this._inputTagValue(this._selectedButton)},_updateValue:function(){(this._browser.name="msie"&&this._browser.version=="8.0")?this.spanElement.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+this.rgb.a*100+")"}):this.spanElement.css({"background-color":this._formRGBA(this.rgb)})},_wireEvents:function(){this.element.is("input")&&(this._on(this.wrapper,"blur",this._targetBlur),this._on(this.wrapper,"focus",this._targetFocus),this._on(this.wrapper,"keydown",this._popupShown));this._on(this._cancelTag,"click",this.hide);this._on(this._changeTag,"click",this._switchModel);this._on(this._groupTag,"click",this._groupButton);this._on(this._addTag,"click",this._addColor);this._on(this._buttonTag,"click",this._buttonClick);this._on(this._presetContainer.find("li.e-preset-row"),"mousedown",this._colorPresetsClick)},_unWireEvents:function(){this.model.displayInline||this.element.is("input")||(this._off(this.wrapper,"blur",this._targetBlur),this._off(this.wrapper,"focus",this._targetFocus),this._off(this.wrapper,"keydown",this._popupShown));this._off(this._cancelTag,"click",this.hide);this._off(this._changeTag,"click",this._switchModel);this._off(this._groupTag,"click",this._groupButton);this._off(this._addTag,"click",this._addColor);this._off(this._buttonTag,"click",this._buttonClick);this._off(this._presetContainer.find("li.e-preset-row"),"mousedown",this._colorPresetsClick)},_popupShown:function(n){if(n.altKey&&n.keyCode==40)return this._showHidePopup(),!1},_recentColor:function(i){var r,u,f;if(this._divTag.find(".e-select").removeClass("e-select").addClass("e-block"),r=i.target.attributes.value,u=i.target.attributes.style,t.isNullOrUndefined(r)||t.isNullOrUndefined(u))return this._change=!1,!1;n(i.target.parentNode).addClass("e-select").removeClass("e-block");f=u.value.replace(/^(background-color:rgb|background-color:rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(",");this._opacity.option("value",parseFloat(f[3])*100);this.rgb.a=parseFloat(f[3]);this._HexToHSV(r.value);this._valueOperation();this._inputTagValue(this._selectedButton);this._colorSlider.option("value",parseInt(this._hsv.h));this._hueGradient();this._changeEvent();(!this.model.displayInline||this.element.is("input"))&&this.wrapper.focus()},_handleClick:function(t){t.preventDefault();this.mouseDownPos=this._handlePos;this._gradientArea.bind("mousemove",n.proxy(this._handleMovement,this));n(document).bind("mouseup",n.proxy(this._handleUp,this))},_handleMove:function(t){n(this._handleArea).focus();this._handleMovement(t)},_handleMovement:function(n){if(!this.model.enabled)return!1;(!this.model.displayInline||this.element.is("input"))&&this.wrapper.focus();this._hsv.v=parseInt(100*(this._gradientArea.height()-Math.max(0,Math.min(this._gradientArea.height(),n.pageY-this._gradientArea.offset().top)))/this._gradientArea.height(),10);this._hsv.s=parseInt(100*Math.max(0,Math.min(this._gradientArea.width(),n.pageX-this._gradientArea.offset().left))/this._gradientArea.width(),10);this._hsvValue();this._change=!0;this._changeEvent()},_handleUp:function(){return n(document).unbind("mouseup",this._handleUp),this._gradientArea.unbind("mousemove",this._handleMovement),!1},_handlePosition:function(){this._handlePos=this._handleArea?{left:parseInt(this._gradientArea.width()*this._hsv.s/100,10)+"px",top:parseInt(this._gradientArea.height()*(100-this._hsv.v)/100,10)+"px"}:"";this._handleArea.css({left:this._handlePos.left,top:this._handlePos.top})},_addColor:function(){this._previousColor=this.value();var t=this._divTag.find("> div");value=this._selectedButton.html()!="HSVA"?this._inputTag.val():this._formRGBA(this.HSVToRGB(this._hsv));value!==""&&this._change&&this.model.showRecentColors&&t.length<=12&&(n(n(t)[t.length-2]).remove(),this._generateLi());(!this.model.displayInline||this.element.is("input"))&&this.wrapper.focus()},_buttonClick:function(){this._change=!0;this._previousColor=this.value();var n=this._inputTag.val(),t=this._divTag.find("div");this.model.opacityValue=this.rgb.a*100;this.value(this.RGBToHEX(this.rgb));this._updatePreviewColor();(this.model.displayInline&&this.element.is("input")||!this.model.displayInline)&&(this._selectEvent(),this._change?this.hide():"",this.wrapper.focus());this._opacity.option("value",this.model.opacityValue)},_generateLi:function(){this._liTag=t.buildTag("div.e-colorblock e-block").attr({value:this.RGBToHEX(this.rgb),tabindex:"0"});var n=t.buildTag("div.e-color e-set").attr({value:this.RGBToHEX(this.rgb),title:this.RGBToHEX(this.rgb)});(this._browser.name="msie"&&this._browser.version=="8.0")?n.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+this.rgb.a*100+")"}):n.css({"background-color":this._formRGBA(this.rgb)});this._liTag.append(n);this._divTag.prepend(this._liTag)},_colorCodeValue:function(i){var e="",c=this._inputTag.val(),u,r,f,o,s,h;if(u=n.trim(c),u.length==5?this._inputTag.removeClass("e-error"):"",this._keyPressFlag=i.shiftKey&&i.keyCode>=35&&i.keyCode<=40||i.ctrlKey&&(i.keyCode==88||i.keyCode==86)||i.keyCode==190?1:i.crtlKey||i.shiftKey||!(i.keyCode>=65&&i.keyCode<71||i.keyCode>=35&&i.keyCode<=40||i.keyCode>=48&&i.keyCode<=57||i.keyCode==13||i.keyCode==8||i.keyCode==46||i.type==="blur")?0:1,(this.model.enableOpacity&&(i.keyCode==188||i.keyCode==71||i.keyCode==82)||i.shiftKey&&(i.keyCode==57||i.keyCode==48))&&(this._keyPressFlag=1),this._keyPressFlag==1){if(this._inputTag.removeClass("e-error"),i.keyCode===13||i.type==="blur"){if(this._inputTag.removeClass("e-error"),o=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,r=u.match(o),t.isNullOrUndefined(r))if(s=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/,r=u.match(s),t.isNullOrUndefined(r)){if(h=/^hsva?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/,r=u.match(h),t.isNullOrUndefined(r))return this._showAlert(),this._change=!1,!1;this._hsvColor(r)}else this._rgbaColor(r);else{if(r[1].length===3)for(f=0;f<r[1].length;f++)e+=r[1][f]+r[1][f];else r[1].length===6&&(e=r[1]);u=this.hexCodeToRGB("#"+e);this._inputTag.val("#"+e);this.rgb=this.HSVToRGB(this.RGBToHSV(u));this._change=!0}this._change&&(this._valueOperation(),this._colorSlider.option("value",parseInt(this._hsv.h)),this._hueGradient(),this._inputTag.removeClass("e-error"))}}else i.keyCode!=9&&i.preventDefault(),i.shiftKey||i.ctrlKey||this._showAlert()},_rgbaColor:function(n){var i={},r;if(n[0].split("(")[0]!="rgba"||t.isNullOrUndefined(n[4]))if(n[0].split("(")[0]=="rgb"&&t.isNullOrUndefined(n[4]))i.r=n[1],i.g=n[2],i.b=n[3],i.a=this.rgb.a,this._inputTag.val("rgba("+i.r+","+i.g+","+i.b+","+i.a+")");else return this._inputTag.addClass("e-error"),this._change=!1,!1;else i.r=n[1],i.g=n[2],i.b=n[3],i.a=n[4];this.rgb.a=parseFloat(i.a);r=this.RGBToHEX(i);this._HexToHSV(r);this._inputTag.removeClass("e-error");this._change=!0},_hsvColor:function(n){var i={};if(t.isNullOrUndefined(n[4]))return this._inputTag.addClass("e-error"),this._change=!1,!1;i.h=n[1];i.s=n[2];i.v=n[3];i.a=n[4];this.rgb.a=parseFloat(i.a);this.rgb=this.HSVToRGB(i);this._inputTag.removeClass("e-error");this._change=!0},_showAlert:function(){var t=this;this._inputTag.addClass("e-error").attr("aria-invalid","true").animate({Opacity:1},700,null,function(){n(t._inputTag).removeClass("e-error").attr("aria-invalid","false")})},_iconClick:function(n){n.preventDefault();this._showHidePopup();this.wrapper.focus()},_showHidePopup:function(){if(this.model.displayInline)return!1;this.isPopupOpen?(this.hide(),this.wrapper.focus()):this.show()},hide:function(){if(!this.isPopupOpen||this.model.displayInline)return!1;this.isPopupOpen=!1;this._dataBind=!1;this.wrapper.focus();this.popupContainer.slideUp(200,"easeOutQuad");this.model.displayInline||this._off(n(document),"mousedown",this._onDocumentClick);this._off(this._inputTag,"keydown",this._colorCodeValue);this._off(this._inputTag,"blur",this._colorCodeValue);this._modelType=="palette"?this._off(n(document),"keydown",this._keyDown):this._off(n(document),"keydown",this._onKeyDown);this._trigger("close")},show:function(){if((!this.model.displayInline||this.element.is("input"))&&this.wrapper.focus(),this.isPopupOpen||!this.model.enabled)return!1;this.isPopupOpen=!0;this.model.modelType=="palette"&&this._cellSelect();this._previousColor=this.value();this.popupContainer.children().find(".e-focus").removeClass("e-focus");this.model.displayInline||this._setPopupPosition();var t=this;this.popupContainer.slideDown(200,"easeOutQuad",function(){t.isFocused=!0;t.model.displayInline||t._on(n(document),"mousedown",t._onDocumentClick)});this._dataBind||(this._modelType=="palette"?this._on(n(document),"keydown",this._keyDown):this._on(n(document),"keydown",this._onKeyDown));this._on(this._inputTag,"keydown",this._colorCodeValue);this._on(this._inputTag,"blur",this._colorCodeValue);this._trigger("open");this._dataBind=!0},_showBindEvents:function(){this._modelType=="palette"?this._on(n(document),"keydown",this._keyDown):this._on(n(document),"keydown",this._onKeyDown)},_hideUnBindEvents:function(){this._off(n(document),"keydown");this._modelType=="palette"?this._off(n(document),"keydown",this._onKeyDown):this._off(n(document),"keydown",this._keyDown)},_switchEvents:function(){this._switch?(this._on(this._gradientArea,"mousedown",this._handleMove),this._on(this._handleArea,"mousedown",this._handleClick),this._on(this._gradientArea,"mousedown",this._handleClick)):this._on(this._collection,"mousedown",this._onSelect)},_unSwitchEvents:function(){this._switch?this._off(this._collection,"mousedown",this._onSelect):(this._off(this._gradientArea,"mousedown",this._handleMove),this._off(this._handleArea,"mousedown",this._handleClick),this._off(this._gradientArea,"mousedown",this._handleClick))},_groupButton:function(t){if(n(t.target).hasClass("e-disable"))return!1;if(n(t.target).hasClass("e-button")){var i=this._groupTag.find(".e-btn.e-select");this._inputTagValue(n(t.target));this._selectedButton.html()!=="HEX"?this._inputTag.attr("maxLength","22"):this._inputTag.attr("maxLength","7");this._groupTag.find(".e-click").removeClass("e-click");n(t.target).addClass("e-click")}},_inputTagValue:function(n){n.html()=="RGBA"?this._inputTag.val(this._formRGBA(this.rgb)):n.html()=="HEX"?this._inputTag.val(this.RGBToHEX(this.rgb)):n.html()=="HSVA"&&this.model.modelType!="palette"&&this._inputTag.val("hsva("+Math.round(this._hsv.h)+","+Math.round(this._hsv.s)+","+Math.round(this._hsv.v)+","+this.rgb.a+")");this._selectedButton=n},_bindRecentEvent:function(){this._on(this._divTag,"click",this._recentColor)},_unBindRecentEvent:function(){this._off(this._divTag,"click",this._recentColor)},_handlePlacement:function(n,t,i){var r=this._hsv;r[n]+=t*(i?1:3);r[n]<0&&(r[n]=0);n==="s"?this._hsv.s=r[n]:this._hsv.v=r[n];this._hsvValue();this._changeEvent()},_onKeyDown:function(t){if(!this.model.enabled)return!1;var r=t.keyCode,i;if(this._change=!0,t.shiftKey&&r==9&&(i=document.activeElement,n(i).hasClass("e-draghandle")?this._focusWrapper(t):""),!t.altKey&&!t.shiftKey)switch(r){case 39:(t.target.className==="e-draghandle e-color-image"||this.element.is("input")&&t.target==this.wrapper[0])&&(t.preventDefault(),this._handlePlacement("s",1,t.ctrlKey));break;case 38:(t.target.className==="e-draghandle e-color-image"||this.element.is("input")&&t.target==this.wrapper[0])&&(t.preventDefault(),this._handlePlacement("v",1,t.ctrlKey));break;case 37:(t.target.className==="e-draghandle e-color-image"||this.element.is("input")&&t.target==this.wrapper[0])&&(t.preventDefault(),this._handlePlacement("s",-1,t.ctrlKey));break;case 40:(t.target.className==="e-draghandle e-color-image"||this.element.is("input")&&t.target==this.wrapper[0])&&(t.preventDefault(),this._handlePlacement("v",-1,t.ctrlKey));break;case 13:t.preventDefault();this._buttonClick(t);break;case 27:t.preventDefault();this.hide();break;case 9:i=document.activeElement;n(i).hasClass("e-colorwidget")?this._focusPopup(t):""}},_focusPopup:function(t){n(this._handleArea).focus();t.preventDefault()},_focusWrapper:function(t){n(this.wrapper).focus();t.preventDefault()},_onDocumentClick:function(t){n(t.target).is(this.popupContainer)||n(t.target).parents(".e-colorpicker").is(this.popupContainer)||n(t.target).is(this.wrapper)||n(t.target).parents(".e-colorpickerwidget").is(this.wrapper)||n(t.target).parents(".e-presetWrapper").is(this._presetContainer)||(this.hide(),this._isFocused=!1,this.wrapper.removeClass("e-focus"))},_range:function(n,t){return t===""?0:t>n?n:t},_hsvValue:function(){this._change=!0;this._hsv.v=this._hsv.v>=100?100:this._hsv.v;this._hsv.s=this._hsv.s>=100?100:this._hsv.s;this.hsv=this._hsv;this.rgb=this.HSVToRGB(this.hsv);this._valueOperation();this._inputTagValue(this._selectedButton)},_formRGB:function(n){if(!t.isNullOrUndefined(n))return"rgb("+n.r+","+n.g+","+n.b+")"},_formRGBA:function(n){if(!t.isNullOrUndefined(n))return"rgba("+n.r+","+n.g+","+n.b+","+n.a+")"},_rgbValue:function(){value=this._HexToRGB(this.value());t.isNullOrUndefined(value)||(this.rgb=value,this._change=!0,this.HSVToRGB(this.RGBToHSV(this.rgb)),this._colorSlider.option("value",parseInt(this._hsv.h)),this._opacity.option("value",this.rgb.a*100));this._valueOperation();this._inputTagValue(this._selectedButton)},_valueOperation:function(){this._handlePosition();this._alphaGradient(this.value());this._inputTag.removeClass("e-error");this._updateUI()},_HexToHSV:function(n){return this.HSVToRGB(this.RGBToHSV(this._HexToRGB(n)))},_HexToRGB:function(n){if(!t.isNullOrUndefined(n)){var n,i=n.match("^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$");return t.isNullOrUndefined(i)?(this._change=!1,!1):(i[1].length==3&&(n="#"+i[1][0]+i[1][0]+i[1][1]+i[1][1]+i[1][2]+i[1][2]),this._change=!0,n=parseInt(n.indexOf("#")>-1?n.substring(1):n,16),value=t.isNullOrUndefined(this.rgb)?this.model.opacityValue/100:this.rgb.a,this.rgb={r:n>>16,g:(n&65280)>>8,b:n&255,a:value})}},RGBToHSV:function(n){var t={h:0,s:0,v:0},u=Math.min(n.r,n.g,n.b),i=Math.max(n.r,n.g,n.b),r=i-u;return(t.v=i,t.v*=100/255,r===0)?(this._hsv=t,t):(t.s=i!=0?255*r/i:0,t.h=t.s!=0?n.r==i?(n.g-n.b)/r:n.g==i?2+(n.b-n.r)/r:4+(n.r-n.g)/r:-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,this._hsv=t,t)},HSVToRGB:function(n){var i={},f=Math.round(n.h),s=Math.round(n.s*255/100),o=Math.round(n.v*255/100),h;if(s==0)i.r=i.g=i.b=o;else{var r=o,u=(255-s)*o/255,e=(r-u)*(f%60)/60;f==360&&(f=0);f<60?(i.r=r,i.b=u,i.g=u+e):f<120?(i.g=r,i.b=u,i.r=r-e):f<180?(i.g=r,i.r=u,i.b=u+e):f<240?(i.b=r,i.r=u,i.g=r-e):f<300?(i.b=r,i.g=u,i.r=u+e):f<360?(i.r=r,i.g=u,i.b=r-e):(i.r=0,i.g=0,i.b=0)}return this._hsv=n,h=t.isNullOrUndefined(this.rgb)?this.model.opacityValue/100:this.rgb.a,{r:Math.round(i.r),g:Math.round(i.g),b:Math.round(i.b),a:h}},_HSVToHex:function(n){return this.RGBToHEX(this.HSVToRGB(n))},_toHEX:function(n){return n.indexOf("#")!==-1?n:(n=n.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+this._hex(n[1])+this._hex(n[2])+this._hex(n[3]))},RGBToHEX:function(n){if(!t.isNullOrUndefined(n))return"#"+this._hex(n.r)+this._hex(n.g)+this._hex(n.b)},_hex:function(n){return("0"+parseInt(n).toString(16)).slice(-2)},_colorValue:function(n){return this._color=n.indexOf("#")!=-1?this.hexCodeToRGB(n):"","rgb("+this._color.r+", "+this._color.g+", "+this._color.b+")"},hexCodeToRGB:function(n){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:this.rgb.a}:null},_updatePreviewColor:function(){(this._browser.name="msie"&&this._browser.version=="8.0")?this._previousTag.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+this.rgb.a*100+")"}):this._previousTag.css({"background-color":this._formRGBA(this.rgb)});this._oldValue=this.rgb},_updateUI:function(){var t=this._hsv,n;this._switch?(n={h:this._hsv.h,s:100,v:100},this._gradientArea.css({"background-color":this._colorValue(this._HSVToHex(n))})):this._cellSelect();(this._browser.name="msie"&&this._browser.version=="8.0")?(this._currentTag.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+this.rgb.a*100+")"}),this._previousTag.css({"background-color":this._formRGB(this._oldValue),filter:"alpha(opacity="+this.rgb.a*100+")"})):(this._currentTag.css({"background-color":this._formRGBA(this.rgb)}),this._previousTag.css({"background-color":this._formRGBA(this._oldValue)}),this.popupList.find("#"+this._id+"alpha").children(".e-handle").css({background:this._formRGBA(this.rgb)}));this._hsv=t},_targetFocus:function(n){n.preventDefault();this._isFocused||(this._isFocused=!0,this.wrapper.addClass("e-focus"))},_targetBlur:function(){this._isFocused=!1;this.isPopupOpen||this.wrapper.removeClass("e-focus")},_switchModel:function(){this.value(this.RGBToHEX(this.rgb));var n=this;this._modelType=="palette"?(this._modelType="picker",this._switcher.removeClass("e-paletteModel").addClass("e-pickerModel"),this.PaletteWrapper.fadeOut(300,function(){n._presetTag.parents(".e-split.e-widget").addClass("e-hide");n._gradient.fadeIn(300)}),this._switch=!0,this._rgbValue(),this._hueGradient(),this._templateWrapper.find("#"+this._id+"hsv").ejButton("enable")):(this._modelType="palette",this._switcher.removeClass("e-pickerModel").addClass("e-paletteModel"),this._switch=!1,this._gradient.fadeOut(300,function(){n._presetTag.parents(".e-split.e-widget").removeClass("e-hide");t.isNullOrUndefined(n.PaletteWrapper)&&(n.PaletteWrapper=n._layoutType(n.model.palette),n._splitObj.option("prefixIcon","e-color-image e-"+this.model.presetType),n.popupList.prepend(n.PaletteWrapper));n.PaletteWrapper.fadeIn(300)}),this._cellSelect(),this._disableHSVButton());(!this.model.displayInline||this.element.is(":input"))&&this.wrapper.focus();this._switchEvents();this._unSwitchEvents();this.isPopupOpen&&(this._hideUnBindEvents(),this._showBindEvents())},_disableHSVButton:function(){n(this._groupTag.find(".e-click")).attr("id")==this._id+"hsv"&&(this._inputTagValue(this._templateWrapper.find("#"+this._id+"rgba")),this._templateWrapper.find("#"+this._id+"rgba").addClass("e-click"),this._templateWrapper.find("#"+this._id+"hsv").removeClass("e-click"));this._templateWrapper.find("#"+this._id+"hsv").ejButton("disable")},_cellSelect:function(){var t,i,r=this;this._removeClass();this._collection.find(".e-item").each(function(){t=n(this).css("background-color");t&&t.replace(/ /g,"")===r._formRGB(r.rgb)&&(i=this)});n(i).addClass("e-state-selected").attr("aria-selected",!0)},_removeClass:function(){this._collection.find(".e-item").removeClass("e-state-selected").removeAttr("aria-selected")},_position:function(n,t,i){n=Array.prototype.slice.call(n);var u=n.length,r=n.indexOf(t);return r<0?i<0?n[u-1]:n[0]:(r+=i,n[r<0?r+=u:r%=u])},_onSelect:function(n){this._collection.find(".e-item").removeClass("e-state-selected").removeAttr("aria-selected");n.target.style.backgroundColor!=""&&(this._HexToRGB(this._toHEX(n.target.style.backgroundColor)),this._updateUI(),this._inputTagValue(this._selectedButton),(!this.model.displayInline||this.element.is("input"))&&this.wrapper.focus());this._changeEvent();n.preventDefault()},_keyDown:function(t){if(this._change=!0,!this.model.enabled)return!1;var i="",r=t.keyCode,u=this._collection.find(".e-item"),f=u.filter(".e-state-selected").get(0),e=this.model.columns;if(t.altKey||r!=37&&r!=38&&r!=39&&r!=40||t.target.className==="e-color-code"||this._removeClass(),t.keyCode==9)return!1;switch(!t.altKey&&r){case 40:t.target.className!=="e-color-code"&&(t.preventDefault(),i=this._position(u,f,e));break;case 37:t.target.className!=="e-color-code"&&(t.preventDefault(),i=this._position(u,f,-1));break;case 38:t.target.className!=="e-color-code"&&(t.preventDefault(),i=this._position(u,f,-e));break;case 39:t.target.className!=="e-color-code"&&(t.preventDefault(),i=this._position(u,f,1));break;case 13:this._collection.find(".e-item").removeClass("e-state-selected").removeAttr("aria-selected");this._buttonClick(t);this._updateUI();this.hide();(this.model.displayInline||this.element.is("input"))&&this.wrapper.focus();break;case 27:this.hide();(this.model.displayInline||this.element.is("input"))&&this.wrapper.focus()}i&&(n(i).addClass("e-state-selected").attr("aria-selected",!0),this._currentTag.css({"background-color":this._formRGB(this._HexToRGB(i.attributes.value.value))}),this._inputTagValue(this._selectedButton),this._changeEvent())}});t.ColorPicker.Palette={BasicPalette:"basicpalette",CustomPalette:"custompalette"};t.ColorPicker.ModelType={Default:"default",Palette:"palette",Picker:"picker"};t.ColorPicker.PresetType={Basic:"basic",MonoChrome:"monochrome",FlatColors:"flatcolors",SeaWolf:"seawolf",WebColors:"webcolors",Sandy:"sandy",PinkShades:"pinkshades",Misty:"misty",Citrus:"citrus",Vintage:"vintage",MoonLight:"moonlight",CandyCrush:"candycrush"};var i={basic:["ffffff","facbcb","fccb98","faf39a","fbf8cd","a6d38b","aadee8","d1ecf2","cdcae5","eecde1","cccbcb","f16667","f69668","f8ee6b","f7ec37","89c987","75cddd","8bd3e1","9494c8","9494c8","b3b2b3","ec2024","f7971d","ffcb67","f5ea14","74bf44","69c8c9","46c7f4","6666ad","b76cab","676767","971b1e","ca6828","ca9732","979937","0d9948","339898","4857a6","62449a","973794","000000","2f1110","973620","663433","343416","183319","023334","22205f","3b2f8d","310e31"],monochrome:["ffffff","e3e3e3","c6c6c6","aaaaaa","8e8e8e","717171","555555","393939","1c1c1c","000000","f9e6e7","f4d0d2","efbabc","e9a4a7","e48e92","df787c","da6267","d44c52","cf363c","ca2027","fff4ca","ffeb9e","fff0b4","ffeb9e","ffe788","ffe272","ffd947","ffd531","ffd01b","ffcc05","e4f4eb","ccead9","b4e0c7","9cd6b5","84cca3","6dc190","55b77e","3dad6c","25a35a","0d9948","e8f4f4","d6e3eb","c4d1e3","b3c0da","a1aed1","8f9dc9","7d8bc0","6c7ab7","5a68af","4857a6"],flatcolors:["7477b8","488bca","18b1d4","1db369","78c162","acc063","ffe84e","f6b757","f79853","ed6346","E87F3D","E4C45D","B7A575","999999","67809F","002228","00A578","F9A41F","F3770B","D7401B","FFCB36","82CC2C","36B595","6370AD","D4264E","004D8E","22A04B","F3A414","C77405","F3420B","1ABC9C","3498DB","9B59B6","E67E22","E74C3C","3A738A","EBD9A7","89AD78","FF766D","C76160","BF3542","CDC5BA","EBE3D6","3C3C3C","2E2E2E","77A7FB","E57368","FBCB43","34B67A","FFFFFF"],seawolf:["0EEAFF","15A9FA","1B76FF","1C3FFD","2C1DFF","0B3C4C","0E5066","13647F","127899","1A8BB2","74B8E8","659EBB","3C9FFF","26466F","2472FF","0069A4","009BF2","004165","49A0B4","274C5F","000000","7A5848","E0A088","F9DEC6","3A2A22","DC3522","D9CB9E","374140","2A2C2B","1E1E20","CB3937","FE6B2C","654E44","6DD16F","70FE2C","275673","4681A6","FDDEC9","F22816","400101","071C2F","388494","E6A934","F3DB5F","534329","206956","47683B","E1BFA6","BF7950","903932"],webcolors:["0066aa","00bbdd","338800","77bb00","ffcc99","990c0c","0303c9","336699","669933","cccccc","EEEEEE","E7C36F","F7B230","E35B20","000033","7D7A74","BD524A","FCB200","8CFCC2","2ACD6B","666666","666553","FFFEEC","B2B2A4","AAA4B2","9CA5E3","5A668C","BBA469","CFC295","FFFFFF","DBBF56","2E94B3","808080","E96656","14A168","DE185B","D8806F","DBE186","D8CC63","DCC527","4E6C89","E2BDAD","EC6053","81BBAD","DFCDA5","453394","66398A","313E7D","336694","788E91"],sandy:["c0a986","ecd9c3","dfc79b","f6d58e","ecdaad","fff3e0","7f6b4a","ffd694","7f7a70","ccac76","E6E2AF","A79A71","EFECCA","806F4C","2F2F2E","997F1A","CCB65F","FFD291","6B674A","635F3A","7F693A","FFEBC1","FFD275","7F7561","CCA85E","D29854","4A4034","C9AD8D","4A351D","968169","E6E39F","9A9757","FFFDC9","94909A","E2E0E6","960010","EB1517","CD7C29","9A571C","1F7A94","7F6826","7F724C","FFE499","FFD04C","CCA63D","FFA669","92FFB6","FFF352","E8C269","D7E8CB"],pinkshades:["F6B1C3","F0788C","DE264C","BC0D35","A20D1E","E12256","BB1C48","7B132F","3B0917","FA2660","FFB7B5","9A423F","FF6D68","BB5855","CC5753","E88161","D66C60","C2646E","996072","705262","FFA1BD","FF8FB7","FF82AE","E9719B","CC6882","F250C7","BF1774","BF2696","AC60AA","BB90C5","BF1553","F20775","F2F2F2","A68F63","261414","FFFFFF","7F3443","FF6887","7F3443","CC536C","D06AA9","E65F41","650017","BC1620","FA427E","3B1132","84476E","B83D65","E6E0E8","FF6EE8"],misty:["5C7A84","3D5372","7C9196","50748A","ADBFBF","010735","052159","194073","376B8C","FFFFFF","985999","C811CC","892EFF","FF6852","DBA211","0A0D0C","85A67C","46593E","BBD9AD","202616","BF8E63","734327","A66C4B","593A2F","BFBFBF","8DB0B6","1B778A","F46C1B","881801","192129","81808C","ABAABF","0C0E09","6A7366","37402F","5D6663","84867B","A4A66A","BABBB1","20211C","6B9695","646E8C","6B8196","61787F","648C80","8E9FBA","89A8C8","799ED1","7FAEE7","849EBD"],citrus:["FAEA41","E7F03E","E3C647","FAC541","F0AB3E","CCCA1F","FFF300","FFCB0D","FF9500","804A00","6A692A","FFFCA0","FFFFFF","CF664E","EFAC66","EFF299","F2DC6D","F29727","F2600C","592202","214001","4F7302","1A2601","BCD97E","C0D904","AAFEFF","359D6D","E5FF45","65FCCF","ABDC4B","42B200","C6FF00","F2E304","FFB200","FF8600","52EC04","04E206","94D507","ECE404","E2C904","DA321C","FF7913","FBD028","C0D725","9FC131","547312","ADBF26","DEB329","F1DB47","E08214"],vintage:["684132","fdbe30","eaac21","87783c","3e4028","ffc706","cd5648","5bafa9","828282","363636","424862","fb9a63","bfc4d5","f6fbf4","febc98","657050","FCF082","D8D98B","A2AB80","4D584A","5ADED4","4DAAAB","26596A","163342","6C98A1","010A26","28403B","557359","AEBF8A","C7D9AD","AFFCCB","CB4243","D2997E","36857E","4AC6BB","28394B","191313","AF0A18","DC373D","122438","43734A","A6A26D","D9B448","BF8C2C","734002","26010F","866F53","ACBD91","7BAB87","546859"],moonlight:["241D37","2A233D","322B45","362F49","D4BA73","261225","592040","8C3063","A64985","73345D","A3C8FF","85B6FF","000040","213190","050859","FFFFFF","6AAED9","4184BF","224573","A3C8FF","CFC496","B3B391","889486","61797B","366577","123340","436E73","7B8C61","D7D996","F0EBB4","CFC496","B3B391","889486","61797B","366577","123340","436E73","7B8C61","D7D996","F0EBB4","341F36","D9B5E0","9889AB","4D4E66","1B2129","5CBBE3","FCF1BC","5C8182","383A47","B4F257"],candycrush:["0779f4","30da00","fb8006","f9d802","a71df7","f70200","fd49ae","682e07","9b2424","5e7693","F9AB3B","EF5627","FF0000","00A398","803C2C","DE5711","FFF026","FF0048","14A0CC","00B229","FFFFBE","F7CD99","FF77A1","9886E8","97CACB","EAEDE5","FFD127","FF870C","EC4610","9A1900","993460","CC1464","C300FF","FFFFBC","CCB914","FFFEE2","B24C5F","FF274F","0A94CC","679DB2","C2FFE6","16B271","5FFFBC","B2442F","FFA190","E89359","FFFB75","F36EFF","5999E8","73EB86"]}})(jQuery,Syncfusion)})