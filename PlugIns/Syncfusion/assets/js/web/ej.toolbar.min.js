/*!
*  filename: ej.toolbar.min.js
*  version : 13.2.0.34
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min"],n):n()})(function(){(function(n,t){t.widget("ejToolbar","ej.Toolbar",{element:null,model:null,validTags:["div","span"],_ignoreOnPersist:["fields","dataSource","query","create","click","itemHover","itemLeave","destroy"],_setFirst:!1,_rootCSS:"e-toolbar",angular:{terminal:!1},defaults:{height:"",width:"",enabled:!0,hide:!1,enableSeparator:!1,orientation:"horizontal",enableRTL:!1,isResponsive:!1,showRoundedCorner:!1,htmlAttributes:{},dataSource:null,query:null,fields:{id:"id",tooltipText:"tooltipText",imageUrl:"imageUrl",text:"text",imageAttributes:"imageAttributes",spriteCssClass:"spriteCssClass",htmlAttributes:"htmlAttributes",group:"group"},cssClass:"",create:null,click:null,itemHover:null,itemLeave:null,destroy:null},dataTypes:{enabled:"boolean",hide:"boolean",enableSeparator:"boolean",orientation:"enum",enableRTL:"boolean",showRoundedCorner:"boolean",isResponsive:"boolean",dataSource:"data",query:"data",fields:"data",cssClass:"string",htmlAttributes:"data"},hide:function(){if(!this.model.enabled&&this.element.css("display")=="none")return!1;this.element.css("display","none")},show:function(){if(!this.model.enabled&&this.element.css("display")!="none")return!1;this.element.css("display","block")},_init:function(){this._cloneElement=n(this.element).clone();this.model.dataSource!=null&&this._generateTemplate();this.model.dataSource instanceof t.DataManager||this._initialize()},_setModel:function(t){for(var i in t)switch(i){case"height":this._setHeight(t[i]);break;case"width":this.model.width=t[i];this._setWidth();this._bindUnbindWidth();break;case"enabled":this._controlStatus(t[i]);break;case"isResponsive":this.model.isResponsive=t[i];this.model.isResponsive?this._responsiveLayout():this._removeResponsive();break;case"hide":this._controlVisibleOptions(t[i]);break;case"orientation":this._setOrientation(t[i]);break;case"enableRTL":this._enableRTL(t[i]);break;case"showRoundedCorner":this._roundedCorner(t[i]);break;case"cssClass":this._setSkin(t[i]);break;case"htmlAttributes":this._addAttr(t[i]);break;case"enableSeparator":this.model.enableSeparator=t[i];this._renderToolbarSeparator();break;case"fields":n.extend(this.model.fields,t[i]);break;case"query":this.model.query=t[i];break;case"dataSource":for(optio in t)optio=="fields"&&n.extend(this.model.fields,t[optio]),optio=="query"&&(this.model.query=t[optio]);this._refreshTagItems(i,t[i])}},_refreshTagItems:function(n,t){this.model[n]=t;this.element.empty();this._generateTemplate();this._initialize()},_setHeight:function(n){this.element.css("height",n)},_setWidth:function(){var t,u;if(this.model.width=="auto"){var r=parseFloat(this.element.css("border-left-width"))+parseFloat(this.element.css("border-right-width")),f=this.element.find("ul").children("li"),i=this.element.find("ul"),e=this.element.find(".e-toolbar-res-arrow");for(t=0,u=i.length;t<u;t++)i[t]!=null&&n(i[t]).hasClass("e-separator")&&(r+=parseFloat(i.eq(t).css("border-right-width"))+parseFloat(i.eq(t).css("border-left-width")));for(e[0]!=null&&(r+=Math.round(this.element.find(".e-toolbar-res-arrow").outerWidth())+8),t=0,u=f.length;t<u;t++)f[t]!=null&&(r+=Math.round(f.eq(t).outerWidth()));this.element.css("width",Math.ceil(r))}else this.element.css("width",this.model.width)},_bindUnbindWidth:function(){this.model.width!="auto"?this._off(n(window),"resize",this._widthHandler):this._on(n(window),"resize",this._widthHandler)},_widthHandler:function(){this._setWidth(this.model.width)},_setOrientation:function(n){n!=t.Orientation.Vertical?(this.element.removeClass(this.model.cssClass).addClass("e-toolbarspan "+this.model.cssClass),this.itemsContainer.removeClass("e-ul e-vertical").addClass("e-ul e-horizontal")):(this.element.removeClass("e-toolbarspan "+this.model.cssClass).addClass(this.model.cssClass),this.itemsContainer.removeClass("e-ul e-horizontal").addClass("e-ul e-vertical"));this.items.addClass("e-tooltxt")},_reSizeHandler:function(){this._elementWidth=typeof getComputedStyle=="function"?parseFloat(window.getComputedStyle(this.element[0]).width):this.element.width()-1;this._isResized&&this._liTemplte.children().length>0&&(n(this.element).append(this._liTemplte.children()),this._renderToolbarSeparator(),this._liTemplte.addClass("e-display-none"),this._contstatus=!1);this._liWidth=this._spanWidth;this._spantag.removeClass("e-display-block").addClass("e-display-none");for(var t=0;t<this.itemsContainer.length;t++)this._liWidth+=n(this.itemsContainer[t]).outerWidth(!0),this._liWidth>this._elementWidth&&(this._spantag.hasClass("e-display-block")||this._spantag.removeClass("e-display-none").addClass("e-display-block"),this._spantag.addClass("e-res-pos"),this._liTemplte.append(this.itemsContainer[t]));this._isResized=!0},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popup)},_getOffset:function(n){return t.util.getOffset(n)},_btnMouseClick:function(t){var r,i,u,e,f=1;n(t.currentTarget).hasClass("e-disable")||(e=n("#"+this.element[0].id+"_target"),maxZ=this._getZindexPartial(),r=this._getOffset(n("#"+this.element[0].id+"_target")),i=r.left-f,n(this._liTemplte).width()+i>n(window).width()&&(i=n(window).width()-n(this._liTemplte).width()-3),u=r.top+this.element.outerHeight(!0)-f+2,this.model.enableRTL&&(i=i+n("#"+this.element[0].id+"_target").outerWidth()-n(this._liTemplte).outerWidth()),this._contstatus?(this._liTemplte.addClass("e-display-none"),this._contstatus=!1):(this._liTemplte.removeClass("e-display-none").css({top:u+"px",left:i+"px","z-index":maxZ}),this._contstatus=!0,this.element.bind("click",n.proxy(this._hidecontext,this))),this._contstatus&&this._on(n(document),"mouseup",this._documentClick))},_hidecontext:function(t){n(t.target).is(n("#"+this.element[0].id+"_target"))||(this._liTemplte.addClass("e-display-none"),this._contstatus=!1,this.element.unbind("click",n.proxy(this._hidecontext,this)),this._off(n(document),"mouseup",this._documentClick))},_documentClick:function(t){n(t.target).is(n("#"+this.element[0].id+"_target"))||n(t.target).closest("div#"+this.element[0].id+"_hiddenlist").length!=0||n(t.target).parents().hasClass("e-ddl-popup")||(this._liTemplte.addClass("e-display-none"),this._contstatus=!1,this._off(n(document),"mouseup",this._documentClick))},_setSkin:function(n){this.element.removeClass(this.model.cssClass).addClass(n)},_destroy:function(){this.element.html("");this._cloneElement.removeClass("e-toolbar e-js");this.element.replaceWith(this._cloneElement);this._liTemplte&&this._liTemplte.remove()},_initialize:function(){this.element.attr({role:"toolbar",tabindex:"0"});var n=this.element.children().find("li");this._focusEnable=!0;this._renderControl();this._responsiveLayout();this._wireEvents()},_responsiveLayout:function(){this._roundedCorner(this.model.showRoundedCorner);this.model.isResponsive&&this.model.orientation=="horizontal"&&(this._spantag=n("<span id='"+this.element[0].id+"_target' class='e-icon e-toolbar-res-arrow e-rel-position e-display-block'><\/span>"),this._spantag.appendTo(this.element),this._spanWidth=this._spantag.outerWidth(!0)+8,this._liTemplte=n("<div id='"+this.element[0].id+"_hiddenlist' class='e-responsive-toolbar e-display-none e-abs-position "+n(this.element)[0].className+"'><\/div>"),this.model.enableRTL&&this._liTemplte.addClass("e-rtl"),this._isResized=!1,this._reSizeHandler(),n("body").append(this._liTemplte));this._on(n("#"+this.element[0].id+"_target"),"mousedown",this._btnMouseClick);this._wireResizing();this._controlVisibleOptions(this.model.hide);this._enableRTL(this.model.enableRTL);this._controlStatus(this.model.enabled);this._setWidth()},_removeResponsive:function(){n(this._spantag).remove();var t=n(this._liTemplte).children("ul");n(this._liTemplte).remove();n(this.element).append(t);this.itemsContainer=this.element.children("ol,ul");this.items=this.itemsContainer.children("li");this._off(this.items,"mouseup");this._off(this.items,"mousedown");this._off(this.element);this._wireEvents();this._wireResizing();this._setWidth()},_controlVisibleOptions:function(n){n!=!1?this.hide():this.show()},_controlStatus:function(n){n!=!0?this.disable():this.enable()},_roundedCorner:function(n){n?(this.element.addClass("e-corner"),this._liTemplte&&this._liTemplte.addClass("e-corner")):(this.element.removeClass("e-corner"),this._liTemplte&&this._liTemplte.removeClass("e-corner"))},_generateTemplate:function(){var n=this,i;this.element.css("visibility","hidden");this.model.dataSource instanceof t.DataManager?(i=this.model.dataSource.executeQuery(this.model.query),i.done(function(t){n._generateGroup(t.result);n._initialize();n.element.css("visibility","visible")})):(n._generateGroup(n.model.dataSource),n.element.css("visibility","visible"))},_generateGroup:function(n){for(var f,i,r=this,e=-1,u=[],t=0;t<n.length;t++)if(this._isNewGroup(n[t].group,u)){for(u[++e]=n[t].group,f=-1,r.itemsSource=[],i=t;i<n.length;i++)n[t].group==n[i].group&&(r.itemsSource[++f]=n[i]);r.element.append(r._generateTagitems())}},_isNewGroup:function(n,t){if(!t)return!0;for(var i=0;i<t.length;i++)if(n==t[i])return!1;return!0},_renderControl:function(){this.element.addClass("e-widget e-box");this._renderToolbarItems();this._addAttr(this.model.htmlAttributes);this._setOrientation(this.model.orientation);this._renderToolbarSeparator();this._setHeight(this.model.height);this._bindUnbindWidth()},_renderToolbarItems:function(){this.target=this.element[0];this.itemsContainer=this.element.children("ol,ul");this.itemsContainer.children("ol,ul").remove();this.items=this.itemsContainer.children("li");for(var i=0;i<this.items.length;i++)t.isNullOrUndefined(n(this.items[i]).attr("title"))&&n(this.items[i]).attr("aria-label",this.items[i].id);this._liCount=this.items.length},_generateTagitems:function(){var i,n;for(i=this.itemsSource,this.ultag=t.buildTag("ul"),n=0;n<i.length;n++)this.ultag.append(this._generateLi(i[n]));return this.ultag},_generateLi:function(n){var i,r,u;return i=t.buildTag("li"),n[this.model.fields.id]?i.attr("id",n[this.model.fields.id]):n[this.model.fields.text]&&i.attr("id",n[this.model.fields.text]),n[this.model.fields.tooltipText]&&i.attr("title",n[this.model.fields.tooltipText]),n[this.model.fields.imageUrl]&&n[this.model.fields.imageUrl]!=""&&(r=t.buildTag("img.e-align","",{},{src:n[this.model.fields.imageUrl],alt:n[this.model.fields.text]}),n[this.model.fields.imageAttributes]&&this._setAttributes(n[this.model.fields.imageAttributes],r),i.append(r)),n[this.model.fields.spriteCssClass]&&n[this.model.fields.spriteCssClass]!=""&&(u=t.buildTag("div.e-align "+n[this.model.fields.spriteCssClass]+" e-spriteimg"),i.append(u)),n[this.model.fields.text]&&n[this.model.fields.text]!=""&&i.append(n[this.model.fields.text]),n[this.model.fields.htmlAttributes]&&this._setAttributes(n[this.model.fields.htmlAttributes],i),i},_setAttributes:function(t,i){for(var r in t)n(i).attr(r,t[r])},_renderToolbarSeparator:function(){var t,i;if(this.model.enableSeparator){for(t=0,i=this.itemsContainer.length-1;t<i;t++)n(this.itemsContainer[t]).addClass("e-separator");if(this.model.enableRTL){if(this.itemsContainer.length==1)for(t=0,i=this.itemsContainer[0].children.length;t<i;t++)t==0?n(this.itemsContainer[0].children[t]).removeClass("e-separator"):this.model.fields.group&&this.model.dataSource&&this.model.dataSource[t].group||n(this.itemsContainer[0].children[t]).addClass("e-separator")}else if(this.itemsContainer.length==1)for(t=0,i=this.itemsContainer[0].children.length;t<i;t++)t==i-1?n(this.itemsContainer[0].children[t]).removeClass("e-separator"):this.model.fields.group&&this.model.dataSource&&this.model.dataSource[t].group||n(this.itemsContainer[0].children[t]).addClass("e-separator")}else this.itemsContainer.removeClass("e-separator").find(".e-separator").removeClass("e-separator");this._setWidth()},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i.element.addClass(n):t=="disabled"&&n=="disabled"?i.disable():i.element.attr(t,n)})},_enableRTL:function(n){n?(this.element.addClass("e-rtl"),this.items.addClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.addClass("e-comnrtl"),this._liTemplte&&this._liTemplte.addClass("e-rtl")):(this.element.removeClass("e-rtl"),this.items.removeClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.removeClass("e-comnrtl"),this._liTemplte&&this._liTemplte.removeClass("e-rtl"));this.model.enableRTL=n;this._renderToolbarSeparator()},_addOverlay:function(i){for(var u,r=0;r<i.length;r++)n(i[r]).hasClass("e-disable")||(n(i[r]).addClass("e-disable"),u=t.buildTag("div.e-item-overlay"),n(i[r]).append(u))},_removeOverlay:function(t){for(var i=0;i<t.length;i++)n(t[i]).children(".e-item-overlay").remove()},disableItem:function(t){var i=n(t);i==null||i.length<=0||i.hasClass("e-disable")||(i.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(i))},enableItem:function(t){var i=n(t);i==null||i.length<=0||(i.removeClass("e-disable").attr("aria-disabled",!1).removeClass("e-disable"),this._removeOverlay(i))},disableItemByID:function(n){var t=this.itemsContainer.find("li#"+n);t==null||t.length<=0||this.disableItem(t)},enableItemByID:function(n){var t=this.itemsContainer.find("li#"+n);t==null||t.length<=0||this.enableItem(t)},disable:function(){if(this.element.attr("aria-disabled")=="true")return!1;this.element.attr("aria-disabled",!0).removeAttr("aria-label");this._addOverlay(this.items);this.model.isResponsive&&this.model.orientation=="horizontal"&&this._spantag.addClass("e-disable");this.model.enabled=!1},enable:function(){if(this.element.attr("aria-disabled")=="false")return!1;this.items.removeClass("e-disable");this._removeOverlay(this.items);this.element.attr("aria-disabled",!1);this.model.isResponsive&&this.model.orientation=="horizontal"&&this._spantag.removeClass("e-disable");this.model.enabled=!0},selectItem:function(t){var i=n(t);i==null||i.length<=0||(i.addClass("e-active"),this._activeItem=n(this.items).index(i))},deselectItem:function(t){var i=n(t);i==null||i.length<=0||i.removeClass("e-active")},selectItemByID:function(n){var t=this.itemsContainer.find("li#"+n);t==null||t.length<=0||this.selectItem(t)},deselectItemByID:function(n){var t=this.itemsContainer.find("li#"+n);t==null||t.length<=0||this.deselectItem(t)},removeItem:function(t){var i=n(t);i==null||i.length<=0||(i.remove(),this.items=this.itemsContainer.children("li"))},removeItemByID:function(n){var t=this.itemsContainer.find("li#"+n);t==null||t.length<=0||this.removeItem(t)},_wireResizing:function(){this.model.isResponsive&&this.model.orientation=="horizontal"?n(window).bind("resize",n.proxy(this._reSizeHandler,this)):n(window).unbind("resize",n.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this.element,"mousedown",this._clickEventHandler);this._on(this.element,"focus",this._focusElement);this._on(this.element,"blur",this._targetBlur);this._on(this.items,"mouseenter",this._onItemHover);this._on(this.items,"mouseleave",this._onItemLeave);this._on(this.items,"mousedown",this._onItemClick);this._on(this.items,"mouseup",this._onItemClick)},_onItemHover:function(t){var i=n(t.currentTarget),r=t.target;i.hasClass("e-disable")||(this.items.removeClass("e-hover"),i.addClass("e-hover"),args={currentTarget:i,target:r,status:this.model.enabled},this._trigger("itemHover",args))},_onItemClick:function(t){if(n(t.currentTarget).hasClass("e-disable"))return!1;var i=t.currentTarget,r=t.target;t.type=="mousedown"?(this._focusEnable=!1,n(i).addClass("e-active")):t.type=="mouseup"&&(n(i).removeClass("e-active"),n(i).hasClass("e-disable")||(args={currentTarget:i,target:r,status:this.model.enabled},this._activeItem=this.model.isResponsive&&this._contstatus&&n(i.closest(".e-responsive-toolbar")).length>0?this._liTemplte.find(".e-tooltxt").index(i):n(this.items).index(i),this._trigger("click",args)))},_onItemLeave:function(t){var i=n(t.currentTarget),r=t.target;i.hasClass("e-disable")||(i.removeClass("e-hover"),args={currentTarget:i,target:r,status:this.model.enabled},this._trigger("itemLeave",args))},_OnKeyDown:function(n){this._focusEnable=!0;this.e=n;var t,i=!1;this.model.isResponsive&&this._liTemplte.find(".e-tooltxt").length>0?(this._keyPressed=!0,this._items=this._contstatus?this._liTemplte.find(".e-tooltxt"):this.element.find(".e-tooltxt"),t=this._items.length-1):(t=this.items.length-1,this._keyPressed=!1);switch(n.keyCode){case 38:case 39:n.preventDefault();this._activeItem>t-1?this._activeItem=0:this._activeItem+=1;(this._getActiveItem().hasClass("e-disable")||this._getActiveItem().is(":hidden"))&&(this._activeItem==t?this._activeItem=0:this._activeItem+=1);i=!0;break;case 37:case 40:n.preventDefault();this._activeItem<=0?this._activeItem=t:this._activeItem-=1;(this._getActiveItem().hasClass("e-disable")||this._getActiveItem().is(":hidden"))&&(this._activeItem==t?this._activeItem=t-1:this._activeItem-=1);i=!0;break;case 33:case 36:n.preventDefault();this._activeItem=0;(this._getActiveItem().hasClass("e-disable")||this._getActiveItem().is(":hidden"))&&this._activeItem==t&&(this._activeItem=0);i=!0;break;case 34:case 35:n.preventDefault();this._activeItem=t;(this._getActiveItem().hasClass("e-disable")||this._getActiveItem().is(":hidden"))&&this._activeItem==t&&(this._activeItem=t-1);i=!0}i&&(this._removeListHover(),this._addListHover())},_OnKeyUp:function(t){var u,i,r;this.e=t;u=this.items.length;switch(t.keyCode){case 13:case 32:n(t.target).is("div")?(i=this._getActiveItem(),r=i):(i=n(t.target).closest("li"),r=t.target);n(i).hasClass("e-disable")||(args={currentTarget:i[0],target:n(r)[0],status:this.model.enabled,event:this.e},this._trigger("click",args),this._removeListHover());break;case 27:this.element.focusout();this._removeListHover();break;case 9:this._activeItem=0;(this._getActiveItem().hasClass("e-disable")||this._getActiveItem().is(":hidden"))&&(this._activeItem=n(this.items).filter('li:not([class*="e-disable"])').first().index());this._addListHover()}},_removeListHover:function(){n(this.items).removeClass("e-hover")},_addListHover:function(){var n=this._getActiveItem();n.hasClass("e-disable")||n.addClass("e-hover").focus()},_getActiveItem:function(){return this.model.isResponsive&&this._keyPressed?n(this._items[this._activeItem]):n(this.items[this._activeItem])},_targetBlur:function(n){n.preventDefault();this.element.focusout().removeClass("e-focus");this._removeListHover();this._off(this.element,"keyup",this._OnKeyUp);this._off(this.element,"keydown",this._OnKeyDown);this._trigger("focusOut");this._contstatus&&this.element.focus()},_clickEventHandler:function(){this._clicked=!0},_focusElement:function(){if(this.element.addClass("e-focus"),this._on(this.element,"keyup",this._OnKeyUp),this._on(this.element,"keydown",this._OnKeyDown),!this._focusEnable){this._focusEnable=!0;return}this._removeListHover();(!this._activeItem||this._activeItem<=0)&&(this._activeItem=this._clicked?-1:0);this._getActiveItem().hasClass("e-disable")&&(this._activeItem=n(this.items).filter('li:not([class*="e-disable"])').first().index());this._addListHover()}})})(jQuery,Syncfusion)});