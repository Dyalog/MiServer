/*!
*  filename: ej.tools.min.js
*  version : 12.2.0.36
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t){t.widget("ejAccordion","ej.Accordion",{_rootCSS:"e-acrdn",element:null,model:null,validTags:["div","span"],_setFirst:!1,defaults:{collapsible:!1,ajaxSettings:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},events:"click",customIcon:{header:"e-collaps",selectedHeader:"e-expand"},heightAdjustMode:"content",selectedItemIndex:0,cssClass:"",enableRTL:!1,showRoundedCorner:!1,allowKeyboardNavigation:!0,enableMultipleOpen:!1,expandSpeed:300,collapseSpeed:300,selectedItems:[0],disabledItems:[],enabledItems:[],enablePersistence:!1,enabled:!0,ajaxLoad:null,ajaxBeforeLoad:null,active:null,beforeActive:null,ajaxSuccess:null,ajaxError:null,create:null,destroy:null},dataTypes:{cssClass:"string",collapsible:"boolean",enabled:"boolean",events:"string",heightAdjustMode:"enum",ajaxSettings:"data",customIcon:"data",selectedItems:"data",disabledItems:"data"},_setModel:function(n){var i,r,u;if(!this.model.enabled&&t.isNullOrUndefined(n.enabled))return!1;for(i in n)switch(i){case"events":this._off(this._headers,this.model.events);this._on(this._headers,n[i],this._headerEventHandler);break;case"disabledItems":this.disableItems(n[i]);break;case"enabledItems":this.enableItems(n[i]);break;case"enabled":this._enabledAction(n[i]);break;case"selectedItemIndex":this._activeTab(n[i]);break;case"heightAdjustMode ":this._setHeightStyle(n[i]);break;case"cssClass":this._changeSkin(n[i]);break;case"showRoundedCorner":this._roundedCorner(n[i]);break;case"customIcon":r=this.model.customIcon;u=n[i];this._headers.find("span."+r.header).removeClass(r.header).addClass(u.header);this._headers.find("span."+r.selectedHeader).removeClass(r.selectedHeader).addClass(u.selectedHeader);break;case"allowKeyboardNavigation":n[i]?(this._off(this.element,"keydown"),this._on(this.element,"keydown",this._keyPress)):this._off(this.element,"keydown");break;case"enableRTL":n[i]?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl");break;case"selectedItems":this._selectedItemsAction(n[i]);break;case"expandSpeed":this.model.expandSpeed=parseInt(this.model.expandSpeed);case"collapseSpeed":this.model.collapseSpeed=parseInt(this.model.collapseSpeed)}},_destroy:function(){this._removeBaseClass();this.element.children(".e-disable").removeClass("e-disable");this.element.removeClass("e-acrdn");this._headers.removeClass("e-active  e-state-disabled");this._contentPanels.removeClass("e-content-active e-disable");n(this._headers.find(".e-icon")).remove()},_init:function(){this._renderControl()},_renderControl:function(){this._headers=this.element.find("> :even");this.element.attr("tabindex",0).attr("role","tablist");this._contentPanels=this._headers.next();this._nagativeIndexCheck(this.model.selectedItemIndex);this._addBaseClass();this._setHeightStyle(this.model.heightAdjustMode);this._renderHeaderIcon();this._wireEvents();this._roundedCorner(this.model.showRoundedCorner);this._selectedItemsAction(this.model.selectedItems);this._enabledAction(this.model.enabled);this._setEnabledItems()},_setEnabledItems:function(){for(var t=0;t<this.getItemsCount();t++)n.inArray(t,this.model.disabledItems)<0&&n.inArray(t,this.model.enabledItems)<0&&this.model.enabledItems.push(t)},_changeSkin:function(n){this.model.cssClass!=n&&this.element.removeClass(this.model.cssClass).addClass(n)},_selectedItemsAction:function(n){if(this.model.enableMultipleOpen)for(var t=0;t<n.length;t++)this._activeTab(n[t],!0);else this.collapseALL&&this.model.collapsible||this._activeTab(this.model.selectedItemIndex,!0)},_enabledAction:function(n){n?this.element.removeClass("e-disable"):this.element.addClass("e-disable")},_addBaseClass:function(){this.element.addClass(this.model.cssClass+" e-widget");this.model.enableRTL&&this.element.addClass("e-rtl");this._headers.addClass(" e-select").attr("role","tab").attr("tabindex",0);this._contentPanels.addClass("e-content").attr("role","tabpanel").attr("aria-hidden",!0).hide();n(this._contentPanels[this.model.selectedItemIndex]).show()},_removeBaseClass:function(){this._headers.removeClass(" e-select");this._contentPanels.removeClass("e-content").show()},_roundedCorner:function(n){n?(this._headers.addClass("e-corner-all"),this.element.find(".e-active").removeClass("e-corner-all").addClass("e-corner-top"),this.element.find(".e-acrdn-content-active").addClass("e-corner-bottom")):this._headers.hasClass("e-corner-all")&&(this._headers.removeClass("e-corner-all"),this.element.find(".e-active").removeClass("e-corner-top"),this.element.find(".e-acrdn-content-active").addClass("e-corner-bottom"))},_nagativeIndexCheck:function(n){var i,t;if(n<0&&this.model.collapsible)for(this.collapseALL=!0,i=this.getItemsCount(),t=0;t<i;t++)this._hideTab(t);else(n<0||n>=this._headers.length)&&(this.model.selectedItemIndex=0)},_activeTab:function(t,i){var r,u,f;if(n.inArray(t,this.model.disabledItems)<0){if(r={activeIndex:t},!0===this._trigger("beforeActive",r))return!1;this.model.enableMultipleOpen||this._hideTab(this.model.selectedItemIndex);this.model.selectedItemIndex=t;u=this.model.customIcon;this._headers.attr("tabindex",0).removeAttr("aria-expanded");this._activeHeader=this._headers.eq(t).addClass("e-active ").attr("aria-selected",!0).attr("tabindex",0).attr("aria-expanded",!0);this._activeHeader.find(".e-icon").removeClass(u.header).addClass(u.selectedHeader);this._addSelectedItems(t);this._ajaxLoad();this._roundedCorner(this.model.showRoundedCorner);r={activeHeader:this._activeHeader,activeIndex:this.model.selectedItemIndex};f=this;this._activeContent=this._activeHeader.next().addClass("e-acrdn-content-active").removeAttr("aria-hidden",!1).slideDown(this.model.expandSpeed,"easeOutQuad",function(){i||f._trigger("active",r)})}},_hideTab:function(n){var t=this.model.customIcon;n>=0&&(this._activeHeader=this._headers.eq(n).removeClass("e-active ").removeAttr("aria-selected").attr("tabindex",0).attr("aria-expanded",!1),this._activeHeader.find(".e-icon").removeClass(t.selectedHeader).addClass(t.header),this._activeHeader.next().removeClass("e-acrdn-content-active").slideUp(this.model.collapseSpeed,"easeOutQuad").attr("aria-hidden",!0),this._deleteSelectedItems(n))},_renderHeaderIcon:function(){var n,i;this._headers.find(".e-icon").length<=0&&(n=this.model.customIcon,n&&(i=t.buildTag("span.e-icon "+n.header).prependTo(this._headers),this.collapseALL&&this.model.collapsible||this._headers.eq(this.model.selectedItemIndex).find(".e-icon").removeClass(n.header).addClass(n.selectedHeader)))},_ajaxLoad:function(){var t=this._activeHeader.find("a[href]"),r,i;t.length>0&&(r=n(this._contentPanels[this.model.selectedItemIndex]),i=n(t).attr("href"),i&&i!=="#"&&this._sendAjaxOptions(r,t[0]))},_sendAjaxOptions:function(t,i){if(!0===this._trigger("ajaxBeforeLoad",{url:i}))return!1;t.addClass("e-load");var r=this,u=n(i).html(),f=i.href.replace("#",""),e={type:this.model.ajaxSettings.type,cache:this.model.ajaxSettings.cache,url:f,data:this.model.ajaxSettings.data,dataType:this.model.ajaxSettings.dataType,contentType:this.model.ajaxSettings.contentType,async:this.model.ajaxSettings.async,success:function(n){try{r._ajaxSuccessHandler(n,t,i,u)}catch(f){}},error:function(){try{r._ajaxErrorHandler(data,i,r.model.selectedItemIndex,u)}catch(n){}}};this._sendAjaxRequest(e)},_sendAjaxRequest:function(t){n.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(t,i,r,u){u!=null&&n(r).html(u);i.removeClass("e-load");i.html(t).addClass("e-acrdn-loaded");var f={data:t,url:r,content:i};this._trigger("ajaxSuccess",f);this._trigger("ajaxLoad",{url:r})},_ajaxErrorHandler:function(n,t){this._trigger("ajaxError",{data:n,url:t});this._trigger("ajaxLoad",{url:t})},_setHeightStyle:function(i){var u=this,r,f;t.Accordion.HeightAdjustMode.Fill==i?(r=this._getDimension(n(this.element).parent(),"height"),n(this.element).parent().css({overflow:"auto"}),u._headers.each(function(){r-=u._getDimension(n(this),"outerHeight")}),f=0,u._headers.next().each(function(){f=Math.max(f,u._getDimension(n(this),"innerHeight")-u._getDimension(n(this),"height"))}).height(r-f).css({overflow:"auto"})):t.Accordion.HeightAdjustMode.Auto==i&&(r=0,u._headers.next().each(function(){r=Math.max(r,u._getDimension(n(this),"outerHeight"))}).height(r),this.maxAutoHeight=r)},_getDimension:function(t,i){var u,f=n(t).parents().andSelf().filter(":hidden"),r={visibility:"hidden",display:"block"},e=[];return f.each(function(){var t={};for(var n in r)t[n]=this.style[n],this.style[n]=r[n];e.push(t)}),u=/(outer)/g.test(i)?n(t)[i](!0):n(t)[i](),f.each(function(n){var i=e[n];for(var t in r)this.style[t]=i[t]}),u},_headerEventHandler:function(t){if(this.model.enabled){t.preventDefault();var r=n(t.currentTarget),i=this._headers.index(r);this.model.enableMultipleOpen&&this._headers.eq(i).hasClass("e-active")?this._hideTab(i):this.model.selectedItemIndex==i&&this.model.collapsible?(this._hideTab(this.model.selectedItemIndex),this.model.selectedItemIndex=-1):this._headers.eq(i).hasClass("e-active")||this._activeTab(i)}},_addSelectedItems:function(t){n.inArray(t,this.model.selectedItems)<0&&this.model.selectedItems.push(t)},_deleteSelectedItems:function(t){n.inArray(t,this.model.selectedItems)>-1&&(position=n.inArray(t,this.model.selectedItems),this.model.selectedItems.splice(position,1))},_deleteDisabledItems:function(t){n.inArray(t,this.model.disabledItems)>-1&&(position=n.inArray(t,this.model.disabledItems),this.model.disabledItems.splice(position,1))},_addEnabledItems:function(t){n.inArray(t,this.model.enabledItems)<0&&this.model.enabledItems.push(t)},_deleteEnabledItems:function(t){n.inArray(t,this.model.enabledItems)>-1&&(position=n.inArray(t,this.model.enabledItems),this.model.enabledItems.splice(position,1))},_keyPress:function(i){if(this.model.enabled){var r,u,f=n(i.target);if((f.hasClass("e-select")||f.hasClass("e-acrdn"))&&(r=this.model.selectedItemIndex),code=i.keyCode?i.keyCode:i.which?i.which:i.charCode,f.hasClass("e-select")||f.hasClass("e-acrdn"))switch(code){case 39:case 40:i.preventDefault();r=r==this.getItemsCount()-1?0:r+1;this._activeTab(r);u=n(this._headers[r]);break;case 38:case 37:i.preventDefault();r=r==0?this.getItemsCount()-1:r-1;this._activeTab(r);u=n(this._headers[r]);break;case 35:i.preventDefault();u=n(this._headers[this.getItemsCount()-1]);this._activeTab(this.getItemsCount()-1);break;case 36:i.preventDefault();u=n(this._headers[0]);this._activeTab(0);break;case 32:case 13:i.preventDefault();n(this._headers[r]).hasClass("e-active")&&(this.model.enableMultipleOpen||this.model.collapsible)?this._hideTab(r):this._activeTab(r)}else if(i.ctrlKey&&!f.hasClass("e-acrdn"))switch(code){case 38:i.preventDefault();r=this._contentPanels.index(f.parent(".e-content"));u=n(this._headers[r]);this._activeTab(r);break;case 33:i.preventDefault();u=n(this._headers[0]);this._activeTab(0);break;case 34:i.preventDefault();u=n(this._headers[this.getItemsCount()-1]);this._activeTab(this.getItemsCount()-1)}t.isNullOrUndefined(u)||(u.addClass("e-focus"),u.focus())}},_wireEvents:function(){this._on(this._headers,this.model.events,this._headerEventHandler);this.model.allowKeyboardNavigation&&this._on(this.element,"keydown",this._keyPress)},_unWireEvents:function(){this._off(this._headers,this.model.events);this.model.allowKeyboardNavigation&&this._off(this.element,"keydown")},enableItems:function(t){if(!this.model.enabled)return!1;if(n.isArray(t))for(var i=0;i<t.length;i++)n(this._headers[t[i]]).removeClass("e-disable"),n(this._contentPanels[t[i]]).removeClass("e-disable"),this._on(n(this._headers[t[i]]),this.model.events,this._headerEventHandler),this.model.enabledItems.push(t[i]),this._deleteDisabledItems(t[i]);else n(this._headers[t]).removeClass("e-disable"),n(this._contentPanels[t]).removeClass("e-disable"),this._on(n(this._headers[t]),this.model.events,this._headerEventHandler),this.model.enabledItems.push(t[i]),this._deleteDisabledItems(t)},disableItems:function(t){if(!this.model.enabled)return!1;if(n.isArray(t))for(var i=0;i<t.length;i++)n(this._headers[t[i]]).addClass("e-disable"),n(this._contentPanels[t[i]]).addClass("e-disable"),n(this._headers[t[i]]).unbind(this.model.events),this.model.disabledItems.push(t[i]),this._deleteEnabledItems(t[i]);else n(this._headers[t]).addClass("e-disable"),n(this._contentPanels[t]).addClass("e-disable"),n(this._headers[t]).unbind(this.model.events),this.model.disabledItems.push(t),this._deleteEnabledItems(t[i])},disable:function(){for(var t=0;t<this._headers.length;t++)n(this._headers[t]).addClass("e-disable"),n(this._contentPanels[t]).addClass("e-disable"),this.model.disabledItems.push(t);this.model.enabledItems=[];this._unWireEvents()},enable:function(){for(var t=0;t<this._headers.length;t++)n(this._headers[t]).removeClass("e-disable"),n(this._contentPanels[t]).removeClass("e-disable");this.model.disabledItems=[];this._setEnabledItems();this._unWireEvents();this._wireEvents()},_selected:function(n){if(!this.model.enabled)return!1;n!=null&&this.model.selectedItemIndex!=n&&this._activeTab(n)},show:function(){if(!this.model.enabled)return!1;this.element.css("visibility","visible")},hide:function(){if(!this.model.enabled)return!1;this.element.css("visibility","hidden")},getItemsCount:function(){if(this._headers)return this._headers.length}});t.Accordion.HeightAdjustMode={Content:"content",Auto:"auto",Fill:"fill"}})(jQuery,Syncfusion),function(n,t){t.widget("ejProgressBar","ej.ProgressBar",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-progressbar",defaults:{text:"",cssClass:"",minValue:0,maxValue:100,value:0,percentage:0,height:null,width:null,enabled:!0,enableRTL:!1,enablePersistence:!1,start:null,complete:null,change:null,create:null,destroy:null},dataTypes:{cssClass:"string",minValue:"number",maxValue:"number",enabled:"boolean",enableRTL:"boolean"},_setValue:function(n){n==null?n=this.model.minValue:typeof n=="string"&&(n=parseFloat(n));this._isNumber(n)?this.model.value=n:this._isNumber(this.model.value)||(this.model.value=this.model.minValue);this.model.value=this._validateRange(this.model.value,this.model.minValue,this.model.maxValue);this._setProgressValue()},_setPercent:function(n){this.initial=this.model.percentage;n==null?n=0:typeof n=="string"&&(n=parseFloat(n));this._isNumber(n)?this.model.percentage=n:this._isNumber(this.model.percentage)||(this.model.percentage=0);this.model.percentage=this._validateRange(this.model.percentage,0,100);this.model.value=this._percentToValue(this.model.percentage);this._increaseProgressWidth()},_validateMinMax:function(){isNaN(this.model.minValue)&&(this.model.minValue=0);isNaN(this.model.maxValue)&&(this.model.maxValue=100)},_setText:function(n){n?this.text?this.text.html(n):(this.text=t.buildTag("div.e-progress-txt",n),this.element.append(this.text),this._setTop()):this.text&&(this.text.remove(),this.text=null)},_changeSkin:function(n){this.model.cssClass!=n&&this.element.removeClass(this.model.cssClass).addClass(n)},enable:function(){this.model.enabled||(this.element.removeClass("e-disable"),this.model.enabled=!0)},disable:function(){this.model.enabled&&(this.element.addClass("e-disable"),this.model.enabled=!1)},getValue:function(){return this.model.value},getPercentage:function(){return this.model.percentage},_init:function(){this._initialize();this._render()},_setModel:function(n){if(!this.model.enabled&&t.isNullOrUndefined(n.enabled))return!1;for(var i in n)switch(i){case"value":this._setValue(n[i]);n[i]=this.model.value;break;case"percentage":this._setPercent(n[i]);n[i]=this.model.percentage;break;case"minValue":isNaN(n[i])||this._minValidation(n[i]);n[i]=this.model.minValue;case"maxValue":isNaN(n[i])||this._maxValidation(n[i]);n[i]=this.model.maxValue;case"text":this._setText(n[i]);break;case"height":this._setHeight(n[i]);this.text&&this._setTop();break;case"width":this._setWidth(n[i]);break;case"enabled":this._disabled(!n[i]);break;case"cssClass":this._changeSkin(n[i]);break;case"enableRTL":this._rtl(n[i])}},_destroy:function(){this.element.empty();this.element.removeClass("e-widget "+this.model.cssClass)},_initialize:function(){this.text=null;this.header=null;this._preVal=null},_render:function(){this.element.addClass("e-widget "+this.model.cssClass).attr("role","ProgressBar");this._setDimention();this.header=t.buildTag("div.e-progress");this.element.append(this.header);this._setText(this.model.text);this._setInitialValue();this._checkProperties()},_setDimention:function(){this._setHeight(this.model.height);this._setWidth(this.model.width)},_setHeight:function(n){n&&this.element.height(n)},_setWidth:function(n){n&&this.element.width(n)},_setInitialValue:function(){this._validateMinMax();this.model.percentage?this._setPercent(this.model.percentage):this._setValue(this.model.value)},_disabled:function(n){n?this.disable():this.enable()},_checkProperties:function(){this.model.enableRTL&&this._rtl(this.model.enableRTL);this._minValidation(this.model.minValue);this._maxValidation(this.model.maxValue);this.model.enabled||this._disabled(!0)},_rtl:function(n){n?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_minValidation:function(n){this.model.maxValue&&this.model.maxValue<n&&(this.model.maxValue=n);this.model.value<n&&(this.model.value=n);this.model.minValue=n;this._setProgressValue()},_maxValidation:function(n){this.model.minValue&&this.model.minValue>n&&(this.model.minValue=n);this.model.value>n&&(this.model.value=n);this.model.maxValue=n;this._setProgressValue()},_setTop:function(){var n=(this.element.height()-this.text.height())/2;this.text.css("top",Math.floor(n))},_increaseProgressWidth:function(){this.header.css("width",this.model.percentage+"%");this.initial==0&&this.model.percentage!=this.initial&&this._raiseEvent("start");this._preVal!=this.model.value&&(this._preVal=this.model.value,n(this.header).attr("aria-label",this.model.percentage),this._raiseEvent("change"),this.model.percentage==100&&this._raiseEvent("complete"))},_raiseEvent:function(n){this._trigger(n,{value:this.model.value,percentage:this.model.percentage})},_setProgressValue:function(){this.initial=this.model.percentage;this.model.percentage=this._valueToPercent(this.model.value);this._increaseProgressWidth()},_isNumber:function(n){return typeof n=="number"&&!isNaN(n)},_validateRange:function(n,t,i){return n<t?t:n>i?i:n},_valueToPercent:function(n){return this.model.maxValue<=this.model.minValue?100:(n=this._validateRange(n,this.model.minValue,this.model.maxValue),100*(n-this.model.minValue)/(this.model.maxValue-this.model.minValue))},_percentToValue:function(n){if(this.model.maxValue<=this.model.minValue)return this.model.minValue;if(n>=0&&n<=100){var t=this.model.maxValue-this.model.minValue,i=t*n/100;n=i+this.model.minValue}else n<0?n=this.model.minValue:n>100&&(n=this.model.maxValue);return n}})}(jQuery,Syncfusion),function(n,t){t.widget("ejRating","ej.Rating",{_rootCSS:"e-rating",element:null,model:null,validTags:["input"],_setFirst:!1,defaults:{maxValue:5,minValue:0,value:1,allowReset:!0,shapeWidth:23,shapeHeight:23,orientation:"horizontal",incrementStep:1,readOnly:!1,enabled:!0,showTooltip:!0,precision:"full",cssClass:"",width:null,height:null,enablePersistence:!1,create:null,click:null,mouseover:null,mouseout:null,change:null,destroy:null},dataTypes:{maxValue:"number",minValue:"number",allowReset:"boolean",shapeWidth:"number",shapeHeight:"number",orientation:"enum",incrementStep:"number",readOnly:"boolean",precision:"enum",enabled:"boolean"},observables:["value"],value:t.util.valueFunction("value"),_setModel:function(n){if(!this.model.enabled&&t.isNullOrUndefined(n.enabled))return!1;for(var i in n)switch(i){case"allowReset":n[i]?this._showResetButton():this._hideResetButton();break;case"value":this.setValue(t.util.getVal(n[i]));break;case"enabled":this._enabledAction(n[i]);break;case"cssClass":this._changeSkin(n[i]);break;case"height":this._mainDiv.height(n[i]);break;case"width":this._mainDiv.width(n[i]);break;case"readOnly":this._unWireEvents();break;case"orientation":this.model.orientation=n[i];this.refresh();break;case"maxValue":this.model.maxValue=n[i];this.refresh();break;case"minValue":this.model.minValue=n[i];this.refresh();break;case"incrementStep":this.model.incrementStep=n[i];this.refresh();break;case"shapeWidth":this.model.shapeWidth=n[i];this.refresh();break;case"shapeHeight":this.model.shapeHeight=n[i];this.refresh()}},_destroy:function(){this.element.show();this._unWireEvents();this._mainDiv.remove()},_init:function(){this._initialize()},_initialize:function(){this.element.hide();this._mainDiv=t.buildTag("div.e-rating e-widget "+this.model.cssClass,"",{},{tabindex:"0",role:"group","aria-label":"Rating"});t.isNullOrUndefined(this.model.width)||this._mainDiv.width(this.model.width);t.isNullOrUndefined(this.model.height)||this._mainDiv.height(this.model.height);this._mainDiv.insertBefore(this.element);this.model.orientation==t.Orientation.Horizontal?this._mainDiv.addClass("e-horizontal"):this._mainDiv.addClass("e-vertical");this.model.allowReset&&!this.model.readOnly&&this._createReset();this._validation();this._renderShape();this._shapes=this._mainDiv.find("div.e-shape");this._wireEvents();this._CurrentIndex=0;this._initCurrentValue();this._enabledAction(this.model.enabled)},_changeSkin:function(n){this.model.cssClass!=n&&this._mainDiv.removeClass(this.model.cssClass).addClass(n)},_enabledAction:function(n){n?this._mainDiv.removeClass("e-disable"):this._mainDiv.addClass("e-disable")},_validation:function(){this.model.incrementStep<1?this.model.incrementStep=1:this.model.incrementStep>this.model.maxValue&&(this.model.incrementStep=this.model.maxValue)},_createReset:function(){this._mainDiv.find("div.e-reset").length<=0?t.buildTag("div.e-reset","",{width:this.model.shapeWidth+"px",height:this.model.shapeHeight,title:"Reset"},{role:"button","aria-label":"reset","aria-hidden":!1}).appendTo(this._mainDiv):this._mainDiv.find("div.e-reset").show()},_renderShape:function(){var n=Math.round(this.model.maxValue/this.model.incrementStep),o=Math.round(this.model.minValue/this.model.incrementStep),i,r,u,f,e;if(this.model.orientation==t.Rating.Orientation.Horizontal?(i=(n+1)*this.model.shapeWidth,r=this.model.shapeHeight):this.model.orientation==t.Rating.Orientation.Vertical&&(i=this.model.shapeWidth,r=this.model.shapeHeight*n),n>0){for(u=t.buildTag("ul.e-ul","",{width:i+"px",height:r},{}),f=o;f<n;f++)e=t.buildTag("li.e-shape-list","",{width:this.model.shapeWidth+"px",height:this.model.shapeHeight},{tabindex:-1,"aria-describedby":this.element.prop("id")+"_tooltip"}),t.buildTag("div.e-shape inactive","",{width:this.model.shapeWidth+"px",height:this.model.shapeHeight}).appendTo(e),e.appendTo(u);u.appendTo(this._mainDiv)}},_initCurrentValue:function(){var r,i;if(t.isNullOrUndefined(this.value())||this.value()=="")this._CurrentIndex=0;else if(this.value()>this.model.minValue)for(r=this.value()/this.model.incrementStep-this.model.minValue/this.model.incrementStep,this._CurrentIndex=r,this._valueRefresh(this._CurrentIndex),i=0;i<r;i++)if(this._shapes[i])n(this._shapes[i]).removeClass("inactive").removeClass("active").addClass("selected");else{this._CurrentIndex=i;break}this.value(this._CurrentIndex)},_valueRefresh:function(i){var r,f,u;if(i=Math.ceil(i),r=(this.value()/this.model.incrementStep).toFixed(1),this.model.orientation==t.Rating.Orientation.Horizontal){for(f=this.model.precision=="exact"?(r%1).toFixed(1):this.model.precision=="half"?r%1>.5?1:.5:1,r=((r%1).toFixed(1)!=0?f:r/this._CurrentIndex)*this.model.shapeWidth,u=0;u<i;u++)n(this._shapes[u]).css({width:this.model.shapeWidth+"px"});this._shapes!=null&&n(this._shapes[i-1]).css({width:r+"px"})}else{for(r=((r%1).toFixed(1)!=0?(r%1).toFixed(1):r/this._CurrentIndex)*this.model.shapeHeight,u=0;u<i;u++)n(this._shapes[u]).css({height:this.model.shapeHeight+"px"});this._shapes!=null&&n(this._shapes[i-1]).css({height:r+"px"})}},_reset:function(){var t;if(!this.model.enabled)return!1;n(this._shapes).removeClass("active").removeClass("selected").addClass("inactive");t=this.value();this.value(0);this._CurrentIndex=0;this.element.value=this._CurrValue;this._valueChanged(t)},_fillExactPrecision:function(i,r){var e=this._shapes.index(i)+this.model.minValue/this.model.incrementStep+1,f=this.model,u;if(f.orientation==t.Rating.Orientation.Horizontal){for(u=0;u<this._shapes.length;u++)u<e?n(this._shapes[u]).css({width:f.shapeWidth+"px"}):n(this._shapes[u]).css({width:"0px"});n(i).css({width:r+"px"});this.toolTipValue=((e-1)*f.incrementStep+r/f.shapeWidth*f.incrementStep).toFixed(1)}else{for(u=0;u<e;u++)n(this._shapes[u]).css({height:f.shapeHeight+"px"});for(u=e;u<this._shapes.length;u++)n(this._shapes[u]).css({height:"0px"});n(i).css({height:r+"px"});this.toolTipValue=((e-1)*f.incrementStep+r/f.shapeHeight*f.incrementStep).toFixed(1)}},_fillHalfPrecision:function(i,r){var e=this._shapes.index(i)+this.model.minValue/this.model.incrementStep+1,u=this.model,f;if(u.orientation==t.Rating.Orientation.Horizontal){for(f=0;f<this._shapes.length;f++)f<e?n(this._shapes[f]).css({width:u.shapeWidth+"px"}):n(this._shapes[f]).css({width:"0px"});(r+1)%2==0?(r=u.shapeWidth/2,n(i).css({width:r+"px"}),this.toolTipValue=((e-1)*u.incrementStep+r/u.shapeWidth*u.incrementStep).toFixed(1)):(r=u.shapeWidth,n(i).css({width:r+"px"}),this.toolTipValue=((e-1)*u.incrementStep+r/u.shapeWidth*u.incrementStep).toFixed(1))}else{for(f=0;f<this._shapes.length;f++)f<e?n(this._shapes[f]).css({height:this._starHeight+"px"}):n(this._shapes[f]).css({height:"0px"});r<=u.shapeHeight/2?(r=u.shapeHeight/2,n(i).css({height:r+"px"}),this.toolTipValue=((e-1)*u.incrementStep+r/u.shapeHeight*u.incrementStep).toFixed(1)):(r=u.shapeHeight,n(i).css({height:r+"px"}),this.toolTipValue=((e-1)*u.incrementStep+r/u.shapeHeight*u.incrementStep).toFixed(1))}},_ClickHandler:function(i){var o,u,r,f,e,s;if(this.model.enabled){if(i.target.tagName=="LI"?u=i.target.firstChild:i.target.parentNode.tagName=="LI"&&(u=i.target),u){for(r=this._shapes.index(u)+1,f=0;f<r;f++)this._shapes[f]&&n(this._shapes[f]).removeClass("inactive").removeClass("active").addClass("selected");this._CurrentIndex=r;r=r+this.model.minValue/this.model.incrementStep;e=this.model.incrementStep;s=this.model.orientation==t.Rating.Orientation.Horizontal?((r-1)*e+u.clientWidth/this.model.shapeWidth*e).toFixed(1):((r-1)*e+u.clientHeight/this.model.shapeHeight*e).toFixed(1);o=this.value();this.element.value=s;this.value(s);this._trigger("click",{event:i,value:this.value(),prevValue:o});this._valueChanged(o)}n(i.target).hasClass("e-reset")&&this._reset()}},_MouseOverHandler:function(t){var u,r,f,e,i;if(this.model.enabled){if(r=t.target,t.type=="touchmove"&&(f=t.originalEvent.changedTouches[0],r=document.elementFromPoint(f.pageX,f.pageY)),r.tagName=="LI")u=r.firstChild;else if(r.parentNode.tagName=="LI")u=r;else return!1;for(e=this._shapes.index(u)+1,i=0;i<=this._shapes.length;i++)this._shapes[i]&&(i<e?n(this._shapes[i]).removeClass("inactive").removeClass("selected").addClass("active"):n(this._shapes[i]).removeClass("active").removeClass("selected").addClass("inactive"));this._trigger("mouseover",{event:t,index:e,value:this.value()})}},_MouseOutHandler:function(i){var u,r;if(!this.model.readOnly&&this.model.enabled){if(u=this._CurrentIndex,u!=0)for(r=0;r<this._shapes.length;r++)this._shapes[r]&&(r<u?n(this._shapes[r]).removeClass("active").removeClass("inactive").addClass("selected"):n(this._shapes[r]).removeClass("active").addClass("inactive"));else n(this._shapes).removeClass("active").addClass("inactive");this.model.precision!==t.Rating.Precision.Full&&this._valueRefresh(u);this._trigger("mouseout",{event:i,value:this.value()})}this._hideTooltip(1e3)},_MouseMoveHandler:function(i){var u,f,r,e;if(!this.model.readOnly&&this.model.enabled){if(r=i.target,i.type=="touchmove"&&(e=i.originalEvent.changedTouches[0],r=document.elementFromPoint(e.pageX,e.pageY)),r.tagName=="LI")u=r.firstChild;else if(r.parentNode.tagName=="LI")u=r;else return!1;f=this.model.orientation==t.Rating.Orientation.Horizontal?t.isNullOrUndefined(i.offsetX)?i.pageX-n(r).offset().left:i.offsetX+1:t.isNullOrUndefined(i.offsetY)?i.pageY-n(r).offset().top:i.offsetY+1;this.toolTipValue=(this.model.minValue+(this._shapes.index(u)+1))*this.model.incrementStep;this.model.precision==t.Rating.Precision.Exact?this._fillExactPrecision(u,f):this.model.precision==t.Rating.Precision.Half&&this._fillHalfPrecision(u,Math.round(f))}else this.toolTipValue=(this.value()==null||this.value()==""?0:this.value())+" / "+this.model.maxValue;n(i.target).attr("aria-label",this.toolTipValue);this._showhideTooltip(i.target)},_showTooltip:function(i){this.model.showTooltip&&(n(".e-tooltip").remove(),this.tooltip=t.buildTag("div#"+this.element.prop("id")+"_tooltip.e-tooltip "+this.model.cssClass+" e-corner-all","",{},{role:"tooltip"}),n("body").append(this.tooltip),this._isTooltip=!0,this._setTooltipPosition(i))},_hideTooltip:function(t){this.model.showTooltip&&(n(this.tooltip).fadeOut(t,function(){n(".e-tooltip").remove()}),this._isTooltip=!1)},_showhideTooltip:function(n){this.model.showTooltip&&this._showTooltip(n)},_setTooltipPosition:function(t){if(this.model.showTooltip){this._updateTooltipValue();var f,e,r,u,i,o=5;i=n(t);this.model.orientation=="vertical"?(u=(this.tooltip.outerHeight()-i.outerHeight())/2,r=i.outerWidth()+o,f=i.offset().top-u,e=i.offset().left+r):(r=(this.tooltip.outerWidth()-i.outerWidth())/2,u=this.tooltip.outerHeight()+o,f=i.offset().top-u,e=i.offset().left-r);this.tooltip.css({top:f,left:e})}},_updateTooltipValue:function(){this.tooltip[0].innerHTML=this.toolTipValue},_wireEvents:function(){this.model.readOnly||(this._on(this._mainDiv,"mousedown",this._ClickHandler),this._on(this._mainDiv.find("li"),"mouseenter touchmove",this._MouseOverHandler));this._on(this._mainDiv.find("li"),"mouseleave touchend",this._MouseOutHandler);this._on(this._mainDiv.find("li"),t.eventType.mouseMove,this._MouseMoveHandler)},_unWireEvents:function(){this._mainDiv.find("li").unbind("mouseenter touchmove");this._mainDiv.find("li").unbind("mouseleave touchend");this._mainDiv.unbind("mousedown");this.model.precision!==t.Rating.Precision.Full&&this._mainDiv.find("li").unbind(t.eventType.mouseMove)},_valueChanged:function(n){this._trigger("change",{value:this.value(),prevValue:n})},reset:function(){this._reset()},show:function(){if(!this.model.enabled)return!1;this._mainDiv.css("visibility","visible")},hide:function(){if(!this.model.enabled)return!1;this._mainDiv.css("visibility","hidden")},_showResetButton:function(){if(!this.model.enabled)return!1;this._createReset()},_hideResetButton:function(){if(!this.model.enabled)return!1;this._mainDiv.find("div.e-reset").hide()},getValue:function(){return this.value()==null||this.value()==""?"":this.value()},setValue:function(t){if(!this.model.enabled)return!1;t!=null&&(this.value(t),n(this._shapes).removeClass("selected").addClass("inactive"),this._initCurrentValue())},refresh:function(){this._destroy();this._unWireEvents();this._initialize()}});t.Rating.Precision={Full:"full",Half:"half",Exact:"exact"};t.Rating.Orientation={Horizontal:"horizontal",Vertical:"vertical"}}(jQuery,Syncfusion),function(n,t,i){t.widget("ejSplitter","ej.Splitter",{element:null,model:null,validTags:["div","span"],_rootCSS:"e-splitter",_setFirst:!1,defaults:{cssClass:"",orientation:"horizontal",properties:[],height:null,width:null,enableAutoResize:!1,enableRTL:!1,animationSpeed:300,beforeExpandCollapse:null,expandCollapse:null,resize:null,create:null,destroy:null},dataTypes:{cssClass:"string",orientation:"enum",properties:"data",enableAutoResize:"boolean",enableRTL:"boolean",animationSpeed:"number"},_init:function(){this._initialize();this._render();this._wireEvents(this.model.enableAutoResize)},_setModel:function(n){for(var t in n)switch(t){case"cssClass ":this._changeSkin(n[t]);break;case"enableAutoResize":this._windowResizing(n[t]);break;case"enableRTL":this._rtl(n[t]);break;case"orientation":this._setOrientation(n[t])}},refresh:function(){this._setPanesSize();this._getPanesPercent()},collapse:function(n){this._clickArrow(n,!0,!0)},expand:function(n){this._clickArrow(n,!1,!0)},_clickArrow:function(t,i,r){if(this._inMovement||t<0||t>this.panes.length)return!1;var u,e=i?"e-collapse":"e-expand",f=this.element.children(".e-splitbar:not(.e-shadowbar)");if(u=t==f.length?this._clickArrow(t-1,!i,!1):n(f[t]).children("."+e),r)u.css("display")!="none"&&u.mousedown();else return u},addItem:function(i,r,u){var o=this.panes.length,r,f,d,c,b,h,k,nt;if(u=this._getNumber(u),t.isNullOrUndefined(u)&&(u=o),u<0||u>o)return"";r=this._getPaneProperty(r);f=t.buildTag("div.e-pane e-"+this.model.orientation.substr(0,1)+"-pane");this.element.append(f[this.containerCss](r.paneSize));d=r.paneSize=f[this.containerCss]();f.remove();var l=u,g=o,e,a,v,y,s={},p=0,w=!1;for(c=d+this._bar,a=0;a<2;a++){for(e=l;e<g;e++)if(b=n(this.panes[e])[this.containerCss](),h=b-this.model.properties[e].minSize,h>=c-p){s[e]=b-(c-p);w=!0;break}else h>0&&(s[e]=this.model.properties[e].minSize,p+=h);if(w)break;else g=l,l=0}if(!w)return"";for(k in s)n(this.panes[k])[this.containerCss](s[k]);return u==o?(v="insertBefore",y=1,f.insertAfter(n(this.panes[u-1]))):(v="insertAfter",y=0,f.insertBefore(n(this.panes[u]))),this.model.properties.splice(u,0,r),this.panes.splice(u,0,f),nt=this._createSplitBar(u-y),nt[v](f),f.append(i),this._updateModel(),f},removeItem:function(i){var u=this.panes.length-1,f,r,e,o;if(i=this._getNumber(i),t.isNullOrUndefined(i)&&(i=u),i<0||i>u)return null;f=n(this.panes[i]);o=f[this.containerCss]()+this._bar;f.remove();e=this.element.children(".e-splitbar:not(.e-shadowbar)");i==u?(r=n(this.panes[i-1]),n(e[i-1]).remove()):(r=n(this.panes[i+1]),n(e[i]).remove());r[this.containerCss](r[this.containerCss]()+o);this._removeArrays(i);this._updateModel()},_removeArrays:function(n){this.model.properties.splice(n,1);this.panes.splice(n,1);this.oldPaneSize.splice(n,1);this.oldPanePercent.splice(n,1);this._sizePercent.splice(n,1)},_getNumber:function(n){return n=parseFloat(n),isNaN(n)?null:n},_updateModel:function(){for(var t=0;t<this.panes.length;t++)this.model.properties[t].paneSize=n(this.panes[t])[this.containerCss]();this._getPanesPercent()},_getPaneProperty:function(t){return n.extend({paneSize:10,minSize:10,maxSize:null,collapsible:!0,resizable:!0},t)},_changeSkin:function(n){this.element.removeClass(this.model.cssClass).addClass(n)},_windowResizing:function(n){n?this._wireEvents(n):this._unWireEvents()},_setOrientation:function(n){this._unWireEvents();this._destroy();this.model.orientation=n;this._init()},_destroy:function(){this.element.removeClass("e-widget "+this.model.cssClass+" e-"+this.model.orientation);this.element.children(".e-splitbar").remove();this.element.children(".e-pane").removeClass("e-pane e-"+this.model.orientation.substr(0,1)+"-pane").height("").width("")},_initialize:function(){this.panes=[];this.oldPaneSize=[];this.oldPanePercent=[];this.shadowBar=null;this._inMovement=!1;this.containerCss=this.model.orientation=="horizontal"?"width":"height";this.displayCss=this.model.orientation=="horizontal"?"left":"top";this._bar=7},_render:function(){this.element.addClass("e-widget "+this.model.cssClass+" e-"+this.model.orientation).attr("data-role","splitter");for(var i=this.element[0],t=0,r=0;t<i.children.length;t++)n(i.children[t]).addClass("e-pane e-"+this.model.orientation.substr(0,1)+"-pane"),this.panes.push(i.children[t]);this._setPanesProperty();this._insertSplitBar();this._setDimentions();this._setPanesSize();this._getPanesPercent();this._checkProperties()},_setPanesProperty:function(){for(var n=0;n<this.panes.length;n++)this.model.properties[n]!=i?(this.model.properties[n].paneSize=this.model.properties[n].paneSize==i?"0px":this.model.properties[n].paneSize,this.model.properties[n].minSize=isNaN(parseFloat(this.model.properties[n].minSize))?10:parseFloat(this.model.properties[n].minSize),this.model.properties[n].maxSize=isNaN(parseFloat(this.model.properties[n].maxSize))?null:parseFloat(this.model.properties[n].maxSize),this.model.properties[n].collapsible=this.model.properties[n].collapsible!=!1?!0:!1,this.model.properties[n].resizable=this.model.properties[n].resizable!=!1?!0:!1):this.model.properties.push({paneSize:"0px",minSize:10,maxSize:null,collapsible:!0,resizable:!0})},_insertSplitBar:function(){if(this.panes.length>1)for(var t,n=0;n<this.panes.length-1;n++)t=this._createSplitBar(n),t.insertAfter(this.panes[n])},_createSplitBar:function(n){var r=this.model.orientation.substr(0,1),u,f,i,e=!1;return i=t.buildTag("span.e-box e-splitbar e-"+r+"-bar").attr("aria-expanded",!0),this.model.properties[n].collapsible&&this.model.properties[n+1].collapsible&&(u=t.buildTag("span.e-icon e-collapse e-"+r+"-arrow "+r+"-backward"),i.append(u),f=t.buildTag("span.e-icon e-expand e-"+r+"-arrow "+r+"-forward"),i.append(f),e=!0,this._on(u,"mousedown",this._collapseArrowClick),this._on(f,"mousedown",this._expandArrowClick)),this.model.properties[n].resizable&&this.model.properties[n+1].resizable&&(i.addClass("e-resize"),e=!0,this._on(i,t.eventType.mouseDown,this._mouseDownOnDivider)),e?(i.attr({role:"separator",tabindex:"0"}),this._on(i,"focus focusout",this._focusOnDivider)):i.attr({role:"presentation"}),i},_getPanesPercent:function(){this._sizePercent=[];for(var r=this.element[this.containerCss](),i=r-(this.panes.length-1)*this._bar,t=0;t<this.panes.length;t++)n(this.panes[t]).hasClass("collapsed")||(this.oldPaneSize[t]=n(this.panes[t])[this.containerCss]()),this.oldPanePercent[t]=this._convertToPercent(i,this.oldPaneSize[t]),this._sizePercent.push(this._convertToPercent(i,n(this.panes[t])[this.containerCss]()))},_setDimentions:function(){this.model.height&&this.element.css("height",this.model.height);this.model.width&&this.element.css("width",this.model.width)},_checkProperties:function(){this.model.enableRTL&&this._rtl(this.model.enableRTL);this._prevSize=this.element[this.containerCss]()},_rtl:function(n){n?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_setPanesSize:function(){var r=this.containerCss,l=0,t=0,f=this.element[r](),p=!1,e=this._bar,v=[],o,i,u=this.panes.length,a,w,s,h,c,y;if(u>1)for(i=0;i<u;i++)n(this.panes[i]).css(r,this.model.properties[i].paneSize),e=i==u-1?0:e,o=Math.round(n(this.panes[i])[r]()),o<=0?(l++,v.push(i),t+=e):p?(n(this.panes[i]).css(r,0),t+=o+e,this.model.properties[i].paneSize=0):(t+=o+e,t>f&&(t-=o-e,a=f-t,w=u-i-1,a-=w*e,n(this.panes[i]).css(r,a),p=!0,t+=a+e),this.model.properties[i].paneSize=o);else u==1&&(n(this.panes[0]).css(r,"100%"),t=f);if(u>1&&t!=f)if(h=n(this.panes[u-1]),t>f)s=t-f,h.css(r,s);else if(t<f)if(s=f-t,l>0)for(y=Math.round(s/l),c=0;c<l;c++)n(this.panes[v[c]]).css(r,y),this.model.properties[v[c]].paneSize=y;else h.css(r,Math.round(h[r]()+s)),this.model.properties[u-1].paneSize=h[r]();u>1&&this._checkPaneSize()},_getUnit:function(n){return n=="px"?"px":n=="pt"?"pt":n.substr(1)=="%"?"%":"px"},_getNormalValue:function(n){var i,t,r,u;return this.model.orientation=="vertical"?(i=n.y-this.element.offset().top,t=i/this.element.outerHeight(),r=this.element.height()):(i=n.x-this.element.offset().left,t=i/this.element.outerWidth(),r=this.element.width()),t>1&&(t=1),t<0&&(t=0),u=t*r,this._trimValue(u)},_trimValue:function(n){var t,i,r;return t=1,i=n%t,r=n-i,Math.abs(i)*2>=t&&(r+=i>0?t:-t),parseFloat(r.toFixed(5))},_getSplitbarIndex:function(){return this.element.children(".e-splitbar:not(.e-shadowbar)").index(this.currentSplitBar)},_paneResize:function(){var t,i,r,u,f,e,o,s;if(this.shadowBar==null)return!1;this.currentSplitBar=this.shadowBar.next();e=this._getSplitbarIndex();i=this.shadowBar.prev();r=this.currentSplitBar.next();u=e;f=e+1;t=this.shadowBar.offset()[this.displayCss];t=t-this.currentSplitBar.offset()[this.displayCss];n(i).css(this.containerCss,t+n(i)[this.containerCss]()+"px");n(r).css(this.containerCss,n(r)[this.containerCss]()-t+"px");this.oldPaneSize[u]=n(i)[this.containerCss]();this.oldPaneSize[f]=n(r)[this.containerCss]();this.shadowBar.remove();this._checkPaneSize();o={item:i,index:u,size:this.oldPaneSize[u]};s={item:r,index:f,size:this.oldPaneSize[f]};this._updateModelValue(o,s);this._trigger("resize",{prevPane:o,nextPane:s,splitbarIndex:e})},_checkPaneSize:function(){for(var t=0,f,r,u=this.panes.length,e,o,i=0;i<u;i++)f=n(this.panes[i])[this.containerCss](),t+=f+this._bar;t-=this._bar;r=this.element[this.containerCss]();t!=r&&(e=r-t,o=n(this.panes[u-1])[this.containerCss](),n(this.panes[u-1]).css(this.containerCss,Math.floor(o+e)))},_maxminDraggableRange:function(n){var l,a,v,y,o,r,u,f,e,t,i,s,h,c;l=this.shadowBar.prev();this.currentSplitBar=this.shadowBar.next();a=this.currentSplitBar.next();v=l[this.containerCss]();y=a[this.containerCss]();o=this.displayCss=="left"?this.currentSplitBar[0].offsetLeft:this.currentSplitBar[0].offsetTop;r=o-v;u=y+o;c=this._getSplitbarIndex();f=c;e=c+1;t=this.model.properties[f].maxSize;i=this.model.properties[e].maxSize;t=t!=null?parseInt(t,10):null;i=i!=null?parseInt(i,10):null;this.model.properties[f].minSize=parseInt(this.model.properties[f].minSize,10);this.model.properties[e].minSize=parseInt(this.model.properties[e].minSize,10);s=this.model.properties[f].minSize;h=this.model.properties[e].minSize;this.shadowBar.removeClass("e-end-indicaton");n>u-h?(this.resizedPosition=u-h,this.shadowBar.addClass("e-end-indicaton")):n<r+s&&(this.resizedPosition=r+s,this.shadowBar.addClass("e-end-indicaton"));t!=null&&n>r+t&&(this.resizedPosition=r+t,this.shadowBar.addClass("e-end-indicaton"));i!=null&&n<u-i&&(this.resizedPosition=u-i,this.shadowBar.addClass("e-end-indicaton"))},_collapseArrowClick:function(t){var f,e,u,i,c,o,s,v,r,w,y,l,a,p,h;if(this.shadowBar==null){if(f=n(t.target),this._inMovement=!0,this.currentSplitBar=f.parent(),r={},w=this.panes.length,e=this._getSplitbarIndex(),u=this.currentSplitBar.prev(),i=this.currentSplitBar.next(),c=e,o=e+1,s=u[this.containerCss](),v=i[this.containerCss](),y=this,l={item:u,index:c,size:s},a={item:i,index:o,size:v},this._raiseEvent("beforeExpandCollapse",l,a,e))return!1;if(i.hasClass("collapsed")){if(s<this.oldPaneSize[o])return f.addClass("e-end-indicaton"),this._inMovement=!1,n(document).bind("mouseup",n.proxy(this._mouseUpOnArrow,this)),!1;u.removeClass("expanded");i.removeClass("collapsed");f.parent().addClass("e-resize");f.siblings().css("display","block");o!=w-1&&(h=i.next(),h.find(".e-collapse").css("display","block"),h.next().hasClass("collapsed")||(h.addClass("e-resize"),h.attr("aria-expanded",!0)));r[this.containerCss]=this.oldPaneSize[o];i.animate(r,this.model.animationSpeed);r[this.containerCss]=s-this.oldPaneSize[o];u.animate(r,this.model.animationSpeed,function(){y._raiseEvent("expandCollapse",l,a,e)})}else this.oldPaneSize[c]=s,u.addClass("collapsed"),i.addClass("expanded"),this.currentSplitBar.attr("aria-expanded",!1),f.parent().removeClass("e-resize"),f.css("display","none"),c!=0&&(p=u.prev(),p.find(".e-expand").css("display","none"),p.removeClass("e-resize")),r[this.containerCss]=0,u.animate(r,this.model.animationSpeed),r[this.containerCss]=s+v,i.animate(r,this.model.animationSpeed,function(){y._raiseEvent("expandCollapse",l,a,e)})}},_expandArrowClick:function(t){var f,e,i,u,o,h,y,s,r,w,p,c,l,a,v;if(this.shadowBar==null){if(f=n(t.target),this._inMovement=!0,this.currentSplitBar=f.parent(),r={},w=this.panes.length,e=this._getSplitbarIndex(),i=this.currentSplitBar.prev(),u=this.currentSplitBar.next(),o=e,h=e+1,y=i[this.containerCss](),s=u[this.containerCss](),p=this,c={item:u,index:h,size:s},l={item:i,index:o,size:y},this._raiseEvent("beforeExpandCollapse",c,l,e))return!1;if(i.hasClass("collapsed")){if(s<this.oldPaneSize[o])return f.addClass("e-end-indicaton"),this._inMovement=!1,n(document).bind("mouseup",n.proxy(this._mouseUpOnArrow,this)),!1;i.removeClass("collapsed");u.removeClass("expanded");this.currentSplitBar.attr("aria-expanded",!0);f.parent().addClass("e-resize");f.siblings().css("display","block");o!=0&&(v=i.prev(),v.find(".e-expand").css("display","block"),v.prev().hasClass("collapsed")||v.addClass("e-resize"));r[this.containerCss]=this.oldPaneSize[o];i.animate(r,this.model.animationSpeed);r[this.containerCss]=s-this.oldPaneSize[o];u.animate(r,this.model.animationSpeed,function(){p._raiseEvent("expandCollapse",c,l,e)})}else this.oldPaneSize[h]=s,i.addClass("expanded"),u.addClass("collapsed"),f.parent().removeClass("e-resize"),f.css("display","none"),h!=w-1&&(a=u.next(),a.find(".e-collapse").css("display","none"),a.removeClass("e-resize"),a.attr("aria-expanded",!1)),r[this.containerCss]=y+s,i.animate(r,this.model.animationSpeed),r[this.containerCss]=0,u.animate(r,this.model.animationSpeed,function(){p._raiseEvent("expandCollapse",c,l,e)})}},_raiseEvent:function(n,t,i,r){return n=="expandCollapse"&&(this._inMovement=!1,this._updateModelValue(t,i)),this._trigger(n,{collapsed:t,expanded:i,splitbarIndex:r})},_updateModelValue:function(n,t){this.model.properties[n.index].paneSize=n.item[this.containerCss]();this.model.properties[t.index].paneSize=t.item[this.containerCss]();this._getPanesPercent()},_mouseUpOnArrow:function(){this.element.find(".e-end-indicaton").removeClass("e-end-indicaton");n(document).unbind("mouseup",n.proxy(this._mouseUpOnArrow,this))},_keydownOnDivider:function(t){var i=t.keyCode,u,r;if(i==37||i==38||i==39||i==40){if(t.preventDefault(),u=n(t.data.target),t.ctrlKey)this.shadowBar==null&&(this.currentSplitBar=u,r=this._getSplitbarIndex(),this.model.orientation=="vertical"?t.keyCode==38?this.collapse(r):t.keyCode==40&&this.expand(r):t.keyCode==37?this.collapse(r):t.keyCode==39&&this.expand(r));else if(u.hasClass("e-resize")){var e=this.shadowBar!=null?this.shadowBar:u,f=e.offset(),o={pageX:f.left,pageY:f.top};n.extend(!0,t,o);(this.model.orientation=="vertical"&&(t.keyCode==38||t.keyCode==40)||this.model.orientation=="horizontal"&&(t.keyCode==37||t.keyCode==39))&&(t.keyCode==38?t.pageY-=5:t.keyCode==40?t.pageY+=5:t.keyCode==37?t.pageX-=5:t.keyCode==39&&(t.pageX+=5),this._mouseMoveOnDivider(t))}}else i==13?(t.preventDefault(),this._mouseUpOnDivider()):i==27&&(t.preventDefault(),this.shadowBar!=null&&this.shadowBar.remove(),this.shadowBar=null,this._mouseUpOnDivider(),this.element.children(".e-splitbar.e-hover").focusout())},_focusOnDivider:function(t){t.type=="focus"?n(t.target).hasClass("e-hover")||(n(t.target).addClass("e-hover"),n(document).bind("keydown",{target:t.target},n.proxy(this._keydownOnDivider,this))):(this.element.children(".e-splitbar.e-hover").removeClass("e-hover"),this._mouseUpOnDivider(),n(document).unbind("keydown",n.proxy(this._keydownOnDivider,this)))},_mouseDownOnDivider:function(i){i.preventDefault();var r=n(i.target);r.hasClass("e-splitbar")&&r.hasClass("e-resize")?(r.hasClass("e-hover")||r.focus(),n(document).bind(t.eventType.mouseMove,{target:i.target},n.proxy(this._mouseMoveOnDivider,this)),n(document).bind(t.eventType.mouseUp,n.proxy(this._mouseUpOnDivider,this)),n(document).bind("mouseleave",n.proxy(this._mouseUpOnDivider,this))):(r.hasClass("e-expand")||r.hasClass("e-collapse"))&&r.parent().focus()},_mouseMoveOnDivider:function(t){var r,i;t=t.type=="touchmove"?t.originalEvent.changedTouches[0]:t;r={x:t.pageX,y:t.pageY};this.resizedPosition=this._getNormalValue(r);this.shadowBar==null&&(i=n(t.data.target),this.shadowBar=i.clone().addClass("e-shadowbar").removeClass("e-hover").insertBefore(i),this.shadowBar.children().remove());this._maxminDraggableRange(this.resizedPosition);this.shadowBar.css(this.displayCss,this.resizedPosition)},_mouseUpOnDivider:function(){this._paneResize();n(document).unbind(t.eventType.mouseMove,n.proxy(this._mouseMoveOnDivider,this));n(document).unbind(t.eventType.mouseUp,n.proxy(this._mouseUpOnDivider,this));n(document).unbind("mouseleave",n.proxy(this._mouseUpOnDivider,this));this.shadowBar=null},_windowResized:function(){var i=this.element[this.containerCss](),r,u,t,f;if(this._prevSize==i)return!1;for(r=this.panes.length,u=i-(r-1)*this._bar,this._prevSize=i,t=0;t<r;t++)f=this._convertToPixel(u,this._sizePercent[t]),n(this.panes[t]).css(this.containerCss,f+"px");for(t=0;t<this.oldPaneSize.length;t++)this.oldPaneSize[t]=this._convertToPixel(u,this.oldPanePercent[t]);this._checkPaneSize()},_convertToPercent:function(n,t){return t*100/n},_convertToPixel:function(n,t){return Math.round(n*t/100)},_wireEvents:function(t){t&&n(window).bind("resize",n.proxy(this._windowResized,this))},_unWireEvents:function(){n(window).unbind("resize",n.proxy(this._windowResized,this))}})}(jQuery,Syncfusion),function(n,t,i){t.widget("ejTab","ej.Tab",{_rootCSS:"e-tab",element:null,model:null,validTags:["div","span"],_setFirst:!1,defaults:{collapsible:!1,ajaxSettings:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},disabledItemIndex:[],enabledItemIndex:[],events:"click",idPrefix:"ej-tab-",heightAdjustMode:"content",selectedItemIndex:0,cssClass:"",showCloseButton:!1,showReloadIcon:!1,headerPosition:"top",width:null,height:null,enableRTL:!1,allowKeyboardNavigation:!0,showRoundedCorner:!1,enablePersistence:!1,enabled:!0,ajaxLoad:null,ajaxBeforeLoad:null,ajaxSuccess:null,ajaxError:null,itemActive:null,beforeActive:null,itemAdd:null,itemRemove:null,beforeItemRemove:null,create:null,destroy:null},dataTypes:{cssClass:"string",collapsible:"boolean",events:"string",heightAdjustMode:"enum",selectedItemIndex:"number",enabled:"boolean",ajaxSettings:"data",disabledItemIndex:"data",enabledItemIndex:"data"},_destroy:function(){this._unWireEvents();this._removeBaseClass()},_setModel:function(n){if(!this.model.enabled&&t.isNullOrUndefined(n.enabled))return!1;for(var i in n)switch(i){case"events":this._off(this.anchors,this.model.events);this._on(this.anchors,n[i],this._tabItemClick);break;case"disabledItemIndex":this._disableItems(n[i]);break;case"enabledItemIndex":this._enableItems(n[i]);break;case"enabled":this._enabledAction(n[i]);break;case"selectedItemIndex":this.showItem(n[i]);break;case"heightAdjustMode":this._setTabsHeightStyle(n[i]);break;case"cssClass":this._changeSkin(n[i]);break;case"showRoundedCorner":this._roundedCorner(n[i]);break;case"height":this.element.height(n[i]);break;case"width":this.element.width(n[i]);break;case"allowKeyboardNavigation":n[i]?this._on(this.element,"keydown",this._keyPress):this._off(this.element,"keydown");break;case"headerPosition":this.model.headerPosition=n[i];this.model.headerPosition==t.Tab.Position.Top?(this._removeVerticalClass(),this.itemsContainer.remove(),this.itemsContainer.insertBefore(this.element.find(">div").first()),this.element.find("div.e-active-content").removeClass("e-activebottom")):this.model.headerPosition==t.Tab.Position.Bottom?(this._removeVerticalClass(),this.element.find("div.e-active-content").removeClass("e-activetop")):(this.model.headerPosition==t.Tab.Position.Left||this.model.headerPosition==t.Tab.Position.Right)&&this._removeHeaderClass();this._refresh();break;case"showCloseButton":n[i]?(this._addDeleteIcon(),this._on(this.element.find("div.e-delete"),"click",this._tabDeleteClick)):this.element.find("div.e-delete").remove();break;case"showReloadIcon":n[i]?this._addReloadIcon():this.element.find("div.e-reload").remove();break;case"enableRTL":n[i]?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")}},_init:function(){this.tabId=0;this._initialize()},_changeSkin:function(n){this.model.cssClass!=n&&this.element.removeClass(this.model.cssClass).addClass(n)},_initialize:function(){var i;for(this.element.attr("tabindex",0).attr("role","tablist"),this.itemsContainer=this.element.find("ol,ul").eq(0),this.items=this.itemsContainer.find(" > li:has(a[href])"),this.anchors=this.items.find("a[href]"),n(this.anchors).addClass("e-link"),this._preTabIndex=-1,t.isNullOrUndefined(this.model.width)||this.element.width(this.model.width),t.isNullOrUndefined(this.model.height)||this.element.height(this.model.height),this._setTabPosition(this.model.headerPosition),this.model.showCloseButton&&this._addDeleteIcon(),this.model.showReloadIcon&&this._addReloadIcon(),this._wireEvents(this.model.events),this.contentPanels=[],i=0;i<this.anchors.length;i++){var u=this.anchors[i],r=n(u).attr("href"),f=r.split("#")[0];f&&f===location.toString().split("#")[0]&&(r=a.hash,u.href=r);r&&r!=="#"?this._addContentTag(r,i):this.model.disabledItemIndex.push(i)}this._addBaseClass();this.model.headerPosition=="left"||this.model.headerPosition=="right"||this._setTabsHeightStyle(this.model.heightAdjustMode);this._disableTabs();this._roundedCorner(this.model.showRoundedCorner);this.showItem(this.model.selectedItemIndex);this._enabledAction(this.model.enabled)},_enabledAction:function(n){n?this.element.removeClass("e-disable"):this.element.addClass("e-disable")},_setTabPosition:function(n){n==t.Tab.Position.Bottom?(this.itemsContainer.remove(),this.element.append(this.itemsContainer),this.items.removeClass("e-bottom-line"),this.items.addClass("e-top-line")):n==t.Tab.Position.Top?(this.items.removeClass("e-top-line"),this.items.addClass("e-bottom-line")):(n==t.Tab.Position.Left||n==t.Tab.Position.Right)&&this.items.length>0&&(this.model.height?this.itemsContainer.css("height",this.model.height):this.itemsContainer.css("height","100vh"),this.element.addClass("e-vertical"))},_addDeleteIcon:function(){var n,i;this.element.find("div.e-delete").length<=0&&this.items.length>0&&(n=t.buildTag("div.e-icon e-delete","",{},{role:"presentation"}).css("visibility","hidden"),this.model.headerPosition=="left"||this.model.headerPosition=="right"?(i=this.items.find("a"),n.insertBefore(i)):this.items.append(n))},_addReloadIcon:function(){var n,i;this.element.find("div.e-reload").length<=0&&this.items.length>0&&(n=t.buildTag("div.e-icon e-reload","",{},{role:"presentation"}).css("visibility","hidden"),this.model.headerPosition=="left"||this.model.headerPosition=="right"?(i=this.items.find("a"),n.insertBefore(i)):this.items.append(n))},_addBaseClass:function(){this.element.addClass("e-widget "+this.model.cssClass);this.model.enableRTL&&this.element.addClass("e-rtl");this.model.headerPosition=="left"?this.items.length>0&&this.itemsContainer.addClass("e-left"):this.model.headerPosition=="right"?this.items.length>0&&this.itemsContainer.addClass("e-right"):this.items.length>0&&this.itemsContainer.addClass("e-header");this.items.addClass("e-select e-item").attr("role","tab").attr("tabindex",-1).attr("aria-expanded",!0).attr("aria-selected",!1);n(this.contentPanels).addClass("e-content  e-content-item").attr("role","tabpanel").attr("aria-hidden",!0)},_removeHeaderClass:function(){this.itemsContainer.remove();this.itemsContainer.insertBefore(this.element.find(">div").first());this.items.removeClass("e-bottom-line e-top-line");n(this.contentPanels).removeClass("e-content-bottom e-corner-bottom e-activetop e-activebottom");this.itemsContainer.removeClass("e-header e-left e-right")},_removeVerticalClass:function(){this.element.removeClass("e-vertical");this.itemsContainer.removeClass("e-left e-right").removeAttr("style")},_removeBaseClass:function(){this.element.removeClass("e-tab e-widget");(this.model.headerPosition=="left"||this.model.headerPosition=="right")&&this._removeVerticalClass();this.itemsContainer.removeClass("e-header e-clearall e-select");this.anchors.removeClass("e-link");this.items.removeClass("e-select e-item e-active e-bottom-line e-top-line");n(this.contentPanels).removeClass("e-content  e-content-item");n(this.contentPanels).removeClass("e-content  e-content-item e-content-bottom e-corner-bottom e-activetop e-activebottom e-active-content");n(this.contentPanels).css("display","")},_addContentTag:function(i,r){var f=this._getTabId(i),u=this.element.find("#"+f);u.length||(u=t.buildTag("div.e-content  e-content-item e-content-bottom #"+f).insertAfter(this.contentPanels[r-1]||this.itemsContainer));this.contentPanels=n(this.contentPanels).add(u)},_roundedCorner:function(t){t?(this.element.addClass("e-corner-all"),this.items.addClass("e-corner-top"),n(this.contentPanels).addClass("e-corner-bottom")):this.element.hasClass("e-corner-all")&&(this.element.removeClass("e-corner-all"),this.items.removeClass("e-corner-top"),n(this.contentPanels).removeClass("e-corner-bottom"))},_setTabsHeightStyle:function(i){var u,f,r;if(n(this.contentPanels).height(""),t.Tab.HeightAdjustMode.Fill==i){for(u=this._getDimension(n(this.element).parent(),"height"),n(this.element).parent().css({overflow:"auto"}),r=0;r<this.items.length;r++)u-=this._getDimension(n(this.items[r]),"outerHeight");for(f=0,r=0;r<this.contentPanels.length;r++)f=Math.max(f,this._getDimension(n(this.contentPanels[r]),"innerHeight")-this._getDimension(n(this.contentPanels[r]),"height"));n(this.contentPanels).height(u-f).css({overflow:"auto"})}else if(t.Tab.HeightAdjustMode.Auto==i){for(u=0,r=0;r<this.contentPanels.length;r++)u=Math.max(u,this._getDimension(n(this.contentPanels[r]),"outerHeight"));n(this.contentPanels).height(u);this.maxAutoHeight=u}},_getDimension:function(t,i){var u,f=n(t).parents().andSelf().filter(":hidden"),r={visibility:"hidden",display:"block"},e=[];return f.each(function(){var t={};for(var n in r)t[n]=this.style[n],this.style[n]=r[n];e.push(t)}),u=/(outer)/g.test(i)?n(t)[i](!0):n(t)[i](),f.each(function(n){var i=e[n];for(var t in r)this.style[t]=i[t]}),u},showItem:function(i){var r,u;if(n.inArray(i,this.model.disabledItemIndex)<0&&(r=this,this._preTabIndex=this.model.selectedItemIndex,this.model.selectedItemIndex=i,this.model.selectedItemIndex>=this.contentPanels.length&&(this.model.selectedItemIndex=0),n(this.items[this.model.selectedItemIndex]).attr("aria-expanded",!0).attr("aria-selected",!0).attr("tabindex",0),this.model.selectedItemIndex!=null&&this.model.selectedItemIndex<this.contentPanels.length)){if(this._ajaxLoad(),this.hideItem(this._preTabIndex),i>=0&&this._onBeforeActive(i))return!1;n(this.contentPanels[this.model.selectedItemIndex]).fadeIn(200,"easeOutQuad",function(){if(r._onActive())return!0});this.model.headerPosition=="left"||this.model.headerPosition=="right"?n(this.contentPanels[this.model.selectedItemIndex]).addClass("e-active-content "):u=this.model.headerPosition==t.Tab.Position.Top?"e-activetop":"e-activebottom";n(this.items[this.model.selectedItemIndex]).addClass("e-active").removeClass("e-select");n(this.contentPanels[this.model.selectedItemIndex]).addClass("e-active-content "+u).removeAttr("aria-hidden",!1)}},hideItem:function(i){if(n(this.contentPanels[i]).fadeOut(0),!(this.model.headerPosition=="left"||this.model.headerPosition=="right"))var r=this.model.headerPosition==t.Tab.Position.Top?"e-activetop":"e-activebottom";n(this.items[i]).removeClass("e-active").addClass("e-select");n(this.contentPanels[i]).removeClass("e-active-content "+r).attr("aria-hidden",!0)},_ajaxLoad:function(){var t=n(this.contentPanels[this.model.selectedItemIndex]),i=this.anchors[this.model.selectedItemIndex],r=n(i).attr("href");t.is(":empty")&&r.indexOf("#")!==0&&this._sendAjaxOptions(t,i)},_getTabId:function(n){return n.indexOf("#")?this.model.idPrefix+this._getNextTabId():n.replace("#","")},_getNextTabId:function(){return++this.tabId},_disableTabs:function(){for(var t=0,i;i=this.items[t];t++)n.inArray(t,this.model.disabledItemIndex)>-1&&(n(i).find("a").unbind(this.model.events),this._off(n(i).find("div.e-delete"),"click"),n(this.contentPanels[t]).addClass("e-disable")),n(i)[n.inArray(t,this.model.disabledItemIndex)!=-1&&!n(i).hasClass("e-tab-selected")?"addClass":"removeClass"]("e-disable")},_tabItemClick:function(t){if(this.model.enabled){t.preventDefault();var i;i=this.model.selectedItemIndex==n(this.items).index(n(t.currentTarget))&&this.model.collapsible?-1:n(this.items).index(n(t.currentTarget));i!=this.model.selectedItemIndex&&this.showItem(i)}},_tabDeleteClick:function(t){var r,i;this.model.enabled&&(r=n(t.target),r.hasClass("e-delete")&&(i=n(this.items).index(n(t.target).parent())),i==this.model.selectedItemIndex&&this.items.length>i&&this.model.selectedItemIndex++,this.removeItem(i))},_tabReloadClick:function(t){var i;if(this.model.enabled&&(i=n(t.target),i.hasClass("e-reload"))){var r=this.anchors[this.model.selectedItemIndex],u=n(r).attr("href"),f=n(this.contentPanels[this.model.selectedItemIndex]);u.indexOf("#")!==0?this._sendAjaxOptions(f,r):this.showItem(this.model.selectedItemIndex)}},_sendAjaxOptions:function(t,i){if(this._onBeforeLoad(i))return!0;t.addClass("e-load");var r=this,u=n(i).html(),f=i.href.replace("#",""),e={type:this.model.ajaxSettings.type,cache:this.model.ajaxSettings.cache,url:f,data:this.model.ajaxSettings.data,dataType:this.model.ajaxSettings.dataType,contentType:this.model.ajaxSettings.contentType,async:this.model.ajaxSettings.async,success:function(n){try{r._ajaxSuccessHandler(n,t,i,u)}catch(f){}},error:function(){try{r._ajaxErrorHandler(i,r.model.selectedItemIndex,u)}catch(n){}}};this._sendAjaxRequest(e)},_sendAjaxRequest:function(t){n.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(t,i,r,u){u!=null&&n(r).html(u);i.removeClass("e-load");i.html(t).addClass("e-tab-loaded");var f={data:t,url:r,content:i};return this._trigger("ajaxSuccess",f),this._onLoad(r)?!0:void 0},_ajaxErrorHandler:function(n,t){this._trigger("ajaxError",{data:n,url:t});this._onLoad(t)},_createContentPanel:function(t){return n("<div><\/div>").attr("id",t).addClass("e-content  e-content-item e-content-bottom")},_refresh:function(){this._unWireEvents();this._initialize()},_keyPress:function(i){if(this.model.enabled){var f,r,u=n(i.target);if(code=i.keyCode?i.keyCode:i.which?i.which:i.charCode,u.hasClass("e-link")||u.hasClass("e-item"))switch(code){case 39:case 38:i.preventDefault();this.showItem(this.model.selectedItemIndex+1);break;case 37:case 40:i.preventDefault();this.model.selectedItemIndex!=0?this.showItem(this.model.selectedItemIndex-1):this.model.selectedItemIndex==0&&this.showItem(this.getItemsCount()-1);break;case 35:i.preventDefault();this.showItem(this.getItemsCount()-1);break;case 36:i.preventDefault();this.showItem(0)}else if(i.ctrlKey&&!u.hasClass("e-tab"))switch(code){case 38:i.preventDefault();f=n(this.contentPanels).index(u.parent(".e-content"));r=n(this.items[f]);break;case 33:i.preventDefault();r=n(this.items[0]);this.showItem(0);break;case 34:i.preventDefault();r=n(this._headers[this.getItemsCount()-1]);this.showItem(this.getItemsCount()-1)}t.isNullOrUndefined(r)||(r.addClass("e-focus"),r.focus())}},_hoverHandler:function(t){if(t.preventDefault(),this.model.enabled){var i=n(this.items).index(n(t.target).parent());i==-1&&(i=n(this.items).index(n(t.target)));t.type==="mouseout"?n(this.element.find("div.e-delete")[i]).css("visibility","hidden"):n(this.element.find("div.e-delete")[i]).css("visibility","visible");t.type==="mouseout"?n(this.element.find("div.e-reload")[i]).css("visibility","hidden"):n(this.element.find("div.e-reload")[i]).css("visibility","visible")}},_wireEvents:function(n){this._on(this.items,n,this._tabItemClick);this._on(this.itemsContainer,"mouseover",this._hoverHandler);this._on(this.itemsContainer,"mouseout",this._hoverHandler);this._on(this.element.find("div.e-delete"),"click",this._tabDeleteClick);this._on(this.itemsContainer,"focusin",this._focusIn);this._on(this.itemsContainer,"focusout",this._focusOut);this._on(this.element.find("div.e-reload"),"click",this._tabReloadClick)},_unWireEvents:function(){this._off(this.anchors,this.model.events);this._off(this.element.find("div.e-delete"),"click");this._off(this.itemsContainer,"mouseover",this._hoverHandler);this._off(this.itemsContainer,"mouseout",this._hoverHandler);this._off(this.itemsContainer,"focusin",this._focusIn);this._off(this.itemsContainer,"focusout",this._focusOut);this._off(this.element.find("div.e-reload"),"click")},_disableItems:function(t){if(!this.model.enabled)return!1;if(t!=null){for(var i=0;i<t.length;i++)n.inArray(t[i],this.model.disabledItemIndex)==-1&&this.model.disabledItemIndex.push(t[i]);this.model.disabledItemIndex.sort();this._disableTabs()}},_enableItems:function(i){var u,r;if(!this.model.enabled)return!1;for(u=0;u<i.length;u++){if(r=i[u],t.isNullOrUndefined(this.contentPanels[r])||n(this.contentPanels[r]).removeClass("e-disable"),n.inArray(r,this.model.disabledItemIndex)==-1)return!1;this.model.disabledItemIndex=n.grep(this.model.disabledItemIndex,function(n){return n!=r})}this._refresh();this._disableTabs()},disable:function(){for(var t=[],n=0;n<this.getItemsCount();n++)t.push(n);this._disableItems(t);this.model.enabledItemIndex=[];this._unWireEvents()},enable:function(){for(var i=[],t=0;t<this.getItemsCount();t++)n.inArray(t,this.model.enabledItemIndex)<0&&(this.model.enabledItemIndex.push(t),i.push(t)),this._enableItems(t);this.model.disabledItemIndex=[]},getItemsCount:function(){if(this.items)return this.items.length},addItem:function(n,r,u,f){var e,l,a,s,h,c,o,v;this.model.headerPosition=="left"?this.items.length>=0&&this.itemsContainer.addClass("e-left"):this.model.headerPosition=="right"?this.items.length>=0&&this.itemsContainer.addClass("e-right"):this.items.length==0&&this.itemsContainer.addClass("e-header");e=t.buildTag("li.e-select e-item");t.isNullOrUndefined(f)||(l=t.buildTag("span").addClass(f),e.append(l));a=t.buildTag("a",r,{},{href:n});a.appendTo(e);this.model.showCloseButton&&(s=t.buildTag("div.e-icon e-delete "),e.append(s),this._on(s,"click",this._tabDeleteClick));h=n.indexOf("#")==0?n.replace("#",""):this.model.idPrefix+this._getNextTabId();u===i&&(u=this.anchors.length);c=u>=this.items.length;c?e.appendTo(this.itemsContainer):e.insertBefore(this.items[u]);o=this.element.find("#"+h);o.length||(o=this._createContentPanel(h),c?u>0?o.insertAfter(this.contentPanels.eq(-1)):o.appendTo(this.element):o.insertBefore(this.contentPanels[u]));this.model.selectedItemIndex==u?(this.hideItem[u],this.model.selectedItemIndex+=1):(this.hideItem[u],u<this.model.selectedItemIndex&&(this.model.selectedItemIndex+=1));this._refresh();v={tabHeader:this.anchors[u],tabContent:this.contentPanels[u]};this._onAdd(v)},removeItem:function(t){var i,u,r;if(!this.model.enabled)return!1;if(t!=null&&t>-1&&t<this.items.length){if(this._onBrforeRemove({index:t})===!0)return!1;i=n(this.items[t]).remove();u=n(this.contentPanels[t]).remove();i.hasClass("e-active")&&(this.model.selectedItemIndex=t==0?t:t-1);(t<0||t>=this.anchors.length)&&(this.model.selectedItemIndex=0);(this.model.headerPosition=="left"||this.model.headerPosition=="right")&&this.items.length==1?this._removeVerticalClass():this.items.length==1&&this.itemsContainer.removeClass("e-header");this._refresh();r={removedTab:i};this._onRemove(r)}},show:function(){if(!this.model.enabled)return!1;this.element.css("visibility","visible")},hide:function(){if(!this.model.enabled)return!1;this.element.css("visibility","hidden")},_onBeforeLoad:function(n){var t;return t=this.model.selectedItemIndex==-1&&this.model.collapsible?{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:null,activeIndex:null,url:n}:{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:this.items[this.model.selectedItemIndex],activeIndex:this.model.selectedItemIndex,url:n},this._trigger("ajaxBeforeLoad",t)},_focusIn:function(){!this.model.readOnly&&this.model.allowKeyboardNavigation&&n(this.element).bind("keydown",n.proxy(this._keyPress,this))},_focusOut:function(){n(this.element).unbind("keydown",n.proxy(this._keyPress,this))},_onLoad:function(n){var t;return t=this.model.selectedItemIndex==-1&&this.model.collapsible?{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:null,activeIndex:null,url:n}:{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:this.items[this.model.selectedItemIndex],activeIndex:this.model.selectedItemIndex,url:n},this._trigger("ajaxLoad",t)},_onActive:function(){var n;return n=this.model.selectedItemIndex==-1&&this.model.collapsible?{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:null,activeIndex:null}:{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:this.items[this.model.selectedItemIndex],activeIndex:this.model.selectedItemIndex},this._trigger("itemActive",n)},_onBeforeActive:function(n){if(this.model.beforeActive!=null){var t;return t=this.model.selectedItemIndex==-1&&this.model.collapsible?{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:null,activeIndex:null}:{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:this.items[n],activeIndex:n},this._trigger("beforeActive",t)}},_onAdd:function(n){return this._trigger("itemAdd",n)},_onRemove:function(n){return this._trigger("itemRemove",n)},_onBrforeRemove:function(n){return this._trigger("beforeItemRemove",n)}});t.Tab.HeightAdjustMode={Content:"content",Auto:"auto",Fill:"fill"};t.Tab.Position={Top:"top",Bottom:"bottom",Left:"left",Right:"right"}}(jQuery,Syncfusion),function(n,t){t.widget("ejTagCloud","ej.TagCloud",{element:null,model:null,validTags:["div","span"],_rootCSS:"e-tagcloud",_setFirst:!1,defaults:{cssClass:"",dataSource:null,query:null,fields:{text:"text",url:"url",frequency:"frequency"},showTitle:!0,titleText:"Title",titleImage:null,format:"cloud",enableRTL:!1,minFontSize:"10px",maxFontSize:"40px",mouseover:null,mouseout:null,click:null,create:null,destroy:null},dataTypes:{fields:"object",cssClass:"string",showTitle:"boolean",titleText:"string",titleImage:"string",format:"enum",enableRTL:"boolean",dataSource:"data",fields:"data"},_init:function(){this._initialize();this._render()},_setModel:function(n){for(var t in n)switch(t){case"fields":case"query":case"dataSource":case"minFontSize":case"maxFontSize":this._refreshTagItems(t,n[t]);break;case"showTitle":this._showTitle(n[t]);break;case"titleText":this._title(n[t]);break;case"titleImage":this._titleImage(n[t]);break;case"cssClass ":this._changeSkin(n[t]);break;case"format":this._format(n[t]);break;case"enableRTL":this._rtl(n[t])}},_refreshTagItems:function(n,t){this.model[n]=t;this.ul.empty();this._checkDataBinding()},_showTitle:function(n){n?this._generateTitle():(this.titleText.remove(),this.titleText=null)},_title:function(n){this.titleText&&(n?this.text?this.text.html(n):this._generateTextTag(n):this.text&&(this.text.remove(),this.text=null))},_titleImage:function(n){this.titleText&&(n?this.image?this.image.attr("src",n):this._generateImageTag(n):this.image&&(this.image.remove(),this.image=null))},_changeSkin:function(n){this.model.cssClass!=n&&this.element.removeClass(this.model.cssClass).addClass(n)},insert:function(t){n.trim(t.text)&&this.ul.append(this._generateLi(t,this._getMapper()))},insertAt:function(t,i){n.trim(t.text)&&n(this.ul.children()[i-1]).before(this._generateLi(t,this._getMapper()))},remove:function(t){for(var u=this.ul.children(),r,i=0;i<u.length;i++)r=n(u[i]),r.children()[0].innerHTML==t&&r.remove()},removeAt:function(t){var i=this.ul.children();n(i[t-1]).remove()},_format:function(n){n=="cloud"?(this.ul.removeClass("e-list"),this.ul.addClass("e-cloud")):n=="list"&&(this.ul.removeClass("e-cloud"),this.ul.addClass("e-list"))},_destroy:function(){this.element.removeClass("e-widget "+this.model.cssClass);this.element.empty()},_initialize:function(){this.minFreq=0;this.maxFreq=30;this.ul=null;this.titleText=null;this.image=null;this.text=null},_render:function(){this.element.addClass("e-widget "+this.model.cssClass);this.model.showTitle&&this._generateTitle();this._renderWrapper();this._checkDataBinding();this._checkProperties()},_generateTitle:function(){this.titleText=t.buildTag("div.e-header e-title");this.model.titleImage&&this._generateImageTag(this.model.titleImage);this.model.titleText&&this._generateTextTag(this.model.titleText);this.ul?this.titleText.insertBefore(this.ul):this.element.append(this.titleText)},_generateImageTag:function(t){this.image||(this.image=n('<img class="e-title-img" src="'+t+'" />'));this.text&&!this.model.titleImage?this.image.insertBefore(this.text):this.titleText.append(this.image)},_generateTextTag:function(n){this.text||(this.text=t.buildTag("span",n));this.titleText.append(this.text)},_renderWrapper:function(){var n;n=this.model.format=="list"?"list":"cloud";this.ul=t.buildTag("ul.e-ul e-box e-"+n);this.element.append(this.ul)},_renderItems:function(n){this._generateTagItems(n);this.ul.removeClass("e-load")},_checkProperties:function(){this.model.enableRTL&&this._rtl(this.model.enableRTL)},_rtl:function(n){n?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_checkDataBinding:function(){var n=this.model.dataSource;n!=null&&(this.ul.addClass("e-load"),t.DataManager&&n instanceof t.DataManager?this._initDataSource(n):this._renderItems(n))},_initDataSource:function(n){var t=this,i=n.executeQuery(this._getQuery());i.done(function(n){t._renderItems(n.result)}).fail(function(){t.ul.removeClass("e-load")})},_setAttributes:function(n,t){if(n)for(var i in n)t.attr(i,n[i])},_getQuery:function(){var u;if(t.isNullOrUndefined(this.model.query)){var r=[],i=t.Query(),n=this.model.fields;for(u in n)u!=="tableName"&&r.push(n[u]);r.length>0&&i.select(r);this.model.dataSource.dataSource.url.match(n.tableName+"$")||t.isNullOrUndefined(n.tableName)||i.from(n.tableName)}else i=this.model.query;return i},_generateTagItems:function(n){var t,i=this._getMapper();for(this.minFreq=Math.min.apply(Math,n.map(function(n){return n[i._freq]})),this.maxFreq=Math.max.apply(Math,n.map(function(n){return n[i._freq]})),t=0;t<n.length;t++)this.ul.append(this._generateLi(n[t],i))},_getMapper:function(){var n=this.model.fields,t={_text:null,_freq:null,_url:null};return t._text=n&&n.text?n.text:"text",t._freq=n&&n.frequency?n.frequency:"frequency",t._url=n&&n.url?n.url:"url",t._attr=n&&n.htmlAttr?n.htmlAttr:"htmlAttr",t},_generateLi:function(n,i){var u=t.buildTag("li.e-tagitems"),r;return r=t.buildTag("a.e-txt",n[i._text]||n[i._url],{"font-size":this._calculateFontSize(n[i._freq])},{href:n[i._url]||"#",target:"blank",role:"link"}),u.append(r),this._setAttributes(n[i._attr],u),this._on(r,"mouseenter",this._mouseEnter),this._on(r,"mouseleave",this._mouseLeave),this._on(r,"click",this._mouseClick),u},_mouseEnter:function(t){n(t.target).addClass("hover");this._raiseEvent(t,"mouseover")},_mouseLeave:function(t){n(t.target).removeClass("hover");this._raiseEvent(t,"mouseout")},_mouseClick:function(t){n(t.target).removeClass("hover");this._raiseEvent(t,"click")},_raiseEvent:function(t,i){this._trigger(i,{value:n(t.target).html(),url:n(t.target).attr("href"),eventType:i})},_calculateFontSize:function(n){if(n){var t=2,i,r,u=parseInt(this.model.minFontSize,10),f=parseInt(this.model.maxFontSize,10);return i=(n-this.minFreq)/(this.maxFreq-this.minFreq),r=f-u,u+t*Math.floor(i*(r/t))}return this.model.minFontSize}});t.Format={Cloud:"cloud",List:"list"}}(jQuery,Syncfusion),function(n,t,i){t.widget("ejTreeView","ej.TreeView",{_rootCSS:"e-treeview",element:null,model:null,validTags:["ul","div"],_setFirst:!1,defaults:{showCheckbox:!1,allowDragAndDrop:!1,allowDropChild:!0,allowDropSibling:!0,allowDragAndDropAcrossControl:!0,allowEditing:!1,allowKeyboardNavigation:!0,items:null,fields:{dataSource:null,query:null,tableName:null,child:null,id:"id",parentId:"parentId",text:"text",spriteCssClass:"spriteCssClass",expanded:"expanded",hasChild:"hasChild",selected:"selected",linkAttribute:"linkAttribute",value:"value",imageAttribute:"imageAttribute",htmlAttribute:"htmlAttribute",imageUrl:"imageUrl",isChecked:"isChecked"},autoCheckParentNode:!1,loadOnDemand:!1,cssClass:"",template:null,enableRTL:!1,expandOn:"dblclick",enablePersistence:!1,enabled:!0,expandedNodes:[],width:null,height:null,nodeClick:null,beforeExpand:null,nodeExpand:null,beforeCollapse:null,nodeCollapse:null,nodeSelect:null,nodeCheck:null,nodeUncheck:null,inlineEditValidation:null,beforeEdit:null,keyPress:null,nodeDragStart:null,nodeDrag:null,nodeDragStop:null,nodeDropped:null,create:null,destroy:null},dataTypes:{showCheckbox:"boolean",allowDragAndDrop:"boolean",allowDropChild:"boolean",allowDragAndDropAcrossControl:"boolean",allowEditing:"boolean",allowKeyboardNavigation:"boolean",autoCheckParentNode:"boolean",loadOnDemand:"boolean",enableRTL:"boolean",expandOn:"string",enablePersistence:"boolean",items:"data",fields:"data",expandedNodes:"data"},_setModel:function(i){var r,f,e,o,u;if(!this.model.enabled&&t.isNullOrUndefined(i.enabled))return!1;for(r in i)switch(r){case"cssClass":this._changeSkin(i[r]);break;case"fields":this._unWireEvents();f=this.element.hasClass("e-js")?!1:!0;e=f?this.element.children("ul"):this.element;e.empty();n.extend(this.model.fields,i[r]);this._checkDataBinding();f&&(o=this.element.children(".e-treeview-ul"),e.append(o.children()),o.remove());break;case"allowDragAndDropAcrossControl":this.model.allowDragAndDropAcrossControl=i[r];this._enableDargDrop();break;case"enabled":this._enabledAction(i[r]);break;case"showCheckbox":i[r]?(this.model.showCheckbox=i[r],this._showCheckBox()):(this.element.find("span.e-chkbox-wrap").next().remove(),this.element.find("span.e-chkbox-wrap").remove());break;case"expandedNodes":for(u=0;u<i[r].length;u++)this._expandNode(this._liList[i[r][u]]);break;case"expandOn":this._on(this.element,i[r],this._expandEventHandler);break;case"allowEditing":i[r]?(this._enableAllowEdit(),this._allowEditable()):(this._disableAllowEdit(),this._preventEditable());break;case"allowKeyboardNavigation":i[r]?this._on(this.element,"keydown",this._KeyPress):this._off(this.element,"keydown",this._KeyPress);break;case"allowDragAndDrop":i[r]&&this._enableDargDrop();break;case"enableRTL":i[r]?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl");break;case"height":this.element.height(i[r]);break;case"width":this.element.width(i[r])}},_destroy:function(){this.element.html("");this.element.parent().append(this._cloneElement);this.element.remove();this.element=this._cloneElement;this.element.removeClass("e-treeview e-widget")},_init:function(){if(this._id=this.element.prop("id"),this.model.items!=null){var n=this._renderTemplate(this.model.items);this.element.append(n)}t.isNullOrUndefined(this.model.fields)||this.model.fields.dataSource==null?this.initialize():this._checkDataBinding()},initialize:function(){this._cloneElement=n(this.element).clone();this._cutCopyNodeText=null;this.beforeEditText=null;this.element.is("ul")?this._createWrapper():(this.element.addClass("e-treeview-wrap e-widget"),this.model.width!=null&&this.element.width(this.model.width),this.model.height!=null&&this.element.height(this.model.height),this.model.enableRTL&&this.element.addClass("e-rtl"));this.element.attr("role","tree").attr("aria-activedescendant",this._id+"_active");this._ulList=n("ul",this.element);this._liList=n("li",this.element).attr("tabindex",-1);this._addBaseClass();this._controlRender();this._addDragableClass();this._finalize();this._enabledAction(this.model.enabled)},_createWrapper:function(){var n=t.buildTag("div.e-treeview-wrap e-widget "+this.model.cssClass,"","",{tabindex:0});t.isNullOrUndefined(this.element.attr("accesskey"))||n.attr("accesskey",this.element.attr("accesskey"));this.model.width!=null&&n.width(this.model.width);this.model.height!=null&&n.height(this.model.height);this.model.enableRTL&&n.addClass("e-rtl");n.insertAfter(this.element);n.append(this.element.addClass("e-ul"));this.element=n},_changeSkin:function(n){this.model.cssClass!=n&&this.element.removeClass(this.model.cssClass).addClass(n)},_enabledAction:function(n){n?(this.element.removeClass("e-disable"),this._wireEvents()):(this.element.addClass("e-disable"),this._unWireEvents())},_checkDataBinding:function(){this.model.fields.dataSource instanceof t.DataManager?this._initDataSource():(this._ensureDataSource(this.model.fields.dataSource),this.initialize())},_initDataSource:function(){var t;this.element.ejWaitingPopup();t=this.element.ejWaitingPopup("instance");this.element.ejWaitingPopup("refresh");this.element.ejWaitingPopup("show");var i=this._columnToSelect(this.model.fields),n=this,r=this.model.fields.dataSource.executeQuery(i);r.done(function(t){n.element.ejWaitingPopup("hide");n.retriveData=t.result;n._ensureDataSource(t.result);n.initialize()})},_columnToSelect:function(n){var u=[],r=t.Query(),i;if(t.isNullOrUndefined(n.query)){for(i in n)i!=="tableName"&&i!=="child"&&i!=="dataSource"&&u.push(n[i]);u.length>0&&r.select(u);this.model.fields.dataSource.dataSource.url.match(n.tableName+"$")||t.isNullOrUndefined(n.tableName)||r.from(n.tableName)}else r=n.query;return r},_ensureDataSource:function(n){this.currentSelectedData=n;this.element.append(this._renderTemplate(n))},_renderTemplate:function(n){var u=t.buildTag("ul"),r="",i;for(this._odataFlag=!1,this._hasSelected=[],i=0;i<n.length;i++)n[i][this.model.fields.selected]&&(this._hasSelected=n[i][this.model.fields.id]);for(i=0;i<n.length;i++)this.model.fields.dataSource!=null?(t.isNullOrUndefined(n[i][this.model.fields.parentId])||n[i][this.model.fields.parentId]==0)&&(r=this._tempalteSub(n[i],n,this.model.fields)):r=this._tempalteSub(n[i],n,this.model.fields),u.append(r);return u},_tempalteSub:function(i,r,u){var e,p,c,l,a,w=!1,y,b,v,k,f,s,o,h;if(this.model.fields.dataSource!=null&&(this.model.loadOnDemand&&i[u.hasChild]?(f=t.DataManager(this.currentSelectedData).executeLocal(t.Query().where(u.parentId,t.FilterOperators.equal,i[u.id])),a=n("<ul><\/ul>"),w=!0):f=t.isNullOrUndefined(u.parentId)?i[u.childItems]:t.DataManager(this.currentSelectedData).executeLocal(t.Query().where(u.parentId,t.FilterOperators.equal,i[u.id]))),t.isNullOrUndefined(this.model.template)?(e=n("<li><\/li>"),i[u.id]&&e.prop("id",i[u.id]),i[u.htmlAttribute]&&this._setAttributes(i[u.htmlAttribute],e),i[u.imageUrl]?(c=t.buildTag("img.e-align"),c.attr("src",i[u.imageUrl]),i[u.imageAttribute]&&this._setAttributes(i[u.imageAttribute],c),e.append(c)):i[u.spriteCssClass]&&(p=t.buildTag("span."+i[u.spriteCssClass]),e.append(p)),i[u.text]!=""&&(l=t.buildTag("a",i[u.text],"",{href:"#"}),i[u.linkAttribute]&&l.attr("href",i[u.linkAttribute]),e.append(l))):(y=n("<div><\/div>"),y.append(n("#"+this.model.template).render(i)),e=y.find("li")),this._hasExpanded=!1,!i[u.expanded]||this.model.expandedNodes instanceof Array&&this.model.expandedNodes.length>0||(e.addClass("expanded"),this._hasExpanded=!0),i[u.isChecked]&&e.addClass("ischecked"),i[u.id]==this._hasSelected&&l.addClass("e-text CanSelect e-active"),w&&e.append(a),t.isNullOrUndefined(u.child)||this.model.loadOnDemand){if(this.model.loadOnDemand){if(f&&f.length>0&&this._hasExpanded){for(o=0;o<f.length;o++)h=this._tempalteSub(f[o],r,u),a.append(h);this._hasExpanded=!1;e.append(a)}}else if(!this._odataFlag&&f&&f.length>0){for(s=t.buildTag("ul"),o=0;o<f.length;o++)h=this._tempalteSub(f[o],r,u),s.append(h);e.append(s)}}else if(this._odataFlag=!0,u.child.dataSource instanceof t.DataManager)b=this,v=t.Query(),v=this._columnToSelect(u.child),v.where(u.child.parentId,t.FilterOperators.equal,i[u.id]),k=u.child.dataSource.executeQuery(v),k.done(function(t){f=t.result;f&&f.length>0&&(b._createSubNodesWhenLoadOnDemand(f,e,u.child),n(e).find(" >div >div").first().addClass("e-icon e-plus"))});else if(f=t.DataManager(u.child.dataSource).executeLocal(t.Query().where(u.child.parentId,t.FilterOperators.equal,i[u.id])),f&&f.length>0){for(s=n(document.createElement("ul")),o=0;o<f.length;o++)h=this._tempalteSub(f[o],u.child.dataSource,u.child),s.append(h);e.append(s)}return e},_setAttributes:function(n,t){for(var i in n)t.attr(i,n[i])},_addDragableClass:function(){this.model.allowDragAndDrop&&(this._anchors=this._liList.map(function(){return n("a",this)[0]}),this._anchors.addClass("e-draggable e-droppable"))},_addBaseClass:function(){this._ulList.addClass("e-treeview-ul").attr("role","group");this._liList.addClass("e-item").attr("role","treeitem");this.element.find("ul").first().removeClass("e-treeview-ul")},_controlRender:function(){var h,r,o,v,c,f,y,s,l,b,p,u,k;if(this.element!=null){var e=this.element.find("> ul"),w=e.find("li"),a=-1;for(h=0;h<w.length;h++)r=n(w[h]),f=r.children("ul")[0],this.model.showCheckbox==!0&&n(f).length!=0&&(y=e.find(">li"),y.each(function(t){n(f).parents("li.e-item").first()[0]==n(y[t])[0]&&(a=a+1)}),this._checkboxrecursive(e,f,a)),f&&n(r.children("ul")[0]).remove(),s=r.children("a")[0],s?(c=n(s).text(),o=n(s).clone(),n(s).remove(),n(o).addClass("e-text"),n(o).addClass("CanSelect"),v=r.clone(),r.html("")):(c=this._getText(r),v=r.clone(),r.html(""),o=t.buildTag("a.e-text CanSelect",c,"",{href:"#",alt:""})),l=t.buildTag("span"),f?n(l).addClass("collapseimg"):n(l).addClass("child"),b=t.buildTag("div","",{},{role:"presentation"}),p=t.buildTag("div","",{},{role:"presentation"}),n(p).append(b).append(l).append(v.children()).append(o),r.prepend(p),f&&r.append(f),r.prop("name")==i&&r.prop("name",c);this.model.showCheckbox&&(this._addCheckBox(e),this.element.find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}))}u=e.find("li");u.find(">ul").hide();k=u.find("a");k.focus(function(){n(this).blur()});u.filter("li:last-child").addClass("last");n(u[0]).addClass("first");n(u[0]).hasClass("first")&&n(u[0]).hasClass("last")&&n(u[0]).removeClass("first");n(u.filter(":has(ul)")).each(function(){n(this).attr("aria-expanded",!1).attr("aria-selected",!1);var t=n(n(this).children()).filter("ul");n(t).is(":hidden")?n(n(this).children().find("div")[0]).removeClass("e-icon e-minus").addClass("e-icon e-plus"):n(this.childNodes[1]).removeClass("e-icon e-plus").addClass("e-icon e-minus")})},_getText:function(t){return n(t).clone().children().remove().end().text()},_finalize:function(){var i,t;if(this._isFocus=!0,!(this.model.expandedNodes instanceof Array&&this.model.expandedNodes.length>0))for(i=this.element.find(".expanded"),t=0;t<i.length;t++)this._expandNode(i[t]);for(this.model.showCheckbox&&this._isCheckedAction(),t=0;t<this.model.expandedNodes.length;t++)this._expandNode(this._liList[this.model.expandedNodes[t]]);this.model.allowEditing&&this._enableAllowEdit();n(this._liList[0]).find("a.e-text").attr("id",this._id+"_active");this.element.attr("tabindex",0)},_isCheckedAction:function(){for(var i=this.element.find(".ischecked"),t=0;t<i.length;t++)this._nodeCheckedAction(n(i[t]).find("span.e-chkbox-wrap").first());this.element.find(".ischecked").removeClass("ischecked")},_addCheckBox:function(i){for(var f,e,u=i.find(">li"),r=0;r<u.length;r++)f=t.buildTag("input.nodecheckbox","",{},{type:"checkbox",name:"TreeView_Checkbox"+r,value:"False"}),e=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox1",value:r}),n(u[r]).children("div").children("span").first().after(n(e)),n(u[r]).children("div").children("span").first().after(n(f))},_checkboxrecursive:function(i,r,u){var o=this,f,e=n(r).find(">li");f=n(n(n(r).parents("li.e-item")[0]).find(">input[type= hidden]")[0]).length==0?u:n(n(r).parents("li.e-item")[0]).find(">input[type=hidden]")[0].value;e.each(function(i){var l=u,s=f+"."+i;o._checkboxrecursive(f,this,l);var h=t.buildTag("input.nodecheckbox","",{},{type:"checkbox",name:"TreeView_Checkbox"+s,value:"False"}),c=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox"+s,value:s}),r=n(e[i]);r.find("a.e-text ").length>0?(h.insertBefore(r.find("a.e-text ")[0]),c.insertBefore(r.find("a.e-text ")[0])):r.prepend(h).prepend(c)})},_checkedChange:function(t){var i=n(this.element).closest(".e-treeview").data("ejTreeView");t.isChecked?i._nodeCheckedAction(this.element,t):i._nodeUnCheckedAction(this.element,t)},_ClickEventHandler:function(t){var f=this,i=t.target,r;if(!this._isclicked){if(this._isclicked=!0,this._onClick({event:t,currentElement:i}),i.tagName.toUpperCase()=="DIV"&&(n(i).hasClass("e-plus")||n(i).hasClass("e-minus")))if(r=null,i.tagName.toUpperCase()=="SPAN"?(r=n(i.parentNode).parent().children().filter("ul"),i=n(i.parentNode).children().filter("div")[0]):r=n(i.parentNode).parent().children().filter("ul"),this.isExpanded=n(r).children().filter("li").length>0?!0:!1,!this.isExpanded&&this.model.loadOnDemand){n(i).addClass("e-load");var e=n(n(i).parents("li.e-item")[0]).attr("id"),o=n(n(n(n(i).parents("li.e-item")[0]).children("div")[0]).children("a[class*=e-text]")[0]).text(),u={id:e,value:o,isChildLoaded:this.isExpanded};this._onBeforeExpand(u);this._loadOnDemand(u,i)}else this._expandCollapseAction(i);i.tagName.toUpperCase()=="A"&&n(i).hasClass("CanSelect")&&!n(i).hasClass("e-active")&&this._nodeSelectionAction(i)}setTimeout(function(){f._isclicked=!1},300);i.tagName.toUpperCase()=="A"&&(n(i).attr("href")=="#"&&t.preventDefault(),this.element.focus())},_loadOnDemand:function(n,i){var r,u=this,f,e;this.model.fields.dataSource instanceof t.DataManager?(f=t.Query().where(this.model.fields.parentId,t.FilterOperators.equal,n.id),e=this.model.fields.dataSource.executeQuery(f),e.done(function(n){r=n.result;r.length>0&&(u._createSubNodesWhenLoadOnDemand(r,i,u.model.fields),u._expandCollapseAction(i))})):(r=t.DataManager(this.currentSelectedData).executeLocal(t.Query().where(this.model.fields.parentId,t.FilterOperators.equal,n.id)),r.length>0&&setTimeout(function(){u._createSubNodesWhenLoadOnDemand(r,i,u.model.fields);u._expandCollapseAction(i)},400))},_getPath:function(t){for(var r=n(t).prop("name"),i=n(t).parents("li")[0];i!=null&&i.parentNode.id!=this._id;)r=n(i).prop("name")+"/"+r,i=n(i).parents("li")[0];return this._id+"/"+r},_nodeSelectionAction:function(t){var i,r,u;n(t)!=null&&(n(n(t).parents("li")).hasClass("e-node-disable")||(n(n(this.element).find(".e-active")).removeClass("e-active"),n(this.element).find("#"+this._id+"_active").removeAttr("id"),n(this.element).find("[aria-selected=true]").attr("aria-selected",!1),n(t).addClass("e-active"),i=n(n(t).parents("li.e-item")[0]),i.attr("aria-selected",!0).find("a.e-text").attr("id",this._id+"_active"),r=n(t).text(),u={currentElement:i,value:r},this._onNodeSelect(u)))},_nodeUnSelectionAction:function(t){t[0]!=null&&n(t).removeClass("e-active")},_nodeEnableAction:function(t){t[0]!=null&&(t=n(t),this.model.showCheckbox&&n(n(t.parents("li.e-item")[0]).find("input")[0]).prop("disabled",!1),n(t.parents("li.e-item")[0]).removeClass("e-node-disable"),n(t.parents("li.e-item")[0]).find("a").removeClass("e-node-disable"),n(t.parents("li.e-item")[0])[0].disabled=!1)},_nodeDisableAction:function(t){t[0]!=null&&(t=n(t),this._collpaseNode(t.parents("li.e-item")[0]),this.model.showCheckbox&&n(n(t.parents("li.e-item")[0]).find("input")[0]).prop("disabled",!0),n(t.parents("li.e-item")[0]).addClass("e-node-disable"),n(t.parents("li.e-item")[0]).find("a").addClass("e-node-disable"),n(t.parents("li.e-item")[0]).find("a").hasClass("e-active")&&n(t.parents("li.e-item")[0]).find("a").removeClass("e-active"),n(t.parents("li.e-item")[0])[0].disabled=!0)},_expandCollapseAction:function(i){var e,u=this,s,f,o,r;if(!n(i.parentNode).parent().hasClass("e-node-disable"))if(t.isNullOrUndefined(i.tagName)||i.tagName.toUpperCase()!="SPAN"?e=n(i.parentNode).parent().children().filter("ul"):(e=n(i.parentNode).parent().children().filter("ul"),i=n(i.parentNode).children().filter("div")[0]),s=i.tagName=="DIV"?n(i.parentNode.parentNode)[0]:i,f=n(n(i).parents("li.e-item")[0]),this._isExpanded(s)){if(f.attr("aria-expanded",!1).attr("tabindex",-1),o=n(n(n(n(i).parents("li.e-item")[0]).children("div")[0]).children("a[class*=e-text]")[0]).text(),r={currentElement:n(n(i).parents("li.e-item")[0]),value:o},this._onBeforeCollapse(r)===!0)return!1;n(e).animate({height:"toggle"},200,"linear",function(){u._onNodeCollapse(r);u._removeExpandedNodes(u._liList.index(r.currentElement))});n(i).removeClass("e-icon e-minus").addClass("e-icon e-plus");i.parentNode!=null&&(n(i.parentNode.parentNode).removeClass("e-collapse"),n(n(i.parentNode).children()[1]).addClass("collapseimg").removeClass("expandimg"))}else f.attr("aria-expanded",!0).attr("tabindex",0),o=n(n(n(n(i).parents("li.e-item")[0]).children("div")[0]).children("a[class*=e-text]")[0]).text(),r={currentElement:f,value:o,isChildLoaded:this.isExpanded},this.model.loadOnDemand?this.isExpanded?this._onBeforeExpand(r)?!0:!1:!1:this._onBeforeExpand(r)?!0:!1,n(e).animate({height:"toggle"},350,"linear",function(){u._onNodeExpand(r);u._addExpandedNodes(u._liList.index(f))}),n(i).removeClass("e-icon e-plus").addClass("e-icon e-minus"),n(i.parentNode.parentNode).addClass("e-collapse"),n(n(i.parentNode).children()[1]).removeClass("collapseimg").addClass("expandimg")},_isExpanded:function(t){t.tagName=="A"&&(t=n(t.parentNode.parentNode)[0]);var i=this._isNodeExpanded(t);return n(n(t).children().filter("ul"))!=null&&(i=n(n(t).children().filter("ul").find("li"))!=null?n(n(t).children().filter("ul").find("li")).is(":not(:hidden)"):!1),i},_isChecked:function(t){return n(t).val()==="True"?!0:!1},_nodeCheckedAction:function(i,r){var s=this,e=n(n(i).find("input.nodecheckbox[type=checkbox]")[0]),h,c,o,f,u;for(e.addClass("checked").prop("value","True"),e.ejCheckBox({enableTriState:!1}),e.ejCheckBox({checked:!0}),this._onChecked(e,r),n(n(i).parents("li.e-item")[0]).children("ul").find("input.nodecheckbox[type=checkbox]").prop("checked",!0).addClass("checked").prop("value","True"),h=n(n(i).parents("li.e-item")[0]).children("ul").find("input.nodecheckbox[type=checkbox]"),h.each(function(){n(this).ejCheckBox({checked:!0});s._onChecked(this,r)}),c=this.model.autoCheckParentNode,o=n(n(i).parents("li.e-item")[0]).parents("li.e-item"),o.each(function(t){var u=n(o[t]).children("ul").find("li.e-item"),f=n(o[t]).children("ul").find("li.e-item").find('input.nodecheckbox[value="True"]').length,i=n(n(o[t]).find("input.nodecheckbox[type=checkbox]")[0]);f==u.length||c?(i.addClass("checked").prop("value","True"),i.ejCheckBox({enableTriState:!1}),i.ejCheckBox({checked:!0}),s._onChecked(i,r)):(i.ejCheckBox({enableTriState:!0}),i.ejCheckBox({checkState:"indeterminate"}),i.val("False"))}),f=this.element.find('input.nodecheckbox[value="True"]'),u=0;u<f.length;u++){var e=n(f[u]).parents(".e-chkbox-wrap"),l=n(e.next()[0])[0].value,a=n(n(f[u]).parents("li.e-item")[0]).attr("id"),v=n(f[u]).parents("li.e-item").first().find(".e-text").first().text(),y=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox"+l+".Value",value:a}),p=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox"+l+".Text",value:v});try{n(f[u]).append(n(y));n(f[u]).append(n(p))}catch(w){}}},_nodeUnCheckedAction:function(t,i){var h=this,o,s,e,u,f,r;for(t=n(t),r=n(n(t).find("input.nodecheckbox[type=checkbox]")[0]),r.removeClass("checked").prop("value","False").children().remove(),r.ejCheckBox({enableTriState:!1}),r.ejCheckBox({checked:!1}),this._onUnChecked(r,i),o=n(t.parents("li.e-item")[0]).children("ul").find("input.nodecheckbox[type=checkbox]"),o.removeClass("checked").prop("value","False").children().remove(),o.each(function(){n(this).ejCheckBox({checked:!1});h._onUnChecked(this,i)}),s=this.model.autoCheckParentNode,e=n(t.parents("li.e-item")[0]).parents("li.e-item"),u=0;u<e.length;u++)f=n(e[u]).find('input.nodecheckbox[value="True"]').length,r=n(n(e[u]).find("input.nodecheckbox[type=checkbox]")[0]),f<=0&&(r.ejCheckBox({enableTriState:!1}),r.ejCheckBox({checked:!1}),this._onUnChecked(r,i)),f>1&&s?(r.addClass("checked").prop("value","True"),r.ejCheckBox({checked:!0})):f==1&&s?(r.addClass("checked").prop("value","False"),r.ejCheckBox({checked:!1})):f>0&&(r.removeClass("checked").prop("value","False").children().remove(),r.ejCheckBox({enableTriState:!0}),r.ejCheckBox({checkState:"indeterminate"}))},_enableAllowEdit:function(){var t=this.element,i=n(t).find("li");i.each(function(){n(this).addClass("AllowEdit")})},_disableAllowEdit:function(){var t=this.element.find("li");t.each(function(){n(this).removeClass("AllowEdit")})},_expandNode:function(t){if(t!=null)if(this.model.loadOnDemand)this._expandCollapseAction(n(n(t).children("div")).children()[0]);else if(n(n(n(t).children("div")).children()[0]).hasClass("e-plus")){var i=n(t).children("ul").find("li").length>0?!0:!1;i&&this._expandCollapseAction(n(n(t).children("div")).children()[0])}return!0},_collpaseNode:function(t){var i=t;i!=null&&n(i).find("ul").length>0&&n(n(n(i).children("div")).children()[0]).hasClass("e-minus")&&this._expandCollapseAction(n(n(i).children("div")).children()[0])},_expandAll:function(){var i=this,r=this.element,t=n(r).find("li:not([class*='e-node-disable'])"),u=t.find(">ul:hidden").parents("li.e-item");t.find(">ul:hidden").find("li").length>0&&t.find(">ul:hidden").animate({height:"toggle"},350);n(u).each(function(){if(!n(this).hasClass("e-node-disable")){var r=n(n(this).parents("li.e-item")[0]),u=n(n(this).find(">div >a")[0]).text(),t={currentElement:r,value:u};if(i._onBeforeExpand(t)===!0)return!1;n(this).find("li").length>0&&(n(this).addClass("expand"),n(n(n(this).children("div")[0]).children()[1]).removeClass("collapseimg").addClass("expandimg"),n(n(n(this).children("div")[0]).children()[0]).removeClass("e-icon e-plus").addClass("e-icon e-minus"));i._onNodeExpand(t)}})},_collapseAll:function(){var n=this.element.find("li");this._collapseNodes(n)},_checkAll:function(){var u,r,i,t;if(this.model.showCheckbox)for(u=this.element,r=n(u).find("li"),i=0;i<r.length;i++)t=n(r[i]).children().find("input.nodecheckbox")[0],n(t)[0].disabled?n(t).ejCheckBox("setModel",{checked:!1}):(n(t).ejCheckBox("setModel",{checked:!0}),n(t).attr("value","True"),this._onChecked(t));else alert("Please Enable the ShowCheckbox property")},_unCheckAll:function(){var u,r,t,i;if(this.model.showCheckbox)for(u=this.element,r=n(u).find("li"),t=0;t<r.length;t++)i=n(r[t]).find("input.nodecheckbox")[0],n(i).ejCheckBox("setModel",{checked:!1}),n(i).attr("value","False"),this._onUnChecked(i);else alert("Please Enable the ShowCheckbox property")},_collapseNodes:function(t){var i=this,r=t.find(">ul:not(:hidden)").parents("li.e-item");t.find(">ul:not(:hidden)").animate({height:"toggle"},350);n(r).each(function(){var r=n(n(this).find(">div >a")[0]).text(),t={currentElement:this,value:r};if(i._onBeforeCollapse(t)==!0)return!1;n(this).find("li").length>0&&(n(this).removeClass("e-collapse"),n(n(n(this).children("div")[0]).children()[1]).removeClass("expandimg").addClass("collapseimg"),n(n(n(this).children("div")[0]).children()[0]).removeClass("e-icon e-minus").addClass("e-icon e-plus"));i._onNodeCollapse(t)})},_showCheckBox:function(){for(var f,t=this.element.find("> ul"),e=t.find("li"),i=0;i<e.length;i++){var r=-1,o=e[i],u=n(o).children("ul")[0];this.model.showCheckbox==!0&&n(u).length!=0&&(f=t.find(">li"),f.each(function(t){n(n(u).parents("li.e-item")[0])[0].id==n(f[t])[0].id&&(r=r+1)}),this._checkboxrecursive(t,u,r))}this._addCheckBox(t);t.find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange})},_drag:function(){var i=this,u=!1,r=null,f=null;this._treeView=this.element.parent();this.model.allowDragAndDropAcrossControl||(f=this.element.parent());n(this._treeView).find("ul li div a").not(".e-js").ejDraggable({dragArea:f,clone:!0,dragStart:function(n){var t={target:n.target,event:n.event};if(i._onDragStarts(t))return n.cancel=!0,r&&r.remove(),!1},drag:function(r){var f,o,s,e;if(n(".e-sibling").remove(),f=r.target,o={target:f,event:r.event},i._onDrag(o))return!1;n(f).hasClass("e-droppable")||n(f).parent().hasClass("e-droppable")?(document.body.style.cursor="",n(f).addClass("allowDrop")):(document.body.style.cursor="not-allowed",n(f).removeClass("showline-hover"),n(f).removeClass("noline-hover"));f.nodeName!="A"?(f.nodeName=="UL"&&(f=n(f).children()[0]),f.nodeName!="LI"&&(f=n(f).parent(".e-droppable")[0]||n(f).parent()),f.nodeName=="LI"&&n(f).hasClass("e-droppable")&&i.model.allowDropSibling&&(s=n(".e-treeview").has(f).offset().top+n(f).children().find("a")[0].offsetTop||-1,e=t.buildTag("div.e-sibling"),n(f).hasClass("last")?n(f).append(e):n(f).hasClass("first")?n(f).prepend(e):(u=r.event.pageY<s?!1:!0,u?n(f).prepend(e):n(f).append(e)))):n(".e-sibling").remove()},dragStop:function(t){var f,s,e,o;if((t.element.dropped||(r&&r.remove(),document.body.style.cursor=""),f=t.target,f.className=="e-sibling"&&(f=n(f).parent("li")[0]),s=i,e=u?"Before":"After",e=f.nodeName=="A"?"Over":e,o={target:f,position:e,event:t.event},i._onDragStop(o))||(n(t.element).removeClass("e-active"),f.nodeName=="A"&&i.model.allowDropChild&&n(f).hasClass("e-droppable")||f.nodeName=="UL"&&n(f).children().length==0?(e="Over",n(t.element).parent().parent().has(n(f)).length==0&&(n(f).parent().parent().has(n(t.element)).length==0||i._isDescendant(n(f).parents("li:last").find(">ul>li"),n(t.element).parents("li:first")[0]))&&(i._dropAsChildNode(f,t.element,t.event),s._applyFirstLastChildClass())):(f.nodeName=="UL"&&(f=n(f).children()[0]),f.nodeName!="LI"&&(f=n(f).parent(".e-droppable")[0]||n(f).parent()),f.nodeName=="LI"&&i.model.allowDropSibling&&n(f).hasClass("e-droppable")&&(n(".e-sibling").remove(),n(t.element).parent().parent().has(n(f)).length<1&&(i._dropAsSublingNode(f,t.element,u,t.event),s._applyFirstLastChildClass()))),n(".e-sibling").remove(),n(".allowDrop").removeClass("allowDrop"),i.model.allowDropChild||r&&r.remove(),o={target:f,event:t.event,dropedElement:t.element},i._onDropped(o)))return!1;document.body.style.cursor=""},helper:function(t){return r=n(t.sender.target).clone().addClass("dragClone"),r.appendTo(n("body"))}})},_isDescendant:function(t,i){var r=!0;return n(t).each(function(n,t){if(t==i)return r=!1,!1;r=!0}),r},_childDrop:function(){n(this._treeView).find("ul li div a").ejDroppable({accept:n(this._treeView).find("ul li div a"),drop:function(t,i){n(i.helper).hide()}})},_siblingDrop:function(){n(this._treeView).find("ul li").ejDroppable({drop:function(t,i){n(i.helper).hide()}})},_dropAsSublingNode:function(t,i,r,u){var f=u.ctrlKey?n(i).parent().parent().clone():n(i).parent().parent(),e=n(i).parents("li.e-item")[1];r?n(f).insertBefore(t):n(f).insertAfter(t);this._modifiCss(e);this._applyFirstLastChildClass()},_dropAsChildNode:function(t,i,r){var u=r.ctrlKey?n(i).parent().parent().clone():n(i).parent().parent(),f=n(i).parents("li.e-item")[1];t.nodeName=="UL"?n(t).append(u):this._appendNode(t,u);this._modifiCss(f);this._applyFirstLastChildClass();this._expandNode(n(t).parent().parent()[0])},_appendNode:function(i,r){if(this._showline&&i.length!=0&&(n(n(n(i).parents("li.e-item")[0]).find("li")).hasClass("last")&&n(n(n(i).parents("li.e-item")[0]).find("li")).removeClass("last"),n(r).addClass("last")),i.length!=0)if(n(n(i).parents("li.e-item")[0]).find("ul")[0]==null){var u=t.buildTag("ul.e-treeview-ul");n(u).append(n(r));n(n(n(i).parents("li.e-item")[0]).find("div")[1]).hasClass("e-minus")||n(n(n(i).parents("li.e-item")[0]).find("div")[1]).addClass("e-icon e-minus");n(n(i).parents("li.e-item")[0]).append(n(u))}else n(n(n(i).parents("li.e-item")[0]).find("ul")[0]).append(n(r))},_checkBox:function(t,i){var r;if(!n(i).hasClass("nodecheckbox")&&n(i).find(".nodecheckbox").length>0&&(n(i).find(".e-chkbox-wrap").next().remove(),n(i).find(".e-chkbox-wrap").remove()),n(t).find(".e-checkbox").length>0){r=n(".e-treeview").has(t).find("ul")[0];n(r).find(".e-checkbox").next().remove();n(r).find(".e-checkbox").remove();var f=this,u=-1,e=n(r).find("li");e.each(function(){var t=n(this).children("ul")[0],i;n(t).length!=0&&(i=n(r).find(">li"),i.each(function(r){n(n(t).parents("li.e-item")[0])[0].id==n(i[r])[0].id&&(u=u+1)}),f._childcheckbox(r,t,u))});this._addCheckBox(n(r));this.element.find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange});n(t).closest(".e-treeview").find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange})}},_childcheckbox:function(i,r,u){var o=this,f,e=n(r).find(">li");f=n(n(n(n(r).parents("li.e-item")[0]).children()[0]).find(">input[type= hidden]")[0]).length==0?u:n(n(n(r).parents("li.e-item")[0]).children()[0]).find(">input[type= hidden]")[0].value;e.each(function(i){var c=u,r=f+"."+i,s,h;o._childcheckbox(f,this,c);s=t.buildTag("input.nodecheckbox","",{},{type:"checkbox",name:"TreeView_Checkbox"+r,value:"False"});h=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox.Index",value:r});n(e[i]).children("div").children("span").after(n(h));n(e[i]).children("div").children("span").after(n(s))})},_modifiCss:function(t){n(t).find("li").length==0?(n(t).find("ul").remove(),n(t).removeClass("e-collapse"),n(t).find("div.e-icon").removeClass("e-icon e-minus")):n(n(t).find("li")[n(t).find("li").length-1]).hasClass("last")||n(n(t).find("li")[n(t).find("li").length-1]).addClass("last")},_applyFirstLastChildClass:function(){var i=this.element,t=i.find("li");t.removeClass("first");t.removeClass("last");t.filter("li:last-child").addClass("last");n(t[0]).addClass("first");n(t[0]).hasClass("first")&&n(t[0]).hasClass("last")&&n(t[0]).removeClass("first")},_expandEventHandler:function(t){var r=n(t.target),i,u;r.hasClass("e-icon")||t.type==="dblclick"&&this.model.allowEditing||(t.preventDefault(),i=n(r.siblings("div")),u=r.parent().parent(),i.hasClass("e-minus")?this._collpaseNode(u):this.model.loadOnDemand&&i.find(".e-item").length==0?(this._isclicked=!1,this._ClickEventHandler({target:i[0]})):this._expandNode(u))},_inlineEdit:function(t){return t.preventDefault(),t.target.tagName!="A"||n(t.target).hasClass("e-node-disable")||n(n(t.target).parents("li.e-item")[0]).hasClass("AllowEdit")&&n(t.target).hasClass("e-text")&&(n(t.target).removeClass("e-active"),this._inlineEditAction(t.target)),!1},_inlineEditAction:function(t){var i=n("#Edit_Input")[0];i==null?this._createEditTextBox(t):(i=n("#Edit_Input")[0],n(i.parentNode).html(i.value),n(i).remove(),this._createEditTextBox(t))},_createEditTextBox:function(i){var o={currentElement:i},r,u,e,f;return this._trigger("beforeEdit",o)?!1:(r=n("#Edit_Input")[0],r==null&&(u=t.buildTag("Input.Input_Text#Edit_Input","","",{type:"text",value:n.trim(i.innerHTML).replace(/\n\s+/g," "),name:"inplace_value"}),n(u).width(n(i).outerWidth()+5),n(u).height(n(i).outerHeight()-2),this.beforeEditText=n(i).text(),n(i).html(""),n(i).before(u),e=0,r=n("#Edit_Input")[0],e=r.value.length==""?3:n(i).outerWidth()+20,this._mousePositionAtEnd(r),this._currentEditableNode=i,f=n(r),this._on(f,"keypress",this._editTextBoxKeyPress),this._on(f,"keydown",this,this._pressEscKey),this._on(f,"blur",this._focusout)),r)},_editTextBoxKeyPress:function(n){n.target.size=n.target.value.length+1},_mousePositionAtEnd:function(n){return n.focus&&n.focus(),n.select&&n.select(),!0},_focusout:function(){var t=n("#Edit_Input")[0],i=t.value,r=n(n(t).parents("li.e-item")[0]).attr("id"),u={nodeId:r,oldText:this.beforeEditText,newText:i};this._trigger("inlineEditValidation",u)==!0?this._cancelAction(t):this._saveAction(t)},_pressEscKey:function(t){t.cancelBubble=!0;t.returnValue=!1;var i=n("#Edit_Input")[0];i!=null&&(t.keyCode==13&&this._focusout(),t.keyCode==27&&this._cancelAction(i))},_onFocusHandler:function(t){this.model.allowKeyboardNavigation&&this._isFocus&&(this.element.find(".e-active").length==0&&(this.element.find(".e-active").removeClass("e-active"),nextElement=this.element.find("li").first().find("a").first(),n(nextElement).addClass("e-active")),t.preventDefault(),this._isFocus=!1)},_KeyPress:function(i){var u,l,f=this,a,v,e,r,h,o,y,b,c,p,w,g,k,s,nt,tt,d;if(this._isFocus=!0,a=this.element.find("> ul"),u=i.keyCode?i.keyCode:i.which?i.which:i.charCode,u==113&&(i.preventDefault(),this._isFocus=!1,v=a.find(".e-active")[0],v!=null&&n(n(v).parents("li.e-item")[0]).hasClass("AllowEdit")&&(n(v).removeClass("e-active"),this._createEditTextBox(v))),f.model.allowKeyboardNavigation&&f.element.find("#Edit_Input").length<1)if(r=n(n(a).find(".e-active").parents("li.e-item")[0]),h=n(a).find("li").not(":hidden"),u!=40||i.ctrlKey||i.altKey||i.shiftKey){if(u!=38||i.ctrlKey||i.altKey||i.shiftKey)u!=39||i.ctrlKey||i.altKey||i.shiftKey?u!=37||i.ctrlKey||i.altKey||i.shiftKey?u==13?r.length>0&&(c=n(r).children("div").find("div"),c.hasClass("e-minus")?this._collpaseNode(r):this.model.loadOnDemand&&r.find(".e-item").length==0?this._ClickEventHandler({target:c[0]}):this._expandNode(r),e=n(r.find("a")[0]),f._KeyPressEventHandler(e,f,u,i)):u==32?r.length>0&&this.model.showCheckbox&&(i.preventDefault(),p=r.find("input.nodecheckbox[type=checkbox]").first(),p[0].checked?this._nodeUnCheckedAction(p.parent().parent()):this._nodeCheckedAction(p.parent().parent())):u==46?r.length>0&&(i.preventDefault(),this._removeNode(r.find("a.e-text").first())):i&&i.ctrlKey==!0?u==88?(n(r).hasClass("first")?(w=n(r).removeClass("first").addClass("last"),n(r).next().addClass("first")):n(r).hasClass("last")?(w=n(r),n(r).prev().addClass("last")):w=n(r).addClass("last"),this._cutCopyNodeText=w,f._removeNode(),this.element.focus()):u==67?(g=n(r).clone(),this._cutCopyNodeText=g):u==86&&this._cutCopyNodeText!=null&&(n(r).length===0&&(r=this.element),s=n(this._cutCopyNodeText).clone(),n(s.find("a")[0]).hasClass("e-active")&&n(s.find("a")[0]).removeClass("e-active"),k=n(s).hasClass("first")?n(s).removeClass("first").addClass("last"):n(s).hasClass("last")?n(s):n(s).addClass("last"),this.model.showCheckbox&&(nt=t.buildTag("input.nodecheckbox","",{},{type:"checkbox",name:"TreeView_Checkbox"}),nt.insertAfter(s.find(".e-chkbox-wrap")),s.find(".e-chkbox-wrap").remove(),s.find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange})),this._on(s.find(".e-text"),"mouseenter",this._mouseEnterEvent),this._on(s.find(".e-text"),"mouseleave",this._mouseLeaveEvent),n(r).children("div").children("span").hasClass("child")&&n(r).children("div").children("span").removeClass("child").addClass("expandimg"),n(r).children("ul").length!=0?(n(r).children("ul").find(">li").last().removeClass("last"),n(r).find(">ul").append(n(k))):(tt=t.buildTag("ul.e-treeview-ul"),l=n(tt).append(n(k)),n(r).append(n(l)),n(r).children("div").find(">div").first().addClass("e-icon e-minus")),d=n(r).parents("li.e-item"),d.each(function(t){var i=n(d[t]).children("ul").find(">li");i.length==1&&n(i).addClass("last")}),this._expandNode(r)):u!=36||i.ctrlKey||i.altKey||i.shiftKey?u!=35||i.ctrlKey||i.altKey||i.shiftKey||(n(n(r).find("a")[0]).removeClass("e-active"),l=n(a).find(">li").last(),n(l).find("div").hasClass("e-minus")?(e=n(n(l).find("li").last().find("a")[0]),n(e).addClass("e-active")):(e=n(l.find("a")[0]),n(e).addClass("e-active")),f._KeyPressEventHandler(e,f,u,i),i.preventDefault()):(n(n(r).find("a")[0]).removeClass("e-active"),e=n(n(a).find(">li")[0]).find("a")[0],n(e).addClass("e-active"),f._KeyPressEventHandler(e,f,u,i),i.preventDefault()):(c=n(r).children("div").find("div"),c.hasClass("e-minus")?(i.preventDefault(),this._collpaseNode(r)):n(r).parents().first().parents("li").first().length>0&&(n(r).find("a.e-active").first().removeClass("e-active"),n(r).parents().first().parents("li").first().find("a").first().addClass("e-active")),e=n(r.find("a")[0]),f._KeyPressEventHandler(e,f,u,i)):(c=n(r).children("div").find("div"),c.hasClass("e-plus")?(i.preventDefault(),this.model.loadOnDemand&&r.find(".e-item").length==0?this._ClickEventHandler({target:c[0]}):this._expandNode(r)):n(r).find("div.e-icon e-plus,div.e-icon e-minus").first().length>0?this.selectNode(n(r).children("ul").find("li").first()[0]):(y=n(r).parent().find("li"),b=y.index(r),!t.isNullOrUndefined(y[b+1])&&n(r).children("ul").length>0&&this.selectNode(y[b+1])),e=n(r.find("a")[0]),f._KeyPressEventHandler(e,f,u,i));else if(r.length>0){for(i.preventDefault(),o=0;o<h.length;o++)if(n(n(h[o]).find("a")[0]).hasClass("e-active"))if(o==0)this._nodeSelectionAction(n(r.find("a")[0]).addClass("e-active"));else{n(n(h[o]).find("a")[0]).removeClass("e-active");this._nodeSelectionAction(n(n(h[o-1]).find("a")[0]).addClass("e-active"));break}f._KeyPressEventHandler(e,f,u,i)}}else if(r.length>0){for(i.preventDefault(),o=0;o<h.length;o++)if(n(n(h[o]).find("a")[0]).hasClass("e-active"))if(o==h.length-1)this._nodeSelectionAction(n(r.find("a")[0]).addClass("e-active"));else{n(n(h[o]).find("a")[0]).removeClass("e-active");this._nodeSelectionAction(n(n(h[o+1]).find("a")[0]));break}f._KeyPressEventHandler(e,f,u,i)}},_removeNode:function(i){var u=t.isNullOrUndefined(i)?this.element.find(".e-active"):i;if(u!=null){var f=n(n(u).parents("li.e-item")[1]),r=n(n(u).parents("li.e-item")[0]),e=n(f).find("li").not(":hidden");e.length>0?r.next().length>0?n(r.next().find("a")[0]).addClass("e-active"):r.prev().length>0?n(r.prev().find("a")[0]).addClass("e-active"):n(f.find("a")[0]).addClass("e-active"):r.next().length>0?n(r.next().find("a")[0]).addClass("e-active"):n(r.prev().find("a")[0]).addClass("e-active");r.remove();this._modifiCss(f)}},_KeyPressEventHandler:function(t,i,r,u){var f,o=n(n(t).parents("li.e-item")[0]),s=i._getPath(n(t).parents("li.e-item")[0]),h=n(t).text(),e;f=n(n(t).parents("li.e-item")[0]).children("div").find("div").hasClass("e-minus")?!0:!1;e={keyCode:r,currentElement:o,value:h,isExpanded:f,path:s,event:u};this._trigger("keyPress",e)},_documentClick:function(t){if(t.target.id!="Edit_Input")var i=n("#Edit_Input")[0];i!=null&&(n(i).next().html(i.value).removeAttr("style"),n(i).remove())},_saveAction:function(t){n(t).next().html(t.value).removeAttr("style");n(t).remove()},_cancelAction:function(t){n(t).next().html(this.beforeEditText).removeClass("e-node-hover").addClass("e-active").removeAttr("style");this._hideEditTextBox()},_hideEditTextBox:function(){var t=n("#Edit_Input")[0];t!=null&&n(t).remove()},_mouseEnterEvent:function(t){n(t.target).hasClass("e-text")&&!n(t.target).hasClass("e-node-disable")&&n(t.target).addClass("e-node-hover")},_mouseLeaveEvent:function(t){n(t.target).hasClass("e-node-hover")&&n(t.target).removeClass("e-node-hover")},_createSubNodesWhenLoadOnDemand:function(i,r,u){var c;t.isNullOrUndefined(u)&&(u=this.model.fields);var v,f=this,y=u.id,p=u.text,s=u.parentId,w=u.childItems,b=u.hasChild,o=u.imageUrl,l=u.imageAttribute,e=u.isChecked,a=u.spriteCssClass,h=t.buildTag("ul.e-treeview-ul","",{display:"none"}),k=this;n.each(i,function(u,s){var tt=t.buildTag("a.e-text CanSelect",s[p],"",{href:"#"}),it,nt,g,c,ft,d,et;if(f._on(n(tt),"mouseenter",f._mouseEnterEvent),f._on(n(tt),"mouseleave",f._mouseLeaveEvent),it=t.buildTag("div"),nt=t.buildTag("span"),s[w]||s[b]?(n(nt).addClass("collapseimg"),n(it).addClass("e-icon e-plus")):n(nt).addClass("child"),s[o]!=null&&(g=t.buildTag("img.e-align"),s[o].substr(0,1)=="~"?g.attr("src",s[o].substr(1,s[o].length)):g.attr("src",s[o]),s[l]!=null&&k._setAttributes(s[l],g)),f.model.showCheckbox){var ut=n(n(r).parents("li.e-item")[0]).find("div").find(">input[type=hidden]")[0].value,rt=t.buildTag("input.nodecheckbox","",{},{type:"checkbox",name:"TreeView_Checkbox"+ut+"_"+u+".Checked"}),ot=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox.Index",value:ut+"_"+u});s[e]!=null&&s[e]&&n(rt).prop("checked",!0);n(rt).prop("value",s[e]!=null?"False":s[e])}c=t.buildTag("div");n(c).append(it);f.model.showCheckbox&&(n(c).append(rt),n(c).append(ot));n(c).append(nt);s[a]!=null&&(ft=t.buildTag("spane."+s[a]),n(c).append(ft));n(c).append(g);n(c).append(v);n(c).append(tt);d=t.buildTag("li.e-item","","",{id:s[y]});f.model.allowEditing&&d.addClass("AllowEdit");f.model.showCheckbox&&s[e]!=null&&s[e]&&d.addClass("ischecked");i.length==u+1&&d.addClass("last");d.append(n(c));et=n(d);s.ChildCount>0&&n(n(et).children().find("div")[0]).removeClass("e-icon e-minus").addClass("e-icon e-plus");n(h).append(n(d))});this.element.find(" li#"+i[0][s]+" ul ").remove();this.element.find(" li#"+i[0][s]+"").append(n(h));c=this.element.find(" li#"+i[0][s]);n(c.find(".nodecheckbox[type=checkbox]")).prop("checked")&&this._nodeCheckedAction(n(c).find("span.e-chkbox-wrap").first());this.model.showCheckbox&&n(h).find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange});n(r).removeClass("e-load");this._isCheckedAction()},_createTreeElement:function(i,r,u){var e,a,v,y,o,c,s;if(this.model.showCheckbox){if(t.isNullOrUndefined(r))a=this.element.find(">li"),e=a.length+1;else if(n(r.parents("li.e-item")[0]).children("ul").length==0)e=n(n(r.parents("li.e-item")[0]).find("div")[0]).find(">input[type=hidden]")[0].value+".0";else{var h=n(n(r.parents("li.e-item")[0]).children("ul").find("li").last().find("div").find(">input[type=hidden]")[0]).val(),l=h.split("."),p=parseInt(l[l.length-1])+1,w=h.substring(0,h.length-1);e=w+p}v=t.buildTag("input.nodecheckbox","",{},{type:"checkbox",name:"TreeView_Checkbox"+e+".Checked",value:"False"});y=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox.Index",value:e})}o=t.buildTag("a.e-text CanSelect",i,"",{href:"#",id:this._id+"_active"});t.isNullOrUndefined(u)||o.attr("href",u);c=n(o);this._on(c,"mouseenter",this._mouseEnterEvent);this._on(c,"mouseleave",this._mouseLeaveEvent);var b=t.buildTag("span.child"),k=t.buildTag("div","",{},{role:"presentation"}),f=t.buildTag("div","",{},{role:"presentation"});return n(f).append(k),n(f).append(b),this.model.showCheckbox&&(n(f).append(v),n(f).append(y)),n(f).append(o),s=t.buildTag("li.e-item#"+i,"",{role:"treeitem",tabindex:-1}),this.model.allowEditing&&s.addClass("AllowEdit"),s.append(n(f)),n(s)},_addExpandedNodes:function(t){var i=this.model.expandedNodes;n.inArray(t,i)==-1&&this.model.expandedNodes.push(t)},_removeExpandedNodes:function(t){var i=this.model.expandedNodes;n.inArray(t,i)>-1&&this.model.expandedNodes.splice(n.inArray(t,i),1)},_wireEvents:function(){this._on(this.element,"click",this._ClickEventHandler);this._on(this.element.find(".e-text"),"mouseenter",this._mouseEnterEvent);this._on(this.element.find(".e-text"),"mouseleave",this._mouseLeaveEvent);this.model.allowEditing&&this._allowEditable();this._on(this.element,this.model.expandOn,this._expandEventHandler);this.model.allowKeyboardNavigation&&this._on(this.element,"keydown",this._KeyPress);this._on(this.element,"focus",this._onFocusHandler);this._enableDargDrop()},_unWireEvents:function(){this._off(this.element,"click");this._off(this.element.find(".e-text"),"mouseenter");this._off(this.element.find(".e-text"),"mouseleave");this._preventEditable();this._off(this.element,this.model.expandOn);this.model.allowKeyboardNavigation&&this._off(this.element,"keydown");this._on(this.element,"focus")},_enableDargDrop:function(){this.model.allowDragAndDrop&&(this._drag(),this.model.allowDropChild&&this._childDrop(),this.model.allowDropSibling&&this._siblingDrop())},_allowEditable:function(){this._on(n(document),"click",this._documentClick);this._on(this.element.parent(),"dblclick",this._inlineEdit)},_preventEditable:function(){this._off(n(document),"click");this._off(this.element.parent(),"dblclick")},refresh:function(){this._unWireEvents();this._init()},expandAll:function(){this.model.enabled&&this._expandAll()},collapseAll:function(){this.model.enabled&&this._collapseAll()},checkAll:function(){this.model.showCheckbox&&this.model.enabled&&this._checkAll()},unCheckAll:function(){this.model.showCheckbox&&this.model.enabled&&this._unCheckAll()},getSelectedNode:function(){var t=this.element.find(".e-active");return n(n(t).parents("li.e-item")[0])},getText:function(i){if(t.isNullOrUndefined(i))return!1;return n(n(i).find("a")[0]).text()},selectNode:function(i){var r;!t.isNullOrUndefined(i)&&this.model.enabled&&(r=n(i).hasClass("e-text")?n(i):n(n(i).find(">div >a")[0]),this._nodeSelectionAction(r))},unselectNode:function(i){var r;!t.isNullOrUndefined(i)&&this.model.enabled&&(r=n(i).hasClass("e-text")?n(i):n(n(i).find(">div >a")[0]),this._nodeUnSelectionAction(r))},enableNode:function(i){var r;!t.isNullOrUndefined(i)&&this.model.enabled&&(r=n(i).hasClass("e-text")?n(i):n(n(i).find("a.e-text")[0]),this._nodeEnableAction(r),n(i).parent().find(".nodecheckbox").ejCheckBox("enable"))},disableNode:function(i){var r;!t.isNullOrUndefined(i)&&this.model.enabled&&(r=n(i).hasClass("e-text")?n(i):n(n(i).find(">div >a")[0]),this._nodeDisableAction(r),n(i).find(".nodecheckbox").ejCheckBox("disable"))},addNodes:function(n,i){var r,e,u,h,s,f;if(n&&n.length>0)for(r=this.model.fields,e=0;e<n.length;e++)if(u=n[e],h=u[r.text],h){var c=u[r.id],l=u[r.parentId],a=u[r.linkAttribute]?u[r.linkAttribute]:"#",o=i&&i.length!=0?i:null;if(t.isNullOrUndefined(o)&&(s=l?this.element.find("#"+l):null,o=s&&s.length!=0?s.children("div").find("a"):null),t.isNullOrUndefined(o))continue;f=this._createTreeElement(h,null,a);c?f.attr("id",c):f.removeAttr("id");this._appendNode(o,f);f.find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange});this.model.allowDragAndDrop&&f.find("a").addClass("e-draggable e-droppable")}},addNode:function(i,r,u){if(this.model.enabled){var f=null,s=null,o=this.element,h=o.children().length,e=t.isNullOrUndefined(u)?o.find(".e-active"):u;e.length==0?(s=h==0||o.children().children().length==0?t.buildTag("ul"):o.children()[h-1],f=this._createTreeElement(i,null,r),n(s).append(f),this._appendNode(e,s),n(f).find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange})):(this._expandNode(n(n(e).parents("li.e-item")[0])),f=this._createTreeElement(i,e,r),this._appendNode(e,f),this.model.showCheckbox&&n(f).find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}));this._applyFirstLastChildClass();this._enableDargDrop();this._modifiCss()}},removeNode:function(i){this.model.enabled&&(t.isNullOrUndefined(i)||(element=n(i).hasClass("e-text")?n(i):n(n(i).find(">div >a")[0])),this._removeNode(element))},getCheckedNodes:function(){return this.element.find('input.nodecheckbox[value="True"]').closest("li")},checkNode:function(i){!t.isNullOrUndefined(i)&&this.model.enabled&&this._nodeCheckedAction(n(i).find("span.e-chkbox-wrap").first())},unCheckNode:function(i){!t.isNullOrUndefined(i)&&this.model.enabled&&this._nodeUnCheckedAction(n(i).find("span.e-chkbox-wrap").first())},expandNode:function(n){!t.isNullOrUndefined(n)&&this.model.enabled&&this._expandNode(n)},collapseNode:function(n){!t.isNullOrUndefined(n)&&this.model.enabled&&this._collpaseNode(n)},showNode:function(n){!t.isNullOrUndefined(n)&&this.model.enabled&&n.css("visibility","")},hideNode:function(n){!t.isNullOrUndefined(n)&&this.model.enabled&&n.css("visibility","hidden")},show:function(){this.element.css("visibility","")},hide:function(){this.element.css("visibility","hidden")},isNodeChecked:function(t){return this._isChecked(n(t).find("input.nodecheckbox")[0])},isExpanded:function(n){return this._isExpanded(n)},_isNodeExpanded:function(i){if(!t.isNullOrUndefined(i)){var r=n(i).children().filter("ul");return n(r).is(":not(:hidden)")}},hasChildNode:function(i){var r=!1;return t.isNullOrUndefined(i)||(r=n(i).children().length<2?!1:!0),r},_onNodeExpand:function(n){this._trigger("nodeExpand",n)},_onNodeCollapse:function(n){this._trigger("nodeCollapse",n)},_onBeforeExpand:function(n){return this._trigger("beforeExpand",n)},_onBeforeCollapse:function(n){return this._trigger("beforeCollapse",n)},_onNodeSelect:function(n){this._trigger("nodeSelect",n)},_onChecked:function(i,r){var u=n(i).parents("li").first(),f=u.find(".e-text").first().text(),e=this._isChecked(i),o=t.isNullOrUndefined(r)?"":t.isNullOrUndefined(r.event)?"":r.event,s={currentElement:u,value:f,isChecked:e,event:o};this._trigger("nodeCheck",s)},_onUnChecked:function(i,r){var u=n(i).parents("li").first(),f=u.find(".e-text").first().text(),e=this._isChecked(i),o=t.isNullOrUndefined(r)?"":t.isNullOrUndefined(r.event)?"":r.event,s={currentElement:u,value:f,isChecked:e,event:o};this._trigger("nodeUncheck",s)},_onDragStarts:function(n){return this._trigger("nodeDragStart",n)},_onDrag:function(n){return this._trigger("nodeDrag",n)},_onDragStop:function(n){return this._trigger("nodeDragStop",n)},_onDropped:function(n){return this._trigger("nodeDropped",n)},_onClick:function(n){this._trigger("nodeClick",n)}})}(jQuery,Syncfusion),function(n,t){t.widget("ejUploadbox","ej.Uploadbox",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-uploadbox",defaults:{browseButtonText:"Browse",uploadButtonText:"Upload",asyncUpload:!0,enabled:!0,multipleFilesSelection:!1,autoUpload:!1,showFileDetails:!0,extensionsAllow:"",extensionsDeny:"",saveUrl:"",removeUrl:"",cssClass:"",enableRTL:!1,create:null,fileSelect:null,begin:null,cancel:null,complete:null,remove:null,error:null,destroy:null},dataTypes:{browseButtonText:"string",uploadButtonText:"string",disbled:"boolean",multipleFilesUpload:"boolean",autoUpload:"boolean",showFileDetails:"boolean",extensionsAllow:"string",extensionsDeny:"string",saveUrl:"string",removeUrl:"string",cssClass:"string",enableRTL:"boolean"},disable:function(){this.element.addClass("e-disable");this.model.enabled=!1},enable:function(){this.element.hasClass("e-disable")&&(this.element.removeClass("e-disable"),this.model.enabled=!0)},_init:function(){this.s=t.browserInfo();this._initialize();this._wireEvents();this.model.asyncUpload||this._initObjectsSyncUpload();this._controlStatus(this.model.enabled)},_setModel:function(n){if(!this.model.enabled&&t.isNullOrUndefined(n.enabled))return!1;for(var i in n)switch(i){case"browseButtonText":this._setBrowseButtonText(n[i]);break;case"uploadButtonText":this._setUploadButtonText(n[i]);break;case"cssClass ":this._setSkin(n[i]);break;case"enableRTL":this._setRTL(n[i]);break;case"enabled":this._controlStatus(n[i])}},_controlStatus:function(n){n!=!0?this.disable():this.enable()},_setRTL:function(n){n?(this.element.addClass("e-rtl"),this.s.name=="msie"&&this.inputupload.css("right","-153px")):(this.element.removeClass("e-rtl"),this.s.name=="msie"&&this.inputupload.css("right","0px"));this.updialog&&this.updialog.ejDialog({enableRTL:n})},_setBrowseButtonText:function(n){this.buttondiv.val(n)},_setUploadButtonText:function(n){this.element.find(".e-uploadbtn").html(n)},_destroy:function(){this.element.hasClass("e-uploadbox")&&(this.element.removeClass("e-uploadbox e-widget"),this.element.empty())},_setSkin:function(n){this.element.removeClass(this.model.cssClass);this.element.addClass(n)},_initialize:function(){this.control=this.element[0];this.element.addClass("e-widget "+this.model.cssClass);this.innerdiv=t.buildTag("div.e-selectpart e-select");this.element.append(this.innerdiv);this.buttondiv=t.buildTag("input.e-inputbtn e-btn#"+this.control.id+"_SelectButton","",{},{type:"button",value:this.model.browseButtonText});this.inputupload=t.buildTag("input.e-uploadinput","",{},{type:"file",name:this.control.id});this.model.multipleFilesSelection&&this.inputupload.attr(multiple,"multiple");this.innerdiv.append(this.buttondiv);this.innerdiv.append(this.inputupload);this._Selector=this.buttondiv[0];this._setRTL(this.model.enableRTL);this.Uploadframes=[];this.UploadForms=[];this.UploadType=this._isXhrSupported()?"Xhr":"IFrame"},_wireEvents:function(){this._on(this.element,"click",this._disableclickselect);this._bindInputChangeEvent()},_disableclickselect:function(n){this.element.hasClass("e-disable")&&n.preventDefault()},_bindInputChangeEvent:function(){this._on(this.inputupload,"change",this._inputValueChange)},_inputValueChange:function(t){var i,r;i=n(t.target);this.element.find(".e-uploadbtn").removeAttr("disabled").removeClass("e-disable");r=this._getInputFileInfo(i);this._trigger("fileSelect");this._isAllowed(r)&&(this.model.asyncUpload?this.UploadType=="Xhr"?this._onXhrSelect(t):this._onSelectIFrame(t):this._onSelectSyncUpload(t))},__uploadButtonClick:function(t){this.UploadType=="Xhr"?this._xhrOnUploadButtonClick(t):this._onUploadButtonClickIFrame(t);n(t.target).attr("disabled","disabled").addClass("e-disable")},_actionClick:function(t){var r,i,u;r=n(t.target);i=r.closest(".e-upload-file");u=n(i).data("file");r.hasClass("e-file-delete")?(this._trigger("remove",{fileStatus:u}),this.UploadType=="Xhr"?this._xhrOnRemove(t,i):this._onRemoveIFrame(t,i)):r.hasClass("e-file-cancel")?(this._trigger("cancel",{fileStatus:u}),this.model.asyncUpload?this.UploadType=="Xhr"?this._xhrOnCancel(t,i):this._onCancelIFrame(t,i):this._onCancelSyncUpload(t,i)):r.hasClass("e-file-retry")&&(this.UploadType=="Xhr"?this._xhrOnRetry(t,i):this._onRetryIFrame(t,i))},_removeFileEntry:function(n){n.remove()},_isFileUpload:function(t){var i=n(t).find("div.e-icon");return i.is(".e-file-cancel")},_isXhrSupported:function(){return this.s.name=="msie"&&parseInt(this.s.version)<9||this.s.name=="safari"&&this.s.name=="chrome"&&this.s.version=="536"?!1:typeof FormData!="undefined"&&typeof File!="undefined"},_getFileName:function(t){return n.map(this._getAllFileInfo(t),function(n){return n.name}).join(", ")},_getFileSize:function(t){var i=this;return n.map(this._getAllFileInfo(t),function(n){return i._formatSize(n.size)}).join(", ")},_pushFile:function(i,r){var s,f,e,u,o,h,c,l;for(h=n("<div class='e-head-content'><div class='e-file-head e-head-name'>Name<\/div><div class='e-file-head e-head-size'>Size<\/div><div class='e-file-head e-head-status'>Status<\/div><\/div>"),filedialog=this.updialog,filedialog&&filedialog.length!=0?this.model.showFileDetails&&this.diaObj.open():(this.updialog=t.buildTag("div.uploaddialog#"+this.element[0].id+"_dialog","",{},{title:"Upload Box"}),this.element.append(this.updialog)),s=this.element.find(".e-ul"),s.length==0&&(h.appendTo(this.updialog),s=t.buildTag("ul.e-ul").appendTo(this.updialog),fileListActions=t.buildTag("div.e-file-upload").appendTo(this.updialog),dialogActions=t.buildTag("button.e-uploadclosebtn e-btn e-select","Cancel",{},{type:"button"}).appendTo(fileListActions),this._on(dialogActions,"click",this._dialogclose)),c=(this.element.offset().left+this.element.width())/3,l=this.element.offset().top,this.updialog.ejDialog({showOnInit:!1,width:510,cssClass:this.model.cssClass,close:n.proxy(this._uploadFileListDelete,this),position:{X:c,Y:l},enableRTL:this.model.enableRTL,content:"#"+this.element[0].id,resizable:!1}),this.diaObj=this.updialog.data("ejDialog"),u=0;u<i.length;u++)f=n("<li class='e-upload-file'><div class='e-file-list'><div class='e-file-progress e-file-view'><div class='e-file-name e-file-view'><span class='e-file-name-txt'>"+i[u].name+"<\/span><\/div><\/div><div class='e-file-size e-file-view'><span class='e-file-name-txt'>"+i[u].size+"<\/span><\/div><div class='e-file-percentage e-file-view'><div class='e-file-progress-bar'><div class='e-file-progress-status'><\/div><\/div><\/div><div class='e-action-perform'><div class='e-icon e-file-view'><\/div><\/div><\/div><\/li>").appendTo(s).data(r),(this._getFileSize(i[u]).toString().toLowerCase()=="nankb"||i[u].size==null)&&f.find(".e-file-size").remove(),o="cancel",f.find(".e-icon").remove().addClass(o.toString()),o=="cancel"?e=t.buildTag("div.e-icon e-file-cancel","",{},{title:"cancel"}):o=="remove"?e=t.buildTag("div.e-icon e-file-delete","",{},{title:"remove"}):o=="retry"&&(e=t.buildTag("div.e-icon e-file-retry","",{},{title:"retry"})),f.find(".e-action-perform").append(e),this._on(e,"click",this._actionClick);return this.model.showFileDetails&&this.diaObj.open(),f},_pushFileDetails:function(i){var u,e,r,f,o,s;return e=n("<div class='e-head-content'><div class='e-file-head e-head-name'>Name<\/div><div class='e-file-head e-head-size'>Size<\/div><div class='e-file-head e-head-status'>Status<\/div><\/div>"),u=this,filedialog=this.updialog,filedialog&&filedialog.length!=0?this.model.showFileDetails&&u.diaObj.open():(this.updialog=t.buildTag("div.uploaddialog#"+this.element[0].id+"_dialog","",{},{title:"Upload Box"}),this.element.append(this.updialog)),r=this.element.find(".e-ul"),r.length==0&&(e.appendTo(this.updialog),r=t.buildTag("ul.e-ul").appendTo(this.updialog),fileListActions=t.buildTag("div.e-file-upload").appendTo(this.updialog),dialogActions=t.buildTag("button.e-uploadclosebtn e-btn e-select","Cancel",{},{type:"button"}).appendTo(fileListActions),this._on(dialogActions,"click",this._dialogclose)),o=(this.element.offset().left+this.element.width())/3,s=this.element.offset().top+this.element.height(),f=n("<li class='e-upload-file'><div class='e-file-list'><div class='e-file-progress e-file-view'><div class='e-file-name e-file-view'><span class='e-file-name-txt'>"+i.name+"<\/span><\/div><\/div><div class='e-file-size e-file-view'><span class='e-file-name-txt'>"+this._formatSize(0)+"\\"+this._formatSize(i.size)+"<\/span><\/div><div class='e-file-percentage e-file-view'><div class='e-file-progress-bar'><div class='e-file-progress-status'><\/div><\/div><\/div><div class='e-action-perform'><div class='e-icon e-file-view'><\/div><\/div><\/div><\/li>").appendTo(r).data("file",i),this.updialog.ejDialog({showOnInit:!1,width:520,height:"auto",cssClass:this.model.cssClass,close:n.proxy(this._uploadFileListDelete,this),position:{X:o,Y:s},enableRTL:this.model.enableRTL,content:"#"+this.element[0].id,resizable:!1}),u.diaObj=this.updialog.data("ejDialog"),this.model.showFileDetails&&u.diaObj.open(),f},_setProgress:function(t,i,r){var u,f,e,o;u=n(t).find(".e-file-progress-status");u.width(i+"%");f=n(t).find(".e-file-size .e-file-name-txt");e=this._formatSize(r.loaded);o=this._formatSize(r.total);f.html(e+"\\"+o)},_setAction:function(n,i){var r;n.find(".e-icon").remove().addClass(i.toString());i=="cancel"?r=t.buildTag("div.e-icon e-file-cancel","",{},{title:"cancel"}):i=="remove"?r=t.buildTag("div.e-icon e-file-delete","",{},{title:"remove"}):i=="retry"&&(r=t.buildTag("div.e-icon e-file-retry","",{},{title:"retry"}));n.find(".e-action-perform").append(r);this._on(r,"click",this._actionClick)},_setStatus:function(n,i){var u,r=t.buildTag("div");i=="success"&&(n.find(".file-status").addClass("e-file-status-success").html("Completed"),n.find(".e-file-percentage").html("").attr("title","Completed"),r.addClass("e-icon e-file-percentage-success"),n.find(".e-file-percentage").append(r));i=="failed"&&(n.find(".file-status").addClass("e-file-status-failed").html("Failed"),n.find(".e-file-percentage").html("").attr("title","Failed"),r.addClass("e-icon e-file-percentage-failed"),n.find(".e-file-percentage").append(r));i=="progress"&&n.find(".file-status").addClass("file-status-inprogress").html("in progress");i=="uploading"&&(n.find(".file-status").addClass("file-status-inprogress").html("uploading"),u=n.find(".e-file-percentage"),u.html(""))},_createInputandBind:function(){var n=t.buildTag("input","",{},{type:"file"});n.attr("name",this.control.id).attr("autocomplete","off").attr("class","e-uploadinput");this.model.multipleFilesUpload&&n.attr("multiple","multiple");n.appendTo(this.element.find(".e-selectpart"));this._bindInputChangeEvent()},_showUploadButton:function(){var n=this.element.find(".e-uploadbtn");n.length==0&&(n=t.buildTag("button.e-uploadbtn e-btn e-select",this.model.uploadButtonText,{},{type:"button"}),this.element.find(".e-file-upload").append(n),this._on(n,"click",this.__uploadButtonClick))},_resetFileInput:function(n){var t=n.clone(!1,!1);this._on(t,"change",this._inputValueChange);n.replaceWith(t)},_isAllowed:function(t){var f,i,u,r,e,o;return f=this.element.find(".e-uploadinput"),i=!1,u=this,this.model.extensionsAllow!=""&&(e=this.model.extensionsAllow.split(","),n(t).each(function(){if(n.inArray(this.extension,e)==-1)return r={action:"ExtensionsAllow",files:t},u._trigger("error",r),i=!0,!1})),this.model.extensionsDeny!=""&&(o=this.model.extensionsDeny.split(","),n(t).each(function(){if(n.inArray(this.extension,o)!=-1)return r={action:"ExtensionsDeny",files:t},u._trigger("error",r),i=!0,!1})),i&&this._resetFileInput(f),!i},_fileListRemove:function(){fileList=this.element.find(".e-upload-file .e-file-delete");fileList.length==0&&(this.element.find(".e-uploadbtn").attr("disabled","disabled").addClass("e-disable"),this.updialog.ejDialog("close"))},_uploadHide:function(){fileList=this.element.find(".e-upload-file .e-file-cancel");fileList.length==0&&(this.element.find(".e-ul").empty(),this.element.find(".e-uploadbtn").attr("disabled","disabled").addClass("e-disable"),this.updialog.ejDialog("close"))},_dialogclose:function(){var n;this.updialog.find(".e-ul").empty();n=this.element.find(".e-uploadinput");this._resetFileInput(n);this.updialog.ejDialog("close")},_uploadFileListDelete:function(){var n;this.updialog.find(".e-ul").empty();n=this.element.find(".e-uploadinput");this._resetFileInput(n)},_onXhrSelect:function(t){var r,u,i,f;r=n(t.target);u=this._getInputFileInfo(r);this._xhrBeforeUpload(u,r);i=this;n.each(u,function(t,r){f=n(r).data("filelist");i._setAction(f,"cancel");i.model.autoUpload?i._xhrPerformUpload(r):i._showUploadButton()})},_xhrBeforeUpload:function(t){var i,r,u,f;return i=t,r=this,n.each(i,function(t,i){u=r._createFormObjectXhr(i);n(i).data("formobject",u);f=r._pushFileDetails(i);n(i).data("filelist",f)}),i},_xhrPerformUpload:function(t){var u,i,f,r;this._trigger("begin");u=this.model.saveUrl;i=this;f=n(t).data("formobject");r=new XMLHttpRequest;n(t).data("xhr",r);r.addEventListener("load",function(n){i._onRequestSuccess(i,n,t)},!1);r.addEventListener("error",function(n){i._onRequestError(i,n,t)},!1);r.upload.addEventListener("progress",function(n){i._onRequestProgress(i,n,t)},!1);r.open("POST",u);r.send(f)},_xhrOnUploadButtonClick:function(){var t,i,r;t=this;n(".e-ul li.e-upload-file",t.control).each(function(){i=n(this);r=t._isFileUpload(i);r&&t._xhrPerformUpload(n(i).data("file"))})},_xhrOnRemove:function(t,i){var r=n(i).find(".e-file-name").text().toString().split(","),u=this;n.ajax({url:this.model.removeUrl,type:"POST",data:"fileNames="+r,success:function(){n(i).remove();u._fileListRemove()}})},_xhrOnCancel:function(t,i){var r,u;r=n(i).data("file");u=n(r).data("xhr");u&&n(r).data("xhr").abort();n(r).data("xhr",null);n(i).data("file",null);n(i).remove();this._uploadHide()},_xhrOnRetry:function(t,i){var r=n(i).data("file");this._xhrPerformUpload(r)},_onRequestSuccess:function(t,i,r){var u=n(r).data("xhr");u.status>=200&&u.status<=299?t._onXhrUploadSuccess(t,i,r):t._onRequestError(t,i,r)},_onXhrUploadSuccess:function(t,i,r){var u,e,o,s,f,h,c;u=n(r).data("filelist");e=n(r).data("xhr");t.model.removeUrl?(t._setAction(u,"remove"),t._setStatus(u,"success")):(u.find(".e-icon").remove(),t._setStatus(u,"success"));n(r).length>0&&(o=n(u).find(".e-file-progress-status"),o.width("100%"),s=n(r)[0].size,f=this._formatSize(s),h=n(u).find(".e-file-size .e-file-name-txt"),h.html(f+"\\"+f));c={files:r,xhr:e,e:i};t._trigger("complete",c)},_onRequestError:function(t,i,r){var u,f,e;u=n(r).data("filelist");f=n(r).data("xhr");t._setAction(u,"retry");t._setStatus(u,"failed");e={action:"Error",files:r,xhr:f,e:i};t._trigger("error",e)},_onRequestProgress:function(t,i,r){var f,u;f=Math.round(i.loaded*100/i.total);u=n(r).data("filelist");t._setProgress(u,f,i);t._setStatus(u,"progress")},_createFormObjectXhr:function(n){var t=new FormData;return t.append(this.control.id,n.rawFile),t},_getInputFileInfo:function(n){var t=n[0];return t.files?this._getAllFileInfo(t.files):[{name:this._GetName(t.value),extension:this._getFileExtensionType(t.value),size:this._getFileSizeinIE(t.value)}]},_getFileSizeinIE:function(n){var t,i;t=null;i=null;try{t=new ActiveXObject("Scripting.FileSystemObject")}catch(r){i=null}return t&&(i=t.getFile(n).size),i},_getFileExtensionType:function(n){return n.match?n.match(/\.([^\.]+)$/)[0]||"":""},_getAllFileInfo:function(t){var i=this;return n.map(t,function(n){return i._getFileInfo(n||t)})},_GetName:function(n){var t=n.lastIndexOf("\\");return t!=-1?n.substr(t+1):n},_getFileInfo:function(n){var t=n.name||n.fileName||n;return{name:t,extension:this._getFileExtensionType(t),size:n.size||n.fileSize,rawFile:n}},_formatSize:function(n){var t=-1;do n=n/1024,t++;while(n>99);return Math.max(n,.1).toFixed(1)+["KB","MB","GB","TB","PB","EB"][t]},_onSelectIFrame:function(t){var r,u,i,f;r=n(t.target);u=this._getInputFileInfo(r);i=this._beforeUploadIFrame(u);f=i.data("iframe");this.model.autoUpload?this._performUploadIFrame(i):this._showUploadButton();this._off(this.inputupload,"change");this._bindInputChangeEvent()},_onRemoveIFrame:function(t,i){var r,u,f,e;r=i.data("iframe");e=n(i).data("file");u=e[0].name;f=this;r?(this._removeFileEntry(i),this.model.removeUrl&&n.ajax({url:this.model.removeUrl,type:"POST",data:"fileNames="+u,success:function(){f._fileListRemove()}})):this._removeFileEntry(i)},_onCancelIFrame:function(n,t){var i;this._trigger("cancel",{Status:t});i=t.data("iframe");i&&(this._removeFileEntry(t),typeof i.stop!="undefined"?i.stop():i.document&&(i.document.execCommand("Stop"),i.contentWindow.location.href=i.contentWindow.location.href),this._processServerResponse(i,""));this._uploadHide()},_onRetryIFrame:function(n,t){this._performUploadIFrame(t)},_beforeUploadIFrame:function(n){var t,r,i;return t=this._createFrame(this.control.id+"_Iframe"+this.Uploadframes.length),this.Uploadframes.push(t),r=this._createForm(this.model.saveUrl,t[0].id),this.element.find("input.e-uploadinput").removeClass("e-uploadinput").css("display","none").appendTo(r),this._createInputandBind(),i=this._pushFile(n,{iframe:t,form:r,file:n}),t.data({filelist:i}),this._setAction(i,"cancel"),i},_performUploadIFrame:function(n){var r,t,i;this._trigger("begin");r=n.data("file");this._setStatus(n,"uploading");t=n.data("iframe");i=n.data("form");t.appendTo(document.body);i.appendTo(document.body);this._on(t,"load",this._removeFramesIFrame);i.submit()},_onUploadButtonClickIFrame:function(){var t,i,r;t=this;n(".e-ul li.e-upload-file",t.control).each(function(){i=n(this);r=t._isFileUpload(i);r&&t._performUploadIFrame(i)})},_removeFramesIFrame:function(t){var r,u,i;r=n(t.target);i=r.data("filelist");try{u=r.contents().text()}catch(t){u="Error trying to get server response: "+t}u==""?(this._processServerResponse(r,u),this._setIframeProgress(i,100,t),this._setStatus(i,"progress"),this._successIframeUpload(i)):this._failureIframeUpload(i)},_setIframeProgress:function(t,i){var r;r=n(t).find(".e-file-progress-status");r.width(i+"%")},_successIframeUpload:function(n){fileEntry=n.data("file");this.model.removeUrl?(this._setAction(n,"remove"),this._setStatus(n,"success")):(n.find(".file-action").remove(),this._setStatus(n,"success"));args={files:fileEntry};this._trigger("complete",args)},_failureIframeUpload:function(n){fileEntry=n.data("file");this.model.saveUrl?(this._setAction(n,"retry"),this._setStatus(n,"failed")):(n.find(".file-action").remove(),this._setStatus(n,"failed"));args={files:fileEntry};this._trigger("error",args)},_processServerResponse:function(t){var i;i=n(document.body).find("form[target='"+n(t).attr("id")+"']");setTimeout(function(){i.remove();t.remove()},0)},_createDivBlock:function(n){return t.buildTag("div."+n)},_createForm:function(n,i){return t.buildTag("form","",{},{enctype:"multipart/form-data",method:"POST",action:n,target:i})},_createFrame:function(n){return t.buildTag("iframe#"+n,"",{display:"none"},{name:n})},_createInput:function(n){return t.buildTag("input","",{},{type:"file",name:n})},_initObjectsSyncUpload:function(){this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data");this._wireEventsSyncUpload()},_wireEventsSyncUpload:function(){var t=this.element.closest("form")[0];this._on(n(t),"submit",this._formSubmitSyncUpload);this._on(n(t),"reset",this._formResetSyncUpload)},_onSelectSyncUpload:function(t){var i,r,u,f;i=n(t.target);r=this._getInputFileInfo(i);u=n(".e-selectpart",this.control);this.element.find("input.e-uploadinput").removeClass("e-uploadinput").css("display","none").appendTo(u);this._createInputandBind();f=this._pushFile(r,{file:r,Input:i})},_onCancelSyncUpload:function(n,t){var i=t.data("Input");t.data("file",null);t.data("Input",null);t.remove();i.remove()},_formSubmitSyncUpload:function(){var t,i;t=n(".e-uploadinput",this.control);t.attr("name","");i=this.control;setTimeout(function(){t.attr("name",i.id)},0)},_formResetSyncUpload:function(){n(".e-selectpart",this.control).children('input[type="file"]').each(function(){this.className==" "&&n(this).remove()});n(".e-ul",this.control).remove()}})}(jQuery,Syncfusion),function(n,t,i){t.widget("ejRTE","ej.RTE",{element:null,model:null,_rootCSS:"e-rte",validTags:["textarea"],_setFirst:!1,defaults:{allowEditing:!0,allowKeyboardNavigation:!0,cssClass:"",height:"370",width:"786",enabled:!0,maxLength:7e3,minWidth:400,maxWidth:null,minHeight:280,maxHeight:null,showToolbar:!0,showFooter:!1,showHtmlSource:!0,showWordCount:!0,showHtmlTagInfo:!0,showClearAll:!0,iframeAttribute:"color:#5C5C5C",showClearFormat:!0,showFontOption:!0,showDimensions:!1,locale:"en-US",name:"",tools:{formatStyle:["format"],style:["bold","italic","underline","strikethrough"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],lists:["unorderedList","orderedList"],indenting:["outdent","indent"],doAction:["undo","redo"],links:["createLink"],images:["image","video"],tables:["createTable","addRowAbove","addRowBelow","addColumnLeft","addColumnRight","deleteRow","deleteColumn","deleteTable"]},toolsList:["formatStyle","font","style","scripts","alignment","lists","indenting","copyPaste","doAction","clear","links","images","tables","casing","customTool"],colorCode:["000000","FFFFFF","C4C4C4","ADADAD","595959","262626","4f81bd","dbe5f1","b8cce4","95b3d7","366092","244061","c0504d","f2dcdb","e5b9b7","d99694","953734","632423","9bbb59","ebf1dd","d7e3bc","c3d69b","76923c","4f6128","8064a2","e5e0ec","ccc1d9","b2a2c7","5f497a","3f3151","f79646","fdeada","fbd5b5","fac08f","e36c09","974806"],format:[{text:"Paragraph",value:"<p>",spriteCssClass:"e-paragraph"},{text:"Quotation",value:"<blockquote>",spriteCssClass:"e-quotation"},{text:"Heading 1",value:"<h1>",spriteCssClass:"e-h1"},{text:"Heading 2",value:"<h2>",spriteCssClass:"e-h2"},{text:"Heading 3",value:"<h3>",spriteCssClass:"e-h3"},{text:"Heading 4",value:"<h4>",spriteCssClass:"e-h4"},{text:"Heading 5",value:"<h5>",spriteCssClass:"e-h5"},{text:"Heading 6",value:"<h6>",spriteCssClass:"e-h6"}],fontName:[{text:"Segoe UI",value:"Segoe UI"},{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1",value:"1"},{text:"2 (10pt)",value:"2"},{text:"3 (12pt)",value:"3"},{text:"4 (14pt)",value:"4"},{text:"5 (18pt)",value:"5"},{text:"6 (24pt)",value:"6"},{text:"7 (36pt)",value:"7"}],tableRows:7,tableColumns:9,colorPaletteRows:6,colorPaletteColumns:6,showCustomTable:!0,value:null,undoStackLimit:50,enableResize:!0,enablePersistence:!1,enableRTL:!1,change:null,execute:null,keydown:null,keyup:null,create:null,destroy:null},dataTypes:{iframeAttribute:"string",cssClass:"string",name:"string",enabled:"boolean",enablePersistence:"boolean",tools:"data",toolsList:"data",colorCode:"data",format:"data",fontName:"data",fontSize:"data"},observables:["value"],value:t.util.valueFunction("value"),_setModel:function(n){var i,f,r,u;if(!this.model.enabled&&t.isNullOrUndefined(n.enabled))return!1;for(i in n)switch(i){case"allowEditing":this._enableEdit(n[i]);break;case"showToolbar":n[i]?t.isNullOrUndefined(this._rteToolbar)?this._renderToolBar():this._rteToolbar.show():this._rteToolbar.hide();this._setIframeHeight();break;case"showFooter":this.model.showFooter=n[i];n[i]?t.isNullOrUndefined(this._rteFooter)?this._renderFooter():this._rteFooter.show():this._rteFooter.hide();this._setIframeHeight();break;case"enabled":this._disabled(!n[i]);break;case"height":this._rteWapper.height(n[i]);this._setIframeHeight();break;case"width":this._rteWapper.width(n[i]);break;case"cssClass":this._changeSkin(n[i]);break;case"showHtmlSource":this._footerElement("div.e-rte-source",n[i]);break;case"showHtmlTagInfo":this._footerElement("div.e-rte-htmltaginfo",n[i]);break;case"showWordCount":this._footerElement("div.e-rte-wordcount",n[i]);break;case"showClearAll":this._footerElement("div.clearAll",n[i]);break;case"showClearFormat":this._footerElement("div.clearFormat",n[i]);break;case"enableResize":this._footerElement("div.e-rte-resize",n[i]);break;case"fontName":this._fontStyleDDL.ejDropDownList({dataSource:n[i]});break;case"fontSize":this._fontSizeDDL.ejDropDownList({dataSource:n[i]});break;case"format":this._formatDDL.ejDropDownList({dataSource:n[i]});break;case"value":this._getDocument().body.innerHTML=t.util.getVal(n[i]);break;case"showDimensions":n[i]?(this._rteWapper.find("#"+this._rteId+"_imgdimensions").show(),this._rteWapper.find("#"+this._rteId+"_videodimensions").show()):(this._rteWapper.find("#"+this._rteId+"_imgdimensions").hide(),this._rteWapper.find("#"+this._rteId+"_videodimensions").hide());break;case"locale":this.model.locale=n[i];f=this.model;this.element.ejRTE("destroy").ejRTE(f);break;case"tableRows":this.model.tableRows=n[i];r=this._createTable.find("div.e-rte-table").html("");this._drawTable(r);break;case"iframeAttribute":this._updateIframeSkin(n[i]);break;case"tableColumns":this.model.tableColumns=n[i];r=this._createTable.find("div.e-rte-table").html("");this._drawTable(r);break;case"showCustomTable":u=this._createTable.find("div.customtable-group");n[i]?t.isNullOrUndefined(this._customTableDialog)?this._createCustomTable():u.show():u.hide();break;case"colorPaletteRows":this.model.colorPaletteRows=n[i];this._updateColorPalette();break;case"colorPaletteColumns":this.model.colorPaletteColumns=n[i];this._updateColorPalette();break;case"colorCode":this.model.colorCode=n[i];this._updateColorPalette();break;case"enableRTL":this._enableRTL(n[i])}},_init:function(){t.isNullOrUndefined(this.element)||this.element[0].type!="textarea"||(this._initialize(),this._render(),this.model.allowEditing&&this._wireEvents(),this._updateIframeSkin(this.model.iframeAttribute))},_destroy:function(){this.element.insertBefore(this._rteWapper);t.isNullOrUndefined(this._formatDDL)||this._formatDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontStyleDDL)||this._fontStyleDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontSizeDDL)||this._fontSizeDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontColorSplit)||this._fontColorSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._bgColorSplit)||this._bgColorSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._customTableDialog)||t.isNullOrUndefined(this._customTableDialog.find("#"+this._rteId+"_ddlAlignment"))||this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").ejDropDownList("destroy");this._rteWapper.remove();this.element.show();this._createTable=null},_initialize:function(){this._toolsList=this.model.toolsList;this._rteId=this.element[0].id;this._backupArray=[];this._undoRedoPosition=0;this._fontColor="";this._bgColor="";this._imgWidth=0;this._imgHeight=0;this._videoWidth=0;this._videoHeight=0;this._keypressFlag=!0;this._styleItems=t.isNullOrUndefined(this.model.tools.style)?[]:this.model.tools.style;this._alignItems=t.isNullOrUndefined(this.model.tools.alignment)?[]:this.model.tools.alignment;this._listItems=t.isNullOrUndefined(this.model.tools.lists)?[]:this.model.tools.lists;this._scriptsItems=t.isNullOrUndefined(this.model.tools.scripts)?[]:this.model.tools.scripts},_render:function(){this._renderWrapper();this._checkNameAttr();this.model.showToolbar&&this._renderToolBar();this._renderEditArea();this.model.showFooter&&this._renderFooter();this._setIframeHeight();this._renderAlertDialog();this._focus()},_checkNameAttr:function(){this.model.name?this.element.attr({name:this.model.name}):this.element.attr({name:this.element[0].id})},_enableEdit:function(n){n?(this._wireEvents(),this.model.showToolbar&&this._toolBarItems.ejToolbar("option","click",this._toolBarClick),this._rteIframe.contents().find("body").attr("contenteditable",!0)):(this._unwireEvents(),this.model.showToolbar&&this._toolBarItems.ejToolbar("option","click",null),this._rteIframe.contents().find("body").attr("contenteditable",!1))},_changeSkin:function(n){this._rteWapper.removeClass(this.model.cssClass).addClass(n);this._subControlsSetModel("cssClass",n)},_updateIframeSkin:function(n){var t=this._rteIframe.contents().find("body");this.model.enableRTL===!0?(t.attr("style",n),this._enableRTL(this.model.enableRTL)):t.attr("style",n)},_renderWrapper:function(){this._rteWapper=t.buildTag("div.e-rte e-rte-wrapper "+this.model.cssClass+"#"+this._rteId+"_wrapper","",{},{role:"presentation"}).insertBefore(this.element);this._rteWapper.height(this.model.height).width(this.model.width);this._rteWapper.append(this.element.hide())},_renderToolBar:function(){this._rteToolbar=t.buildTag("div.e-rte-toolbar #"+this._rteId+"_tools").insertAfter(this.element);this._crateToolbarTemplate();var n={};n.click=this.model.allowEditing?this._toolBarClick:null;n.cssClass=this.model.cssClass;n.enableRTL=this.model.enableRTL;this._toolBarItems.ejToolbar(n);this._initToolBarItems()},_crateToolbarTemplate:function(){this._toolBarItems=t.buildTag("div#"+this._rteId+"_toolbar").appendTo(this._rteToolbar).height(30);for(var n in this._toolsList)n=this._toolsList[n],t.isNullOrUndefined(this.model.tools[n])||(n=="customTool"?t.isNullOrUndefined(this.model.tools[n])||this._customTools(this.model.tools[n]):this.model.tools[n].length>0&&this._createToolsItems(this.model.tools[n],n))},_createToolsItems:function(i,r){var f,e,u;if(r=="font"&&!this.model.showFontOption)return!1;for(f=t.buildTag("ul#"+(this._rteId+r)),r=="font"&&f.addClass("e-rte-fontgroup"),r=="formatStyle"&&f.addClass("e-rte-format"),u=0;u<i.length;u++)e=n("<li id='"+(this._rteId+i[u].trim())+"' title='"+this._getLocalizedLabels(i[u].trim())+"' ><div class='e-rte-toolbar-icon "+i[u]+"'><\/div><\/li>"),e.appendTo(f);f.appendTo(this._toolBarItems)},_customTools:function(i){var r,e,f,u;for(r in i)e=t.buildTag("ul"),f=n("<li id='"+i[r].name+"' title='"+i[r].tooltip+"' ><div class='"+(t.isNullOrUndefined(i[r].css)?"":i[r].css)+"'>"+i[r].name+"<\/div><\/li>"),u=i[r].action,typeof u=="string"&&(u=t.util.getObject(u,window)),t.isNullOrUndefined(i[r].action)||this._on(f,"click",u),n(i[r].template).appendTo(f.find("div")),f.appendTo(e),e.appendTo(this._toolBarItems)},_initToolBarItems:function(){this._toolBarObj=this._toolBarItems.ejToolbar("instance");this._rteToolbar.find("#"+this._rteId+"format").length>0&&this._renderFormat();this._rteToolbar.find("#"+this._rteId+"createLink").length>0&&this._renderLinkDialog();this._rteToolbar.find("#"+this._rteId+"video").length>0&&this._renderVideoDialog();this._rteToolbar.find("#"+this._rteId+"image").length>0&&this._renderImageDialog();this._rteToolbar.find("#"+this._rteId+"createTable").length>0&&this._renderTableDialog();this._rteToolbar.find("#"+this._rteId+"fontName").length>0&&this._renderFontStyle();this._rteToolbar.find("#"+this._rteId+"fontSize").length>0&&this._renderFontSize();this._rteToolbar.find("#"+this._rteId+"fontColor").length>0&&this._renderFontColor();this._rteToolbar.find("#"+this._rteId+"backgrounColor").length>0&&this._renderBGColor();this.model.showClearAll||this._rteToolbar.find("#"+this._rteId+"clearAll").hide();this.model.showClearAll||this._rteToolbar.find("#"+this._rteId+"clearAll").hide();this._toolBarObj.disableItemByID(this._rteId+"undo");this._toolBarObj.disableItemByID(this._rteId+"redo");this._toolBarObj.selectItemByID(this._rteId+"justifyLeft");this._toolBarItems.find("#"+this._rteId+"addColumnLeft, #"+this._rteId+"addColumnRight, #"+this._rteId+"addRowAbove, #"+this._rteId+"addRowBelow, #"+this._rteId+"deleteRow, #"+this._rteId+"deleteColumn, #"+this._rteId+"deleteTable").hide()},_renderEditArea:function(){var n=t.buildTag("div.editarea #"+this._rteId+"_editer").appendTo(this._rteWapper);this._rteIframe=t.buildTag("iframe.content-iframe #"+this._rteId+"_Iframe").appendTo(n);this._setIFrames()},_setIFrames:function(){this.value(this.value()==null?n.trim(this.element[0].value):this.value());this._iframeId=this._rteId+"_Iframe";var i="<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:-1px 5px 0;height:100%;min-height:100%; padding-top: 1px;font-size: 13px;font-family:Segoe UI;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;padding:0 .2em} ul,ol{padding-left:2.5em} a{color:#00a} blockquote{margin-right: 0}.e-rte-table{border-spacing:0;margin: 0.2em 0 0.5em;border: 1px solid;}.e-rte-table caption{border: 1px solid;border-bottom:none}.e-rte-table,.e-rte-table td{outline:0;border-collapse: collapse; min-height:1px;vertical-align: top;text-indent: 5px;} .e-rte-table p{margin:0;padding:0;}<\/style><\/head><body autocorrect='off' contenteditable="+(this.model.allowEditing?"true":"false")+">"+n.trim(this.value())+"<\/body><\/html>";this._rteIframe.css({width:"100%"});this._setContent(i);(!t.isNullOrUndefined(this.model.undoStackLimit)||this.model.undoStackLimit!==""||this.model.undoStackLimit>0)&&(this._backupArray[0]=this.getHtml())},_setIframeHeight:function(){var n=(!t.isNullOrUndefined(this._rteToolbar)&&this._rteToolbar.is(":visible")?this._rteToolbar.outerHeight():6)+(!t.isNullOrUndefined(this._rteFooter)&&this._rteFooter.is(":visible")?this._rteFooter.outerHeight():0);this._rteIframe.height(n==0?this.model.height:this._rteWapper.outerHeight()-n-1)},_renderFooter:function(){var e=this.model,i,r,n;this._rteFooter=t.buildTag("div.e-rte-footer #"+this._rteId+"_footer").appendTo(this._rteWapper);i=t.buildTag("div.e-rte-footer-left");r=t.buildTag("div.e-rte-icons e-rte-footeritems e-rte-footericon e-rte-source","",{},{title:this._getLocalizedLabels("viewHtml")}).appendTo(i);this._htmlInfo=t.buildTag("div.e-rte-htmltaginfo e-rte-footeritems").appendTo(i);i.appendTo(this._rteFooter);n=t.buildTag("div.e-rte-footer-right");this._wordCount=t.buildTag("div.e-rte-wordcount e-rte-footeritems").appendTo(n);var u=t.buildTag("div.e-rte-icons clearFormat e-rte-footericon e-rte-footeritems","",{},{title:this._getLocalizedLabels("clearFormat")}).appendTo(n),f=t.buildTag("div.e-rte-icons clearAll e-rte-footericon e-rte-footeritems","",{},{title:this._getLocalizedLabels("clearAll")}).appendTo(n),o=t.buildTag("div.e-icons e-rte-resize e-rte-footeritems").appendTo(n);n.appendTo(this._rteFooter);this._on(r,"click",this._sourceCodeManager);this._on(u,"click",this._onClearFormat);this._on(f,"click",this._clearAllManager);this.model.showHtmlSource||r.hide().removeClass("e-rte-footeritems");this.model.showHtmlTagInfo||this._htmlInfo.hide().removeClass("e-rte-footeritems");this.model.showWordCount||this._wordCount.hide().removeClass("e-rte-footeritems");this.model.showClearAll||f.hide().removeClass("e-rte-footeritems");this.model.showClearFormat||u.hide().removeClass("e-rte-footeritems");e.enableResize?this._enableResize():o.hide().removeClass("e-rte-footeritems");this._updateCharCount()},_footerElement:function(n,t){var i=this._rteFooter.find(n);t?i.show().addClass("e-rte-footeritems"):i.hide().addClass("e-rte-footeritems")},_updateColorPalette:function(){var t=n("ul#"+this._rteId+"_colorTable"),i=n("ul#"+this._rteId+"_colorBGTable");t.find("div.e-rte-table").remove();t.find("li").append(this._colorTable());i.find("div.e-rte-table").remove();i.find("li").append(this._colorTable())},_enableRTL:function(n){n?this._rteIframe.contents().find("body").css("direction","rtl"):this._rteIframe.contents().find("body").css("direction","");this._subControlsSetModel("enableRTL",n)},_subControlsSetModel:function(n,i){t.isNullOrUndefined(this._toolBarItems)||this._toolBarItems.ejToolbar({prop:i});t.isNullOrUndefined(this._linkDialog)||this._linkDialog.ejDialog({prop:i});t.isNullOrUndefined(this._imgDialog)||this._imgDialog.ejDialog({prop:i});t.isNullOrUndefined(this._videoDialog)||this._videoDialog.ejDialog({prop:i});t.isNullOrUndefined(this._createTable)||this._createTable.ejDialog({prop:i});t.isNullOrUndefined(this._sourceDialog)||this._sourceDialog.ejDialog({prop:i});t.isNullOrUndefined(this._customTableDialog)||(t.isNullOrUndefined(this._customTableDialog)||this._customTableDialog.ejDialog({prop:i}),this._customTableDialog.find(".numerictextbox").ejNumericTextbox({prop:i}),this._customTableDialog.find("#ddlAlignment").ejDropDownList({prop:i}),t.isNullOrUndefined(this._customTableDialog)||this._customTableDialog.find(".e-rte-btn").ejButton({prop:i}));t.isNullOrUndefined(this._videoDialog)||this._videoDialog.find(".e-rte-btn").ejButton({prop:i});t.isNullOrUndefined(this._imgDialog)||this._imgDialog.find(".e-rte-btn").ejButton({prop:i});t.isNullOrUndefined(this._linkDialog)||this._linkDialog.find(".e-rte-btn").ejButton({prop:i});t.isNullOrUndefined(this._fontStyleDDL)||this._fontStyleDDL.ejDropDownList({prop:i});t.isNullOrUndefined(this._fontSizeDDL)||this._fontSizeDDL.ejDropDownList({prop:i});t.isNullOrUndefined(this._formatDDL)||this._formatDDL.ejDropDownList({prop:i});t.isNullOrUndefined(this._fontColorSplit)||this._fontColorSplit.ejSplitButton({prop:i});t.isNullOrUndefined(this._bgColorSplit)||this._bgColorSplit.ejSplitButton({prop:i})},_createHtmlSource:function(){t.isNullOrUndefined(this._htmlSource)?(this._htmlSource=t.buildTag("div.e-rte-icons e-rte-footeritems e-rte-source").appendTo(this._rteFooter),this._on(this._htmlSource,"click",this._sourceCodeManager),this._renderSourceDialog()):this._htmlSource.show()},_createHtmlTagsInfo:function(){t.isNullOrUndefined(this._htmlInfo)?this._htmlInfo=t.buildTag("div.e-rte-htmltaginfo e-rte-footeritems").appendTo(this._rteFooter):this._htmlInfo.show()},_createWordCount:function(){t.isNullOrUndefined(this._wordCount)?this._wordCount=t.buildTag("div.e-rte-wordcount e-rte-footeritems").appendTo(this._rteFooter):this._wordCount.show()},_enableResize:function(){this.model.enableResize&&this.model.enabled&&(this._rteWapper.addClass("e-resizable"),this._resizeRTE())},_resizeRTE:function(){var t=this;this._rteWapper.find("div.e-rte-resize").ejResizable({minHeight:parseInt(t.model.minHeight),minWidth:parseInt(t.model.minWidth),maxHeight:parseInt(t.model.maxHeight),maxWidth:parseInt(t.model.maxWidth),resizeStart:function(n){t._trigger("resizeStart",{event:n})},resize:function(i){var r=n(i.element).parents("div.e-rte-wrapper");t._rteWapper.height(n(r).height());t._rteWapper.width(n(r).width());t._setIframeHeight();t._trigger("resize",{event:i})},resizeStop:function(n){t._trigger("resizeStop",{event:n})},helper:function(i){var r=n(i.element).parents("div.e-rte-wrapper");return t._rteWapper.height(n(r).height()),t._rteWapper.width(n(r).width()),t._setIframeHeight(),n(t._rteWapper)}})},_getDialogModel:function(){return dialogModel={enableResize:!1,showOnInit:!1,enableModal:!0,cssClass:this.model.cssClass,content:"#"+this._rteId+"_wrapper",enableRTL:this.model.enableRTL}},_renderLinkDialog:function(){var i=this._linkDialog=t.buildTag("div#"+this._rteId+"_link"),u=n("<div class='e-rte-label'><label for="+this._rteId+"_link_url>"+this._getLocalizedLabels("linkWebUrl")+"<\/label><\/div><div class='e-rte-field'><input type='text' class='e-inputtext' id='"+this._rteId+"_link_url'/><\/div><div class='e-rte-label'><label for="+this._rteId+"_link_text>"+this._getLocalizedLabels("linkText")+"<\/label><\/div><div class='e-rte-field'><input type='text' class='e-inputtext' id='"+this._rteId+"_link_text'><\/div><div class='e-rte-label'><label for="+this._rteId+"_link_title>"+this._getLocalizedLabels("linkToolTip")+" <\/label><\/div><div class='e-rte-field'><input type='text' class='e-inputtext' id='"+this._rteId+"_link_title'><\/div><div class='e-rte-label'><\/div><div class='e-rte-field'><input type='checkbox' id='"+this._rteId+"_link_target'><label for='"+this._rteId+"_link_target' style='padding: 5px;'>"+this._getLocalizedLabels("linkOpenInNewWindow")+"<\/label><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn' id='link_insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn' id='link_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>"),r;u.appendTo(i);i.appendTo(this._rteWapper);r=this._getDialogModel();r.title=this._getLocalizedLabels("createLink");i.ejDialog(r);this._chkTarget=i.find("#"+this._rteId+"_link_target");this._chkTarget.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});i.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._on(i.find(".e-rte-btn"),"click",this._linkBtnClick);this._on(this._linkDialog.find("#"+this._rteId+"_link_url"),"keypress",this._urlValidation)},_renderImageDialog:function(){var r,i;this._imgDialog=t.buildTag("div#"+this._rteId+"_Image");r=n("<div class='e-rte-label'><label for="+this._rteId+"_img_url>"+this._getLocalizedLabels("imageWebUrl")+" <\/label><\/div><div class='e-rte-field'><input type='text' class='e-inputtext' id='"+this._rteId+"_img_url'><\/div><div class='e-rte-label'><label for="+this._rteId+"_img_text>"+this._getLocalizedLabels("imageAltText")+" <\/label><\/div><div class='e-rte-field'><input type='text' class='e-inputtext' id='"+this._rteId+"_img_text'><\/div><div id='"+this._rteId+"_imgdimensions'><div class='e-rte-label'><label>"+this._getLocalizedLabels("dimensions")+" <\/label><\/div><div class='e-rte-field'><input type='text' title='"+this._getLocalizedLabels("dimensions")+"' class='e-inputtext e-dimensions' maxlength='3' id='"+this._rteId+"_imgX'><label style='padding: 5px;'>X<\/label><input type='text' title='"+this._getLocalizedLabels("dimensions")+"' style='margin-right: 5px;' class='e-inputtext e-dimensions' maxlength='3' id='"+this._rteId+"_imgY'><\/div><input type='checkbox' id='"+this._rteId+"_img_consrn'><label for='"+this._rteId+"_img_consrn'  style='padding: 5px;'>"+this._getLocalizedLabels("constrainProportions")+"<\/label><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn' id='img_insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn' id='img_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");r.appendTo(this._imgDialog);this._imgDialog.appendTo(this._rteWapper);this.model.showDimensions||this._rteWapper.find("#"+this._rteId+"_imgdimensions").hide();i=this._getDialogModel();i.width="470px";i.title=this._getLocalizedLabels("image");this._imgDialog.ejDialog(i);this._chkImgDimensions=this._imgDialog.find("#"+this._rteId+"_img_consrn");this._chkImgDimensions.ejCheckBox({check:!0,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._imgDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._on(this._imgDialog.find(".e-rte-btn"),"click",this._imageBtnClick);this._on(this._imgDialog.find("#"+this._rteId+"_img_url"),"keypress",this._urlValidation);this._on(this._imgDialog.find("input.e-dimensions"),"change",this._recalcImgSize)},_renderVideoDialog:function(){var r,i;this._videoDialog=t.buildTag("div#"+this._rteId+"_video");r=n("<div><label>"+this._getLocalizedLabels("embedVideo")+"<\/label><\/div><textarea class='e-rte-video e-inputtext'  aria-label="+this._getLocalizedLabels("embedVideo")+"><\/textarea><div id='"+this._rteId+"_videodimensions' style='margin-top:7px'><div class='e-rte-label'><label>"+this._getLocalizedLabels("dimensions")+" <\/label><\/div><div><input type='text' title='"+this._getLocalizedLabels("dimensions")+"' class='e-inputtext e-dimensions' maxlength='3' id='"+this._rteId+"_videoX'><label style='padding: 5px;'>X<\/label><input type='text' title='"+this._getLocalizedLabels("dimensions")+"' style='margin-right: 5px;' class='e-inputtext e-dimensions' maxlength='3' id='"+this._rteId+"_videoY'><input type='checkbox' id='"+this._rteId+"_video_consrn'><label for='"+this._rteId+"_video_consrn'  style='padding: 5px;'>"+this._getLocalizedLabels("constrainProportions")+"<\/label><\/div><\/div><div class='e-rte-button e-fieldseparate'><button id='video_insert' class='e-rte-btn'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button id='video_cancel' class='e-rte-btn'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");r.appendTo(this._videoDialog);this._videoDialog.appendTo(this._rteWapper);this.model.showDimensions||this._rteWapper.find("#"+this._rteId+"_videodimensions").hide();i=this._getDialogModel();i.width="460px";i.title=this._getLocalizedLabels("video");this._videoDialog.ejDialog(i);this._chkvideoDimensions=this._videoDialog.find("#"+this._rteId+"_video_consrn");this._chkvideoDimensions.ejCheckBox({checked:!0,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._videoDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._on(this._videoDialog.find(".e-rte-btn"),"click",this._insertVideo);this._on(this._videoDialog.find("input.e-dimensions"),"change",this._recalcVideoSize)},_renderTableDialog:function(){var i,n;this._createTable=t.buildTag("div.e-rte-table-picker#"+this._rteId+"_table");this._tblheaderDiv=t.buildTag("div.e-rte-tableheader");this._tblheaderDiv.html(this._getLocalizedLabels("createTable"));this._tblheaderDiv.appendTo(this._createTable);i=t.buildTag("div.e-rte-table");this._drawTable(i);i.appendTo(this._createTable);this.model.showCustomTable&&this._createCustomTable();this._createTable.appendTo(this._rteWapper);n=this._getDialogModel();n.modal=!1;n.showHeader=!1;n.width="auto";this._createTable.ejDialog(n)},_createCustomTable:function(){var r=n("<div class='customtable-group'><span class='e-rte-toolbar-icon customtable-image'><\/span><a class='customtable-link' href='#' role='button' title='"+this._getLocalizedLabels("customTable")+"'>"+this._getLocalizedLabels("customTable")+"<\/a><\/div>"),u,i;this._on(r,"click",this._openCustomTable);r.appendTo(this._createTable);this._customTableDialog=t.buildTag("div#"+this._rteId+"_customTable");u=n("<div class='e-fieldgroup'><div class='e-rte-tablefields'><label for="+this._rteId+"_txtColumns>"+this._getLocalizedLabels("tableColumns")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='numerictextbox' id='"+this._rteId+"_txtColumns'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_txtRows>"+this._getLocalizedLabels("tableRows")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='numerictextbox' id='"+this._rteId+"_txtRows'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_txtWidth>"+this._getLocalizedLabels("tableWidth")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='e-inputtext' id='"+this._rteId+"_txtWidth'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_txtHeight>"+this._getLocalizedLabels("tableHeight")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='e-inputtext' id='"+this._rteId+"_txtHeight'><\/div><\/div><div class='e-fieldseparate'><div class='e-rte-tablefields'><label for="+this._rteId+"_txtSpacing>"+this._getLocalizedLabels("tableCellSpacing")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='e-inputtext' id='"+this._rteId+"_txtSpacing'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_txtPadding>"+this._getLocalizedLabels("tableCellPadding")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='e-inputtext' id='"+this._rteId+"_txtPadding'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_txtBorder>"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' class='e-inputtext' id='"+this._rteId+"_txtBorder'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_chkCaption>"+this._getLocalizedLabels("tableCaption")+"<\/label><\/div><div class='e-rte-tablefields'><input type='checkbox' id='"+this._rteId+"_chkCaption'><\/div><div class='e-rte-tablefields'><label for="+this._rteId+"_ddlAlignment>"+this._getLocalizedLabels("tableAlignment")+"<\/label><\/div><div class='e-rte-tablefields'><select id='"+this._rteId+"_ddlAlignment'><option value='left'>Left<\/option><option value='right'>Right<\/option><option value='center'>Center<\/option><\/select><\/div><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn' id='insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn' id='cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");u.appendTo(this._customTableDialog);i=this._getDialogModel();i.width="480px";i.title=this._getLocalizedLabels("customTable");this._customTableDialog.ejDialog(i);this._customTableDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._customTableDialog.find(".numerictextbox").ejNumericTextbox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",minValue:1,value:3});this._customTableDialog.find("#"+this._rteId+"_txtColumns").ejNumericTextbox({maxValue:63});this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!1});this._chkTblCaption=this._customTableDialog.find("#"+this._rteId+"_chkCaption");this._chkTblCaption.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._on(this._customTableDialog.find(".e-rte-btn"),"click",this._insertCustomTable)},_drawTable:function(n){for(var r,i=0;i<this.model.tableRows;i++){for(rowDiv=t.buildTag("div.e-rtetablerow"),r=0;r<this.model.tableColumns;r++)tableCell=t.buildTag("div.e-rte-tablecell e-default"),tableCell.appendTo(rowDiv);rowDiv.appendTo(n)}},_renderSourceDialog:function(){var r,i;this._sourceDialog=t.buildTag("div#"+this._rteId+"_Source");r=n("<textarea class='e-rte-srctextarea e-inputtext'><\/textarea><div class='e-rte-button e-fieldseparate'><button id='src_update' class='e-rte-btn'>"+this._getLocalizedLabels("dialogUpdate")+"<\/button><button id='src_cancel' class='e-rte-btn'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");r.appendTo(this._sourceDialog);i=this._getDialogModel();i.title=this._getLocalizedLabels("viewHtml");i.width="auto";i.content=null;this._sourceDialog.ejDialog(i);this._sourceDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._on(this._sourceDialog.find(".e-rte-btn"),"click",this._srcBtnClick)},_renderAlertDialog:function(){var r,i;this._alertWindow=t.buildTag("div");r=n("<p class='e-alerttext'><\/p><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn e-alert-ok'>"+this._getLocalizedLabels("dialogOk")+"<\/button><button class='e-rte-btn e-alert-cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");r.appendTo(this._alertWindow);i=this._getDialogModel();i.showHeader=!1;i.width="auto";this._alertWindow.ejDialog(i);this._alertWindow.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass});this._on(this._alertWindow.find(".e-rte-btn"),"click",this._alertBtnClick);this._alertWindow.find(".e-alert-cancel").hide()},_alertBtnClick:function(t){n.trim(this._alertWindow.find(".e-alerttext").html())==this._getLocalizedLabels("deleteAlert")&&n(t.target).hasClass("e-alert-ok")&&(this._getDocument().body.innerHTML="",this._toolBarObj.selectItemByID(this._rteId+"justifyLeft"),this._setBackupData(),this._updateCharCount(),this._onChange());this._alertWindow.ejDialog("close");this._alertWindow.find(".e-alert-cancel").hide()},_openAlert:function(n){this._alertWindow.find(".e-alerttext").html(n);this._alertWindow.ejDialog("open")},_renderFormat:function(){this._formatDDL=t.buildTag("input#"+this._rteId+"_format","","",{type:"text",title:this._getLocalizedLabels("format")});var n={};n.dataSource=this.model.format;n.height="25px";n.width="105px";n.enableRTL=this.model.enableRTL;n.popupWidth="175px";n.popupHeight="auto";n.selectedItemIndex=0;n.popupHide=this._formatChange;n.fields={text:"text",value:"value",spriteCssClass:"spriteCssClass"};this._formatDDL.appendTo(this._rteToolbar.find("#"+this._rteId+"format").html(""));this._formatDDL.ejDropDownList(n);this._formatPopupStyle()},_formatPopupStyle:function(){for(var i=n("#"+this._rteId+"_format_popup").find("li"),t=0;t<i.length;t++)n(i[t]).addClass(this.model.format[t].spriteCssClass)},_renderFontStyle:function(){this._fontStyleDDL=t.buildTag("input#"+this._rteId+"_fontName","","",{type:"text",title:this._getLocalizedLabels("fontName")});var n={};n.dataSource=this.model.fontName;n.height="25px";n.enableRTL=this.model.enableRTL;n.selectedItemIndex=0;n.popupHide=this._fontStyleChange;n.fields={text:"text",value:"value"};this._fontStyleDDL.appendTo(this._rteToolbar.find("#"+this._rteId+"fontName").html(""));this._fontStyleDDL.ejDropDownList(n)},_renderFontSize:function(){this._fontSizeDDL=t.buildTag("input#"+this._rteId+"_fontSize","","",{type:"text",title:this._getLocalizedLabels("fontSize")});var n={};n.dataSource=this.model.fontSize;n.height="25px";n.width="100px";n.enableRTL=this.model.enableRTL;n.selectedItemIndex=1;n.popupHide=this._fontSizeChange;n.fields={text:"text",value:"value"};this._fontSizeDDL.appendTo(this._rteToolbar.find("#"+this._rteId+"fontSize").html(""));this._fontSizeDDL.ejDropDownList(n)},_renderFontColor:function(){var r,i;this._fontColorSplit=t.buildTag("button#"+this._rteId+"_fontColor","",{},{type:"button"});r=n("<ul id='"+this._rteId+"_colorTable' class='e-rte-colorpalette'><li><\/li><\/ul>");r.find("li").append(this._colorTable());i={};i.height="25px";i.width="50px";i.contentType="textandimage";i.targetID=this._rteId+"_colorTable";i.enableRTL=this.model.enableRTL;i.prefixIcon="e-fontcolor-icon";this._fontColorSplit.appendTo(this._rteToolbar.find("#"+this._rteId+"fontColor").html(""));r.appendTo(this._rteToolbar.find("#"+this._rteId+"fontColor"));this._fontColorSplit.ejSplitButton(i);this._splitMenu=r.ejMenu("instance");this._on(r.find("div.e-rte-palettetable"),"click",this._colorPaletteClick);this._on(this._fontColorSplit,"click",this._fontColorClick);this._fontColorSplit.find("span.e-fontcolor-icon").removeClass("e-icon");this._fontColorSplit.find("span.e-btntxt").css("background-color","black")},_renderBGColor:function(){var r,i;this._bgColorSplit=t.buildTag("button#"+this._rteId+"_backgrounColor","",{},{type:"button"});r=n("<ul id='"+this._rteId+"_colorBGTable' class='e-rte-colorpalette'><li><\/li><\/ul>");r.find("li").append(this._colorTable());i={};i.height="25px";i.width="50px";i.contentType="textandimage";i.targetID=this._rteId+"_colorBGTable";i.enableRTL=this.model.enableRTL;i.prefixIcon="e-bgcolor-icon";this._bgColorSplit.appendTo(this._rteToolbar.find("#"+this._rteId+"backgrounColor").html(""));r.appendTo(this._rteToolbar.find("#"+this._rteId+"backgrounColor"));this._bgColorSplit.ejSplitButton(i);this._bgSplitMenu=r.ejMenu("instance");this._on(r.find("div.e-rte-palettetable"),"click",this._bgColorPaletteClick);this._on(this._bgColorSplit,"click",this._bgColorClick);this._bgColorSplit.find("span.e-bgcolor-icon").removeClass("e-icon");this._bgColorSplit.find("span.e-btntxt").css("background-color","white")},_colorTable:function(){for(var u,f=t.buildTag("div.e-rte-table"),i=0,n,r,e=0;e<this.model.colorPaletteRows;e++){for(r=t.buildTag("div.e-rtetablerow"),u=0;u<this.model.colorPaletteColumns;u++)i<this.model.colorCode.length&&(n="#"+this.model.colorCode[i],tableCell=t.buildTag("div.e-rte-palettetable","",{"background-color":n},{title:n,"color-code":n}),tableCell.appendTo(r),i++);r.appendTo(f)}return f},_recalcVideoSize:function(n){var r,u,t,i;r=this._videoDialog.find("#"+this._rteId+"_videoX");u=this._videoDialog.find("#"+this._rteId+"_videoY");t=r.val();i=u.val();this._chkvideoDimensions.ejCheckBox("isChecked")&&this._videoWidth&&this._videoHeight&&t&&i&&(n.target.id==r[0].id?(i=Math.round(t/this._videoWidth*i),u.val(i)):(t=Math.round(i/this._videoHeight*t),r.val(t)));this._videoWidth=t;this._videoHeight=i},_recalcImgSize:function(n){var r,u,t,i;r=this._imgDialog.find("#"+this._rteId+"_imgX");u=this._imgDialog.find("#"+this._rteId+"_imgY");t=r.val();i=u.val();this._chkImgDimensions.ejCheckBox("isChecked")&&this._imgWidth&&this._imgHeight&&t&&i&&(n.target.id==r[0].id?(i=Math.round(t/this._imgWidth*i),u.val(i)):(t=Math.round(i/this._imgHeight*t),r.val(t)));this._imgWidth=t;this._imgHeight=i},_urlValidation:function(t){var i=n(t.target);i.hasClass("e-error")&&i.removeClass("e-error")},_linkBtnClick:function(n){n.target.id==="link_cancel"?(this._clearLinkFields(),this._linkDialog.ejDialog("close")):n.target.id==="link_insert"&&(this._restoreSelection(this._selectionRange),this._txtURL.val()!=""?this._onInsertLink():(this._onUnlink(),this._linkDialog.ejDialog("close")),this._onChange(),this._setBackupData())},_imageBtnClick:function(n){n.target.id==="img_cancel"?this._imgDialog.ejDialog("close"):n.target.id==="img_insert"&&(this._onInsertImage(),this._onChange(),this._setBackupData())},_srcBtnClick:function(t){if(t.target.id==="src_update"){var i=n.trim(this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value);this._getDocument().body.innerHTML=i;this._onChange();this._updateCharCount()}this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value="";this._sourceDialog.ejDialog("close")},_insertCustomTable:function(i){var f,r,u;if(i.target.id==="insert"){var e=this._customTableDialog.find("#"+this._rteId+"_txtColumns").ejNumericTextbox("getValue"),o=this._customTableDialog.find("#"+this._rteId+"_txtRows").ejNumericTextbox("getValue"),s=this._customTableDialog.find("#"+this._rteId+"_txtHeight").val(),h=this._customTableDialog.find("#"+this._rteId+"_txtWidth").val(),c=this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").ejDropDownList("getSelectedValue"),l=this._customTableDialog.find("#"+this._rteId+"_txtSpacing").val(),a=this._customTableDialog.find("#"+this._rteId+"_txtPadding").val(),v=this._customTableDialog.find("#"+this._rteId+"_txtBorder").val(),y=this._chkTblCaption.ejCheckBox("isChecked");t.isNullOrUndefined(this._tableInsertAt)||t.isNullOrUndefined(this._tableInsertAt.startContainer)||this._restoreSelection(this._tableInsertAt);f=this._tableGenerator(o,e,!1,h,s,l,a,c,v,y);this.executeCommand("inserthtml",f);r=n(this._getDocument()).find("table.e-rte-table");r.attr("contentEditable",!1);r.find("td").attr("contentEditable",!0);u=this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").data("ejDropDownList");u.option("value")=="Center"&&r.attr("style","margin: 0 auto");this._onChange();u.option({value:"",enabled:!1})}this._customTableDialog.ejDialog("close");this._clearTableFields()},_clearTableFields:function(){this._customTableDialog.find("#"+this._rteId+"_txtColumns").ejNumericTextbox("option","value",3);this._customTableDialog.find("#"+this._rteId+"_txtRows").ejNumericTextbox("option","value",3);this._customTableDialog.find("#"+this._rteId+"_txtHeight").val("");this._customTableDialog.find("#"+this._rteId+"_txtWidth").val("");this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").ejDropDownList("clearText");this._customTableDialog.find("#"+this._rteId+"_txtSpacing").val("");this._customTableDialog.find("#"+this._rteId+"_txtPadding").val("");var n=this._customTableDialog.find("#"+this._rteId+"_txtBorder").val(""),t=this._chkTblCaption.ejCheckBox({check:!1})},_clearLinkFields:function(){this._txtURL=this._linkDialog.find("#"+this._rteId+"_link_url");this._txtURL.removeClass("e-error");this._txtURL.val("http://");this._txtLinkText=this._linkDialog.find("#"+this._rteId+"_link_text");this._txtLinkText.val("");this._txtLinkTitle=this._linkDialog.find("#"+this._rteId+"_link_title");this._txtLinkTitle.val("");this._chkTarget.ejCheckBox({check:!1});this._txtURL.focus()},_clearImgFields:function(){this._imgDialog.find("#"+this._rteId+"_img_url").val("http://").removeClass("e-error");this._imgDialog.find("#"+this._rteId+"_img_text").val("");this._chkImgDimensions.ejCheckBox({checked:!0})},_videoManager:function(){var n=this._getSelectedNode();this._editVideo=null;n&&n.tagName.toLowerCase()==="iframe"&&(this._editVideo=n,this._videoWidth=parseInt(n.width),this._videoHeight=parseInt(n.height),this._videoDialog.find("textarea.e-rte-video").val(n.outerHTML),this._videoDialog.find("#"+this._rteId+"_videoX").val(this._videoWidth),this._videoDialog.find("#"+this._rteId+"_videoY").val(this._videoHeight));this._videoDialog.ejDialog("open");this._videoDialog.find("textarea.e-rte-video").focus()},_sourceCodeManager:function(){t.isNullOrUndefined(this._sourceDialog)&&this._renderSourceDialog();this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value=this.getHtml();this._sourceDialog.ejDialog("open");this._sourceDialog.find("textarea.e-rte-srctextarea").focus()},_hyperLinkManager:function(){this._linkDialog.ejDialog("open");this._clearLinkFields();this._txtLinkText.val(this._getSelText());this._selectedHTML=this._getSelText();this._hyperLinkSelection=this._getDocument().selection;var n=this._getSelectedNode();n&&/^(A)$/.test(n.nodeName)&&(this._txtURL.val(n.href),this._txtLinkTitle.val(n.title));this._hyperLinkSelection!=null&&(this._hyperLinkSelRange=this._hyperLinkSelection.createRange())},_tableManager:function(){var n=this._rteToolbar.find("#"+this._rteId+"createTable");this._createTable.ejDialog("option","position",{X:n.position().left,Y:n.position().top+n.height()+7});this._createTable.ejDialog("open")},_imageManager:function(){this._clearImgFields();var n=this._getSelectedNode();n&&n.tagName.toLowerCase()==="img"&&(this._imgWidth=parseInt(n.width),this._imgHeight=parseInt(n.height),this._imgDialog.find("#"+this._rteId+"_img_url").val(n.src),this._imgDialog.find("#"+this._rteId+"_img_text").val(n.alt),this._imgDialog.find("#"+this._rteId+"_imgX").val(this._imgWidth),this._imgDialog.find("#"+this._rteId+"_imgY").val(this._imgHeight));this._imgDialog.ejDialog("open");this._imgDialog.find("#"+this._rteId+"_img_url").focus()},_toolBarClick:function(t){var o=n(this.itemsContainer).closest("div.e-rte").find("textarea.e-rte"),i=o.ejRTE("instance"),r=o.attr("id"),u=t.currentTarget.id.replace(r,""),f,e;if(t.currentTarget.id!=r+"copy"&&t.currentTarget.id!=r+"cut"&&t.currentTarget.id!=r+"paste"||i._isIE()?i._selectCommand(t.currentTarget.id):i._openAlert(i._getLocalizedLabels("copyPastAlert")),i._styleItems.indexOf(u)>=0||i._scriptsItems.indexOf(u)>=0)n(t.currentTarget).hasClass("e-active")?this.deselectItemByID(t.currentTarget.id):this.selectItemByID(t.currentTarget.id);else if(i._alignItems.indexOf(u)>=0)for(this.selectItemByID(t.currentTarget.id),e=i._alignItems.indexOf(u),f=0;f<i._alignItems.length;f++)f!=e&&this.deselectItemByID(r+i._alignItems[f]);else i._listItems.indexOf(u)>=0&&(n(t.currentTarget).hasClass("e-active")?this.deselectItemByID(t.currentTarget.id):this.selectItemByID(t.currentTarget.id),e=i._listItems.indexOf(u),e==0?this.deselectItemByID(r+i._listItems[1]):this.deselectItemByID(r+i._listItems[0]))},_toggleEditTable:function(){var n=this._getSelectedNode(),t=this._toolBarItems.find("#"+this._rteId+"addColumnLeft, #"+this._rteId+"addColumnRight, #"+this._rteId+"addRowAbove, #"+this._rteId+"addRowBelow, #"+this._rteId+"deleteRow, #"+this._rteId+"deleteColumn, #"+this._rteId+"deleteTable");n&&n.tagName&&(n.tagName.toLowerCase()=="td"||n.tagName.toLowerCase()=="table"||n.tagName.toLowerCase()=="tr")?t.show():t.hide();this._setIframeHeight()},_formatChange:function(){var i=n(this.element).closest("div.e-rte").find("textarea.e-rte"),t=i.ejRTE("instance"),r=i.attr("id");this.getSelectedValue()!==""&&t._onFormatBlock(this.getSelectedValue());t._focus();t._onChange()},_fontStyleChange:function(){var t=n(this.element).closest("div.e-rte").find("textarea.e-rte"),i=t.ejRTE("instance"),r=t.attr("id");this.getSelectedValue()!==""&&i._onFontName(this.getSelectedValue());i._onChange()},_fontSizeChange:function(){var t=n(this.element).closest("div.e-rte").find("textarea.e-rte"),i=t.ejRTE("instance"),r=t.attr("id");this.getSelectedValue()!==""&&i._onFontSize(this.getSelectedValue());i._onChange()},_colorPaletteClick:function(n){var t;(t=n.target.getAttribute("color-code"))&&(this._focus(),this._onFontColor(t),this._splitMenu.hide(n),this._bgSplitMenu.hide(n),this._fontColor=t,this._fontColorSplit.find("span.e-btntxt").css("background-color",t))},_bgColorPaletteClick:function(n){var t;(t=n.target.getAttribute("color-code"))&&(this._focus(),this._onBGColor(t),this._splitMenu.hide(n),this._bgSplitMenu.hide(n),this._bgColor=t,this._bgColorSplit.find("span.e-btntxt").css("background-color",t))},_fontColorClick:function(n){this._onFontColor(this._fontColor);this._splitMenu.hide(n)},_bgColorClick:function(n){this._onBGColor(this._bgColor);this._bgSplitMenu.hide(n)},_selectCommand:function(n){var t=this._rteId,i;n==t+"format"||n==t+"fontName"||n==t+"fontSize"||n==t+"fontColor"||n==t+"backgrounColor"||this._focus();switch(n){case t+"bold":this._onBold();break;case t+"italic":this._onItalics();break;case t+"underline":this._onUnderLine();break;case t+"strikethrough":this._onStrikeThrough();break;case t+"justifyLeft":this._onJustifyLeft();break;case t+"justifyRight":this._onJustifyRight();break;case t+"justifyCenter":this._onJustifyCenter();break;case t+"justifyFull":this._onJustifyFull();break;case t+"cut":this._onCut();break;case t+"copy":this._onCopy();break;case t+"paste":this._onPaste();break;case t+"clearFormat":this._onClearFormat();break;case t+"clearAll":this._clearAllManager();break;case t+"orderedList":this._onOrderList();break;case t+"unorderedList":this._onUnorderList();break;case t+"undo":this._undo();break;case t+"redo":this._redo();break;case t+"indent":this._onIndent();this._indentdepth++;break;case t+"outdent":this._onOutdent();this._indentdepth>0&&this._indentdepth--;break;case t+"createLink":this._hyperLinkManager();break;case t+"image":this._imageManager();break;case t+"createTable":this._tableManager();break;case t+"addRowAbove":this.insertRow(!0);break;case t+"addRowBelow":this.insertRow(!1);break;case t+"addColumnLeft":this.insertColumn(!0);break;case t+"addColumnRight":this.insertColumn(!1);break;case t+"deleteRow":this.removeRow();break;case t+"deleteColumn":this.removeColumn();break;case t+"deleteTable":this.removeTable();break;case t+"superscript":this._onSuperScript();break;case t+"subscript":this._onSubScript();break;case t+"upperCase":this._onUpperCase();break;case t+"lowerCase":this._onLowerCase();break;case t+"video":this._videoManager();break;default:this._onChange()}n!=t+"createLink"&&n!=t+"image"&&n!=t+"video"&&n!=t+"createTable"&&this._onChange();n!=t+"undo"&&n!=t+"redo"&&this._setBackupData();i=this._getSelectedNode();this._updateTagInfo(i)},_focus:function(){this._getWindow().focus();this._restoreSelection(this._selectionRange)},_getWindow:function(){var n=document.getElementById(this._iframeId);return n.contentWindow},_getDocument:function(){var n=document.getElementById(this._iframeId);return n.contentWindow.document},_onBold:function(){var n;this.executeCommand("bold",n)},_onItalics:function(){var n;this.executeCommand("italic",n)},_onStrikeThrough:function(){var n;this.executeCommand("strikethrough",n)},_onUnderLine:function(){var n;this.executeCommand("underline",n)},_onJustifyLeft:function(){var n;this.executeCommand("JustifyLeft",n)},_onJustifyRight:function(){var n;this.executeCommand("JustifyRight",n)},_onJustifyCenter:function(){var n;this.executeCommand("JustifyCenter",n)},_onJustifyFull:function(){this._alignFlag=!0;this.executeCommand("justifyfull")},_onCut:function(){var n;this.executeCommand("cut",n)},_onCopy:function(){var n;this.executeCommand("copy",n)},_onPaste:function(){var n;this.executeCommand("paste",n)},_onOrderList:function(){var n;this.executeCommand("insertorderedlist",n)},_onUnorderList:function(){var n;this.executeCommand("insertunorderedlist",n)},_onUndo:function(){this.executeCommand("undo",null)},_onDelete:function(){this.executeCommand("delete",null)},_onRedo:function(){this.executeCommand("redo",null)},_onClearFormat:function(){var n;this.executeCommand("removeformat",n);this._setBackupData();this._onChange();this._updateIframeSkin(this.model.iframeAttribute)},_onFormatBlock:function(n){this._focus();this.executeCommand("formatBlock",n)},_onFontName:function(n){this.executeCommand("fontName",n)},_onFontSize:function(n){this.executeCommand("fontSize",n)},_onFontColor:function(n){this.executeCommand("foreColor",n);this._onChange();this._updateIframeSkin(this.model.iframeAttribute)},_onBGColor:function(n){this.executeCommand("backColor",n);this._onChange()},_onIndent:function(){this._getWindow().document.body.style.wordWrap="break-word";var t=this._getWindow().document.getSelection().focusNode;t&&/^(OL|UL|LI)$/.test(t.nodeName)?this._listIndent(t):t&&/^(#text)$/.test(t.nodeName)&&/^(OL|UL|LI)$/.test(n(t).parent()[0].nodeName)?this._listIndent(n(t).parents("li")[0],t):this.executeCommand("indent",!1);t&&n(t).focus();this._updateIframeSkin(this.model.iframeAttribute)},_onOutdent:function(){var t=this._getWindow().document.getSelection().focusNode;t&&/^(OL|UL|LI)$/.test(t.nodeName)?this._listOutdent(t):t&&/^(#text)$/.test(t.nodeName)&&/^(OL|UL|LI)$/.test(n(t).parent()[0].nodeName)?this._listOutdent(n(t).parents("li")[0],t):this.executeCommand("outdent",!1)},_onSelectAll:function(){this.executeCommand("selectall")},_onHyperLink:function(n){this.executeCommand("createlink",n)},_onInsertLink:function(){var i,r;if(!this._isUrl(n.trim(this._txtURL.val())))return this._txtURL.addClass("e-error"),!1;i=t.buildTag("a","",{},{href:this._txtURL.val(),title:this._txtLinkTitle.val()});i.target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"_self";this._focus();this._isIE()?(this._selectedHTML.length==0&&(this._selectedHTML=this._txtLinkText.val()),i[0].innerHTML=this._selectedHTML,r=i[0].outerHTML):(i.html(this._txtLinkText.val()),r=n("<div>").append(n(i).clone()).html());r&&(this._isIE()?this._pasteHtml(r):this._getDocument().execCommand("inserthtml",!1,r),this._focus());this._linkDialog.ejDialog("close")},_onInsertImage:function(){var i=this._imgDialog.find("#"+this._rteId+"_img_url"),e=this._imgDialog.find("#"+this._rteId+"_img_text"),u=this._imgDialog.find("#"+this._rteId+"_imgX").val(),f=this._imgDialog.find("#"+this._rteId+"_imgY").val(),r=this,o;this._restoreSelection(this._selectionRange);o=n("<img>",{src:i.val(),error:function(){i.addClass("e-error")},load:function(){var n=t.buildTag("img","",{},{alt:e.val(),src:i.val()});r.model.showDimensions&&(u!=""&&n.width(u),f!=""&&n.height(f));r.executeCommand("inserthtml",n[0].outerHTML);r._imgDialog.ejDialog("close")}})},_insertVideo:function(i){var r=n.trim(this._videoDialog.find("textarea.e-rte-video")[0].value),f=this._videoDialog.find("#"+this._rteId+"_videoX").val(),s=this._videoDialog.find("#"+this._rteId+"_videoY").val(),o,e,u;this._restoreSelection(this._selectionRange);u=n(r);i.target.id==="video_insert"&&r!==""?(o=u[0].src,t.isNullOrUndefined(o)||o.indexOf("http:")!=-1||(e=r.indexOf("src=")+5,r=r.substr(0,e)+"http:"+r.substr(e)),u=n(r)[0],this.model.showDimensions&&(f!=""&&(u.width=f),f!=""&&(u.height=s)),this._editVideo&&n(this._editVideo).remove(),this.executeCommand("inserthtml",u.outerHTML),this._onChange(),this._setBackupData(),this._videoDialog.ejDialog("close")):i.target.id==="video_cancel"?this._videoDialog.ejDialog("close"):this._openAlert(this._getLocalizedLabels("videoError"));this._videoDialog.find("textarea.e-rte-video")[0].value="";this._videoDialog.find("#"+this._rteId+"_videoX").val("");this._videoDialog.find("#"+this._rteId+"_videoY").val("");this._chkvideoDimensions.ejCheckBox({check:!0})},_clearAllManager:function(){this._alertWindow.find(".e-alert-cancel").show();this._openAlert(this._getLocalizedLabels("deleteAlert"))},_onUnlink:function(){var n;this.executeCommand("unlink",n)},_onSuperScript:function(){var n;this.executeCommand("SuperScript",n)},_onSubScript:function(){var n;this.executeCommand("SubScript",n)},_onInsertTable:function(n,t,i){var r=this._tableGenerator(n,t,i);this.executeCommand("inserthtml",r)},_onUpperCase:function(){var u;if(this._isIE()){if(this._getWindow().document.selection.type.toLowerCase()=="control")return;u=this._getWindow().document.selection.createRange();this._getDocument().selection.createRange().pasteHTML(this._seleText.toUpperCase())}else{var f=this._getWindow().getSelection(),t=f.getRangeAt(0),i=t.commonAncestorContainer,e=t.commonAncestorContainer.children;if(e!=null){var o=t.extractContents(),s=this._changeCase(o,"Upper"),h=n(s).clone(),r=document.createElement("div");n(r).append(n(h));r.innerHTML!=null&&r.innerHTML!=""&&this._getWindow().document.execCommand("inserthtml",!1,r.innerHTML)}else{var c=i.nodeValue.substring(t.startOffset,t.endOffset).toUpperCase(),l=i.nodeValue.substr(0,t.startOffset),a=i.nodeValue.substring(t.endOffset);i.nodeValue=l+c+a}}},_changeCase:function(n,t){var i=n.childNodes,r;if(i.length>0)for(r=0;r<i.length;r++)i[r].nodeType==3?i[r].nodeValue=t=="Upper"?i[r].nodeValue.toUpperCase():i[r].nodeValue.toLowerCase():i[r].nodeType==1&&i[r].tagName.toUpperCase()!="FONT"&&this.changeCase(i[r],t);return i},_onLowerCase:function(){var u=this._getWindow().getSelection(),t=u.getRangeAt(0),i=t.commonAncestorContainer,f=t.commonAncestorContainer.children;if(f!=null){var e=t.extractContents(),o=this.changeCase(e,"Lower"),s=n(o).clone(),r=document.createElement("div");n(r).append(n(s));r.innerHTML!=null&&r.innerHTML!=""&&this._getWindow().document.execCommand("inserthtml",!1,r.innerHTML)}else{var h=i.nodeValue.substring(t.startOffset,t.endOffset).toLowerCase(),c=i.nodeValue.substr(0,t.startOffset),l=i.nodeValue.substring(t.endOffset);i.nodeValue=c+h+l}},_listIndent:function(n){var i,r;return(i=n.previousSibling,i&&this._isListNode(i))?(i.appendChild(n),!0):i&&i.nodeName=="LI"&&this._isListNode(i.lastChild)?(i.lastChild.appendChild(n),this._combineLists(n.lastChild,i.lastChild,n),!0):(i=n.nextSibling,i&&this._isListNode(i))?(i.insertBefore(n,i.firstChild),!0):i&&i.nodeName=="LI"&&this._isListNode(n.lastChild)?!1:(i=n.previousSibling,i&&i.nodeName=="LI")?(r=t.buildTag(n.parentNode.nodeName)[0],i.appendChild(r),r.appendChild(n),this._combineLists(n.lastChild,r,n),!0):!0},_combineLists:function(t,i,r){var u;if(this._isListNode(t)){while(u=r.lastChild.firstChild)i.appendChild(u);n(t).remove()}},_isListNode:function(n){return n&&/^(OL|UL)$/.test(n.nodeName)},_isFirstChild:function(n){return n.parentNode.firstChild==n},_isLastChild:function(n){return n.parentNode.lastChild==n},_removeEmptyList:function(t){t&&n(t).children().length===0&&n(t).remove()},_listOutdent:function(t){var r=n(t.parentNode),i=r[0].parentNode;return(t=n(t),this._isFirstChild(t[0])&&this._isLastChild(t[0]))?(i.nodeName=="LI"?(t.insertAfter(i),this._removeEmptyList(i),r.remove()):this._isListNode(i)?r.remove():this.executeCommand("outdent",!1),!0):this._isFirstChild(t[0])?(i.nodeName=="LI"?(t.insertAfter(i),t[0].appendChild(r[0]),this._removeEmptyList(i)):this._isListNode(i)?i.insertBefore(t[0],r[0]):this.executeCommand("outdent",!1),!0):this._isLastChild(t[0])?(i.nodeName=="LI"?t.insertAfter(i):this._isListNode(i)?t.insertAfter(r[0]):this.executeCommand("outdent",!1),!0):(this.executeCommand("outdent",!1),!1)},_updateIndent:function(t){this._toolBarObj.enableItemByID(this._rteId+"indent");t&&/^(LI)$/.test(t.nodeName)&&n(t).parents(t.parentNode.nodeName).last().find("li").index(t)===0&&this._toolBarObj.disableItemByID(this._rteId+"indent")},_updateCharCount:function(){if(this.model.showFooter&&this.model.showWordCount){var t=this._getText();this._wordCount.html(this._getLocalizedLabels("characters")+" : "+n.trim(t).length)}},_updateTagInfo:function(t){var u="",i,e=t.tagName.toLowerCase(),f,r;if(this.model.showFooter&&this.model.showHtmlTagInfo&&e!="body"){for(f=n(t).parents(),r=f.length-1;r>=0;r--)i=f[r].tagName.toLowerCase(),i!="body"&&i!="html"&&(u+="  "+i);u+="  "+e;this._htmlInfo.html(u)}},_updateValue:function(){this.value(this._getDocument().body.innerHTML)},_setClearFormat:function(){var n=this._rteToolbar.find(".e-active").length},_updateToolbarStatus:function(){var n;if(this.model.showToolbar){for(n=0;n<this._styleItems.length;n++)this._getCommandStatus(this._styleItems[n].toLowerCase())?this._toolBarObj.selectItemByID(this._rteId+this._styleItems[n]):this._toolBarObj.deselectItemByID(this._rteId+this._styleItems[n]);for(n=0;n<this._alignItems.length;n++)this._getCommandStatus(this._alignItems[n].toLowerCase())?this._toolBarObj.selectItemByID(this._rteId+this._alignItems[n]):this._toolBarObj.deselectItemByID(this._rteId+this._alignItems[n]);for(n=0;n<this._scriptsItems.length;n++)this._getCommandStatus(this._scriptsItems[n].toLowerCase())?this._toolBarObj.selectItemByID(this._rteId+this._scriptsItems[n]):this._toolBarObj.deselectItemByID(this._rteId+this._scriptsItems[n]);this._getCommandStatus("InsertOrderedList")?this._toolBarObj.selectItemByID(this._rteId+"orderedList"):this._toolBarObj.deselectItemByID(this._rteId+"orderedList");this._getCommandStatus("InsertUnorderedList")?this._toolBarObj.selectItemByID(this._rteId+"unorderedList"):this._toolBarObj.deselectItemByID(this._rteId+"unorderedList")}},_updateFormat:function(){if(this._formatDDL&&this.model.showToolbar&&!t.isNullOrUndefined(this.model.tools.formatStyle)){var i=n.trim(this._getCommandValue("formatblock").replace("'","").replace("'",""));t.isNullOrUndefined(i)||i==""?this._formatDDL.ejDropDownList({value:this._getLocalizedLabels("format")}):this._formatDDL.ejDropDownList("setSelectedValue",i)}},_updateFontOptionStatus:function(){var i,r;this.model.showFontOption&&this.model.showToolbar&&!t.isNullOrUndefined(this.model.tools.font)&&(i=n.trim(this._getCommandValue("fontname").replace("'","").replace("'","")),t.isNullOrUndefined(i)||i==""&&(i="Segoe UI"),this._fontStyleDDL.ejDropDownList("setSelectedValue",i),r=this._getCommandValue("fontsize"),t.isNullOrUndefined(r)||r==""&&(r=2),this._fontSizeDDL.ejDropDownList("setSelectedValue",r))},_getSelText:function(){var n="",i,r,t;return this._isIE()?n=this._seleText:window.getSelection?(i=this._getWindow().getSelection(),t=document.createRange(),t=i.getRangeAt(0),r=document.createTextNode(t.toString()),n=r.nodeValue):document.getSelection&&(n=this._getWindow().document.getSelection()),n},_isIE:function(){var n=!1,i=t.browserInfo();return i.name=="msie"&&(n=!0),n},_isUrl:function(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(n)},_pasteHtml:function(n){var i,t,r,u,e,f;if(window.getSelection){if(i=this._getWindow().getSelection(),i.getRangeAt&&i.rangeCount){for(t=i.getRangeAt(0),t.deleteContents(),r=document.createElement("div"),r.innerHTML=n,u=this._getDocument().createDocumentFragment();e=r.firstChild;)f=u.appendChild(e);t.insertNode(u);f&&(t=t.cloneRange(),t.setStartAfter(f),t.collapse(!0),i.removeAllRanges(),i.addRange(t))}}else this._getDocument().selection&&this._getDocument().selection.type!="Control"&&this._getDocument().selection.createRange().pasteHTML(n)},_getLocalizedLabels:function(n){return t.RTE.Locale[this.model.locale][n]===i?t.RTE.Locale["en-US"][n]:t.RTE.Locale[this.model.locale][n]},_getSelectedNode:function(){var i,n=this._getRange(),t=n.startContainer,r=n.endContainer,u=n.startOffset,f=n.endOffset;return n?n.setStart?(i=n.commonAncestorContainer,!n.collapsed&&(t==r&&f-u<2&&t.hasChildNodes()&&(i=t.childNodes[u]),t.nodeType===3&&r.nodeType===3&&(t=t.length===u?this._skipEmptyNode(t.nextSibling,!0):t.parentNode,r=f===0?this._skipEmptyNode(r.previousSibling,!1):r.parentNode,t&&t===r)))?t:i&&i.nodeType==3?i.parentNode:i:n.item?n.item(0):n.parentElement():this._getDocument().selection},_skipEmptyNode:function(n,t){for(var i=n;n&&n.nodeType===3&&n.length===0;)n=t?n.nextSibling:n.previousSibling;return n||i},_getSelection:function(){var n;return this._isIE()?(n=this._getDocument().selection.createRange(),n.type=this._getDocument().selection.type):(n=window.getSelection(),n.rangeCount&&(sText=n.getRangeAt(0)),n.type=this._getWindow().getSelection().type),n},_saveSelection:function(){var i=this._getWindow(),r=i.document,n=i.getSelection?i.getSelection():r.selection,t;return n&&(n.createRange?t=n.createRange():n.getRangeAt(0)?t=n.getRangeAt(0):n.anchorNode&&n.focusNode&&r.createRange&&(t=r.createRange(),t.setStart(n.anchorNode,n.anchorOffset),t.setEnd(n.focusNode,n.focusOffset),t.collapsed!==n.isCollapsed&&(t.setStart(n.focusNode,n.focusOffset),t.setEnd(n.anchorNode,n.anchorOffset)))),t},_restoreSelection:function(n){var i=this._getWindow(),r=i.document,t=i.getSelection?i.getSelection():r.selection;t&&n&&(n.select?n.select():t.removeAllRanges&&t.addRange&&(t.removeAllRanges(),t.addRange(n)))},_getRange:function(){if(this._isIE())return t.isNullOrUndefined(this._selectionRange)?this._saveSelection():this._selectionRange;if(this._getWindow().getSelection().rangeCount>0)return this._getWindow().getSelection().getRangeAt(0);var r=document.getElementsByTagName("iframe")[0],n=r.contentWindow,i=n.document.createRange();return i.setStart(n.document.body,0),i.setEnd(n.document.body,0),n.document.body.focus(),i},_setBackupData:function(){var n=this.getHtml(),t=this._backupArray.length;t==this.model.undoStackLimit+1&&this._backupArray.splice(0,1);n!=this._backupArray[t-1]&&this.model.undoStackLimit>0&&this._backupArray.push(n);this._undoRedoPosition=this._backupArray.length-1;this.model.showToolbar&&this._rteToolbar.find("#"+this._rteId+"undo")&&this._backupArray.length>1&&this._toolBarObj.enableItemByID(this._rteId+"undo")},_getSelectedHtmlString:function(){return document.selection?this._getWindow().document.selection.createRange().htmlText:this._seleText},_getText:function(){var n=this._getDocument().body;if(n!=null)return this._isIE()?n.innerText:n.textContent},_validateMaxLength:function(n){if(this.model.maxLength!=null){var t=this.model.maxLength,i=this._getText();t<=i.length&&(n.keyCode<47||n.ctrlKey&&n.keyCode==65||n.ctrlKey&&n.keyCode==67||n.ctrlKey&&n.keyCode==86||n.ctrlKey&&n.keyCode==88||(this._keypressFlag=!1,this._cancelEvent(n)))}},_cancelEvent:function(n){return n.returnValue=!1,n.stopPropagation(),n.preventDefault(),!1},_alignToolUpdate:function(n){for(var t=0;t<this._alignItems.length;t++)this._alignItems[t]===n?this._toolBarObj.selectItemByID(this._rteId+"underline"):this._toolBarObj.deselectItemByID(this._rteId+"underline")},_getCommandStatus:function(n){return this._getDocument().queryCommandState(n)},_getCommandValue:function(n){return this._getDocument().queryCommandValue(n)},_undo:function(){this._undoRedoPosition>0&&(this.setHtml(this._backupArray[this._undoRedoPosition-1]),this._undoRedoPosition--,this._updateToolbarStatus(),this._updateFontOptionStatus(),this._updateFormat(),this._updateCharCount(),this._toolBarObj.enableItemByID(this._rteId+"redo"));this._undoRedoPosition==0&&(this._toolBarObj.disableItemByID(this._rteId+"undo"),this._toolBarObj.enableItemByID(this._rteId+"redo"));this._focus()},_redo:function(){var n;this._undoRedoPosition!=this._backupArray.length&&(this._backupArray[this._undoRedoPosition+1]!=null?(n=this._backupArray[this._undoRedoPosition+1],this.setHtml(n),this._undoRedoPosition++):(n=this._backupArray[this._backupArray.length-2],this.setHtml(n),this._undoRedoPosition=this._backupArray.length-2),this._updateToolbarStatus(),this._updateFontOptionStatus(),this._updateFormat(),this._updateCharCount(),t.isNullOrUndefined(this._toolBarObj)||(this._backupArray.length-1>0&&this._toolBarObj.enableItemByID(this._rteId+"undo"),this._undoRedoPosition==this._backupArray.length-1&&this._toolBarObj.disableItemByID(this._rteId+"redo")));this._focus()},_setContent:function(n){var t=this._getDocument();t.open();t.write(n);t.close();t.EditMode=!0},_tableCellStart:function(){this._tableInsertAt=this._saveSelection()},_tableCellSelect:function(i){var r,e=n(i.target),u=e.parent().index(),f=e.index();this._createTable.find("div.e-rte-tablecell").each(function(){r=n(this);r.index()<=f&&r.parent().index()<=u?r.addClass("e-active"):r.removeClass("e-active")});this._tblheaderDiv.html(f+1+"x"+(u+1)+" Table");n(this._getDocument()).find("table.e-rte-tableremove").remove();t.isNullOrUndefined(this._tableInsertAt)||t.isNullOrUndefined(this._tableInsertAt.startContainer)||(this._restoreSelection(this._tableInsertAt),this._onInsertTable(u+1,f+1,!0))},_tableCellLeave:function(){this._createTable.find("div.e-rte-tablecell").removeClass("e-active");n(this._getDocument()).find("table.e-rte-tableremove").remove();this._tblheaderDiv.html(this._getLocalizedLabels("createTable"))},_tableCellDown:function(i){var u=n(i.target),f=u.parent().index()+1,e=u.index()+1,r;this._focus();n(this._getDocument()).find("table.e-rte-tableremove").remove();t.isNullOrUndefined(this._tableInsertAt)||t.isNullOrUndefined(this._tableInsertAt.startContainer)||(this._restoreSelection(this._tableInsertAt),this._onInsertTable(f,e,!1));r=n(this._getDocument()).find("table.e-rte-table");r.attr("contentEditable",!1);r.find("td").attr("contentEditable",!0);this._createTable.ejDialog("close");this._setBackupData();this._onChange()},_tableGenerator:function(n,i,r,u,f,e,o,s,h,c){var l="e-rte-table";return r&&(l+=" e-rte-tableremove"),u=t.isNullOrUndefined(u)||u==""?"width='100%'":"width="+u+"'",f=t.isNullOrUndefined(f)||f==""?"":"height='"+f+"'",e=t.isNullOrUndefined(e)||e==""?"":"cellspacing='"+e+"'",o=t.isNullOrUndefined(o)||o==""?"":"cellpadding='"+o+"'",h=t.isNullOrUndefined(h)||h==""?"border='1'":"border='"+h+"'",s=t.isNullOrUndefined(s)?"":" align='"+s+"'","<table class='"+l+"' "+u+" "+f+" "+h+" "+e+" "+o+" "+s+">"+(c?"<caption><\/caption>":"")+Array(n+1).join("<tr>"+Array(i+1).join("<td><br _moz_dirty=''/><\/td>")+"<\/tr>")+"<\/table>"},_openCustomTable:function(){this._customTableDialog.ejDialog("open")},_documentClick:function(i){!t.isNullOrUndefined(this._createTable)&&n(i.target).parents("#"+this._rteId+"tables").length<=0&&this._createTable.ejDialog("isOpened")&&this._createTable.ejDialog("close")},_iframeFocus:function(n){!t.isNullOrUndefined(this._createTable)&&this._createTable.ejDialog("isOpened")&&this._createTable.ejDialog("close");t.isNullOrUndefined(this._fontSizeDDL)||this._fontSizeDDL.ejDropDownList("hidePopup");t.isNullOrUndefined(this._fontStyleDDL)||this._fontStyleDDL.ejDropDownList("hidePopup");t.isNullOrUndefined(this._formatDDL)||this._formatDDL.ejDropDownList("hidePopup");t.isNullOrUndefined(this._createTable)||this._createTable.ejDialog("close");t.isNullOrUndefined(this._splitMenu)||this._splitMenu.hide(n);t.isNullOrUndefined(this._bgSplitMenu)||this._bgSplitMenu.hide(n)},_iframeKeyDown:function(n){var t,i;if(this.model.showToolbar&&this.model.allowKeyboardNavigation)if(n&&n.ctrlKey==!0){if(n.keyCode==66)return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"bold"),t.hasClass("e-disable")||(this._onBold(),t.hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+"bold"):this._toolBarObj.selectItemByID(this._rteId+"bold")),!1;if(n.keyCode==73)return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"italic"),t.hasClass("e-disable")||(this._onItalics(),t.hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+"italic"):this._toolBarObj.selectItemByID(this._rteId+"italic")),!1;if(n.keyCode==85)return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"underline"),t.hasClass("e-disable")||(this._onUnderLine(),t.hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+"underline"):this._toolBarObj.selectItemByID(this._rteId+"underline")),!1;if(n.keyCode!=76||n.altKey){if(n.keyCode==82)return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"justifyRight"),t.hasClass("e-disable")||(this._onJustifyRight(),this._alignToolUpdate("justifyRight")),!1;if(n.keyCode!=69||n.altKey)if(n.keyCode!=74||n.altKey)if(n.keyCode!=90||n.altKey){if(n.keyCode==89)return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"rddo"),t.hasClass("e-disable")||this._onRedo(),!1;if(n.keyCode==67)t=this._toolBarItems.find("#"+this._rteId+"copy"),t.hasClass("e-disable")&&(this._keypressFlag=!1,n.preventDefault());else if(n.keyCode==88)t=this._toolBarItems.find("#"+this._rteId+"cut"),t.hasClass("e-disable")&&(this._keypressFlag=!1,n.preventDefault());else if(n.keyCode==86)t=this._toolBarItems.find("#"+this._rteId+"paste"),t.hasClass("e-disable")&&(this._keypressFlag=!1,n.preventDefault());else{if(n.keyCode==77)return n.shiftKey==!0?(n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"outdent"),t.hasClass("e-disable")||(this._onOutdent(),this._indentdepth>0&&this._indentdepth--),!1):(n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"indent"),t.hasClass("e-disable")||(this._onIndent(),this._indentdepth++),!1);if(n.keyCode==75)return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"createLink"),t.hasClass("e-disable")||this._hyperLinkManager(),!1}}else return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"undo"),t.hasClass("e-disable")||this._onUndo(),!1;else return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"justifyFull"),t.hasClass("e-disable")||(this._onJustifyFull(),this._alignToolUpdate("justifyFull")),!1;else return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"justifyCenter"),t.hasClass("e-disable")||(this._onJustifyCenter(),this._alignToolUpdate("justifyCenter")),!1}else return n.preventDefault(),t=this._toolBarItems.find("#"+this._rteId+"justifyLeft"),t.hasClass("e-disable")||(this._onJustifyLeft(),this._alignToolUpdate("justifyLeft")),!1}else if(n.keyCode==127&&(this.getHtml()==this.getSelHtmlString()||this._currentIFrame.get_Text()==this._currentIFrame.getSelText())&&(i=this.ClearAllManager(),!i))return n.preventDefault(),i;this.model.maxLength!=null&&this._validateMaxLength(n);this._trigger("keydown",{keyCode:n.keyCode})},_iframeKeypress:function(n){if(!this._keypressFlag)return n.preventDefault(),this._keypressFlag=!0,!1},_iframeKeyUp:function(n){this._toggleEditTable();this._setBackupData();this._updateToolbarStatus();this._updateFontOptionStatus();this._updateFormat();this._updateCharCount();var t=this._getSelectedNode();this._updateTagInfo(t);this._onChange();this._trigger("keyup",{keyCode:n.keyCode})},_iframeMouseUp:function(){this._toggleEditTable();this._updateToolbarStatus();this._updateFontOptionStatus();this._updateFormat()},_iframeMouseDown:function(n){this._updateTagInfo(n.target);this._updateIndent(n.target)},_iframeFocusOut:function(){this._onChange();this._selectionRange=this._saveSelection();this._seleText=t.isNullOrUndefined(this._getWindow().document.selection)?this._selectionRange.toString():this._getWindow().document.selection.createRange().text},_widthFocusOut:function(){var n=this._customTableDialog.find("#"+this._rteId+"_txtWidth").val();n&&!isNaN(n)||n.slice(-2)=="px"||n.slice(-2)=="em"||n.slice(-2)=="pt"||n.slice(-1)=="%"?this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").ejDropDownList({enabled:!0}):this._customTableDialog.find("#"+this._rteId+"_ddlAlignment").ejDropDownList({enabled:!1})},_wireEvents:function(){var i=n(this._getDocument());t.isNullOrUndefined(this._createTable)||(this._on(this._createTable,"mouseenter","div.e-rte-tablecell",this._tableCellStart),this._on(this._createTable,"mousemove","div.e-rte-tablecell",this._tableCellSelect),this._on(this._createTable,"mouseleave","div.e-rte-table",this._tableCellLeave),this._on(this._createTable,"mousedown","div.e-rte-tablecell",this._tableCellDown),this._on(n(document),"click",this._documentClick));this._on(i,"focus",this._iframeFocus);this._on(i,"keydown",this._iframeKeyDown);this._on(i,"keypress",this._iframeKeypress);this._on(i,"keyup",this._iframeKeyUp);this._on(i,"mouseup",this._iframeMouseUp);this._on(i,"mousedown",this._iframeMouseDown);this._on(i,"focusout",this._iframeFocusOut);t.isNullOrUndefined(this._customTableDialog)||this._on(this._customTableDialog.find("#"+this._rteId+"_txtWidth"),"focusout",this._widthFocusOut)},_unwireEvents:function(){var i=n(this._getDocument());t.isNullOrUndefined(this._createTable)||(this._off(this._createTable.find("div.e-rte-tablecell"),"mousemove"),this._off(this._createTable.find("div.e-rte-table"),"mouseleave"),this._off(this._createTable.find("div.e-rte-tablecell"),"mousedown"),this._off(n(document),"click"));this._off(i,"focus");this._off(i,"keydown");this._off(i,"keyup");this._off(i,"mouseup");this._off(i,"mousedown");this._off(i,"blur");t.isNullOrUndefined(this._customTableDialog)||this._off(this._customTableDialog.find("#"+this._rteId+"_txtWidth"),"focusout")},_onChange:function(){if(_prevhtml=n.trim(this.value()).replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"<\/$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"").replace(/&nbsp;/g," "),_prevhtml!==this.getHtml()){this._updateValue();var t={text:this._getText(),htmlText:this.getHtml()};this._trigger("change",t)}},disableToolbarItem:function(n){t.isNullOrUndefined(n)||this._toolBarObj.disableItemByID(n)},enableToolbarItem:function(n){t.isNullOrUndefined(n)||this._toolBarObj.enableItemByID(n)},removeToolbarItem:function(n){t.isNullOrUndefined(n)||this._toolBarObj.removeItemByID(n)},show:function(){this._rteWapper.show()},hide:function(){this._rteWapper.hide()},getHtml:function(){var t=this._getDocument().body.innerHTML;return n.trim(t).replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"<\/$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"").replace(/&nbsp;/g," ")},setHtml:function(n){this._getDocument().body.innerHTML=n},getText:function(){return this._getText()},executeCommand:function(t,i){if(this._trigger("execute",{commandName:t}))return!1;var r="";if(t=="underline"){if(window.getSelection&&(r=n(this._getWindow().getSelection().anchorNode).parents("a"),r.length>0)){n(r).css("text-decoration",n(r).css("text-decoration")=="none"?"underline":"none");return}}else if(t.toLowerCase()=="inserthtml"){this._isIE()?this._pasteHtml(i):this._getDocument().execCommand(t,!1,i);return}this._getDocument().execCommand(t,!1,i);this._setBackupData()},focus:function(){this._focus()},getCommandStatus:function(n){if(t.isNullOrUndefined(n)||n!="")return this._getCommandStatus(n)},getSelectedHtml:function(){return this._getSelectedHtmlString()},insertRow:function(i,r){var e=t.isNullOrUndefined(r)?this._getSelectedNode():r,u=n(e).closest("tr"),o=u.find("td").length,f=n("<tr>"+Array(o+1).join("<td contentEditable='true'><br _moz_dirty=''/><\/td>")+"<\/tr>");i?f.insertBefore(u):f.insertAfter(u);u.find("td:first").focus()},insertColumn:function(i,r){for(var e=t.isNullOrUndefined(r)?this._getSelectedNode():r,o="<td contentEditable='true'><br _moz_dirty=''/><\/td>",s=n(e).closest("tr"),u,h=s.closest("table").find("tr"),c=s.find("td").index(e),f=0;f<h.length;f++)u=n(h[f]).find("td")[c],i?n(o).insertBefore(u):n(o).insertAfter(u)},removeRow:function(i){var r=t.isNullOrUndefined(i)?this._getSelectedNode():i;curRow=n(r).closest("tr").remove()},removeColumn:function(i){for(var u=t.isNullOrUndefined(i)?this._getSelectedNode():i,f=n(u).closest("tr"),e=f.closest("table").find("tr"),o=f.find("td").index(u),r=0;r<e.length;r++)n(n(e[r]).find("td")[o]).remove()},removeTable:function(i){var r=t.isNullOrUndefined(i)?n(this._getSelectedNode()).closest("table"):i;n(r).remove()}});t.RTE.Locale={};t.RTE.Locale["en-US"]={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Align text center",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",unorderedList:"Insert unordered list",orderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",cut:"Cut",copy:"Copy",paste:"Paste",paragraph:"Paragraph",undo:"Undo",redo:"Redo",upperCase:"Upper Case",lowerCase:"Lower Case",clearAll:"Clear All",clearFormat:"Clear Format",createLink:"Insert/Edit hyperlink",image:"Insert image",video:"Insert video",embedVideo:"Paste your embed code below",viewHtml:"View HTML",fontName:"Select font family",fontSize:"Select font size",fontColor:"Select color",format:"Format",backgrounColor:"Background color",style:"Styles",deleteAlert:"Are you sure you want to clear all the contents?",copyPastAlert:"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.",videoError:"The text area can not be empty",imageWebUrl:"Web Address",imageAltText:"Image description",dimensions:"Dimensions",constrainProportions:"Constrain Proportions",linkWebUrl:"Web Address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",tableColumns:"No.of Columns",tableRows:"No.of Rows",tableWidth:"Table width",tableHeight:"Table height",tableCellSpacing:"Cell spacing",tableCellPadding:"Cell padding",tableBorder:"Border",tableCaption:"Caption",tableAlignment:"Alignment",dialogUpdate:"Update",dialogInsert:"Insert",dialogCancel:"Cancel",dialogOk:"Ok",createTable:"Create table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete the row",deleteColumn:"Delete the column",deleteTable:"Delete the table",customTable:"Create custom table...",characters:"Characters"}}(jQuery,Syncfusion)