/*!
*  filename: ej.bulletgraph.min.js
*  version : 12.2.0.36
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t,i){t.widget("ejBulletGraph","ej.datavisualization.BulletGraph",{element:null,model:null,validTags:["div"],defaults:{value:0,comparativeMeasureValue:0,width:595,height:90,theme:"flatlight",orientation:"horizontal",flowDirection:"forward",qualitativeRangeSize:32,quantitativeScaleLength:475,tooltipSettings:{visible:!0,template:null},quantitativeScaleSettings:{location:{x:10,y:10},minimum:0,maximum:10,interval:1,minorTicksPerInterval:4,majorTickSettings:{size:13,stroke:null,width:2},minorTickSettings:{size:7,stroke:null,width:2},tickPosition:"below",labelSettings:{stroke:null,size:12,offset:20,font:{fontFamily:"Segoe UI",fontStyle:"Normal ",fontWeight:"regular",opacity:1},position:"below"},featuredMeasureSettings:{stroke:null,width:6},comparativeMeasureSettings:{stroke:null,width:5},featureMeasures:[{value:null,comparativeMeasureValue:null,category:null}]},fields:{dataSource:null,query:null,tableName:null,category:null,featureMeasures:null,comparativeMeasure:null},enableAnimation:!0,enableResizing:!0,applyRangeStrokeToTicks:!1,applyRangeStrokeToLabels:!1,qualitativeRanges:[{rangeEnd:4.3,rangeStroke:null,rangeOpacity:1},{rangeEnd:7.3,rangeStroke:null,rangeOpacity:1},{rangeEnd:10,rangeStroke:null,rangeOpacity:1}],captionSettings:{textAngle:0,location:{x:17,y:30},text:"",font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",fontWeight:"regular",opacity:1},subTitle:{textAngle:0,text:"",location:{x:10,y:45},font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal ",size:"12px",fontWeight:"regular",opacity:1}}},drawTicks:null,drawLabels:null,drawCaption:null,drawQualitativeRanges:null,drawFeatureMeasureBar:null,drawCategory:null,drawComparativeMeasureSymbol:null},observables:["value","comparativeMeasureValue"],value:t.util.valueFunction("value"),comparativeMeasureValue:t.util.valueFunction("comparativeMeasureValue"),dataTypes:{quantitativeScaleSettings:{labelSettings:"data",featureMeasures:"array"},fields:{dataSource:"data",query:"data"},qualitativeRanges:"array",captionSettings:"data"},_init:function(){this._renderBulletGraph()},_isSVG:function(){return window.SVGSVGElement?!0:!1},_renderBulletGraph:function(){if(this._isSVG()){this.svgRenderer=new t.EjSvgRender(this.element);this.svgObject=this.svgRenderer.svgObj;this._trigger("load");for(var n=0;this.model.quantitativeScaleSettings.featureMeasures[n]!=null;n++)this.model.quantitativeScaleSettings.featureMeasures[n].value==null&&(this.model.quantitativeScaleSettings.featureMeasures[n].value=this.value()),this.model.quantitativeScaleSettings.featureMeasures[n].comparativeMeasureValue==null&&(this.model.quantitativeScaleSettings.featureMeasures[n].comparativeMeasureValue=this.comparativeMeasureValue());this._setTheme(t.datavisualization.BulletGraph.Themes,this.model.theme);this._renderBulletElements();this.bindEvents();this.model.enableAnimation&&this._animateMeasures()}},_animateMeasures:function(){this._doAnimation();this._doLineAnimation()},_renderBulletElements:function(){var r;this.svgObject.setAttribute("width",this.model.width);this.svgObject.setAttribute("height",this.model.height);this.svgObject.setAttribute("viewBox","0 0 "+this.model.width+" "+this.model.height);this.svgObject.setAttribute("preserveAspectRatio","xMinYMin");this.svgWidth=this.model.width;this.svgHeight=this.model.height;var u=this.svgRenderer.createGroup({id:this.svgObject.id+"_captionGroup"}),t=this.svgRenderer.createGroup({id:this.svgObject.id+"_scaleGroup"}),i=this.svgRenderer.createGroup({id:this.svgObject.id+"_outerWrap"});this._initializeValues();r=this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/this._scale.interval);this._drawCaption(u);this._scaleGroup=t;this._drawScale(u,t);this._drawQualitativeRanges(t);this._drawMajorTicks(r,t);this._drawMinorTicks(r,t);this._drawLabels(r,t);this._bindData();n(u).appendTo(i);n(t).appendTo(i);this._changeOrientation(i);n(i).appendTo(this.svgObject);n(this.svgObject).appendTo(this.element)},_initializeValues:function(){this._scale=this.model.quantitativeScaleSettings;this._labelPosition=this._scale.labelSettings.position;this._tickPosition=this._scale.tickPosition;this._flowDirection=this.model.flowDirection;this._orientation=this.model.orientation},_changeOrientation:function(n){this._orientation==t.datavisualization.BulletGraph.Orientation.Vertical&&n.setAttribute("transform","translate("+(this.model.height-this.model.width)+", "+-(this.model.width+2*this._scale.labelSettings.offset+this._scale.labelSettings.size)+") scale(1) rotate(-90 "+this.model.width+" "+this.model.height+")")},_setModel:function(i){var f=!0,r,u;for(r in i){this.model.enableAnimation=!1;switch(r){case"height":this.model.height=i[r];break;case"width":this.model.width=i[r];break;case"theme":this.model.theme=i[r];this._setTheme(t.datavisualization.BulletGraph.Themes,this.model.theme);break;case"orientation":this.model.orientation=i[r];break;case"flowDirection":this.model.flowDirection=i[r];break;case"qualitativeRangeSize":this.model.qualitativeRangeSize=i[r];break;case"quantitativeScaleLength":this.model.quantitativeScaleLength=i[r];break;case"quantitativeScaleSettings":n.extend(!0,this.model.quantitativeScaleSettings,{},i[r]);break;case"applyRangeStrokeToTicks":this.model.applyRangeStrokeToTicks=i[r];break;case"applyRangeStrokeToLabels":this.model.applyRangeStrokeToLabels=i[r];break;case"qualitativeRanges":n.extend(!0,this.model.qualitativeRanges,{},i[r]);break;case"captionSettings":n.extend(!0,this.model.captionSettings,{},i[r]);break;case"dataSource":n.extend(!0,this.model.fields,{},i[r]);break;case"value":for(u=0;this.model.quantitativeScaleSettings.featureMeasures[u]!=null;u++)this.model.quantitativeScaleSettings.featureMeasures[u].value=parseFloat(this.value());break;case"comparativeMeasureValue":for(u=0;this.model.quantitativeScaleSettings.featureMeasures[u]!=null;u++)this.model.quantitativeScaleSettings.featureMeasures[u].comparativeMeasureValue=parseFloat(this.comparativeMeasureValue());break;case"enableAnimation":this.model.enableAnimation=i[r];this.model.enableAnimation&&(n(this.svgObject).empty(),this._renderBulletElements(),this._animateMeasures());f=!1}}f&&(n(this.svgObject).empty(),this._renderBulletElements())},_bindData:function(){t.isNullOrUndefined(this.model.fields)||this.model.fields.dataSource==null?(this._dataCount=this._scale.featureMeasures.length,this._drawMeasures()):this.model.fields.dataSource instanceof t.DataManager?this._initDataSource():(this._dataCount=this.model.fields.dataSource.length,this._drawMeasures())},_drawMeasures:function(){this._drawFeatureMeasureBar();this._drawComparativeMeasureSymbol()},_initDataSource:function(){var t=this._columnToSelect(this.model.fields),n=this,i=this.model.fields.dataSource.executeQuery(t);i.done(function(t){n.model.fields.dataSource=t.result;n._dataCount=t.result.length;n._drawFeatureMeasureBar();n._drawComparativeMeasureSymbol()})},_columnToSelect:function(n){var u=[],r=t.Query(),i;if(t.isNullOrUndefined(n.query)){for(i in n)i!=="tableName"&&i!=="query"&&i!=="dataSource"&&u.push(n[i]);u.length>0&&r.select(u);this.model.fields.dataSource.dataSource.url.match(n.tableName+"$")||t.isNullOrUndefined(n.tableName)||r.from(n.tableName)}else r=n.query;return r},_drawCaption:function(n){this.model.drawCaption&&this._onDrawCaption(this._textOptions(this.model.captionSettings),"MainTitle",this.model.captionSettings.text);this.svgRenderer.drawText(this._textOptions(this.model.captionSettings),this.model.captionSettings.text,n);this.model.captionSettings.subTitle.text!=""&&(this.model.drawCaption&&this._onDrawCaption(this._textOptions(this.model.captionSettings.subTitle),"SubTitle",this.model.captionSettings.subTitle.text),this.svgRenderer.drawText(this._textOptions(this.model.captionSettings.subTitle),this.model.captionSettings.subTitle.text,n))},_textOptions:function(n){var t=n.text===this.model.captionSettings.text?n.location.y:n.location.y-15;return{x:n.location.x,y:n.location.y,fill:n.font.color,"font-size":n.font.size,"font-family":n.font.fontFamily,"font-style":n.font.fontStyle,"font-weight":n.font.fontWeight,"text-anchor":"start",opacity:n.font.opacity,"dominant-baseline":"middle",transform:"rotate("+n.textAngle+","+n.location.x+","+t+")"}},_drawScale:function(n,i){var r,u,f;r=this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Below||this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Cross?this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y:this._scale.location.y+this._scale.labelSettings.offset+this._scale.labelSettings.size:this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this._scale.majorTickSettings.size:this._scale.location.y+this._scale.labelSettings.offset+this._scale.labelSettings.size+this._scale.majorTickSettings.size;u=this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward?this._scale.location.x:this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x-this._scale.labelSettings.offset:this._scale.location.x;f={id:this.svgObject.id+"_SvgScale",x:u,y:r,width:this.model.quantitativeScaleLength,height:this.model.qualitativeRangeSize,fill:"transparent","stroke-width":0};this.svgRenderer.drawRect(f,i)},_drawMajorTicks:function(n,i){var r,f,o=0,u,e,s;for(r=this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward?this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x+this._scale.majorTickSettings.width/2:this._scale.location.x+this.model.quantitativeScaleLength-this._scale.labelSettings.offset+this._scale.majorTickSettings.width/2:this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x+this.model.quantitativeScaleLength-this._scale.labelSettings.offset-this._scale.majorTickSettings.width/2:this._scale.location.x+this._scale.majorTickSettings.width/2,f=this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Below?this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize:this._scale.location.y+this.model.qualitativeRangeSize+this._scale.labelSettings.offset+this._scale.labelSettings.size:this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Above?this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y:this._scale.location.y+this._scale.labelSettings.offset+this._scale.labelSettings.size:this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize/2-this._scale.majorTickSettings.size/2:this._scale.location.y+this.model.qualitativeRangeSize/2-this._scale.majorTickSettings.size/2+this._scale.labelSettings.offset+this._scale.labelSettings.size,u=this._scale.minimum;u<=this._scale.maximum;u+=this._scale.interval)o++,u>=this._scale.maximum&&(r-=this._scale.majorTickSettings.width),this._orientation==t.datavisualization.BulletGraph.Orientation.Vertical&&this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward&&(r=u>=this._scale.maximum?r+this._scale.majorTickSettings.width:u==this._scale.minimum?r-this._scale.majorTickSettings.width:r),this.model.applyRangeStrokeToTicks&&(strokeColor=this._bindingRangeStrokes(r-this._scale.majorTickSettings.width/2)),e={x1:r,y1:f,x2:r,y2:f+this._scale.majorTickSettings.size,"stroke-width":this._scale.majorTickSettings.width,stroke:this.model.applyRangeStrokeToTicks?strokeColor:this._scale.majorTickSettings.stroke},this._orientation==t.datavisualization.BulletGraph.Orientation.Vertical&&this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward&&u==this._scale.minimum&&(r=r+this._scale.majorTickSettings.width),this.model.drawTicks&&this._onDrawTicks(e,"MajorTick",o),s=this.svgRenderer.createLine(e),r=this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Backward&&this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal||this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward&&this._orientation==t.datavisualization.BulletGraph.Orientation.Vertical?r-n:r+n,i.appendChild(s)},_forwardStrokeBinding:function(n){if(n>=this._scale.location.x&&n<=this._rangeCollection[0]+this._scale.location.x)return this.model.qualitativeRanges[0].rangeStroke;for(var t=0;t<=this._rangeCollection.length-1;t++)if(n>=this._rangeCollection[t]+this._scale.location.x&&n<=this._rangeCollection[t+1]+this._scale.location.x)return this.model.qualitativeRanges[t+1].rangeStroke},_backwardStrokeBinding:function(t){if(t>=this._rangeCollection[this._rangeCollection.length-1])return this.model.qualitativeRanges[0].rangeStroke;for(k=0;k<=this._rangeCollection.length-1;k++)if(t>=this._rangeCollection[k]&&t<this._rangeCollection[k+1]){var i=n.inArray(this._rangeCollection[k],this._rangeCollection);return this.model.qualitativeRanges[this._rangeCollection.length-1-i].rangeStroke}},_bindingRangeStrokes:function(n){if(this._rangeCollection.length==1){if(n>=this._scale.location.x&&n<=this._rangeCollection[0]+this._scale.location.x)return this.model.qualitativeRanges[0].rangeStroke}else return this.model.orientation==t.datavisualization.BulletGraph.Orientation.Horizontal&&this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward||this.model.orientation==t.datavisualization.BulletGraph.Orientation.Vertical&&this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Backward?this._forwardStrokeBinding(n):this._backwardStrokeBinding(n)},_drawMinorTicks:function(n,i){var f,e,r,o,u,h=0,a,c,s,l,v,y;for(f=this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward?this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x:this._scale.location.x-this._scale.labelSettings.offset-2*this._scale.minorTickSettings.width:this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x+this.model.quantitativeScaleLength-this._scale.labelSettings.offset-this._scale.minorTickSettings.width/2:this._scale.location.x,this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Below?(r=this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize:this._scale.location.y+this.model.qualitativeRangeSize+this._scale.labelSettings.offset+this._scale.labelSettings.size,o=r+this._scale.minorTickSettings.size):this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Above?(r=this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this._scale.minorTickSettings.size:this._scale.location.y+this._scale.labelSettings.offset+this._scale.labelSettings.size+this._scale.minorTickSettings.size,o=this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this._scale.majorTickSettings.size:this._scale.location.y+this._scale.labelSettings.offset+this._scale.labelSettings.size+this._scale.majorTickSettings.size):(r=this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize/2-this._scale.minorTickSettings.size/2:this._scale.location.y+this.model.qualitativeRangeSize/2-this._scale.minorTickSettings.size/2+this._scale.labelSettings.offset+this._scale.labelSettings.size,o=r+this._scale.minorTickSettings.size),a=this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Backward&&this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.maximum+1:this._scale.maximum,c=this._scale.minimum;c<=a;c+=this._scale.interval){for(e=n/this._scale.minorTicksPerInterval,s=1;s<=this._scale.minorTicksPerInterval;s++)h++,u=f+e-e/(this._scale.minorTicksPerInterval+1),this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Backward&&this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal&&h>=(this._scale.maximum-this._scale.minimum)*this._scale.minorTicksPerInterval&&(u+=this._scale.minorTickSettings.width/2),this.model.applyRangeStrokeToTicks&&(strokeColor=this._bindingRangeStrokes(u)),l={x1:u,y1:r,x2:u,y2:o,"stroke-width":this._scale.minorTickSettings.width,stroke:this.model.applyRangeStrokeToTicks?strokeColor:this._scale.minorTickSettings.stroke},this.model.drawTicks&&this._onDrawTicks(l,"MinorTick",h),v=this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Backward&&this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal||this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward&&this._orientation==t.datavisualization.BulletGraph.Orientation.Vertical?this.model.quantitativeScaleLength+this._scale.location.x-this._scale.labelSettings.offset+1:this.model.quantitativeScaleLength+this._scale.location.x+1,u<=v&&(y=this.svgRenderer.createLine(l),i.appendChild(y)),e=n/this._scale.minorTicksPerInterval*(s+1);f=this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Backward&&this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?f-n:f+n}},_drawLabels:function(n,i){var r,f,u,e;for(r=this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward?this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x:this._scale.location.x+this.model.quantitativeScaleLength-this._scale.labelSettings.offset-this._scale.majorTickSettings.width/2:this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x+this.model.quantitativeScaleLength-this._scale.labelSettings.offset-this._scale.majorTickSettings.width:this._scale.location.x-this._scale.majorTickSettings.width/2,f=this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Below||this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Cross?this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize+this._scale.majorTickSettings.size+this._scale.labelSettings.offset:this._scale.location.y+this._scale.labelSettings.size:this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize+this._scale.labelSettings.offset+this._scale.majorTickSettings.size:this._scale.location.y+this._scale.labelSettings.size,u=this._scale.minimum;u<=this._scale.maximum;u+=this._scale.interval)transformText=this._orientation==t.datavisualization.BulletGraph.Orientation.Vertical?"rotate(90,"+(r-4)+","+f+")":"rotate(0,"+r+","+f+")",r=u==this._scale.maximum?r-this._scale.majorTickSettings.width:r,this._orientation==t.datavisualization.BulletGraph.Orientation.Vertical&&(r=this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward?u==this._scale.maximum||u==this._scale.minimum?r+this._scale.majorTickSettings.width:r:u==this._scale.minimum?r+this._scale.majorTickSettings.width/2:r),this.model.applyRangeStrokeToLabels&&(strokeColor=this._bindingRangeStrokes(r)),e={x:r,y:f,"text-anchor":"middle",fill:this.model.applyRangeStrokeToLabels?strokeColor:this._scale.labelSettings.stroke,"font-size":this._scale.labelSettings.size+"px","font-family":this._scale.labelSettings.font.fontFamily,"font-style":this._scale.labelSettings.font.fontStyle,"font-weight":this._scale.labelSettings.font.fontWeight,opacity:this._scale.labelSettings.font.opacity,transform:transformText},r=this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward?this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?r+n:r-n:this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?r-n:r+n,this.model.drawLabels&&this._onDrawLabels(e,"AxisLabel",u),this.svgRenderer.drawText(e,u,i)},_drawQualitativeRanges:function(n){var r,e,u,i,f;for(this._rangeCollection=[],e=this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Below||this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Cross?this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y:this._scale.location.y+this._scale.labelSettings.offset+this._scale.labelSettings.size:this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this._scale.majorTickSettings.size:this._scale.location.y+this._scale.labelSettings.offset+this._scale.labelSettings.size+this._scale.majorTickSettings.size,i=this.model.qualitativeRanges.length-1;i>=0;i--)this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward?(r=this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x:this._scale.location.x-this._scale.labelSettings.offset+(this.model.quantitativeScaleLength-this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-this.model.qualitativeRanges[i].rangeEnd)))),u=this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-this.model.qualitativeRanges[i].rangeEnd))):this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-this.model.qualitativeRanges[i].rangeEnd)))):(r=this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x-this._scale.labelSettings.offset+(this.model.quantitativeScaleLength-this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-this.model.qualitativeRanges[i].rangeEnd)))):this._scale.location.x,u=this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-this.model.qualitativeRanges[i].rangeEnd))):this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-this.model.qualitativeRanges[i].rangeEnd)))),f={x:r,y:e,height:this.model.qualitativeRangeSize,width:u,fill:this.model.qualitativeRanges[i].rangeStroke,opacity:this.model.qualitativeRanges[i].rangeOpacity},this.model.orientation==t.datavisualization.BulletGraph.Orientation.Horizontal&&this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward||this.model.orientation==t.datavisualization.BulletGraph.Orientation.Vertical&&this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Backward?this._rangeCollection.push(u):this._rangeCollection.push(r),this.model.drawQualitativeRanges&&this._onDrawQualitativeRanges(f,this.model.qualitativeRanges[i].rangeEnd,i),this.svgRenderer.drawRect(f,n);this._rangeCollection.sort(this._sortRangeCollection)},_sortRangeCollection:function(n,t){return n-t},_drawFeatureMeasureBar:function(){var n=1,i,u,s,f,o,h,e,r,a,c,l;if(this._dataCount>0)for(r=this._dataCount-1;r>=0;r--)i=!t.isNullOrUndefined(this.model.fields)&&this.model.fields.dataSource!=null?this.model.fields.dataSource[r][this.model.fields.featureMeasures]:this._scale.featureMeasures[r].value,u=!t.isNullOrUndefined(this.model.fields)&&this.model.fields.dataSource!=null?this.model.fields.dataSource[r][this.model.fields.category]:this._scale.featureMeasures[r].category,this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Below||this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Cross?(s=this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*n/2-this._scale.featuredMeasureSettings.width/2:this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*n/2-this._scale.featuredMeasureSettings.width/2+this._scale.labelSettings.offset+this._scale.labelSettings.size,f=this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*n/2+this._scale.featuredMeasureSettings.width/2-1:this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*n/2+this._scale.featuredMeasureSettings.width/2-1+this._scale.labelSettings.offset+this._scale.labelSettings.size):(s=this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*n/2-this._scale.featuredMeasureSettings.width/2+this._scale.majorTickSettings.size:this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*n/2-this._scale.featuredMeasureSettings.width/2+this._scale.majorTickSettings.size+this._scale.labelSettings.offset+this._scale.labelSettings.size,f=this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*n/2+this._scale.featuredMeasureSettings.width/2-1+this._scale.majorTickSettings.size:this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*n/2+this._scale.featuredMeasureSettings.width/2-1+this._scale.majorTickSettings.size+this._scale.labelSettings.offset+this._scale.labelSettings.size),this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward?(a=t.isNullOrUndefined(u)?0:u.toString().length,o=this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x:this._scale.location.x-this._scale.labelSettings.offset+(this.model.quantitativeScaleLength-this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-i)))),h=this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-i))):this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-i))),e=this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?o-this._scale.labelSettings.offset-a:this._scale.location.x+this.model.quantitativeScaleLength):(o=this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x-this._scale.labelSettings.offset+(this.model.quantitativeScaleLength-this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-i)))):this._scale.location.x,h=this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-i))):this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-i))),e=this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x+this.model.quantitativeScaleLength+this._scale.labelSettings.offset:this._scale.location.x-this._scale.labelSettings.offset),c={"class":this.svgObject.id+"_FeatureMeasure",id:this.svgObject.id+"_FeatureMeasure_"+r,x:o,y:s,height:this._scale.featuredMeasureSettings.width,width:h,fill:this._scale.featuredMeasureSettings.stroke,onmouseover:"evt.target.setAttribute('opacity', '0.7')",onmouseout:"evt.target.setAttribute('opacity', '1')"},this.model.drawFeatureMeasureBar&&this._onDrawFeatureMeasureBar(c,i),this.svgRenderer.drawRect(c,this._scaleGroup),transformText=this._orientation==t.datavisualization.BulletGraph.Orientation.Vertical?"rotate(90,"+e+","+(f-4)+")":"rotate(0,"+e+","+f+")",l={x:e,y:f+this._scale.featuredMeasureSettings.width/2,"text-anchor":"middle",fill:this._scale.labelSettings.stroke,"font-size":this._scale.labelSettings.size+"px","font-family":this._scale.labelSettings.font.fontFamily,"font-style":this._scale.labelSettings.font.fontStyle,"font-weight":this._scale.labelSettings.font.fontWeight,opacity:this._scale.labelSettings.font.opacity,transform:transformText},this.model.drawCategory&&this._onDrawCategoryText(l,u),t.isNullOrUndefined(u)||this.svgRenderer.drawText(l,u,this._scaleGroup),n+=2,this.value(i)},_drawComparativeMeasureSymbol:function(){var i=1,n,f,e,r,u,o;if(this._dataCount>0)for(u=this._dataCount-1;u>=0;u--)n=!t.isNullOrUndefined(this.model.fields)&&this.model.fields.dataSource!=null?this.model.fields.dataSource[u][this.model.fields.comparativeMeasure]:this._scale.featureMeasures[u].comparativeMeasureValue,this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Below||this._tickPosition==t.datavisualization.BulletGraph.TickPosition.Cross?(f=this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*i/2-this._scale.featuredMeasureSettings.width/2-this._scale.featuredMeasureSettings.width:this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*i/2-this._scale.featuredMeasureSettings.width/2-this._scale.featuredMeasureSettings.width+this._scale.labelSettings.offset+this._scale.labelSettings.size,e=this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*i/2-this._scale.featuredMeasureSettings.width/2+2*this._scale.featuredMeasureSettings.width:this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*i/2-this._scale.featuredMeasureSettings.width/2+2*this._scale.featuredMeasureSettings.width+this._scale.labelSettings.offset+this._scale.labelSettings.size):(f=this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*i/2-this._scale.featuredMeasureSettings.width/2-this._scale.featuredMeasureSettings.width+this._scale.majorTickSettings.size:this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*i/2-this._scale.featuredMeasureSettings.width/2-this._scale.featuredMeasureSettings.width+this._scale.majorTickSettings.size+this._scale.labelSettings.offset+this._scale.labelSettings.size,e=this._labelPosition==t.datavisualization.BulletGraph.LabelPosition.Below?this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*i/2-this._scale.featuredMeasureSettings.width/2+2*this._scale.featuredMeasureSettings.width+this._scale.majorTickSettings.size:this._scale.location.y+this.model.qualitativeRangeSize/this._dataCount*i/2-this._scale.featuredMeasureSettings.width/2+2*this._scale.featuredMeasureSettings.width+this._scale.majorTickSettings.size+this._scale.labelSettings.offset+this._scale.labelSettings.size),r=this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward?this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x+this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-n))):this._scale.location.x-this._scale.labelSettings.offset+(this.model.quantitativeScaleLength-this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-n)))):this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal?this._scale.location.x-this._scale.labelSettings.offset+(this.model.quantitativeScaleLength-this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-n)))):this._scale.location.x+this.model.quantitativeScaleLength/((this._scale.maximum-this._scale.minimum)/(this._scale.maximum-this._scale.minimum-(this._scale.maximum-n))),o={"class":this.svgObject.id+"_ComparativeMeasure",id:this.svgObject.id+"_ComparativeMeasure_"+u,x1:n==this._scale.maximum?r-this._scale.comparativeMeasureSettings.width/2:n==this._scale.minimum?r+this._scale.comparativeMeasureSettings.width/2:r,y1:f,x2:n==this._scale.maximum?r-this._scale.comparativeMeasureSettings.width/2:n==this._scale.minimum?r+this._scale.comparativeMeasureSettings.width/2:r,y2:e,"stroke-width":this._scale.comparativeMeasureSettings.width,stroke:this._scale.comparativeMeasureSettings.stroke},this.model.drawComparativeMeasureSymbol&&this._onDrawComparativeMeasure(o,n),this.svgRenderer.drawLine(o,this._scaleGroup),i+=2,this.comparativeMeasureValue(n)},_setTheme:function(n,i){var u=[],e,r,f;this._scale=this.model.quantitativeScaleSettings;for(e in n)u.push(e);for(r=0;r<u.length;r++)for(this._scale.majorTickSettings.stroke=!this._scale.majorTickSettings.stroke||this._scale.majorTickSettings.stroke==n[u[r]].quantitativeScaleSettings.majorTickSettings.stroke?n[i].quantitativeScaleSettings.majorTickSettings.stroke:this._scale.majorTickSettings.stroke,this._scale.minorTickSettings.stroke=!this._scale.minorTickSettings.stroke||this._scale.minorTickSettings.stroke==n[u[r]].quantitativeScaleSettings.minorTickSettings.stroke?n[i].quantitativeScaleSettings.minorTickSettings.stroke:this._scale.minorTickSettings.stroke,this._scale.labelSettings.stroke=!this._scale.labelSettings.stroke||this._scale.labelSettings.stroke==n[u[r]].quantitativeScaleSettings.labelSettings.stroke?n[i].quantitativeScaleSettings.labelSettings.stroke:this._scale.labelSettings.stroke,this._scale.featuredMeasureSettings.stroke=!this._scale.featuredMeasureSettings.stroke||this._scale.featuredMeasureSettings.stroke==n[u[r]].quantitativeScaleSettings.featuredMeasureSettings.stroke?n[i].quantitativeScaleSettings.featuredMeasureSettings.stroke:this._scale.featuredMeasureSettings.stroke,this._scale.comparativeMeasureSettings.stroke=!this._scale.comparativeMeasureSettings.stroke||this._scale.comparativeMeasureSettings.stroke==n[u[r]].quantitativeScaleSettings.comparativeMeasureSettings.stroke?n[i].quantitativeScaleSettings.comparativeMeasureSettings.stroke:this._scale.comparativeMeasureSettings.stroke,this.model.captionSettings.font.color=!this.model.captionSettings.font.color||this.model.captionSettings.font.color==n[u[r]].captionSettings.font.color?n[i].captionSettings.font.color:this.model.captionSettings.font.color,this.model.captionSettings.subTitle.font.color=!this.model.captionSettings.subTitle.font.color||this.model.captionSettings.subTitle.font.color==n[u[r]].captionSettings.subTitle.font.color?n[i].captionSettings.subTitle.font.color:this.model.captionSettings.subTitle.font.color,f=0;f<this.model.qualitativeRanges.length;f++)this.model.qualitativeRanges[f].rangeStroke=this.model.qualitativeRanges[f].rangeStroke?this.model.qualitativeRanges[f].rangeStroke:t.isNullOrUndefined(n[i].qualitativeRanges[f])?n[i].qualitativeRanges[0].rangeStroke:n[i].qualitativeRanges[f].rangeStroke},_onDrawTicks:function(n,t,i){var r={object:this,scaleElement:this.model.quantitativeScaleSettings,tickIndex:i,tickElement:n,tickType:t};this._trigger("drawTicks",r)},_onDrawLabels:function(n,t,i){var r={object:this,scaleElement:this.model.quantitativeScaleSettings,labelValue:i,labelElement:n,labelType:t};this._trigger("drawLabels",r)},_onDrawCaption:function(n,t,i){var r={object:this,scaleElement:this.model.quantitativeScaleSettings,captionText:i,captionElement:n,captionType:t};this._trigger("drawCaption",r)},_onDrawQualitativeRanges:function(n,t,i){var r={object:this,scaleElement:this.model.quantitativeScaleSettings,rangeIndex:i,rangeElement:n,rangeEndValue:t};this._trigger("drawQualitativeRanges",r)},_onDrawFeatureMeasureBar:function(n,t){var i={object:this,scaleElement:this.model.quantitativeScaleSettings,currentElement:n,value:t};this._trigger("drawFeatureMeasureBar",i)},_onDrawCategoryText:function(n,t){var i={object:this,scaleElement:this.model.quantitativeScaleSettings,categoryElement:n,value:t};this._trigger("drawCategory",i)},_onDrawComparativeMeasure:function(n,t){var i={object:this,scaleElement:this.model.quantitativeScaleSettings,targetElement:n,value:t};this._trigger("drawComparativeMeasureSymbol",i)},_doAnimation:function(){for(var r,i=n("."+this.svgObject.id+"_FeatureMeasure"),t=i.length-1;t>=0;t--)r=i[t],this._animateFeatureBar(r)},_doLineAnimation:function(){for(var r,i=n("."+this.svgObject.id+"_ComparativeMeasure"),u=2e3/i.length,t=i.length-1;t>=0;t--)r=i[t],n(r).attr("transform","scale(0)"),this._doLineSymbol(r,u,t)},_animateFeatureBar:function(i){var r=i.getBBox(),u,f;this._orientation==t.datavisualization.BulletGraph.Orientation.Horizontal&&this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Backward||this._orientation==t.datavisualization.BulletGraph.Orientation.Vertical&&this._flowDirection==t.datavisualization.BulletGraph.FlowDirection.Forward?(u=r.x+r.width,f=r.y+r.height):(u=r.x,f=r.y);n(i).animate({scale:1},{duration:1e3,step:function(t){scaleVal=t;n(i).attr("transform","translate("+u+" "+f+") scale("+t+",1) translate("+-u+" "+-f+")")}})},_doLineSymbol:function(t,i,r){var o=parseInt(r*i),u=t.getBBox(),f=u.x+u.width/2,e=u.y+u.height/2;n(t).delay(o).animate({scale:1},{duration:200,step:function(i){n(t).attr("transform","translate("+f+" "+e+") scale("+i+") translate("+-f+" "+-e+")")}})},bindEvents:function(){this.model.tooltipSettings.visible&&this._on(n(this.svgObject),"mousemove",this._bulletMouseMove);this.model.enableResizing&&(this.isDevice()?this._on(n(window),"orientationchange",this._bulletResize):this._on(n(window),"resize",this._bulletResize))},isDevice:function(){return/mobile|tablet|android|kindle/i.test(navigator.userAgent.toLowerCase())},_bulletResize:function(){var t=this,i=n(t.svgObject);this.resizeTO&&clearTimeout(this.resizeTO);this.resizeTO=setTimeout(function(){t.isDevice()?(i.width(n(t.element).width()),i.height(n(t.element).height())):(t.svgWidth>n(this).width()?i.width(n(this).width()):i.width(t.svgWidth),t.svgHeight>n(this).height()?i.height(n(this).height()):i.height(t.svgHeight));t.redraw()},500)},_bulletMouseMove:function(r){var a,v,y,f,c,s,u=n(".tooltipDiv"),h,l,p,e,o;c=n(r.target).attr("id");s=n(r.target).attr("class");s!="undefined"&&(s==this.svgObject.id+"_FeatureMeasure"||s==this.svgObject.id+"_ComparativeMeasure")?(f=c.substring(c.lastIndexOf("_")+1),a=!t.isNullOrUndefined(this.model.fields)&&this.model.fields.dataSource!=null?this.model.fields.dataSource[f][this.model.fields.featureMeasures]:this._scale.featureMeasures[f].value,v=!t.isNullOrUndefined(this.model.fields)&&this.model.fields.dataSource!=null?this.model.fields.dataSource[f][this.model.fields.comparativeMeasure]:this._scale.featureMeasures[f].comparativeMeasureValue,y=!t.isNullOrUndefined(this.model.fields)&&this.model.fields.dataSource!=null?t.isNullOrUndefined(this.model.fields.dataSource[f][this.model.fields.category])?null:this.model.fields.dataSource[f][this.model.fields.category]:t.isNullOrUndefined(this._scale.featureMeasures[f].category)?null:this._scale.featureMeasures[f].category,h={currentValue:a,targetValue:v,category:y},n(".tooltipDiv").length==0&&(u=n("<div class='tooltipDiv' style='position: absolute; z-index: 105; display: block;'><\/div>"),n(document.body).append(u),n(".tooltipDiv").addClass(this.svgObject.id)),this.model.tooltipSettings.template!=""&&this.model.tooltipSettings.template!=null?(l=n("#"+this.model.tooltipSettings.template).clone(),n(l).css("display","block").appendTo(u),n(u).html(n(l).render(h))):(p=t.isNullOrUndefined(h.category)?"":"<br/> Category : "+h.category,n(u).html("Current : "+h.currentValue+"<br/> Target : "+h.targetValue+p)),n(u).css("font-size","12px"),e=r.clientX+n(document).scrollLeft()+10,o=r.clientY+n(document).scrollTop()+10,e=e+n(u).width()<n(window).width()?e:e-n(u).width(),o=o+n(u).height()<n(window).height()?o:o-n(u).height(),(e===i||e===null)&&(e=r.clientX+n(document).scrollLeft()+10),(o===i||o===null)&&(o=r.clientY+n(document).scrollTop()+10),n(u).css("left",e),n(u).css("top",o),n(u).css({"-webkit-border-radius":"5px 5px 5px 5px","-moz-border-radius":"5px 5px 5px 5px","-o-border-radius":"5px 5px 5px 5px","border-radius":"5px 5px 5px 5px","background-color":"White",border:"1px Solid Black","padding-bottom":"5px","padding-left":"5px","padding-right":"5px","padding-top":"5px"})):s!=this.svgObject.id+"_FeatureMeasure"&&s!=this.svgObject.id+"_ComparativeMeasure"&&n(".tooltipDiv").remove()},redraw:function(){n(this.svgObject).empty();this._renderBulletElements()},destroy:function(){n(this.element).removeClass("e-bulletgraph e-js").find("#"+this.svgObject.id).remove()},setFeatureMeasureBarValue:function(n,i){this._scale=this.model.quantitativeScaleSettings;var r=!t.isNullOrUndefined(this.model.fields)&&this.model.fields.dataSource!=null?this.model.fields.dataSource.length:this._scale.featureMeasures.length;n<r&&i!=null&&(t.isNullOrUndefined(this.model.fields)||this.model.fields.dataSource==null?this._scale.featureMeasures[n].value=i:this.model.fields.dataSource[n][this.model.fields.featureMeasures]=i,this.redraw(),this.model.enableAnimation&&this._doAnimation())},setComparativeMeasureSymbol:function(n,i){this._scale=this.model.quantitativeScaleSettings;var r=!t.isNullOrUndefined(this.model.fields)&&this.model.fields.dataSource!=null?this.model.fields.dataSource.length:this._scale.featureMeasures.length;n<r&&i!=null&&(t.isNullOrUndefined(this.model.fields)||this.model.fields.dataSource==null?this._scale.featureMeasures[n].comparativeMeasureValue=i:this.model.fields.dataSource[n][this.model.fields.comparativeMeasure]=i,this.redraw(),this.model.enableAnimation&&this._doLineAnimation())}});t.datavisualization.BulletGraph.Orientation={Horizontal:"horizontal",Vertical:"vertical"};t.datavisualization.BulletGraph.TickPosition={Below:"below",Above:"above",Cross:"cross"};t.datavisualization.BulletGraph.LabelPosition={Below:"below",Above:"above"};t.datavisualization.BulletGraph.FlowDirection={Forward:"forward",Backward:"backward"};t.datavisualization.BulletGraph.FontStyle={Normal:"Normal",Italic:"Italic",Oblique:"Oblique"};t.datavisualization.BulletGraph.FontWeight={Normal:"Normal",Bold:"Bold",Bolder:"Bolder",Lighter:"Lighter"};t.datavisualization.BulletGraph.Themes={flatlight:{quantitativeScaleSettings:{majorTickSettings:{stroke:"#191919"},minorTickSettings:{stroke:"#191919"},labelSettings:{stroke:"#191919"},featuredMeasureSettings:{stroke:"#191919"},comparativeMeasureSettings:{stroke:"#191919"}},qualitativeRanges:[{rangeStroke:"#ebebeb"},{rangeStroke:"#d8d8d8"},{rangeStroke:"#7f7f7f"}],captionSettings:{font:{color:"#191919"},subTitle:{font:{color:"#191919"}}}},flatdark:{quantitativeScaleSettings:{majorTickSettings:{stroke:"#ffffff"},minorTickSettings:{stroke:"#ffffff"},labelSettings:{stroke:"#ffffff"},featuredMeasureSettings:{stroke:"#ffffff"},comparativeMeasureSettings:{stroke:"#ffffff"}},qualitativeRanges:[{rangeStroke:"#b3b3b3"},{rangeStroke:"#999999"},{rangeStroke:"#4d4d4d"}],captionSettings:{font:{color:"#ffffff"},subTitle:{font:{color:"#ffffff"}}}}}})(jQuery,Syncfusion)