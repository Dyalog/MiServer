/*!
*  filename: ej.mobile.timepicker.min.js
*  version : 12.3
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./ej.mobile.core.min","./ej.mobile.application.min","./ej.mobile.button.min","./ej.mobile.dialog.min","./ej.mobile.menu.min","./ej.mobile.toolbar.min","./ej.mobile.scrollpanel.min","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.unobtrusive.min","./../common/ej.touch.min"],n):n()})(function(){(function(n,t,i){t.widget("ejmTimePicker","ej.mobile.TimePicker",{_setFirst:!0,_rootCSS:"e-m-timepicker",defaults:{renderMode:"auto",hourFormat:"twentyfour",value:new Date,timeFormat:"hh:mm tt",theme:"auto",enabled:!0,enablePersistence:!1,select:null,load:null,focusIn:null,focusOut:null,open:null,close:null,change:null,ios7:{renderDefault:!1},windows:{renderDefault:!1}},dataTypes:{renderMode:"enum",hourFormat:"enum",theme:"enum",enabled:"boolean",enablePersistence:"boolean",ios7:{renderDefault:"boolean"},windows:{renderDefault:"boolean"}},_init:function(){this._renderControl();this._createDelegates();this._wireEvents()},_timepickerInitialize:function(){this._winrt=this.model.renderMode=="windows"&&!t.isMobile();this.model.renderMode=="windows"&&this.model.windows.renderDefault&&t.isMobile()&&(this.model.theme="default");this._id=n(this.element).attr("name")?n(this.element).attr("name"):n(this.element).attr("id");n(this.element).attr("id",n(this.element).attr("id")?n(this.element).attr("id"):this._id);this._menuTargetId=n(this.element).attr("id");this.model.timeFormat=this.model.hourFormat=="twelve"?"hh:mm tt":"HH:mm";this.model.value=new Date(Globalize.format(new Date,"MM/dd/yyyy")+" "+(typeof this.model.value=="string"?this.model.value:Globalize.format(new Date,this.model.hourFormat=="twelve"?"hh:mm tt":"hh:mm")));this._currentTime=this.model.value;this._twelvedata=[{value:"01"},{value:"02"},{value:"03"},{value:"04"},{value:"05"},{value:"06"},{value:"07"},{value:"08"},{value:"09"},{value:"10"},{value:"11"},{value:"12"}];this._twentyfourdata=[{value:"00"},{value:"01"},{value:"02"},{value:"03"},{value:"04"},{value:"05"},{value:"06"},{value:"07"},{value:"08"},{value:"09"},{value:"10"},{value:"11"},{value:"12"},{value:"13"},{value:"14"},{value:"15"},{value:"16"},{value:"17"},{value:"18"},{value:"19"},{value:"20"},{value:"21"},{value:"22"},{value:"23"}];this._minsdata=[{value:"00"},{value:"01"},{value:"02"},{value:"03"},{value:"04"},{value:"05"},{value:"06"},{value:"07"},{value:"08"},{value:"09"},{value:"10"},{value:"11"},{value:"12"},{value:"13"},{value:"14"},{value:"15"},{value:"16"},{value:"17"},{value:"18"},{value:"19"},{value:"20"},{value:"21"},{value:"22"},{value:"23"},{value:"24"},{value:"25"},{value:"26"},{value:"27"},{value:"28"},{value:"29"},{value:"30"},{value:"31"},{value:"32"},{value:"33"},{value:"34"},{value:"35"},{value:"36"},{value:"37"},{value:"38"},{value:"39"},{value:"40"},{value:"41"},{value:"42"},{value:"43"},{value:"44"},{value:"45"},{value:"46"},{value:"47"},{value:"48"},{value:"49"},{value:"50"},{value:"51"},{value:"52"},{value:"53"},{value:"54"},{value:"55"},{value:"56"},{value:"57"},{value:"58"},{value:"59"}];this._meridiansdata=[{value:"AM"},{value:"PM"}]},_renderControl:function(){t.setRenderMode(this);t.setTheme(this);this.model.renderMode=="windows"&&this.model.windows.renderDefault&&t.isMobile()&&(this.model.theme="default");this._timepickerInitialize();this._timepickerwrapper=t.buildTag("div.e-m-timepickerwrapper e-m-"+this.model.renderMode+" e-m-"+this.model.theme+" e-m-user-select#"+this._id+"_Wrapper","",{},{});this._timepickerwrapper.width(this.element[0].style.width);this.element.width("100%").attr({name:this._id}).wrap(this._timepickerwrapper);this._timepickerwrapper=this.element.parent();t.isDevice()&&this.model.renderMode=="ios7"&&this.model.ios7.renderDefault?this.element.attr({type:"time"}):(this.element.attr({readonly:!0}),this._outerdiv=t.buildTag("div.e-m-"+this.model.renderMode+" e-m-"+this.model.theme+" e-m-tp e-m-user-select #"+this._id+"_tp","",{},{}),this._innerdiv=t.buildTag("div.e-m-tpinner","",{},{}),this._wrapdiv=t.buildTag("div.e-m-tpwrap","",{},{}),this._visibletexthtml=this._winrt?"":this.model.renderMode=="android"?"<div class='e-m-text e-m-invisible-text'><\/div>":"<div class='e-m-text e-m-invisible-text'><\/div><div class='e-m-text e-m-invisible-text'><\/div>",this._hours=t.buildTag("div.e-m-tp e-m-tphours e-m-left","<div class='e-m-timewrapper'><div id="+this._id+"_tphour><div class='e-m-tpouter'>"+this._visibletexthtml+"<\/div><\/div><\/div><div class='e-m-tp-overlay'><\/div><\/div>",{},{}),this._mins=t.buildTag("div.e-m-tp e-m-tpmins e-m-center","<div class='e-m-timewrapper'><div id="+this._id+"_tpmin><div class='e-m-tpouter'>"+this._visibletexthtml+"<\/div><\/div><\/div><div class='e-m-tp-overlay'><\/div><\/div>",{},{}),this._meridians=t.buildTag("div.e-m-tp e-m-tpmeridians e-m-right","<div class='e-m-timewrapper'><div id="+this._id+"_tpmeridian><div class='e-m-tpouter'>"+this._visibletexthtml+"<\/div><\/div><\/div><div class='e-m-tp-overlay'><\/div><\/div>",{},{}),this["_"+this.model.renderMode+"Rendering"](),this._scrollInitialize(),this._setInitialTime());this.model.load&&this._trigger("load",this._argsValue());this._controlStatus(this.model.enabled)},_scrollPanel:function(i){this["_"+i]=t.buildTag("div#'"+this._id+"'tp'"+i+"'_scrollpanel","",{},{});this._outerdiv.find("#"+this._id+"_tp"+i).append(this["_"+i]);this["_"+i].ejmScrollPanel({enableNativeScrolling:!1,enableTransition:!1,enableTransform:!1,showScrollbars:!1,target:this._id+"_tp"+i,targetHeight:this._targetHeight,renderMode:this.model.renderMode,scrollEnd:n.proxy(this._onScrollStop,this),enableBounce:!1,scrollStart:n.proxy(this._onScrollStart,this),enableDisplacement:!0,displacementValue:this._displacement,displacementTime:t.isWindows()?800:350})},_scrollInitialize:function(){this._displacement=this.model.renderMode=="ios7"?40:this.model.renderMode=="android"?45:94;this._targetHeight=this.model.renderMode=="ios7"?200:this.model.renderMode=="android"?135:this._winrt?0:window.innerHeight-this._toolbar.height();this._winrt||(this._scrollPanel("hour"),this._scrollPanel("min"),this._scrollPanel("meridian"),(this.model.renderMode=="windows"||this.model.renderMode=="flat")&&(n(this._outerdiv).css("top",-window.innerHeight+"px").addClass("flip"),n(this._toolbar).css("visibility","hidden")),this._domElements())},_renderTemplate:function(){var t={};t["default"]="<div class='e-m-text'>{{:value}}<\/div>";t.winrt="<option value='{{:value}}'>{{:value}}<\/option>";n.templates(t)},_renderTimeContent:function(){this.model.hourFormat=="twentyfour"&&this._meridians.addClass("e-m-display-none");this._renderTemplate();this._columnRendering("hours");this._columnRendering("mins");this._columnRendering("meridians");this._innerdiv.append(this._wrapdiv);this._outerdiv.append(this._innerdiv)},_ios7Rendering:function(){this._renderTimeContent();this._innerdiv.append("<div class='e-m-ios7-overlay'><\/div>");this._menu=t.buildTag("div#"+this._id+"_menu.e-m-tp-menu");this._menu.append(this._outerdiv);App.activePage.append(this._menu);this._menu.ejmMenu({allowScrolling:!1,renderTemplate:!0,targetId:this._menuTargetId,height:205,width:this._outerdiv.width(),theme:this.model.theme,rendermode:this.model.renderMode,ios7:{showTitle:!1,showCancelButton:!1},hide:n.proxy(this._menuHide,this)})},_androidRendering:function(){this._timepickerwrapper.append("<span class='e-m-textspan'><\/div>");this._wrapdiv.append("<span class='e-m-and-overlay'>:<\/span>");this._renderTimeContent();this._dialog=t.buildTag("div.e-m-tp-dialog#"+this._id+"_dialog");this._dialog.ejmDialog({allowScrolling:!1,theme:this.model.theme,title:"Set Time",leftButtonCaption:"Done",mode:"alert",renderMode:this.model.renderMode});this._dialog.find("#"+this._id+"_dialogcontent").append(this._outerdiv)},_windowsRendering:function(){this._outerdiv.append("<div class='e-m-tp-header'>CHOOSE TIME<\/div>");this.model.renderMode!="windows"||t.isMobile()?(this._renderTimeContent(),this._toolbar=t.buildTag("div#"+this._id+"_toolbar.e-m-tp-tb","<ul><li data-ej-iconname='done'><\/li><li data-ej-iconname='close'><\/li><\/ul>"),App.activePage.append(this._outerdiv),this._toolbar.ejmToolbar({theme:this.model.theme,renderMode:this.model.renderMode,touchEnd:n.proxy(this._winToolbarItem,this),windows:{renderDefault:this.model.windows.renderDefault}})):(this._renderTimeContent(),this._dialog=t.buildTag("div.e-m-tp-dialog#"+this._id+"_dialog"),this._dialog.ejmDialog({showModal:!0,allowScrolling:!1,theme:this.model.theme,title:"Set Time",leftButtonCaption:"Done",rightButtonCaption:"Cancel",mode:"confirm",renderMode:this.model.renderMode,windows:{renderDefault:this.model.windows.renderDefault}}),this._dialog.find("#"+this._id+"_dialogcontent").append(this._outerdiv))},_winrtContent:function(i,r){this._select=t.buildTag("select");r=n.render.winrt(r);this["_"+i].find(".e-m-tpouter").html(this._select.append(r));this._wrapdiv.append(this["_"+i])},_flatRendering:function(){this._windowsRendering()},_columnRendering:function(t){var i=t=="hours"?this["_"+this.model.hourFormat+"data"]:this["_"+t+"data"],r;this._winrt?this._winrtContent(t,i):(r=n.render["default"](i)+this._visibletexthtml,this["_"+t].find(".e-m-tpouter").html(this["_"+t].find(".e-m-tpouter").html()+r),this._wrapdiv.append(this["_"+t]))},_createDelegates:function(){this._docClickHndlr=n.proxy(this._documentClick,this);this._winScrlHndlr=n.proxy(this._outerScroll,this);this._focusHndlr=n.proxy(this._showTimePicker,this);this._blurHndlr=n.proxy(this._blurEventHandler,this);this._andBtnClkHndlr=n.proxy(this._androidDialogButtonClick,this);this._winrtBtnClkHndlr=n.proxy(this._winrtDialogButtonClick,this)},_wireEvents:function(i){this.model.renderMode=="android"?t.listenTouchEvent(n(this._dialog).find(".e-m-btn"),t.tapEvent(),this._andBtnClkHndlr,i):this._winrt?t.listenTouchEvent(n(this._dialog).find(".e-m-btn"),t.tapEvent(),this._winrtBtnClkHndlr,i):(this.model.renderMode=="windows"||this.model.renderMode=="flat")&&t.listenTouchEvent(n(this._outerdiv).find(".e-m-tpwrap .e-m-tp"),t.startEvent(),this._winScrlHndlr,i);t.listenEvents([n(this.element),n(this.element)],["focus","blur"],[this._focusHndlr,this._blurHndlr],i)},_scrollCoordinates:function(){var n={};return n.Scrollhours=Math.round(this._hour.ejmScrollPanel("getScrollPosition").y/this._displacement),n.Scrollmins=Math.round(this._min.ejmScrollPanel("getScrollPosition").y/this._displacement),n.Scrollmeridian=Math.round(this._meridian.ejmScrollPanel("getScrollPosition").y/this._displacement),n.hours=-n.Scrollhours,n.mins=-n.Scrollmins,n.meridian=-n.Scrollmeridian,n},_domElements:function(){this._hourstext=this._outerdiv.find("#"+this._id+"_tphour .e-m-text");this._minstext=this._outerdiv.find("#"+this._id+"_tpmin .e-m-text");this._meridianstext=this._outerdiv.find("#"+this._id+"_tpmeridian .e-m-text")},_activeText:function(t,r,u,f){var e=this.model.renderMode=="android"?1:2;(f&&f=="tpmin"||f==i)&&(n(this._minstext).removeClass("e-m-text-active"),n(this._minstext[r-1+e]).addClass("e-m-text-active"));(f&&f=="tphour"||f==i)&&(n(this._hourstext).removeClass("e-m-text-active"),n(this._hourstext[t-1+e]).addClass("e-m-text-active"));(f&&f=="tpmeridian"||f==i)&&(n(this._meridianstext).removeClass("e-m-text-active"),n(this._meridianstext[u+e]).addClass("e-m-text-active"))},_setTimeInput:function(){n(this.element).val(Globalize.format(this._currentTime,this.model.timeFormat));this._menuHide()},_winrtInitialTime:function(t){var t=new Date(this._currentTime),i=t.getHours()%12==0?"PM":t.getHours()%12>0?"PM":"AM";n("#"+this._id+"_tphour").find("select option[value='"+t.getHours()+"']").attr("selected",!0);n("#"+this._id+"_tpmin").find("select option[value='"+t.getMinutes()+"']").attr("selected",!0);n("#"+this._id+"_tpmeridian").find("select option[value='"+i+"']").attr("selected",!0)},_setInitialTime:function(){if(this._winrt)this._winrtInitialTime(this._currentTime);else{this._setValue(this._currentTime);var t=this;setTimeout(function(){t._setProperTime(100)},200)}n(this.element).val(Globalize.format(new Date(this._currentTime),this.model.timeFormat));this._selectedTime=n(this.element).val()},_setValue:function(n){var n=new Date(n),i=t.isAndroid()||t.isWindows()?0:200;this._hour.ejmScrollPanel("scrollTo",0,-this._displacement*(this.model.hourFormat=="twelve"?n.getHours()%12==0?12:n.getHours()%12-1:n.getHours()),i);this._min.ejmScrollPanel("scrollTo",0,-this._displacement*n.getMinutes(),i);this._meridian.ejmScrollPanel("scrollTo",0,-this._displacement*(n.getHours()>11?1:0),i)},_setProperTime:function(t,i){var r=this._scrollCoordinates(),f=this.model.hourFormat=="twelve"?r.meridian>0?r.hours==12?12:r.hours==0?13:r.hours==11?12:r.hours+13:r.hours==0?1:r.hours==12?11:r.hours+1:r.hours,u;this.model.renderMode=="ios7"&&(u=this,setTimeout(function(){n(u.element).val(Globalize.format(new Date((new Date).setHours(u.model.hourFormat=="twelve"?f:r.hours,r.mins)),u.model.timeFormat))},t));this._currentTime=new Date((new Date).setHours(this.model.hourFormat=="twelve"?f:r.hours,r.mins));this._activeText(this.model.hourFormat=="twelve"?r.hours==12?r.hours:r.hours+1:r.hours+1,r.mins+1,r.meridian,i);this.model.change&&this._trigger("change",this._argsValue())},_argsValue:function(){return{value:Globalize.format(this._currentTime,this.model.timeFormat)}},_onScrollStop:function(n){if(!n.object._moved){var t=n.model.target.replace(this._id+"_","");this._setProperTime(this.model.renderMode=="windows"?700:200,t);this["_"+this.model.renderMode+"ScrollStop"]&&this["_"+this.model.renderMode+"ScrollStop"](n.model.target,t,n)}},_windowsScrollStop:function(n,t){var i=this._id+"_"+this._target;this._hideWrapper(t)},_flatScrollStop:function(n,t,i){this._windowsScrollStop(n,t,i)},_onScrollStart:function(n){this._target=n.model.target.replace(this._id+"_","");this["_"+this.model.renderMode+"ScrollStart"]&&this["_"+this.model.renderMode+"ScrollStart"](n.model.target,this._target)},_windowsScrollStart:function(t,i){n("#"+t+"").find(".e-m-text.e-m-text-active").removeClass("e-m-text-active");this._hideWrapper(i)},_flatScrollStart:function(n,t){this._windowsScrollStart(n,t)},_hideWrapper:function(t){t&&t=="tphour"&&(this._min.ejmScrollPanel("instance")._moved||n("#"+this._id+"_tpmin").closest(".e-m-timewrapper").removeClass("e-m-scrollstart"),this._meridian.ejmScrollPanel("instance")._moved||n("#"+this._id+"_tpmeridian").closest(".e-m-timewrapper").removeClass("e-m-scrollstart"));t&&t=="tpmin"&&(this._hour.ejmScrollPanel("instance")._moved||n("#"+this._id+"_tphour").closest(".e-m-timewrapper").removeClass("e-m-scrollstart"),this._meridian.ejmScrollPanel("instance")._moved||n("#"+this._id+"_tpmeridian").closest(".e-m-timewrapper").removeClass("e-m-scrollstart"));t&&t=="tpmeridian"&&(this._hour.ejmScrollPanel("instance")._moved||n("#"+this._id+"_tphour").closest(".e-m-timewrapper").removeClass("e-m-scrollstart"),this._min.ejmScrollPanel("instance")._moved||n("#"+this._id+"_tpmin").closest(".e-m-timewrapper").removeClass("e-m-scrollstart"))},_documentClick:function(t){n(t.target).closest("#"+this._id+"_tp.e-m-"+this.model.renderMode+".e-m-tp").size()==0&&n(t.target).closest("#"+this._id+"_Wrapper.e-m-"+this.model.renderMode+".e-m-timepickerwrapper").size()==0?this._menuHide():this._showTimePicker()},_blurEventHandler:function(){this.model.focusOut&&this._trigger("focusOut",this._argsValue())},_menuHide:function(){this._selectedTime!=n(this.element).val()&&this.model.select&&this._trigger("select",this._argsValue());this._selectedTime=n(this.element).val();this._hideTimePicker()},_winToolbarItem:function(n){n.value=="done"?this._setTimeInput():this._hideTimePicker()},_winrtDialogButtonClick:function(t){if(n(t.target).val()=="Done"){var i=this.model.hourFormat=="twelve"?n("#"+this._id+"_tpmeridian").find("select option:selected").val()=="PM"?n("#"+this._id+"_tphour").find("select option:selected").val()=="01"?13:parseInt(n("#"+this._id+"_tphour").find("select option:selected").val())+12:parseInt(n("#"+this._id+"_tphour").find("select option:selected").val()):parseInt(n("#"+this._id+"_tphour").find("select option:selected").val());this._currentTime=new Date((new Date).setHours(parseInt(i),parseInt(n("#"+this._id+"_tpmin").find("select option:selected").val())));this._setTimeInput()}else this._showHidePicker(!0)},_androidDialogButtonClick:function(){this._setTimeInput()},_outerScroll:function(t){n(t.target).closest(".e-m-tp").find(".e-m-timewrapper").addClass("e-m-scrollstart")},_showHidePicker:function(n){var f={currentTarget:this._timepickerwrapper},r=n?"hidden":"visible",u=n?"out":"in",i=t.getMaxZindex();this.element.next("span")[n?"removeClass":"addClass"]("e-m-focusin");this._winrt?this._dialog.ejmDialog(n?"close":"open"):this.model.renderMode=="android"?this._dialog.css("visibility",n?"hidden":"visible").css("z-index",i+1):this.model.renderMode=="windows"&&(this._outerdiv.css({top:n?"":"0px",bottom:n?window.innerHeight+"px":this._toolbar.outerHeight()+"px","z-index":i+1,"visibility ":r}).removeClass("in out").addClass(u),this._outerdiv.find(".e-m-tp-header").css({"z-index":i+2}),this._toolbar.css({"z-index":i+2,visibility:r}))},_showTimePicker:function(){this.model.focusIn&&this._trigger("focusIn",this._argsValue());this._showHidePicker();this._outerdiv.find(".e-m-timewrapper").removeClass("e-m-scrollstart");this.model.open&&this._trigger("open",this._argsValue())},_hideTimePicker:function(){this._showHidePicker(!0);this.model.close&&this._trigger("close",this._argsValue())},_refreshScroller:function(){this._hour.ejmScrollPanel("refresh");this._min.ejmScrollPanel("refresh");this._meridian.ejmScrollPanel("refresh")},_setModel:function(n){var i;for(var t in n)t=="renderMode"||t=="hourFormat"||t=="value"||this.model.renderMode=="ios7"&&t=="renderDefault"?i=!0:(setprop="_set"+t.charAt(0).toUpperCase()+t.slice(1),this[setprop]&&this[setprop](n[t]));i&&this._refresh()},_setTheme:function(n){this.model.theme=n;this._timepickerwrapper.removeClass("e-m-dark e-m-light e-m-default").addClass("e-m-"+this.model.theme);this.model.renderMode!="ios7"||t.isMobile()||this._menu.ejmMenu({theme:this.model.theme});this.model.renderMode=="android"?this._dialog.ejmDialog({theme:this.model.theme}):this.model.renderMode=="windows"&&this._toolbar.ejmToolbar({theme:this.model.theme})},_setTimeFormat:function(){n(this.element).val(Globalize.format(this._currentTime,this.model.timeFormat))},_setEnabled:function(n){this._controlStatus(n)},_controlStatus:function(n){this._timepickerwrapper[n?"removeClass":"addClass"]("e-m-state-disabled")},_refresh:function(){this._destroy();this.element.addClass("e-m-timepicker");this._renderControl();this._wireEvents()},_clearElement:function(){this.element.insertAfter(this._timepickerwrapper);this._timepickerwrapper.remove();this._dialog?(this._dialog.ejmDialog("instance")._destroy(),this._dialog.remove(),this._dialog=null):this._toolbar?(this._toolbar.ejmToolbar("instance")._destroy(),this._toolbar.remove(),this._toolbar=null):this._menu&&(this._menu.ejmMenu("instance")._destroy(),this._menu.remove(),this._menu=null);this.element=n(this.element);this._outerdiv.remove()},_destroy:function(){this._wireEvents(!0);this._clearElement()},show:function(n){var n={currentTarget:this._timepickerwrapper};this.model.renderMode=="ios7"?this._menu.ejmMenu("show",n):this._showHidePicker()},hide:function(n){var n={currentTarget:this._timepickerwrapper};this.model.renderMode=="ios7"?this._menu.ejmMenu("hide",n):this._showHidePicker(!0)},enable:function(){this.model.enabled=!0;this._controlStatus(this.model.enabled);this._showHidePicker(!0)},disable:function(){this.model.enabled=!1;this._controlStatus(this.model.enabled);this._showHidePicker(!0)},getValue:function(){return n(this.element).val()},setCurrentTime:function(n){this._currentTime=n;this._setInitialTime()}});t.mobile.TimePicker.HourFormat={TwentyFour:"twentyfour",Twelve:"twelve"}})(jQuery,Syncfusion)})