/*!
*  filename: ej.mobile.header.min.js
*  version : 12.3
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./ej.mobile.core.min","./ej.mobile.application.min","./ej.mobile.button.min","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.unobtrusive.min","./../common/ej.touch.min"],n):n()})(function(){(function(n,t){t.widget("ejmHeader","ej.mobile.Header",{_setFirst:!0,_rootCSS:"e-m-header",defaults:{hideForUnSupportedDevice:!1,leftButtonNavigationUrl:null,leftButtonImageClass:null,leftButtonImageUrl:null,rightButtonNavigationUrl:null,rightButtonImageClass:null,rightButtonImageUrl:null,title:"Title",showTitle:!0,position:"fixed",leftButtonCaption:"Back",rightButtonCaption:"Right",leftButtonStyle:"back",rightButtonStyle:"header",renderMode:"auto",theme:"auto",showLeftButton:!1,showRightButton:!1,templateId:null,android:{backButtonImageClass:null},enablePersistence:!1,leftButtonTap:null,rightButtonTap:null,windows:{renderDefault:!1,enableCustomText:!1}},dataTypes:{showTitle:"boolean",position:"enum",leftButtonStyle:"enum",rightButtonStyle:"enum",renderMode:"enum",theme:"enum",windows:{renderDefault:"boolean",enableCustomText:"boolean"},enablePersistence:"boolean"},_init:function(){t.setRenderMode(this);t.setTheme(this);this.model.renderMode=="windows"&&this.model.windows.renderDefault&&t.isMobile()&&(this.model.theme="default");(!this.model.hideForUnSupportedDevice||this.model.hideForUnSupportedDevice&&this.model.renderMode=="ios7")&&(this._renderControl(),t.isIOSWebView()&&t.isIOS()&&this.model.position=="fixed"&&(this.element.addClass("e-m-webview"),t.getCurrentPage().addClass("e-m-fixed-header")))},_renderHeaderTemplate:function(){this._templateContainer=t.buildTag("div.e-m-header-content");var n=t.getCurrentPage().find("#"+this.model.templateId);n.length?(this.element.empty(),t.destroyWidgets(n),this._template=n[0].nodeName&&n[0].nodeName.toLowerCase()=="script"?t.getClearString(n[0].innerHTML):n):(this._template=this.element[0].innerHTML.trim(),this.element.empty());t.widget.init(this._template);this.element.append(this._templateContainer.append(this._template))},_renderDefaultHeader:function(){this._headerContainer=t.buildTag("div.e-m-header-content");this.element[0].innerHTML.trim()==""?(this.element.append(this._headerContainer),this["_"+this.model.renderMode+"ButtonProperties"]&&this["_"+this.model.renderMode+"ButtonProperties"]()):(this._template=this.element[0].innerHTML.trim(),this.element.empty(),this.element.append(this._headerContainer.append(this._template)))},_renderControl:function(){this._orgEle=n(this.element).clone();this.model.height>0&&n(this.element).css({height:this.model.height});this.model.width>0&&n(this.element).css({width:this.model.width});this.element.addClass("e-m-"+this.model.renderMode+" e-m-header e-m-"+this.model.position+" e-m-"+this.model.theme);this.model.templateId==null?this._renderDefaultHeader():this._renderHeaderTemplate();var t=this.element.find(".e-m-header-text");t.length==0&&!this._template&&this.model.showTitle&&this._showHeaderTitle()},_buttonProperties:function(){this.model.showLeftButton&&this._leftButtonCommon();this.model.showTitle&&this._showHeaderTitle();this.model.showRightButton&&this._rightButtonCommon()},_leftButtonCommon:function(){this._leftButton=t.buildTag("div.e-m-header-left");this._renderMode=this.model.renderMode;this._theme=this.model.theme;this.model.renderMode=="windows"&&(this.model.leftButtonCaption="");var n={"data-role":"ejmactionlink","data-ej-rendermode":this._renderMode,"data-ej-theme":this._theme};this.model.leftButtonImageClass&&(n["data-ej-contenttype"]="image",n["data-ej-imageposition"]="center",n["data-ej-imageclass"]=this.model.leftButtonImageClass,this.model.leftButtonStyle=null,this.model.leftButtonCaption="");this._leftButtonAnchorTag=t.buildTag("a",this.model.leftButtonCaption,"",n);this._buttons(this._leftButton,this._leftButtonAnchorTag,this.model.leftButtonTap,this.model.leftButtonStyle,this.model.leftButtonNavigationUrl)},_rightButtonCommon:function(){this._rightButton=t.buildTag("div.e-m-header-right");this._renderMode=this.model.renderMode;var n={"data-role":"ejmactionlink","data-ej-rendermode":this._renderMode,"data-ej-theme":this.model.theme};this.model.rightButtonImageClass&&(n["data-ej-contenttype"]="image",n["data-ej-imageposition"]="center",n["data-ej-imageclass"]=this.model.rightButtonImageClass,this.model.rightButtonStyle=null,this.model.rightButtonCaption="");this._rightButtonAnchorTag=t.buildTag("a",this.model.rightButtonCaption,"",n);this._buttons(this._rightButton,this._rightButtonAnchorTag,this.model.rightButtonTap,this.model.rightButtonStyle,this.model.rightButtonNavigationUrl)},_buttons:function(n,i,r,u,f){r!=null?r.name?i.attr("data-ej-touchend",r.name):i.attr("data-ej-touchend",r):"";u&&i.attr("data-ej-"+this._renderMode+"-style",u);f!=null&&i.attr("href",f);n.append(i);n.hasClass("e-m-header-left")?this.element.find(".e-m-header-content").prepend(n):this.element.find(".e-m-header-content").append(n);t.widget.init(n)},_showHeaderTitle:function(){this._titleSpan=t.buildTag("span.e-m-header-text e-m-"+this.model.theme+" e-m-user-select",this.model.renderMode=="windows"&&t.isMobile()?this.model.windows.enableCustomText?this.model.title:this.model.title.toLowerCase():this.model.title,"","");titleDiv=t.buildTag("div.e-m-header-title","","","").append(this._titleSpan);this._headerContainer.append(titleDiv);(this.model.renderMode=="ios7"||this.model.renderMode=="flat")&&this._titleSpan.text().length>18&&(this.model.showLeftButton&&this._titleSpan.css("margin-left","90px"),this.model.showRightButton&&this._titleSpan.css("margin-right","70px"));this.model.showLeftButton&&this.model.showRightButton&&this._headerContainer.find(".e-m-header-title").css("text-align","center")},_ios7ButtonProperties:function(){this._buttonProperties()},_androidButtonProperties:function(){this.model.showLeftButton&&this.model.leftButtonImageClass==null?(this._leftDiv=t.buildTag("div.e-m-header-left"),this._spanTag=t.buildTag("div.e-m-header-button e-m-fontimage"),this._leftDiv.append(this._spanTag),this._headerContainer.prepend(this._leftDiv),this.model.android.backButtonImageClass&&(this._imageDiv=t.buildTag("div."+this.model.android.backButtonImageClass,"",{display:"table-cell",width:"50px","background-position":"center","background-repeat":"no-repeat"},""),this._imageDiv.insertAfter(this._leftDiv)),this._wireEvents(!1)):this._buttonProperties()},_windowsButtonProperties:function(){this._buttonProperties()},_flatButtonProperties:function(){this._buttonProperties()},_wireEvents:function(i){this._touchStartHandler=n.proxy(this._onTouchStart,this);this._touchStopHandler=n.proxy(this._onTouchEnd,this);this.model.renderMode=="android"&&this.model.showLeftButton&&t.listenEvents([this._leftDiv,this._leftDiv,this._imageDiv,this._imageDiv],[t.startEvent(),t.endEvent(),t.startEvent(),t.endEvent()],[this._touchStartHandler,this._touchStopHandler,this._touchStartHandler,this._touchStopHandler],i)},_onTouchStart:function(){this.element.find(this._leftDiv).addClass("active");this.element.find(this._imageDiv).addClass("active")},_onTouchEnd:function(){this.element.find(this._leftDiv).removeClass("active");this.element.find(this._imageDiv).removeClass("active");history.back()},_setShowLeftButton:function(n){this.model.showLeftButton=n;this._leftButton?this._leftButton[n?"show":"hide"]():this.model.renderMode=="android"||this.model.leftButtonImageClass!=null?this._androidButtonProperties():this._leftButtonCommon()},_setLeftButtonStyle:function(n){this.element.find(this._leftButtonAnchorTag).ejmActionlink({style:n})},_setShowRightButton:function(n){this.model.showRightButton=n;this._rightButton?this._rightButton[n?"show":"hide"]():this._rightButtonCommon()},_setRightButtonStyle:function(n){this.element.find(this._rightButtonAnchorTag).ejmActionlink({style:n})},_setShowTitle:function(n){this.model.showTitle=n;this._titleSpan[n?"show":"hide"]()},_setTitle:function(n){this._titleSpan&&(this.model.title=this.model.renderMode!="windows"||this.model.windows.enableCustomText?n:n.toLowerCase(),this._titleSpan.html(this.model.title))},_setLeftButtonCaption:function(n){this.model.leftButtonCaption=n;this.element.find(this._leftButtonAnchorTag).html(n)},_setRightButtonCaption:function(n){this.model.rightButtonCaption=n;this.element.find(this._rightButtonAnchorTag).html(n)},_setLeftButtonTap:function(n){this.model.leftButtonTap=n;this.element.find(this._leftButtonAnchorTag).ejmActionlink({touchEnd:n})},_setRightButtonTap:function(n){this.model.rightButtonTap=n;this.element.find(this._rightButtonAnchorTag).ejmActionlink({touchEnd:n})},_setModel:function(n){var r=!1,t,i;for(t in n)i="_set"+t.charAt(0).toUpperCase()+t.slice(1),t=="renderMode"||t=="position"?r=!0:this[i]&&this[i](n[t]);r&&this._refresh()},_setTheme:function(n){this.model.theme=n;this.element.removeClass("e-m-light e-m-dark").addClass("e-m-"+n.toLowerCase());this.element.find(".e-m-header-left .e-m-btn").ejmActionlink({theme:n});this.element.find(".e-m-header-right .e-m-btn").ejmActionlink({theme:n})},_refresh:function(){this._destroy();this.element.addClass("e-m-header");this._renderControl();this._wireEvents(!1)},_clearElement:function(){this.element.removeAttr("class");this.element.html(this._orgEle.html())},_destroy:function(){this._clearElement();this._wireEvents(!0)},getTitle:function(){if(this._titleSpan)return this._titleSpan.html()}});t.mobile.Header.Position={Normal:"normal",Fixed:"fixed"};t.mobile.Header.HeaderLeftButtonStyle={Back:"back",Header:"header",Normal:"normal"};t.mobile.Header.HeaderRightButtonStyle={Header:"header",Normal:"normal"}})(jQuery,Syncfusion)})