/*!
*  filename: ej.mobile.groupbutton.min.js
*  version : 13.2.0.39
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./ej.mobile.core.min","./ej.mobile.application.min","./../common/ej.unobtrusive.min","./../common/ej.touch.min"],n):n()})(function(){(function(n,t){t.widget("ejmGroupButton","ej.mobile.GroupButton",{_setFirst:!0,_rootCSS:"e-m-grpbtn",_tags:[{tag:"items",attr:["text","type","imageClass","imageUrl"],content:"content"}],defaults:{selectedItemIndex:0,renderMode:"auto",theme:"auto",enablePersistence:!1,windows:{renderDefault:!1},cssClass:"",touchStart:null,touchEnd:null,items:[]},dataTypes:{renderMode:"enum",theme:"enum",enablePersistence:"boolean"},observables:["selectedItemIndex"],selectedItemIndex:t.util.valueFunction("selectedItemIndex"),_init:function(){App.activePage||App.createAppView();this._orgEle=this.element.clone();this._renderControl();this._setWidth();this._setControlWidth();this._wireEvents(!1)},_renderControl:function(){var o,r,u,f,e;if(t.setRenderMode(this),t.setTheme(this),this.element.children().length&&(this.model.items=[]),this.model.items.length)for(i=0;i<this.model.items.length;i++)if(u=this.model.items[i].text,f=this.model.items[i].content,this.model.items[i].type=="checkbox"||this.model.items[i].type=="radio"){var s=t.buildTag("label"),c=t.buildTag("input",{},{},{type:this.model.items[i].type,name:this.element[0].id}),e=s.append(c);s.append(u||f||"button");this.element.append(e)}else e=t.buildTag("button"),this.element.append(e.html(u||f||"button"));else for(btnelement=this.element.children(),o=this.element.children().length,i=0;i<o;i++)r={},r.imageClass=t.getAttrVal(btnelement[i],"data-ej-imageclass"),r.imageUrl=t.getAttrVal(btnelement[i],"data-ej-imageurl"),this.model.items.push(r);this.model.renderMode=="windows"&&this.model.windows.renderDefault&&t.isMobile()&&(this.model.theme="default");this._groupItems=this.element.children();this._count=this._groupItems.length;this.element.addClass("e-m-grpbtn e-m-"+this.model.renderMode+" e-m-"+this.model.theme+" "+this.model.cssClass);var l=this.element.find("label").length>0?this.element.find("label"):this.element.find("button"),h=this;n.each(this._groupItems,function(t){imageClass=h.model.items[t].imageClass;imagePath=h.model.items[t].imageUrl;imageClass?(n(this).addClass(imageClass),n(this).addClass("e-m-gbimage")):imagePath&&(n(this).css({"background-image":"url('"+imagePath+"')"}),n(this).addClass("e-m-gbimage"),n(this).text().trim()==""&&n(this).addClass("e-m-imageonly"));l.addClass("e-m-btn e-m-default")});this.model.renderMode=="ios7"&&(this.element.find(".e-m-btn:first").addClass("e-m-corner-left"),this.element.find(".e-m-btn:last").addClass("e-m-corner-right"));this._selectItem(this.selectedItemIndex())},_setWidth:function(){var i=0,r;this.model.renderMode=="ios7"&&(r=this.element.find(".e-m-btn"),n.each(r,function(n,r){i=i>t.getDimension(r,"width")?i:t.getDimension(r,"width")}),i=i+1,this._width=i,n(r).css({"min-width":i+"px"}))},_setControlWidth:function(){var i=0,r=this.element.find(".e-m-btn"),u=this.model.renderMode,f=this._width;n.each(r,function(n,r){i=i+t.getDimension(r,"outerWidth")});this.model.renderMode!="ios7"&&(i=i+1);n(this.element).css({"min-width":i+"px"})},_wireEvents:function(i){this._touchStartHandler=n.proxy(this._touchStartHandler,this);this._touchEndHandler=n.proxy(this._touchEndHandler,this);var r=this.element.find(".e-m-btn");t.listenEvents([r,r],[t.startEvent(),t.endEvent()],[this._touchStartHandler,this._touchEndHandler],i)},_touchStartHandler:function(t){n(this.element.children()[this.model.selectedItemIndex]).children().is(":checked")||n(this.element.children()[this.model.selectedItemIndex]).removeClass("e-m-active").addClass("e-m-default");this._prevItem=this.model.selectedItemIndex;n(t.target).addClass("e-m-state-glow");n(t.target).removeClass("e-m-default").addClass("e-m-active");this.currentText=n(t.target).text();this.data={text:this.currentText.trim()};this.model.touchStart&&this._trigger("touchStart",this.data)},_touchEndHandler:function(t){var i=n(t.currentTarget);this.model.selectedItemIndex=i.index();i.removeClass("e-m-state-glow");i.find("input").length==0||i.find("input[type='groupbutton']").length==0?(this.element.children().find("input").attr("type")!="checkbox"&&this.element.find(".e-m-active").removeClass("e-m-active").addClass("e-m-default").find("input[type='radio']").attr("checked",!1),i.removeClass("e-m-default").addClass("e-m-active").find("input[type='radio']").prop("checked",!0)):i.find("input").is(":checked")?i.removeClass("e-m-active").addClass("e-m-default"):i.removeClass("e-m-default").addClass("e-m-active");this.element.children().find("input").attr("type")=="checkbox"&&(n(this.element.children()[this._prevItem]).children().is(":checked")&&n(this.element.children()[this._prevItem]).removeClass("e-m-default").addClass("e-m-active"),n(this.element.children()[this.model.selectedItemIndex]).children().is(":checked")&&n(this.element.children()[this.model.selectedItemIndex]).removeClass("e-m-active").addClass("e-m-default"));this.selectedItemIndex(n(t.currentTarget).index());this.model.touchEnd&&this._trigger("touchEnd",this.data)},_selectItem:function(t){t>=0&&(this.selectedItemIndex(t),this.element.find(".e-m-active").children().attr("type")=="checkbox"?n(this.element.children().find("input")[t]).is(":checked")?(n(this.element.children()[t]).removeClass("e-m-active").addClass("e-m-default"),n(this.element.find("input")[this.selectedItemIndex()]).prop("checked",!1)):(n(this.element.children()[t]).removeClass("e-m-default").addClass("e-m-active"),n(this.element.find("input")[this.selectedItemIndex()]).prop("checked",!0)):(this.element.find(".e-m-active").removeClass("e-m-active").addClass("e-m-default"),n(this.element.find(".e-m-btn")[this.selectedItemIndex()]).removeClass("e-m-default").addClass("e-m-active"),n(this.element.find("input")[this.selectedItemIndex()]).prop("checked",!0)),this.currentText=n(this.element.find(".e-m-btn")[this.selectedItemIndex()]).text(),this.data={text:this.currentText.trim()},this.model.touchEnd&&this._trigger("touchEnd",this.data))},_setModel:function(n){var r=!1,t,i,u;for(t in n)i="_set"+t.charAt(0).toUpperCase()+t.slice(1),u=typeof n[t]=="function"?this[t]():n[t],this[i]?this[i](u):r=!0;r&&this._refresh()},_setRenderMode:function(){this.element.removeClass("e-m-ios7 e-m-android e-m-windows e-m-flat").addClass("e-m-"+this.model.renderMode+"");this.element.find(".e-m-btn:first").removeClass("e-m-corner-left");this.element.find(".e-m-btn:last").removeClass("e-m-corner-right");this.model.renderMode=="ios7"&&(this.element.find(".e-m-btn:first").addClass("e-m-corner-left"),this.element.find(".e-m-btn:last").addClass("e-m-corner-right"))},_setTheme:function(n){this.model.theme=n;this.element.removeClass("e-m-dark e-m-light e-m-default").addClass("e-m-"+n)},_setSelectedItemIndex:function(n){this._selectItem(n)},_refresh:function(){this._destroy();this.element.addClass("ejm-groupbutton");this._renderControl();this._setWidth();this._setControlWidth();this._wireEvents(!1)},_clearElement:function(){this.element.removeAttr("class");this.element.html(this._orgEle.html())},_destroy:function(){this._wireEvents(!0);this._clearElement()}})})(jQuery,Syncfusion)});