/*!
*  filename: ej.mobile.editor.min.js
*  version : 12.3
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./ej.mobile.core.min","./ej.mobile.application.min","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.unobtrusive.min","./../common/ej.touch.min"],n):n()})(function(){(function(n,t,i){t.widget({ejmNumeric:"ej.mobile.Numeric"},{_setFirst:!0,_rootCSS:"e-m-editor-input",type:"editor",defaults:{renderMode:"auto",showSpinButton:!0,showBorder:!0,decimalPlaces:0,enableStrictMode:!1,incrementStep:1,value:null,name:null,enablePersistence:!1,enabled:!0,readOnly:!1,minValue:-Number.MAX_VALUE,maxValue:Number.MAX_VALUE,theme:"auto",watermarkText:"",windows:{renderDefault:!1},change:null,focusIn:null,focusOut:null},observables:["value"],value:t.util.valueFunction("value"),dataTypes:{renderMode:"enum",showSpinButton:"boolean",showBorder:"boolean",decimalPlaces:"number",enableStrictMode:"boolean",enablePersistence:"boolean",enabled:"boolean",readOnly:"boolean",incrementStep:"number",minValue:"number",maxValue:"number",theme:"enum"},_init:function(){this._dataInit();this._renderControl();this._validateMinMaxValue();this._wireEvents(!1);this.model.enabled?this.enable():(this.disable(),this._wireEvents(!0))},_dataInit:function(){var n=this.element,t=this.model;this._startValue=0;this._inputTextBox=n[0];this._keypressFlag=!0;this._incrementFlag=!0;this._isleftspinner=!0},_renderControl:function(){var i,n,r;t.setRenderMode(this);t.setTheme(this);this.model.renderMode=="windows"&&this.model.windows.renderDefault&&(this.model.theme="default");i=this.element;n=this.model;n.name=n.name!=null?n.name:i[0].id;this.element.attr("name",this.model.name);this._wrapper=t.buildTag("div.e-m-editor e-m-"+n.renderMode+" e-m-"+n.theme);i.addClass("e-m-editor-input").after(this._wrapper);r=t.buildTag("span.e-m-textspan");this._inputdiv=t.buildTag("div.e-m-inputspan");this._inputdiv.append(i).append(r);this._wrapper.append(this._inputdiv);n.showSpinButton&&(this._spinner=t.buildTag("div.e-m-spinner"),this._spinButtonDown=t.buildTag("div.e-m-spinner-left"),this._spinButtonUp=t.buildTag("div.e-m-spinner-right"),this._spinLeft=t.buildTag("span.e-m-spin-left e-m-fontimage"),this._spinRight=t.buildTag("span.e-m-spin-right e-m-fontimage"),this._spinButtonDown.append(this._spinLeft),this._spinButtonUp.append(this._spinRight),this._spinner.append(this._spinButtonDown).append(this._spinButtonUp),this._wrapper.append(this._spinner));n.showBorder||this._showBorder(!1);this._inputTextBox=i[0];this.value()===null&&this.model.watermarkText!==""&&this._setWaterMark();this.model.readOnly&&this._setReadOnly(this.model.readOnly)},_createDelegate:function(){this._spinnerHanlder=n.proxy(this._onSpinnerClick,this);this._spinnerHanlder=n.proxy(this._onSpinnerClick,this);this._keyDownProxy=n.proxy(this._keyDown,this);this._keyPressProxy=n.proxy(this._keyPress,this);this._keyUpProxy=n.proxy(this._keyUp,this);this._focusInProxy=n.proxy(this._focusIn,this);this._focusOutProxy=n.proxy(this._focusOut,this);this._clear=n.proxy(this._clearText,this);this._showClear=n.proxy(this._showClear,this);this._mouseMoveHandler=n.proxy(this._onMouseMove,this)},_wireEvents:function(n){var i=this.element,r=this.model;this._createDelegate();r.showSpinButton&&t.listenEvents([this._spinner,this._spinner],[t.startEvent(),t.endEvent()],[this._spinnerHanlder,this._spinnerHanlder],n);t.listenEvents([i,i,i,i,i],["focus","blur","keydown","keypress","keyup"],[this._focusInProxy,this._focusOutProxy,this._keyDownProxy,this._keyPressProxy,this._keyUpProxy],n)},_onMouseMove:function(){var n=this._isleftspinner?"_spinButtonDown":"_spinButtonUp",i=this._isleftspinner?"_spinLeft":"_spinRight";this._errorClass(!1);clearTimeout(this._timeout);this[n].removeClass("e-m-state-active");this[i].removeClass("e-m-state-active");this._inputTextBox.value=this._inputTextBox.value===this.model.watermarkText?"":this._inputTextBox.value;t.listenEvents([this._spinner,this._spinner],[t.moveEvent(),"mouseleave"],[this._mouseMoveHandler,this._mouseMoveHandler],!0)},_onSpinnerClick:function(n){var u,i,r,f;this.model.enabled&&(this._removeWaterMark(),this._isleftspinner=n.target.className.indexOf("e-m-spin-left")===-1?!1:!0,n.preventDefault(),u=this,this._incrementFlag=!this._isleftspinner,i=this._isleftspinner?"_spinButtonDown":"_spinButtonUp",r=this._isleftspinner?"_spinLeft":"_spinRight",n.type===t.endEvent()||n.type=="MSPointerUp"||n.type=="pointerup"?(this._errorClass(!1),clearTimeout(this._timeout),this[i].removeClass("e-m-state-active"),this[r].removeClass("e-m-state-active"),this._inputTextBox.value=this._inputTextBox.value===this.model.watermarkText?"":this._inputTextBox.value,this._updateValue(n)):(n.type==t.startEvent()||n.type=="MSPointerDown"||n.type=="pointerdown")&&(this[i].addClass("e-m-state-active"),this[r].addClass("e-m-state-active"),this._timeout=setInterval(function(){u._updateValue(n)},150),t.listenEvents([this._spinner,this._spinner],[t.moveEvent(),"mouseleave"],[this._mouseMoveHandler,this._mouseMoveHandler],!1)),f={value:this.element.val()},this.model.change&&n.type===t.endEvent()&&this._trigger("change",f))},_mouseWheel:function(n){var t=0;n||(n=window.event);t=n.wheelDelta?n.wheelDelta/60:-n.detail/2;this._incrementFlag=t>0?!0:t<0?!1:this._incrementFlag;t!=0&&this._updateValue(e);this._cancelEvent(n)},_errorClass:function(n){n?this.element.addClass("error"):this.element.removeClass("error")},_showBorder:function(n){n?(this.element.removeClass("e-m-noborder"),this.element.parent().find(".e-m-noborder").addClass("e-m-textspan").removeClass("e-m-noborder")):(this._showSpinButton(!1),this.element.addClass("e-m-noborder"),this.element.parent().find(".e-m-textspan").addClass("e-m-noborder").removeClass("e-m-textspan"))},_showAlert:function(){var t=this;this.element.addClass("error").animate({Opacity:1},700,null,function(){n(t._inputTextBox).removeClass("error")})},_updateValue:function(){this._inputTextBox.value==""?this.value(this._startValue):this.value(parseFloat(this._inputTextBox.value));(setFlag=this._incrementFlag&&this.value()<this.model.maxValue)?this.value(this.value()+this.model.incrementStep):(setFlag=!this._incrementFlag&&this.value()>this.model.minValue)?this.value(this.value()-this.model.incrementStep):this._showAlert();setFlag&&this.setValue(this.value());this._validateMinMaxValue()},_setWaterMark:function(){n(this._inputTextBox).addClass("e-m-watermarktext");(this.model.watermarkText!=""&&this.value()===""||this.value()===null)&&n(this._inputTextBox).attr("placeholder",this.model.watermarkText)},_removeWaterMark:function(){n(this._inputTextBox).removeClass("e-m-watermarktext")},_raiseChangeEvent:function(){var n=this._numberValue();this._preVal&&this._preVal.toString()!=n&&(this._preVal=n,this._raiseChangeEvent(),this.model.change&&this._trigger("change",{value:this.value()}))},_keyUp:function(){var n={value:this.element.val()};this.model.change&&this._trigger("change",n)},_keyPress:function(n){if(!this._keypressFlag)return this._keypressFlag=!0,this._cancelEvent(n),!1},_keyDown:function(n){var s=this.model,o=n.keyCode>=48&&n.keyCode<=57,f=n.keyCode>=96&&n.keyCode<=105,v=n.keyCode==46||n.keyCode==127,h=n.keyCode==8,l,e;if(o||f||this._allowKeyCodes(n)){if((n.shiftKey==!0||n.ctrlKey==!0)&&n.keyCode!=9)return this._keypressFlag=!1,this._cancelEvent(n),!1;if(o||f||h||v){var c=this._inputTextBox.type=="number"?0:this._caretPosition(),t=this._inputTextBox.value.substring(0,c),r=this._inputTextBox.value.substring(c),u=this._inputTextBox.type=="number"?0:this._getSelection(this._inputTextBox.value);f&&(n.keyCode-=48);o||f?u.length==0?this.value(parseFloat(t+String.fromCharCode(n.keyCode)+r)):this.value(parseFloat(t.substring(0,t.length-u.length)+String.fromCharCode(n.keyCode)+r)):h?(l=u.length==0?1:u.length,this.value(t.substring(0,t.length-l)+r)):u.length==0?this.value(t+r.substring(1,r.length)):this.value(t.substring(0,t.length-u.length)+r.substring(0,r.length));s.change&&this._trigger("change",{value:this.value()})}if((n.keyCode==38||n.keyCode==40)&&(n.preventDefault(),this._incrementFlag=n.keyCode==38,this._updateValue(n)),n.keyCode==190&&this.model.decimalPlaces!=0||n.keyCode==110&&this.model.decimalPlaces!=0){if(e=this._inputTextBox.value.split("."),e[1]==i){var a=this._caretPosition(),y=e[0].substring(0,a),p=e[0].substring(a);this.value(y+"."+p);this._setSelectionRange(this.value().length,this.value().length);this._inputTextBox.value=this.value()}else this.value(this._inputTextBox.value);s.change&&this._trigger("change",{value:this.value()});this._cancelEvent(n)}(n.keyCode==190||n.keyCode==110||n.keyCode==109||n.keyCode==189&&(this._caretPosition()!=0&&this._getSelection()!=this.value()||this.model.minValue>=0))&&this._cancelEvent(n)}else this._keypressFlag=!1,this._cancelEvent(n),this._showAlert()},_cancelEvent:function(n){return n.cancelBubble=!0,n.returnValue=!1,n.stopPropagation(),n.preventDefault(),!1},_validateMinMaxValue:function(){this.model.minValue>this.model.maxValue&&(this.model.minValue=this.model.maxValue);this.value()!==""&&this.model.maxValue<this.value()?this.model.enableStrictMode?this.value(this.model.maxValue):this._showAlert():this.value()!==""&&this.model.minValue>this.value()&&(this.model.enableStrictMode?this.value(this.model.minValue):this._showAlert());this.value()!==""&&(this._inputTextBox.value=this.value())},_focusIn:function(){var n=this;this._removeWaterMark();this.model.renderMode=="android"?this.element.parent().find(".e-m-textspan").addClass("e-m-active"):this.element.addClass("e-m-active");this._errorClass(!1);this._inputTextBox.value===this.model.watermarkText&&(this._inputTextBox.value="");this.value(this._inputTextBox.value!==this.model.watermarkText&&this._inputTextBox.value===""?0:this._inputTextBox.value);n.element[0].scrollLeft=n.element[0].scrollWidth;window.setTimeout(function(){t.setCaretToPos(n.element[0],n.element.val().length,n.element.val().length)});this.model.focusIn&&this._trigger("focusIn",{value:this.model.value})},_focusOut:function(){this.model.renderMode=="android"?this.element.parent().find(".e-m-textspan").removeClass("e-m-active"):this.element.removeClass("e-m-active");this._errorClass(!1);this._inputTextBox.value<this.model.minValue&&this._inputTextBox.value!==""?(this._inputTextBox.value=this.model.minValue.toFixed(this.model.decimalPlaces),this.value(this._inputTextBox.value)):this._inputTextBox.value>this.model.maxValue&&(this._inputTextBox.value=this.model.maxValue.toFixed(this.model.decimalPlaces),this.value(this._inputTextBox.value));this._inputTextBox.value!="NaN"&&this._inputTextBox.value!=""&&(this.value(this._inputTextBox.value),this._validateMinMaxValue());this._inputTextBox.value==""&&this._setWaterMark();this.element[0].scrollLeft=0;this.model.focusOut&&this._trigger("focusOut",{value:this.model.value})},_getSelection:function(n){var t=null;return document.selection?(t=document.selection.createRange(),t.text):n.substring(this._inputTextBox.selectionStart,this._inputTextBox.selectionEnd)},_setSelectionRange:function(n,t){var i=this._inputTextBox,r;i.setSelectionRange?(i.focus(),i.setSelectionRange(n,t)):i.createTextRange&&(r=i.createTextRange(),r.collapse(!0),r.moveEnd("character",t),r.moveStart("character",n),r.select())},_caretPosition:function(){var n=this._inputTextBox,t=0,i;return document.selection?(n.focus(),i=document.selection.createRange(),i.moveStart("character",-n.value.length),t=i.text.length):(n.selectionStart||n.selectionStart=="0")&&(t=n.selectionEnd),t},_allowKeyCodes:function(n){for(var i=[38,40,35,36,109,189,46,8,127,37,39,190,9,13,16,17,18,20,110],t=0,t=0;t<19;t++)if(n.keyCode==i[t])return!0;return!1},_setRenderMode:function(n){this.model.renderMode=n;this.element.closest(".e-m-editor").removeClass("e-m-ios7 e-m-android e-m-windows e-m-flat").addClass("e-m-"+n)},_setTheme:function(n){this.model.theme=n;this.element.closest(".e-m-editor").removeClass("e-m-dark e-m-light").addClass("e-m-"+n)},_showSpinButton:function(n){this._spinner&&this._spinner.css("display",n?"table-cell":"none")},_setDecimal:function(n){this.model.decimalPlaces=n},_setReadOnly:function(n){n?this.element.attr("readonly",!0):this.element.removeAttr("readonly")},_setModel:function(n){var i=!1;for(var r in n)switch(r){case"renderMode":this._setRenderMode(n.renderMode);break;case"theme":this._setTheme(n.theme);break;case"value":t.isNullOrUndefined(n.minValue)&&t.isNullOrUndefined(n.maxValue)?(this.setValue(n[r]),n[r]=this.value()):i=!0;break;case"showSpinButton":this._showSpinButton(n.showSpinButton);break;case"showBorder":this._showBorder(n.showBorder);break;case"enabled":n.enabled?(this.enable(),this._wireEvents(!1)):(this.disable(),this._wireEvents(!0));break;case"readOnly":this._setReadOnly(n.readOnly);break;case"decimalPlaces":this._setDecimal(n.decimalPlaces);break;case"incrementStep":if(isNaN(n.incrementStep))return;this.model.incrementStep=parseFloat(n.incrementStep.toFixed(this.model.decimalPlaces));break;case"minValue":if(isNaN(n.minValue))return;this.model.minValue=parseFloat(n.minValue.toFixed(this.model.decimalPlaces));i=!0;break;case"maxValue":if(isNaN(n.maxValue))return;this.model.maxValue=parseFloat(n.maxValue.toFixed(this.model.decimalPlaces));i=!0;break;case"watermarkText":this.model.watermarkText=n.watermarkText;this._setWaterMark();break;case"enableStrictMode":this.model.enableStrictMode=n.enableStrictMode}i&&(this._validateMinMaxValue(!0),n.value=this.value(),n.maxValue=this.model.maxValue,n.minValue=this.model.minValue,this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue))},_refresh:function(){this._clearElement();this._renderControl();this._wireEvents(!1)},_clearElement:function(){this._wireEvents(!0);this.element.parent().removeAttr("class")},_destroy:function(){this._cloneElement.insertBefore(this.element);this.element.remove()},enable:function(){this.model.enabled=!0;n(".e-m-editor-input").prop("disabled",!1);this.element.closest(".e-m-editor").removeClass("e-m-state-disabled")},disable:function(){this.model.enabled=!1;n(".e-m-editor-input").prop("disabled",!0);this.element.closest(".e-m-editor").addClass("e-m-state-disabled")},getValue:function(){return this._inputTextBox.value},setValue:function(n){this.value(n);this._validateMinMaxValue();n==null&&(this._inputTextBox.value==this.model.watermarkText||this._inputTextBox.value!="")&&this._setWaterMark()}})})(jQuery,Syncfusion)})