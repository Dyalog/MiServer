/*!
*  filename: ej.mobile.listview.min.js
*  version : 13.2.0.34
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./ej.mobile.core.min","./ej.mobile.application.min","./../common/ej.unobtrusive.min","./../common/ej.touch.min","./ej.mobile.button.min","./ej.mobile.checkbox.min","./ej.mobile.textbox.min","./ej.mobile.header.min","./ej.mobile.scrollpanel.min"],n):n()})(function(){(function($,ej,undefined){ej.widget("ejListViewBase","ej.ListViewBase",{defaults:{height:null,width:null,selectedItemIndex:-1,enableGroupList:!1,enableAjax:!1,enableCache:!1,enablePersistence:!1,load:null,loadComplete:null,ajaxBeforeLoad:null,ajaxSuccess:null,ajaxError:null,ajaxComplete:null,ajaxSettings:{type:"GET",cache:!1,async:!0,dataType:"html",contentType:"html",url:"",data:{}},renderTemplate:!1,templateId:null,persistSelection:!1,preventSelection:!1,dataSource:[],query:null,showHeader:!1,cssClass:"",headerTitle:"Title",headerBackButtonText:null,enableFiltering:!1,enableCheckMark:!1},observables:["selectedItemIndex","dataSource"],selectedItemIndex:ej.util.valueFunction("selectedItemIndex"),dataSource:ej.util.valueFunction("dataSource"),_updateModelItems:function(){var ang_attr,ang_li,ele,ul,groupid,element,groupTitle,element1,primaryKey,parentPrimaryKey;if(this.model.items=eval(this.model.items),ang_attr=this.model.items,ang_attr.length){for(ul=ej.buildTag("ul.e-m-clearall"),i=0;i<ang_attr.length;i++)ang_attr[i].items=[],ang_li=ej.buildTag("li"),this.model.items[i].template&&ang_li.html(this.model.items[i].template),!this.model.items[i].childId&&this.model.items[i].href&&(this.model.items[i].childId="page_"+parseInt(Math.random().toFixed(3)*1e3)),this.model.items[i].renderTemplate&&(this._storedTemplate[i]||(this.model.items[i].templateId?(ele=this._tempContent.find("#"+this.model.items[i].templateId).remove(),this._storedTemplate[i]=ele[0].nodeName&&ele[0].nodeName.toLowerCase()=="script"?ej.getClearString(ele[0].innerHTML):ele[0].outerHTML):this._storedTemplate[i]=this.model.items[i].template,this.model.items[i].templateId=this._storedTemplate[i])),this.model.fieldSettings&&(this.model.fieldSettings=$.extend(this.defaults.fieldSettings,this.model.fieldSettings)),ul.append(ang_li);this.element.append(ul)}else for(ul=this.element.find(">ul"),groupid=1,ulindex=0;ulindex<ul.length;ulindex++){for(this._listitems=$(ul[ulindex]).find(">li"),index=0;index<this._listitems.length;index++)for(element=this._listitems[index],ej.getAttrVal(element,"data-ej-primarykey")==null&&$(element).find("ul").length?(primaryKey=Math.round(Math.random()*100),$(element).attr("data-ej-primarykey",primaryKey)):primaryKey="",groupTitle=ej.getAttrVal($(ul[ulindex]),"data-ej-grouplistitle")?ej.getAttrVal($(ul[ulindex]),"data-ej-grouplistitle"):"GroupList"+groupid,this.model.items.push(this._itemsObjectCollection($(this._listitems[index]),primaryKey,null,groupTitle)),this._nestedListitems=$(this._listitems[index]).find("ul >li"),index1=0;index1<this._nestedListitems.length;index1++)element1=this._nestedListitems[index1],ej.getAttrVal(element1,"data-ej-primarykey")==null&&$(element1).find("ul").length?(primaryKey=Math.round(Math.random()*100),$(element1).attr("data-ej-primarykey",primaryKey)):primaryKey="",parentPrimaryKey=ej.getAttrVal($($(element1).parent()).closest("li"),"data-ej-primarykey"),this.model.items.push(this._itemsObjectCollection($(this._nestedListitems[index1]),primaryKey,parentPrimaryKey,groupTitle));groupid++}},_load:function(){if(this._orgEle=this.element.clone(),this._index=0,this._items=[],this.model.id=this.element[0].id,this.model.load&&this._trigger("load"),this.model.fieldSettings=eval(this.model.fieldSettings),this.model.fieldSettings&&this.model.query!=null){this._dataUrl=this.model.dataSource;var proxy=this;proxy._prefixClass=="e-m-"&&App.waitingPopUp.show();this.dataSource().executeQuery(eval(this.model.query)).done(function(n){proxy.model.dataSource=n.result;proxy._renderControl();proxy._prefixClass=="e-m-"&&App.waitingPopUp.hide()})}else this._renderControl()},_renderControl:function(){var hdr,innerDiv,group,length,title,i,groupdiv,ul,eLi,ulItems;if(this.element.addClass(this._prefixClass+"parentlv "),this._lbEle=ej.buildTag("div."+this._rootCSS),this._lbEle.addClass("subpage"),this._prefixClass=="e-m-"&&(this._lbEle.addClass("e-m-"+this.model.renderMode+" e-m-"+this.model.theme+" "+this.model.cssClass),this.model.ios7.inline&&this._lbEle.addClass("e-m-inline")),this._lContainer=ej.buildTag("div."+this._prefixClass+"list-container#"+this.model.id+"_container","<div><\/div>"),this._prefixClass=="e-m-"&&this.model.enablePullToRefresh&&(this._refreshContainer=ej.buildTag("div."+this._prefixClass+"ptr-container"),this._ptrImgContainer=ej.buildTag("span."+this._prefixClass+"image-container "+this._prefixClass+"pull"),this._textContainer=ej.buildTag("span."+this._prefixClass+"text-container"),this._refreshContainer.append(this._ptrImgContainer).append(this._textContainer),this._lContainer.find("div:first").append(this._refreshContainer),this._textContainer.html(this.model.pullToRefreshSettings.pullText)),ul=this.element.find(">ul"),this.model.showHeader&&(hdr=this._renderHeader(this.model.id,this.model.showHeaderBackButton,this.model.headerTitle,this.model.headerBackButtonText),this._lbEle.prepend(hdr)),this._prefixClass=="e-m-"&&this.model.allowScrolling&&this._renderScrollPanel(this._lbEle,this.model.id+"_scroll",this.model.id+"_container"),this._hasDataSource()&&!this.model.renderTemplate&&this.element.empty(),this.model.renderTemplate&&(this.model.templateId?this._tempContent.find("#"+this.model.templateId).length&&(this._template=this._tempContent.find("#"+this.model.templateId),ej.destroyWidgets(this._template),this._template[0].nodeName.toLowerCase()!="script"&&this._template.remove(),this._template=this._template[0].nodeName&&this._template[0].nodeName.toLowerCase()=="script"?ej.getClearString(this._template[0].innerHTML):this._template[0].outerHTML):(ej.destroyWidgets(this.element),this._template=this.element.html(),this.element.empty())),!this.model.renderTemplate||this._hasDataSource()||this.model.enableGroupList){if(!this.model.renderTemplate||this.model.renderTemplate&&this._hasDataSource()||this.model.renderTemplate&&this.model.enableGroupList){if(this._model_index=0,this.model.enableGroupList){if(this._lContainer.addClass(this._prefixClass+"grouped"),innerDiv=ej.buildTag("div."+this._prefixClass+"grouplist"),ul=this.element.children(),ul.length||this.dataSource().length)for(group=this.dataSource().length?ej.DataManager(this.dataSource()).executeLocal(ej.Query().from(this.dataSource()).group(this.model.fieldSettings.groupID)):ej.DataManager(this.model.items).executeLocal(ej.Query().from(this.model.items).group(this.model.fieldSettings.groupID)),length=group.length,i=0;i<length;i++)this._items=group[i].items,this._hasDataSource()?(ulItem=ej.buildTag("ul","",{},{"data-ej-grouplisttitle":group[i].key}),this._lbEle.append(ulItem)):ulItem=ul[i],title=this._hasDataSource()?group[i].key:ej.getAttrVal($(ulItem),"data-ej-grouplisttitle","GroupList"+(i+1)),$(ulItem).attr("data-ej-grouplisttitle",title),groupdiv=ej.buildTag("div."+this._prefixClass+"groupdiv",ej.buildTag("div."+this._prefixClass+"grouptitle",title)),innerDiv.append(groupdiv.append(this._renderListItems($(ulItem).addClass(this._prefixClass+"grouped"))));else this._template&&(ej.destroyWidgets(this._template),innerDiv[0].innerHTML=this._template);this._prefixClass=="e-m-"?this._lContainer.find("div:first").append(innerDiv):this._lContainer.append(innerDiv);ej.widget.init&&ej.widget.init(innerDiv)}else{if(this._hasDataSource())for(ul=ej.buildTag("ul"),this._items=this.dataSource(),this._items=eval(this._items),j=0;j<this._items.length;j++)this._items[j].href&&!this._items[j].childId&&(this._items[j].childId="page_"+parseInt(Math.random().toFixed(3)*1e3));ul.length?(ej.destroyWidgets(ul),this._prefixClass=="e-m-"?this._lContainer.find("div:first").append(this._renderListItems(ul)):this._lContainer.append(this._renderListItems(ul))):this._template&&(ej.destroyWidgets(this._template),this._lContainer[0].innerHTML=this._template)}this.element.prepend(this._lbEle);this.model.enableFiltering&&this._createFilterWrapper(this._lbEle);this._lbEle.append(this._lContainer);ej.widget.init&&ej.widget.init(this._lContainer);eLi=this.element.find("li."+this._prefixClass+"list");eLi.removeEleEmptyAttrs();eLi.find("."+this._prefixClass+"list-anchor").removeEleEmptyAttrs();ej.widget.init&&ej.widget.init(this._lbEle);ulItems=this.element.find("ul");ulItems.find("li:first").addClass(this._prefixClass+"firstitem");ulItems.find("li:last").addClass(this._prefixClass+"lastitem");this._liEl=this.element.find("li");this.selectedItemIndex()>=0&&!this.model.preventSelection&&this.model.persistSelection&&!ej.getBooleanVal(ulItems[this.selectedItemIndex()],"data-preventselection",this.model.preventSelection)&&ej.getBooleanVal(ulItems[this.selectedItemIndex()],"data-persistselection",this.model.persistSelection)&&(this._currentItem=$(this._liEl[this.selectedItemIndex()]),this._prevItem=this._currentItem,this._currentItem.removeClass(this._prefixClass+"state-default").addClass(this._prefixClass+"state-active"));$(this.element.find("."+this._prefixClass+"lv-check").parent()).addClass(this._prefixClass+"lv-checkdiv");$(this.element.find("."+this._prefixClass+"lv-check").closest("li."+this._prefixClass+"list")).addClass(this._prefixClass+"list-check");$(this.element.find("."+this._prefixClass+"lv-input").closest("."+this._prefixClass+"lv-filter")).addClass(this._prefixClass+"lv-inputdiv");this._wireEvents()}}else this.element.append(this._lbEle.append(this._lContainer)),this._template&&(this._lContainer.append(this._template),ej.widget.init&&ej.widget.init(this._lContainer));this._prefixClass=="e-m-"&&(App.angularAppName||ej.angular.defaultAppName)&&ej.angular.compile(this._lbEle);this._setHeightWidth();this.model.loadComplete&&this._trigger("loadComplete")},_createFilterWrapper:function(n){var t=this._createFilterDiv(),i=ej.buildTag("a."+this._prefixClass+"lv-anchor",ej.buildTag("span."+this._prefixClass+"input-btn"),{},{Title:"Clear text","data-role":"none"});$(t).append(i);n.append(t)},_renderListItems:function(n){var u,t,r,i;if(n.addClass(this._prefixClass+"list-hdr "+this._prefixClass+"clearall"),this._liItems=n.find("li"),(this._liItems.length&&!this._hasDataSource()||this._hasDataSource())&&(this._renderParentChildTemplate(),this._hasDataSource()||this.model.enableGroupList||(this._items=this.model.items),u=this._items,t=this._filterParentChild(u),t.child.length&&this._childRendering(t.child),t.parent))for(n.empty().html($(this.jsRender).render(t.parent)),r=n.find(">li"),i=0;i<r.length;i++)t.parent[i]&&t.parent[i].attributes&&$(r[i]).addEleAttrs(t.parent[i].attributes);return this._initEJCheckBox&&this._initEJCheckBox(n),n},_filterParentChild:function(n){var t=ej.DataManager(n),i=t.executeLocal(ej.Query().from(n).where(ej.Predicate(this.model.fieldSettings.parentPrimaryKey,ej.FilterOperators.notEqual,null)).group(this.model.fieldSettings.parentPrimaryKey)),r=t.executeLocal(ej.Query().from(n).where(ej.Predicate(this.model.fieldSettings.parentPrimaryKey,ej.FilterOperators.equal,null)));return{parent:r,child:i}},_childRendering:function(n){var t=this;n.length&&(t.element.append($(t.jsChildRender).render(n)),$.each(n,function(i,r){var e,f,u;for(ej.widget.init&&ej.widget.init(t.element.find("#child"+r.key)),e=t.element.find("#child"+r.key).find("ul"),f=e.find("li"),k=0,u=0;u<f.length;u++)n[k].items[u]&&n[k].items[u].attributes&&$(f[u]).addEleAttrs(n[k].items[u].attributes);k++}))},_renderParentChildTemplate:function(){var t=this._renderLists(),i,n,r;$.views.helpers({_checkAjaxUrls:this._checkAjaxUrl,_checkImgUrls:this._checkImgUrl,_checkIsChecked:this._checkIsCheck,Object:this,ej:ej});this.jsRender=ej.buildTag("script#"+this.model.id+"_Template","",{},{type:"text/x-jsrender"});this.jsRender[0].text=ej.browserInfo().name=="msie"&&ej.browserInfo().version<10?t[0].outerHTML.replace(/&gt;/g,">"):t[0].outerHTML.replace(/&gt;/g,">");this.jsChildRender=ej.buildTag("script#"+this.model.id+"_ChildTemplate","",{},{type:"text/x-jsrender"});i=ej.buildTag("ul."+this._prefixClass+"childcontainer "+this._prefixClass+"list-hdr "+this._prefixClass+"clearall");t.addClass(this._prefixClass+"childli");i[0].innerHTML="{{for items}}"+t[0].outerHTML+"{{/for}}";n=ej.buildTag("div."+this._rootCSS+" subpage "+this._prefixClass+"childitem","",{},{id:"{{if key}}child{{>key}}{{else "+this.model.fieldSettings.childId+"}}{{>"+this.model.fieldSettings.childId+"}}{{else}}{{/if}}",style:"display:none"});this._prefixClass=="e-m-"&&n.addClass("e-m-"+this.model.renderMode+" e-m-"+this.model.theme);r=ej.buildTag("div."+this._prefixClass+"list-container","",{},{id:"{{if key}}child{{>key}}{{else "+this.model.fieldSettings.childId+"}}{{>"+this.model.fieldSettings.childId+"}}{{else}}{{/if}}_container"});this.model.showHeader&&n.append(this._renderHeader("{{if key}}child{{>key}}{{else "+this.model.fieldSettings.childId+"}}{{>"+this.model.fieldSettings.childId+"}}{{else}}{{/if}}",!0,"Title"));this.model.enableFiltering&&this._createFilterWrapper(n);n.append(r.append(i));this._prefixClass=="e-m-"&&this.model.allowScrolling&&this._renderScrollPanel(n,"{{if key}}child{{>key}}{{else "+this.model.fieldSettings.childId+"}}{{>"+this.model.fieldSettings.childId+"}}{{else}}{{/if}}_scroll","{{if key}}child{{>key}}{{else "+this.model.fieldSettings.childId+"}}{{>"+this.model.fieldSettings.childId+"}}{{else}}{{/if}}_container");ej.browserInfo().name=="msie"&&ej.browserInfo().version<10?this.jsChildRender[0].text=n[0].outerHTML.replace(/&gt;/g,">"):this.jsChildRender[0].innerHTML=n[0].outerHTML.replace(/&gt;/g,">")},_renderChild:function(n){this._currentItem.attr("data-childid",n);this._currentItem.attr("data-childtitle")||this._currentItem.attr("data-childtitle",this._currentItem.text());this._createListDiv(n);this._div.hide();this._container=ej.buildTag("div."+this._prefixClass+"list-container#"+n+"_container");this.element.append(this._div);this.model.allowScrolling&&this._renderScrollPanel(this._div,n+"_scroll",n+"_container",!0)},_getText:function(n){return $(n).clone().children().remove().end().text()},_checkImgUrl:function(){var n=this.getRsc("helpers","Object"),t=this.data[n.model.fieldSettings.imageUrl];return $.support.pushstate||(t=typeof App=="object"?App.route.makeUrlAbsolute(t,!0):t),"<img src = "+t+" class='"+n._prefixClass+"list-img "+n._prefixClass+"rel "+n._prefixClass+"user-select'/>"},_checkAjaxUrl:function(){var t=this.data.href,u=this.data.childId,e=this.data.renderTemplate,o=this.data.templateId,n=this.getRsc("helpers","Object"),f=this.getRsc("helpers","ej"),r=n._currentPage(n),i;t&&t.indexOf("#")!=-1&&t!="#"?n._storedContent[u]||(r.find(t).show(),i=r.find(t).clone(),r.find(t).hide(),n._storedContent[u]=i[0].nodeName&&i[0].nodeName.toLowerCase()=="script"?f.getClearString(i[0].innerHTML):i[0].outerHTML):n._storedContent[this.index]&&(n._storedContent=f._pushValue(n._storedContent,"",this.index))},_currentPage:function(n){return n._prefixClass=="e-m-"?ej.getCurrentPage():$("body")},_checkIsCheck:function(){return this.data[this.getRsc("helpers","Object").model.fieldSettings.checked]?!0:!1},_onTouchStartHandler:function(n){ej.isDevice()||ej._preventDefaultException(n.target,this._preventDefaultException)||n.preventDefault&&n.preventDefault();ej.isWindows&&ej.isWindows()&&ej._touchStartPoints(n,this);this._currentItem=$(n.currentTarget);this._scroll=!1;ej.getBooleanVal(this._currentItem,"data-preventSelection",this.model.preventSelection)||this._addSelection();this.model.renderMode!="windows"||this.model.windows.preventSkew||this._currentItem.addClass(ej.isMobile()?ej._getSkewClass($(this._currentItem),n.pageX,n.pageY):this._prefixClass+"m-skew-center");this._triggerStartEvent(this._returnData());ej.listenEvents([this._liEl,this._prefixClass=="e-m-"&&this.model.enablePullToRefresh?this.element:this._liEl,this._liEl],[ej.endEvent(),ej.moveEvent(),ej.cancelEvent()],[this._touchEndDelegate,this._touchMoveDelegate,this._touchMoveDelegate],!1,this);$(window).bind(ej.endEvent()+" MSPointerUp pointerup",this._docClickDelegate)},_onTouchMoveHandler:function(n){if(this._isMoved=!0,this._prefixClass=="e-m-"&&this.model.enablePullToRefresh&&!this._isRefreshing){this._listScroll=this.element.find(".e-m-scroll");var t=this._listScroll.ejmScrollPanel("getScrollPosition").y,i=n.changedTouches?n.changedTouches[0].pageY:n.pageY;t>0&&(this.model.refreshThreshold<i?(this._textContainer.empty().html(this.model.pullToRefreshSettings.releaseText),this._ptrImgContainer.removeClass("rotatereverse").addClass("rotateimage"),this._isCrossed=!0):(this._ptrImgContainer.hasClass("rotateimage")&&this._ptrImgContainer.removeClass("rotateimage").addClass("rotatereverse"),this._textContainer.html(this.model.pullToRefreshSettings.pullText),this._isCrossed=!1))}else(!ej.isWindows||ej.isWindows&&!ej.isWindows()||ej.isWindows&&ej.isWindows()&&ej._isTouchMoved(n,this))&&(this._scroll=!0,ej.getBooleanVal(this._currentItem,"data-persistSelection",this.model.persistSelection)?this._prevItem&&this._prevItem[0]!=this._currentItem[0]&&this._removeSelection():this._removeSelection(),this.model.renderMode!="windows"||this.model.windows.preventSkew?this.model.renderMode!="windows"&&!ej.getBooleanVal(this._currentItem,"data-preventselection",this.model.preventSelection)&&this._prevItem&&ej.getBooleanVal(this._currentItem,"data-persistSelection",this.model.persistSelection)&&this._prevItem.removeClass(this._prefixClass+"state-default").addClass(this._prefixClass+"state-active"):ej._removeSkewClass(this._currentItem))},_onTouchEndHandler:function(n){var u,r,t,i,f,e;if(this._isFromAjax=!1,ej.getBooleanVal(this._currentItem,"data-persistSelection",this.model.persistSelection)||this._removeSelection(),this.model.renderMode!="windows"||this.model.windows.preventSkew||ej._removeSkewClass(this._currentItem),this._scroll)return this._setCurrent(),this._unbindEvents(n),!1;if(this._scroll)this.model.renderMode!="windows"||ej.isMobile()||this._touchEndEventHandler();else{if(this._currentItem.find("."+this._prefixClass+"lv-check").length&&(u=this._currentItem.find("."+this._prefixClass+"lv-check"),this._prefixClass!="e-m-"&&(this._prefixClass!="e-"||$(n.target).closest(".e-lv-checkdiv").length)||this._toggleCheckboxValue(u)),r=this._prefixClass=="e-m-"?this._currentItem.attr("data-childheaderbackbuttontext")==undefined?this._currentItem.closest("."+this._rootCSS+"").find("."+this._prefixClass+"header").length?this._currentItem.closest("."+this._rootCSS+"").find("."+this._prefixClass+"header").ejmHeader("getTitle"):"Back":ej.getAttrVal(this._currentItem,"data-childheaderbackbuttontext"):this._currentItem.attr("data-childheaderbackbuttontext")==undefined?this._currentItem.closest("."+this._rootCSS+"").find("."+this._prefixClass+"header").length?this._currentItem.closest("."+this._rootCSS+"").find("."+this._prefixClass+"header ."+this._prefixClass+"htitle").text():"Back":ej.getAttrVal(this._currentItem,"data-childheaderbackbuttontext"),t=this._currentItem.attr("data-href"),this._currentItem.attr("data-navigateUrl"))this._touchEndEventHandler();else{if(i=this._isInsideNavigation?this._tempContent.find("[data-ajaxurl='"+this._convertToRelativeUrl(t)+"']"):this.element.find("[data-ajaxurl='"+this._convertToRelativeUrl(t)+"']"),ej.getBooleanVal(this._currentItem,"data-loadajax",this.model.enableAjax)&&(!this.model.enableCache||i.length==0)){i.length&&i.remove();this.loadAjaxContent(t,r);this._unbindEvents(n);this._isInsideNavigation&&this._nearestND.model.contentId&&this._closeNavigation();return}t&&t.indexOf("#")!=-1&&this._currentPage(this).find("#"+t.replace("#","")).length&&(this._renderChild(ej.getAttrVal(this._currentItem,"data-childid","page_"+parseInt(Math.random().toFixed(3)*1e3))),f=ej.buildTag("div."+this._prefixClass+"content",this._storedContent[this._currentItem.attr("data-childid")]),this._div.append(this._container.append(f)),ej.widget.init&&ej.widget.init(this._div));this._updateContent(this._currentItem,r);this._isInsideNavigation&&(e=this._nearestND.model.contentId?!this._currentItem.attr("data-childid")||this._currentItem.attr("data-href"):!(this._currentItem.attr("data-childid")||this._currentItem.attr("data-href")));this._isInsideNavigation&&e&&this._closeNavigation();this._touchEndEventHandler()}this._prevItem=this._currentItem}this._unbindEvents(n)},_generateData:function(n,t){var i=ej.DataManager(n).executeLocal(ej.Query().from(this.model.dataSource).where(ej.Predicate(typeof ej.getAttrVal(this._currentItem,"data-id")=="undefined"?this.model.fieldSettings.text:this.model.fieldSettings.id,ej.FilterOperators.equal,t)).group(t))[0];return i?i.items[0]:[]},_closeNavigation:function(){this._prefixClass=="e-m-"?this.element.closest("."+this._prefixClass+"nb").ejmNavigationDrawer("close"):this.element.closest("."+this._prefixClass+"nb").ejNavigationDrawer("close")},_setCurrent:function(){this._prevItem&&ej.getBooleanVal(this._currentItem,"data-persistSelection",this.model.persistSelection)&&(this._currentItem=this._prevItem,this._currentItem.removeClass(this._prefixClass+"state-default").addClass(this._prefixClass+"state-active"))},_unbindEvents:function(n){n&&n.target.nodeName&&n.target.nodeName.toLowerCase()!="a"&&(this._scroll=!1);ej.listenEvents([this._liEl,this._liEl],[ej.endEvent(),ej.moveEvent(),ej.cancelEvent()],[this._touchEndDelegate,this._touchMoveDelegate,this._touchMoveDelegate],!0,this)},_addSelection:function(){this._scroll||(this._currentItem.closest("."+this._prefixClass+"list-container").find("."+this._prefixClass+"state-active").removeClass(this._prefixClass+"state-active").addClass(this._prefixClass+"state-default"),this._currentItem.removeClass(this._prefixClass+"state-default").addClass(this._prefixClass+"state-active"))},_removeSelection:function(){var n=this;n._currentItem.removeClass(this._prefixClass+"state-active").addClass(this._prefixClass+"state-default")},_setHeightWidth:function(){if(this.model.autoAdjustHeight)this.element.height(window.innerHeight);else if(this.model.height)this.element.height(this.model.height);else{var n=this.element[0].scrollHeight?this.element[0].scrollHeight:ej.getDimension(this._lbEle.find("."+this._prefixClass+"list-container"),"outerHeight");this.model.showHeader&&(n=n+ej.getDimension(this._lbEle.find("."+this._prefixClass+"header"),"outerHeight"));this.model.enableFiltering&&(n=n+ej.getDimension(this._lbEle.find("."+this._prefixClass+"lv-inputdiv"),"outerHeight"));this.element.height(n)}this.model.width&&this.element.width(this.model.width)},_touchEndEventHandler:function(){this._triggerEndEvent(this._returnData())},_docClick:function(){this._isMoved&&this._prefixClass=="e-m-"&&this.model.enablePullToRefresh&&this._isCrossed&&!this._isRefreshing&&(ej.listenEvents([this.element],[ej.moveEvent()],[this._touchMoveDelegate],!0,this),this._refreshContainer.addClass("refreshing"),this._ptrImgContainer.removeClass(this._prefixClass+"pull").addClass(this._prefixClass+"loading"),this._textContainer.html(this.model.pullToRefreshSettings.refreshText),this._updateDataSource(),this._ptrImgContainer.removeClass("rotateimage"),this._isCrossed=!1);this._scroll&&(this._setCurrent(),$(document).unbind(ej.endEvent()+" MSPointerUp pointerup",this._docClickDelegate),ej.listenEvents([this._liEl,this._liEl],[ej.endEvent(),ej.moveEvent()],[this._touchEndDelegate,this._touchMoveDelegate],!0,this),$(window).unbind(ej.endEvent()+" MSPointerUp pointerup",this._docClickDelegate))},_popStateNavigation:function(n,t){t.pageUrl&&this.model.enableFiltering&&this._initializeFiltering($("div[data-url='"+t.pageUrl.replace("#","")+"']"))},_anchorClickHandler:function(n){if(this._scroll)return ej.blockDefaultActions(n),!1},_onResize:function(){var n=this;setTimeout(function(){n._setHeightWidth()},ej.isAndroid()?200:0)},_onScrollStop:function(n){ej.blockDefaultActions(n)},_createDelegates:function(){this._anchorClickDelegate=$.proxy(this._anchorClickHandler,this);this._keyup=$.proxy(this._onKeyUp,this);this._touchStartDelegate=$.proxy(this._onTouchStartHandler,this);this._touchEndDelegate=$.proxy(this._onTouchEndHandler,this);this._touchMoveDelegate=$.proxy(this._onTouchMoveHandler,this);this._resizeDelegate=$.proxy(this._onResize,this);this._popStateDelegate=$.proxy(this._popStateNavigation,this);this._docClickDelegate=$.proxy(this._docClick,this)},_wireEvents:function(n,t){var i=this._liEl||t,r,u;if(i){this._createDelegates();r=n?"unbind":"bind";this.model.autoAdjustHeight&&(u=!ej.isDevice()&&"onorientationchange"in window?"orientationchange":"resize",ej.listenEvents([window],[u],[this._resizeDelegate],n,this));ej.listenEvents([i.find("a"),this.element.find("."+this._prefixClass+"lv-input"),i,i],["click","keyup",ej.startEvent(),ej.cancelEvent()],[this._anchorClickDelegate,this._keyup,this._touchStartDelegate,this._touchMoveDelegate],n,this);this._lContainer.on("scrollstop",$.proxy(this._onScrollStop,this));$("body")[r]("viewpopstate",this._popStateDelegate);this.model.enableFiltering&&this._initializeFiltering(this._lbEle)}},_initializeFiltering:function(n){var i,t;for(this._searchItems=$(n).find("."+this._prefixClass+"list"),this._emptyFilterTextValue(n),n.find("."+this._prefixClass+'list[style*="display: none"]').show(),i="a",this._elementText=[],t=0;t<this._searchItems.length;t++)$(this._searchItems[t]).find(i)?this._elementText.push($.trim($(this._searchItems[t]).find(i).html().replace(new RegExp("<[^<]+>","g"),"").toLowerCase())):this._elementText.push("")},_onKeyUp:function(n){for(var t=0;t<this._searchItems.length;t++)this._elementText[t].indexOf(n.target.value.toLowerCase())==-1?$(this._searchItems[t]).css("display","none"):$(this._searchItems[t]).css("display","")},_setModel:function(n){var r=!1,t,i;for(t in n)i="_set"+t.charAt(0).toUpperCase()+t.slice(1),this[i]?this[i](n[t]):r=!0;r&&this._refresh()},_setTheme:function(n){if(n&&(this.model.theme=n,this._lbEle.removeClass("e-m-dark e-m-light e-default").addClass("e-m-"+this.model.theme),this.model.enableFiltering&&this.element.find("."+this._prefixClass+"text-input").ejmTextBox("model.theme",this.model.theme),this.model.showHeader&&this._lbEle.find("#"+this.model.id+"_header").ejmHeader("model.theme",this.model.theme),this.element.find("."+this._prefixClass+"childitem").length)){$(this.element.find("."+this._prefixClass+"childitem")).removeClass("e-m-dark e-m-light e-default").addClass("e-m-"+this.model.theme);var t=this.element.find("."+this._prefixClass+"childitem ."+this._prefixClass+"header"),i=this;t.each(function(n,t){$(t).ejmHeader("model.theme",i.model.theme)})}},_setDataSource:function(n,t){this._hasDataSource()&&n&&(t&&(this.model.fieldSettings=t),this._refresh())},_hasDataSource:function(){return this.dataSource()&&this.dataSource().length},_getElement:function(n){return n?this.element.find("#"+n):this._lbEle},_isEnable:function(n){return n.hasClass(this._prefixClass+"state-disabled")?!1:!0},_refresh:function(){this._destroy();this.element.addClass(this._rootCSS);this._load()},_clearElement:function(){this.element.removeAttr("class").removeAttr("style");this.element.empty().html(this._orgEle.html())},_destroy:function(){this._wireEvents(!0);this._clearElement()},loadAjaxContent:function(n,t){var i=this,r,u;this._isFromAjax=!0;this._renderChild(ej.getAttrVal(this._currentItem,"data-childid","page_"+parseInt(Math.random().toFixed(3)*1e3)));(!$.support.pushstate||ej.isWindowsWebView())&&i._prefixClass=="e-m-"&&(n=App.route.makeUrlAbsolute(n));r={content:i._div,item:i._currentItem,index:$(i._currentItem).index(),text:$(i._currentItem).text(),url:i.model.ajaxSettings.url?i.model.ajaxSettings.url:n};this.model.ajaxBeforeLoad&&this._trigger("ajaxBeforeLoad",r);u={cache:i.model.ajaxSettings.cache,async:i.model.ajaxSettings.async,type:i.model.ajaxSettings.type,contentType:i.model.ajaxSettings.contentType,url:ej.isWindowsWebView()?n:i.model.ajaxSettings.url?i.model.ajaxSettings.url:n,dataType:i.model.ajaxSettings.dataType,data:i.model.ajaxSettings.data,successHandler:function(r){var u=ej.buildTag("div."+this._prefixClass+"content",/<\/?body[^>]*>/gmi.test(r)?r.split(/<\/?body[^>]*>/gmi)[1]:r||""),f;i._div.append(i._container.append(u));i._prefixClass=="e-m-"&&i._div.attr("data-ajaxurl",App.route.convertToRelativeUrl(n));i._updateContent(i._currentItem,t);i._prefixClass=="e-m-"&&(App.angularAppName||ej.angular.defaultAppName)&&ej.angular.compile(u);f={content:i._div,item:i._currentItem,index:$(i._currentItem).index(),text:$(i._currentItem).text(),url:i.model.ajaxSettings.url?i.model.ajaxSettings.url:n};i.model.ajaxSuccess&&i._trigger("ajaxSuccess",f)},errorHandler:function(t,r,u){var f={xhr:t,textStatus:r,errorThrown:u,item:i._currentItem,index:$(i._currentItem).index(),text:$(i._currentItem).text(),url:i.model.ajaxSettings.url?i.model.ajaxSettings.url:n};i.model.ajaxError&&i._trigger("ajaxError",f)},completeHandler:function(){var t={content:i._div,item:i._currentItem,index:$(i._currentItem).index(),text:$(i._currentItem).text(),url:i.model.ajaxSettings.url?i.model.ajaxSettings.url:n};i.model.ajaxComplete&&i._trigger("ajaxComplete",t)}};ej.sendAjaxRequest(u)},selectItem:function(n,t){n>=0&&this._isEnable($(this._getElement(t).find("li."+this._prefixClass+"list")[n]))&&(this.setActive(n,t),this._currentItem=$(this._getElement(t).find("li."+this._prefixClass+"list")[n]),this._prevItem=this._currentItem,this._onTouchEndHandler())},setActive:function(n,t){n>=0&&(element=this._getElement(t),this._isEnable($(element.find("li."+this._prefixClass+"list")[n]))&&ej.getBooleanVal($(element.find("li."+this._prefixClass+"list")[n]),"data-persistSelection",this.model.persistSelection)&&(element.find("li."+this._prefixClass+"list."+this._prefixClass+"state-active").removeClass(this._prefixClass+"state-active").addClass(this._prefixClass+"state-default"),this._currentItem=$(element.find("li."+this._prefixClass+"list")[n]),this._prevItem=this._currentItem,this._currentItem.removeClass(this._prefixClass+"state-default").addClass(this._prefixClass+"state-active")))},deActive:function(n,t){n>=0&&this._isEnable($(this._getElement(t).find("li."+this._prefixClass+"list")[n]))&&$(this._getElement(t).find("li."+this._prefixClass+"list")[n]).removeClass(this._prefixClass+"state-active").addClass(this._prefixClass+"state-default")},enableItem:function(n,t){n>=0&&$(this._getElement(t).find("li."+this._prefixClass+"list")[n]).removeClass(this._prefixClass+"state-disabled")},disableItem:function(n,t){n>=0&&$(this._getElement(t).find("li."+this._prefixClass+"list")[n]).addClass(this._prefixClass+"state-disabled")},removeCheckMark:function(n,t){element=this._getElement(t);n>=0&&this._isEnable($(element.find("li."+this._prefixClass+"list")[n]))?$(element.find("li."+this._prefixClass+"list")[n]).find("."+this._prefixClass+"lv-checkdiv").remove():element.find("."+this._prefixClass+"lv-checkdiv").remove()},checkItem:function(n,t){n>=0&&this._isEnable($(this._getElement(t).find("li."+this._prefixClass+"list")[n]))&&this._setCheckboxValue($(this._getElement(t).find("."+this._prefixClass+"lv-check")[n]),!0)},unCheckItem:function(n,t){n>=0&&this._isEnable($(this._getElement(t).find("li."+this._prefixClass+"list")[n]))&&this._setCheckboxValue($(this._getElement(t).find("."+this._prefixClass+"lv-check")[n]),!1)},checkAllItem:function(n){var t=this;this._getElement(n).find("."+this._prefixClass+"lv-check").each(function(i,r){t._isEnable($(t._getElement(n).find("li."+t._prefixClass+"list")[i]))&&t._setCheckboxValue($(r),!0)})},unCheckAllItem:function(n){var t=this;this._getElement(n).find("."+this._prefixClass+"lv-check").each(function(i,r){t._isEnable($(t._getElement(n).find("li."+t._prefixClass+"list")[i]))&&t._setCheckboxValue($(r),!1)})},getActiveItem:function(n){return this._getElement(n).find("li."+this._prefixClass+"list."+this._prefixClass+"state-active")},getActiveItemText:function(n){return this._getElement(n).find("li."+this._prefixClass+"list."+this._prefixClass+"state-active").text()},getItemText:function(n,t){if(n>=0)return $(this._getElement(t).find("li."+this._prefixClass+"list")[n]).text()},getCheckedItems:function(n){return n!=undefined?this._getElement(n).find("input."+this._prefixClass+"lv-check:checked").closest("li."+this._prefixClass+"list"):this.element.find("input."+this._prefixClass+"lv-check:checked").closest("li."+this._prefixClass+"list")},getCheckedItemsText:function(n){return $(this.getCheckedItems(n)).map(function(){return $(this).text()}).get()},hasChild:function(n,t){if(n>=0)return this.element.find("#"+$(this._getElement(t).find("li."+this._prefixClass+"list")[n]).attr("data-childid")).length?!0:!1},isChecked:function(n,t){if(n>=0)return $(this._getElement(t).find("li."+this._prefixClass+"list")[n]).find("input."+this._prefixClass+"lv-check").prop("checked")},showItem:function(n,t){n>=0&&$(this._getElement(t).find("li."+this._prefixClass+"list")[n]).css("visibility","")},hideItem:function(n,t){n>=0&&$(this._getElement(t).find("li."+this._prefixClass+"list")[n]).css("visibility","hidden")},show:function(n){this._getElement(n).css("visibility","")},hide:function(n){this._getElement(n).css("visibility","hidden")},addItem:function(n,t,i){var r,u,f;t>=0?this._hasDataSource()?(this.model.dataSource.splice(t,0,this._itemsObjectCollection($(n),null,null,i)),r=this.model.dataSource):(this.model.items.splice(t,0,this._itemsObjectCollection($(n),null,null,i)),r=this.model.items):this._orgEle.children().append(n);u=this.model.enableGroupList?$(this.element.find("ul[data-ej-grouplisttitle= "+i+"]")):$(this.element.find("ul:visible"));f=$(this.jsRender).render(r[t]);ej.widget.init($(f).insertBefore(u.children()[t]));this._processing(u);this._liEl=this.element.find("li."+this._prefixClass+"list");this._wireEvents()},_processing:function(n){n.find("li."+this._prefixClass+"lastitem").removeClass(this._prefixClass+"lastitem");n.find("li:last").addClass(this._prefixClass+"lastitem");eLi=n.find("li."+this._prefixClass+"list");eLi.removeEleEmptyAttrs();eLi.find("."+this._prefixClass+"list-anchor").removeEleEmptyAttrs();n.find("."+this._prefixClass+"lv-check").parent().addClass(this._prefixClass+"lv-checkdiv");n.find("."+this._prefixClass+"lv-check").closest("li."+this._prefixClass+"list").addClass(this._prefixClass+"list-check");n.find("."+this._prefixClass+"lv-input").closest("."+this._prefixClass+"lv-filter").addClass(this._prefixClass+"lv-inputdiv")},removeItem:function(n,t){if(n>=0){element=this._getElement(t);var i=$(element.find("li."+this._prefixClass+"list")[n]).attr("data-childid");this.element.find($("#"+i).length)&&this.element.find($("#"+i)).remove();$(element.find("li."+this._prefixClass+"list")[n]).remove()}},clear:function(){this.element.empty().html();this._liEl=this.element.find("li."+this._prefixClass+"list")},getItemsCount:function(n){return this._getElement(n).find("li."+this._prefixClass+"list").length},append:function(n){var t,r,i,u,f;if(n.length){if(this.model.dataSource=this.model.dataSource.concat(n),this.model.enableGroupList){i=ej.DataManager(n).executeLocal(ej.Query().from(n).group("groupID"));for(u in i)t=this.element.find("ul[data-ej-grouplisttitle= "+i[u].key+"]"),r=this._rendering(i[u].items,t),this._processing(t)}else t=$(this.element.find("ul:visible")),r=this._rendering(n,t),this._processing(t);this._liEl=this.element.find("li."+this._prefixClass+"list");this._wireEvents(!1,r);this._prefixClass=="e-m-"&&(f=this.element.find(".e-m-scroll"),this._scrollInst=f.ejmScrollPanel("instance"),this._scrollInst.refresh())}this._setHeightWidth()},getActiveItemData:function(){if(this.getActiveItem().attr("data-id"))return this._generateData(this.dataSource().length?typeof this.dataSource()=="string"?eval(this.dataSource()):this.dataSource():this.model.items,this.getActiveItem().attr("data-id"))}})})(jQuery,Syncfusion),function($,ej){ej.widget("ejmListView","ej.mobile.ListView",{_setFirst:!0,_rootCSS:"e-m-lv",_prefixClass:"e-m-",defaults:{enablePullToRefresh:!1,refreshThreshold:250,pullToRefreshSettings:{pullText:"pull to refresh",releaseText:"release to refresh",refreshText:"refreshing...",errorText:"Failed to update content. Please try after sometime",appendData:!0,appendPosition:"bottom"},showScrollbars:!0,showHeaderBackButton:!1,autoAdjustScrollHeight:!0,autoAdjustHeight:!1,headerBackButtonTap:null,adjustFixedPosition:!0,enableNativeScrolling:ej.isAndroid()||ej.isIOS()?!1:ej.isDevice()?!0:!1,hideHeaderForUnsupportedDevice:!1,fieldSettings:{navigateUrl:"navigateUrl",href:"href",enableAjax:"enableAjax",preventSelection:"preventSelection",persistSelection:"persistSelection",text:"text",enableCheckMark:"enableCheckMark",checked:"checked",primaryKey:"primaryKey",parentPrimaryKey:"parentPrimaryKey",imageClass:"imageClass",imageUrl:"imageUrl",childHeaderTitle:"childHeaderTitle",childId:"childId",childHeaderBackButtonText:"childHeaderBackButtonText",renderTemplate:"renderTemplate",templateId:"templateId",touchStart:"touchStart",touchEnd:"touchEnd",attributes:"attributes",groupID:"groupID",id:"id"},ios7:{inline:!1},windows:{preventSkew:!1,renderDefault:!1,enableHeaderCustomText:!1},allowScrolling:!0,renderMode:"auto",theme:"auto",touchStart:null,touchEnd:null,refreshBegin:null,refreshSuccess:null,refreshError:null,refreshComplete:null,transition:ej.isAndroid()?"pop":ej.isWindows()&&ej.isMobile()?"slide":ej.isWindows()&&!ej.isMobile()?"slide":"slide",checkDOMChanges:!1,items:[]},dataTypes:{dataSource:"data",fieldSettings:"data",renderMode:"enum",theme:"enum",enablePersistence:"boolean"},observables:["selectedItemIndex","dataSource"],selectedItemIndex:ej.util.valueFunction("selectedItemIndex"),dataSource:ej.util.valueFunction("dataSource"),_tags:[{tag:"items",attr:["navigateUrl","href","text","checked","primaryKey","parentPrimaryKey","imageClass","imageUrl","childHeaderTitle","childId","childHeaderBackButtonText","touchStart","touchEnd","attributes","renderTemplate","templateId","enableAjax","preventSelection","persistSelection","enableCheckMark","attributes",],content:"template"}],_init:function(){App.activePage||App.createAppView();this._preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/};this._tempContent=ej.getCurrentPage();this._storedContent=[];this._storedTemplate=[];this.model.enablePullToRefresh&&(this._isRefreshing=!1);ej.setRenderMode(this);ej.setTheme(this);this.model.renderMode=="windows"&&ej.isMobile()&&this.model.windows.renderDefault&&(this.model.theme="default");this._touchStart=this.model.touchStart;this._touchEnd=this.model.touchEnd;this._oldEle=this.element.clone();this._oldEle.find("ul").length&&(this.model.items=[]);this._indexVal=0;this._updateModelItems();this._load();var n=this.element.closest(".e-m-nb.e-js");this._isInsideNavigation=n.length;this._isInsideNavigation&&(this._nearestND=n.ejmNavigationDrawer("instance"))},_itemsObjectCollection:function(n,t,i,r){var e,f,u;return ej.getAttrVal(n,"data-ej-rendertemplate")&&(e=this._tempContent.find("#"+ej.getAttrVal(n,"data-ej-templateid")),e.length?(f=e.remove(),this._storedTemplate[this._indexVal]=f[0].nodeName&&f[0].nodeName.toLowerCase()=="script"?ej.getClearString(f[0].innerHTML):f[0].outerHTML):this._storedTemplate[this._indexVal]||($(n)[0].innerHTML?this._storedTemplate[this._indexVal]=$(n)[0].innerHTML:this._storedTemplate[this._indexVal]&&this._tempContent.find("#"+template).length&&(f=this._tempContent.find("#"+template).remove(),f=f[0].nodeName&&f[0].nodeName.toLowerCase()=="script"?ej.getClearString(f[0].innerHTML):f[0].outerHTML,this._storedTemplate=ej._pushValue(this._storedTemplate,f,this._indexVal))),this._indexVal++),u={},u.groupID=r?r:"",u.text=ej.getAttrVal(n,"data-ej-text")?ej.getAttrVal(n,"data-ej-text"):this._getText(n),u.navigateUrl=ej.getAttrVal(n,"data-ej-navigateurl"),u.href=ej.getAttrVal(n,"data-ej-href"),u.checked=ej.getAttrVal(n,"data-ej-checked"),u.primaryKey=ej.getAttrVal(n,"data-ej-primarykey",t),u.parentPrimaryKey=ej.getAttrVal(n,"data-ej-parentprimarykey",i),u.imageClass=ej.getAttrVal(n,"data-ej-imageclass"),u.imageUrl=ej.getAttrVal(n,"data-ej-imageurl"),u.childHeaderTitle=ej.getAttrVal(n,"data-ej-childheadertitle"),u.childId=u.href?ej.getAttrVal(n,"data-ej-childid")?ej.getAttrVal(n,"data-ej-childid"):"page_"+parseInt(Math.random().toFixed(3)*1e3):"",u.childHeaderBackButtonText=ej.getAttrVal(n,"data-ej-childheaderbackbuttontext"),u.touchStart=ej.getAttrVal(n,"data-ej-touchstart"),u.touchEnd=ej.getAttrVal(n,"data-ej-touchend"),u.attributes=n.attrNotStartsWith(/^data-ej-/),u.renderTemplate=ej.getAttrVal(n,"data-ej-rendertemplate")?ej.getAttrVal(n,"data-ej-rendertemplate"):this.model.renderTemplate,u.templateId=this._storedTemplate[this._indexVal-1],u.enableAjax=ej.getAttrVal(n,"data-ej-enableajax"),u.enableCheckMark=ej.getAttrVal(n,"data-ej-enablecheckmark"),u},_renderLists:function(){var n=ej.buildTag("li","",{},{"class":this._prefixClass+"user-select "+this._prefixClass+"list "+this._prefixClass+"state-default{{if "+this.model.fieldSettings.primaryKey+" || "+this.model.fieldSettings.enableAjax+" || "+this.model.enableAjax+"}} "+this._prefixClass+"arrow{{/if}}{{if "+this.model.fieldSettings.imageClass+"}} "+this._prefixClass+"margin{{else}}{{if "+this.model.fieldSettings.imageUrl+"}} "+this._prefixClass+"margin{{/if}}{{/if}}","data-childid":"{{if "+this.model.fieldSettings.primaryKey+"}}child{{>"+this.model.fieldSettings.primaryKey+"}}{{else "+this.model.fieldSettings.childId+"}}{{>"+this.model.fieldSettings.childId+"}}{{else}}{{/if}}","data-childheadertitle":"{{>"+this.model.fieldSettings.childHeaderTitle+"}}","data-childheaderbackbuttontext":"{{>"+this.model.fieldSettings.childHeaderBackButtonText+"}}","data-preventSelection":"{{>"+this.model.fieldSettings.preventSelection+"}}","data-persistSelection":"{{>"+this.model.fieldSettings.persistSelection+"}}","data-navigateUrl":"{{>"+this.model.fieldSettings.navigateUrl+"}}","data-loadajax":"{{>"+this.model.fieldSettings.enableAjax+"}}","data-href":"{{>"+this.model.fieldSettings.href+"}}{{:~_checkAjaxUrls()}}","data-checked":"{{>"+this.model.fieldSettings.checked+"}}","data-templateid":"{{>"+this.model.fieldSettings.renderTemplate+"}}","data-touchstart":"{{>"+this.model.fieldSettings.touchStart+"}}","data-touchend":"{{>"+this.model.fieldSettings.touchEnd+"}}","data-id":"{{>"+this.model.fieldSettings.id+"}}"}),i;if(this.model.renderTemplate)this._hasDataSource()&&this._template&&(n[0].innerHTML=this._template);else{var r=ej.buildTag("a","",{},{"class":this._prefixClass+"list-anchor "+this._prefixClass+"remove-shadow{{if "+this.model.fieldSettings.imageClass+"}} "+this._prefixClass+"margin{{else}}{{if "+this.model.fieldSettings.imageUrl+"}} "+this._prefixClass+"margin{{/if}}{{/if}}{{if "+this.model.fieldSettings.primaryKey+" || "+this.model.fieldSettings.enableAjax+" || "+this.model.enableAjax+"}} "+this._prefixClass+"fontimage{{/if}}",href:ej.browserInfo().name=="msie"&&ej.browserInfo().version<9?"":"{{if "+this.model.fieldSettings.navigateUrl+" == '' || "+this.model.fieldSettings.navigateUrl+" == undefined }}{{else}}{{:"+this.model.fieldSettings.navigateUrl+"}}{{/if}}"}),u=ej.buildTag("span","{{>"+this.model.fieldSettings.text+"}}",{},{"class":this._prefixClass+"list-text "+this._prefixClass+"rel "+this._prefixClass+"user-select{{if "+this.model.fieldSettings.imageClass+"}} "+this._prefixClass+"text{{else}}{{if "+this.model.fieldSettings.imageUrl+"}} "+this._prefixClass+"text{{/if}}{{/if}}"}),f=ej.buildTag("div","",{},{"class":this._prefixClass+"list-img "+this._prefixClass+"rel "+this._prefixClass+"user-select {{>"+this.model.fieldSettings.imageClass+"}}"}),t=this._createCheckBox();r[0].innerHTML=this.model.renderMode=="windows"&&ej.isMobile()?"{{if !"+this.model.fieldSettings.primaryKey+"}}{{if "+this.model.fieldSettings.enableAjax+" == undefined || "+this.model.fieldSettings.enableAjax+".toString() == 'false'}}{{if !"+this.model.fieldSettings.navigateUrl+"}}{{if "+this.model.fieldSettings.enableCheckMark+" !== undefined}}{{if "+this.model.fieldSettings.enableCheckMark+".toString() == 'false' ? "+this.model.fieldSettings.enableCheckMark+" : "+this.model.enableCheckMark+"}}"+t[0].outerHTML+"{{/if}}{{else}}{{if "+this.model.enableCheckMark+"}}"+t[0].outerHTML+"{{/if}}{{/if}}{{/if}}{{/if}}{{/if}}{{if "+this.model.fieldSettings.imageClass+"}}"+f[0].outerHTML+"{{else}}{{if "+this.model.fieldSettings.imageUrl+"}}{{:~_checkImgUrls()}}{{/if}}{{/if}}"+u[0].outerHTML:"{{if "+this.model.fieldSettings.imageClass+"}}"+f[0].outerHTML+"{{else}}{{if "+this.model.fieldSettings.imageUrl+"}}{{:~_checkImgUrls()}}{{/if}}{{/if}}"+u[0].outerHTML+"{{if !"+this.model.fieldSettings.primaryKey+"}}{{if "+this.model.fieldSettings.enableAjax+" == undefined || "+this.model.fieldSettings.enableAjax+".toString() == 'false'}}{{if !"+this.model.fieldSettings.navigateUrl+"}}{{if "+this.model.fieldSettings.enableCheckMark+" !== undefined}}{{if "+this.model.fieldSettings.enableCheckMark+".toString() == 'false' ? "+this.model.fieldSettings.enableCheckMark+" : "+this.model.enableCheckMark+"}}"+t[0].outerHTML+"{{/if}}{{else}}{{if "+this.model.enableCheckMark+"}}"+t[0].outerHTML+"{{/if}}{{/if}}{{/if}}{{/if}}{{/if}}";n[0].innerHTML="{{if "+this.model.fieldSettings.renderTemplate+" == undefined || "+this.model.fieldSettings.renderTemplate+".toString() == 'false'}}"+r[0].outerHTML+"{{else}}{{:templateId}}{{/if}}"}return this.model.renderMode=="ios7"&&(i=ej.buildTag("div."+this._prefixClass+"list-div"),i[0].innerHTML=n[0].innerHTML,n.empty().append(i)),n},_renderScrollPanel:function(n,t,i,r){this._scrollWrapper=ej.buildTag("div","",{},{"data-role":"ejmscrollpanel","data-ej-rendermode":this.model.renderMode,"data-ej-target":i,id:t,"data-ej-theme":this.model.theme,"data-ej-targetwidth":r?null:this.model.width,"data-ej-targetheight":this.model.height,"data-ej-setautoheight":this.model.autoAdjustScrollHeight,"data-ej-adjustfixedposition":this.model.adjustFixedPosition,"data-ej-enablenativescrolling":this.model.enableNativeScrolling,"data-ej-windows-renderdefault":this.model.windows.renderDefault,"data-ej-showscrollbars":this.model.showScrollbars,"data-ej-checkdomchanges":this.model.checkDOMChanges,"data-ej-enablebounce":ej.isAndroid()?this.model.enablePullToRefresh?!0:!1:!0});n.append(this._scrollWrapper)},_updateContent:function(n,t){var s=this,i=$(n),r=i.attr("data-childid"),u,e,f,o;id=this._isInsideNavigation&&n.attr("data-href")?ej.getCurrentPage().find($("#"+r)):this.element.find("#"+r);id.length&&(u=this.element.find("#"+r+"_header"),e=this.element.find("#"+r+"_scroll"),this.model.enableFiltering&&this._initializeFiltering($(id)),f=i.attr("data-childheadertitle")?i.attr("data-childheadertitle"):n.text(),u.hasClass("e-m-header")&&(o=u.ejmHeader("instance"),o.setModel({title:f,leftButtonCaption:ej.isWindows()?"":t})),id.attr("data-hdr-title",f).attr("data-hdr-bckbtn",t),this._isInsideNavigation&&n.attr("data-href")&&this._nearestND.model.contentId?($(ej.getCurrentPage().find("#"+this._nearestND.model.contentId)).find(".e-m-lv.subpage:visible").hide(),$(ej.getCurrentPage().find("#"+this._nearestND.model.contentId)).append(id.show()),ej.widget.init(id)):(App.transferPage(i.closest(".subpage"),id,{isFromAjax:this._isFromAjax,transition:this.model.transition,parentSubPage:i.closest(".subpage").hasClass("e-m-childitem")?!1:!0}),this._transitionDelegate=$.proxy(this._transitionHandler,{proxy:this,idEle:id,scrollEle:e,delegate:this._transitionDelegate}),id.bind(ej.transitionEndEvent(),this._transitionDelegate)))},_updateDataSource:function(){var proxy=this,content=this.model.dataSource;this.model.dataSource=this._dataUrl;this.model.refreshBegin&&this._trigger("refreshBegin");this._isRefreshing=!0;eval(this.model.dataSource).executeQuery(eval(this.model.query)).done(function(n){proxy.model.refreshSuccess&&proxy._trigger("refreshSuccess",n.result);proxy._refreshContainer.removeClass("refreshing");proxy.model.pullToRefreshSettings.appendData?proxy.append(n.result):(proxy._clearElement(),ul=ej.buildTag("ul"),proxy._items=n.result,proxy._renderControl());proxy._refreshContainer.removeClass("refreshing");proxy._ptrImgContainer.addClass(proxy._prefixClass+"pull").removeClass(proxy._prefixClass+"loading");proxy._textContainer.html(proxy.model.pullToRefreshSettings.pullText);proxy.model.refreshComplete&&proxy._trigger("refreshComplete");this._isRefreshing=!1}).fail(function(){proxy._ptrImgContainer.removeClass(proxy._prefixClass+"loading");proxy._textContainer.html(proxy.model.pullToRefreshSettings.errorText);proxy.model.refreshError&&proxy._trigger("refreshError");setTimeout(function(){proxy._refreshContainer.removeClass("refreshing");proxy._ptrImgContainer.addClass(proxy._prefixClass+"pull").removeClass(proxy._prefixClass+"loading");proxy._textContainer.empty().html(proxy.model.pullToRefreshSettings.pullText)},1e3)});proxy.model.dataSource=content;this._isRefreshing=!1;return},_rendering:function(n,t){var r=this._filterParentChild(n),f=$(this.jsRender).render(r.parent),u;if(this.model.pullToRefreshSettings.appendPosition=="bottom"?ej.widget.init(t.append(f)):ej.widget.init(t.prepend(f)),r.child.length)for(i=0;i<r.child.length;i++)u=this.element.find("div#child"+r.child[i].key),u.length?(this.model.pullToRefreshSettings.appendPosition=="bottom"?ej.widget.init(u.find("ul").append($(this.jsRender).render(r.child[i].items))):ej.widget.init(u.find("ul").prepend($(this.jsRender).render(r.child[i].items))),this._processing(u.find("ul"))):(this._childRendering([r.child[i]]),t=$(this.element.find("div#child"+r.child[i].key).find("ul")),this._processing(t));return $(f)},_transitionHandler:function(){this._setHeightWidth();this.model.allowScrolling&&this.scrollEle.ejmScrollPanel("refresh");this.idEle.unbind(ej.transitionEndEvent(),this.delegate)},_renderHeader:function(n,t,i,r){return ej.buildTag("div","",{},{"data-role":"ejmheader","data-ej-showLeftButton":t,"data-ej-leftbuttoncaption":r?r:"Back","data-ej-title":i,"data-ej-leftbuttontap":this.model.headerBackButtonTap,"data-ej-righttbuttontap":this.model.headerBackButtonTap,"data-ej-rendermode":this.model.renderMode,"data-ej-theme":this.model.theme,"data-ej-position":"normal",id:n+"_header","data-ej-hideforunsupporteddevice":this.model.hideHeaderForUnsupportedDevice,"data-ej-windows-renderdefault":this.model.windows.renderDefault,"data-ej-windows-enablecustomtext":this.model.windows.enableHeaderCustomText})},_returnData:function(){var checkedItem=this._currentItem.closest("ul.e-m-list-hdr").find("input.e-m-lv-check:checked").closest("li"),elementId=ej.getAttrVal(this._currentItem,"data-id",this._currentItem.text()),items=this.dataSource().length?typeof this.dataSource()=="string"?eval(this.dataSource()):this.dataSource():this.model.items;return{hasChild:this.element.find("#"+this._currentItem.attr("data-childid")).length?!0:!1,item:this._currentItem,text:this._currentItem.find(".e-m-list-text").text(),index:this._currentItem.index(),isChecked:this._currentItem.find("input.e-m-lv-check").length?this._currentItem.find("input.e-m-lv-check").prop("checked"):!1,checkedItems:checkedItem.length?checkedItem:null,checkedItemsText:checkedItem.length?$(checkedItem).map(function(){return $(this).text()}).get():null,itemData:this._generateData(items,elementId)}},_triggerStartEvent:function(n){this.model.touchStart=ej.getAttrVal(this._currentItem,"data-touchstart",this._touchStart);this.model.touchStart&&this._trigger("touchStart",n)},_triggerEndEvent:function(n){this.model.touchEnd=ej.getAttrVal(this._currentItem,"data-touchend",this._touchEnd);this.selectedItemIndex(this._currentItem.index());this.model.touchEnd&&this._trigger("touchEnd",n)},_createFilterDiv:function(){return ej.buildTag("div.e-m-lv-filter",ej.buildTag("input.e-m-lv-input","",{},{"data-role":"ejmtextbox","data-ej-rendermode":this.model.renderMode,"data-ej-theme":this.model.theme,"data-ej-windows-renderdefault":this.model.windows.renderDefault}))},_emptyFilterTextValue:function(n){n.find(".e-m-lv-input").ejmTextBox("model.value","")},_createListDiv:function(n){this._div=ej.buildTag("div#"+n+"."+this._rootCSS+" e-m-"+this.model.renderMode+" e-m-"+this.model.theme+" subpage e-m-childitem e-m-ajaxchild",this.model.showHeader&&this._isInsideNavigation&&!this._nearestND.model.contentId?this._renderHeader(n,!0,this._currentItem.text()):"")},_createCheckBox:function(){return ej.buildTag("input.e-m-lv-check","",{},{type:"checkbox","data-role":"ejmcheckbox","data-ej-preventdefault":!0,"data-ej-theme":this.model.theme,"data-ej-rendermode":this.model.renderMode,"data-ej-checked":"{{:~_checkIsChecked()}}","data-ej-windows-renderdefault":this.model.windows.renderDefault})},_toggleCheckboxValue:function(n){n.ejmCheckBox("model.checked",!n.prop("checked"))},_setCheckboxValue:function(n,t){n.ejmCheckBox({checked:t})},_convertToRelativeUrl:function(n){return App.route.convertToRelativeUrl(n)}});$.extend(!0,ej.mobile.ListView.prototype,ej.ListViewBase.prototype)}(jQuery,Syncfusion)});