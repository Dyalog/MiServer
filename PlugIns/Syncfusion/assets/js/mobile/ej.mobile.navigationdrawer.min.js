/*!
*  filename: ej.mobile.navigationdrawer.min.js
*  version : 13.2.0.29
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./ej.mobile.core.min","./ej.mobile.application.min","./../common/ej.unobtrusive.min","./../common/ej.touch.min","./ej.mobile.listview.min","./ej.mobile.scrollpanel.min"],n):n()})(function(){(function(n,t,i){t.widget("ejNavigationDrawerBase","ej.NavigationDrawerBase",{defaults:{contentId:null,cssClass:"",direction:"left",targetId:null,position:"normal",enableListView:!1,listViewSettings:{},type:"overlay",width:"auto",swipe:null,open:null,beforeClose:null,items:[]},dataTypes:{direction:"enum",type:"enum"},_renderControl:function(){this.model.position.toLowerCase()=="fixed"&&this.element.appendTo(this._nbHome);this.model.isPaneOpen||(this._elementOverlay=t.buildTag("div#"+this._id+"_Overlay",{},{},{"class":this._rootCSS+" "+this._prefixClass+"nb-layout "+this._prefixClass+"nb-overlay"}),this._elementShadow=t.buildTag("div#"+this._id+"_shadow",{},{},{"class":this._rootCSS+" "+this._prefixClass+"nb-shadow "+this._prefixClass+"nb-type-"+(this.model.type=="slide"?"slide":"overlay")}),this._nbHome.append(this._elementOverlay),this._elementOverlay.hide(),this.element.hide());this.element.addClass(this._prefixClass+"user-select "+this.model.cssClass);this.element.addClass(this._prefixClass+"nb-layout "+(this.model.direction.toLowerCase()=="left"?this._prefixClass+"nb-left":this._prefixClass+"nb-right"));this.element.addClass(this._prefixClass+"nb-type-"+(this.model.type=="slide"?"slide":"overlay"));this.element.prepend(this._elementShadow);this._maxIndex=t.getMaxZindex();this._parentWidth=this._nbHome.width();this._setWidth();this._setLayout()},_transform:function(n,t,i){var r="-"+this._browser+"-transform",u="translateX("+n+"px) translateZ(0px)",f="-"+this._browser+"-transition-property",e="transform",o="-"+this._browser+"-transition-duration",s=t+"ms";i?(this.element.addClass(""+this._prefixClass+"nb-animate"),this.element.css(f,e).css(o,s).css(r,u)):(this._nbHome.addClass(this._rootCSS+" "+this._prefixClass+"nb-animate"),this._nbHome.css(f,e).css(o,s).css(r,u))},_show:function(){Number(this.element.css("left").match(/\d/g)[0]<this.element.width())||this._setLayout();n("."+this._prefixClass+"nb-opened").length&&n("."+this._prefixClass+"nb-opened")[0]!=this.element[0]&&(this._prefixClass=="e-m-"?n("."+this._prefixClass+"nb-opened").ejmNavigationDrawer("close"):n("."+this._prefixClass+"nb-opened").ejNavigationDrawer("close"));this.element.show();t.listenTouchEvent(this._isTransitionElement()?this.element:this._nbHome,t.transitionEndEvent(),this._transitionOpenHandler,!1,this);this.element.addClass(""+this._prefixClass+"nb-opened");this._elementOverlay.css("z-index",this._maxIndex*2);this.element.css("z-index",this._maxIndex*3);t.browserInfo().name=="msie"&&t.browserInfo().version<=9?n(this.element).show().animate({left:this.model.direction=="left"?"0px":this._parentWidth-n(this.element).width()},400,n.proxy(this._transitionOpenEnd,this)):this.model.direction=="left"?this._transform(n(this.element).width(),400,this._isTransitionElement()):this._transform(-n(this.element).width(),400,this._isTransitionElement());this._data={element:this.element};this.model.enableListView?n.extend(this._data,{listview:this._lb}):null;this._elementOverlay.show();this._trigger("open",this._data)},_hide:function(){this._elementOverlay.hide();t.listenTouchEvent(this._isTransitionElement()?this.element:this._nbHome,t.transitionEndEvent(),this._transitionCloseHandler,!1,this);this.element.removeClass(""+this._prefixClass+"nb-opened");t.browserInfo().name=="msie"&&t.browserInfo().version<=9?n(this.element).animate({left:this.model.direction=="left"?-n(this.element).width():this._nbHome.width()},400,n.proxy(this._transitionCloseEnd,this)):this._transform(0,400,this._isTransitionElement())},_clearHomeElement:function(){var n="";this._browser!=""&&(n="-"+this._browser+"-");var t=n+"transform",i=n+"transition-property",r=n+"transition-duration";this._nbHome.css(t,"").css(r,"").css(i,"");this._nbHome.removeClass(this._rootCSS+" "+this._prefixClass+"nb-animate")},_isOpened:function(){return this.element.hasClass(""+this._prefixClass+"nb-opened")},_isWeb:function(){return this._prefixClass=="e-"?!0:!1},_isOtherOpened:function(){return n("."+this._prefixClass+"nb-opened").length},_isTransitionElement:function(){return this.model.type=="overlay"?!0:!1},_isOrientationSupported:function(){return"orientation"in window&&"onorientationchange"in window},_setWidth:function(){n(this._nbHome).width()<500?this.element.css("maxwidth","80%"):this.element.css("maxwidth","40%");this.model.width!="auto"&&Number(this.model.width)!=0&&this.element.width(Number(this.model.width));this.element.height("100%")},_setLayout:function(){this.element.show();this.element.is(":visible")&&(this.model.position=="fixed"&&this.element.css("min-height",window.innerHeight),this.model.direction.toLowerCase()=="left"?this.model.isPaneOpen?(this.element.css("left",this.model.position=="fixed"?-this.element.width():0),this._nbHome.css({width:this._nbHome.parent().width()-this.element.width(),left:this.element.width(),position:"absolute"})):this.element.css({left:-this.element.width()}):this.model.isPaneOpen?(this._nbHome.css({width:this._nbHome.parent().width()-this.element.width()}),this.element.css("left",this._nbHome.width())):this.element.css({left:this.model.position.toLowerCase()=="normal"?this.element.width():n(this._nbHome).width()}));this._isOpened()||this.model.isPaneOpen||this.element.hide()},_destroy:function(){this._wireEvents(!0);this._elementOverlay&&this._elementOverlay.remove();this._elementShadow&&this._elementShadow.remove();this._elementWrapper&&this.element.unwrap();this.element.removeAttr("style");this.element.css("left","");this._destroyEJMPlugin()},_refresh:function(){this._destroy();this._load();this._renderControl();this._renderEJMControls();this._createDelegate();this._wireEvents()},_createDelegate:function(){this._swipeStartHandler=n.proxy(this._swipeStart,this);this._swipeEndHandler=n.proxy(this._swipeEnd,this);this._swipeMoveHandler=n.proxy(this._swipeMove,this);this._touchMoveHandler=n.proxy(this._touchMove,this);this._touchEndHandler=n.proxy(this._touchEnd,this);this._transitionOpenHandler=n.proxy(this._transitionOpenEnd,this);this._transitionCloseHandler=n.proxy(this._transitionCloseEnd,this);this._overlayTapHandler=n.proxy(this._elementOverlayTap,this);this._targetButtonTapHandler=n.proxy(this._targetButtonTap,this);this._onOrientationChangeHandler=n.proxy(this._onOrientationChangeEvent,this);this._onResizeEventHandler=n.proxy(this._onResizeEvent,this)},_wireEvents:function(i){var r;(!this.model.isPaneOpen||i)&&(this.model.targetId?(r=t.getCurrentPage?t.getCurrentPage():n("body"),t.listenTouchEvent(r.find("#"+this.model.targetId),this._prefixClass=="e-"?"click":t.endEvent(),this._targetButtonTapHandler,i,this)):t.browserInfo().name=="msie"&&t.browserInfo().version<=8||t.listenTouchEvent(this._nbHome,t.startEvent(),this._swipeStartHandler,i,this),t.listenTouchEvent(this._elementOverlay,t.endEvent(),this._overlayTapHandler,i,this));t.isTouchDevice()&&this._isOrientationSupported()?t.listenTouchEvent(window,"orientationchange",this._onOrientationChangeHandler,i,this):t.listenTouchEvent(window,"resize",this._onResizeEventHandler,i,this)},_transitionCloseEnd:function(){this.element.hide();this._clearHomeElement();t.listenTouchEvent(this._isTransitionElement()?this.element:this._nbHome,t.transitionEndEvent(),this._transitionCloseHandler,!0,this)},_transitionOpenEnd:function(){this.element.show();this._scrollbar&&this._scrollbar.ejmScrollPanel("refresh");this._lbscrollbar&&this._lbscrollbar.ejmScrollPanel("refresh");t.listenTouchEvent(this._isTransitionElement()?this.element:this._nbHome,t.transitionEndEvent(),this._transitionOpenHandler,!0,this)},_targetButtonTap:function(n){n.preventDefault();this._isOtherOpened()||this._show()},_elementOverlayTap:function(r){t.blockDefaultActions(r);this._data={element:this.element};this.model.enableListView?n.extend(this._data,{listview:this._lb}):i;this._trigger("beforeclose",this._data);this._hide()},_swipeStart:function(n){var i=n.changedTouches?n.changedTouches[0]:n;this._startSwipeOffsetX=i.clientX-this._nbHome.offset().left;this._startSwipeOffsetActualX=i.clientX;this._startSwipeOffsetY=i.clientY;this._containerX=this._isTransitionElement()?this.element.offset().left:this._nbHome.offset().left;t.listenTouchEvent(this._nbHome,t.moveEvent(),this._swipeMoveHandler,!1,this);t.listenTouchEvent(this._nbHome,t.endEvent(),this._swipeEndHandler,!1,this)},_swipeMove:function(i){var r=i.changedTouches?i.changedTouches[0]:i,u,f;Number(this.element.css("left").match(/\d/g)[0])<this.element.width()&&this._setLayout();this._swipeDirection=this._startSwipeOffsetActualX&&this._startSwipeOffsetActualX>r.clientX?"right":"left";u=this._isOpened()?this._swipeDirection!=this.model.direction.toLowerCase()?!0:!1:!1;u?this._startSwipeOffsetX&&this._isOpened()&&(this._relativeX=r.clientX-this._startSwipeOffsetActualX,this._relativeY=r.clientY-this._startSwipeOffsetY,f=this.element.width()+this._relativeX-(this.model.type.toLowerCase()=="overlay"?this._nbHome.offset().left:0),n(r.target).hasClass(""+this._prefixClass+"nb-overlay")&&(t.getRenderMode&&t.getRenderMode()=="ios7"?(this._hide(),t.listenTouchEvent(this._nbHome,t.moveEvent(),this._swipeMoveHandler,!0,this)):(this.model.direction=="left"?-this._relativeX<this.element.width():this._relativeX<this.element.width())&&this._transform(this.model.direction=="left"?f:-(this.element.width()-this._relativeX),0,this._isTransitionElement()))):this._swipeDirection!=this.model.direction.toLowerCase()||this._isOtherOpened()?t.listenEvents([this._nbHome,this._nbHome,this._nbHome],[t.moveEvent(),t.endEvent()],[this._touchMoveHandler,this._touchEndHandler],!0,this):t.listenEvents([this._nbHome,this._nbHome,this._nbHome],[t.moveEvent(),t.endEvent()],[this._touchMoveHandler,this._touchEndHandler],!1,this)},_swipeEnd:function(n){var i=n.changedTouches?n.changedTouches[0]:n;t.listenTouchEvent(this._nbHome,t.moveEvent(),this._swipeMoveHandler,!0,this);t.listenTouchEvent(this._nbHome,t.endEvent(),this._swipeEndHandler,!0,this)},_touchMove:function(n){var u=n.changedTouches?n.changedTouches[0]:n,r;t.listenTouchEvent(this._nbHome,t.moveEvent(),this._swipeMoveHandler,!0,this);this._isTransitionElement()&&(this._containerX=0);this._startSwipeOffsetX&&!this._isOpened()&&(this._relativeX=u.clientX-this._startSwipeOffsetX,this._relativeY=u.clientY-this._startSwipeOffsetY,!(this.model.direction=="left"?this._startSwipeOffsetX<50:this._startSwipeOffsetX>this._nbHome.width()-50)||(t.getRenderMode?t.getRenderMode()=="ios7":!1)?t.getRenderMode&&t.getRenderMode()=="ios7"&&Math.abs(this._relativeX)>50&&this._show():(this.element.show(),r=this.model.type.toLowerCase()=="slide"?0:this._nbHome.offset().left,(this.model.direction=="left"?this._relativeX-r<this.element.width():this._relativeX-r>-this.element.width())&&(!this._containerX||this.model.targetHome?this._transform(this._containerX+this._relativeX-r,0,this._isTransitionElement()):i)))},_touchEnd:function(r){var u=r.changedTouches?r.changedTouches[0]:r;t.listenTouchEvent(this._nbHome,t.moveEvent(),this._touchMoveHandler,!0,this);this._isOpened()||(n.isFunction(t.isIOS7)?t.isIOS7():!1)||(this._containerX?this._hide():(this._relativeX=u.clientX-this._startSwipeOffsetX,this._relativeY=u.clientY-this._startSwipeOffsetY,(this.model.direction=="left"?this._startSwipeOffsetX<50:this._startSwipeOffsetX>this._nbHome.width()-50)&&(this._relativeX>30||this._relativeX<-30?this._show():this._hide())));this._data={targetElement:this._nbHome,element:this.element,direction:this._swipeDirection};this.model.enableListView?n.extend(this._data,{listview:this._lb}):i;this._trigger("swipe",this._data);t.listenTouchEvent(this._nbHome,t.endEvent(),this._touchEndHandler,!0,this);t.listenTouchEvent(this._nbHome,"mouseleave",this._touchEndHandler,!0,this)},_onOrientationChangeEvent:function(){var t,n;this.element.show();t=this._isOpened()&&this.element.is(":visible")?"opned":"clsed";(window.orientation==0||window.orientation==180||window.orientation==90)&&window.scrollTo(0,0);this._transform(0,0,this._isTransitionElement());this.element.hide();this.element.removeClass(""+this._prefixClass+"nb-opened");this._parentWidth=this._nbHome.width();this._clearHomeElement();n=this;setTimeout(function(){n._setWidth();n._setLayout();t=="opned"&&n._show()},300)},_onResizeEvent:function(){var t,n;this.element.show();t=this._isOpened()&&this.element.is(":visible")&&!this.model.isPaneOpen?"opned":"clsed";this._transform(0,0,this._isTransitionElement());this.element.hide();this.element.removeClass(""+this._prefixClass+"nb-opened");this._clearHomeElement();this._parentWidth=this._nbHome.width();n=this;this._prefixClass=="e-m-"&&this.model.renderMode=="windows"?setTimeout(function(){n._setWidth();n._setLayout();t=="opned"&&n._show()},300):(n._setWidth(),n._setLayout(),t=="opned"&&n._show())},open:function(){this.model.isPaneOpen||this._show()},close:function(){this.model.isPaneOpen||(this._data={element:this.element},this.model.enableListView?n.extend(this._data,{listview:this._lb}):i,this._trigger("beforeClose",this._data),this._hide())},toggle:function(){this.model.isPaneOpen||(this._isOpened()?this.close():this.open())}})})(jQuery,Syncfusion),function($,ej){ej.widget("ejmNavigationDrawer","ej.mobile.NavigationDrawer",{_setFirst:!0,_rootCSS:"e-m-nb",_prefixClass:"e-m-",defaults:{renderMode:"auto",theme:"auto",allowScrolling:!1,scrollSettings:{},considerSubPage:!0},dataTypes:{renderMode:"enum",theme:"enum"},_init:function(){App.activePage||App.createAppView();this._load();this._renderControl();ej.isIOSWebView()&&this.element.addClass("e-m-webview-navdraw");this._renderEJMControls();this._createDelegate();this._wireEvents()},_load:function(){ej.setRenderMode(this);ej.setTheme(this);this._browser=ej.browser();this._setRenderMode();this.model.position=="normal"&&this.model.type=="slide"&&(this.model.type="overlay");this.model.position=="normal"?(this._elementWrapper=ej.buildTag("div#"+this._id+"_WrapContainer",{},{},{"class":this._rootCSS+" e-m-nb-container e-m-nb-"+this.model.direction.toLowerCase()}),this.element.wrapAll(this._elementWrapper),this._nbHome=$("#"+this._id+"_WrapContainer").parent()):(this._nbHome=this.model.considerSubPage&&this.element.closest(".subpage").length?this.element.closest(".subpage"):this.element.closest(".appview"),this.element.appendTo(this._nbHome))},_renderEJMControls:function(){this.model.enableListView&&(this._lb=ej.buildTag("div#"+this._id+"_listview",{},{},{"class":"e-m-nb-listview"}),this.model.items.length||this.model.listViewSettings.dataSource.length?this._lb.appendTo(this.element):this.element.find(">ul").wrapAll(this._lb),this._lb=ej.getCurrentPage().find("#"+this._id+"_listview"),this.model.listViewSettings.renderMode=this.model.renderMode,this.model.listViewSettings.theme=this.model.theme,$.type(this.model.listViewSettings.dataSource)=="string"&&(this.model.listViewSettings.dataSource=eval(this.model.listViewSettings.dataSource)),this.model.listViewSettings.items=this.model.items,this.model.listViewSettings.width||(this.model.listViewSettings.width=ej.isMobile()?280:320),this._lb.ejmListView($.extend({},this.model.listViewSettings,{loadComplete:$.proxy(this._setLayout,this)})),this._lb.ejmListView("selectItem",this.model.listViewSettings.selectedItemIndex),this._lbscrollbar=$("#"+this._id+"_listview_scroll"));(!this.model.listViewSettings.allowScrolling&&this.model.enableListView&&this.model.allowScrolling||this.model.allowScrolling&&!this.model.enableListView)&&(this._scrollbar=ej.buildTag("div#"+this._id+"_scrollpane",{},{},{"class":"e-m-nb-scrollpane"}),this._scrollWrap=ej.buildTag("div#"+this._id+"_scrollwrap",{},{},{"class":"e-m-nb-scrollwrap"}),$(this.element).wrapInner(this._scrollWrap),$("#"+this._id+"_scrollwrap").wrapInner("<div><\/div>"),this.element.append(this._scrollbar),this._scrollbar=ej.getCurrentPage().find($("#"+this._id+"_scrollpane")),this.model.scrollSettings.target=this._id+"_scrollwrap",this.model.scrollSettings.renderMode=this.model.rederMode,this.model.scrollSettings.theme=this.model.theme,this._scrollbar.ejmScrollPanel(this.model.scrollSettings))},_setModel:function(n){var t=!1;for(var i in n){switch(i){case"width":this._setWidth();this._setLayout();break;case"direction":this._setLayout();break;case"type":this._transform(0,0,!0);this._transform(0,0,!1);break;case"rendermode":case"theme":this._setRenderMode();break;default:t=!0}t&&this._refresh()}},_setRenderMode:function(){this.element.removeClass("e-m-ios7 e-m-android e-m-windows e-m-flat e-m-dark e-m-light e-m-tablet e-m-mobile");this.element.addClass("e-m-"+this.model.renderMode+" e-m-"+this.model.theme+(ej.isMobile()?" e-m-mobile":" e-m-tablet"));this._lb&&this._lb.ejmListView({renderMode:this.model.renderMode});this._scrollbar&&this._scrollbar.ejmScrollPanel({renderMode:this.model.renderMode})},_destroyEJMPlugin:function(){this._lb&&(this._lb.ejmListView("destroy"),this._lb.children().unwrap());this._scrollbar&&(this._scrollbar.ejmScrollPanel("destroy"),this._scrollbar&&this._scrollbar.remove())}});$.extend(!0,ej.mobile.NavigationDrawer.prototype,ej.NavigationDrawerBase.prototype);$.extend(!0,ej.mobile.NavigationDrawer.prototype.defaults.listViewSettings,ej.mobile.ListView.prototype.defaults);$.extend(!0,ej.mobile.NavigationDrawer.prototype.defaults.scrollSettings,ej.mobile.ScrollPanel.prototype.defaults);ej.mobile.NavigationDrawer.prototype._tags=ej.mobile.ListView.prototype._tags}(jQuery,Syncfusion)});