/*!
*  filename: ej.mobile.tile.min.js
*  version : 12.2.0.36
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t,r){t.widget("ejmTile","ej.mobile.Tile",{_setFirst:!0,rootCss:"e-m-tile",defaults:{renderMode:"auto",enableLiveTile:!1,tileSize:"medium",templateId:r,showIcon:!0,liveTileType:"flip",updateInterval:2e3,enablePersistence:!1,badge:{enabled:!1,value:1,maxValue:100},touchStart:r,touchEnd:r},dataTypes:{enableLiveTile:"boolean",tileSize:"enum",templateId:"string",renderMode:"enum",showIcon:"boolean",liveTileType:"enum",enablePersistence:"boolean",badge:{enabled:"boolean",value:"number",maxValue:"number"}},_init:function(){this._orgEle=this.element.clone();this._renderControl();this._wireEvents()},_renderControl:function(){var e,u,s,h,o,f;for(t.setRenderMode(this),t.setTheme(this),this._isMoved=!1,this._isStart=!1,this._tile=[],this.element.wrap(t.buildTag("div").addClass("e-m-tile-wrappers e-m-tile-wrapper-"+this.model.tileSize)),this.element.addClass("e-m-tile e-m-tile e-m-"+this.model.renderMode+" e-m-tile-wrapper e-m-user-select e-m-tile-"+this.model.tileSize+" e-m-tile"+this.model.liveTileType),e=this.element.find("[data-ej-layout='tile']"),i=0;i<e.length;i++)u={imageUrl:r,showText:!0,imageClass:r,templateId:r,text:"Text",type:"main",textAlignment:"normal",imagePosition:"center"},u.element=n(e[i]),u.imageUrl=t.getAttrVal(u.element,"data-ej-imageurl",u.imageUrl),!n.support.pushstate&&u.imageUrl&&(u.imageUrl=App.route.makeUrlAbsolute(u.imageUrl,!0)),u.type=t.getAttrVal(u.element,"data-ej-type",u.type),u.text=t.getAttrVal(u.element,"data-ej-text",u.text),u.templateId=t.getAttrVal(u.element,"data-ej-templateId",u.templateId),u.imagePosition=t.getAttrVal(u.element,"data-ej-imageposition",u.imagePosition),u.imageClass=t.getAttrVal(u.element,"data-ej-imageclass",u.imageClass),u.textAlignment=t.getAttrVal(u.element,"data-ej-textalignment",u.textAlignment),u.showText=t.getAttrVal(u.element,"data-ej-showtext",u.showText),u.type=="main"&&(this._text=u.text,this._showText=u.showText,this._mainTile=n(e[i]),u.templateId||this.model.templateId||(s=this.model.badge.value<=this.model.badge.maxValue?this.model.badge.value.toString():this.model.badge.maxValue.toString()+"+",h=t.buildTag("div",s).addClass("e-m-tile-badge")[this.model.badge.enabled&&this.model.badge.value>0?"show":"hide"](),this._mainTile.append(h)),this._mainTile.addClass("e-m-child-tile e-m-child-main"),this.model.enableLiveTile&&this._mainTile.addClass("e-m-tile-"+this.model.liveTileType+"back")),u.templateId||this.model.templateId?this.model.templateId?u.element.append(n(t.getCurrentPage().find("#"+u.templateId)).clone()):u.element.append(t.getCurrentPage().find("#"+u.templateId)):(o=t.buildTag("div",u.text).addClass("e-m-tile-text e-m-textalign-"+u.textAlignment),f=t.buildTag("div").addClass("e-m-fontimage e-m-tile-image e-m-tile-image"+u.imagePosition),this.model.showIcon&&u.imageClass?f.addClass(u.imageClass):this.model.showIcon&&u.imageUrl&&f.css({"background-image":"url('"+u.imageUrl+"')"}),(this.model.renderMode=="ios7"||this.model.renderMode=="flat")&&u.imagePosition=="fill"&&f.append(t.buildTag("div").addClass("e-m-layer")),u.showText=="false"&&o.addClass("e-m-hidetext"),u.element.append(f).append(o).addClass("e-m-tile-image"+u.imagePosition),o.wrap(t.buildTag("div.e-m-tile-row e-m-tiletextrow")),f.wrap(t.buildTag("div.e-m-tile-row"))),u.type=="live"&&u.element.addClass("e-m-child-tile e-m-tile-backface e-m-live-tile e-m-tile-"+this.model.liveTileType),this._tile[i]=u;this._wrapper=this.element.parent();(this.model.renderMode=="ios7"||this.model.renderMode=="android")&&(this.element.after(t.buildTag("div",this._text).addClass("e-m-tile-text-"+this.model.tileSize)),this._wrapper.addClass("e-m-icon"),this._textElement=this.element.next(),this._showText=="false"&&(this._textElement.addClass("e-m-hidetext"),this._wrapper.removeClass("e-m-icon")))},_createDelegates:function(){this._onTouchStartDelegate=n.proxy(this._onTouchStartHandler,this);this._onTouchEndDelegate=n.proxy(this._onTouchEndHandler,this);this._onTouchMoveDelegate=n.proxy(this._onTouchMoveHandler,this);this._onDocClickDelegate=n.proxy(this._onDocClickHandler,this);this._startAnimationDelegate=n.proxy(this["_"+this.model.liveTileType+"Tile"],this)},_wireEvents:function(){this._createDelegates();t._listenEvents([this.element,this.element,App.document],[t.startEvent(),t.endEvent(),t.endEvent()],[this._onTouchStartDelegate,this._onTouchEndDelegate,this._onDocClickDelegate],!1);this.model.enableLiveTile&&this.model.renderMode=="windows"&&this._startTileAnimation()},_unWireEvents:function(){t._listenEvents([this.element,this.element],[t.startEvent(),t.endEvent()],[this._onTouchStartDelegate,this._onTouchEndDelegate],!0);this._stopTileAnimation()},_onDocClickHandler:function(t){n(t.target).closest("#"+this.element[0].id).length||this._removeActiveClass(this.element)},_onTouchStartHandler:function(n){var i=this.element,r,u;r=this.model.renderMode=="windows"?t.isTouchDevice()?n.targetTouches[0]:n:null;i.addClass(this._addActiveClass(i,r));u={element:this.element,text:i.find(".e-m-child-main .e-m-tile-text").html()};this.model.touchStart&&this._trigger("touchStart",u);t._listenTouchEvent(this.element,t.moveEvent(),this._onTouchMoveDelegate,!1);this._isMoved=!1;this._isStart=!0},_addActiveClass:function(n,i){return this.model.renderMode=="windows"?t._getSkewClass(n,i.pageX,i.pageY):"e-m-state-active"},_removeActiveClass:function(i){this.model.renderMode=="windows"?t._removeSkewClass(i):n(i).removeClass("e-m-state-active")},_onTouchMoveHandler:function(){this._isMoved=!0;this._removeActiveClass(this.element)},_onTouchEndHandler:function(i){var r=n(i.target).closest(".e-m-tile"),u;!this._isMoved&&this._isStart&&(u={element:this.element,text:r.find(".e-m-child-main .e-m-tile-text").html()},this.model.touchEnd&&this._trigger("touchEnd",u));this._removeActiveClass(r);this._isMoved=!1;this._isStart=!1;t._listenTouchEvent(this.element,t.moveEvent(),this._onTouchMoveDelegate,!0)},_startTileAnimation:function(){this._intervalCounter=setInterval(this._startAnimationDelegate,this.model.updateInterval)},_stopTileAnimation:function(){clearInterval(this._intervalCounter)},_flipTile:function(){var n=this.element.find(".e-m-tile-flipback"),t=this.element.find(".e-m-tile-flip");n.addClass("e-m-tile-flip").removeClass("e-m-tile-flipback");t.addClass("e-m-tile-flipback").removeClass("e-m-tile-flip")},_slideTile:function(){var t=this.element.find(".e-m-child-tile"),n=this.element.find(".e-m-tile-slideback"),i=n.next()[0]==null?t.first():n.next(),r=n.prev()[0]==null?t.last():n.prev();r.addClass("e-m-tile-slide").removeClass("e-m-tile-slideup");n.addClass("e-m-tile-slideup").removeClass("e-m-tile-slideback");i.removeClass("e-m-tile-slide").addClass("e-m-tile-slideback")},_carouselTile:function(){var t=this.element.find(".e-m-child-tile"),n=this.element.find(".e-m-tile-carouselback"),i=n.next()[0]==null?t.first():n.next(),r=n.prev()[0]==null?t.last():n.prev();r.addClass("e-m-tile-carousel").removeClass("e-m-tile-carouselup");n.addClass("e-m-tile-carouselup").removeClass("e-m-tile-carouselback");i.removeClass("e-m-tile-carousel").addClass("e-m-tile-carouselback")},_setModel:function(n){var t,i;for(t in n){switch(t){case"imagePosition":this.setImagePosition(n.imagePosition);break;case"textAlignment":this.setTextAlignment(n.TextAlignment);break;case"showIcon":this.showIcon(n.showIcon);break;case"text":this.setText(n.text)}i="_set"+t.charAt(0).toUpperCase()+t.slice(1);this[i]&&this[i](n[t])}},_refresh:function(){this._destroy();this.element.addClass("e-m-tile")},_clearElement:function(){this.element.removeAttr("class");this.element.html(this._orgEle.html())},_destroy:function(){this._stopTileAnimation();this._unWireEvents();this._clearElement()},setImagePosition:function(t,i){i==r&&(i=0);var u=this._tile[i].imagePosition;n(this.element.children()[i]).hasClass("e-m-tile-image"+u)&&(n(this.element.children()[i]).removeClass("e-m-tile-image"+u).addClass("e-m-tile-image"+t),this._tile[i].imagePosition=t)},setTextAlignment:function(t,i){i==r&&(i=0);var u=this._tile[i].textAlignment;n(this.element.find(".e-m-tile-text")[i]).hasClass("e-m-textalign-"+u)&&(n(this.element.find(".e-m-tile-text")[i]).removeClass("e-m-textalign-"+u).addClass("e-m-textalign-"+t),this._tile[i].textAlignment=t)},_setBadgeValue:function(n){if(n>0){this._setBadgeEnabled(!0);var t=n<this.model.badge.maxValue?n:this.model.badge.maxValue+"+";this._mainTile.find(".e-m-tile-badge").html(t)}else this._setBadgeEnabled(!1)},showIcon:function(t,i){i==r?i=0:i;this.model.showIcon=t;this.model.showIcon?n(this.element.children()[i]).find(".e-m-tile-image").css("visibility","visible"):n(this.element.children()[i]).find(".e-m-tile-image").css("visibility","hidden")},_setTileSize:function(n){this.element.removeClass("e-m-tile-medium e-m-tile-small e-m-tile-wide e-m-tile-large").addClass("e-m-tile-"+n);(this.model.renderMode=="ios7"||this.model.renderMode=="android")&&this._textElement.removeClass("e-m-tile-text-medium e-m-tile-text-small e-m-tile-text-wide e-m-tile-text-large").addClass("e-m-tile-text-"+n);this._wrapper.removeClass("e-m-tile-wrapper-medium e-m-tile-wrapper-small e-m-tile-wrapper-wide e-m-tile-wrapper-large").addClass("e-m-tile-wrapper-"+n);this.model.tileSize=n},_setBadgeEnabled:function(n){this.model.badge.enabled=n;this._mainTile.find(".e-m-tile-badge")[n==!0?"show":"hide"]()},setText:function(t,i){i==r?i=0:i;n(this.element.children()[i]).find(".e-m-tile-text").html(t);(this.model.renderMode=="ios7"||this.model.renderMode=="android")&&this._textElement.html(t)},_setShowText:function(n){n?(this._mainTile.find(".e-m-tile-text").removeClass("e-m-hidetext"),(this.model.renderMode=="ios7"||this.model.renderMode=="android")&&(this._textElement.removeClass("e-m-hidetext"),this._wrapper.addClass("e-m-icon"))):(this._mainTile.find(".e-m-tile-text").addClass("e-m-hidetext"),(this.model.renderMode=="ios7"||this.model.renderMode=="android")&&(this._textElement.addClass("e-m-hidetext"),this._wrapper.removeClass("e-m-icon")))},getRandomInt:function(n,t){return Math.floor(Math.random()*(t-n+1))+n},_setEnableLiveTile:function(n){n?this._startTileAnimation():this._stopTileAnimation()},_setRenderMode:function(){this.element.removeClass("e-m-ios e-m-android e-m-windows").addClass("e-m-"+this.model.renderMode)},_setBadge:function(n){var t,i;for(t in n)i="_setBadge"+t.charAt(0).toUpperCase()+t.slice(1),this[i]&&this[i](n[t])}});t.mobile.Tile.ImagePosition={Center:"center",Top:"top",Bottom:"bottom",Right:"right",Left:"left",TopLeft:"topleft",TopRight:"topright",BottomRight:"bottomright",BottomLeft:"bottomleft",Fill:"fill"};t.mobile.Tile.TextAlignment={Normal:"normal",Left:"left",Right:"right",Center:"center"};t.mobile.Tile.TileSize={Medium:"medium",Small:"small",Large:"large",Wide:"wide"};t.mobile.Tile.LiveTileType={Flip:"flip",Slide:"slide",Carousel:"carousel"}})(jQuery,Syncfusion)