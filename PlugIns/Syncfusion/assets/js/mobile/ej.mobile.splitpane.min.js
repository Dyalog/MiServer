/*!
*  filename: ej.mobile.splitpane.min.js
*  version : 13.2.0.39
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./ej.mobile.core.min","./ej.mobile.application.min","./../common/ej.unobtrusive.min","./../common/ej.touch.min","./ej.mobile.button.min","./ej.mobile.header.min","./ej.mobile.toolbar.min","./ej.mobile.scrollpanel.min"],n):n()})(function(){(function($,ej,undefined){ej.widget("ejmSplitPane","ej.mobile.SplitPane",{_setFirst:!0,_rootCSS:"e-m-splitpane",defaults:{renderMode:"auto",theme:"auto",allowLeftPaneScrolling:!0,allowRightPaneScrolling:!0,leftPaneScrollSettings:{},rightPaneScrollSettings:{},enablePersistence:!1,android:{showToolbar:!0},toolbarSettings:{},windows:{showLeftPaneHeader:!0,showRightPaneHeader:!0},ios7:{showLeftPaneHeader:!0,showRightPaneHeader:!0},flat:{showLeftPaneHeader:!0,showRightPaneHeader:!0},leftHeaderSettings:{},rightHeaderSettings:{},overlayLeftPane:!0,overlayDirection:"left",enableSwipe:!0,cssClass:"",afterLoadSuccess:null,beforeTransfer:null},dataTypes:{allowLeftPaneScrolling:"boolean",allowRightPaneScrolling:"boolean",renderMode:"enum",theme:"enum",enablePersistence:"boolean",ios7:{showLeftPaneHeader:"boolean",showRightPaneHeader:"boolean"},android:{showToolbar:"boolean"},windows:{showLeftPaneHeader:"boolean",showRightPaneHeader:"boolean"},flat:{showLeftPaneHeader:"boolean",showRightPaneHeader:"boolean"},overlayLeftPane:"boolean",overlayDirection:"enum",enableSwipe:"boolean"},_init:function(){App.activePage||App.createAppView();this._historyLength=0;this._currentPage=null;this._renderControl();this._wireEvents()},_renderControl:function(){ej.setRenderMode(this);ej.setTheme(this);this.element.addClass("e-m-splitpane e-m-"+this.model.renderMode+" e-m-"+this.model.theme+" "+this.model.cssClass);this.model.overlayLeftPane||this.element.addClass(ej.isMobile()?"e-m-mobile":"e-m-tablet");this._orgEle=$(this.element).clone();this._layouts=this.element.find("[data-ej-layout='pane']");this._leftPane=$(this._layouts[0]).addClass("pane");(App.angularAppName||ej.angular.defaultAppName)&&ej.angular.compile(this._leftPane);this.model.overlayLeftPane&&(this._overlayModal=ej.buildTag("div.e-m-sp-overlay e-m-state-hide"),this.element.addClass("e-m-overlaypane").append(this._overlayModal),this._leftPane.addClass("e-m-sp-overlay"+this.model.overlayDirection));this.model.renderMode=="android"&&this._renderToolBar();this._leftPane.addClass("e-m-sp-left e-m-firstpage");this._leftWrapper=ej.buildTag("div#leftscroller").addClass("e-m-sp-leftwrapper");this._leftPane.wrapInner(this._leftWrapper);this._leftWrapper=this._leftPane.find(".e-m-sp-leftwrapper");this._rightPane=$(this._layouts).not(".e-m-sp-left").hide();(!this.model.overlayLeftPane&&ej.isMobile()?this._layouts:this._rightPane).addClass("subpage");this.model.renderMode!="android"&&this._renderLeftHeader();this.model.allowLeftPaneScrolling&&(this._leftScroller=ej.buildTag("div#"+this.element[0].id+"_scrollpanel"),this._leftWrapper.append(this._leftScroller),this.model.leftPaneScrollSettings.target="leftscroller",this.model.leftPaneScrollSettings.renderMode=this.model.renderMode,this.model.leftPaneScrollSettings.theme=this.model.theme,this._leftScroller.ejmScrollPanel(this.model.leftPaneScrollSettings));this.model.overlayLeftPane?this._setOverlayInitialStyles():this._setModeInitialStyles();this._setPaneSize()},_setOverlayInitialStyles:function(){ej.isLowerResolution()?this.element.addClass("e-m-sp-lower").removeClass("e-m-sp-higher"):(this.element.addClass("e-m-sp-higher").removeClass("e-m-sp-lower"),this.element.find(".e-m-sp-right").width(this.element.closest(".appview").width()-this.element.find(".e-m-sp-left").outerWidth()-(this.model.renderMode=="android"?4:0)))},_setModeInitialStyles:function(){ej.isMobile()&&this._rightPane?(this._currentPage=this._leftPane,this._layouts.css({width:"100%"})):this.element.find(".e-m-sp-right").width(this.element.closest(".appview").width()-this.element.find(".e-m-sp-left").outerWidth()-(this.model.renderMode=="android"?4:0))},_renderToolBar:function(){this._andTB=ej.buildTag("div#"+this.element[0].id+"_toolbar","","",{});this._andTB.insertBefore(this.element);this.model.toolbarSettings.position="normal";this.model.toolbarSettings.renderMode="android";this._andTB.attr({"data-ej-toolbarsettings-android-title":this.model.toolbarSettings.android.title,"data-ej-toolbarsettings-items":this.model.toolbarSettings.items});this.model.toolbarSettings.theme=this.model.toolbarSettings.theme!="auto"?this.model.toolbarSettings.theme:this.model.theme;this._andTB.ejmToolbar($.extend(!0,this.model.toolbarSettings,{items:eval(this.model.toolbarSettings.items)}));this._toolbarItems=this.element.find("div[data-ej-toolbaritems] ul");this._toolbarItems.length>0&&this._andTB.append(this._toolbarItems);this.element.css("min-height",window.innerHeight-this._andTB.height());this.model.android.showToolbar||this._andTB.css("display","none")},_renderLeftHeader:function(){this._leftHeader=ej.buildTag("div");this._leftPane.prepend(this._leftHeader);this.model.leftHeaderSettings.renderMode=this.model.renderMode;this.model.leftHeaderSettings.theme=this.model.theme;this.model.leftHeaderSettings.position="normal";this._leftHeader.ejmHeader(this.model.leftHeaderSettings);this.model.renderMode=="android"||this.model[this.model.renderMode].showLeftPaneHeader||this._leftHeader.css("display","none")},_createDelegates:function(){this._swipeRightDelegate=$.proxy(this._swipeRightHandler,this);this._swipeLeftDelegate=$.proxy(this._swipeLeftHandler,this);this._hideLeftPaneDelegate=$.proxy(this._hideLeftPaneHandler,this);this._popDelegate=$.proxy(this._popHandler,this);this._tapDelegate=$.proxy(this.documentClick,this)},_wireEvents:function(n){var t=!n&&this.model.enableSwipe?"bind":"unbind";this._createDelegates();this._swipeEvent(t);this.model.overlayLeftPane&&ej.listenTouchEvent(this._overlayModal,"tap",this._tapDelegate,!1);App.container.bind("viewpopstate",this._popDelegate)},_swipeEvent:function(n){this.model.overlayLeftPane&&(this.model.overlayDirection=="left"?(App.container[n]("swiperight",this._swipeRightDelegate),App.container[n]("swipeleft",this._swipeLeftDelegate)):(App.container[n]("swipeleft",this._swipeRightDelegate),App.container[n]("swiperight",this._swipeLeftDelegate)))},documentClick:function(n){$(n.target).hasClass("e-m-sp-overlay")&&this._hideLeftPaneHandler()},_popHandler:function(){if(this.element.is(":visible")){var hash=App.route.splitUrl(arguments[1].toPage).hash.replace("#","");this._historyLength&&(this._historyLength=this._historyLength-1);this._currentPage=App.activePage.find("div[data-url="+hash+"]");this.model.android.showToolbar&&ej.isAndroid()&&this._andTB.ejmToolbar({android:{title:this._currentPage.attr("data-ej-toolbarsettings-android-title")},items:eval(this._currentPage.attr("data-ej-toolbarsettings-items"))})}},_swipeRightHandler:function(){this.openLeftPane()},_swipeLeftHandler:function(){this.closeLeftPane()},openLeftPane:function(){this._leftPane.addClass("e-m-sp-show");ej.isLowerResolution()&&this._overlayModal.removeClass("e-m-state-hide")},closeLeftPane:function(){this._leftPane.removeClass("e-m-sp-show");this._overlayModal.addClass("e-m-state-hide")},_hideLeftPaneHandler:function(){ej.isLowerResolution()&&this.closeLeftPane()},resize:function(){var n=this;this._setPaneSize();window.setTimeout(function(){n.model.overlayLeftPane&&(ej.isLowerResolution()?n.element.hasClass("e-m-sp-higher")&&(n._rightPane.css("width","100%").hide(),App.activeSubPage?App.activeSubPage.show():n._currentPage&&n._currentPage.show(),n._leftPane.css({width:""}).show(),n.element.addClass("e-m-sp-lower").removeClass("e-m-sp-higher")):n.element.hasClass("e-m-sp-lower")&&(n._layouts.css("width",""),!n.model.renderMode=="ios7"&&n._overlayModal.addClass("e-m-state-hide"),n.element.addClass("e-m-sp-higher").removeClass("e-m-sp-lower")))},ej.isAndroid()?1e3:0)},_setPaneSize:function(){var n=this;window.setTimeout(function(){var t=window.innerHeight;n.model.overlayLeftPane&&n.closeLeftPane();n.model.android.showToolbar&&ej.isAndroid()&&(t=t-n._andTB.height());n.model.allowLeftPaneScrolling?n.refreshLeftScroller():n._leftPane.height(t);n._layouts.not(".e-m-sp-preventautoheight").height(t);!n._rightPane||(ej.isLowerResolution()||!n.model.overlayLeftPane)&&(ej.isMobile()||n.model.overlayLeftPane)||n._rightPane.width(window.innerWidth-n._leftPane.outerWidth())},ej.isAndroid()?1e3:0)},_setAndroid:function(n){for(var t in n)this.model.android[t]=n[t];t=="showToolbar"?this._showToolbar(n.showToolbar):this._andTB.ejmToolbar(n.android.toolbarSettings)},_setIos7:function(n){for(var t in n)this.model.ios7[t]=n[t];switch(t){case"showLeftPaneHeader":n.showLeftPaneHeader?this._leftHeader.css("display","block"):this._leftHeader.css("display","none");break;case"showRightPaneHeader":n.showRightPaneHeader?App.activeSubPage.find("div.e-m-header").css("display","block"):App.activeSubPage.find("div.e-m-header").css("display","none")}t.toLowerCase().contains("left")?this._leftHeader.ejmHeader(this.model.leftHeaderSettings):t.toLowerCase().contains("right")&&App.activeSubPage.find("div.e-m-header").ejmHeader(this.model.rightHeaderSettings)},_setWindows:function(n){for(var t in n)this.model.windows[t]=n[t];switch(t){case"showLeftPaneHeader":n.showLeftPaneHeader?this._leftHeader.css("display","block"):this._leftHeader.css("display","none");break;case"showRightPaneHeader":n.showRightPaneHeader?App.activeSubPage.find("div.e-m-header").css("display","block"):App.activeSubPage.find("div.e-m-header").css("display","none")}},_setFlat:function(n){for(var t in n)this.model.flat[t]=n[t];switch(t){case"showLeftPaneHeader":n.showLeftPaneHeader?this._leftHeader.css("display","block"):this._leftHeader.css("display","none");break;case"showRightPaneHeader":n.showRightPaneHeader?App.activeSubPage.find("div.e-m-header").css("display","block"):App.activeSubPage.find("div.e-m-header").css("display","none")}},_setModel:function(n){var r,t,i;this._trigger("modelChange",{changes:n});r=!1;for(t in n)if(t.toLowerCase().indexOf("windows")!=-1||t.toLowerCase().indexOf("android")!=-1||t.toLowerCase().indexOf("ios7")!=-1)i="_set"+t.charAt(0).toUpperCase()+t.slice(1),this[i]&&this[i](n[t]);else switch(t){case"leftHeaderTitle":this._leftHeader.ejmHeader({title:n.leftHeaderSettings.title});break;case"rightHeaderTitle":App.activeSubPage.find("div.e-m-header").ejmHeader({title:n.rightHeaderSettings.title});break;case"showLeftHeaderButton":this._leftHeader.ejmHeader({showLeftButton:n.leftHeaderSettings.showLeftButton});break;case"showRightHeaderButton":this._leftHeader.ejmHeader({showRightButton:n.rightHeaderSettings.showRightButton});break;case"enableSwipe":this._setSwipe(n.enableSwipe)}},_setSwipe:function(n){this._swipeEvent(n?"bind":"unbind")},_showToolbar:function(n){this._andTB.css("display",n?"block":"none");this._setPaneSize()},_refresh:function(){this._clearElements();this._renderControl();this._wireEvents(!1)},_clearElements:function(){this._wireEvents(!0);this.element.removeAttr("class");this.element.removeAttr("style");this.element.html(this._orgEle.html())},_destroy:function(){this._clearElements()},loadContent:function(n,t){var i=this,r,u,f;if(this.model.overlayLeftPane&&this._hideLeftPaneHandler(),r=$.extend({},ej.mobile.SplitPane.toPage.defaults,t),!r.isHigherLevel&&this._historyLength>0&&(App.pageHistory.clearHistory(this._historyLength+1),this._historyLength=0),isTargetString=typeof n=="string",isTargetString){if(u=this.element.find("[data-subpageurl='"+App.route.makeUrlAbsolute(n)+"']"),f=n,u.length&&!r.reload){r.hash="#"+u.attr("data-url");r.isHigherLevel||App.pageHistory.replace(r.hash);i.transferPage(u,r,!0);return}u.length>0&&u.remove();App.loadView(n,r).done(function(n,t,u){var o,e,s;u[0].nodeName.toLowerCase()=="script"&&(u=$(ej.getClearString(u[0].innerHTML)));o=t.pageId?t.pageId:u[0].id?u[0].id:"page_"+parseInt(Math.random().toFixed(3)*1e3);t.hash="#"+o;r.isHigherLevel||App.pageHistory.replace(t.hash);e=ej.buildTag("div.e-m-sp-right subpage").attr({"data-ej-layout":"pane","data-url":o});i._rightWrapper=ej.buildTag("div#"+o+"_rightscroller").addClass("e-m-sp-rightwrapper");i._rightWrapper.append(u);e.append(i._rightWrapper.wrapInner("<div><\/div>"));i.element.append(e);(!i.model.overlayLeftPane||ej.isLowerResolution())&&(i.model.overlayLeftPane||ej.isMobile())||e.width(i.element.closest(".appview").width()-i.element.find(".e-m-sp-left").outerWidth()-(i.model.renderMode=="android"?4:0));i.transferPage(e,t,!1,u);e.attr({"data-subpageurl":App.route.makeUrlAbsolute(f)});App._renderingPage=e;ej.widget.init(i._rightWrapper);(App.angularAppName||ej.angular.defaultAppName||t.angularAppName)&&ej.angular.compile(e,t.angularAppName||App.angularAppName);App._renderingPage=undefined;(i.model.allowRightPaneScrolling&&t.allowRightPaneScrolling||i.model.allowRightPaneScrolling&&t.allowRightPaneScrolling==undefined)&&(i._rightScroller=ej.buildTag("div"),i.model.rightPaneScrollSettings.target=o+"_rightscroller",i.model.rightPaneScrollSettings.renderMode=i.model.renderMode,i.model.rightPaneScrollSettings.theme=i.model.theme,i._rightWrapper.append(i._rightScroller.ejmScrollPanel($.extend(!0,i.model.rightPaneScrollSettings,t.rightPaneScrollSettings))));i.model.afterLoadSuccess&&(s={toPage:e,rightPaneHeader:i._rightHeader,leftPaneHeader:i._leftHeader,toolbar:i._andTB},i._trigger("afterLoadSuccess",s))}).fail(function(){})}else i.transferPage(n,r)},transferPage:function(toPage,options,existing,newPage){var pageheight,header,data;existing||(pageheight=window.innerHeight,this.model.renderMode!="android"&&this.model[this.model.renderMode].showRightPaneHeader&&(toPage.find(">div").hasClass("e-m-header")||(header=ej.buildTag("div"),toPage.prepend(header),this.model.rightHeaderSettings.renderMode=this.model.renderMode,this.model.rightHeaderSettings.theme=this.model.theme,this.model.rightHeaderSettings.position="normal",this._rightHeader=header.ejmHeader($.extend(!0,this.model.rightHeaderSettings,options.rightHeaderSettings))),pageheight=window.innerHeight),this.model.android.showToolbar&&ej.isAndroid()&&(pageheight=window.innerHeight-this._andTB.innerHeight()),options.autoAdjustHeight?toPage.height(pageheight):toPage.addClass("e-m-sp-preventautoheight"));options.isHigherLevel||!this.model.overlayLeftPane&&ej.isMobile()?(this._historyLength++,options.hashMonitoring=!0):(options.transition="none",options.hashMonitoring=!1);this._currentPage=App.activeSubPage?App.activeSubPage:this._currentPage;this._currentPage||!this.model.overlayLeftPane&&ej.isMobile()?this._currentPage||(this._currentPage=this._leftPane):this._currentPage=toPage.show();!existing&&newPage&&(App.createPage(this._currentPage),newPage.show());this.model.android.showToolbar&&ej.isAndroid()&&options.toolbarSettings&&options.toolbarSettings.android&&(this._currentPage.attr({"data-ej-toolbarsettings-android-title":this._andTB.attr("data-ej-toolbarsettings-android-title"),"data-ej-toolbarsettings-items":this._andTB.attr("data-ej-toolbarsettings-items")}),this._andTB.ejmToolbar({android:{title:options.toolbarSettings.android.title},items:eval(options.toolbarSettings.items)}),toPage.attr({"data-ej-toolbarsettings-android-title":options.toolbarSettings.android.title,"data-ej-toolbarsettings-items":options.toolbarSettings.items}));App.transferPage(this._currentPage,toPage,options);this.model.beforeTransfer&&(data={toPage:toPage,rightPaneHeader:this._rightHeader,leftPaneHeader:this._leftHeader,toolbar:this._andTB},this._trigger("beforeTransfer",data));this._layouts=this._layouts.add(toPage);this._rightPane=this._rightPane.add(toPage)},refreshRightScroller:function(){this.model.allowRightPaneScrolling&&$("div.e-m-sp-rightwrapper:visible .e-m-scroll ").data("ejmScrollPanel").refresh()},refreshLeftScroller:function(){this.model.allowLeftPaneScrolling&&$("div.e-m-sp-leftwrapper:visible .e-m-scroll ").data("ejmScrollPanel").refresh()}});$.extend(!0,ej.mobile.SplitPane.prototype.defaults.toolbarSettings,ej.mobile.Toolbar.prototype.defaults);$.extend(!0,ej.mobile.SplitPane.prototype.defaults.leftPaneScrollSettings,ej.mobile.ScrollPanel.prototype.defaults);$.extend(!0,ej.mobile.SplitPane.prototype.defaults.rightPaneScrollSettings,ej.mobile.ScrollPanel.prototype.defaults);$.extend(!0,ej.mobile.SplitPane.prototype.defaults.leftHeaderSettings,ej.mobile.Header.prototype.defaults);$.extend(!0,ej.mobile.SplitPane.prototype.defaults.rightHeaderSettings,ej.mobile.Header.prototype.defaults);ej.mobile.SplitPane.toPage={defaults:{transition:"auto",reverse:!1,changeHash:!0,reloadSamePage:!0,autoAdjustHeight:!0,samePage:!1}};ej.mobile.SplitPane.HeaderLeftButtonStyle={Back:"back",Header:"header",Normal:"normal"};ej.mobile.SplitPane.HeaderRightButtonStyle={Header:"header",Normal:"normal"}})(jQuery,Syncfusion)});