/*!
*  filename: ej.mobile.splitpane.min.js
*  version : 12.4.0.24
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./ej.mobile.core.min","./ej.mobile.application.min","./ej.mobile.button.min","./ej.mobile.header.min","./ej.mobile.toolbar.min","./ej.mobile.scrollpanel.min","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.unobtrusive.min","./../common/ej.touch.min"],n):n()})(function(){(function(n,t,i){t.widget("ejmSplitPane","ej.mobile.SplitPane",{_setFirst:!0,_rootCSS:"e-m-splitpane",defaults:{renderMode:"auto",theme:"auto",allowLeftPaneScrolling:!0,allowRightPaneScrolling:!0,leftPaneScrollSettings:{},rightPaneScrollSettings:{},enablePersistence:!1,android:{showToolbar:!0},toolbarSettings:{},windows:{showLeftPaneHeader:!0,showRightPaneHeader:!0},ios7:{showLeftPaneHeader:!0,showRightPaneHeader:!0},leftHeaderSettings:{},rightHeaderSettings:{},overlayLeftPane:!0,overlayDirection:"left",enableSwipe:!0,afterLoadSuccess:null,beforeTransfer:null},dataTypes:{allowLeftPaneScrolling:"boolean",allowRightPaneScrolling:"boolean",renderMode:"enum",theme:"enum",enablePersistence:"boolean",ios7:{showLeftPaneHeader:"boolean",showRightPaneHeader:"boolean"},android:{showToolbar:"boolean"},windows:{showLeftHeader:"boolean",showRightHeader:"boolean"},overlayLeftPane:"boolean",overlayDirection:"enum",enableSwipe:"boolean"},_init:function(){this._historyLength=0;this._nextPage=null;this._currentPage=null;this._previousPage=null;this._uniqueIds=[];this._wp=null;this._renderControl();this._wireEvents()},_renderControl:function(){t.setRenderMode(this);t.setTheme(this);this.element.addClass("e-m-splitpane e-m-"+this.model.renderMode+" e-m-"+this.model.theme);this.model.overlayLeftPane||this.element.addClass(t.isMobile()?"e-m-mobile":"e-m-tablet");this._orgEle=n(this.element).clone();this._layouts=this.element.find("[data-ej-layout='pane']");this._leftPane=n(this._layouts[0]).addClass("pane");this.model.overlayLeftPane&&(this._overlayModal=t.buildTag("div.e-m-sp-overlay e-m-state-hide").css("z-index",t.getMaxZindex()+1),this.element.addClass("e-m-overlaypane").append(this._overlayModal),this._leftPane.addClass("e-m-sp-overlay"+this.model.overlayDirection));this.model.renderMode=="android"&&this._renderToolBar();this._leftPane.addClass("e-m-sp-left e-m-firstpage");t.isWindows()&&this._leftPane.css("z-index",t.getMaxZindex()+1);this._leftWrapper=t.buildTag("div#leftscroller").addClass("e-m-sp-leftwrapper");this._leftPane.wrapInner(this._leftWrapper);this._leftWrapper=this._leftPane.find(".e-m-sp-leftwrapper");this._rightPane=n(this._layouts).not(".e-m-sp-left").hide();!this.model.overlayLeftPane&&t.isMobile()?this._layouts.addClass("subpage"):this._rightPane.addClass("subpage");(this.model.renderMode=="ios7"||this.model.renderMode=="windows")&&this._renderLeftHeader();this.model.allowLeftPaneScrolling&&(this._leftScroller=t.buildTag("div#"+this.element[0].id+"_scrollpanel"),this._leftWrapper.append(this._leftScroller),this.model.leftPaneScrollSettings.target="leftscroller",this.model.leftPaneScrollSettings.renderMode=this.model.renderMode,this.model.leftPaneScrollSettings.theme=this.model.theme,this._leftScroller.ejmScrollPanel(this.model.leftPaneScrollSettings));this.model.overlayLeftPane?this._setOverlayInitialStyles():this._setModeInitialStyles();this._setPaneSize()},_setOverlayInitialStyles:function(){t.isLowerResolution()?this.element.addClass("e-m-sp-lower").removeClass("e-m-sp-higher"):(this.element.addClass("e-m-sp-higher").removeClass("e-m-sp-lower"),this.element.find(".e-m-sp-right").width(this.element.closest(".appview").width()-this.element.find(".e-m-sp-left").outerWidth()-(this.model.renderMode=="android"?4:0)))},_setModeInitialStyles:function(){t.isMobile()&&this._rightPane?(this._currentPage=this._leftPane,this._layouts.css({width:"100%"})):this.element.find(".e-m-sp-right").width(this.element.closest(".appview").width()-this.element.find(".e-m-sp-left").outerWidth()-(this.model.renderMode=="android"?4:0))},_renderToolBar:function(){this._andTB=t.buildTag("div#"+this.element[0].id+"_toolbar","","",{});this._andTB.insertBefore(this.element);this.model.toolbarSettings.position="normal";this.model.toolbarSettings.renderMode="android";this.model.toolbarSettings.theme=this.model.toolbarSettings.theme!="auto"?this.model.toolbarSettings.theme:this.model.theme;this._andTB.ejmToolbar(this.model.toolbarSettings);this._toolbarItems=this.element.find("div[data-toolbaritems] ul");this._toolbarItems.length>0&&this._andTB.append(this._toolbarItems);this.element.css("min-height",window.innerHeight-this._andTB.height());this.model.android.showToolbar||this._andTB.css("display","none")},_renderLeftHeader:function(){this._leftHeader=t.buildTag("div");this._leftPane.prepend(this._leftHeader);this.model.leftHeaderSettings.renderMode=this.model.renderMode;this.model.leftHeaderSettings.theme=this.model.theme;this.model.leftHeaderSettings.position="normal";this._leftHeader.ejmHeader(this.model.leftHeaderSettings);(this.model.renderMode!="ios7"||this.model.ios7.showLeftPaneHeader)&&(this.model.renderMode!="windows"||this.model.windows.showLeftPaneHeader)||this._leftHeader.css("display","none")},_createDelegates:function(){this._changeDelegate=n.proxy(this._onResize,this);this._swipeRightDelegate=n.proxy(this._swipeRightHandler,this);this._swipeLeftDelegate=n.proxy(this._swipeLeftHandler,this);this._hideLeftPaneDelegate=n.proxy(this._hideLeftPaneHandler,this);this._popDelegate=n.proxy(this._popHandler,this);this._tapDelegate=n.proxy(this._documentClick,this)},_wireEvents:function(n){var i=n?"unbind":"bind",r;this._createDelegates();r=t.isTouchDevice()?"orientationchange":"resize";t.listenEvents([window],[r],[this._changeDelegate],n);this._swipeEvent(i);this.model.overlayLeftPane&&App.container[i]("tap",this._tapDelegate);App.container.bind("viewpopstate",this._popDelegate)},_swipeEvent:function(n){this.model.overlayLeftPane&&this.model.enableSwipe&&(this.model.overlayDirection=="left"?(App.container[n]("swiperight",this._swipeRightDelegate),App.container[n]("swipeleft",this._swipeLeftDelegate)):(App.container[n]("swipeleft",this._swipeRightDelegate),App.container[n]("swiperight",this._swipeLeftDelegate)))},_documentClick:function(t){n(t.target).closest(".e-m-sp-left").length||this._hideLeftPaneHandler()},_popHandler:function(){this._historyLength&&(this._historyLength=this._historyLength-1);this._currentPage=n(App.route.splitUrl(arguments[1].toPage).hash);this.model.android.showToolbar&&t.isAndroid()&&this._currentPage.attr("data-ej-toolbarsettings-android-title")&&this._andTB.ejmToolbar("model.android.title",this._currentPage.attr("data-ej-toolbarsettings-android-title"))},_swipeRightHandler:function(){this.openLeftPane()},_swipeLeftHandler:function(){this.closeLeftPane()},openLeftPane:function(){this._leftPane.addClass("e-m-sp-show");!this.model.renderMode=="ios7"&&this._overlayModal.removeClass("e-m-state-hide")},closeLeftPane:function(){this._leftPane.removeClass("e-m-sp-show");!this.model.renderMode=="ios7"&&this._overlayModal.addClass("e-m-state-hide")},_hideLeftPaneHandler:function(){t.isLowerResolution()&&this.closeLeftPane()},_onResize:function(){this._setPaneSize();this.model.overlayLeftPane&&(t.isLowerResolution()?this.element.hasClass("e-m-sp-higher")&&(this._rightPane.css("width","100%").hide(),App.activeSubPage?App.activeSubPage.show():this._currentPage&&this._currentPage.show(),this._leftPane.css({width:""}).show(),this.element.addClass("e-m-sp-lower").removeClass("e-m-sp-higher")):this.element.hasClass("e-m-sp-lower")&&(this._layouts.css("width",""),!this.model.renderMode=="ios7"&&this._overlayModal.addClass("e-m-state-hide"),this.element.addClass("e-m-sp-higher").removeClass("e-m-sp-lower")))},_setPaneSize:function(){var n=window.innerHeight;this.model.android.showToolbar&&t.isAndroid()&&(n=n-this._andTB.height());this._layouts.not(".e-m-sp-preventautoheight").height(n);!this._rightPane||(t.isLowerResolution()||!this.model.overlayLeftPane)&&(t.isMobile()||this.model.overlayLeftPane)||this._rightPane.width(window.innerWidth-this._leftPane.outerWidth())},_setAndroid:function(n){for(var t in n)this.model.android[t]=n[t];t=="showToolbar"?this._showToolbar(n.showToolbar):this._andTB.ejmToolbar(n.android.toolbarSettings)},_setIos7:function(n){for(var t in n)this.model.ios7[t]=n[t];switch(t){case"showLeftPaneHeader":n.showLeftPaneHeader?this._leftHeader.css("display","block"):this._leftHeader.css("display","none");break;case"showRightPaneHeader":n.showRightPaneHeader?App.activeSubPage.find("div.e-m-header").css("display","block"):App.activeSubPage.find("div.e-m-header").css("display","none")}t.toLowerCase().contains("left")?this._leftHeader.ejmHeader(this.model.leftHeaderSettings):t.toLowerCase().contains("right")&&App.activeSubPage.find("div.e-m-header").ejmHeader(this.model.rightHeaderSettings)},_setWindows:function(n){for(var t in n)this.model.windows[t]=n[t];switch(t){case"showLeftHeader":n.showLeftHeader?this._leftHeader.css("display","block"):this._leftHeader.css("display","none");break;case"showRightHeader":n.showRightHeader?App.activeSubPage.find("div.e-m-header").css("display","block"):App.activeSubPage.find("div.e-m-header").css("display","none")}},_setModel:function(n){var r,t,i;this._trigger("modelChange",{changes:n});r=!1;for(t in n)if(t.toLowerCase().contains("windows")||t.toLowerCase().contains("android")||t.toLowerCase().contains("ios7"))i="_set"+t.charAt(0).toUpperCase()+t.slice(1),this[i]&&this[i](n[t]);else switch(t){case"leftHeaderTitle":this._leftHeader.ejmHeader({title:n.leftHeaderSettings.title});break;case"rightHeaderTitle":App.activeSubPage.find("div.e-m-header").ejmHeader({title:n.rightHeaderSettings.title});break;case"showLeftHeaderButton":this._leftHeader.ejmHeader({showLeftButton:n.leftHeaderSettings.showLeftButton});break;case"showRightHeaderButton":this._leftHeader.ejmHeader({showRightButton:n.rightHeaderSettings.showRightButton});break;case"enableSwipe":this._setSwipe(n.enableSwipe)}},_setSwipe:function(n){this._swipeEvent(n?"bind":"unbind")},_showToolbar:function(n){this._andTB.css("display",n?"block":"none");this._setPaneSize()},_refresh:function(){this._clearElements();this._renderControl();this._wireEvents(!1)},_clearElements:function(){this._wireEvents(!0);this.element.removeAttr("class");this.element.removeAttr("style");this.element.html(this._orgEle.html())},_destroy:function(){this._clearElements()},loadContent:function(r,u){var f=this,e,o,s;if(this.model.overlayLeftPane&&this._hideLeftPaneHandler(),e=n.extend({},t.mobile.SplitPane.toPage.defaults,u),!e.isHigherLevel&&this._historyLength>0&&(App.pageHistory.clearHistory(this._historyLength+1),this._historyLength=0),isTargetString=typeof r=="string",isTargetString){if(o=this.element.find("[data-subpageurl='"+App.route.makeUrlAbsolute(r)+"']"),s=r,o.length&&!e.reload){f.transferPage(o,e,!0);return}o.length>0&&o.remove();App.loadView(r,e).done(function(r,u,e){var h,o,c;e[0].nodeName.toLowerCase()=="script"&&(e=n(t.getClearString(e[0].innerHTML)));h=e[0].id?e[0].id:u.pageId?u.pageId:"page_"+parseInt(Math.random().toFixed(3)*1e3);u.hash="#"+h;o=t.buildTag("div.e-m-sp-right subpage").attr({"data-ej-layout":"pane","data-url":h});f._rightWrapper=t.buildTag("div#"+h+"_rightscroller").addClass("e-m-sp-rightwrapper");f._rightWrapper.append(e);o.append(f._rightWrapper.wrapInner("<div><\/div>"));f.element.append(o);(!f.model.overlayLeftPane||t.isLowerResolution())&&(f.model.overlayLeftPane||t.isMobile())||o.width(f.element.closest(".appview").width()-f.element.find(".e-m-sp-left").outerWidth()-(f.model.renderMode=="android"?4:0));f.transferPage(o,u,!1,e);o.attr({"data-subpageurl":App.route.makeUrlAbsolute(s)});t.widget.init(o);(f.model.allowRightPaneScrolling&&u.allowRightPaneScrolling||f.model.allowRightPaneScrolling&&u.allowRightPaneScrolling==i)&&(f._rightScroller=t.buildTag("div"),f.model.rightPaneScrollSettings.target=h+"_rightscroller",f.model.rightPaneScrollSettings.renderMode=f.model.renderMode,f.model.rightPaneScrollSettings.theme=f.model.theme,f._rightWrapper.append(f._rightScroller.ejmScrollPanel(n.extend(!0,f.model.rightPaneScrollSettings,u.rightPaneScrollSettings))));f.model.afterLoadSuccess&&(c={toPage:o,rightPaneHeader:f._rightHeader,leftPaneHeader:f._leftHeader,toolbar:f._andTB},f._trigger("afterLoadSuccess",c))}).fail(function(){})}else f.transferPage(r,e)},transferPage:function(i,r,u,f){var e,o,h,c,s;u||(e=window.innerHeight,(this.model.renderMode=="ios7"&&this.model.ios7.showRightPaneHeader||this.model.renderMode=="windows"&&this.model.windows.showRightPaneHeader)&&(i.find(">div").hasClass("e-m-header")||(o=t.buildTag("div"),h=n(this.element).find(".e-m-sp-left div.e-m-lb li.e-m-state-active .e-m-lb-text").html(),i.prepend(o),(!this.model.overlayLeftPane&&t.isMobile()||r.isHigherLevel||r.showLeftButton)&&(c=!0),this.model.rightHeaderSettings.renderMode=this.model.renderMode,this.model.rightHeaderSettings.theme=this.model.theme,this.model.rightHeaderSettings.position="normal",this._rightHeader=o.ejmHeader(n.extend(!0,this.model.rightHeaderSettings,r.rightHeaderSettings))),e=window.innerHeight),this.model.android.showToolbar&&t.isAndroid()&&(e=window.innerHeight-this._andTB.innerHeight()),r.autoAdjustHeight?i.height(e):i.addClass("e-m-sp-preventautoheight"));r.isHigherLevel||!this.model.overlayLeftPane&&t.isMobile()?(this._historyLength++,r.hashMonitoring=!0):(r.transition="none",r.hashMonitoring=!1);this._currentPage=App.activeSubPage?App.activeSubPage:this._currentPage;this._currentPage||!this.model.overlayLeftPane&&t.isMobile()?this._currentPage||(this._currentPage=this._leftPane):this._currentPage=i.show();!u&&f&&(App.createPage(this._currentPage),f.show());this.model.android.showToolbar&&t.isAndroid()&&r.toolbarSettings&&r.toolbarSettings.android&&(this._andTB.ejmToolbar("model.android.title",r.toolbarSettings.android.title),i.attr("data-ej-toolbarsettings-android-title",r.toolbarSettings.android.title));App.transferPage(this._currentPage,i,r);this.model.beforeTransfer&&(s={toPage:i,rightPaneHeader:this._rightHeader,leftPaneHeader:this._leftHeader,toolbar:this._andTB},this._trigger("beforeTransfer",s));this._layouts=this._layouts.add(i);this._rightPane=this._rightPane.add(i)}});n.extend(!0,t.mobile.SplitPane.prototype.defaults.toolbarSettings,t.mobile.Toolbar.prototype.defaults);n.extend(!0,t.mobile.SplitPane.prototype.defaults.leftPaneScrollSettings,t.mobile.ScrollPanel.prototype.defaults);n.extend(!0,t.mobile.SplitPane.prototype.defaults.rightPaneScrollSettings,t.mobile.ScrollPanel.prototype.defaults);n.extend(!0,t.mobile.SplitPane.prototype.defaults.leftHeaderSettings,t.mobile.Header.prototype.defaults);n.extend(!0,t.mobile.SplitPane.prototype.defaults.rightHeaderSettings,t.mobile.Header.prototype.defaults);t.mobile.SplitPane.toPage={defaults:{transition:"auto",reverse:!1,changeHash:!0,reloadSamePage:!0,autoAdjustHeight:!0,samePage:!1}};t.mobile.SplitPane.HeaderLeftButtonStyle={Back:"back",Header:"header",Normal:"normal"};t.mobile.SplitPane.HeaderRightButtonStyle={Header:"header",Normal:"normal"}})(jQuery,Syncfusion)})