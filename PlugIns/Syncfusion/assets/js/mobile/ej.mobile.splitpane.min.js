/*!
*  filename: ej.mobile.splitpane.min.js
*  version : 12.2.0.36
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t,i){t.widget("ejmSplitPane","ej.mobile.SplitPane",{_setFirst:!0,defaults:{renderMode:"auto",theme:"auto",leftHeaderTitle:"Title",rightHeaderTitle:"Title",allowLeftPaneScrolling:!0,allowRightPaneScrolling:!0,checkDOMChanges:!1,leftHeaderTemplateId:null,rightHeaderTemplateId:null,leftPaneWidth:i,enablePersistence:!1,android:{showToolbar:!0,toolbarTitle:"Settings",toolbarTheme:"dark",showToolbarIcon:!1,showBackNavigator:!1,showToolbarEllipsis:!1},windows:{showLeftHeader:!0,showRightHeader:!0,headerLeftButtonStyle:"back",headerRightButtonStyle:"header"},ios7:{showLeftPaneHeader:!0,showRightPaneHeader:!0,headerLeftButtonCaption:"Back",headerLeftButtonStyle:"back",showHeaderLeftButton:!1,headerLeftButtonTap:i,headerRightButtonCaption:"Button",headerRightButtonStyle:"header",showHeaderRightButton:!1,headerRightButtonTap:i},enableNativeScrolling:t.isAndroid()&&t.isLowerAndroid()||t.isWindows()&&t.isMobile()||t.isIOS7()?!1:t.isDevice()||t.isWindows()&&!t.isMobile()?!0:!1},dataTypes:{allowLeftPaneScrolling:"boolean",allowRightPaneScrolling:"boolean",renderMode:"enum",theme:"enum",renderingEngine:"enum",checkDOMChanges:"boolean",enableNativeScrolling:"boolean",enablePersistence:"boolean",ios7:{showLeftPaneHeader:"boolean",showRightPaneHeader:"boolean",headerLeftButtonStyle:"enum",showHeaderLeftButton:"boolean",headerRightButtonStyle:"enum",showHeaderRightButton:"boolean"},android:{showToolbar:"boolean",toolbarTheme:"enum",showToolbarIcon:"boolean",showBackNavigator:"boolean",showToolbarEllipsis:"boolean"},windows:{showLeftHeader:"boolean",showRightHeader:"boolean",headerLeftButtonStyle:"enum",headerRightButtonStyle:"enum"}},_init:function(){this._nextPage=null;this._currentPage=null;this._previousPage=null;this._uniqueIds=[];this._wp=null;this._renderControl();this._wireEvents()},_renderControl:function(){var i,r;this._leftWidth=this.model.leftPaneWidth?this.model.leftPaneWidth:320;t.setRenderMode(this);t.setTheme(this);this._orgEle=n(this.element).clone();this._layouts=this.element.find("[data-ej-layout='pane']").addClass("subpage");this.model.renderMode=="android"&&this._renderToolBar();this.model.allowLeftPaneScrolling&&(i=t.buildTag("div#leftscroller").addClass("e-m-sp-leftwrapper"),this._layouts.first().wrapInner(i),i=this._layouts.first().find(".e-m-sp-leftwrapper"),r=t.buildTag("div#"+this.element[0].id+"_scrollpanel"),i.append(r),r.ejmScrollPanel({target:"leftscroller",enableNativeScrolling:this.model.enableNativeScrolling,checkDOMChanges:this.model.checkDOMChanges}));this.element.addClass("e-m-splitpane e-m-"+this.model.renderMode+" e-m-"+this.model.theme);(this.model.renderMode=="ios7"||this.model.renderMode=="windows")&&(this._renderLeftHeader(),this._renderRightHeader());this._layouts.first().addClass("e-m-sp-left");t.isWindows()&&this._layouts.first().css("z-index",t.getMaxZindex()+1);this._layouts.first().nextAll().addClass("e-m-sp-right");this._layouts.first().addClass("e-m-firstpage");this._layouts.first().next().nextAll().css("display","none");t.isMobile()?(this._layouts.first().nextAll().css("display","none"),this.element.find("[data-ej-layout='pane']").addClass("appview"),this._currentPage=n(this._layouts[0])):(t.isAndroid()||this.element.addClass("e-m-tablet"),this.element.find(".e-m-sp-left").width(this._leftWidth),this.model.leftPaneWidth?this.element.find(".e-m-sp-left").width(this.model.leftPaneWidth):(t.isWindows()||t.isAndroid())&&(t.isPortrait()?this.element.find(".e-m-sp-left").width(t.isAndroid()&&n(window).width<980?200:320):this.element.find(".e-m-sp-left").width(t.isAndroid()?320:450)),this._layouts.first().nextAll().css("position","absolute"),this._layouts.first().nextAll().css("left",this.element.find(".e-m-sp-left").outerWidth()),this.element.find(".e-m-sp-right").width(this.element.closest(".appview").width()-this.element.find(".e-m-sp-left").outerWidth()-(this.model.renderMode=="android"?4:0)),this._currentPage=n(this.element.find(".e-m-sp-right")[0]));t.isMobile()||this._setPaneSize()},_renderToolBar:function(){this._andTB=t.buildTag("div#"+this.element[0].id+"_toolbar","","",{});this._andTB.insertBefore(this.element);this._andTB.ejmToolbar({position:"normal",android:{showEllipsis:this.model.android.showToolbarEllipsis,title:this.model.android.toolbarTitle,showTitleIcon:this.model.android.showToolbarIcon,showBackNavigator:this.model.android.showBackNavigator},theme:this.model.android.toolbarTheme,iconurl:this.model.android.toolbarIcon,renderMode:"android"});this._toolbarItems=this.element.find("div[data-toolbaritems] ul");this._toolbarItems.length>0&&this._andTB.append(this._toolbarItems);this.element.css("min-height",window.innerHeight-this._andTB.height());this.model.android.showToolbar||this._andTB.css("display","none")},_renderLeftHeader:function(){this._leftHeader=t.buildTag("div");this._layouts.first().prepend(this._leftHeader);this._leftHeader.ejmHeader({renderMode:this.model.renderMode,theme:this.model.theme,position:"normal",enableTitle:!0,title:this.model.leftHeaderTitle,leftButtonCaption:this.model[this.model.renderMode].headerLeftButtonCaption,showLeftButton:this.model[this.model.renderMode].showHeaderLeftButton,onLeftButtonClick:this.model[this.model.renderMode].headerLeftButtonTap,rightButtonCaption:this.model[this.model.renderMode].headerRightButtonCaption,showRightButton:this.model[this.model.renderMode].showHeaderRightButton,onRightButtonClick:this.model[this.model.renderMode].headerRightButtonTap,leftButtonStyle:this.model[this.model.renderMode].headerLeftButtonStyle,rightButtonStyle:this.model[this.model.renderMode].headerRightButtonStyle,templateId:this.model.leftHeaderTemplateId});(this.model.renderMode!="ios7"||this.model.ios7.showLeftPaneHeader)&&(this.model.renderMode!="windows"||this.model.windows.showLeftHeader)||this._leftHeader.css("display","none")},_renderRightHeader:function(){this._rightHeader=t.buildTag("div");n(this._layouts[1]).prepend(this._rightHeader);t.isMobile()||(App.activeSubPage=n(this._layouts[1]));n(this._layouts[1]).find(">div:first").ejmHeader({renderMode:this.model.renderMode,theme:this.model.theme,position:"normal",enableTitle:!0,title:this.model.rightHeaderTitle,templateId:this.model.rightHeaderTemplateId});(this.model.renderMode!="ios7"||this.model.ios7.showRightPaneHeader)&&(this.model.renderMode!="windows"||this.model.windows.showRightHeader)||this._rightHeader.css("display","none")},_createDelegates:function(){this._changeDelegate=n.proxy(this._onResize,this)},_wireEvents:function(t){var i=t?"unbind":"bind";this._createDelegates();n(window)[i]("orientationchange resize",this._changeDelegate)},_onResize:function(){t.isMobile()||this._setPaneSize()},_setPaneSize:function(){var n=window.innerHeight;this.model.android.showToolbar&&t.isAndroid()&&(n=n-this._andTB.height());this._layouts.height(n);this.model.leftPaneWidth?this._layouts.first().width(this.model.leftPaneWidth):(t.isWindows()||t.isAndroid())&&(t.isPortrait()?this._layouts.first().width(t.isAndroid()&&this.element.closest(".appview").width()<980?200:320):this._layouts.first().width(t.isAndroid()?320:450));this._layouts.first().nextAll().width(this.element.closest(".appview").width()-this._layouts.first().outerWidth());this._layouts.first().nextAll().css("left",this._layouts.first().outerWidth())},_setAndroid:function(n){for(var t in n)this.model.android[t]=n[t];t=="showToolbar"?this._showToolbar(n.showToolbar):this._andTB.ejmToolbar({android:{enableEllipsis:this.model.android.showToolbarEllipsis,title:this.model.android.toolbarTitle,enableTitleIcon:this.model.android.showToolbarIcon,enableBackNavigator:this.model.android.showBackNavigator},theme:this.model.android.toolbarTheme,iconurl:this.model.android.toolbarIcon})},_setIos7:function(n){for(var t in n)this.model.ios7[t]=n[t];switch(t){case"showLeftPaneHeader":n.showLeftPaneHeader?this._leftHeader.css("display","block"):this._leftHeader.css("display","none");break;case"showRightPaneHeader":n.showRightPaneHeader?App.activeSubPage.find("div.e-m-header").css("display","block"):App.activeSubPage.find("div.e-m-header").css("display","none")}t.toLowerCase().contains("left")?this._leftHeader.ejmHeader({leftButtonCaption:this.model.ios7.headerLeftButtonCaption,enableLeftButton:this.model.ios7.showHeaderLeftButton,onLeftButtonClick:this.model.ios7.headerLeftButtonTap,rightButtonCaption:this.model.ios7.headerRightButtonCaption,enableRightButton:this.model.ios7.showHeaderRightButton,onRightButtonClick:this.model.ios7.headerRightButtonTap,leftButtonStyle:this.model.ios7.headerLeftButtonStyle,rightButtonStyle:this.model.ios7.headerRightButtonStyle,templateId:this.model.ios7.leftHeaderTemplateId}):t.toLowerCase().contains("right")&&App.activeSubPage.find("div.e-m-header").ejmHeader({templateId:this.model.ios7.rightHeaderTemplateId})},_setWindows:function(n){for(var t in n)this.model.windows[t]=n[t];switch(t){case"showLeftHeader":n.showLeftHeader?this._leftHeader.css("display","block"):this._leftHeader.css("display","none");break;case"showRightHeader":n.showRightHeader?App.activeSubPage.find("div.e-m-header").css("display","block"):App.activeSubPage.find("div.e-m-header").css("display","none")}},_setModel:function(n){var r,t,i;this._trigger("modelChange",{changes:n});r=!1;for(t in n)if(t.toLowerCase().contains("windows")||t.toLowerCase().contains("android")||t.toLowerCase().contains("ios7"))i="_set"+t.charAt(0).toUpperCase()+t.slice(1),this[i]&&this[i](n[t]);else switch(t){case"leftHeaderTitle":this._leftHeader.ejmHeader({title:n.leftHeaderTitle});break;case"rightHeaderTitle":App.activeSubPage.find("div.e-m-header").ejmHeader({title:n.rightHeaderTitle})}},_showToolbar:function(n){n?(this._andTB.css("display","block"),this._layouts.css("margin-top","42px"),this._setPaneSize()):(this._andTB.css("display","none"),this._layouts.css("margin-top","auto"),this._setPaneSize())},_refresh:function(){this._clearElements();this._renderControl();this._wireEvents(!1)},_clearElements:function(){this._wireEvents(!0);this.element.removeAttr("class");this.element.removeAttr("style");this.element.html(this._orgEle.html())},_destroy:function(){this._clearElements()},loadContent:function(i,r){var u=this,o=n.extend({},t.mobile.SplitPane.toPage.defaults,r),f,e;if(isTargetString=typeof i=="string",isTargetString){if(f=this.element.find("[data-subpageurl='"+App.route.makeUrlAbsolute(i)+"']"),e=i,f.length&&!r.reload){u.transferPage(f,r,!0);return}f.length>0&&f.remove();App.loadView(i,o).done(function(i,r,f,o){var l;if(o){f.show();var h=r.pageId?r.pageId:"page_"+parseInt(Math.random().toFixed(3)*1e3),s=t.buildTag("div#"+h+".e-m-sp-right subpage").attr("data-ej-layout","pane"),c=t.buildTag("div#"+h+"_rightscroller").addClass("e-m-sp-rightwrapper");c.append(f);s.append(c.wrapInner("<div><\/div>"));u.element.append(s);s.css("position","absolute");t.isMobile()||(s.css("left",u.element.find(".e-m-sp-left").outerWidth()),s.width(u.element.closest(".appview").width()-u.element.find(".e-m-sp-left").outerWidth()-(u.model.renderMode=="android"?4:0)));u.model.renderMode=="android"&&u.model.android.showToolbar&&s.css("margin-top","42px");u.transferPage(s,r);App.activeSubPage=n(s);s.attr({"data-subpageurl":App.route.makeUrlAbsolute(e)});t.widget.init(s);u.model.allowRightPaneScrolling&&r.allowRightPaneScrolling&&(l=t.buildTag("div"),c.append(l.ejmScrollPanel({target:h+"_rightscroller",enableNativeScrolling:r.enableNativeScrolling,checkDOMChanges:r.checkDOMChanges||u.model.checkDOMChanges?!0:!1})))}else u.transferPage(f,r)}).fail(function(){})}else u.transferPage(i,r)},transferPage:function(i,r,u){var f,e,o;u||(f=window.innerHeight,(this.model.renderMode=="ios7"&&this.model.ios7.showRightPaneHeader||this.model.renderMode=="windows"&&this.model.windows.showRightHeader)&&(i.find(">div").hasClass("e-m-header")||(e=t.buildTag("div"),o=n(this.element).find(".e-m-sp-left div.e-m-lb li.e-m-state-active .e-m-lb-text").html(),i.prepend(e),e.ejmHeader({position:"normal",theme:this.model.theme,renderMode:this.model.renderMode,title:r.title,templateId:r.headerTemplateId,enableLeftButton:r.isHigherLevel?r.isHigherLevel:r.showLeftButton,leftButtonStyle:r.leftButtonStyle?r.leftButtonStyle:"back",leftButtonCaption:r.leftButtonCaption?r.leftButtonCaption:"back",enableRightButton:r.showRightButton,rightButtonCaption:r.rightButtonCaption,pnrightButtonClick:r.rightButtonClick,leftButtonCaption:r.leftButtonCaption,onleftButtonClick:r.leftButtonClick})),f=window.innerHeight-e.innerHeight),this.model.android.showToolbar&&t.isAndroid()&&(f=window.innerHeight-this._andTB.innerHeight),i.height(f));r.isHigherLevel?r.hashMonitoring=!0:t.isMobile()||(r.hashMonitoring=!1);App.transferPage(App.activeSubPage?App.activeSubPage:this._currentPage,i,r);this._layouts=this._layouts.add(i)}});t.mobile.SplitPane.toPage={defaults:{transition:"slide",reverse:!1,changeHash:!0,reloadSamePage:!0,samePage:!1}};t.mobile.SplitPane.HeaderLeftButtonStyle={Back:"back",Header:"header",Normal:"normal"};t.mobile.SplitPane.HeaderRightButtonStyle={Header:"header",Normal:"normal"}})(jQuery,Syncfusion)