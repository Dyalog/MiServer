/*!
*  filename: ej.mobile.menu.min.js
*  version : 13.2.0.39
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./ej.mobile.core.min","./ej.mobile.application.min","./../common/ej.unobtrusive.min","./../common/ej.touch.min","./ej.mobile.button.min","./ej.mobile.scrollpanel.min"],n):n()})(function(){(function(n,t,r){t.widget("ejmMenu","ej.mobile.Menu",{_setFirst:!0,_rootCSS:"e-m-menu",_tags:[{tag:"items",attr:["text","renderTemplate","android.imageClass","ios7.theme","ios7.buttonColor","ios7.buttonStyle","href","templateId","touchStart","touchend"],content:"template"}],defaults:{height:null,width:null,allowScrolling:!0,targetId:null,target:null,showOn:"tap",ios7:{type:"auto",showTitle:!0,title:"Title",showCancelButton:!0,cancelButtonText:"Cancel",cancelButtonColor:"blue",cancelButtonTouchEnd:null},android:{type:"contextual"},windows:{type:"contextual",renderDefault:!1},renderTemplate:!1,showScrollbars:!0,templateId:null,theme:"auto",renderMode:"auto",enablePersistence:!1,load:null,loadComplete:null,touchStart:null,touchEnd:null,hide:null,show:null,cssClass:"",items:[]},dataTypes:{ios7:{type:"enum",cancelButtonColor:"enum"},android:{type:"enum"},windows:{type:"enum"},renderMode:"enum",theme:"enum",enablePersistence:"boolean"},_init:function(){App.activePage||App.createAppView();this._storedTemplate=[];this._renderControl();this._wireEvents()},_load:function(){t.setRenderMode(this);t.setTheme(this);this._touchStart=this.model.touchStart;this._touchEnd=this.model.touchEnd;this.model.renderMode=="windows"&&t.isMobile()&&this.model.windows.renderDefault&&(this.model.theme="default");this._orgEle=this.element.clone();this._orgEle.find("ul").length&&(this.model.items=[]);this._indexVal=0;this.model.id=this.element[0].id;this.model.load&&this._trigger("load")},_renderItems:function(n){var f,o,e,u,s;if(n.model.items.length<1)for(e=this.element.find("li"),i=0;i<this.element.find("li").length;i++)f={},u=e[i],f.text=t.getAttrVal(u,"data-ej-text","Text"),f.android={imageClass:t.getAttrVal(u,"data-ej-android-imageclass","")},f.renderTemplate=t.getAttrVal(u,"data-ej-rendertemplate",!1),f.ios7={theme:t.getAttrVal(u,"data-ej-theme",this.model.theme),buttonColor:t.getAttrVal(u,"data-ej-ios7-buttoncolor","blue"),buttonStyle:t.getAttrVal(u,"data-ej-ios7-buttonstyle","normal")},f.href=t.getAttrVal(u,"data-ej-href",""),f.templateId=t.getAttrVal(u,"data-ej-templateid",r),f.touchStart=t.getAttrVal(u,"data-ej-touchstart",r),f.touchEnd=t.getAttrVal(u,"data-ej-touchend",r),this.model.items.push(f);else for(o=t.buildTag("ul.e-m-menu-hdr e-m-clearall"),e=this.model.items,i=0;i<this.model.items.length;i++)u=e[i],u.ios7=u.ios7==r?{buttonColor:"blue",theme:this.model.theme,buttonStyle:"normal"}:{buttonColor:u.ios7.buttonColor?u.ios7.buttonColor:"blue",theme:u.ios7.theme?u.ios7.theme:this.model.theme,buttonStyle:u.ios7.buttonStyle?u.ios7.buttonStyle:"normal"},u.android=u.android==r?{imageClass:""}:{imageClass:u.android.imageClass},u.renderTemplate=u.renderTemplate?u.renderTemplate:!1,u.href=u.href?u.href:"",u.touchStart=u.touchStart?u.touchStart:r,u.touchEnd=u.touchEnd?u.touchEnd:r,u.templateId=u.templateId?u.templateId:r,s=t.buildTag("li"),this.element.append(o.append(s))},_renderControl:function(){var r,i,n,u,f,e,o;this._load();this.element.addClass("e-m-"+this.model.renderMode+" e-m-"+this.model.theme+" "+this.model.cssClass);r=this;this._mcontainer=t.buildTag("div.e-m-menu-container");this._renderItems(r);this.model.renderTemplate&&(i=t.buildTag("ul.e-m-menu-hdr e-m-clearall"),t.getCurrentPage().find("#"+this.model.templateId).length?(this._itemTemplate=t.getCurrentPage().find("#"+this.model.templateId),this._itemTemplate=this._itemTemplate[0].nodeName&&this._itemTemplate[0].nodeName.toLowerCase()=="script"?t.getClearString(this._itemTemplate[0].innerHTML):this._itemTemplate):this._itemTemplate||(this._itemTemplate=this.element.children()),this.element.empty(),this._mcontainer.append(i.append(this._itemTemplate)),this.element.append(this._mcontainer),t.widget.init(this._mcontainer),(App.angularAppName||t.angular.defaultAppName)&&t.angular.compile(this._mcontainer));App.activePage.append(this.element);this._activePage=this.element.closest(".appview");this["_"+this.model.renderMode+"Properties"]&&this["_"+this.model.renderMode+"Properties"]();this.model.renderTemplate||(i=this.element.find("ul").addClass("e-m-menu-hdr e-m-clearall"),this.element.append(this._mcontainer.append(i)),this._menuLiItems=this.element.find("li").addClass("e-m-state-default e-m-user-select e-m-menuitem"),this._menuLiItems.first().addClass("e-m-firstitem"),this._menuLiItems.last().addClass("e-m-lastitem"),this._menuLiItems.each(function(n,t){r["_"+r.model.renderMode+"RenderMenu"](t,n)}),this.overFlowMenu&&this._menuLiItems.length>5&&(i.append(this._renderMenuItems(t.buildTag("li.e-m-state-default e-m-user-select e-m-menuitem e-m-lastitem e-m-text-center e-m-more","More",{},{"data-ej-android-imageclass":"e-m-menu-more e-m-fontimage"})[0])),this._overFlowMenuUl.find("li").first().addClass("e-m-firstitem")),this._menuLiItems.find("a").removeEleEmptyAttrs());this.model.renderMode=="ios7"&&(n=t.buildTag("div.e-m-menu-wrap"),this.element.append(n.append(this._mcontainer)),this.element.hasClass("e-m-menu-animate")&&this.element.append(this._ios7Container.append(n.append(this._mcontainer))),(this.model.ios7.showTitle||this.model.ios7.showCancelButton)&&(this.element.hasClass("e-m-menu-animate")?this._ios7Container.append(n):n.insertBefore(this.element.find(".e-m-menu-iconimg.e-m-bottom")),this.model.ios7.showTitle&&(u=t.buildTag("div.e-m-menu-title",this.model.ios7.title),this.element.hasClass("e-m-menu-animate")?n.prepend(u):u.insertAfter(this.element.find(".e-m-menu-iconimg.e-m-top")),this._mcontainer.addClass("e-m-title")),this.model.ios7.showCancelButton&&this.element.hasClass("e-m-menu-animate")&&(f=t.buildTag("a.e-m-menu-btn",this.model.ios7.cancelButtonText,{},{type:"button"}),e=t.buildTag("div.e-m-menu-cancel",f),this._ios7Container.append(e),f.ejmActionlink({theme:this.model.theme,renderMode:this.model.renderMode,ios7:{color:this.model.ios7.cancelButtonColor},windows:{renderDefault:this.model.windows.renderDefault}}),this._mcontainer.addClass("e-m-cancel"))));this.model.width&&this.element.css("width",this.model.width);this.model.height&&(o=this.element.outerHeight()-t.getDimension(this.element.find(".e-m-menu-container"),"outerHeight"),this.element.css("height",this.model.height+o).find(".e-m-menu-container").css("height",this.model.height));this._eleHeight=t.getDimension(this._getElement(),"outerHeight");this._containerHeight=t.getDimension(this._getElement().find(".e-m-menu-container"),"outerHeight");this._shown=!0;t.isIOS()&&this.element.hasClass("e-m-menu-animate")&&this.element.css("visibility","hidden");this.hide();this.model.loadComplete&&this._trigger("loadComplete")},_getElement:function(){return this.overFlowMenu?this.overFlowMenu:this.element},_ios7Properties:function(){this.element.addClass(this.model.ios7.type=="auto"?t.isLowerResolution()?"e-m-menu-animate":"e-m-menu-normal":"e-m-menu-"+this.model.ios7.type);this.element.hasClass("e-m-menu-normal")?(this.element.prepend(t.buildTag("div.e-m-menu-iconimg e-m-top e-m-fontimage")),this.element.addClass("e-m-corner-all e-m-abs"),this.element.append(t.buildTag("div.e-m-menu-iconimg e-m-bottom e-m-fontimage"))):(this.element.addClass("e-m-fixed"),this._ios7Container=t.buildTag("div.e-m-menu e-m-wrapper"));this._createOverlayDiv()},_androidProperties:function(){if(this.element.addClass("e-m-"+this.model.android.type+" e-m-margin-auto"),this.model.android.type!="optionsmenu"||this.model.renderTemplate)this.model.android.type=="contextual"&&this._createOverlayDiv();else{this.overFlowMenu=t.buildTag("div.e-m-menu e-m-android e-m-overflowmenu e-m-fixed e-m-"+this.model.theme+"#"+this.model.id+"_menu");var n=t.buildTag("div.e-m-menu-container");this._overFlowMenuUl=t.buildTag("ul.e-m-menu-hdr e-m-clearall");App.activePage.append(this.overFlowMenu.append(n.append(this._overFlowMenuUl)))}this.element.addClass(this.model.android.type=="popup"?"e-m-abs":"e-m-fixed")},_windowsProperties:function(){this.element.addClass("e-m-"+this.model.windows.type+" e-m-fixed")},_flatProperties:function(){this.element.addClass("e-m-abs")},_ios7RenderMenu:function(i,r){var u;this.model.items[r].renderTemplate?this._appendTemplate(i,r,u):(u=t.buildTag("a.e-m-menu-btn#"+this.model.id+r,this.model.items[r].text),n(i).empty().append(u),u.ejmActionlink({text:this.model.items[r].text,theme:this.model.items[r].ios7.theme,renderMode:this.model.renderMode,href:this.model.items[r].href,ios7:{color:this.model.items[r].ios7.buttonColor,style:this.model.items[r].ios7.buttonStyle},windows:{renderDefault:this.model.windows.renderDefault}}))},_androidRenderMenu:function(t,i){this.overFlowMenu&&i>=4&&this._menuLiItems.length>5?this._overFlowMenuUl.append(this._renderMenuItems(t,i)):(this.overFlowMenu&&n(t).addClass("e-m-text-center"),this._renderMenuItems(t,i))},_windowsRenderMenu:function(n,t){this._renderMenuItems(n,t)},_flatRenderMenu:function(n,t){this._renderMenuItems(n,t)},_renderMenuItems:function(i,r){var u,f,e;return r>=0?this.model.items[r].renderTemplate?this._appendTemplate(i,r,u):(u=t.buildTag("a.e-m-menuitem-anchor e-m-remove-shadow",this.model.renderMode=="android"?"":this.model.items[r].text,{},{href:this.model.items[r].href}),this.model.renderMode=="android"&&(f=t.buildTag("span.e-m-menuitem-span e-m-user-select",this.model.items[r].text),e=this.model.items[r].android.imageClass,e&&(u.append(t.buildTag("div","","",{"class":"menuimg e-m-margin-auto e-m-rel "+e})),f.addClass("e-m-texttop")),u.append(f),this.overFlowMenu?this._menuLiItems.length>5&&r>=4?this._addClass(f,i):(n(i).addClass("e-m-padding"),u.addClass("e-m-auto-hgt")):this._addClass(f,i)),n(i).empty().append(u)):t.getAttrVal(i,"data-ej-rendertemplate",!1)?this._appendTemplate(i,r,u):(u=t.buildTag("a.e-m-menuitem-anchor e-m-remove-shadow",this.model.renderMode=="android"?"":t.getAttrVal(i,"data-ej-text"),{},{href:t.getAttrVal(i,"data-ej-href","")}),this.model.renderMode=="android"&&(f=t.buildTag("span.e-m-menuitem-span e-m-user-select",t.getAttrVal(i,"data-ej-text")),e=t.getAttrVal(i,"data-ej-android-imageclass"),e&&(u.append(t.buildTag("div","","",{"class":"menuimg e-m-margin-auto e-m-rel "+e})),f.addClass("e-m-texttop")),u.append(f),this.overFlowMenu?this._menuLiItems.length>5&&r>=4?this._addClass(f,i):(n(i).addClass("e-m-padding"),u.addClass("e-m-auto-hgt")):this._addClass(f,i)),n(i).empty().append(u)),i},_appendTemplate:function(i,r){var u=t.getCurrentPage().find("#"+this.model.items[r].templateId);u.length?(this._storedTemplate[this._indexVal]=u[0].nodeName&&u[0].nodeName.toLowerCase()=="script"?t.getClearString(u[0].innerHTML):u,n(i).empty().append(this._storedTemplate[this._indexVal]),this._indexVal=this._indexVal+1):this._storedTemplate[this._indexVal]&&(n(i).empty().append(this._storedTemplate[this._indexVal]),this._indexVal=this._indexVal+1);t.widget.init(i)},_addClass:function(t,i){t.addClass("e-m-rel");n(i).addClass("e-m-border-top")},_positionMenu:function(n){this.model.renderMode=="android"&&this.overFlowMenu?this.overFlowMenu.css({right:"10px",left:"auto"}):this.model.renderMode=="ios7"&&this.element.hasClass("e-m-menu-normal")?this._normalPosition(n):this["_"+this.model[this.model.renderMode].type+"Position"]&&this["_"+this.model[this.model.renderMode].type+"Position"](n)},_normalPosition:function(n){var i,r;if(n.length){var u=this.element.width(),f=this._windowWidth,t=n.offset().left+n.outerWidth()/2-u/2;t<0?t=5:f-t<u&&(t=f-u);this.element.css({left:t+"px"});this.element.find(".e-m-menu-iconimg").css("left",n.offset().left+(n.outerWidth()-40)/2-t);i=n.offset().top;r=i+n.outerHeight();this._windowHeight>r+10+this._targetHeight?(this.element.css({top:r+10,bottom:"auto"}),this.element.find(".e-m-menu-iconimg.e-m-top").removeClass("e-m-state-hide").addClass("e-m-state-block"),this.element.find(".e-m-menu-iconimg.e-m-bottom").removeClass("e-m-state-block").addClass("e-m-state-hide")):i>this._targetHeight+10?(this.element.css({bottom:this._windowHeight-i+10,top:"auto"}),this.element.find(".e-m-menu-iconimg.e-m-bottom").removeClass("e-m-state-hide").addClass("e-m-state-block"),this.element.find(".e-m-menu-iconimg.e-m-top").removeClass("e-m-state-block").addClass("e-m-state-hide")):(this.element.css({top:r+10,bottom:"auto"}),this.element.find(".e-m-menu-iconimg.e-m-top").removeClass("e-m-state-hide").addClass("e-m-state-block"),this.element.find(".e-m-menu-iconimg.e-m-bottom").removeClass("e-m-state-block").addClass("e-m-state-hide"))}},_optionslistPosition:function(){this._setPosition()},_optionsmenuPosition:function(){this._setPosition()},_setPosition:function(n){this.model.renderMode=="flat"?this.element.css("top",this._tarOffsetTop+n.outerHeight()):this.overFlowMenu?this.overFlowMenu.css({right:"10px",left:"auto"}):this.element.css("left",(this._windowWidth-this.element.outerWidth())/2)},_popupPosition:function(n){var t=n.offset().top,i=t+n.outerHeight();this._windowWidth>n.offset().left+this.element.outerWidth()?this.element.css({left:n.offset().left,right:"auto"}):this.element.css({right:this._windowWidth-(n.offset().left+n.outerWidth()),left:"auto"});this._windowHeight>t+this._targetHeight?this.element.css({top:i+10,bottom:"auto"}):this.element.css({bottom:this._windowHeight-t+10,top:"auto"})},_resetPosition:function(){this.model.renderMode=="windows"&&this.model.windows.type=="contextual"&&t.isLowerResolution()?this.element.css({top:"auto",bottom:"auto"}).removeClass("e-m-right e-m-left e-m-landscape"):this.overFlowMenu?this.overFlowMenu.css({left:"auto",right:"auto"}):this.element.css({left:"auto",right:"auto"})},_contextualPosition:function(n){if(this.model.renderMode=="windows"){if(t.isLowerResolution()){var i=n.offset().top,r=i+n.outerHeight();this.element.hasClass("e-m-landscape")||(this._windowHeight>i+this._eleHeight?this.element.css({top:r+5}):this.element.css({bottom:this._windowHeight-i+5}))}}else this.element.css({top:(this._windowHeight-this._targetHeight)/2}),this.model.renderMode=="android"&&this.element.css({left:(this._windowWidth-this.element.outerWidth())/2})},_isPopUp:function(){return this.model.renderMode=="ios7"&&this.element.hasClass("e-m-menu-normal")||this.model.renderMode=="android"&&this.model.android.type=="popup"||this.model.renderMode=="windows"&&this.model.windows.type=="popup"||this.model.renderMode=="flat"},_scrollPanel:function(){var u,i,r,f;this._exceeded=!1;u=this._getElement();this._targetHeight=this._eleHeight;this.model.height?(i=this.model.height,this.model.allowScrolling&&(this._exceeded=!0)):(i=this._eleHeight-this._containerHeight,r=this._targetHeight,this._isPopUp()?r=r+this._tarOffsetTop+this._tar.outerHeight():this.model.renderMode!="windows"||this.model.windows.type!="contextual"||t.isLowerResolution()||(r=r+this._pageTop),r>this._windowHeight?(this._exceeded=!0,this._targetHeight=this.model.renderMode=="windows"&&this.model.windows.type=="contextual"&&t.isLowerResolution()?this._windowHeight:this._targetHeight>this._windowHeight?this._windowHeight-20:this._targetHeight,this._isPopUp()?this._targetHeight=this._tarOffsetTop+this._tar.outerHeight()>this._windowHeight/2?this._targetHeight>this._tarOffsetTop?this._tarOffsetTop-20:this._targetHeight:this._targetHeight-this._tar.outerHeight()-10:this.model.renderMode!="windows"||this.model.windows.type!="contextual"||t.isLowerResolution()||(this._targetHeight=this._pageTop+this._targetHeight-10>this._windowHeight?this._targetHeight-(this._windowHeight-this._pageTop):this._targetHeight-this._pageTop)):this.model.renderTemplate&&this.model.allowScrolling&&(this._exceeded=!0),i=this._targetHeight-i);this.model.renderMode=="windows"&&this.model.windows.type=="contextual"&&t.isLowerResolution()?n(u).css("height","auto"):n(u).css("height",this._targetHeight);this._scroller?(this._scroller.model.targetHeight=i,this._scroller.refresh(),this._exceeded?this._scroller.enable():this._scroller.disable()):this._exceeded&&this.model.allowScrolling&&(f=t.buildTag("div#"+this.model.id+"_scroll"),n(u).append(f),f.ejmScrollPanel({adjustFixedPosition:this.model.fixedPosition?!0:!1,theme:this.model.theme,renderMode:this.model.renderMode,target:n(u).find(".e-m-menu-container")[0],targetHeight:i,showScrollbars:this.model.showScrollbars,windows:{renderDefault:this.model.windows.renderDefault}}),this._scroller=t.getCurrentPage().find("#"+this.model.id+"_scroll").ejmScrollPanel("instance"))},_scrollRefresh:function(){this._scroller&&this._scroller.refresh()},_createOverlayDiv:function(){this._createdOverlay=!0;this._overlay=t.buildTag("div#"+this.model.id+"_overlay","","",{"class":"e-m-overlay e-m-menu-overlay e-m-"+this.model.renderMode});this._overlay.addClass(this.model.renderMode=="ios7"&&(this.model.ios7.type!="animate"||this.model.ios7.type=="auto"&&!t.isLowerResolution())?"e-m-overlay-hide":"e-m-state-hide");this.model.renderMode!="flat"&&this._overlay.addClass(this.model.renderMode=="ios7"&&this.model.ios7.type=="auto"?t.isLowerResolution()?"e-m-menu-animate":"e-m-menu-normal":"e-m-menu-"+this.model[this.model.renderMode].type);App.activePage.append(this._overlay)},_poranimationEnd:function(){this.model.height?this._mcontainer.height(this.model.height):this._mcontainer.height(this._mcontainer.find(".e-m-menu-hdr").height());this._mcontainer.unbind(t.transitionEndEvent(),this._poranimationEndDelegate);this._mcontainer.bind(t.transitionEndEvent(),this._animationCompleteDelegate)},_landanimationEnd:function(){this.model.width?this._mcontainer.width(this.model.width):this._mcontainer.width("100%");this._mcontainer.unbind(t.transitionEndEvent(),this._landanimationEndDelegate);this._mcontainer.bind(t.transitionEndEvent(),this._animationCompleteDelegate)},_animationComplete:function(){this._scrollPanel();this._mcontainer.unbind(t.transitionEndEvent(),this._animationCompleteDelegate)},_cancelMenu:function(t){var i=t.currentTarget,r;this.model.ios7.cancelButtonTouchEnd?(r={item:n(i),text:n(i).text()},this.model.cancelTouch=this.model.ios7.cancelButtonTouchEnd,this._trigger("cancelTouch",r)):this.hide()},_showOverFlowMenu:function(){this.hide();this._shown=!0;this._setPosition();this.model.renderMode=="android"&&this.model.android.type=="optionsmenu"&&this.overFlowMenu.css({right:"10px",left:"auto"});this.overFlowMenu.css({display:"block"});this._scrollRefresh()},_docClick:function(i){(this._evt=i,n(i.target).closest(".e-m-menu").length||this.model.targetId&&(i.currentTarget.id==this.model.targetId||i.target.id==this.model.targetId)||this.model.android.type=="optionsmenu"&&t.getCurrentPage().find("#"+this.model.id+"_menu").find("*").index(i.target)>0)||this.hide()},_addSelection:function(){this._currentMenu.closest(".e-m-menu-container").find(".e-m-state-active").removeClass("e-m-state-active").addClass("e-m-state-default");this._currentMenu.removeClass("e-m-state-default").addClass("e-m-state-active")},_removeSelection:function(){this._currentMenu.removeClass("e-m-state-active").addClass("e-m-state-default");this.model.renderMode=="ios7"&&this._currentMenu.find(".e-m-btnwrapper").removeClass("e-m-state-active").addClass("e-m-state-default")},_onTouchStartHandler:function(i){var r,u;this._currentMenu=n(i.currentTarget);r=n(i.currentTarget).index();this._addSelection();t.isWindows()&&t._touchStartPoints(i,this);this.model.renderMode=="windows"&&t.isLowerResolution()&&this._currentMenu.addClass(t._getSkewClass(n(this._currentMenu),i.pageX,i.pageY));u={item:this._currentMenu,text:this._currentMenu.text()};this.model.touchStart=this.model.items[r].touchStart?this.model.items[r].touchStart:this._touchStart;this.model.touchStart&&this._trigger("touchStart",u);this._scroll=!1;t.listenTouchEvent(this._li,t.moveEvent(),this._touchMoveDelegate);this.overFlowMenu&&t.listenTouchEvent(this._overflowLi,t.moveEvent(),this._touchMoveDelegate)},_onTouchMoveHandler:function(n){(!t.isWindows()||t.isWindows()&&t._isTouchMoved(n,this))&&(this._scroll=!0,this._removeSelection(),this.model.renderMode=="windows"&&t.isLowerResolution()&&t._removeSkewClass(this._currentMenu))},_onTouchEndHandler:function(i){var r,u;this._removeSelection();r=n(i.currentTarget).index();this.model.renderMode=="windows"&&t.isLowerResolution()&&t._removeSkewClass(this._currentMenu);this._scroll||(u={item:n(this._currentMenu),text:n(this._currentMenu).text()},this.model.android.type=="optionsmenu"&&this.overFlowMenu&&this.element.find("li").index(this._currentMenu)==4&&this._showOverFlowMenu(),this.model.touchEnd=this.model.items[r].touchEnd?this.model.items[r].touchEnd:this._touchEnd,this.model.touchEnd&&this._trigger("touchEnd",u));t.listenTouchEvent(this._li,t.moveEvent(),this._touchMoveDelegate,!0);this.overFlowMenu&&t.listenTouchEvent(this._overflowLi,t.moveEvent(),this._touchMoveDelegate,!0)},_updateWindowHW:function(){this._windowWidth=this._activePage.outerWidth();this._windowHeight=this._activePage.outerHeight()},_orientation:function(){if(this._updateWindowHW(),this.overFlowMenu&&this.overFlowMenu.is(":visible")){this._showOverFlowMenu();return}if(this._shown){if(this.model.renderMode=="ios7"&&t.isLowerResolution()||this.model.renderMode=="android"&&this.model.android.type=="optionsmenu"){this._afterHide();return}if(this.hide(),this.model.renderMode=="windows")return;this._afterHide()}},_resize:function(){var r,u,f,e,i;this.model.renderMode=="ios7"?(t.isLowerResolution()&&this.model.ios7.type=="auto"&&this.element.hasClass("e-m-menu-normal")||!t.isLowerResolution()&&this.model.ios7.type=="auto"&&this.element.hasClass("e-m-menu-animate"))&&(this._isInsideDP=n(this.element).hasClass("e-m-dp-menu"),this._isInsideTP=n(this.element).hasClass("e-m-tp-menu"),this._isInsideDP?(r=n(this.element).attr("id").split("_")[0],u=n("#"+r).ejmDatePicker("instance"),u._refresh()):this._isInsideTP?(f=n(this.element).attr("id").split("_")[0],e=n("#"+f).ejmTimePicker("instance"),e._refresh()):this._refresh()):this.model.renderMode=="windows"&&(i=n(this.element).find(".e-m-menu-container").hasClass("e-m-tn-container")||n(this.element).find(".e-m-menu-container").hasClass("e-m-tn-nonecontainer"),this.model.windows.type=="contextual"&&this._shown&&!t.isLowerResolution()&&this.hide(),this.model.windows.type=="popup"&&(t.isLowerResolution()&&n(".e-m-menu-container").outerWidth()!=n(".e-m-menu-container").innerWidth()||!t.isLowerResolution()&&n(".e-m-menu-container").outerWidth()==n(".e-m-menu-container").innerWidth())?this._refresh():this.model.windows.type=="contextual"&&(t.isLowerResolution()&&!i||!t.isLowerResolution()&&i||t.isLowerResolution()&&t.isPortrait()&&this.element.hasClass("e-m-landscape")||t.isLowerResolution()&&!t.isPortrait()&&!this.element.hasClass("e-m-landscape"))&&this._refresh());this._shown&&(this._updateWindowHW(),this._positionMenu(this._tar),this._scrollPanel())},_afterHide:function(){var n=this;setTimeout(function(){n.show(null,!0)},350)},_displayMenu:function(){this._shown||(n(this._overlay).hasClass(this.model.renderMode=="ios7"&&(this.model.ios7.type!="animate"||this.model.ios7.type=="auto"&&!t.isLowerResolution())?"e-m-overlay-hide":"e-m-state-hide")&&n(this._overlay).css("pointer-events","none"),this.element.hide());this.element.unbind(t.transitionEndEvent(),this._displayMenuDelegate)},_createDelegates:function(){this._showDelegate=n.proxy(this.show,this);this._cancelMenuDelegate=n.proxy(this._cancelMenu,this);this._docClickDelegate=n.proxy(this._docClick,this);this._poranimationEndDelegate=n.proxy(this._poranimationEnd,this);this._landanimationEndDelegate=n.proxy(this._landanimationEnd,this);this._animationCompleteDelegate=n.proxy(this._animationComplete,this);this._orientationDelegate=n.proxy(this._orientation,this);this._resizeDelegate=n.proxy(this._resize,this);this._displayMenuDelegate=n.proxy(this._displayMenu,this);this._touchStartDelegate=n.proxy(this._onTouchStartHandler,this);this._touchMoveDelegate=n.proxy(this._onTouchMoveHandler,this);this._touchEndDelegate=n.proxy(this._onTouchEndHandler,this)},_wireEvents:function(i){var r,u;this._createDelegates();r=i?"unbind":"bind";this.model.renderTemplate||(this._li=this.element.find("li"),t.listenEvents([this._li,this._li],[t.startEvent(),t.endEvent()],[this._touchStartDelegate,this._touchEndDelegate],i));this._tapEvent=this.model.showOn=="tap"?t.tapEvent():this.model.showOn=="taphold"?t.tapHoldEvent():this.model.showOn;this.model.targetId?t.listenTouchEvent(t.getCurrentPage().find("#"+this.model.targetId),this._tapEvent,this._showDelegate,i):this.model.target&&(u=typeof this.model.target=="string"?t.getCurrentPage().find("#"+this.model.target):this.model.target,t.listenTouchEvent(u,this._tapEvent,this._showDelegate,i));this.overFlowMenu&&(this._overflowLi=n("#"+this.model.id+"_menu").find("li"),t.listenEvents([this._overflowLi,this._overflowLi],[t.startEvent(),t.endEvent()],[this._touchStartDelegate,this._touchEndDelegate],i));this.model.renderMode=="ios7"&&this.model.ios7.showCancelButton&&t.listenTouchEvent(this.element.find(".e-m-menu-cancel"),t.endEvent(),this._cancelMenuDelegate,i);t.listenTouchEvent(n(document),t.endEvent(),this._docClickDelegate,i);n(window)[r]("orientationchange",this._orientationDelegate);t.isTouchDevice()||n(window)[r]("resize",this._resizeDelegate)},_setModel:function(n){var r=!1,t,i;for(t in n)i="_set"+t.charAt(0).toUpperCase()+t.slice(1),this[i]?this[i](n[t]):r=!0;r&&this._refresh()},_bindEvent:function(n){t.listenTouchEvent(t.getCurrentPage().find("#"+this.model.targetId),this._tapEvent,this._showDelegate,n)},_setShowOn:function(n){n&&(this._bindEvent(!0),this.model.showOn=n,this._tapEvent=this.model.showOn=="tap"?t.tapEvent():this.model.showOn=="taphold"?t.tapHoldEvent():this.model.showOn,this._bindEvent())},_setTheme:function(t){if(t)if(this.model.theme=t,this.element.removeClass("e-m-dark e-m-light e-m-default").addClass("e-m-"+this.model.theme),this.model.renderMode=="ios7"){if(n(this.element.find(".e-m-btnwrapper")).length>0){var i=n(this.element.find("a.e-m-btn")),r=this;i.each(function(t,i){n(i).ejmActionlink("model.theme",r.model.theme)})}}else this.model.renderMode=="android"&&this.overFlowMenu&&this.overFlowMenu.removeClass("e-m-dark e-m-light e-m-default").addClass("e-m-"+this.model.theme)},_enableDisable:function(t,i){t&&n(this.element.find("li.e-m-menuitem")[t-1])[i?"removeClass":"addClass"]("e-m-state-disabled")},_enableDisableOverFlow:function(t,i){this.overFlowMenu&&t&&n(this.overFlowMenu.find("li.e-m-menuitem")[t-1])[i?"removeClass":"addClass"]("e-m-state-disabled")},_enabledisable:function(n){this.element[n?"removeClass":"addClass"]("e-m-state-disabled")},_enabledisableOverflow:function(n){this.overFlowMenu&&this.overFlowMenu[n?"removeClass":"addClass"]("e-m-state-disabled")},_refresh:function(){this._destroy();this.element.addClass("e-m-menu");this._renderControl();this._wireEvents()},_clearElement:function(){this.element.removeAttr("class").removeAttr("style");this.overFlowMenu&&this.overFlowMenu.remove();this._overlay&&this._overlay.remove();this.element.html(this._orgEle.html())},_destroy:function(){this._scroller=r;this._wireEvents(!0);this._clearElement()},show:function(i,r){var u;this._updateWindowHW();this.model.renderMode=="windows"&&this.model.windows.type=="contextual"&&!t.isLowerResolution()&&this._shown&&this.hide();(this._isPopUp()||this.model.renderMode=="windows"&&t.isLowerResolution())&&!r&&(this._tar=n(i.currentTarget));this._tarOffsetTop=this._tar?this._tar.offset().top-this._activePage.offset().top:0;this._tarOffsetLeft=this._tar?this._tar.offset().left-this._activePage.offset().left:0;this._e=i?i:this._e?this._e:this._evt;this._e&&(this._pageLeft=this._e.pageX-this._activePage.offset().left,this._pageTop=this._e.pageY-this._activePage.offset().top);this._shown||(t.isIOS()&&this.element.hasClass("e-m-menu-animate")&&this.element.css("visibility","visible"),this._resetPosition(),this.model.renderMode=="windows"&&this.model.windows.type=="contextual"?t.isLowerResolution()?(this._mcontainer.removeClass("e-m-tn-nonecontainer").addClass("e-m-tn-container"),t.isPortrait()?(this._positionMenu(this._tar),this._mcontainer.height(5),this._mcontainer.width(this.model.width?this.model.width:"100%"),this._mcontainer.bind(t.transitionEndEvent(),this._poranimationEndDelegate)):(u=this._e.pageX<this._windowWidth/2,this.element.removeClass(u?"e-m-right":"e-m-left").addClass(u?"e-m-left e-m-landscape":"e-m-right e-m-landscape"),this._mcontainer.width(5),this.element.css("top",0),this._mcontainer.height(this.model.height?this.model.height:this._windowHeight),this._mcontainer.bind(t.transitionEndEvent(),this._landanimationEndDelegate))):(this._scrollPanel(),u=this._pageTop+this._targetHeight<this._windowHeight,this.element.css(u?{top:this._pageTop}:{bottom:this._windowHeight-this._pageTop}),u=this._pageLeft+this.element.outerWidth()<this._windowWidth,this.element.css(u?{left:this._pageLeft}:{right:this._windowWidth-this._pageLeft}),this.element.css({display:"block"}),this._scrollRefresh()):(this._scrollPanel(),this.model.renderMode=="flat"?this._setPosition(this._tar):this._positionMenu(this._tar),this.model.renderMode=="android"&&this.model.android.type=="optionslist"&&this.element.css({left:(this._windowWidth-this.element.outerWidth())/2}),this.model.renderMode=="ios7"&&this.element.hasClass("e-m-menu-animate")||this.model.renderMode=="android"&&(this.model.android.type=="optionslist"||this.model.android.type=="optionsmenu")?(this.overFlowMenu&&this.overFlowMenu.css({display:"none"}),this.element.css({bottom:0})):this.model.renderMode!="ios7"||this.model.ios7.type=="animate"&&(this.model.ios7.type!="auto"||t.isLowerResolution())?this.element.css({display:"block"}):this.element.hasClass("e-m-state-disabled")?this.element.show().css({opacity:"0.2"}):this.element.show().css({opacity:"1"}),this._overlay&&this._overlay.removeClass(this.model.renderMode=="ios7"&&(this.model.ios7.type!="animate"||this.model.ios7.type=="auto"&&!t.isLowerResolution())?"e-m-overlay-hide":"e-m-state-hide").css("pointer-events","auto"),this._scrollRefresh()));this.model.renderMode!="ios7"||t.isLowerResolution()||this.element.addClass("e-m-menu-showtrans").removeClass("e-m-menu-hidetrans");this._shown=!0;this.model.show&&this._trigger("show")},hide:function(){this._shown&&(this.model.renderMode!="ios7"||t.isLowerResolution()||this.element.removeClass("e-m-menu-showtrans").addClass("e-m-menu-hidetrans"),this._shown=!1,this.element.find(".e-m-menuitem.e-m-state-active").removeClass("e-m-state-active").addClass("e-m-state-default"),this.model.renderMode=="ios7"&&this.element.hasClass("e-m-menu-animate")||this.model.renderMode=="android"&&(this.model.android.type=="optionslist"||this.model.android.type=="optionsmenu")?(this.element.css({bottom:-t.getDimension(this.element,"outerHeight")+"px"}),this.overFlowMenu&&this.overFlowMenu.css({display:"none"})):this.model.renderMode=="windows"&&this.model.windows.type=="contextual"?t.isLowerResolution()?(this._mcontainer.addClass("e-m-tn-nonecontainer"),this._mcontainer.css({width:"0",height:"0"})):this.element.css({left:"auto",top:"auto",display:"none"}):this.model.renderMode!="ios7"||this.model.ios7.type=="animate"&&(this.model.ios7.type!="auto"||t.isLowerResolution())?this.element.css("display","none"):this.element.css({opacity:"0"}).bind(t.transitionEndEvent(),this._displayMenuDelegate),this._overlay&&(this._overlay.addClass(this.model.renderMode=="ios7"&&(this.model.ios7.type!="animate"||this.model.ios7.type=="auto"&&!t.isLowerResolution())?"e-m-overlay-hide":"e-m-state-hide"),this.model.ios7.type=="animate"&&(this.model.ios7.type!="auto"||t.isLowerResolution())||this._overlay.css("pointer-events","none")),this.model.hide&&this._trigger("hide"))},enableItem:function(n){this._enableDisable(n,!0)},disableItem:function(n){this._enableDisable(n,!1)},enableOverFlowItem:function(n){this._enableDisableOverFlow(n,!0)},disableOverFlowItem:function(n){this._enableDisableOverFlow(n,!1)},enable:function(){this._enabledisable(!0)},disable:function(){this._enabledisable(!1)},enableOverFlow:function(){this._enabledisableOverflow(!0)},disableOverFlow:function(){this._enabledisableOverflow(!1)},addItem:function(t,i){n(this._orgEle.children()).length?i?t.insertBefore(n(this._orgEle.children().children()[i-1])):this._orgEle.children().append(t):i?this.model.items.splice(i-1,0,t):this.model.items.push(t);this._refresh()},removeItem:function(t){n(this._orgEle.children()).length?t?n(this._orgEle.children().children()[t-1]).remove():n(this._orgEle.children().children()).last().remove():t?this.model.items.splice(t-1,1):this.model.items.pop();this._refresh()}});t.mobile.Menu.IOS7={};t.mobile.Menu.IOS7.Type={Auto:"auto",Animate:"animate",Normal:"normal"};t.mobile.Menu.IOS7.CancelButtonColor={Blue:"blue",Gray:"gray",Black:"black",Green:"green",Red:"red"};t.mobile.Menu.IOS7.ButtonStyle={Normal:"normal",Back:"back",Header:"header",Dialog:"dialog"};t.mobile.Menu.Android={};t.mobile.Menu.Android.Type={Contextual:"contextual",Popup:"popup",OptionsList:"optionslist",OptionsMenu:"optionsmenu"};t.mobile.Menu.Windows={};t.mobile.Menu.Windows.Type={Contextual:"contextual",Popup:"popup"};t.mobile.Menu.ShowOn={Tap:"tap",TapHold:"taphold"}})(jQuery,Syncfusion)});