/*!
*  filename: ej.radialmenubase.min.js
*  version : 13.2.0.29
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./ej.core.min"],n):n()})(function(){(function(n,t){t.widget("ejRadialMenuBase","ej.RadialMenuBase",{_tags:[{tag:"items",attr:["imageName","imagePath","imageUrl","windows.text","flat.text","text",[{tag:"items",attr:["imageName","imagePath","imageUrl","windows.text","flat.text","text"]}]]}],defaults:{radius:150,cssClass:"",enableAnimation:!0,items:[]},dataTypes:{enableAnimation:"boolean",items:"array"},_initialization:function(){var t,i;if(this.element.addClass(this.model.cssClass),this._svgLink="http://www.w3.org/2000/svg",this.model.items.length<1)for(this._radialItems=n(this.element.find(">ul").children()),t=0;t<this._radialItems.length;t++)if(this.model.items.push(this._itemsObjectCollection(n(this._radialItems[t]))),n(this._radialItems[t]).find("ul").children().length>0)for(this._nestedRadialItems=n(this._radialItems[t]).find("ul").children(),this.model.items[t].items=[],i=0;i<this._nestedRadialItems.length;i++)this.model.items[t].items.push(this._itemsObjectCollection(n(this._nestedRadialItems[i])));this._itemCount=this.model.items.length;n(this.element.children()).remove();this._startXY=this.model.radius;this._diameter=2*this.model.radius},_itemsObjectCollection:function(n){var t={};return t.windows={text:n.attr("data-ej-windows-text")},t.flat={text:n.attr("data-ej-flat-text")},t.text=n.attr("data-ej-text"),t.imageName=n.attr("data-ej-imagename"),t.imagePath=n.attr("data-ej-imagepath"),t.imageUrl=n.attr("data-ej-imageUrl"),t},_createSVGElement:function(){var t=document.createElementNS(this._svgLink,"svg");return this.model.radius!=null&&(t.setAttribute("width",this._diameter),t.setAttribute("height",this._diameter)),n(t)},_createGroupElement:function(t){var i=document.createElementNS(this._svgLink,"g");return t&&i.setAttribute("id",t),n(i)},_createImageElement:function(n,t,i,r,u){return imgLoc=i.imageUrl?i.imageUrl:this.model.renderMode.toLowerCase()!="flat"?i.imagePath+"/"+this.model.renderMode.toLowerCase()+"/"+this.model.theme.toLowerCase()+"/"+i.imageName:i.imagePath+"/"+this.model.renderMode.toLowerCase()+"/"+i.imageName,image=document.createElementNS(this._svgLink,"image"),image.setAttribute("width",n),image.setAttribute("height",t),image.setAttributeNS("http://www.w3.org/1999/xlink","href",imgLoc),image.setAttribute("x",r),image.setAttribute("y",u),image},_createTextElement:function(n,t,i,r){var u=document.createElementNS(this._svgLink,"text");return u.setAttribute("x",n),u.setAttribute("y",t),u.setAttribute("class",i),u.textContent=r,u},_createPathElement:function(n,t,i){var r=document.createElementNS(this._svgLink,"path");return r.setAttribute("index",n),r.setAttribute("d",t),r.setAttribute("class",i),r},_createPolygonElement:function(n,t){var i=document.createElementNS(this._svgLink,"polygon");return i.setAttribute("points","10,10 0,10 5,5"),i.setAttribute("index",n),i.setAttribute("fill","#FFFFFF"),i.setAttribute("transform",t),i},_createCircleElement:function(n,t,i,r){var u=document.createElementNS(this._svgLink,"circle");return u.setAttribute("cx",n),u.setAttribute("cy",t),u.setAttribute("r",i),u.setAttribute("class",r),u},_calculateRadialArc:function(n,t,i,r,u){for(var a,l,h=0,e=2*Math.PI*h,o=2*Math.PI*(h+1/n),s=.5*t*Math.min(this._diameter,this._diameter),v=i*t*Math.min(this._diameter,this._diameter),c=r*s,y=u*s,p=360/n,w=p/2,b=[],k=[],d=[],g=[],nt=[],tt=[],it=[],rt=[],ut=[],ft=[],et=[],ot=[],st=[],ht=[],f=0;f<n;f++)a=-.5*Math.PI,e=e+a,o=o+a-1e-6,ht[f]=o-e<Math.PI?0:1,l=(e+o)/2,b[f]=this._startXY+s*Math.cos(e),k[f]=this._startXY+s*Math.sin(e),d[f]=this._startXY+s*Math.cos(o),g[f]=this._startXY+s*Math.sin(o),nt[f]=this._startXY+v*Math.cos(l),tt[f]=this._startXY+v*Math.sin(l),it[f]=this._startXY+c*Math.cos(e),rt[f]=this._startXY+c*Math.sin(e),ut[f]=this._startXY+c*Math.cos(o),ft[f]=this._startXY+c*Math.sin(o),et[f]=this._startXY+y*Math.cos(l),ot[f]=this._startXY+y*Math.sin(l),st[f]=w,h+=1/n,e=2*Math.PI*h,o=2*Math.PI*(h+1/n),w+=p;return{x1:b,y1:k,x2:d,y2:g,midx:nt,midy:tt,dStartX:it,dStartY:rt,dEndX:ut,dEndY:ft,dmidx:et,dmidy:ot,deg:st,longArc:ht,radius:s,dradius:c}},_renderRadialMenu:function(){var n,s,h;this._radialSVG=this._createSVGElement();this._radialChildSVG=this._createSVGElement();this._childArcGroup=this._createGroupElement("childarcgroup");this._polygonGroup=this._createGroupElement("polygongroup");this._polygonGroup.attr("transform","translate(-10,-10)");this._radialArcGroup=this._createGroupElement();this._menuItemsGroup=this._createGroupElement("menuitemsgroup");this._menuItemsGroup.attr("transform","translate(-10,-10)");this._menuItemsArcPaths=this._createGroupElement("menuitemsarcpaths");this._menuItemsPaths=this._createGroupElement();this._radialSVGDiv=t.buildTag("div#"+this._id+"_svgdiv."+this._prefix+"abs").css("height",this._diameter);this._radialCircleSVGDiv=t.buildTag("div#"+this._id+"_circlesvgdiv."+this._prefix+"abs "+this._prefix+"displaynone");this._radialChildSVGDiv=t.buildTag("div#"+this._id+"_childsvgdiv."+this._prefix+"abs "+this._prefix+"displaynone");var i=this._calculateRadialArc(this._itemCount,1,.28,.8,.95),r=this._calculateRadialArc(this._itemCount,.79,null,.97,null),u=this._calculateRadialArc(this._itemCount,.8,null,.3,null);for(n=0;n<this._itemCount;n++){var o="M "+i.x1[n]+" "+i.y1[n]+" A "+i.radius+" "+i.radius+" 0 "+i.longArc[n]+" 1 "+i.x2[n]+" "+i.y2[n]+" L "+i.dEndX[n]+" "+i.dEndY[n]+" A "+i.dradius+" "+i.dradius+" 1 "+i.longArc[n]+" 0 "+i.dStartX[n]+" "+i.dStartY[n]+" z",c="M "+r.x1[n]+" "+r.y1[n]+" A "+r.radius+" "+r.radius+" 0 "+r.longArc[n]+" 1 "+r.x2[n]+" "+r.y2[n]+" L "+r.dEndX[n]+" "+r.dEndY[n]+" A "+r.dradius+" "+r.dradius+" 1 "+r.longArc[n]+" 0 "+r.dStartX[n]+" "+r.dStartY[n]+" z",l="M "+u.x1[n]+" "+u.y1[n]+" A "+u.radius+" "+u.radius+" 0 "+u.longArc[n]+" 1 "+u.x2[n]+" "+u.y2[n]+" L "+u.dEndX[n]+" "+u.dEndY[n]+" A "+u.dradius+" "+u.dradius+" 1 "+u.longArc[n]+" 0 "+u.dStartX[n]+" "+u.dStartY[n]+" z",f=this.model.items[n],e=this._createGroupElement(),a=this.model.renderMode?f[this.model.renderMode].text:f.text;this._menuItemsArcPaths.append(this._createPathElement(n,c,""+this._prefix+"arcbgcolor"));this._menuItemsPaths.append(this._createPathElement(n,l,""+this._prefix+"itembgcolor"));this._radialArcGroup.append(this._createPathElement(n,o,""+this._prefix+"default"));e.attr({cursor:"context-menu",index:n});e.append(this._createImageElement(20,20,f,i.midx[n],i.midy[n]-10));e.append(this._createTextElement(i.midx[n]+10,i.midy[n]+25,""+this._prefix+"textcolor",a));this._menuItemsGroup.append(e);f.items&&(s=i.deg[n]>270?"translate("+(i.dmidx[n]+5)+","+(i.dmidy[n]+15)+")rotate("+i.deg[n]+")":"translate("+(i.dmidx[n]+10)+","+(i.dmidy[n]+10)+")rotate("+i.deg[n]+")",this._childArcGroup.append(this._createPathElement(n,o,""+this._prefix+"childdefault")),this._polygonGroup.append(this._createPolygonElement(n,s)))}h=this._createCircleElement(this._startXY,this._startXY,this._startXY/3.5,""+this._prefix+"circlebgcolor");this._menuItemsArcGroup=this._radialArcGroup.clone();this._radialChildSVG.append(this._menuItemsPaths).append(this._menuItemsGroup).append(this._menuItemsArcGroup).append(this._childArcGroup).append(this._polygonGroup).append(this._menuItemsArcPaths).append(h);this._radialContainer.append(this._radialSVGDiv.append(this._radialCircleSVGDiv.append(this._radialSVG.append(this._radialArcGroup))).append(this._radialChildSVGDiv.append(this._radialChildSVG)))},_renderRadialChildMenu:function(n){var f,i,e;for(this._menuChildSVG=this._createSVGElement(),this._menuChildSVGDiv=t.buildTag("div#"+this._id+"_menuchildsvgdiv."+this._prefix+"abs"),this.model.enableAnimation?(this._radialChildSVGDiv.removeClass(""+this._prefix+"radialshow").addClass(""+this._prefix+"scalehide"),this._radialChildAnimate(),this._menuChildSVGDiv.addClass(""+this._prefix+"scaleshow")):this._radialChildSVGDiv.addClass(""+this._prefix+"displaynone"),this._radial.removeClass(this.model.imageClass).addClass(""+this._prefix+"backarrow "+this.model.backImageClass+""),this._childItemsGroup=this._createGroupElement("childitemsgroup"),this._childItemsGroup.attr("transform","translate(-10,-10)"),this._childItemArcGroup=this._createGroupElement(),this._childItemsArcPaths=this._createGroupElement("childitemsarcpaths"),this._childItemsPaths=this._createGroupElement(),f=this.model.items[n].items,childcount=f.length,pointsVal=this._calculateRadialArc(childcount,1,.28,.8,null),pointsArcVal=this._calculateRadialArc(childcount,.79,null,.97,null),pointsItemVal=this._calculateRadialArc(childcount,.8,null,.3,null),i=0;i<childcount;i++){var o="M "+pointsVal.x1[i]+" "+pointsVal.y1[i]+" A "+pointsVal.radius+" "+pointsVal.radius+" 0 "+pointsVal.longArc[i]+" 1 "+pointsVal.x2[i]+" "+pointsVal.y2[i]+" L "+pointsVal.dEndX[i]+" "+pointsVal.dEndY[i]+" A "+pointsVal.dradius+" "+pointsVal.dradius+" 1 "+pointsVal.longArc[i]+" 0 "+pointsVal.dStartX[i]+" "+pointsVal.dStartY[i]+" z",s="M "+pointsArcVal.x1[i]+" "+pointsArcVal.y1[i]+" A "+pointsArcVal.radius+" "+pointsArcVal.radius+" 0 "+pointsArcVal.longArc[i]+" 1 "+pointsArcVal.x2[i]+" "+pointsArcVal.y2[i]+" L "+pointsArcVal.dEndX[i]+" "+pointsArcVal.dEndY[i]+" A "+pointsArcVal.dradius+" "+pointsArcVal.dradius+" 1 "+pointsArcVal.longArc[i]+" 0 "+pointsArcVal.dStartX[i]+" "+pointsArcVal.dStartY[i]+" z",h="M "+pointsItemVal.x1[i]+" "+pointsItemVal.y1[i]+" A "+pointsItemVal.radius+" "+pointsItemVal.radius+" 0 "+pointsItemVal.longArc[i]+" 1 "+pointsItemVal.x2[i]+" "+pointsItemVal.y2[i]+" L "+pointsItemVal.dEndX[i]+" "+pointsItemVal.dEndY[i]+" A "+pointsItemVal.dradius+" "+pointsItemVal.dradius+" 1 "+pointsItemVal.longArc[i]+" 0 "+pointsItemVal.dStartX[i]+" "+pointsItemVal.dStartY[i]+" z",r=this._createGroupElement(),u=this.model.items[n].items[i],c=this.model.renderMode?u[this.model.renderMode].text:u.text;this._childItemArcGroup.append(this._createPathElement(i,o,""+this._prefix+"default"));this._childItemsArcPaths.append(this._createPathElement(i,s,""+this._prefix+"arcbgcolor"));this._childItemsPaths.append(this._createPathElement(i,h,""+this._prefix+"itembgcolor"));r.attr({cursor:"context-menu",index:i});r.append(this._createImageElement(20,20,u,pointsVal.midx[i],pointsVal.midy[i]-10));r.append(this._createTextElement(pointsVal.midx[i]+10,pointsVal.midy[i]+25,""+this._prefix+"textcolor",c));this._childItemsGroup.append(r)}e=this._createCircleElement(this._startXY,this._startXY,this._startXY/3.5,""+this._prefix+"circlebgcolor");this._radialSVGDiv.append(this._menuChildSVGDiv.append(this._menuChildSVG.append(this._childItemsPaths).append(this._childItemsGroup).append(this._childItemArcGroup).append(this._childItemsArcPaths).append(e)))},_setModel:function(){this._refresh()},_refresh:function(){this._destroy();this._init()},_destroy:function(){this.element.removeAttr("class style").children().remove()}})})(jQuery,Syncfusion)});