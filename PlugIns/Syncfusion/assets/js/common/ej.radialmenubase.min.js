/*!
*  filename: ej.radialmenubase.min.js
*  version : 12.3
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./ej.core.min"],n):n()})(function(){(function(n,t){t.widget("ejRadialMenuBase","ej.RadialMenuBase",{_initialization:function(){this._svgLink="http://www.w3.org/2000/svg";this._menuItems=n(this.element.children()).clone();n(this.element.children()).remove();this._menuCount=n(this._menuItems.children()).length;this._startXY=this.model.width/2},_createSVGElement:function(){var n=document.createElementNS(this._svgLink,"svg");return this.model.width!=null&&(n.setAttribute("width",this.model.width),n.setAttribute("height",this.model.width)),n},_createGroupElement:function(){return document.createElementNS(this._svgLink,"g")},_createImageElement:function(){return document.createElementNS(this._svgLink,"image")},_createTextElement:function(){return document.createElementNS(this._svgLink,"text")},_createPathElement:function(){return document.createElementNS(this._svgLink,"path")},_createPolygonElement:function(){return document.createElementNS(this._svgLink,"polygon")},_createCircleElement:function(){return document.createElementNS(this._svgLink,"circle")},_calculateRadialArc:function(n,t,i,r,u){for(var a,l,h=0,e=2*Math.PI*h,o=2*Math.PI*(h+1/n),s=.5*t*Math.min(this.model.width,this.model.width),v=i*t*Math.min(this.model.width,this.model.width),c=r*s,y=u*s,p=360/n,w=p/2,b=[],k=[],d=[],g=[],nt=[],tt=[],it=[],rt=[],ut=[],ft=[],et=[],ot=[],st=[],ht=[],f=0;f<n;f++)a=-.5*Math.PI,e=e+a,o=o+a-1e-6,ht[f]=o-e<Math.PI?0:1,l=(e+o)/2,b[f]=this._startXY+s*Math.cos(e),k[f]=this._startXY+s*Math.sin(e),d[f]=this._startXY+s*Math.cos(o),g[f]=this._startXY+s*Math.sin(o),nt[f]=this._startXY+v*Math.cos(l),tt[f]=this._startXY+v*Math.sin(l),it[f]=this._startXY+c*Math.cos(e),rt[f]=this._startXY+c*Math.sin(e),ut[f]=this._startXY+c*Math.cos(o),ft[f]=this._startXY+c*Math.sin(o),et[f]=this._startXY+y*Math.cos(l),ot[f]=this._startXY+y*Math.sin(l),st[f]=w,h+=1/n,e=2*Math.PI*h,o=2*Math.PI*(h+1/n),w+=p;return{x1:b,y1:k,x2:d,y2:g,midx:nt,midy:tt,dStartX:it,dStartY:rt,dEndX:ut,dEndY:ft,dmidx:et,dmidy:ot,deg:st,longArc:ht,radius:s,dradius:c}},_renderRadial:function(){this._radialSVG=this._createSVGElement();this._radialChildSVG=this._createSVGElement();this._radial=t.buildTag("div."+this._prefix+"radial "+this._prefix+"abs "+this.model.imageClass+"").css({left:this._startXY-22+"px",top:this._startXY-22+"px"});this._radialContainer=t.buildTag("div."+this._prefix+"rel").css({height:this.model.width,width:this.model.width});this.element.append(this._radialContainer.append(this._radial)).addClass(""+this._prefix+"radialmenu "+this._prefix+"overlow "+this._prefix+"user-select");this._renderRadialMenu()},_renderRadialMenu:function(){var i,l,k,o,a,v,y,s,e,c;this._childArcGroup=this._createGroupElement();this._childArcGroup.setAttribute("id","childarcgroup");this._polygonGroup=this._createGroupElement();this._polygonGroup.setAttribute("id","polygongroup");this._polygonGroup.setAttribute("transform","translate(-10,-10)");this._radialArcGroup=this._createGroupElement();this._menuItemsGroup=this._createGroupElement();this._menuItemsGroup.setAttribute("id","menuitemsgroup");this._menuItemsGroup.setAttribute("transform","translate(-10,-10)");this._menuItemsArcPaths=this._createGroupElement();this._menuItemsArcPaths.setAttribute("id","menuitemsarcpaths");this._menuItemsPaths=this._createGroupElement();this._radialSVGDiv=t.buildTag("div#radialsvgdiv."+this._prefix+"abs").css("height",this.model.width);this._radialCircleSVGDiv=t.buildTag("div#radialcirclesvgdiv."+this._prefix+"abs "+this._prefix+"displaynone");this._radialChildSVGDiv=t.buildTag("div#radialchildsvgdiv."+this._prefix+"abs "+this._prefix+"displaynone");var r=this._calculateRadialArc(this._menuCount,1,.28,.8,.95),u=this._calculateRadialArc(this._menuCount,.79,null,.97,null),f=this._calculateRadialArc(this._menuCount,.8,null,.3,null),p,w,b;for(i=0;i<this._menuCount;i++){p="M "+r.x1[i]+" "+r.y1[i]+" A "+r.radius+" "+r.radius+" 0 "+r.longArc[i]+" 1 "+r.x2[i]+" "+r.y2[i]+" L "+r.dEndX[i]+" "+r.dEndY[i]+" A "+r.dradius+" "+r.dradius+" 1 "+r.longArc[i]+" 0 "+r.dStartX[i]+" "+r.dStartY[i]+" z";w="M "+u.x1[i]+" "+u.y1[i]+" A "+u.radius+" "+u.radius+" 0 "+u.longArc[i]+" 1 "+u.x2[i]+" "+u.y2[i]+" L "+u.dEndX[i]+" "+u.dEndY[i]+" A "+u.dradius+" "+u.dradius+" 1 "+u.longArc[i]+" 0 "+u.dStartX[i]+" "+u.dStartY[i]+" z";b="M "+f.x1[i]+" "+f.y1[i]+" A "+f.radius+" "+f.radius+" 0 "+f.longArc[i]+" 1 "+f.x2[i]+" "+f.y2[i]+" L "+f.dEndX[i]+" "+f.dEndY[i]+" A "+f.dradius+" "+f.dradius+" 1 "+f.longArc[i]+" 0 "+f.dStartX[i]+" "+f.dStartY[i]+" z";n(n(this._menuItems.children()[i]).find("ul")).length!=0&&(l=this._createPathElement(),l.setAttribute("class",""+this._prefix+"childdefault"),l.setAttribute("index",i),l.setAttribute("d",p),k=r.deg[i]>270?"translate("+(r.dmidx[i]+5)+","+(r.dmidy[i]+15)+")rotate("+r.deg[i]+")":"translate("+(r.dmidx[i]+10)+","+(r.dmidy[i]+10)+")rotate("+r.deg[i]+")",o=this._createPolygonElement(),o.setAttribute("points","10,10 0,10 5,5"),o.setAttribute("index",i),o.setAttribute("fill","#FFFFFF"),o.setAttribute("transform",k),n(this._childArcGroup).append(l),n(this._polygonGroup).append(o));a=this._createPathElement();a.setAttribute("class",""+this._prefix+"default");a.setAttribute("index",i);a.setAttribute("d",p);v=this._createPathElement();v.setAttribute("class",""+this._prefix+"bgcolor");v.setAttribute("index",i);v.setAttribute("d",w);n(this._menuItemsArcPaths).append(v);y=this._createPathElement();y.setAttribute("class",""+this._prefix+"bgcolor");y.setAttribute("index",i);y.setAttribute("d",b);n(this._menuItemsPaths).append(y);n(this._radialArcGroup).append(a);s=this._createGroupElement();s.setAttribute("cursor","context-menu");s.setAttribute("index",i);var h=this._createImageElement(),d=n(this._menuItems.children("li")[i]).attr("data-ej-imagepath"),g=n(this._menuItems.children("li")[i]).attr("data-ej-imagename"),nt=n(this._menuItems.children("li")[i]).attr("data-ej-imageurl"),tt=nt?nt:this.model.renderMode.toLowerCase()!="flat"?d+"/"+this.model.renderMode.toLowerCase()+"/"+this.model.theme.toLowerCase()+"/"+g:d+"/"+this.model.renderMode.toLowerCase()+"/"+g;h.setAttribute("width",20);h.setAttribute("height",20);h.setAttributeNS("http://www.w3.org/1999/xlink","href",tt);h.setAttribute("x",r.midx[i]);h.setAttribute("y",r.midy[i]-10);n(s).append(h);e=this._createTextElement();e.textContent=n(this._menuItems.children("li")[i]).attr("data-ej-text");e.setAttribute("x",r.midx[i]+10);e.setAttribute("y",r.midy[i]+25);e.setAttribute("style","text-anchor: middle;font-size: 12px;font-family: Segoe UI;");e.setAttribute("class",""+this._prefix+"textcolor");n(s).append(e);n(this._menuItemsGroup).append(s)}c=this._createCircleElement();c.setAttribute("cx",this._startXY);c.setAttribute("cy",this._startXY);c.setAttribute("r",this._startXY/3.5);c.setAttribute("class",""+this._prefix+"bgcolor");n(this._radialSVG).append(this._radialArcGroup);this._menuItemsArcGroup=n(this._radialArcGroup).clone();n(this._radialChildSVG).append(this._menuItemsPaths).append(this._menuItemsGroup).append(this._menuItemsArcGroup).append(this._childArcGroup).append(this._polygonGroup).append(this._menuItemsArcPaths).append(c);this._radialContainer.append(this._radialSVGDiv.append(n(this._radialCircleSVGDiv).append(this._radialSVG)).append(n(this._radialChildSVGDiv).append(this._radialChildSVG)));this._arcEnterLeaveHandler=n.proxy(this._arcEnterLeaveHandler,this);this._arcClickHandler=n.proxy(this._arcClickHandler,this);this._menuItemHandler=n.proxy(this._menuItemHandler,this);this._menuItemArcClickHandler=n.proxy(this._menuItemArcClickHandler,this);this._menuItemTouchStartHandler=n.proxy(this._menuItemStartHandler,this);this._menuItemArcTouchStartHandler=n.proxy(this._menuItemArcStartHandler,this);t.listenEvents([n(this._childArcGroup).children(),n(this._childArcGroup).children(),n(this._childArcGroup).children()],["mouseenter","mouseleave",t.tapEvent()],[this._arcEnterLeaveHandler,this._arcEnterLeaveHandler,this._arcClickHandler],!1);t.listenEvents([n(this._polygonGroup).children(),n(this._polygonGroup).children()],["mouseenter",t.tapEvent()],[this._arcEnterLeaveHandler,this._arcClickHandler],!1);t.listenEvents([n(this._menuItemsGroup).children(),n(this._menuItemsGroup).children(),n(this._menuItemsGroup).children()],["mouseenter",t.tapEvent(),t.startEvent()],[this._menuItemHandler,this._menuItemHandler,this._menuItemTouchStartHandler],!1);t.listenEvents([n(this._menuItemsPaths).children(),n(this._menuItemsPaths).children(),n(this._menuItemsPaths).children(),n(this._menuItemsArcGroup).children(),n(this._menuItemsArcGroup).children()],["mouseenter","mouseleave",t.tapEvent(),t.tapEvent(),t.startEvent()],[this._menuItemHandler,this._menuItemHandler,this._menuItemHandler,this._menuItemArcClickHandler,this._menuItemArcTouchStartHandler],!1)},_arcClickHandler:function(i){var s,a,r,v,y,p,h,o,l;this._menuChildSVG=this._createSVGElement();this._radialChildSVGDiv.removeClass(""+this._prefix+"radialshow").addClass(""+this._prefix+"scalehide");this._radialChildAnimate();this._radial.removeClass(this.model.imageClass).addClass(""+this._prefix+"backarrow "+this.model.backImageClass+"");this._index=parseInt(n(i.target).attr("index"));s=n(this._menuItems.children()[this._index]).children();a=n(s.children()).length;this._childItemsGroup=this._createGroupElement();this._childItemsGroup.setAttribute("id","childitemsgroup");this._childItemsGroup.setAttribute("transform","translate(-10,-10)");this._childItemArcGroup=this._createGroupElement();this._childItemsArcPaths=this._createGroupElement();this._childItemsArcPaths.setAttribute("id","childitemsarcpaths");this._childItemsPaths=this._createGroupElement();var w,b,k,u=this._calculateRadialArc(a,1,.28,.8,null),f=this._calculateRadialArc(a,.79,null,.97,null),e=this._calculateRadialArc(a,.8,null,.3,null);for(r=0;r<a;r++){w="M "+u.x1[r]+" "+u.y1[r]+" A "+u.radius+" "+u.radius+" 0 "+u.longArc[r]+" 1 "+u.x2[r]+" "+u.y2[r]+" L "+u.dEndX[r]+" "+u.dEndY[r]+" A "+u.dradius+" "+u.dradius+" 1 "+u.longArc[r]+" 0 "+u.dStartX[r]+" "+u.dStartY[r]+" z";b="M "+f.x1[r]+" "+f.y1[r]+" A "+f.radius+" "+f.radius+" 0 "+f.longArc[r]+" 1 "+f.x2[r]+" "+f.y2[r]+" L "+f.dEndX[r]+" "+f.dEndY[r]+" A "+f.dradius+" "+f.dradius+" 1 "+f.longArc[r]+" 0 "+f.dStartX[r]+" "+f.dStartY[r]+" z";k="M "+e.x1[r]+" "+e.y1[r]+" A "+e.radius+" "+e.radius+" 0 "+e.longArc[r]+" 1 "+e.x2[r]+" "+e.y2[r]+" L "+e.dEndX[r]+" "+e.dEndY[r]+" A "+e.dradius+" "+e.dradius+" 1 "+e.longArc[r]+" 0 "+e.dStartX[r]+" "+e.dStartY[r]+" z";v=this._createPathElement();v.setAttribute("class",""+this._prefix+"default");v.setAttribute("index",r);v.setAttribute("d",w);n(this._childItemArcGroup).append(v);y=this._createPathElement();y.setAttribute("class",""+this._prefix+"bgcolor");y.setAttribute("index",r);y.setAttribute("d",b);n(this._childItemsArcPaths).append(y);p=this._createPathElement();p.setAttribute("class",""+this._prefix+"bgcolor");p.setAttribute("index",r);p.setAttribute("d",k);n(this._childItemsPaths).append(p);h=this._createGroupElement();h.setAttribute("cursor","context-menu");h.setAttribute("index",r);var c=this._createImageElement(),d=n(s.children("li")[r]).attr("data-ej-imagepath"),g=n(s.children("li")[r]).attr("data-ej-imagename"),nt=n(s.children()[r]).attr("data-ej-imageurl"),tt=nt?nt:this.model.renderMode.toLowerCase()!="flat"?d+"/"+this.model.renderMode.toLowerCase()+"/"+this.model.theme.toLowerCase()+"/"+g:d+"/"+this.model.renderMode.toLowerCase()+"/"+g;c.setAttribute("width",20);c.setAttribute("height",20);c.setAttributeNS("http://www.w3.org/1999/xlink","href",tt);c.setAttribute("x",u.midx[r]);c.setAttribute("y",u.midy[r]-10);n(h).append(c);o=this._createTextElement();o.textContent=n(s.children()[r]).attr("data-ej-text");o.setAttribute("x",u.midx[r]+10);o.setAttribute("y",u.midy[r]+25);o.setAttribute("style","text-anchor: middle;font-size: 12px;font-family: Segoe UI;");o.setAttribute("class",""+this._prefix+"textcolor");n(h).append(o);n(this._childItemsGroup).append(h)}l=this._createCircleElement();l.setAttribute("cx",this._startXY);l.setAttribute("cy",this._startXY);l.setAttribute("r",this._startXY/3.5);l.setAttribute("class",""+this._prefix+"bgcolor");this._menuChildSVGDiv=t.buildTag("div#menuchildsvgdiv."+this._prefix+"abs "+this._prefix+"scaleshow");this._radialSVGDiv.append(n(this._menuChildSVGDiv).append(n(this._menuChildSVG).append(this._childItemsPaths).append(this._childItemsGroup).append(this._childItemArcGroup).append(this._childItemsArcPaths).append(l)));this._childItemArcClickHandler=n.proxy(this._childItemArcClickHandler,this);this._childItemHandler=n.proxy(this._childItemHandler,this);this._childItemArcTouchStartHandler=n.proxy(this._childItemArcStartHandler,this);this._childItemTouchStartHandler=n.proxy(this._childItemStartHandler,this);t.listenEvents([n(this._childItemArcGroup).children(),n(this._childItemArcGroup).children(),n(this._childItemsGroup).children(),n(this._childItemsGroup).children(),n(this._childItemsGroup).children(),n(this._childItemsPaths).children(),n(this._childItemsPaths).children(),n(this._childItemsPaths).children()],[t.startEvent(),t.tapEvent(),t.startEvent(),t.tapEvent(),"mouseenter",t.tapEvent(),"mouseleave","mouseenter"],[this._childItemArcTouchStartHandler,this._childItemArcClickHandler,this._childItemTouchStartHandler,this._childItemHandler,this._childItemHandler,this._childItemHandler,this._childItemHandler,this._childItemHandler],!1)},_arcEnterLeaveHandler:function(t){var i=parseInt(n(t.target).attr("index"));t.type=="mouseenter"?t.currentTarget.tagName=="path"?n(t.target).attr("class",""+this._prefix+"active"):n(n("#childarcgroup path[index="+i+"]")).attr("class",""+this._prefix+"active"):t.currentTarget.tagName=="path"?n(t.target).attr("class",""+this._prefix+"childdefault"):n(n("#childarcgroup path[index="+i+"]")).attr("class",""+this._prefix+"childdefault")},_menuItemHandler:function(t){var i=parseInt(n(t.currentTarget).attr("index")),r;t.type=="mouseenter"?n(n("#menuitemsarcpaths path[index="+i+"]")).attr("class",""+this._prefix+"childdefault"):t.type=="mouseleave"?n(n("#menuitemsarcpaths path[index="+i+"]")).attr("class",""+this._prefix+"bgcolor"):(r=t.currentTarget.tagName=="path"?n(n(n(this._menuItemsGroup).children()[i]).children()).text():n(t.currentTarget).text(),this.model[this._endEvent]&&this._trigger(this._endEvent,{text:r,index:i,childIndex:null}),this.model.select&&this._trigger("select",{text:r,index:i,childIndex:null}))},_childItemHandler:function(t){var i=parseInt(n(t.currentTarget).attr("index")),r;t.type=="mouseenter"?n(n("#childitemsarcpaths path[index="+i+"]")).attr("class",""+this._prefix+"childdefault"):t.type=="mouseleave"?n(n("#childitemsarcpaths path[index="+i+"]")).attr("class",""+this._prefix+"bgcolor"):(r=t.currentTarget.tagName=="path"?n(n(n(this._childItemsGroup).children()[i]).children()).text():n(t.currentTarget).text(),this.model[this._endEvent]&&this._trigger(this._endEvent,{text:r,index:this._index,childIndex:i}),this.model.select&&this._trigger("select",{text:r,index:this._index,childIndex:i}))},_childItemArcClickHandler:function(t){var i=parseInt(n(t.target).attr("index")),r=n(n(n(this._childItemsGroup).children()[i]).children("text")).text();this.model[this._endEvent]&&this._trigger(this._endEvent,{text:r,index:this._index,childIndex:i});this.model.select&&this._trigger("select",{text:r,index:this._index,childIndex:i})},_menuItemArcClickHandler:function(t){var i=parseInt(n(t.target).attr("index")),r=n(n(n(this._menuItemsGroup).children()[i]).children("text")).text();this.model[this._endEvent]&&this._trigger(this._endEvent,{text:r,index:i,childIndex:null});this.model.select&&this._trigger("select",{text:r,index:i,childIndex:null})},_menuItemStartHandler:function(t){var i=parseInt(n(t.currentTarget).attr("index")),r=t.currentTarget.tagName=="path"?n(n(n(this._menuItemsGroup).children()[i]).children()).text():n(t.currentTarget).text();this.model[this._startEvent]&&this._trigger(this._startEvent,{text:r,index:i,childIndex:null})},_childItemStartHandler:function(t){var i=parseInt(n(t.currentTarget).attr("index")),r=t.currentTarget.tagName=="path"?n(n(n(this._childItemsGroup).children()[i]).children()).text():n(t.currentTarget).text();this.model[this._startEvent]&&this._trigger(this._startEvent,{text:r,index:this._index,childIndex:i})},_childItemArcStartHandler:function(t){var i=parseInt(n(t.target).attr("index")),r=n(n(n(this._childItemsGroup).children()[i]).children("text")).text();this.model[this._startEvent]&&this._trigger(this._startEvent,{text:r,index:this._index,childIndex:i})},_menuItemArcStartHandler:function(t){var i=parseInt(n(t.target).attr("index")),r=n(n(n(this._menuItemsGroup).children()[i]).children("text")).text();this.model[this._startEvent]&&this._trigger(this._startEvent,{text:r,index:i,childIndex:null})},_setModel:function(){this._refresh()},_refresh:function(){this._destroy();this._init()},_destroy:function(){this.element.removeAttr("class style").children().remove();this.element.append(this._menuItems)}})})(jQuery,Syncfusion)})