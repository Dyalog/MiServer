/*!
*  filename: ej.checkbox.min.js
*  version : 13.3.0.18
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min"],n):n()})(function(){(function(n,t,i){t.widget("ejCheckBox","ej.CheckBox",{_rootCSS:"e-checkbox",element:null,model:null,validTags:["input"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,htmlAttributes:{},checked:!1,enabled:!0,enableTriState:!1,showRoundedCorner:!1,enablePersistence:!1,cssClass:"",text:"",enableRTL:!1,idPrefix:"ej",size:"small",checkState:null,validationRules:null,validationMessage:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",enableTriState:"boolean",size:"enum",checkState:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},observables:["checked"],checked:t.util.valueFunction("checked"),_init:function(){var n=t.browserInfo();this._isIE8=n.name=="msie"&&n.version=="8.0"?!0:!1;this._setValue();this._renderControl();this.model.enableRTL&&this._setRTL();this.model.enabled&&this._wireEvents();this._setEnabled(this.model.enabled);this.model.validationRules!=null&&(this._initValidator(),this._setValidation());this._addAttr(this.model.htmlAttributes)},_setRTL:function(){this.maindiv.addClass("e-rtl")},_initValidator:function(){var t=this;this.wrapper.closest("form").validate({ignore:".e-hidden",errorClass:"e-validation-error",errorElement:"span",errorPlacement:function(t,i){$container=i.closest(".e-widget").next().is("label")?i.closest(".e-widget").next():i.closest(".e-widget");n(t).insertAfter($container)}})},_setValidation:function(){var u,i,r,f;this.wrapper.find("input").rules("add",this.model.validationRules);u=this.wrapper.closest("form").validate();name=this.wrapper.find("input").attr("name");u.settings.messages[name]={};for(i in this.model.validationRules)if(r=null,!t.isNullOrUndefined(this.model.validationRules[i])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[i])){u.settings.messages[name][i]=n.validator.messages[i];for(f in this.model.validationMessage)i==f?r=this.model.validationMessage[i]:""}else r=this.model.validationRules.messages[i];u.settings.messages[name][i]=r!=null?r:n.validator.messages[i]}},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i.span.addClass(n):t=="required"?i.element.attr(t,n):t=="disabled"&&n=="disabled"?i._setEnabled(!1):t=="checked"&&n=="checked"?i.checked()instanceof Array?i._updateCheckedItem():i._checked(!0):i.span.attr(t,n)})},_setModel:function(n){var i,r,u;for(i in n)switch(i){case"checked":t.util.getVal(n[i])instanceof Array?(r=t.util.getVal(n[i]),u=r[r.length-1],this.model.value==u&&(this._checked(),this._isChecked=!0)):(this._isChecked=t.util.getVal(n[i]),this._isChecked?this._checked():this._unChecked(),this.checked(t.util.getVal(n[i])));break;case"enableTriState":n[i]&&(this._indeterminateState=n[i],this._setIndeterminate(this._indeterminateState));break;case"checkState":this.model.enableTriState&&(this.model.checkState=n[i],this._changeState(this.model.checkState),this.checked()instanceof Array?this._updateCheckedItem():(n[i]="check")?this._hiddenInput.removeAttr("name"):this._hiddenInput.attr("name",this.model.name));break;case"cssClass":this._changeSkin(n[i]);break;case"enableRTL":n[i]?this._setRTL():this.maindiv.removeClass("e-rtl");break;case"text":this._setText(n[i]);break;case"validationRules":this.model.validationRules!=null&&(this.wrapper.find("input").rules("remove"),this.model.validationMessage=null);this.model.validationRules=n[i];this._setValidation();break;case"validationMessage":this.model.validationMessage=n[i];this._setValidation();break;case"id":this._setIdAttr(n[i]);break;case"name":this.element.attr("name",n[i]);(!this._isChecked||this.spanImg.hasClass("e-chk-indeter"))&&this._hiddenInput.attr("name",n[i]);this.model.name=n[i];break;case"value":this.element.attr("value",n[i]);break;case"size":this._setSize(n[i]);break;case"showRoundedCorner":this._setRoundedCorner(n[i]);break;case"enabled":this._setEnabled(n[i]);break;case"htmlAttributes":this._addAttr(n[i])}},_destroy:function(){this.element.removeClass("e-checkbox e-input");this.element.insertBefore(this.wrapper);this.wrapper.remove()},_changeSkin:function(t){this.model.cssClass!=t&&(this.wrapper.removeClass(this.model.cssClass).addClass(t),n("#"+this.model.idPrefix+this.model.id+"_wrapper").removeClass(this.model.cssClass).addClass(t))},_setValue:function(){this._indeterminateState=!1;this._isChecked=!1;t.isNullOrUndefined(this.element.attr("id"))||(this.model.id=this.element.attr("id"));t.isNullOrUndefined(this.element.attr("name"))||(this.model.name=this.element.attr("name"));t.isNullOrUndefined(this.element.attr("value"))||this.element.attr("value")==""||(this.model.value=this.element.attr("value"));this.checked()||t.isNullOrUndefined(this.element.attr("checked"))||(this._isChecked=!0);t.isNullOrUndefined(this.model.name)&&(this.model.name=this.model.id)},_setSize:function(n){n==t.CheckboxSize.Medium?this.innerdiv.removeClass("e-chkbox-small").addClass("e-chkbox-medium"):this.innerdiv.removeClass("e-chkbox-medium").addClass("e-chkbox-small")},_setRoundedCorner:function(n){n?this.span.addClass("e-corner"):this.span.removeClass("e-corner")},_setEnabled:function(n){n?this.enable():this.disable()},_setCheckBoxState:function(){this.model.enableTriState&&(this.model.checkState=="indeterminate"?this._indeterminateState=!0:this.model.checkState=="check"?this._isChecked=!0:this.model.checkState=="uncheck"&&(this._isChecked=!1))},_renderControl:function(){this._setCheckBoxState();this.maindiv=t.buildTag("span.e-chkbox-wrap e-widget "+this.model.cssClass+"#"+this.model.idPrefix+this.model.id,"",{},{role:"checkbox",tabindex:0});this.innerdiv=n("<div><\/div>");this._setSize(this.model.size);this.span=n("<span><\/span>");this.spanImg=n('<span class="e-chk-image e-icon"><\/span>').attr("role","presentation");this.element.addClass("e-input");this.model.name=t.isNullOrUndefined(this.model.name)?this.model.id:this.model.name;this.model.value=t.isNullOrUndefined(this.model.value)?!0:this.model.value;this.element.attr({id:this.model.id,name:this.model.name,value:this.model.value});this._hiddenInput=t.buildTag("input#"+this.model.name+"_hidden","",{},{type:"hidden",value:!1});this._setRoundedCorner(this.model.showRoundedCorner);this.checked()&&this._setCheckedItem(this.checked());this._isChecked?(this.spanImg.addClass("e-chk-activeicon"),this.span.addClass("e-chk-act"),this.maindiv.attr({"aria-checked":!0})):(this.span.addClass("e-chk-inact"),this.maindiv.attr({"aria-checked":!1}),this._hiddenInput.attr("name",this.model.name));this.checked()instanceof Array||this.checked(this._isChecked);this.span.append(this.spanImg);this.innerdiv.append(this.span);this.maindiv.insertBefore(this.element);this.maindiv.append(this.element);this.maindiv.append(this._hiddenInput);this.maindiv.append(this.innerdiv);this.wrapper=this.maindiv;this._setTextWrapper(this.model.text);this.chkbx=this.element;this.model.enableTriState==!0&&this._indeterminateState==!0&&this._setIndeterminate(this._indeterminateState);this.checked()instanceof Array&&this._updateCheckedItem()},_changeState:function(n){n=="indeterminate"?(this.spanImg.removeClass("e-chk-activeicon").addClass("e-chk-indetericon"),this.span.removeClass("e-chk-act").removeClass("e-chk-inact").addClass("e-chk-indeter"),this.wrapper.attr({"aria-checked":"mixed"}),this.wrapper.find("input").prop("enableTriState",!0),this.checked()instanceof Array||this.checked(null)):n=="check"?(this.spanImg.removeClass("e-chk-indetericon").addClass("e-chk-activeicon"),this.span.removeClass("e-chk-act").removeClass("e-chk-inact").removeClass("e-chk-indeter").addClass("e-chk-act"),this.wrapper.attr({"aria-checked":!0})):n=="uncheck"&&(this.spanImg.removeClass("e-chk-activeicon").removeClass("e-chk-indetericon"),this.span.removeClass("e-chk-act").removeClass("e-chk-indeter").addClass("e-chk-inact"),this.wrapper.attr({"aria-checked":!1}))},_setIndeterminate:function(n){n?(this.spanImg.removeClass("e-chk-activeicon").addClass("e-chk-indetericon"),this.span.removeClass("e-chk-act").removeClass("e-chk-inact").addClass("e-chk-indeter"),this.wrapper.attr({"aria-checked":"mixed"}),this.wrapper.find("input").prop("enableTriState",!0),this.model.checkState="indeterminate",this.checked()instanceof Array||this.checked(null),this._hiddenInput.attr("name",this.model.name)):(this.wrapper.find(".e-chk-indeter").removeClass("e-chk-indeter"),this.wrapper.find(".e-chk-image").removeClass("e-chk-indetericon"),this.wrapper.find("input").removeAttr("enableTriState"),this.wrapper.find("input").prop("enableTriState",!1),this.checked()?this._checked():this._unChecked())},_setTextWrapper:function(n){n!=""&&(this.txtSpan=t.buildTag("div.e-text",n),this.wrapper.append(this.txtSpan),this.model.enableRTL&&this._setRTL())},_setText:function(n){this.model.text==""&&n!=""?this._setTextWrapper(n):this.txtSpan.html(n)},_setIdAttr:function(t){n("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper");this.element.attr("id",t)},_wireEvents:function(){this._on(this.wrapper,"click",this._checkedHandler);this._isIE8&&this._on(n("label[for="+this.model.id+"]"),"click",function(){this.wrapper.click()});this._on(this.wrapper,"focus",this._focusIn);this._on(this.wrapper,"focusout",this._focusOut)},_unWireEvents:function(){this._off(this.wrapper,"click");this._isIE8&&this._off(n("label[for="+this.model.id+"]"),"click");this._off(this.wrapper,"focus");this._off(this.wrapper,"focusout")},_focusIn:function(){n(this.wrapper).addClass("e-focus");n(this.wrapper).bind("keydown",n.proxy(this._checkUnCheck,this))},_focusOut:function(){n(this.wrapper).removeClass("e-focus");n(this.wrapper).unbind("keydown",n.proxy(this._checkUnCheck,this))},_checkUnCheck:function(n){n.keyCode==32&&(n.preventDefault(),this._checkedHandler())},_checkedHandler:function(n){var t={isChecked:this._isChecked,event:n};return!0==this._trigger("beforeChange",t)?!1:(this.wrapper.find("span:first").hasClass("e-chk-inact")?(this._checked(),this.checked()instanceof Array||this.checked(!0),this.model.enableTriState&&(this._indeterminateState=!0)):this.wrapper.find("span:first").hasClass("e-chk-act")?this.model.enableTriState==!0&&this._indeterminateState==!0?(this._setIndeterminate(!0),this.checked()instanceof Array||this.checked(!0)):(this._unChecked(),this.checked()instanceof Array||this.checked(!1)):this.wrapper.find("span:first").hasClass("e-chk-indeter")&&(this.checked()instanceof Array?this._isChecked=!1:this.checked(!1),this._setIndeterminate(!1),this._indeterminateState=!1),this.checked()instanceof Array?this._updateCheckedItem():this._isChecked=this.checked(),t={isChecked:this._isChecked,checkState:this.model.checkState,event:n},this._trigger("change",t),!0)},_checked:function(){this.wrapper.find("span:first").removeClass("e-chk-inact").addClass("e-chk-act");this.wrapper.find(".e-chk-image").removeClass("e-chk-indetericon").addClass("e-chk-activeicon");this.wrapper.attr({"aria-checked":!0});this.wrapper.find("input[type=checkbox]").prop("checked",!0);this.model.checkState="check";this._hiddenInput.removeAttr("name")},_unChecked:function(){this.wrapper.find("span:first").removeClass("e-chk-act").addClass("e-chk-inact");this.wrapper.attr({"aria-checked":!1});this.wrapper.find(".e-chk-image").removeClass("e-chk-activeicon").removeClass("e-chk-indetericon");this.wrapper.find("input[type=checkbox]").removeAttr("checked");this.model.checkState="uncheck";this._hiddenInput.attr("name",this.model.name)},_setCheckedItem:function(n){if(t.isNullOrUndefined(n)||n==""||n instanceof Array){if(n instanceof Array&&!t.isNullOrUndefined(this.model.value)&&this.model.value!="")for(var i=0;i<n.length;i++)n[i]==this.model.value&&(this._isChecked=!0)}else this._isChecked=!0},_updateCheckedItem:function(){t.isNullOrUndefined(this.model.value)||this.model.value==""||this.wrapper.find("span:first").hasClass("e-chk-indeter")||(n.inArray(this.model.value,this.checked())<0&&this.wrapper.find("span:first").hasClass("e-chk-act")?(this.checked().push(this.model.value),this._isChecked=!0,this._hiddenInput.removeAttr("name")):n.inArray(this.model.value,this.checked())>-1&&this.wrapper.find("span:first").hasClass("e-chk-inact")&&(this.checked().splice(n.inArray(this.model.value,this.checked()),1),this._isChecked=!1,this._hiddenInput.attr("name",this.model.name)))},disable:function(){this.wrapper.hasClass("e-disable")||(this.wrapper.addClass("e-disable").attr("aria-disabled",!0),this.element.attr("disabled","disabled"),this._isIE8&&this.span.addClass("e-disable"),this._unWireEvents(),this.model.enabled=!1)},enable:function(){this.wrapper.hasClass("e-disable")&&(this.wrapper.removeClass("e-disable").attr("aria-disabled",!1),this.element.removeAttr("disabled"),this._isIE8&&this.span.removeClass("e-disable"),this._wireEvents(),this.model.enabled=!0)},isChecked:function(){if(this._isChecked!=null&&this._isChecked!=i)return this._isChecked}});t.CheckboxSize={Small:"small",Medium:"medium"};t.CheckState={Check:"check",Uncheck:"uncheck",Indeterminate:"indeterminate"}})(jQuery,Syncfusion)});