/*!
*  filename: ej.mobile.tab.min.js
*  version : 13.3.0.18
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./ej.mobile.core.min","./ej.mobile.application.min","./../common/ej.unobtrusive.min","./../common/ej.touch.min","./ej.mobile.listview.min","./ej.mobile.scrollpanel.min"],n):n()})(function(){(function(n,t,r){t.widget("ejmTab","ej.mobile.Tab",{_setFirst:!0,_rootCSS:"e-m-tab",_tags:[{tag:"items",attr:["text","href","enableAjax","ios7.imageClass","android.imageClass","badge.enabled","badge.value","badge.maxValue","badge.minValue","touchStart","touchEnd"]}],defaults:{theme:"auto",renderMode:"auto",allowScrolling:!1,enableNativeScrolling:t.isAndroid()||t.isIOS()?!1:t.isDevice()?!0:!1,showScrollbars:!0,enableAjax:!1,enableCache:!1,showAjaxPopup:!1,selectedItemIndex:0,enablePersistence:!1,badge:{enabled:!1,value:0,maxValue:100,minValue:1},ios7:{imageClass:"",overflowBadge:{enabled:!1,value:0,maxValue:100,minValue:1}},android:{imageClass:"",position:"fixed",contentType:"text"},windows:{preventContentSwipe:!1,enableTouchMove:!1,enableCustomText:!1,position:t.isLowerResolution()?"fixed":"normal",renderDefault:!1},flat:{position:"fixed"},prefetchAjaxContent:!1,cssClass:"",prefetchContentLoaded:null,load:null,loadComplete:null,touchStart:null,touchEnd:null,ajaxBeforeLoad:null,ajaxSuccess:null,ajaxError:null,ajaxComplete:null,ajaxSettings:{type:"GET",cache:!1,async:!0,dataType:"html",contentType:"html",url:"",data:{}},items:[]},observables:["selectedItemIndex"],selectedItemIndex:t.util.valueFunction("selectedItemIndex"),dataTypes:{android:{position:"enum"},windows:{position:"enum"},flat:{position:"enum"},renderMode:"enum",theme:"enum",enablePersistence:"boolean"},_init:function(){App.activePage||App.createAppView();this._renderControl();this._wireEvents()},_load:function(){t.setRenderMode(this);t.setTheme(this);this._touchStart=this.model.touchStart;this._touchEnd=this.model.touchEnd;this.model.renderMode=="windows"&&t.isLowerResolution()&&this.model.windows.renderDefault&&(this.model.theme="default");this._hasMoreItem=!1;this._storedContent=[];this._orgEle=this.element.clone();this._orgEle.find("ul").length&&(this.model.items=[]);this._index=0;this._length=this.model.items.length?this.model.items.length:this.element.find(">ul >li").length;this._x=0;this._y=0;this._preventEndAfterMove=!1;this.model.id=this.element[0].id;this.selectedItemIndex()<0&&this.selectedItemIndex(this.selectedItemIndex(0));this.model.load&&this._trigger("load")},_renderControl:function(){var f,o,h,u,e,v;if(this._load(),this.element.addClass("e-m-"+this.model.renderMode+" e-m-"+this.model.theme+" "+this.model.cssClass).addClass(t.isMobile()?"e-m-mobile":"e-m-tablet"),u=this,this.t_container=t.buildTag("div.e-m-tab-container"),this.model.items.length){for(o=t.buildTag("ul"),i=0;i<this.model.items.length;i++)h=t.buildTag("li"),o.append(h);this.element.append(o)}else for(this._liItems=this.element.find("li"),i=0;i<this._liItems.length;i++)f={},f.ios7={imageclass:r},f.android={imageclass:r},f.badge={enabled:r,value:r,maxvalue:r,minvalue:r},f.text=t.getAttrVal(n(this._liItems[i]),"data-ej-text",r),f.href=t.getAttrVal(n(this._liItems[i]),"data-ej-href",r),f.enableAjax=t.getAttrVal(n(this._liItems[i]),"data-ej-enableajax",r),f.ios7.imageClass=t.getAttrVal(n(this._liItems[i]),"data-ej-ios7-imageclass",r),f.android.imageClass=t.getAttrVal(n(this._liItems[i]),"data-ej-android-imageclass",r),f.badge.enabled=t.getAttrVal(n(this._liItems[i]),"data-ej-badge-enabled",r),f.badge.value=t.getAttrVal(n(this._liItems[i]),"data-ej-badge-value",r),f.badge.maxValue=t.getAttrVal(n(this._liItems[i]),"data-ej-badge-maxvalue",r),f.badge.minValue=t.getAttrVal(n(this._liItems[i]),"data-ej-badge-minvalue",r),f.touchStart=t.getAttrVal(n(this._liItems[i]),"data-ej-touchstart",r),f.touchEnd=t.getAttrVal(n(this._liItems[i]),"data-ej-touchend",r),this.model.items.push(f);if(this._ulItems=this.element.find(">ul").addClass("e-m-tab-hdr e-m-clearall e-m-user-select"),this._content=t.buildTag("div.e-m-content-container"),this._tabWrapper=t.buildTag("div#"+this.model.id+"_wrapper.e-m-"+this.model.renderMode+" e-m-"+this.model.theme+" e-m-tab-content",this._content),this.element.parent().append(this._tabWrapper),this.model.renderMode=="ios7"?App.activePage.append(this.element):(this.model[this.model.renderMode].position=="fixed"&&App.activePage.prepend(this.element),this.element.addClass(this.model[this.model.renderMode].position=="normal"?"e-m-rel":"e-m-fixed")),this._tabLiItems=this._ulItems.find(">li"),u=this,n.each(u._tabLiItems,function(i,f){var e=u.model.items[i].enableAjax!=r?u.model.items[i].enableAjax:u.model.enableAjax;u._storedContent[i]||e||(u._storedContent[i]=u.model.items[i].href?t.getCurrentPage().find(u.model.items[i].href):n(f).html())}),this["_"+this.model.renderMode+"Properties"]&&this["_"+this.model.renderMode+"Properties"](),this._tabLiItems=this._ulItems.find(">li").addClass("e-m-tabitem e-m-user-select e-m-state-default"),this._tabLiItems.each(function(i,f){var h;u._renderTabItems(f,i);var o=u.model.items[i].badge&&u.model.items[i].badge.value?u.model.items[i].badge.value:u.model.badge.value,c=u.model.items[i].badge&&u.model.items[i].badge.maxValue?u.model.items[i].badge.maxValue:u.model.badge.maxValue,s=u.model.items[i].badge&&u.model.items[i].badge.minValue?u.model.items[i].badge.value:u.model.badge.minValue,e=t.buildTag("div.e-m-tab-badgediv",t.buildTag("div.e-m-tab-badge",u._setBadgeValue(o,s,c)));u.model.renderMode=="android"&&e.addClass("e-m-"+u.model.android.contentType.toLowerCase());n(f).find(".e-m-tabitem-anchor").append(e);h=u.model.items[i].badge&&u.model.items[i].badge.enabled!=r?u.model.items[i].badge.enabled:u.model.badge.enabled;(!h||o<=s)&&e.hide()}),this._hasMoreItem){e=t.buildTag("li.e-m-tabitem e-m-tab-more e-m-user-select e-m-state-default","More","",{"data-ej-ios7-imageclass":"e-m-icon-ios7-mobile-more","data-ej-text":"More"});e=this._renderTabItems(e,this._tabLiItems.length);var s=this.model.ios7.overflowBadge.value,c=this.model.ios7.overflowBadge.maxValue,l=this.model.ios7.overflowBadge.minValue,a=t.buildTag("div.e-m-tab-badgediv",t.buildTag("div.e-m-tab-badge",this._setBadgeValue(s,l,c)));e.append(a);this.model.ios7.overflowBadge.enabled&&s>=l&&s<=c||a.hide();this._ulItems.append(e)}this.element.append(this.t_container.append(this._ulItems));v=this.model.items[this.selectedItemIndex()].enableAjax!=r?this.model.items[this.selectedItemIndex()].enableAjax:this.model.enableAjax;this.model.enableAjax||v?(this.model.prefetchAjaxContent&&this.model.enableCache&&this.model.showAjaxPopup&&App.waitingPopUp.show(),this._enableTab(this._tabLiItems[this.selectedItemIndex()],this.selectedItemIndex(),this.model.prefetchAjaxContent&&this.model.enableCache?!0:!1)):this._setDimensions();this["_"+this.model.renderMode+"RenderTab"]&&this["_"+this.model.renderMode+"RenderTab"]();this.element.find("#"+this.model.id+"_header"+this.selectedItemIndex()).removeClass("e-m-state-default").addClass("e-m-state-active");this._liEle=this._ulItems.find(">li");this._anchorEle=this.element.find("a");this._liEle.first().addClass("e-m-firstitem");this._liEle.last().addClass("e-m-lastitem");this.model.renderMode=="ios7"||this.model[this.model.renderMode].position!="fixed"||this.model.allowScrolling||this._tabWrapper.css("margin-top",this.element.outerHeight());this.model.loadComplete&&this._trigger("loadComplete");this._scrollTarget=0},_ios7Properties:function(){if(t.isMobile()&&this._length>5||!t.isMobile()&&this._length>6){this._hasMoreItem=!0;var i=t.isMobile()?3:4;this._listControl=t.buildTag("div#"+this.model.id+"_list",t.buildTag("ul"),{},{});this._listControl.find("ul").append(n(this._ulItems.find(">li").get(i)).nextAll());this._content.append(this._listControl);this._listControl.ejmListView({headerTitle:"More",theme:this.model.theme,allowScrolling:!0,renderMode:this.model.renderMode});this._listControl.attr("id",this.model.id+"_content"+(i+1)).addClass("e-m-state-hide e-m-tab-more")}this.element.addClass("e-m-fixed")},_androidRenderTab:function(){this._renderingScrolling()},_flatRenderTab:function(){this._renderingScrolling()},_windowsRenderTab:function(){t.isMobile()||this._renderingScrolling()},_renderingScrolling:function(){t._removeHidden(this.element);(this._ulItems[0].scrollWidth>window.innerWidth&&this.model[this.model.renderMode].position=="fixed"||this._ulItems[0].scrollWidth>this.element.innerWidth()&&this.model[this.model.renderMode].position=="normal")&&this._renderScrollPanel(this.model.id+"_scroll",this.model.id,!0,!1,!1,!0,!1);t._setHidden(this.element)},_createImageTag:function(i,r){var u=t.buildTag("div","","",{"class":"e-m-tab-image "+(this.model.items[r][this.model.renderMode].imageClass?this.model.items[r][this.model.renderMode].imageClass:this.model[this.model.renderMode].imageClass)});return n(i).hasClass("e-m-tab-more")&&(n(u).removeClass(this.model.items[r][this.model.renderMode].imageClass),n(u).addClass("e-m-icon-ios7-mobile-more")),u},_renderTabItems:function(i,r){var e=t.buildTag("a.e-m-tabitem-anchor e-m-remove-shadow"),o=this.model.renderMode=="ios7"||this.model.renderMode=="android"&&this.model[this.model.renderMode].contentType!="text"?this._createImageTag(i,r):"",f=t.buildTag("div.e-m-tab-text e-m-user-select"),u=n(i).hasClass("e-m-tab-more")?"More":this.model.items[r].text?this.model.items[r].text:"Item",s;return u=this.model.renderMode=="windows"&&t.isLowerResolution()?this.model.windows.enableCustomText?u:u.toLowerCase():u,this.model.renderMode!="android"||this.model.renderMode=="android"&&this.model[this.model.renderMode].contentType=="both"?e.append(o?f.append(o).append(t.buildTag("div.e-m-text",u)):f.append(u)):e.append(this.model.android.contentType=="image"?f.append(o):f.append(u)),n(i).hasClass("e-m-tab-more")||t.getBooleanVal(i,"data-ej-enableajax",this.model.enableAjax)||(s=t.buildTag("div.e-m-content e-m-state-hide#"+this.model.id+"_content"+r,this._storedContent[r]),r==this.selectedItemIndex()&&s.removeClass("e-m-state-hide").addClass("e-m-state-block"),this._content.append(s)),n(i).attr("id",this.model.id+"_header"+r).empty().append(e),i},_renderScrollPanel:function(n,i,r,u,f,e,o){this._scrollWrapper=t.buildTag("div#"+n,"",{},{});this._scrollWrapper.ejmScrollPanel({enableNativeScrolling:e?!1:this.model.enableNativeScrolling,theme:this.model.theme,preventDefault:!1,adjustFixedPosition:e?!1:!0,renderMode:this.model.renderMode,target:i,showScrollbars:e?!1:this.model.showScrollbars,enableHrScroll:r,enableVrScroll:u,autoAdjustHeight:f,isRelative:o});e?this._headerScroller=this._scrollWrapper.ejmScrollPanel("instance"):this._scroller=this._scrollWrapper.ejmScrollPanel("instance")},_loadAjaxContent:function(i,r){var o,s;this.model.showAjaxPopup&&!r&&App.waitingPopUp.show();var u=this,e=n(i)[0].id.split(this.model.id+"_header")[1],f=this.model.items[e].href;(!n.support.pushstate||t.isWindowsWebView())&&(f=App.route.makeUrlAbsolute(f,!0));o={content:u._content,item:i,index:e,text:n(i).find(".e-m-tab-text").text(),url:u.model.ajaxSettings.url?u.model.ajaxSettings.url:f};this.model.ajaxBeforeLoad&&this._trigger("ajaxBeforeLoad",o);s={cache:u.model.ajaxSettings.cache,async:u.model.ajaxSettings.async,type:u.model.ajaxSettings.type,contentType:u.model.ajaxSettings.contentType,url:t.isWindowsWebView()?f:u.model.ajaxSettings.url?u.model.ajaxSettings.url:f,dataType:u.model.ajaxSettings.dataType,data:u.model.ajaxSettings.data,successHandler:function(e){var h={content:u._content,item:i,index:n(i).index(),text:n(i).find(".e-m-tab-text").text(),url:u.model.ajaxSettings.url?u.model.ajaxSettings.url:f},c={index:u._index,content:u._content.children()[u._index],item:u._liEle[u._index],url:u.model.ajaxSettings.url?u.model.ajaxSettings.url:f,text:n(u._liEle[u._index]).find(".e-m-tab-text").text()},s=n(u._content).find("#"+u.model.id+"_content"+u._index),o;u.model.enableCache&&s.length!=0||(s.length&&s.remove(),o=t.buildTag("div.e-m-content e-m-state-hide#"+u.model.id+"_content"+u._index,/<\/?body[^>]*>/gmi.test(e)?e.split(/<\/?body[^>]*>/gmi)[1]:e||""),u._content.prepend(o),u.model.renderMode!="windows"||u.model.windows.enableTouchMove?(u._hideContent(u._content,u._index,i),u._setDimensions()):(n(n(u._tabWrapper).find(".e-m-state-block")[0]).remove(),u._slideElement(o,u._swipeDirectionReverse)),t.widget.init(n(o)),(App.angularAppName||t.angular.defaultAppName)&&t.angular.compile(n(o)));r&&(n(i).index()!=u.selectedItemIndex()&&(o=t.buildTag("div.e-m-content e-m-state-hide#"+u.model.id+"_content"+n(i).index(),/<\/?body[^>]*>/gmi.test(e)?e.split(/<\/?body[^>]*>/gmi)[1]:e||""),u._content.append(o),u._setDimensions(),t.widget.init(n(o)),(App.angularAppName||t.angular.defaultAppName)&&t.angular.compile(n(o))),u._ajaxCurrentEle=u._ajaxCurrentEle?u._ajaxCurrentEle.next():u._tabLiItems.first(),u._ajaxCurrentEle.length?u._loadAjaxContent(u._ajaxCurrentEle,!0):(u.model.showAjaxPopup&&App.waitingPopUp.hide(),u.model.prefetchContentLoaded&&u._trigger("prefetchContentLoaded",c)));u.model.ajaxSuccess&&u._trigger("ajaxSuccess",h)},errorHandler:function(t,r,e){var o={xhr:t,textStatus:r,errorThrown:e,item:i,index:n(i).index(),text:n(i).find(".e-m-tab-text").text(),url:u.model.ajaxSettings.url?u.model.ajaxSettings.url:f};u.model.ajaxError&&u._trigger("ajaxError",o)},completeHandler:function(){u.model.showAjaxPopup&&!r&&App.waitingPopUp.hide();var t={content:u._content,item:i,index:n(i).index(),text:n(i).find(".e-m-tab-text").text(),url:u.model.ajaxSettings.url?u.model.ajaxSettings.url:f};u.model.ajaxComplete&&u._trigger("ajaxComplete",t)}};t.sendAjaxRequest(s)},_hideContent:function(i,r,u){var e,o,f;u&&n(u).hasClass("e-m-tab-more")&&this.model.allowScrolling?this._scroller.disable():this.model.allowScrolling&&this._scroller&&this._scroller.enable();e=i.find(".e-m-state-block");o=i.find("#"+this.model.id+"_content"+r).removeClass("e-m-state-hide").addClass("e-m-state-block");this._scroller&&(e.attr("scrollX",this._scroller.getScrollPosition().x).attr("scrollY",this._scroller.getScrollPosition().y),o.attr("scrollX")&&o.attr("scrollY")?this._scroller.scrollTo(parseInt(o.attr("scrollX")),parseInt(o.attr("scrollY"))):this._scroller.scrollTo(0,0));e.length>0&&o.length>0&&(e[0].id!=o[0].id||t.getBooleanVal(u,"data-ej-enableajax",this.model.enableAjax)&&!this.model.enableCache&&!e.hasClass("e-m-tab-more"))&&(this.model.renderMode!="windows"?(e.removeClass("e-m-state-block").addClass("e-m-state-hide"),this.model.enableCache||!t.getBooleanVal(e,"data-ej-enableajax",this.model.enableAjax)||e.hasClass("e-m-tab-more")||e.remove()):this._content.children().length>1&&(this._length>1?(f=this,t._slideOutWithoutDuration(o[0],this._reverse),setTimeout(function(){var i=f.model.items[n(e).index()].enableAjax?f.model.items[n(e).index()].enableAjax:f.model.enableAjax;n.support.hasTransition||(f._hide(e,f,i),f._blockContent(o,f));f._addHideClassDelegate=n.proxy(f._addHideClassHandler,{prevEle:n(e),object:f,loadAjax:i,delegate:f._addHideClassDelegate});e.bind(t.transitionEndEvent(),f._addHideClassDelegate);t._slideInWithDuration(e[0],f._reverse);f._addBlockClassDelegate=n.proxy(f._addBlockClassHandler,{ele:n(u),currEle:n(o),object:f,delegate:f._addBlockClassDelegate});o.bind(t.transitionEndEvent(),f._addBlockClassDelegate);t._slide(o[0],f._reverse)})):e.remove()),this._scroller&&(this._content.css("height","auto"),this._scroller.refresh()))},_setDimensions:function(){if(this.model.allowScrolling)this._scroller||this._renderScrollPanel(this.model.id+"_contentscroll",this.model.id+"_wrapper",!1,!0,!0);else{this._content.children().height(window.innerHeight-this.element.outerHeight());var t=n(this._content.children()).outerHeight();this._content.css("height",n(this._content.find(".e-m-state-block"))[0].scrollHeight);this._content.find("#"+this.model.id+"_content"+this._index).length>0&&this._content.css("height",n(this._content.find("#"+this.model.id+"_content"+this._index))[0].scrollHeight)}},_scrollHeader:function(t){if(this._headerScroller){var r=n(t),i=r.offset().left,u=r.outerWidth(),f=window.innerWidth;this.model[this.model.renderMode].position=="normal"&&(i=i-this.element.offset().left,f=this.element.outerWidth());i>0&&i+u>f?this._headerScroller.scrollTo(this._tabLiItems.index(r)==this._tabLiItems.length-1?this._headerScroller._maxScrollX:this._headerScroller._x-u,0,300):i<0&&this._headerScroller.scrollTo(this._tabLiItems.index(r)==0?0:this._headerScroller._x+u,0,300)}},_androidTouchEnd:function(n){this._scrollHeader(n)},_windowsTouchEnd:function(i){if(t.isLowerResolution()){this.element.find(".e-m-tabitem.e-m-state-active").removeClass("e-m-state-active").addClass("e-m-state-default");n(i).removeClass("e-m-state-default").addClass("e-m-state-active");var r=this;setTimeout(function(){var u=0,f=n(i);r._cloned||(f=n(i).prevAll(),f.each(function(t,i){u=u+n(i).outerWidth()}));n.support.hasTransition?(t._transitionTime(100,r._ulItems[0]),r._appendPrevEleDelegate=n.proxy(r._appendPrevEleHandler,{proxy:r,ele:f,currentTab:n(i),ulItems:r._ulItems,tab:r.element,cloned:r._cloned,delegate:r._appendPrevEleDelegate}),r._ulItems.bind(t.transitionEndEvent(),r._appendPrevEleDelegate).css("-"+t.browser()+"-transform","translateX("+(r._reverse?u:-u)+"px)")):r._appendElement(f,r.element,r,n(i),r._cloned);r._cloned=!1})}else this._scrollHeader(i)},_eventArgs:function(t){return{item:n(t),text:n(t).find(".e-m-tab-text").text(),index:n(t).index()}},_onTouchStartHandler:function(i){if(n(i.currentTarget).hasClass("e-m-state-disabled"))return!1;this._isInTransition||(this._currentTab=i.currentTarget,this.isMoved=!1,this._preventEndAfterMove=!1,this._isHeader=!0,this._index=n(this._currentTab)[0].id.split(this.model.id+"_header")[1],this.model.renderMode=="android"&&n(this._currentTab).addClass("e-m-pressed"),this.model.touchStart=this.model.items[this._index].touchStart?this.model.items[this._index].touchStart:this._touchStart,this.model.touchStart&&this._trigger("touchStart",this._eventArgs(this._currentTab)),t.listenEvents([this._liEle,this._liEle,this._liEle],[t.moveEvent(),t.endEvent(),t.cancelEvent()],[this._touchMoveDelegate,this._touchEndDelegate,this._touchCancelDelegate]))},_onTouchMoveHandler:function(){(this.model.renderMode!="windows"||this.model.renderMode=="windows"&&t.isLowerResolution())&&(this.isMoved=!0);this.model.renderMode=="android"&&n(this._currentTab).removeClass("e-m-pressed")},_onTouchEndHandler:function(i){if((!this._preventEndAfterMove&&!this.isMoved||t.isWindows())&&this.element.find(".e-m-state-active").index()!=n(i.currentTarget).index()){this._reverse=!1;var r=(parseInt(this._index)-1<0?this._length-1:parseInt(this._index)-1).toString();this._tabWrapper.find("#"+this.model.id+"_content"+r).length>0&&(this._tabWrapper.find("#"+this.model.id+"_content"+r)[0].style[t.transform]="");this.model.renderMode!="windows"||this.model.windows.enableTouchMove?this._enableTab(this._currentTab,this._index):this._swipeHandler(i,{toIndex:Number(this._index),type:"swipeleft"});this.model.touchEnd=this.model.items[this._index].touchEnd?this.model.items[this._index].touchEnd:this._touchEnd;this.model.touchEnd&&this._trigger("touchEnd",this._eventArgs(this._currentTab))}this.model.renderMode=="android"&&n(this._currentTab).removeClass("e-m-pressed");this.isMoved=!1;this._headerScroller&&(this._scrollTarget=this._headerScroller.getScrollPosition().x);t.listenEvents([this._liEle,this._liEle,this._liEle],[t.moveEvent(),t.endEvent(),t.cancelEvent()],[this._touchMoveDelegate,this._touchEndDelegate,this._touchCancelDelegate],!0)},_enableTab:function(i,u,f){this._index=u;this.selectedItemIndex(u);this._length>1&&(this["_"+this.model.renderMode+"TouchEnd"]&&this["_"+this.model.renderMode+"TouchEnd"](i),this.model.renderMode=="windows"&&(this.model.renderMode!="windows"||t.isLowerResolution())||(this.element.find(".e-m-state-active").removeClass("e-m-state-active").addClass("e-m-state-default"),n(i).removeClass("e-m-state-default").addClass("e-m-state-active")));var e=this.model.items[u].enableAjax!=r?this.model.items[u].enableAjax:this.model.enableAjax;e&&this.model.enableCache&&n(this._tabWrapper.find("#"+this.model.id+"_content"+u)).length>0&&n(this._tabWrapper.find("#"+this.model.id+"_content"+u)).hasClass("e-m-state-hide")||!e&&n(this._tabWrapper.find("#"+this.model.id+"_content"+u)).hasClass("e-m-state-hide")||n(i).hasClass("e-m-tab-more")?this._hideContent(this._tabWrapper,u,i):e&&this._loadAjaxContent(i,f)},_onScrollStart:function(n){this._scrollY=n.y;this._contentScroll=!1},_onScrollMove:function(n){this._scrollDistY=n.y-this._scrollY;Math.abs(this._scrollDistY)>0&&(this._contentScroll=!0)},_onScrollEnd:function(){this._contentScroll=!1},_onContentTouchStartHandler:function(i){var r=i.touches?i.touches[0]:i;this._pointX=r.pageX;this._pointY=r.pageY;this.model.windows.enableTouchMove?this._isInTransition||(this._isHeader=!1,r=i.touches?i.touches[0]:i,this._x=0,this._y=0,this._distX=0,this._distY=0,this._directionX=0,this._directionY=0,this._lockedDir=0,this._moved=!1,this._startX=0,this._startY=0,this._absStartX=this._x,this._absStartY=this._y,this._startTime=Date.now(),this._endTime=0,this._reverse=!1,this._end=!1,n(i.currentTarget).hasClass("m-tab")?(this._headerMove=!0,this._target=this._tabWrapper.find("#"+this.model.id+"_content"+this.element.find("ul .e-m-state-active")[0].id.split(this.model.id+"_header")[1])[0]):this._target=this._tabWrapper.find("#"+this.model.id+"_content"+this.element.find("ul .e-m-state-active")[0].id.split(this.model.id+"_header")[1])[0],t.listenEvents([document,document],[t.moveEvent(),t.endEvent()],[this._contentTouchMoveDelegate,this._contentTouchEndDelegate]),t._transitionTime(0,this._ulItems[0]),t._transitionTime(0,this._target)):t.listenTouchEvent(document,t.moveEvent(),this._contentTouchMoveDelegate)},_onContentTouchMoveHandler:function(i){var e,c;if(this.model.windows.enableTouchMove){if(!this._contentScroll){var r=i.touches?i.touches[0]:i,o=r.pageX-this._pointX,s=r.pageY-this._pointY,l=Date.now(),h,a,u,f;if(this._pointX=r.pageX,this._pointY=r.pageY,this._distX+=o,this._distY+=s,u=Math.abs(this._distX),f=Math.abs(this._distY),l-this._endTime>300&&u<10&&f<10)return;this._lockedDir||(this._lockedDir=u>f+5?"horizontal":f>=u?"vertical":"vertical");this._lockedDir=="horizontal"?(this._isInTransition=!0,s=0,h=this._x+o,a=this._y+s,this._translateContent(this._target,h,!0),this._moved=!0,e=this._ulItems.find(">li"),h>0&&!this._cloned&&n(e.last())[0].id!=n(e.first())[0].id&&(c=e.last(),this._cloneItem=c.clone(),this._cloneWidth=c.outerWidth(),this._ulItems[0].style[t.transform]="translateX(-"+this._cloneWidth+"px)",this._ulItems.prepend(this._cloneItem),this._cloned=!0)):this._lockedDir=="vertical"&&(o=0);this._headerMove&&(this._preventEndAfterMove=!0);l-this._startTime>300&&(this._startX=this._x)}}else this._swipeMove=!0,t.listenTouchEvent(document,t.endEvent(),this._contentTouchEndDelegate)},_onContentTouchEndHandler:function(i){var h=i.touches?i.touches[0]?i.touches[0]:i.changedTouches?i.changedTouches[0]:i:i,s,f;if(t.listenEvents([document,document],[t.moveEvent(),t.endEvent()],[this._contentTouchMoveDelegate,this._contentTouchEndDelegate],!0),this._endPointX=h.pageX,this._endPointY=h.pageY,this.model.windows.enableTouchMove){var r=Number(n(this._target)[0].id.split(this.model.id+"_content")[1]),e={dist:0,time:0},c=t.getTime()-this._startTime,u=this._x,o=0;this._reverse=u>0?!0:!1;c<300&&(e=u?t._momentum(u-this._startX,c,this._reverse?this._x:-this._x,App.window.width()+this._x,App.window.width()):e,u=this._x+e.dist);e.dist&&(o=Math.max(e.time,10));t._transitionTime(o?o:300,this._target);t._transitionTime(o?o:300,this._ulItems[0]);u<0&&Math.abs(u)>App.window.width()/2||this._headerMove&&-u>n(window).width()/3?(r=n(n(this._ulItems).children()).length==r+1?0:r+1,this._index=r,f=this.element.find("#"+this.model.id+"_header"+r).length?this.element.find("#"+this.model.id+"_header"+r):n(this.element.find("#"+this.model.id+"_header"+(r-1)+"")).next(),this._enableTab(f,f.attr("id").split(this.model.id+"_header")[1])):u>0&&Math.abs(u)>App.window.width()/2||this._headerMove&&u>n(window).width()/3?(s=n(this._ulItems.find(">li")).first(),t.listenEvents([s,s],[t.startEvent(),t.endEvent()],[this._touchStartDelegate,this._touchEndDelegate]),this._ulItems.find(">li").last().remove(),r=r-1<0?n(n(this._ulItems).children()).length-1:r-1,f=this.element.find("#"+this.model.id+"_header"+r).length?this.element.find("#"+this.model.id+"_header"+r):n(this.element.find("#"+this.model.id+"_header"+(r+1)+"")).prev(),this._enableTab(f,f.attr("id").split(this.model.id+"_header")[1])):(this._translateContentDelegate=n.proxy(this._translateContentHandler,{object:this,ele:n(this._target),delegate:this._translateContentDelegate}),n(this._target).bind(t.transitionEndEvent(),this._translateContentDelegate),this._cloned?(n(this._ulItems.find(">li")).first().remove(),t._transitionTime(0,this._ulItems[0]),this._cloned=!1,this._translateContent(this._target,0)):this._translateContent(this._target,0))}else this._swipeMove&&(relativeX=Math.abs(this._endPointX-this._pointX),relativeY=Math.abs(this._endPointY-this._pointY),relativeXY=Math.abs(relativeX-relativeY),relativeX>30&&relativeXY>30&&relativeX>relativeY&&(direction=this._endPointX-this._pointX>30?"swiperight":"swipeleft",this._swipeHandler(i,{type:direction}))),this._swipeMove=!1},_translateContent:function(n,i){var u=this,r=i;r=this._cloned?parseInt(i)/3-this._cloneWidth:parseInt(i)/3;!this._cloned&&-r>this._ulItems.find(".e-m-state-active").outerWidth()&&(r=-this._ulItems.find(".e-m-state-active").outerWidth());this._ulItems[0].style[t.transform]="translateX("+r+"px)";n.style[t.transform]="translateX("+i+"px)";this._x=i},_translateContentHandler:function(){this.object._isInTransition=!1;this.ele.unbind(t.transitionEndEvent(),this.delegate)},_addBlockClassHandler:function(){this.object._isInTransition=!1;!this.object._isHeader&&this.object.model.touchEnd&&this.object._trigger("touchEnd",this.object._eventArgs(this.ele));this.object._blockContent(this.currEle,this.object,this.delegate)},_blockContent:function(n,i,r){n.removeClass("e-m-state-hide").addClass("e-m-state-block").unbind(t.transitionEndEvent(),r);i._scroller&&i._scroller.refresh()},_addHideClassHandler:function(){this.object._isInTransition=!1;this.object._hide(this.prevEle,this.object,this.loadAjax,this.delegate)},_hide:function(n,i,r,u){n.removeClass("e-m-state-block").addClass("e-m-state-hide").unbind(t.transitionEndEvent(),u);!i.model.enableCache&&r&&n.remove();i._scroller&&i._scroller.refresh()},_appendPrevEleHandler:function(){this.proxy._isInTransition=!1;this.proxy._appendElement(this.ele,this.tab,this.proxy,this.currentTab,this.cloned,this.delegate)},_appendElement:function(n,i,r,u,f,e){t._transitionTime(0,r._ulItems[0]);n.parent().css("-"+t.browser()+"-transform","translateX(0)");f?n.parent().prepend(n):n.parent().append(n.toArray().reverse());r._ulItems.unbind(t.transitionEndEvent(),e)},resize:function(r){var u=this;r.resolutionChanged&&(t.isWindows()&&(t.isLowerResolution()&&u._switchHead(this.model.selectedItemIndex),u.model.windows.preventContentSwipe||t.listenEvents([u._tabWrapper],[t.startEvent()],[u._contentTouchStartDelegate],t.isLowerResolution()?!1:!0),t.listenEvents([u.element],[t.startEvent()],[u._contentTouchStartDelegate],t.isLowerResolution()?!1:!0)),setTimeout(function(){if(u._setDimensions(),t.isLowerResolution()&&(t.isAndroid()||t.isFlat())&&u._renderingScrolling(),t.isWindows())for(i=0;i<u.t_container.find("li").length;i++){var r=n(u.t_container.find("li")[i]).find(".e-m-tab-text");t.isLowerResolution()&&!u.model.windows.enableCustomText?r.html(r.html().toLowerCase()):r.html(r.html().charAt(0).toUpperCase()+r.html().substr(1).toLowerCase())}},250))},_anchorClickHandler:function(n){n.preventDefault()},_swipeHandler:function(i,u){var s,o,c,a,e,f;t.blockDefaultActions(i);var h=this._tabLiItems.length,l=this._tabWrapper.find(".e-m-content"),v=n(this._tabWrapper).find(".e-m-state-block")[0];if(u.toIndex==r&&this.model.renderMode=="windows")var s=Number(n(this.element[0]).find(".e-m-state-active")[0].id.split("_header")[1]),o=Number(n(this.element[0]).find(".e-m-state-active").next()[0].id.split("_header")[1]),e=Number(n(this.element[0]).find(".e-m-tabitem")[h-1].id.split("_header")[1]);else if(u.toIndex==r&&this.model.renderMode=="android"){if(s=Number(n(this.element[0]).find(".e-m-state-active")[0].id.split("_header")[1]),u.type=="swipeleft"&&s==h-1||u.type=="swiperight"&&s==0)return;o=u.type=="swipeleft"?Number(n(this.element[0]).find(".e-m-state-active").next()[0].id.split("_header")[1]):"";e=u.type=="swiperight"?Number(n(this.element[0]).find(".e-m-state-active").prev()[0].id.split("_header")[1]):""}else o=e=u.toIndex;n(v).removeClass("e-m-state-block").addClass("e-m-state-hide");this._index=u.type=="swipeleft"?o:e;u.type=="swipeleft"?this._switchHead(u.toIndex):this._switchHead(u.toIndex,!0);this._swipeDirectionReverse=u.type=="swipeleft"?!1:!0;c=u.type=="swipeleft"?this._tabLiItems[o]:this._tabLiItems[e];a=t.getBooleanVal(c,"data-ej-enableajax",this.model.enableAjax);a&&!this.model.prefetchAjaxContent?this._loadAjaxContent(c):(u.type=="swipeleft"?(f=n("#"+this.model.id+"_content"+o),f.length||(f=n(l[0])),t.isWindows()&&this._slideElement(f),this.selectedItemIndex(o)):(e=s-1,f=n("#"+this.model.id+"_content"+e),f.length||(f=n(l[h-1])),t.isWindows()&&this._slideElement(f,!0),this.selectedItemIndex(e)),f.removeClass("e-m-state-hide").addClass("e-m-state-block"),this._scroller&&(this._content.css("height","auto"),this._scroller.refresh()))},_switchHead:function(i,r){var f=this._tabLiItems.length,u;if(this.model.renderMode=="android"&&(u=n(this._ulItems.find("li.e-m-state-active"))),this._ulItems.find(".e-m-state-active").removeClass("e-m-state-active").addClass("e-m-state-default"),i?(itemIndex=this._ulItems.find("li").index(n("#"+this.model.id+"_header"+i)[0]),u=n(this._ulItems.find("li")[itemIndex]).prevAll()):this.model.renderMode!="android"&&(u=r?n(this._ulItems.find("li")[f-1]):n(this._ulItems.find("li")[0])),t.isLowerResolution()&&this.model.renderMode=="windows"?(u.detach(),u.removeClass("e-m-state-active").addClass("e-m-state-default"),u=n.makeArray(u).reverse()):n("#"+this.model.id+"_header"+i).removeClass("e-m-state-default").addClass("e-m-state-active"),r&&t.isLowerResolution()&&this.model.renderMode=="windows"?n(this._ulItems).prepend(u):t.isLowerResolution()&&this.model.renderMode=="windows"&&n(this._ulItems).append(u),t.isLowerResolution()&&t.isWindows()&&n(this._ulItems.find("li")[0]).removeClass("e-m-state-default").addClass("e-m-state-active"),this.model.renderMode=="android"&&(u.removeClass("e-m-state-active").addClass("e-m-state-default"),(r?u.prev():u.next()).removeClass("e-m-state-default").addClass("e-m-state-active"),this._headerScroller)){if(u.prev().hasClass("e-m-firstitem")||u.hasClass("e-m-firstitem")){this._scrollTarget=0;this._headerScroller.scrollTo(this._scrollTarget,0,0);return}this._perm=0-(this._headerScroller._scrollerWidth-this._tabWrapper.width());this._scrollTarget=r?this._scrollTarget+(u.next().width()+u.prev().width())/2:this._scrollTarget-(u.prev().width()+u.next().width())/2;this._perm<this._scrollTarget&&!u.prev().hasClass("e-m-firstitem")&&this._scrollTarget<0&&!u.next().hasClass("e-m-lastitem")&&this._headerScroller.scrollTo(this._scrollTarget,0,0);(!r&&u.next().hasClass("e-m-lastitem")||r&&u.hasClass("e-m-lastitem"))&&this._headerScroller.scrollTo(this._perm,0,0)}},_slideElement:function(n,i){var r=t.transform,u=t.transitionDuration;n.css(u,"0ms").css(r,i?"translateX(-100%)":"translateX(100%)").css(u,"75ms").removeClass("e-m-state-hide").addClass("e-m-state-block");setTimeout(function(){n.css(r,"translateX(0px)")})},_createDelegates:function(){this._anchorClickDelegate=n.proxy(this._anchorClickHandler,this);this._touchStartDelegate=n.proxy(this._onTouchStartHandler,this);this._touchMoveDelegate=n.proxy(this._onTouchMoveHandler,this);this._touchEndDelegate=n.proxy(this._onTouchEndHandler,this);this._touchCancelDelegate=n.proxy(this._onTouchEndHandler,this);this._contentTouchStartDelegate=n.proxy(this._onContentTouchStartHandler,this);this._contentTouchMoveDelegate=n.proxy(this._onContentTouchMoveHandler,this);this._contentTouchEndDelegate=n.proxy(this._onContentTouchEndHandler,this)},_wireEvents:function(n){this._createDelegates();t.listenEvents([this._liEle,this._anchorEle,this._anchorEle],[t.startEvent(),t.tapEvent(),t.tapHoldEvent()],[this._touchStartDelegate,this._anchorClickDelegate,this._anchorClickDelegate],n);(this.model.renderMode=="windows"&&t.isLowerResolution()&&this._length>1||this.model.renderMode=="android")&&(this.model.windows.preventContentSwipe||t.listenEvents([this._tabWrapper],[t.startEvent()],[this._contentTouchStartDelegate],n),this.model.renderMode=="windows"&&t.listenEvents([this.element],[t.startEvent()],[this._contentTouchStartDelegate],n))},_setModel:function(n){var r=!1,t,i;for(t in n)i="_set"+t.charAt(0).toUpperCase()+t.slice(1),this[i]?this[i](n[t]):r=!0;r&&this._refresh()},_setTheme:function(n){n&&(this.model.theme=n,this.element.removeClass("e-m-dark e-m-light e-m-default").addClass("e-m-"+this.model.theme),this._tabWrapper.removeClass("e-m-dark e-m-light e-m-default").addClass("e-m-"+this.model.theme),this._listControl&&this._listControl.ejmListView("model.theme",this.model.theme))},_isEnable:function(i){return i=this.model.renderMode=="windows"&&t.isLowerResolution()?n(i).find(".e-m-tabitem-anchor"):i,i.hasClass("e-m-state-disabled")?!1:!0},_refresh:function(){this._destroy();this.element.addClass("e-m-tab");this._renderControl();this._wireEvents()},_clearElement:function(){this.element.removeAttr("class");this.element.html(this._orgEle.html());this._tabWrapper.remove();var i=this;n.each(this._storedContent,function(n,i){t.getCurrentPage().append(i)})},_destroy:function(){this._wireEvents(!0);this._clearElement()},showBadge:function(n){var i=this.element.find("#"+this.model.id+"_header"+n),t;n>=0&&this._isEnable(i)&&(t=i.find(".e-m-tab-badgediv"),t.length&&(this.model.items[n].badge.enabled=!0,t.show()))},hideBadge:function(n){var i=this.element.find("#"+this.model.id+"_header"+n),t;n>=0&&this._isEnable(i)&&(t=i.find(".e-m-tab-badgediv"),t.length&&(this.model.items[n].badge.enabled=!1,t.hide()))},updateBadgeValue:function(n,i){var u=this.element.find("#"+this.model.id+"_header"+n),f,e,o;n>=0&&this._isEnable(u)&&i!=r&&(f=u.find(".e-m-tab-badge"),f.length&&(e=u.hasClass("e-m-tab-more")?Number(this.model.ios7.overflowBadge.maxValue):Number(t.getAttrVal(u,"data-ej-badge-maxvalue",this.model.badge.maxValue)),o=u.hasClass("e-m-tab-more")?Number(this.model.ios7.overflowBadge.minValue):Number(t.getAttrVal(u,"data-ej-badge-minvalue",this.model.badge.minValue)),i&&(i=this._setBadgeValue(i,o,e)),this.model.items[n].badge.value=i,f.html(i),i?this.showBadge(n):this.hideBadge(n)))},_setBadgeValue:function(n,t,i){return(n>=t&&n<=i?n:t>n?t:i+"+").toString()},selectItem:function(t){t>=0&&this._isEnable(n(this._tabLiItems[t]))&&(this.selectedItemIndex(t),this._currentTab=this._tabLiItems[t],this._index=t,this._onTouchEndHandler({currentTarget:this._currentTab}))},enableItem:function(n){if(n>=0){var i=this.element.find("#"+this.model.id+"_header"+n);(this.model.renderMode=="windows"&&t.isLowerResolution()?i.children():i).removeClass("e-m-state-disabled");this.enableContent(n)}},disableItem:function(n){if(n>=0){var i=this.element.find("#"+this.model.id+"_header"+n);(this.model.renderMode=="windows"&&t.isLowerResolution()?i.children():i).addClass("e-m-state-disabled");this.disableContent(n)}},enableContent:function(i){var r=n(this._tabWrapper.find("#"+this.model.id+"_content"+i));i>=0?(this.model.renderMode=="windows"&&t.isLowerResolution()?r.children():r).removeClass("e-m-state-disabled"):this._tabWrapper.removeClass("e-m-state-disabled")},disableContent:function(i){var r=n(this._tabWrapper.find("#"+this.model.id+"_content"+i));i>=0?(this.model.renderMode=="windows"&&t.isLowerResolution()?r.children():r).addClass("e-m-state-disabled"):this._tabWrapper.addClass("e-m-state-disabled")},addItem:function(t,i){i>=0?t.insertBefore(n(this._orgEle.children().children()[i])):this._orgEle.children().append(t);this._refresh()},addOverflowItem:function(n,t){this._listControl&&t>=0&&(this._className=this._listControl.attr("class"),this._listControl.ejmListView("addItem",n,t),this._listControl.addClass(this._className))},removeItem:function(t){t>=0&&(n(this._tabWrapper.find("#"+this.model.id+"_content"+t)).remove(),this.element.find("#"+this.model.id+"_header"+t).remove())},removeOverflowItem:function(t){this._listControl&&t>=0&&(this._listControl.ejmListView("removeItem",t),this._listControl.ejmListView("getItemsCount")||(n(this.element.find(".e-m-tab-more.e-m-state-active")).length&&this.selectItem(this._index-1),this.element.find(".e-m-tab-more").remove(),this._content.find(".e-m-tab-more").remove()))},getItemsCount:function(){return this._hasMoreItem?this.element.find(".e-m-tabitem").length-1:this.element.find(".e-m-tabitem").length},getOverflowItemCount:function(){if(this._listControl)return this._listControl.ejmListView("getItemsCount")},getActiveItem:function(){return this.element.find("li.e-m-state-active")},getActiveItemText:function(){return this.element.find("li.e-m-state-active .e-m-tab-text").text()}});t.mobile.Tab.Position={Fixed:"fixed",Normal:"normal"};t.mobile.Tab.Android={};t.mobile.Tab.Android.ContentType={Text:"text",Image:"image",Both:"both"}})(jQuery,Syncfusion)});