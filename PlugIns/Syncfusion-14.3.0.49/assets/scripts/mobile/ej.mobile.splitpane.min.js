/*!
*  filename: ej.mobile.splitpane.min.js
*  version : 14.3.0.49
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./ej.mobile.core.min","./../common/ej.unobtrusive.min","./../common/ej.touch.min"],n):n()})(function(){(function(n,t,i){t.widget("ejmSplitPane","ej.mobile.SplitPane",{_setFirst:!0,_rootCSS:"e-m-splitpane",_ignoreOnPersist:["create","destroy","beforeOpen","beforeClose","close","open","swipe"],angular:{terminal:!1},defaults:{renderMode:"auto",cssClass:"",enablePersistence:!1,height:"auto",width:"auto",isRelative:!1,edgeThreshold:50,enableSwipe:!0,stopEventPropagation:t.isWindows(),leftPane:{templateId:null,showOnTablet:!0,animationType:"overlay",width:"280px"},rightPane:{templateId:null,showOnTablet:!1,animationType:"overlay",width:"280px"},contentPane:{templateId:null},swipe:null,open:null,close:null,beforeClose:null,beforeOpen:null,create:null,destroy:null},dataTypes:{renderMode:"enum",enablePersistence:"boolean",isRelative:"boolean",edgeThreshold:"number",stopEventPropagation:"boolean",leftPane:"object",rightPane:"object",contentPane:"object"},_lModel:{overlayOpacity:.3,swipeThreshold:15,defaultTransitionTime:400,fastTransitionTime:200},_class:{opened:"e-m-opened",hide:"e-m-hide",show:"e-m-show",hidden:"e-m-hidden"},_init:function(){this._orgEleStyle=n(this.element).attr("style");this._orgEleClass=n(this.element).attr("class");this._browser=t.browser();this._cssClass=this.model.cssClass;t.setRenderMode(this);this._initPane();this._renderControl();this._createDelegates();this._wireEvents()},_initPane:function(){return this._panel={left:this.model.leftPane.templateId?this._getTemplate(this.model.leftPane.templateId,"_leftpane"):this.element.find("[data-ej-pane='left']").length?this.element.find("[data-ej-pane='left']"):this.element.find("[e-pane='left']"),content:this.model.contentPane.templateId?this._getTemplate(this.model.contentPane.templateId,"_contentpane"):this.element.find("[data-ej-pane='content']").length?this.element.find("[data-ej-pane='content']"):this.element.find("[e-pane='content']"),right:this.model.rightPane.templateId?this._getTemplate(this.model.rightPane.templateId,"_rightpane"):this.element.find("[data-ej-pane='right']").length?this.element.find("[data-ej-pane='right']"):this.element.find("[e-pane='right']")},this._panel.left.addClass("e-m-type-"+this.model.leftPane.animationType+" e-m-sp-left e-m-pane e-m-hidden e-m-abs"),this._panel.right.addClass("e-m-type-"+this.model.rightPane.animationType+" e-m-sp-right e-m-pane e-m-hidden e-m-abs"),this._panel.content.addClass("e-m-sp-content e-m-pane e-m-abs"),this._elementOverlay=t.buildTag("div#"+this._id+"_Overlay",{},{},{"class":"e-m-overlay e-m-splitpane-overlay e-m-hide e-m-abs"}),this._elementOverlay.appendTo(this._panel.content),this},_getTemplate:function(i,r){var u=null;return n("#"+i)[0].nodeName=="SCRIPT"?(u=t.buildTag("div#"+this._id+r),u.html(n("#"+i).text()).appendTo(this.element),t.widget.init(u),t.angular.defaultAppName&&angular&&t.angular.compile(u)):(u=n("#"+i),n("#"+i).parent()!=this.element&&u.appendTo(this.element)),u},_renderControl:function(){this._direction=["left","right"];this.element.addClass("e-m-splitpane e-m-"+this.model.renderMode+" e-m-"+(t.isMobile()?"mobile ":"tablet ")+this.model.cssClass).addClass(t.isLowerResolution()?"e-m-lower":"e-m-higher").addClass(this.model.isRelative?"e-m-rel":"e-m-abs");this._setPaneSize()},_createDelegates:function(){this._swipeStartHandler=n.proxy(this._swipeStart,this);this._swipeEndHandler=n.proxy(this._swipeEnd,this);this._swipeMoveHandler=n.proxy(this._swipeMove,this);this._overlayTapStartDelegate=n.proxy(this._overlayTapStart,this);this._overlayTapEndDelegate=n.proxy(this._overlayTapEnd,this);this._resizeDelegate=n.proxy(this._resize,this)},_wireEvents:function(n){var i=!n&&this.model.enableSwipe?"bind":"unbind";this._bindSwipeEvent(n);t.listenTouchEvent(this._elementOverlay,t.startEvent(),this._overlayTapStartDelegate,n);t.isTouchDevice()&&this._isOrientationSupported()?t.listenTouchEvent(window,"orientationchange",this._resizeDelegate,n,this):t.listenTouchEvent(window,"resize",this._resizeDelegate,n,this)},_bindSwipeEvent:function(n){this.model.enableSwipe&&t.listenTouchEvent(this._panel.content,t.startEvent(),this._swipeStartHandler,n)},_overlayTapStart:function(){t.listenTouchEvent(this._elementOverlay,t.endEvent(),this._overlayTapEndDelegate)},_overlayTapEnd:function(){this._cancelClose||this._closeOpenedPane(this._lModel.defaultTransitionTime);t.listenTouchEvent(this._elementOverlay,t.endEvent(),this._overlayTapEndDelegate,!0)},_swipeStart:function(n){var r=n.changedTouches?n.changedTouches[0]:n,i=this;if(i._startX=r.clientX,i._cancelClose=null,i._startTime=new Date,i._ap=r.clientX<i.element.offset().left+i.model.edgeThreshold?"left":i._ap=r.clientX<i.element.offset().left+i.model.edgeThreshold?"left":r.clientX>i.element.width()-i.model.edgeThreshold?"right":"",i._isPaneOpen()&&(i._ap=i._isPaneOpen()),i._ap&&i._panel[i._ap].length)i._tp=i._getTransitionPane(i._ap),t.isLowerResolution()*i.model.rightPane.showOnTablet&&i._panel.right.hide(),t.isLowerResolution()*i.model.leftPane.showOnTablet&&i._panel.left.hide(),i._panel[i._ap].show(),i.model.stopEventPropagation&&t.browserInfo().name!="msie"&&t.blockDefaultActions(n);else return;t.listenTouchEvent(i.element,t.moveEvent(),i._swipeMoveHandler,!1,i);t.listenTouchEvent(i.element,t.endEvent(),i._swipeEndHandler,!1,i);t.listenTouchEvent(i.element,t.cancelEvent(),i._swipeEndHandler,!1,i)},_swipeMove:function(n){var u,i;if(this._ap){u=n.changedTouches?n.changedTouches[0]:n;i=this;i.model.stopEventPropagation&&t.browserInfo().name=="msie"&&t.blockDefaultActions(n);i._swipeDirection=i._startX>u.clientX?"right":i._startX==u.clientX?"":"left";var r=u.clientX-i._startX,f=i._panel[i._ap].outerWidth(),e=i._ap=="left"?1:-1;i._panel[i._swipeDirection]&&i._panel[i._swipeDirection].length&&!i._isPaneOpen()&&i._panel[i._swipeDirection].removeClass(i._class.hidden).addClass("e-m-opening");i._tp&&!i._isPaneOpen()&&i._ap?(r=f<=Math.abs(r)?e*f:r,i._transform(r,0,i._tp)._elementOverlay.removeClass(i._class.hide),i.model[i._ap+"Pane"].animationType!="overlay"?i._elementOverlay.css("opacity",0):i._elementOverlay.css("opacity",Math.abs(r/i._panel[i._ap].width())*i._lModel.overlayOpacity)):i._tp&&i._ap&&i._isPaneOpen()!=i._swipeDirection&&i._swipeDirection!=""&&(r=f<=Math.abs(r)?0:e*r+f,i._transform(e*r,0,i._tp),i._cancelClose=!0,i.model[i._ap+"Pane"].animationType!="reveal"&&i._elementOverlay.css("opacity",Math.abs(r/i._panel[i._ap].width())*i._lModel.overlayOpacity));i._movedX=r}},_swipeEnd:function(n){var h=n.changedTouches?n.changedTouches[0]:n,i=this,u=Math.abs(i._movedX),r=new Date-i._startTime,s=!1;if(Math.abs(r)<100&&(s=!0),i._panel[i._swipeDirection]&&i._panel[i._swipeDirection].length&&!i._isPaneOpen()&&i._panel[i._swipeDirection].removeClass("e-m-opening"),r=i._getMomentumTime(i._movedX,Math.abs(r),i._panel[i._ap].outerWidth()),r=r>500?500:r,i._cancelClose&&i._swipeDirection||u&&!i._isPaneOpen()&&i._tp&&i._ap){var f=i._panel[i._ap].outerWidth(),e=i._ap=="left"?f:-f,o=i._panel[i._ap].outerWidth()/100*i._lModel.swipeThreshold;o<u&&!i._cancelClose||o>f-u&&i._cancelClose?(i._transform(e,!i._isPaneOpen()&&!i._cancelClose?r:i._lModel.defaultTransitionTime,i._tp),opacity=i.model[i._ap+"Pane"].animationType!="overlay"?0:Math.abs(e/i._panel[i._ap].width())*i._lModel.overlayOpacity,i._elementOverlay.css("opacity",opacity),i._panel[i._ap].addClass(i._class.opened)):i._cancelClose?i._closeOpenedPane(r<100?100:r):(i._transform(0,i._lModel.fastTransitionTime,i._tp)._elementOverlay.addClass(i._class.hide),i._panel[i._ap].addClass(i._class.hidden))}else i._closeOpenedPane(i._lModel.defaultTransitionTime);this._trigger("swipe",{direction:i._swipeDirection,event:n});i._lastClientX=i._swipeDirection=i._ap=i._tp=i._movedX=i._startTime=null;t.listenTouchEvent(i.element,t.moveEvent(),i._swipeMoveHandler,!0,i);t.listenTouchEvent(i.element,t.endEvent(),i._swipeEndHandler,!0,i);t.listenTouchEvent(i.element,t.cancelEvent(),i._swipeEndHandler,!0,i)},_getMomentumTime:function(n,t,i){return Math.abs(t-Math.abs(i/n*t))},_getTransitionPane:function(n){return this.model[n+"Pane"].animationType=="reveal"?this._panel.content:this._panel[n]},_isPaneOpen:function(){var n="";return this.element.find("."+this._class.opened).length&&(n=this.element.children("."+this._class.opened).hasClass("e-m-sp-left")?"left":"right"),n},_isOrientationSupported:function(){return"orientation"in window&&"onorientationchange"in window},_transform:function(n,t,i,r){if(n=="none")return this;var f="-"+this._browser+"-transform",e="translateX("+n+"px) translateZ(0px)",o="-"+this._browser+"-transition-property",s="-"+this._browser+"-transition-duration",u=t+"ms";return i.css(o,"transform").css(s,u).css(f,e).css("transition-duration",u),r&&i.addClass(r),this},_closeOpenedPane:function(n){if(n=n==i?0:n,this._isPaneOpen()){var u=this._isPaneOpen(),f=this._getTransitionPane(u),r=this;this._elementOverlay.addClass(this._class.hide);this._trigger("beforeClose",this._getArgData(u));f.bind(t.transitionEndEvent(),function(){r._trigger("close",r._getArgData(u));r._panel.left.length&&r._panel.left.removeClass(r._class.hidden);r._panel.right.length&&r._panel.right.removeClass(r._class.hidden);f.unbind(t.transitionEndEvent())});this._transform(0,n,f).element.children("."+this._class.opened).removeClass(this._class.opened)}return this},_resize:function(){this._closeOpenedPane(0)._setPaneSize();this.element.removeClass("e-m-lower e-m-higher").addClass(t.isLowerResolution()?"e-m-lower":"e-m-higher")},_setPaneSize:function(){var n,i;return this._panel.content.css({right:"",left:""}),this._panel.left.length&&(this._panel.left.css({width:this.model.leftPane.width,left:""}),!t.isLowerResolution()*this.model.leftPane.showOnTablet?(this._panel.left.addClass("e-m-exposed").removeClass(this._class.hidden),this._panel.content.css("left",this._panel.left.outerWidth())):(n=this.model.leftPane.width!="auto"?"-"+this.model.leftPane.width:-t.getDimension(this._panel.left,"width"),this.model.leftPane.animationType=="overlay"&&this._panel.left.css("left",n).addClass(this._class.hidden),this._panel.left.removeClass("e-m-exposed"))),this._panel.right.length&&(this._panel.right.css({width:this.model.rightPane.width,right:""}),!t.isLowerResolution()*this.model.rightPane.showOnTablet?(this._panel.right.addClass("e-m-exposed").removeClass(this._class.hidden),this._panel.content.css("right",this._panel.right.outerWidth())):(i=this.model.rightPane.width!="auto"?"-"+this.model.rightPane.width:-t.getDimension(this._panel.right,"width"),this.model.rightPane.animationType=="overlay"&&this._panel.right.css("right",i).addClass(this._class.hidden),this._panel.right.removeClass("e-m-exposed"))),this.element.css({height:this.model.height,width:this.model.width}),this},_setModel:function(n){for(var t in n){switch(t){case"renderMode":this._setRenderMode(n.renderMode);break;case"cssClass":this.element.removeClass(this._cssClass).addClass(n.cssClass);this._cssClass=n.cssClass;break;case"isRelative":this.element.removeClass("e-m-rel e-m-abs").addClass(this.model.isRelative?"e-m-rel":"e-m-abs");break;case"height":case"width":this.element.css({height:this.model.height,width:this.model.width});break;case"leftPane":case"rightPane":case"contentPane":this["_set"+t.charAt(0).toUpperCase()+t.slice(1)](n[t])}!1&&this._refresh()}},_setRenderMode:function(n){n=="auto"&&t.setRenderMode(this);this.element.removeClass("e-m-ios7 e-m-android e-m-windows e-m-flat").addClass("e-m-"+this.model.renderMode);this._setPaneSize()},_setLeftPane:function(n){for(var t in n)switch(t){case"animationType":this._panel.left.removeClass("e-m-type-overlay");case"width":case"showOnTablet":this._setPaneSize();break;case"templateId":this._setTemplate(n[t],"left")}},_setRightPane:function(n){for(var t in n)switch(t){case"animationType":this._panel.right.removeClass("e-m-type-overlay");case"width":case"showOnTablet":this._setPaneSize();break;case"templateId":this._setTemplate(n[t],"right")}},_setTemplate:function(t,i){this._closeOpenedPane();n("#"+t).removeAttr("class style");this._panel[i].length&&this._panel[i].removeAttr("class style").addClass(this._class.hidden);this._initPane()._setPaneSize()},_setContentPane:function(n){for(var t in n)switch(t){case"templateId":this._bindSwipeEvent(!0);this._setTemplate(n[t],"content");this._bindSwipeEvent()}},_contentTransition:function(t){n(t.target).hasClass("new")&&n(t.target).contents().unwrap();n(t.target).hasClass("old")&&n(t.target).remove()},_getArgData:function(n){return{panel:n,element:this._panel[n],content:this._panel.content}},_isCanOpen:function(n){return this.model[n+"Pane"].showOnTablet==!0&&t.isLowerResolution()==!1?!1:!0},_refresh:function(){this._clearElements();this._renderControl();this.model.renderTemplate&&t.angular.defaultAppName&&t.angular.compile(this._layouts);this._wireEvents()},_clearElements:function(){this.element.removeAttr("class style");this._panel.left.length&&this._panel.left.removeAttr("class style");this._panel.content.length&&this._panel.content.removeAttr("class style");this._panel.right.length&&this._panel.right.removeAttr("class style");this._elementOverlay&&this._elementOverlay.remove();this.element.attr({style:this._orgEleStyle,"class":this._orgEleClass}).removeClass(this._rootCSS)},_destroy:function(){this._wireEvents(!0);this._clearElements()},openLeftPane:function(n){if(!this._isPaneOpen()&&this._panel.left.length&&this._isCanOpen("left")){var i=this._getTransitionPane("left"),r=this;return this._panel.left.removeClass(this._class.hidden),this._trigger("beforeOpen",this._getArgData("left")),i.bind(t.transitionEndEvent(),function(){r._trigger("open",r._getArgData("left"));i.unbind(t.transitionEndEvent())}),this._transform(this._panel.left.outerWidth(),n?n:this._lModel.defaultTransitionTime,i),opacity=this.model.leftPane.animationType!="overlay"?0:this._lModel.overlayOpacity,this._elementOverlay.css("opacity",opacity).removeClass(this._class.hide),this._panel.left.addClass(this._class.opened),this}},openRightPane:function(n){if(!this._isPaneOpen()&&this._panel.right.length&&this._isCanOpen("right")){var i=this._getTransitionPane("right"),r=this;return this._panel.right.removeClass(this._class.hidden),this._trigger("beforeOpen",this._getArgData("right")),i.bind(t.transitionEndEvent(),function(){r._trigger("open",r._getArgData("right"));i.unbind(t.transitionEndEvent())}),this._transform(-this._panel.right.outerWidth(),n?n:this._lModel.defaultTransitionTime,i),opacity=this.model.rightPane.animationType!="overlay"?0:this._lModel.overlayOpacity,this._elementOverlay.css("opacity",opacity).removeClass(this._class.hide),this._panel.right.addClass(this._class.opened),this}},closePane:function(n){this._closeOpenedPane(n?n:this._lModel.defaultTransitionTime)}})})(jQuery,Syncfusion)});
