/*!
*  filename: ej.spellcheck.min.js
*  version : 14.3.0.49
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./../common/ej.scroller.min","./ej.dialog.min","./ej.button.min","./ej.listbox.min","./ej.menu.min"],n):n()})(function(){"use strict";var n=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},t=function(t){function i(){t.apply(this,arguments);this.rootCSS="e-spellcheck";this.PluginName="ejSpellCheck";this._id="null";this.defaults={locale:"en-US",misspellWordCss:"e-errorword",ignoreSettings:{ignoreAlphaNumericWords:!0,ignoreHtmlTags:!0,ignoreEmailAddress:!0,ignoreMixedCaseWords:!0,ignoreUpperCase:!0,ignoreUrl:!0,ignoreFileNames:!0},dictionarySettings:{dictionaryUrl:"",customDictionaryUrl:""},maxSuggestionCount:6,enableAsynchronous:!0,ajaxDataType:"jsonp",ignoreWords:[],contextMenuSettings:{enable:!0,menuItems:[{id:"IgnoreAll",text:"Ignore All"},{id:"AddToDictionary",text:"Add To Dictionary"}]},actionSuccess:null,actionBegin:null,actionFailure:null,start:null,complete:null,contextOpen:null,contextClick:null,dialogBeforeOpen:null,dialogOpen:null,dialogClose:null,validating:null};this.dataTypes={locale:"string",misspellWordCss:"string",ignoreSettings:{ignoreAlphaNumericWords:"boolean",ignoreHtmlTags:"boolean",ignoreEmailAddress:"boolean",ignoreMixedCaseWords:"boolean",ignoreUpperCase:"boolean",ignoreUrl:"boolean",ignoreFileNames:"boolean"},dictionarySettings:{dictionaryUrl:"string",customDictionaryUrl:"string",customDictionaryPath:"string"},maxSuggestionCount:"number",enableAsynchronous:"boolean",ajaxDataType:"string",ignoreWords:"array",contextMenuSettings:{enable:"boolean",menuItems:"array"}};this._localizedLabels=null;this._statusFlag=!0;this.model=this.defaults}return n(i,t),i.prototype._init=function(){ej.isNullOrUndefined(this.element)||this._renderSpellCheck()},i.prototype._renderSpellCheck=function(){this._initLocalize();this._renderControls()},i.prototype._initLocalize=function(){ej.SpellCheck.Locale["default"]=ej.SpellCheck.Locale["en-US"]={SpellCheckButtonText:"SpellCheck",NotInDictionary:"Not In Dictionary",SuggestionLabel:"Suggestions",IgnoreOnceButtonText:"Ignore Once",IgnoreAllButtonText:"Ignore All",AddToDictionary:"Add to Dictionary",ChangeButtonText:"Change",ChangeAllButtonText:"Change All",CloseButtonText:"Close",CompletionPopupMessage:"Spell check is complete",ErrorPopupMessage:"Spell check is not completed",CompletionPopupTitle:"Spell check alert",OK:"OK",NoSuggestionMessage:"No suggestions available"};this._localizedLabels=this._getLocalizedLabels()},i.prototype._renderControls=function(){var n=this;this.element.addClass("e-spellcheck");this.element[0].spellcheck=!1;this.element[0].addEventListener("input",function(){n._statusFlag=!0},!1)},i.prototype.showInDialog=function(){if(this._statusFlag){var n=ej.buildTag("div.e-spellcheckparent e-spellcheck");this.element.after(n);this._renderDialogWindow()}else this._alertWindowRender("show")},i.prototype.validate=function(){if(this.model.contextMenuSettings.enable&&!ej.isNullOrUndefined(this.model.dictionarySettings.dictionaryUrl)&&this._statusFlag){var n=ej.isNullOrUndefined($(this.element)[0].value)?($(this.element)[0].innerText||$(this.element)[0].textContent).trim():$(this.element)[0].value.trim();this._ajaxRequest(this,n,"validateOnType")}},i.prototype.spellCheck=function(n,t){var i={targetSentence:n,misspelledWordCss:t,requestType:"spellCheck"};if(this._trigger("actionBegin",i))return!1;this._misspelledWordCss=t;this._ajaxRequest(this,n,"spellCheck")},i.prototype.ignoreAll=function(n,t){var i;return ej.isNullOrUndefined(n)||n===""||ej.isNullOrUndefined(t)||t===""?!1:(i={ignoreWord:n,targetContent:t,requestType:"ignoreAll"},this._trigger("validating",i))?!1:(this.model.ignoreWords.push(n),this._updateErrorContent(n,t,null,"ignoreAll",null))},i.prototype.ignore=function(n,t,i){var r;return ej.isNullOrUndefined(n)||n===""||ej.isNullOrUndefined(t)||t===""?!1:(r={ignoreWord:n,targetContent:t,index:i,requestType:"ignore"},this._trigger("validating",r))?!1:this._updateErrorContent(n,t,null,"ignore",i)},i.prototype.change=function(n,t,i,r){var u;return ej.isNullOrUndefined(n)||n===""||ej.isNullOrUndefined(t)||t===""||ej.isNullOrUndefined(i)||i===""?!1:(u={changableWord:n,targetContent:t,changeWord:i,index:r,requestType:"changeWord"},this._trigger("validating",u))?!1:this._updateErrorContent(n,t,i,"changeWord",r)},i.prototype.changeAll=function(n,t,i){var r;return ej.isNullOrUndefined(n)||n===""||ej.isNullOrUndefined(t)||t===""||ej.isNullOrUndefined(i)||i===""?!1:(r={changableWord:n,targetContent:t,changeWord:i,requestType:"changeAll"},this._trigger("validating",r))?!1:this._updateErrorContent(n,t,i,"changeAll",null)},i.prototype.addToDictionary=function(n){if(ej.isNullOrUndefined(n)||n==="")return!1;var t={customWord:n,requestType:"addToDictionary"};if(this._trigger("validating",t))return!1;this._customWord=JSON.stringify({customWord:n});this._ajaxRequest(this,null,"addToDictionary")},i.prototype._updateErrorContent=function(n,t,i,r,u){var s,f,o,h,e,c;if(t.indexOf(n)!==-1){if(f=ej.browserInfo().name!=="msie"||!ej.isNullOrUndefined(this._spellCheckWindow)&&this._spellCheckWindow.ejDialog("isOpen")?'<span class="errorspan '+this.model.misspellWordCss+'">'+n+"<\/span>":'<span class="errorspan '+this.model.misspellWordCss+'" style="-ms-touch-action: pinch-zoom; touch-action: pinch-zoom;">'+n+"<\/span>",o=r==="ignoreAll"||r==="addToDictionary"||r==="ignore"?n:i,r==="ignoreAll"||r==="addToDictionary"||r==="changeAll")t=t.replace(new RegExp(f,"g"),o);else if(r==="ignore"||r==="changeWord")if(ej.isNullOrUndefined(u))t=t.replace(f,o);else{for(h=[],e=t.indexOf(f);e!==-1;)h.push(e),e=t.indexOf(f,++e);c=h[u];t=t.substr(0,c)+o+t.substr(c+f.length)}s={resultHTML:t}}else s=!1;return s},i.prototype._renderDialogWindow=function(){this._dialogWindowRendering();this._showDialog()},i.prototype._dialogWindowRendering=function(){var n=this,u,t;this._spellCheckWindow=ej.buildTag("div.e-spellcheckdialog#"+this._id+"ErrorCorrectionWindow");var f=ej.buildTag("div.e-dialogdiv"),e=ej.buildTag("div.e-row").append(ej.buildTag("div.e-labelcell").append(ej.buildTag("label.e-dictionarylabel",this._localizedLabels.NotInDictionary+":"))),i=ej.buildTag("div.e-row","",{height:"90px"}),o=ej.buildTag("div.e-cell e-sentencecell").append(ej.buildTag("div.e-sentence","",{},{id:this._id+"_Sentences",name:"sentences",contenteditable:"false"}));i.append(o);var s=ej.buildTag("div.e-buttoncell"),h=ej.buildTag("button.e-btnignoreonce",this._localizedLabels.IgnoreOnceButtonText,{},{id:this._id+"_IgnoreOnce"}).attr("type","button"),c=ej.buildTag("button.e-btnignoreall",this._localizedLabels.IgnoreAllButtonText,{},{id:this._id+"_IgnoreAll"}).attr("type","button"),l=ej.buildTag("button.e-btnaddtodictionary",this._localizedLabels.AddToDictionary,{},{id:this._id+"_AddToDictionary"}).attr("type","button");i.append(s.append(h).append(c).append(l));var a=ej.buildTag("div.e-row").append(ej.buildTag("div.e-labelcell").append(ej.buildTag("label.e-lablesuggestions",this._localizedLabels.SuggestionLabel+":"))),r=ej.buildTag("div.e-row","",{height:"90px"}),v=ej.buildTag("div.e-cell e-suggestioncell").append(ej.buildTag("ul.e-suggesteditems","",{},{id:this._id+"_Suggestions"}));r.append(v);var y=ej.buildTag("div.e-buttoncell"),p=ej.buildTag("button.e-btnchange",this._localizedLabels.ChangeButtonText,{},{id:this._id+"_Change"}).attr("type","button"),w=ej.buildTag("button.e-btnchangeall",this._localizedLabels.ChangeAllButtonText,{},{id:this._id+"_ChangeAll"}).attr("type","button"),b=ej.buildTag("button.e-btnclose",this._localizedLabels.CloseButtonText,{},{id:this._id+"_Close"}).attr("type","button");for(r.append(y.append(p).append(w).append(b)),f.append(e).append(i).append(a).append(r),this._spellCheckWindow.append(f),this._spellCheckWindow.find(".e-suggesteditems").ejListBox({width:"295px",height:"90px",dataSource:null,selectedIndex:0}),u=[".e-btnignoreonce",".e-btnignoreall",".e-btnaddtodictionary",".e-btnchange",".e-btnchangeall",".e-btnclose"],t=0;t<u.length;t++)this._spellCheckWindow.find(u[t]).ejButton({width:"140px",height:"25px",click:function(t){t.model.text===n._localizedLabels.CloseButtonText?n._close():n._changeErrorWord(t)}});this._spellCheckWindow.ejDialog({width:"462px",enableModal:!0,enableResize:!1,showOnInit:!1,allowKeyboardNavigation:!1,target:".e-spellcheckparent",title:this._localizedLabels.SpellCheckButtonText,close:function(){n._close()}});this._spellCheckWindow.find(".e-sentence").append(ej.buildTag("div.e-sentencescroller").append(ej.buildTag("div").append(ej.buildTag("div.e-sentencecontent"))));this._spellCheckWindow.find(".e-sentence .e-sentencescroller").ejScroller({height:"84px",width:"293px",scrollerSize:20})},i.prototype._alertWindowRender=function(n){this._renderAlertWindow(n);this._alertWindow.ejDialog("open")},i.prototype._renderAlertWindow=function(n){var t=this,i,r;this._alertWindow=ej.buildTag("div.e-alertdialog#"+this._id+"alertWindow");i=ej.buildTag("div.e-alertbtn","",{"text-align":"center"}).append(ej.buildTag("button.e-alertbutton e-alertspellok",this._localizedLabels.OK,{},{id:this._id+"alertok"}).attr("type","button"));r=ej.buildTag("div.e-alerttext",this._localizedLabels.CompletionPopupMessage,{"text-align":"center",padding:"5px"});this._alertWindow.append(r).append(i);this.element.append(this._alertWindow);this._alertWindow.find(".e-alertbutton").ejButton({showRoundedCorner:!0,width:"100px",click:function(){t._alertClose()}});this._alertWindow.ejDialog({width:"350px",showOnInit:!1,enableModal:!0,title:this._localizedLabels.CompletionPopupTitle,enableResize:!1,allowKeyboardNavigation:!1,target:n==="validating"?".e-spellcheckdialog":$("body"),cssClass:"e-alertdialog",close:function(){t._alertClose()}})},i.prototype._renderContextMenu=function(){var n=this;this._contextMenu=ej.buildTag("ul#"+this._id+"contextMenu");this._contextMenu.ejMenu({fields:{id:"id",text:"text",parentId:"parentId"},menuType:ej.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"."+this.model.misspellWordCss,width:"auto",click:function(t){n._onMenuSelect(t)},beforeOpen:function(t){n._beforeOpen(t)}})},i.prototype._showDialog=function(){var i={spellCheckDialog:this._spellCheckWindow,requestType:"dialogBeforeOpen"},n,t;if(this._trigger("dialogBeforeOpen",i)||(this._spellCheckWindow.ejDialog("open"),n=ej.isNullOrUndefined($(this.element)[0].value)?($(this.element)[0].innerText||$(this.element)[0].textContent).trim():$(this.element)[0].value.trim(),ej.browserInfo().name==="mozilla"?this._spellCheckWindow.find(".e-sentence .e-sentencecontent")[0].textContent=n:this._spellCheckWindow.find(".e-sentence .e-sentencecontent")[0].innerText=n,t={targetText:n,requestType:"dialogOpen"},this._trigger("dialogOpen",t)))return!1;this._ajaxRequest(this,n,"spellCheckDialog")},i.prototype._ajaxRequest=function(n,t,i){var r=i==="addToDictionary"?n._customWord:this._getModelValues(this,t,i);$.ajax({async:this.model.enableAsynchronous,url:i==="addToDictionary"?this.model.dictionarySettings.customDictionaryUrl:this.model.dictionarySettings.dictionaryUrl,data:{data:r},contentType:"application/json; charset=utf-8",dataType:this.model.ajaxDataType,crossDomain:!0,success:function(r){var f,v,o,s,e,y,p,w,b,k,d,c,g,l,h,u,a;if(f=i==="addToDictionary"?n._errorWordDetails:n._errorWordDetails=ej.isNullOrUndefined(n.model)?r:n.model.ajaxDataType==="json"?r.Data:r,o=t,f.length>0){if(i==="spellCheckDialog"||i==="validateOnType"||i==="validateOnRender")y=$(n.element)[0],p=n._getFilterData(f,n),e=ej.dataUtil.distinct(p),i==="spellCheckDialog"?n._dialogModeOperations(n,e,o,i):(i==="validateOnType"||i==="validateOnRender")&&n._validateOnTypeOperations(n,e,o,i,y);else if(i==="spellCheck"){if(f.length>0){for(w=n._getFilterData(f,n),e=ej.dataUtil.distinct(w),u=0;u<e.length;u++)b=(new ej.Query).where("ErrorWord",ej.FilterOperators.equal,e[u]),k=new ej.DataManager(f).executeLocal(b),k[0].SuggestedWords.length>0&&(v='<span class="errorspan '+(!ej.isNullOrUndefined(n._misspelledWordCss)&&n._misspelledWordCss!==""?n._misspelledWordCss:n.model.misspellWordCss)+'">'+e[u]+"<\/span>",d=new RegExp(e[u],"gi"),o=o.replace(d,v));s={resultHTML:o,errorWordDetails:f,requestType:"spellCheck"};n._misspelledWordCss=null}else s={resultHTML:o,errorWordDetails:f,requestType:"spellCheck"};n._trigger("actionSuccess",s)}else if(i==="addToDictionary"){if(c=n._updateErrorContent(r,n._errorHTML,null,"addToDictionary",null),!ej.isNullOrUndefined(n._errorHTML)){if(!ej.isNullOrUndefined(n._spellCheckWindow)&&n._spellCheckWindow.find(".e-btnaddtodictionary").hasClass("e-select"))if(g=n._spellCheckWindow.find(".e-suggesteditems"),l=n._spellCheckWindow.find(".e-sentence .e-sentencecontent"),n._errorWordsData.length>0){for(n._errorHTML=l[0].innerHTML=c.resultHTML,h=l.children("span"),u=0;u<h.length;u++)a=h[u].innerText||h[u].textContent,a===r&&$(h[u]).replaceWith(a);n._listBoxDataUpdate(n)}else g.ejListBox({dataSource:null}),n._statusFlag=!1,n._alertWindowRender("validating");else ej.isNullOrUndefined(n._contextMenu)||($(n.element)[0].innerHTML=c.resultHTML);s={resultHTML:c.resultHTML,errorWordDetails:r,requestType:"addToDictionary"};n._trigger("actionSuccess",s)}n._renderContextMenu()}}else i==="spellCheckDialog"&&n._spellCheckWindow.ejDialog("isOpen")&&n._spellCheckWindow.ejDialog("close"),i!=="spellCheck"&&i!=="validateOnType"&&n._alertWindowRender("load"),i==="spellCheck"&&(s={resultHTML:t,errorWordDetails:f,requestType:"spellCheck"},n._trigger("actionSuccess",s)),i==="validateOnType"&&n._removeSpan(n)},error:function(t,r,u){var f={errorMessage:u,requestType:i};n._trigger("actionFailure",f)}})},i.prototype._dialogModeOperations=function(n,t,i,r){var s={errorWords:t,targetText:i,requestType:r},u,f,e,o;if(this._trigger("start",s))return!1;u=n._spellCheckWindow.find(".e-sentence .e-sentencecontent");t.length>0?(n._removeSpan(n),f=n.element[0].innerHTML,i=n._formHtml(t,f),n._errorHTML=u[0].innerHTML=i,n._errorContent=u[0].innerText||u[0].textContent,e=n._spellCheckWindow.find(".e-sentence .e-sentencescroller").data("ejScroller"),e.refresh(),n._listBoxDataUpdate(n)):(o=n._spellCheckWindow.find(".e-suggesteditems"),r==="spellCheckDialog"&&(u[0].innerHTML=i),o.ejListBox({dataSource:null}),n._statusFlag=!1,this._alertWindowRender("load"))},i.prototype._validateOnTypeOperations=function(n,t,i){if(t.length>0){n._removeSpan(n);var r=n.element[0].innerHTML;i=n._formHtml(t,r);n.element[0].innerHTML=i;$(n.element[0]).find("span").addClass(this.model.misspellWordCss);n._statusFlag=!0;n._renderContextMenu()}else n._removeSpan(n),n._statusFlag=!1},i.prototype._removeSpan=function(n){for(var r,i=$(n.element[0]).find("span"),t=0;t<i.length;t++)r=i[t].innerText||i[t].textContent,$(i[t]).replaceWith(r)},i.prototype._getFilterData=function(n,t){var u=[],i,f,r;for(t._errorWordsData=t._errorWordDetails=n,i=0;i<t.model.ignoreWords.length;i++)f=(new ej.Query).where("ErrorWord",ej.FilterOperators.notEqual,t.model.ignoreWords[i]),t._errorWordsData=new ej.DataManager(t._errorWordsData).executeLocal(f);for(r=0;r<t._errorWordsData.length;r++)u.push(t._errorWordsData[r].ErrorWord);return u},i.prototype._formHtml=function(n,t){for(var r,u,i=0;i<n.length;i++)r='<span class="errorspan">'+n[i]+"<\/span>",u=new RegExp("\\b"+n[i]+"\\b","gi"),t=t.replace(u,r);return t},i.prototype._listBoxDataUpdate=function(n){var t=n._spellCheckWindow.find(".e-suggesteditems"),r=n._spellCheckWindow.find(".e-sentence .e-sentencecontent").find(".errorspan"),f,e;$(r[0]).addClass(this.model.misspellWordCss);var o=(new ej.Query).where("ErrorWord",ej.FilterOperators.equal,r[0].innerText||r[0].textContent),s=new ej.DataManager(n._errorWordDetails).executeLocal(o),i=ej.dataUtil.distinct(s),u=$("#"+n._id+"_Suggestions").data("ejListBox");i[0].SuggestedWords.length>0?(n._spellCheckWindow.find(".e-btnchange").hasClass("e-disable")&&n._spellCheckWindow.find(".e-btnchangeall").hasClass("e-disable")&&(n._spellCheckWindow.find(".e-btnchange").removeClass("e-disable"),n._spellCheckWindow.find(".e-btnchangeall").removeClass("e-disable")),f=n.model.maxSuggestionCount<i[0].SuggestedWords.length?n.model.maxSuggestionCount:i[0].SuggestedWords.length,t.ejListBox({selectedIndex:null}),t.ejListBox({dataSource:n._convertData(i[0].SuggestedWords.slice(0,f),"dictionaryData"),selectedIndex:0}),u.refresh()):(n._spellCheckWindow.find(".e-btnchange").addClass("e-disable"),n._spellCheckWindow.find(".e-btnchangeall").addClass("e-disable"),e=[this._localizedLabels.NoSuggestionMessage],t.ejListBox({selectedIndex:null}),t.ejListBox({dataSource:this._convertData(e,"dictionaryData"),selectedIndex:0}),u.refresh());$(n._spellCheckWindow.find("."+n.model.misspellWordCss)).get(0).scrollIntoView(!1)},i.prototype._beforeOpen=function(n){var o,f,i,r,s,u;this._selectedTarget=n.events.target;var e=this._selectedValue=this._selectedTarget.textContent||this._selectedTarget.innerText,h=(new ej.Query).where("ErrorWord",ej.FilterOperators.equal,e.trim()),t=new ej.DataManager(this.model.ajaxDataType==="json"?this._errorWordDetails.Data:this._errorWordDetails).executeLocal(h);if(this._errorWordsData=t,o={selectedErrorWord:e,requestType:"contextOpen"},this._trigger("contextOpen",o))return!1;if(this._errorWordsData.length>0)if(f=this._contextMenu.data("ejMenu"),i=this.model.contextMenuSettings.menuItems,t[0].SuggestedWords.length>0){for(r=[],s=this.model.maxSuggestionCount<t[0].SuggestedWords.length?this.model.maxSuggestionCount:t[0].SuggestedWords.length,r=this._convertData(t[0].SuggestedWords.slice(0,s),"menuData"),u=0;u<i.length;u++)r.push(i[u]);f.option("fields.dataSource",r)}else f.option("fields.dataSource",i);else n.cancel=!0},i.prototype._onMenuSelect=function(n){var t=n.events.ID.split("_"),u,f,i,r,e,o;if(this._errorContent=$("#"+this._id).text().trim(),this._errorHTML=$("#"+this._id).html().trim(),u={selectedOption:t[0],requestType:"menuSelect",targetContent:this._errorHTML,selectedValue:this._selectedValue},this._trigger("contextClick",u))return!1;switch(t[0]){case"AddToDictionary":f=(this._selectedTarget.innerText||this._selectedTarget.textContent).trim();this.addToDictionary(f);break;case"IgnoreAll":i=(this._selectedTarget.innerText||this._selectedTarget.textContent).trim();this.model.ignoreWords.push(i);r=this.ignoreAll(i,this._errorHTML);this._errorHTML=r.resultHTML;$("#"+this._id).html(r.resultHTML);this._renderMenu(this);break;default:e=t[0];this._selectedTarget.innerHTML=e;o=document.createTextNode(this._selectedTarget.innerText||this._selectedTarget.textContent);this._selectedTarget.parentNode.insertBefore(o,this._selectedTarget);$(this._selectedTarget).remove();this._renderMenu(this)}},i.prototype._renderMenu=function(n){var t;t=$($(n.element)[0]).children("span").length;n._statusFlag=t>0?!0:!1;this._renderContextMenu()},i.prototype._getElement=function(){for(var t=document.getElementsByTagName("span"),r=this._selectedValue,i=[],n=0;n<t.length;n++)t[n].textContent===r&&i.push(t[n]);return i},i.prototype._alertClose=function(){!ej.isNullOrUndefined(this._alertWindow)&&this._alertWindow.parents().find(".e-alertdialog").length>0&&(this._alertWindow.ejDialog("close"),this._alertWindow.parents().find(".e-alertdialog").remove(),this._close())},i.prototype._close=function(){if(!ej.isNullOrUndefined(this._spellCheckWindow)&&this._spellCheckWindow.parents().find(".e-spellcheckparent").length>0){var n=this._spellCheckWindow.find(".e-sentence .e-sentencecontent"),t=n.html(),i={updatedText:n.text(),requestType:"dialogClose"};if(this._trigger("dialogClose",i))return!1;this._spellCheckWindow.ejDialog("close");n.html()==="undefined"||n.html()===""?$("#"+this._id).html(ej.isNullOrUndefined($(this.element)[0].value)?($(this.element)[0].innerText||$(this.element)[0].textContent).trim():$(this.element)[0].value.trim()):$("#"+this._id).html(t);this._removeSpan(this);this._errorContent=n.text();this._spellCheckWindow.parents().find(".e-spellcheckparent").remove()}},i.prototype._changeErrorWord=function(n){var r=$("#"+this._id+"_Suggestions").ejListBox("option","value"),u=this._spellCheckWindow.find(".e-sentence .e-sentencecontent")[0].innerHTML,t=$(this._spellCheckWindow.find(".e-sentence .e-sentencecontent").find("."+this.model.misspellWordCss)[0]).text().trim(),i={resultHTML:""};r=r===this._localizedLabels.NoSuggestionMessage?t:r;n.model.text===this._localizedLabels.AddToDictionary?(this._errorHTML=u,this._errorContent=this._spellCheckWindow.find(".e-sentence .e-sentencecontent")[0].innerText||this._spellCheckWindow.find(".e-sentence .e-sentencecontent")[0].textContent,this.addToDictionary(t)):n.model.text===this._localizedLabels.IgnoreOnceButtonText?(i=this.ignore(t,u,null),this._updateErrorWord(this,i,n,t,null,"ignore")):n.model.text===this._localizedLabels.IgnoreAllButtonText?(i=this.ignoreAll(t,u),this._updateErrorWord(this,i,n,t,null,"ignoreAll")):n.model.text===this._localizedLabels.ChangeButtonText?(i=this.change(t,u,r,null),this._updateErrorWord(this,i,n,t,r,"change")):n.model.text===this._localizedLabels.ChangeAllButtonText&&(i=this.changeAll(t,u,r),this._updateErrorWord(this,i,n,t,r,"changeAll"))},i.prototype._convertData=function(n,t){for(var r=[],i=0;i<n.length;i++)t==="dictionaryData"?r.push({field:n[i]}):t==="menuData"&&r.push({id:n[i],text:n[i]});return r},i.prototype._updateErrorWord=function(n,t,i,r,u,f){var l=this._spellCheckWindow.find(".e-suggesteditems"),e,a,o,v,h,s,c,y,p;if(n._spellCheckWindow.find(".e-sentence .e-sentencecontent")[0].innerHTML=t.resultHTML,e=this._spellCheckWindow.find(".e-sentence .e-sentencecontent").find(".errorspan"),e.length>0){if(f==="changeAll")for(o=0;o<e.length;o++)v=e[o].innerText||e[o].textContent,v===r&&$(e[o]).replaceWith(u);for(h=0;h<this.model.ignoreWords.length;h++)for(s=0;s<e.length;s++)c=e[s].innerText||e[s].textContent,c===this.model.ignoreWords[h]&&$(e[s]).replaceWith(c);this._listBoxDataUpdate(this)}else{if(y=[this._localizedLabels.NoSuggestionMessage],l.ejListBox({selectedItemIndex:null}),l.ejListBox({dataSource:this._convertData(y,"dictionaryData"),selectedItemIndex:0}),a=$("#"+this._id+"_Suggestions").data("ejListBox"),a.refresh(),p={targetText:t.resultHTML,requestType:"changeErrorWord"},this._trigger("complete",p))return!1;this._statusFlag=!1;this._alertWindowRender("validating")}},i.prototype._setModel=function(n){var t,i;for(t in n)if(n.hasOwnProperty(t))switch(t){case"locale":this.model.locale=n[t];this._localizedLabels=ej.getLocalizedConstants("ej.SpellCheck",this.model.locale);break;case"misspellWordCss":this.model.misspellWordCss=n[t];this.model.contextMenuSettings.enable&&(i=$(this.element[0]).find("span").attr("class").toString().split(" ")[1],$(this.element[0]).find("span").removeClass(i).addClass(this.model.misspellWordCss));break;case"contextMenuSettings":$.extend(this.model.contextMenuSettings,n[t]);this.model.contextMenuSettings.enable?this.validate():(ej.isNullOrUndefined(this._contextMenu)||this._contextMenu.parent().remove(),this._removeSpan(this));break;case"ignoreSettings":$.extend(this.model.ignoreSettings,n[t]);this.model.contextMenuSettings.enable&&this.validate();break;case"dictionarySettings":$.extend(this.model.dictionarySettings,n[t]);this.model.contextMenuSettings.enable&&this.validate();break;case"maxSuggestionCount":this.model.maxSuggestionCount=n[t];break;case"ignoreWords":this.model.ignoreWords=n[t];this.model.contextMenuSettings.enable&&this.validate()}},i.prototype._getModelValues=function(n,t){var i={ignoreAlphaNumericWords:n.model.ignoreSettings.ignoreAlphaNumericWords,ignoreEmailAddress:n.model.ignoreSettings.ignoreEmailAddress,ignoreHtmlTags:n.model.ignoreSettings.ignoreHtmlTags,ignoreMixedCaseWords:n.model.ignoreSettings.ignoreMixedCaseWords,ignoreUpperCase:n.model.ignoreSettings.ignoreUpperCase,ignoreUrl:n.model.ignoreSettings.ignoreUrl,ignoreFileNames:n.model.ignoreSettings.ignoreFileNames};return JSON.stringify({model:i,text:t})},i.prototype._getLocalizedLabels=function(){return ej.getLocalizedConstants(this.sfType,this.model.locale)},i}(ej.WidgetBase);ej.widget("ejSpellCheck","ej.SpellCheck",new t);ej.SpellCheck.Locale={}});
