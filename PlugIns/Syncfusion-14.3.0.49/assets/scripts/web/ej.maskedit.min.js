/*!
*  filename: ej.maskedit.min.js
*  version : 14.3.0.49
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min"],n):n()})(function(){(function(n,t,r){t.widget("ejMaskEdit","ej.MaskEdit",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{maskFormat:"",value:null,watermarkText:"",height:"",width:"",showError:!1,htmlAttributes:{},cssClass:"",customCharacter:null,inputMode:"text",readOnly:!1,textAlign:t.TextAlign.Left,hidePromptOnLeave:!1,showRoundedCorner:!1,enablePersistence:!1,enabled:!0,showPromptChar:!0,validationRules:null,validationMessage:null,keydown:null,keyup:null,keyPress:null,change:null,mouseover:null,mouseout:null,focusIn:null,focusOut:null,create:null,destroy:null},dataTypes:{maskFormat:"string",showError:"boolean",enabled:"boolean",customCharacter:"string",cssClass:"string",watermarkText:"string",showRoundedCorner:"boolean",showPromptChar:"boolean",inputMode:"enum",textAlign:"enum",hidePromptOnLeave:"boolean",readOnly:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},_setModel:function(n){for(var i in n)switch(i){case"value":t.isPlainObject(n[i])&&(n[i]=null);this._setValue(n[i]);n[i]=this.get_UnstrippedValue();this._raiseEvents("change",!0);break;case"width":this._setWidth(n[i]);break;case"height":this._setHeight(n[i]);break;case"watermarkText":this.model.watermarkText=n[i];this._changeWatermark(n[i]);break;case"showRoundedCorner":this._roundedCorner(n[i]);break;case"showPromptChar":this._setShowPrompt(n[i]);break;case"validationRules":this.model.validationRules!=null&&(this._hiddenInput.rules("remove"),this.model.validationMessage=null);this.model.validationRules=n[i];this.model.validationRules!=null&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=n[i];this.model.validationRules!=null&&this.model.validationMessage!=null&&(this._initValidator(),this._setValidation());break;case"textAlign":this._setTextAlign(n[i]);break;case"inputMode":this._setInputMode(n[i]);break;case"maskFormat":this.model.maskFormat=n[i];this._valueMapper();this._setMask(n[i]);n[i]=this.model.maskFormat;break;case"cssClass":this._setSkin(n[i]);break;case"readOnly":this._setReadOnly(n[i]);break;case"enabled":this.model.enabled=n[i];this._controlStatus(n[i]);break;case"htmlAttributes":this._addAttr(n[i]);break;case"hidePromptOnLeave":this.model.hidePromptOnLeave=n[i];this._textbox.value!=""&&(this.model.hidePromptOnLeave?(this._unStrippedMask=this._textbox.value,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=this._textbox.value.replace(/[ ]/g,"_"),this.model.value=this._textbox.value)}},observables:["value"],_destroy:function(){this.element.attr("name",this._hiddenInput.attr("name"));this._isWatermark&&this.element.removeAttr("placeholder");this.element.insertAfter(this.wrapper);this.wrapper.remove();this.model.textAlign&&this.element.css("text-align","");this.element.val("").removeClass(" e-mask e-input e-disable").empty()},_init:function(n){if(this._options=n,this._tempMask=this.model.maskFormat,this.element.is("input")&&(this.element.is("input[type=text]")||this.element.is("input[type=password]")||!this.element.attr("type")))this._isWatermark="placeholder"in document.createElement("input"),this._setValues(),this._valueMapper(),this._renderControl(),this._initObjects(),this._wireEvents(),this._addAttr(this.model.htmlAttributes),this.model.validationRules!=null&&(this._initValidator(),this._setValidation());else return this._destroy(),!1},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_addAttr:function(i){var r=this;n.map(i,function(n,i){var u=i.toLowerCase();u=="class"?r.wrapper.addClass(n):u=="disabled"&&n=="disabled"?r.disable():u=="readonly"&&n=="readOnly"?r._setReadOnly(!0):u=="style"||u=="id"?r.wrapper.attr(i,n):t.isValidAttr(r.element[0],i)?r.element.attr(i,n):r.wrapper.attr(i,n)})},_setValidation:function(){var r,i,u,f;this._hiddenInput.rules("add",this.model.validationRules);r=this.element.closest("form").data("validator");r=r?r:this.element.closest("form").validate();name=this._hiddenInput.attr("name");r.settings.messages[name]={};for(i in this.model.validationRules)if(u=null,!t.isNullOrUndefined(this.model.validationRules[i])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[i])){r.settings.messages[name][i]=n.validator.messages[i];for(f in this.model.validationMessage)i==f?u=this.model.validationMessage[i]:""}else u=this.model.validationRules.messages[i];r.settings.messages[name][i]=u!=null?u:n.validator.messages[i]}},_setShowPrompt:function(n){this.model.showPromptChar=n;this._textbox.value=this.model.showPromptChar?this._unStrippedMask:this.get_UnstrippedValue()},_controlStatus:function(n){n!=!0?this.disable():this.enable()},_setValues:function(){this._unStrippedMask=null;this._charMap={"9":"[0-9 ]",a:"[A-Za-z0-9 ]",A:"[A-Za-z0-9]",N:"[0-9]","#":"[0-9]","&":"[^]+","<":"",">":"",C:"[A-Za-z ]","?":"[A-Za-z]"}},_renderControl:function(){this.model.name=this.element.attr("name")!=null?this.element.attr("name"):this.model.name!=null?this.model.name:this.element[0].id;this.element.attr("name")!=null&&this.element.removeAttr("name");this.wrapper=t.buildTag("span.e-mask e-widget "+this.model.cssClass);this.innerWrapper=t.buildTag("span.e-in-wrap e-box");this.wrapper.append(this.innerWrapper).insertBefore(this.element);this.innerWrapper.append(this.element);this._hiddenInput=t.buildTag("input#"+this._id+"_hidden","",{},{type:"hidden"}).insertBefore(this.element);this._isWatermark||this.model.inputMode=="password"||(this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this.model.watermarkText),this._hiddenSpan.css("display","none"),this._hiddenSpan.bind("mousedown",n.proxy(this._OnFocusHandler,this)));t.isNullOrUndefined(this.model.value)&&this.element[0].value!=""&&(this.model.value=this.element[0].value);this._hiddenInput.attr({name:this.model.name,value:this.model.value});this.element.attr({"aria-invalid":!1,value:this.model.value}).addClass("e-input");t.isNullOrUndefined(this._options.inputMode)&&!t.isNullOrUndefined(this.element.attr("type"))?this.model.inputMode=this.element.attr("type"):this._setInputMode(this.model.inputMode);this._setWidth(this.model.width);this._setHeight(this.model.height);this._roundedCorner(this.model.showRoundedCorner);this._setTextAlign(this.model.textAlign);this._setReadOnly(this.model.readOnly);this._controlStatus(this.model.enabled);this.previousValue=this.model.value},_initObjects:function(){var t,n;if(this._textbox=this.element[0],this._keypressFlag=0,this._selectedTextKeyDown=0,this._keydownFlag=0,this.model.maskFormat.indexOf("\\")>=0){for(t=0,n=0;n<this.model.maskFormat.length;n++)this.model.maskFormat[n]=="\\"&&(t+=1);this._maskLength=this.model.maskFormat.length-t}else this._maskLength=this.model.maskFormat.length;this._maskModel=this.model.maskFormat.indexOf("\\")>=0?this.model.maskFormat:this.model.maskFormat.replace(/[9?CANa#&]/g,"_");(this._maskModel.indexOf("<")>=0||this._maskModel.indexOf(">")>=0)&&(this._maskModel=this._maskModel.replace(/[<>]/g,""),this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,""),this._valueMapper());this._validatedValue=this._maskModel;this.model.inputMode!="password"&&(this._setValue(this.model.value),this._setWaterMark());this.model.showError&&this.element.addClass("e-error").attr("aria-invalid","true")},_setWidth:function(n){this.wrapper.width(n)},_setHeight:function(n){this.wrapper.height(n)},_roundedCorner:function(n){n&&!this.innerWrapper.hasClass("e-corner")?this.innerWrapper.addClass("e-corner"):this.innerWrapper.hasClass("e-corner")&&this.innerWrapper.removeClass("e-corner")},_setTextAlign:function(n){n=="right"?this.wrapper.addClass("e-rtl"):this.wrapper.removeClass("e-rtl")},_setInputMode:function(n){this.element.attr("type",n)},_setReadOnly:function(n){this.model.readOnly=n;n?this.element.attr("readonly",!0):this.element.removeAttr("readonly")},_setSkin:function(n){this.wrapper.removeClass(this.model.cssClass);this.wrapper.addClass(n)},_setWaterMark:function(){var t=this.model.showPromptChar?this._maskModel:this._maskModel!=""&&this._maskModel!=null?this._maskModel.replace(/[_]/g," "):this._maskModel;this._maskModel=this.model.maskFormat.indexOf("\\")>=0?this.model.maskFormat===""?null:this.model.maskFormat:n.trim(this.model.maskFormat.replace(/[9?CANa#&]/g,"_"))===""?null:this.model.maskFormat.replace(/[9?CANa#&]/g,"_");(this._maskModel!=""&&this._textbox.value==t||t==""&&this._textbox.value==""&&this.model.inputMode!="password")&&(this._textbox.value="");this.model.watermarkText&&(this._isWatermark?this.element.attr("placeholder",this.model.watermarkText):this._hiddenSpan.css("display","block").text(this.model.watermarkText));this.model.watermarkText||this._textbox.value||!this.model.maskFormat||(this.model.hidePromptOnLeave?(this._unStrippedMask=this._maskModel,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=t)},_changeWatermark:function(t){if(!this.model.enabled)return!1;var i=this.model.showPromptChar?this._maskModel:this._maskModel!=""&&this._maskModel!=null?this._maskModel.replace(/[_]/g," "):this._maskModel;(this._textbox.value==i||this._textbox.value==""||n.trim(this.get_StrippedValue())=="")&&this.model.inputMode!="password"&&(this._textbox.value="");this._isWatermark?this.element.attr("placeholder",t):this._hiddenSpan.text(t);!this.model.watermarkText&&n.trim(this.get_StrippedValue())==""&&this.model.maskFormat&&(this.model.hidePromptOnLeave?(this._unStrippedMask=this._maskModel,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=i)},_showAlert:function(){var t=this;this.element.addClass("e-error").attr("aria-invalid","true").animate({Opacity:1},700,null,function(){n(t._textbox).removeClass("e-error").attr("aria-invalid","false")})},_unMask:function(){for(var u=this.model.value,f="",n=i=0,t,o="_",s,e;n<this._rules.length;){if(t=u[i],s=this._rules[n],t==r)break;if(t===s||t===o?(f+=t===o?o:"",i+=1,n+=1):this._rules[n].rule!=r&&t.match(this._rules[n].rule)?(e=u.charCodeAt(i),this._validateChars(e,n)?(f+=u.charAt(i),n++,i++):n++):typeof s!="string"?t.match(this._rules[n].rule)?(e=u.charCodeAt(i),this._validateChars(e,n)&&(f+=u.charAt(i),n++,i++)):i++:n++,i>u.length)break}return f},_validateValue:function(){var b,v,s,e,w,c,n,f,y;if(!t.isNullOrUndefined(this.model.value)){var h=this.model.value,u=this._maskModel,i=f=0,o,a="_",p,l=this._unMask();if(this._isWatermark||this.model.inputMode=="password"||this._hiddenSpan.css("display","none"),this._maskLength==0)return this._textbox.value=h,this._setWaterMark(),!0;for(b=this.model.value.toString(),h=this.model.maskFormat.indexOf("\\")>=0?this.model.value:this.model.value=b.replace(/[\(\)-]/g,"");i<this._rules.length;){if(o=l[f],p=this._rules[i],o==r)break;if(o===p||o===a?(o===a?a:"",s=u.substring(0,i),e=u.substring(i),u=s+o+e.substr(1,e.length),f+=1,i+=1):this._rules[i].rule!=r&&o.match(this._rules[i].rule)?(v=l.charCodeAt(f),this._validateChars(v,i)?(s=u.substring(0,i),e=u.substring(i),u=s+l.charAt(f)+e.substr(1,e.length),i++,f++):i++):typeof p!="string"?o.match(this._rules[i].rule)?(v=l.charCodeAt(f),this._validateChars(v,i)?(s=u.substring(0,i),e=u.substring(i),u=s+l.charAt(f)+e.substr(1,e.length),i++,f++):i++):(s=u.substring(0,i),e=u.substring(i),u=s+a+e.substr(1,e.length),f++,i++):i++,f>h.length)break}if(this.model.value)if(this._textbox.value=u,this.model.value=this.get_UnstrippedValue(),this.model.maskFormat.indexOf("\\")>=0||this.model.maskFormat.indexOf("&")>=0){for(this._textbox.value="",w=0,_pos=0;_pos<this.model.maskFormat.length;_pos++)this.model.maskFormat[_pos]=="\\"&&(w+=1);if(c=0,this.model.value.length==u.length-w)for(n=0;n<this.model.maskFormat.length;++n)this.model.maskFormat[n]=="\\"?c=c+1:this.model.maskFormat[n-1]=="\\"?this._textbox.value+=h[n-c]:this.model.maskFormat[n]=="\\"||(this._textbox.value+=h.length<=n-c?u[n].replace(/[9?CANa#&]/g,"_"):h[n-c].replace(/[9?CANa#&]/g,"_"));else for(this._textbox.value="",n=0;n<this.model.maskFormat.length;++n)this.model.maskFormat[n-1]=="\\"?this._textbox.value+=u[n]:this.model.maskFormat[n]=="\\"||(this._textbox.value+=u[n].replace(/[9?CANa#&]/g,"_"))}else this.model.hidePromptOnLeave?(this._unStrippedMask=u.replace(/[ ]/g,"_"),this._textbox.value=u):this._textbox.value=u;else if(this.model.maskFormat.indexOf("\\")>=0)for(n=0;n<this.model.maskFormat.length;++n)this.model.maskFormat[n-1]=="\\"?this._textbox.value+=this.model.maskFormat[n]:this.model.maskFormat[n]=="\\"||(this._textbox.value+=this.model.maskFormat[n].replace(/[9?CANa#&]/g,"_"));else this._textbox.value=this.model.maskFormat.replace(/[9?CANa#&]/g,"_");if(this._textbox.value!=r&&this.model.hidePromptOnLeave&&(this._unStrippedMask=this._textbox.value.replace(/[ ]/g,"_"),this._textbox.value=this.get_UnstrippedValue()),(this._textbox.value.indexOf(">")>=0||this._textbox.value.indexOf("<")>=0)&&(this._textbox.value=this._textbox.value.replace(/[<>]/g,""),this._tempMask=this.model.maskFormat,this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,"")),this.model.showPromptChar||(this._textbox.value=this.get_UnstrippedValue()),this._tempMask!=null)for(f=0;f<this._textbox.value.length;f++)y=this._updateCasing(this._textbox.value[f],f),t.isNullOrUndefined(y)||(this._textbox.value=this._textbox.value.substring(0,f)+y+this._textbox.value.substring(f+y.length));this._setWaterMark()}},_selectionText:function(n,t){var i=this._maskModel.substring(n,t);return(this._textbox.value=this._textbox.value.substring(0,n)+i+this._textbox.value.substring(t),this._keydownFlag==1)?(this._setCaretPosition(n),n):this._keydownFlag==2?(this._setCaretPosition(t),t):n},_caretPosition:function(n){var t=0,i,r;return document.selection?(i=document.selection.createRange(),r=i.text.length,i.moveStart("character",-n.value.length),t=i.text.length-r,r!=0&&(t=this._selectionText(t,i.text.length),this._selectedTextKeyDown=1)):(n.selectionStart||n.selectionStart=="0")&&(t=n.selectionStart,n.selectionStart!=n.selectionEnd&&(this._keydownFlag&&(t=this._selectionText(n.selectionStart,n.selectionEnd)),this._selectedTextKeyDown=1)),t},_setCaretPosition:function(n){var t=this._textbox,i;window.navigator.appName=="Microsoft Internet Explorer"?t.createTextRange&&(i=t.createTextRange(),i.move("character",n),i.select()):t.selectionStart||t.selectionStart=="0"?(t.focus(),t.setSelectionRange(n,n)):t.focus()},_validateChars:function(t,i){var o=this._charMap,u=!1,f,r,e;return this.model.maskFormat.indexOf("\\")>=0?(_position=this._getCunrrentPos(i),f=this.model.maskFormat.substr(i+_position,1)):f=this.model.maskFormat.substr(i,1),r=this.model.customCharacter,e=String.fromCharCode(t),n.each(o,function(n,t){f==n&&(r!=null&&(n=="C"?t="["+r+"]":(n=="A"||n=="N"||n=="#")&&(t=t.replace("]","")+r+"]")),u=e.match(new RegExp(t))?!0:!1)}),u},_seekNext:function(){for(var n=this._caretPosition(this._textbox),r=n,u=!0,t,i;u;){if(n>=0&&n<this._maskLength){for(t=0,i=0;i<=n;i++)this.model.maskFormat[i]=="\\"&&(t+=1);if(this.model.maskFormat.charAt(n)!="C"&&(this.model.maskFormat.indexOf("\\")>=0?this.model.maskFormat.charAt(n+t)!="\\"&&this.model.maskFormat.charAt(n+t-1)!="\\"&&(this._charMap[this.model.maskFormat.charAt(n+t)]||(this._setCaretPosition(n),n++)):this._charMap[this.model.maskFormat.charAt(n)]||(this._setCaretPosition(n),n++),n!=r)){r=n;continue}}u=!1}return n},_seekBefore:function(){var n=this._caretPosition(this._textbox),i=--n,t=!0;for(this._selectedTextKeyDown==1&&(t=!1);t;){if(n>=0&&n<this._maskLength&&(this.model.maskFormat.charAt(n)!="C"&&(this._charMap[this.model.maskFormat.charAt(n)]||this._setCaretPosition(--n)),n!=i)){i=n;continue}t=!1}return n},_writeBuffer:function(n,t){var u,o,f,i,s,e;if(t<=this._maskLength){if(u=this._textbox.value,this._tempMask!=null&&(o=this._updateCasing(n,t)),n=o==r?n:o,f=u.substring(0,t),i=u.substring(t),this.model.maskFormat.indexOf("\\")>=0){for(s=0,e=0;e<=t;e++)this.model.maskFormat[e].indexOf("\\")>=0&&t!=0&&(s+=1);this._textbox.value=this.model.maskFormat[t+s].indexOf("\\")>=0?f+u[t]+i.substr(1,i.length):f+n+i.substr(1,i.length)}else this._textbox.value=f+n+i.substr(1,i.length);this._setCaretPosition(t+1)}},_updateCasing:function(n,t){for(var r,i=0;i<t+1;i++)(this._tempMask.substr(i,1)=="<"||this._tempMask.substr(i,1)==">")&&t++;for(r=t;r>-1;r--){if(this._tempMask.substr(r,1)=="<")return n.toLowerCase();if(this._tempMask.substr(r,1)==">")return n.toUpperCase()}},get_StrippedValue:function(){var u,o=this.model.maskFormat,f=null,e,i,t,r;if(u=this._textbox.value==""&&this.model.inputMode!="password"?this._maskModel:this._textbox.value,o.length==0)return u;for(e=0,i=0;i<o.length;i++)f=n.trim(f),this.model.maskFormat.indexOf("\\")>=0?this.model.maskFormat[i]=="\\"?e+=1:this.model.maskFormat[i-1]=="\\"?f+=this._textbox.value[i-e]:(t=o[i],r=null,"9?$a*".indexOf(t)!=-1?r=this._charMap[t]:t=="A"||t=="N"||t=="#"?r=this._charMap[t].replace("]","")+this.model.customCharacter+"]":t=="C"?r="["+this.model.customCharacter+"]":t=="&"&&(f+=u[i-e]),r&&u[i-e]&&u[i-e].match(new RegExp(r))&&(f+=u[i-e])):(t=o[i],r=null,"9?$a*".indexOf(t)!=-1?r=this._charMap[t]:t=="A"||t=="N"||t=="#"?r=this._charMap[t].replace("]","")+this.model.customCharacter+"]":t=="C"?r="["+this.model.customCharacter+"]":t=="&"&&(f+=u[i-e]),r&&u[i]&&u[i].match(new RegExp(r))&&(f+=u[i]));return f},get_UnstrippedValue:function(){var t=this._textbox.value==""&&this.model.inputMode!="password"?this._maskModel:this._textbox.value,i=null;return this.model.maskFormat.length==0?t:(t!=r&&(i=n.trim(t.replace(/[_]/g," "))==""?null:t.replace(/[_]/g," ")),i)},_setValue:function(i){(t.isNullOrUndefined(i)||n.trim(i)=="")&&(i=null);this.model.value=i;this._isWatermark||this.model.inputMode=="password"||this._hiddenSpan.css("display","none");t.isNullOrUndefined(this.model.maskFormat)||this.model.maskFormat==""?(this._textbox.value=t.isNullOrUndefined(i)?"":i,this._unStrippedMask=this._textbox.value):(this._validateValue(),t.isNullOrUndefined(this.model.value)&&(this._textbox.value=t.isNullOrUndefined(i)?"":i,this._unStrippedMask=this._maskModel));this._setWaterMark()},_valueMapper:function(){for(var u=[],i=0,o=this.model.maskFormat||"",s=o.split(""),f=0,n,r="",e,h=this._charMap,t;f<o.length;f++)if(n=s[f],e=h[n],e)u[i]={rule:e},r+="_",i+=1;else for(n==="\\"&&(idx+=1,n=s[idx]),n=n.split(""),t=0;t<n.length;t++)u[i]=n[t],r+=n[t],i+=1;this._rules=u;this._emptyMask=r;this._maskLength=r.length},_setMask:function(i){this._maskLength=i.length;this.model.maskFormat=i;this._tempMask=this.model.maskFormat;this._maskModel=i.replace(/[9?CANa]/g,"_");(this._maskModel.indexOf("<")>=0||this._maskModel.indexOf(">")>=0)&&(this._maskModel=this._maskModel.replace(/[<>]/g,""),this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,""));t.isNullOrUndefined(this.model.maskFormat)||this.model.maskFormat==""?this.model.watermarkText||this._textbox.value==this._maskModel||(this.model.maskFormat?this.model.hidePromptOnLeave?(this._textbox.value=this._maskModel,this._unStrippedMask=this._textbox.value,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=this._maskModel:(unstripVal=this._unStrippedMask.replace(/[_]/g," "),this._textbox.value=n.trim(unstripVal.replace(/[\(\)-]/g,"")),this._unStrippedMask=this._textbox.value)):this._validateValue()},enable:function(){this.element.disabled=!1;this.element.removeAttr("disabled").removeClass("e-disable").attr({"aria-disabled":!1});this.model.enabled=!0},disable:function(){this.element.disabled=!0;this.element.attr("disabled","disabled").addClass("e-disable").attr({"aria-disabled":!0});this.model.enabled=!1},clear:function(){this._textbox.value=this.model.maskFormat.replace(/[9?aCAN]/g,"_")},_wireEvents:function(){this._on(this.element,"focus",this._OnFocusHandler);this._on(this.element,"blur",this._OnBlurHandler);this._on(this.element,"keydown",this._OnKeyDownHandler);this._on(this.element,"keypress",this._OnKeyPressHandler);this._on(this.element,"keyup",this._OnKeyUpHandler);this._on(this.element,"mouseover",this._OnMouseOverHandler);this._on(this.element,"mouseout",this._OnMouseOutHandler);this._on(this.element,"paste",this._OnPasteHandler);this._on(this.element,"cut",this._OnCutHandler)},_OnCutHandler:function(){var t=this._maskModel.substring(this._textbox.selectionStart,this._textbox.selectionEnd),i=this._textbox.value.substring(0,this._textbox.selectionStart),r=this._textbox.value.substring(this._textbox.selectionEnd),u=this._textbox.selectionStart,n=this;setTimeout(function(){n._textbox.value=i+t+r;n._setCaretPosition(u);n._raiseEvents("change")},0)},_OnPasteHandler:function(){var t=this;return setTimeout(function(){var i=n(t._textbox).val();t._setValue(i);t._raiseEvents("change")},0),!0},_OnFocusHandler:function(){this.wrapper.addClass("e-focus");var i=this.model.showPromptChar?this._maskModel:this._maskModel!=""&&this._maskModel!=null?this._maskModel.replace(/[_]/g," "):this._maskModel;this.model.readOnly||(this._isWatermark||this.model.inputMode=="password"||this._hiddenSpan.css("display","none"),this._textbox.value==""&&this._maskModel!=""&&this.model.inputMode!="password"&&(this._textbox.value=this.model.maskFormat.indexOf("\\")>=0?this.model.watermarkText:t.isNullOrUndefined(this._maskModel)?"":i),(this._textbox.value.indexOf("<")>=0||this._textbox.value.indexOf(">")>=0)&&(this._textbox.value=this._textbox.value.replace(/[<>]/g,""),this._maskModel=this._textbox.value,this._tempMask=this.model.maskFormat,this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,"")),this._textbox.value!=i&&this._unStrippedMask!=null&&this.model.hidePromptOnLeave&&(this._textbox.value=this._unStrippedMask),this.model.showPromptChar||(this._textbox.value=this.get_UnstrippedValue()),n.fn.selectRange=function(n,t){return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(n,t);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",n);i.select()}})},this.model.maskFormat&&n(this.element).selectRange(0,0),this._raiseEvents("focusIn"))},_OnBlurHandler:function(){var f,i,n,u;if(this.wrapper.removeClass("e-focus"),this.model.value=this.get_StrippedValue(),f=[],i=[],(this._textbox.value.indexOf("_")!=-1||this._textbox.value.indexOf(" ")!=-1)&&!t.isNullOrUndefined(this.model.value)){for(n=0;n<this.model.maskFormat.length;n++)this.model.maskFormat[n]=="A"||this.model.maskFormat[n]=="?"?f.push(n):(this.model.maskFormat[n]=="9"||this.model.maskFormat[n]=="a"||this.model.maskFormat[n]=="C")&&i.push(n);for(n=0;n<f.length;n++)this._textbox.value[f[n]]==="_"&&(this._showAlert(),this.model.value=this._textbox.value);for(n=0;n<i.length;n++)if(this.model.value[i[n]]=="_"||this.model.value[i[n]]==" ")for(this.model.value=this.model.value.substr(0,i[n])+this.model.value.substr(i[n]+1,this.model.value.length),u=n;u<i.length;u++)i[u]=i[u]-1}this.model.value=this.model.value!=null?this.model.value.replace(/\s+/g,""):this.model.value;this._textbox.value!=r&&(this.model.watermarkText==""||this.model.watermarkText!=""&&this.model.value!="")&&(this.model.hidePromptOnLeave?(this._unStrippedMask=this._textbox.value,this._textbox.value=this.get_UnstrippedValue()):this._unStrippedMask=this._textbox.value);this.model.inputMode!="password"&&this._setWaterMark();this._raiseEvents("change");this._raiseEvents("focusOut")},_OnKeyDownHandler:function(n){var r,e,i;if(!this.model.readOnly){if(this._keypressFlag=0,this._raiseEvents("onKeyDown",null,{keyCode:n.keyCode,altKey:n.altKey,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,originalArgs:n}),this.element.removeClass("error"),this._maskLength==0)return!0;var u=n.keyCode?n.keyCode:n.charCode,o=String.fromCharCode(u),i=this._seekNext(),f=this.model.showPromptChar?"_":" ",e=t.browserInfo().name;if(e=="msie"&&this._textbox.value==""){if(this.model.maskFormat.indexOf("\\")>=0)for(r=0;r<this.model.maskFormat.length;++r)this.model.maskFormat[r-1]=="\\"?this._textbox.value+=this.model.maskFormat[r]:this.model.maskFormat[r]=="\\"||(this._textbox.value+=this.model.maskFormat[r].replace(/[9?CANa#&]/g,"_"));else this._textbox.value=this.model.maskFormat.replace(/[9?CANa#&]/g,"_");this._setCaretPosition(i)}if(u>=35&&u<=41&&(window.navigator.appCodeName=="Mozilla"||window.navigator.appCodeName=="opera")&&(this._keypressFlag=1),n.shiftKey&&(n.keyCode==35||n.keyCode==36||n.keyCode==37||n.keyCode==39||n.keyCode==46||n.keyCode==127)||n.ctrlKey&&(n.keyCode==86||n.keyCode==65||n.keyCode==67||n.keyCode==88)){this._keypressFlag=1;return}return u==8?this.model.inputMode!="password"?(this._keydownFlag=1,i=this._seekBefore(),this._selectedTextKeyDown?!this.model.showPromptChar&&this._selectedTextKeyDown&&(this._textbox.value=this.get_UnstrippedValue(),this._setCaretPosition(i+1)):(i>=0&&i<this._maskLength&&this._writeBuffer(f,i),this._setCaretPosition(i)),this._keydownFlag=0,this._selectedTextKeyDown=0,n.preventDefault(),!1):(this._keypressFlag=1,!0):n.keyCode==46||n.keyCode==127?this.model.inputMode!="password"?(this._keydownFlag=2,i=this._seekNext(),this._selectedTextKeyDown?!this.model.showPromptChar&&this._selectedTextKeyDown&&(this._textbox.value=this.get_UnstrippedValue(),this._setCaretPosition(i)):i>=0&&i<this._maskLength&&(_position=this._getCunrrentPos(i),this.model.maskFormat[i+_position]=="&"||this._writeBuffer(f,i)),this._keydownFlag=0,this._selectedTextKeyDown=0,n.preventDefault(),!1):(this._keypressFlag=1,!0):void 0}},_ErrorHandler:function(n){var t=this.model.showPromptChar?"_":" ";this._textbox.value==""&&(this._textbox.value=this.model.maskFormat.replace(/[9?$CANa*]/g,t));this._setCaretPosition(n);this._showAlert()},_getCunrrentPos:function(n){for(var t=0,i=0;i<=n+t;i++)this.model.maskFormat[i]=="\\"&&(t+=1);return t},_OnKeyPressHandler:function(n){if(!this.model.readOnly){if(this._raiseEvents("keyPress",null,{keyCode:n.keyCode,altKey:n.altKey,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,originalArgs:n}),this._maskLength==0)return!0;var r=n.keyCode?n.keyCode:n.charCode,f=String.fromCharCode(r),e=this.model.showPromptChar?"_":" ",i=this._seekNext(),u=t.browserInfo().name;if(this._validateChars(r,i)?(u=="mozilla"||u=="opera")&&(n.keyCode==35||n.keyCode==36||n.keyCode==37||n.keyCode==39)||(u=="mozilla"||u=="opera")&&n.ctrlKey&&(r==97||r==99||r==118||r==120)||(this._textbox.value==""&&(this._textbox.value=this.model.maskFormat.replace(/[9?$CANa*]/g,e)),this.model.maskFormat.indexOf("\\")>=0?i<this._maskLength&&this._writeBuffer(f,i):this._writeBuffer(f,i)):(u=="mozilla"||u=="opera")&&(n.keyCode==35||n.keyCode==36||n.keyCode==37||n.keyCode==39)||(u=="mozilla"||u=="opera")&&n.ctrlKey&&(r==97||r==99||r==118||r==120)||(this.model.maskFormat.indexOf("&")>=0||this.model.maskFormat.indexOf("\\")>=0?(_position=this._getCunrrentPos(i),this.model.maskFormat[i+_position]=="&"&&r==127||(this.model.maskFormat.indexOf("\\")>=0?i<this._maskLength&&(this._validateChars(r,i+_position)||this.model.maskFormat[i+_position-1]=="\\"?this._writeBuffer(f,i):this._ErrorHandler(i)):this._validateChars(r,i+_position)?this._writeBuffer(f,i):this._ErrorHandler(i))):this._ErrorHandler(i)),!this._keypressFlag&&r!=9)return this._keypressFlag=0,n.preventDefault(),!1;this._keypressFlag=0}},_OnKeyUpHandler:function(n){this._maskLength==0&&this._raiseEvents("change");this._raiseEvents("keyUp",null,{keyCode:n.keyCode,altKey:n.altKey,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,originalArgs:n});t.isNullOrUndefined(this.model.validationRules)||this._hiddenInput.valid()},_OnMouseOverHandler:function(){this._raiseEvents("mouseOver")},_OnMouseOutHandler:function(){this._raiseEvents("mouseOut")},_raiseEvents:function(t,i,r){var u,e=this.get_StrippedValue(),f=this.get_UnstrippedValue();if(this.model.value=f!==null?n.trim(f.replace(/[\(\)-]/g,""))==""?null:f:null,t=="change")if(this.previousValue!=this.model.value)this.previousValue=this.model.value;else return!1;u={value:f,unmaskedValue:e};t=="change"&&(u.isInteraction=!i);t=="change"&&this._trigger("_change",u);r&&n.extend(!0,u,r);this._trigger(t,u);this._hiddenInput.val(e)},_OnValueChange:function(){this._textbox.value==""&&this._maskModel!=""&&(this._textbox.value=this._maskModel);this._setValue(this._textbox.value)}});t.InputMode={Password:"password",Text:"text"}})(jQuery,Syncfusion)});
