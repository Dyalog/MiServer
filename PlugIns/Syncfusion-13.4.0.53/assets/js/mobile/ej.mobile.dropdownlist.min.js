/*!
*  filename: ej.mobile.dropdownlist.min.js
*  version : 13.4.0.53
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./ej.mobile.core.min","./ej.mobile.application.min","./../common/ej.unobtrusive.min","./../common/ej.touch.min","./ej.mobile.listview.min","./ej.mobile.menu.min","./ej.mobile.dialog.min","./ej.mobile.checkbox.min","./ej.mobile.button.min","./ej.mobile.toolbar.min","./ej.mobile.scrollpanel.min"],n):n()})(function(){(function($,ej){ej.widget("ejmDropDownList","ej.mobile.DropDownList",{_rootCSS:"e-m-dropdownlist",defaults:{renderMode:"auto",theme:"auto",cssClass:"",readOnly:!1,targetID:null,selectedItemIndex:-1,dataSource:null,fields:{text:"text",groupBy:"groupBy",imageClass:"imageClass",imageUrl:"imageUrl",checkBy:"checked",enableTemplate:"enableTemplate",templateID:"templateID",value:"value"},query:null,allowVirtualScrolling:!1,virtualScrollMode:"continuous",itemRequestCount:10,enabled:!0,enableMultiSelect:!1,delimiterChar:",",enableGrouping:!1,waterMarkText:null,mode:"normal",enableTemplate:!1,enablePersistence:!1,windows:{type:"list"},android:{popUpHeight:null},focusIn:null,focusOut:null,select:null,change:null,checkChange:null,items:[]},dataTypes:{dataSource:"data",renderMode:"enum",theme:"enum",enableMultiSelect:"boolean",mode:"enum",virtualScrollMode:"enum",windows:{type:"enum"}},_init:function(){this._createDelegates();this._orgEle=this.element.clone();this.model.targetID&&(this._targetEle=$("#"+this.model.targetID).clone(),$("#"+this.model.targetID).css("display","none"));this._renderControl();this.model.readOnly||this._wireEvents()},_renderControl:function(){ej.setRenderMode(this);ej.setTheme(this);ej.isNullOrUndefined(this.model.waterMarkText)?this.model.selectedItemIndex<0&&(this.model.selectedItemIndex=0):this.model.selectedItemIndex=-1;this._dropdownInitialize();this._controlStatus(this.model.enabled)},_dropdownInitialize:function(){this._id=this.element.attr("id");this._winrt=this.model.renderMode=="windows"&&!ej.isLowerResolution()&&this.model.mode=="native";this._width=0;this.model.dataSource=eval(this.model.dataSource);this.element.is("select")&&(this.selectelement=!0);this._closestAppview=this.element.closest(".appview");this._ddwrapper=ej.buildTag("div.e-m-ddwrapper "+this.model.cssClass+" e-m-"+this.model.renderMode+" e-m-"+this.model.theme+" e-m-user-select#"+this._id+"_wrapper");this.element.addClass("e-m-user-select e-m-"+this.model.renderMode+" e-m-"+this.model.theme).attr({name:this._id,readonly:!0}).wrap(this._ddwrapper);this._ddwrapper=this.element.parent();this._winrt?this._renderNative():this._renderList()},_renderNative:function(){var t,i,n,r;if(!this.selectelement){if(this._select=ej.buildTag("select.e-m-dropdownlist#"+this._id+"_select"),this.model.dataSource!=null||this.model.query!=null)if(this.model.enableGrouping)for(t=ej.DataManager(this.model.dataSource).executeLocal(ej.Query().from(this.model.dataSource).group(this.model.fields.groupBy)),n=0;n<t.length;n++)this._optgrpObject(this._optionsObject(t[n]),t[n].key);else this._select=this._optionsObject(this.model.dataSource);else{for(i=$("#"+this.model.targetID).find("ul"),n=0;n<i.length;n++)r=this._optionsObject(i[n]),this.model.enableGrouping?this._optgrpObject(r,$(i[n]).attr("data-ej-grouplisttitle")):this._select=r;$("#"+this.model.targetID).remove()}this._select.insertAfter(this.element);this.element.css("display","none");this.element=this._select}$(this.element.find("option")[this.model.selectedItemIndex]).attr({selected:!0});this.model.enableMultiSelect&&$(this.element).attr({multiple:!0}).addClass("e-m-multiselect");this._select.attr("name",this._id+"_select")},_optionsObject:function(n){for(var r,i=ej.buildTag("select.e-m-dropdownlist#"+this._id),u=this.model.dataSource!=null||this.model.query!=null?this.model.enableGrouping?n.count:n.length:$(n).find("li").length,t=0;t<u;t++)r=ej.buildTag("option",this.model.dataSource!=null||this.model.query!=null?this.model.enableGrouping?n.items[t][this.model.fields.text]:n[t][this.model.fields.text]:$($(n).find("li")[t]).attr("data-ej-text")),i.append(r);return i},_optgrpObject:function(n,t){var i=ej.buildTag("optgroup#"+this._id+"group").attr("label",t);i.append(n.find("option"));this._select.append(i)},_renderList:function(){ej.support.stableSort=!1;var proxy=this;this._listObject={adjustFixedPosition:!1,persistSelection:this.model.renderMode=="ios7"||this.model.renderMode=="windows"||this.model.enableMultiSelect?!1:!0,renderMode:this.model.renderMode,theme:this.model.theme,showHeader:!1,allowScrolling:this.model.renderMode!="ios7"?!0:!1,mode:"page",height:this.model.renderMode=="android"&&this.model.android.popUpHeight?this.model.android.popUpHeight:null,selectedItemIndex:this.model.selectedItemIndex,touchEnd:$.proxy(this._touchEnd,this),showScrollbars:!1,enableGroupList:this.model.enableGrouping,enableCheckMark:this.model.enableMultiSelect};this._ddList=this.selectelement||this.model.dataSource!=null||this.model.query!=null?ej.buildTag("div#"+this._id+"list.e-m-dd-list").appendTo(this._ddwrapper):$("#"+this.model.targetID).addClass("e-m-dd-list").attr("id",this._id+"list").appendTo(this._ddwrapper);this.model.enableTemplate&&this._shipItemsText();this.selectelement&&this._renderSelectToDropdown();this.model.enableMultiSelect&&(!(this.model.dataSource!=null)||this.model.query!=null)&&this.model.selectedItemIndex>=0&&this._ddList.addClass("e-m-multiselect").find("li:eq("+this.model.selectedItemIndex+")").attr("data-ej-checked",!0);this.model.dataSource!=null||this.model.query!=null?this.model.query!=null?this.model.allowVirtualScrolling?this.model.dataSource.executeQuery(eval(this.model.query)).done(function(e){var tempquery;proxy._allItems=e.result;proxy.model.virtualScrollMode=="continuous"?(tempquery=proxy.model.query+".range(0,"+proxy.model.itemRequestCount+")",proxy._queryPromise(tempquery,proxy)):proxy.model.virtualScrollMode=="normal"&&(proxy._listObject.dataSource=proxy._allItems,proxy._postListRendering(proxy),proxy._itemsCount=proxy.model.renderMode=="ios7"?ej.isLowerResolution()?5:proxy._allItems.length<=8?proxy._allItems.length:8:proxy.model.renderMode!="windows"?5:Math.round(proxy._winheight/proxy._liHeight),tempquery=proxy.model.query+".range(0,"+proxy._itemsCount+")",proxy.model.dataSource.executeQuery(eval(tempquery)).done(function(n){for(var t=0;t<proxy._itemsCount;t++)proxy._ddList.find("li .e-m-list-text:eq("+t+")").text(n.result[t][proxy.model.fields.text]);proxy._updateSelected()}))}):this._queryPromise(this.model.query,proxy):(this._setData(),this._postListRendering()):this._postListRendering()},_queryPromise:function(query,proxy){App.waitingPopUp.show();this.model.dataSource.executeQuery(eval(query)).done(function(n){proxy._items=n.result;proxy._setData(!0);proxy._postListRendering()})},_shipItemsText:function(){this._text=[];var n=this;$.each(this._ddList.find("li"),function(t){n._text[t]=$(this).attr("data-ej-text");$(this).attr("data-ej-enabletemplate")&&$(this).attr("data-ej-rendertemplate",!0)})},_renderSelectToDropdown:function(){if(this._inputElement=ej.buildTag("input.e-m-dropdownlist e-m-user-select e-m-"+this.model.renderMode+" e-m-"+this.model.theme+"#"+this._id).attr({name:this._id,readonly:!0}),this._inputElement.insertAfter(this.element),this.model.enableGrouping)this._renderGroupItems();else if(!this.model.dataSource!=null||this.model.query==null)var n=this._renderItems(this.element).appendTo(this._ddList);this.element.css("display","none");this.element=this._inputElement},_renderItems:function(n){var r=$(n).find("option"),t=ej.buildTag("ul"),i=this;return $.each(r,function(n){t.append(i._itemsObject(this));$(this).attr("data-ej-selected")&&(i.model.selectedItemIndex=n)}),t},_itemsObject:function(n){var t=ej.buildTag("li",n.innerHTML,{},{"data-ej-text":n.value});return $.each(n.attributes,function(){this.name!="value"&&t.attr(this.name,this.value)}),t},_renderGroupItems:function(){var t=this.element.find(">optgroup"),n=this;$.each(t,function(){var t=n._renderItems(this).attr("data-ej-grouplisttitle",this.label).appendTo(n._ddList)})},_setData:function(n){this._listObject.dataSource=n?this._items:this.model.dataSource;this._listObject.fieldSettings=this.model.fields;this._listObject.fieldSettings.renderTemplate=this.model.fields.enableTemplate;this.model.selectedItemIndex>=0&&(this._listObject.dataSource[this.model.selectedItemIndex].checked=!0)},_postListRendering:function(){this._ddList.ejmListView(this._listObject);this._listins=this._ddList.ejmListView("instance");this._updateSelected();this._liHeight=this.model.renderMode=="android"?ej.getDimension(this._ddList.find("li:eq(0)"),"height")+1:ej.getDimension(this._ddList.find("li:eq(0)"),"height");this._value=this.element.val();this._checkedItems=[];this._uncheckedItems=[];this["_"+this.model.renderMode+"Rendering"]();this.model.renderMode!="android"&&this.model.renderMode!="flat"||this.model.enableMultiSelect||this._ddList.hide();this._scroller=this.model.renderMode=="ios7"?this._iosScroll:$("#"+this._id+"list_scroll");this._previndex=0;this.model.renderMode!="ios7"&&this._scroller.ejmScrollPanel({enableMouseWheel:!1,enableNativeScrolling:!1,enableTransition:!1,enableTransform:!1,showScrollbars:!1,scrollEnd:$.proxy(this._onScroll,this)});App.waitingPopUp.hide()},_updateSelected:function(){this.model.selectedItemIndex>=0&&(this._mobileValue=this._selectedItem=this._ddList.find("li:eq("+this.model.selectedItemIndex+")"));ej.isNullOrUndefined(this.model.waterMarkText)?this.element.val(this.model.enableTemplate?this._text[this.model.selectedItemIndex]:this._selectedItem.text()):this.element.attr("placeholder",this.model.waterMarkText)},_onScroll:function(n){this.model.allowVirtualScrolling&&(this.model.virtualScrollMode=="continuous"?n.object._maxScrollY==n.y&&this._getData():this.model.virtualScrollMode=="normal"&&this._getData())},_getData:function(){var proxy=this,loading=ej.buildTag("div#ddloadicon.e-m-loading"),content=this.model.renderMode=="ios7"?this._menu:this.model.renderMode=="windows"?this._ddouter:$("#"+this._id+"dialogcontent"),index=this.model.virtualScrollMode=="continuous"?this._ddList.find("li").length:-Math.round((this.model.renderMode=="ios7"&&ej.isLowerResolution()?args.y+this._liHeight*2:args.y)/this._liHeight),tempquery;index!=this._previndex&&(this._previndex=index,tempquery=this.model.virtualScrollMode=="continuous"?this.model.query+".range("+index+","+(index+this.model.itemRequestCount)+")":this.model.query+".range("+index+","+(index+proxy._itemsCount)+")",content.append(loading),this.model.dataSource.executeQuery(eval(tempquery)).done(function(n){proxy._postExection(proxy,index,n);$("#ddloadicon").remove()}))},_postExection:function(n,t,i){if(n.model.virtualScrollMode=="continuous")n._items=n._items.concat(i.result),n._listins.append(i.result),n.model.renderMode=="ios7"&&n._scroller.ejmScrollPanel("refresh");else for(var r=t,u=0;r<t+n._itemsCount;r++,u++)n._ddList.find("li .e-m-list-text:eq("+r+")").text(i.result[u][n.model.fields.text])},_ios7Rendering:function(){var i,r,n;this._ddicon=ej.buildTag("div.e-m-icon-down").appendTo(this._ddwrapper);this._menu=ej.buildTag("div#"+this._id+"menu.e-m-dd-menu");var t=ej.buildTag("div#"+this._id+"_iostarget.e-m-dd-scrollpanel"),u=ej.buildTag("div.e-m-target-inner").appendTo(t).append(this._ddList),f=ej.buildTag("div.e-m-center-first").css({height:this._liHeight*2}),e=ej.buildTag("div.e-m-center-last").css({height:this._liHeight*2});ej.isLowerResolution()&&!this.model.enableGrouping&&u.prepend(f).append(e);this._menu.append(t);i=this.model.enableTemplate?ej.getDimension(this._ddList,"height")<400?ej.getDimension(this._ddList,"height"):400:this._liHeight*(this._ddList.find("li").length<=8?this._ddList.find("li").length:8);this._menu.ejmMenu({renderTemplate:!0,allowScrolling:!1,target:this.model.readOnly?null:$(this._ddwrapper),renderMode:this.model.renderMode,theme:this.model.theme,ios7:{showTitle:!1,showCancelButton:!1},height:ej.isLowerResolution()?this._liHeight*5+42:i,show:$.proxy(this._showDropDown,this),hide:$.proxy(this._blurHandlr,this)});this._menu.appendTo(this._closestAppview);$("#"+this._id+"menu_overlay").appendTo(this._closestAppview);ej.isLowerResolution()&&(r=ej.buildTag("div.e-m-dd-btnwrapper","<button id='"+this._id+"-ios7-done' class='done-btn'>Done<\/button>").prependTo(this._menu),$("#"+this._id+"-ios7-done").ejmButton({ios7:{style:"dialog"},touchEnd:$.proxy(this._iosDone,this)}),n=ej.getDimension(r,"height")+2);this._iosScroll=ej.buildTag("div.e-m-dd-iosscroll");t.append(this._iosScroll);this._iosScroll.ejmScrollPanel({enableMouseWheel:!1,enableNativeScrolling:!1,enableTransition:!1,enableTransform:!1,showScrollbars:!1,target:t[0].id,targetHeight:ej.isLowerResolution()?this._liHeight*5:i,renderMode:this.model.renderMode,theme:this.model.theme,scrollEnd:ej.isLowerResolution()&&!this.model.enableGrouping?$.proxy(this._onScrollStop,this):$.proxy(this._onScroll,this),enableDisplacement:this.model.enableGrouping?!1:!0,displacementValue:this._liHeight,displacementTime:350,adjustFixedPosition:!1});var o=ej.buildTag("div.e-m-ios7-active").css({height:this._liHeight,top:this._liHeight*2+n}),s=ej.buildTag("div.e-m-top-first").css({height:this._liHeight,top:this._liHeight+n}),h=ej.buildTag("div.e-m-top-last").css({height:this._liHeight,top:n}),c=ej.buildTag("div.e-m-bottom-first").css({height:this._liHeight,top:this._liHeight*3+n}),l=ej.buildTag("div.e-m-bottom-last").css({height:this._liHeight,top:this._liHeight*4+n});this.model.enableGrouping||this.model.enableTemplate||!ej.isLowerResolution()||ej.browserInfo().name=="msie"&&ej.browserInfo().version=="10.0"||this._menu.append(o).append(s).append(h).append(c).append(l);ej.isNullOrUndefined(this.model.waterMarkText)&&this._activeItem();this.model.enableMultiSelect&&this.model.selectedItemIndex>=0&&this._ddList.find("li:eq("+this.model.selectedItemIndex+")").find(".e-m-lv-checkdiv>.e-m-rootel").hide()},_onScrollStop:function(n){var t=-Math.round(this._iosScroll.ejmScrollPanel("getScrollPosition").y/this._liHeight);this._mobileScroll=t;this._activeItem();this._onScroll(n)},_iosDone:function(){this.model.enableGrouping||(this.model.selectedItemIndex=this._mobileScroll,this.model.selectedItemIndex>=0&&(this._selectedItem=this._ddList.find("li:eq("+this.model.selectedItemIndex+")")));this.model.enableMultiSelect||this.element.val(this.model.enableTemplate?this._text[this.model.selectedItemIndex]:this._selectedItem.text());this._menu.ejmMenu("hide");this._mobileValue=this._selectedItem;this.model.change&&!this.model.enableMultiSelect&&this._trigger("change",{selectedItem:this._selectedItem,selectedText:this._selectedItem.text()})},_activeItem:function(){$(this._ddList).find("li").removeClass("e-m-active");ej.isNullOrUndefined(this._selectedItem)||this._selectedItem.addClass("e-m-active")},_ddDialogRendering:function(){if(this.model.enableMultiSelect&&(this._dialog=ej.buildTag("div.e-m-dd-dialog#"+this._id+"dialog"),this._dialog.ejmDialog({enableModal:!0,allowScrolling:!1,renderMode:this.model.renderMode,theme:this.model.theme,showButtons:this.model.enableMultiSelect?!0:!1,leftButtonCaption:"Cancel",rightButtonCaption:"OK",mode:"confirm",buttonTap:$.proxy(this._andBtnClick,this)}),this._dialog.find("#"+this._id+"dialogcontent").append(this._ddList),this._dialog.appendTo(this._closestAppview).find(".e-m-dlg-title").remove(),$("#"+this._id+"dialog_dialog_overlay").appendTo(this._closestAppview)),!this.model.android.popUpHeight&&this.model.renderMode=="android"||this.model.renderMode=="flat"){var n=this._ddList.find("li").length;n>=5?this._ddList.height(this._liHeight*5):this._ddList.height(this._liHeight*n);$("#"+this._id+"list_scroll").ejmScrollPanel({targetHeight:this._liHeight*(n>=5?5:n)})}},_androidRendering:function(){this._ddspan=ej.buildTag("span.e-m-dd-span").appendTo(this._ddwrapper);this._ddDialogRendering()},_andBtnClick:function(n){var t={itemname:n.text};this._toolbarClick(t)},_windowsRendering:function(){this.model.windows.type=="list"?(this._ddouter=ej.buildTag("div.e-m-dd-winouter e-m-"+this.model.renderMode+" e-m-"+this.model.theme,"<div class='e-m-dd-header'><\/div>").append(this._ddList).appendTo(this._closestAppview),this._ddouter.find(".e-m-dd-header").html(this.model.enableMultiSelect?"CHOOSE ITEMS":"CHOOSE AN ITEM"),this._winrt||(this._ddouter.css("top",-(this._closestAppview.innerHeight()+ej.getDimension(this._ddouter.find(".e-m-dd-header"),"outerHeight"))).addClass("viewport-flip"),this._ddouter.find(".e-m-dd-header").addClass("flipY"),this._ddList.addClass("flipY"),this.model.enableMultiSelect&&(this._toolbar=ej.buildTag("div#"+this._id+"_toolbar.e-m-dd-tb","<ul><li data-ej-iconname='OK'><\/li><li data-ej-iconname='Cancel'><\/li><\/ul>"),this._toolbar.ejmToolbar({renderMode:this.model.renderMode,theme:this.model.theme,touchEnd:$.proxy(this._toolbarClick,this)}),this._toolbar.css({bottom:-ej.getDimension(this._toolbar,"outerHeight")}).appendTo(this._closestAppview))),this._winheight=this._closestAppview.innerHeight()-(ej.getDimension(this._ddouter.find(".e-m-dd-header"),"outerHeight")+(this._toolbar?ej.getDimension(this._toolbar,"height"):0)),this._ddList.height(this._winheight),$("#"+this._id+"list_scroll").ejmScrollPanel({targetHeight:this._winheight})):(this.element.css("display","none"),this._ddList.find("li").addClass("e-m-normal"),this._ddList.find(".e-m-grouptitle").addClass("e-m-normal"),this._selectedItem.removeClass("e-m-normal").addClass("e-m-active"),this._ddList.addClass("e-m-combobox e-m-collapse"))},_toolbarClick:function(n){var t;if(n.itemname=="OK")this.element.val(this._value),this._checkedItems=[],this._uncheckedItems=[],this.model.change&&this._trigger("change",{value:this._value,selectedItem:this._selectedItem,selectedText:this._selectedItem.text()});else if(n.itemname=="Cancel"){for(t=0;t<this._checkedItems.length;t++)this._cancelClick(this._checkedItems,t);for(t=0;t<this._uncheckedItems.length;t++)this._cancelClick(this._uncheckedItems,t)}n.itemname!="overflow"&&(this._hideDropDown(),this._blurHandlr());this._value.length||(this.model.selectedItemIndex=-1)},_cancelClick:function(n,t){this._ddList.ejmListView(n[t].checked?"unCheckItem":"checkItem",n[t].index);this._checkflag=!n[t].checked;this._tempword=n[t].text;this._setMultiValueText()},_flatRendering:function(){this._ddDialogRendering()},_createDelegates:function(){this._focusHndlr=$.proxy(this._showDropDown,this);this._docClickHndlr=$.proxy(this._docClick,this)},_wireEvents:function(n){this.model.mode!="normal"||this._winrt||ej.listenEvents([$(this._ddwrapper)],["focus"],[this._focusHndlr],n);this.model.renderMode=="ios7"&&ej.listenTouchEvent($(this._ddicon),ej.tapEvent(),this._focusHndlr,n);this.model.renderMode!="android"||this.model.enableMultiSelect||ej.listenTouchEvent($(document),ej.tapEvent(),this._docClickHndlr,n)},resize:function(n){(this.model.renderMode=="ios7"||this.model.renderMode=="windows")&&n.resolutionChanged&&this._refresh()},_docClick:function(n){n.target.id==this.element[0].id||$(n.target).closest("li").hasClass("e-m-list")||this._ddList.hide()},_showDropDown:function(){this.element.blur();this.model.focusIn&&this._trigger("focusIn");this.element[0].scrollLeft=this.element[0].scrollWidth;this.model.renderMode=="android"&&this._ddwrapper.offset().top+this._ddwrapper.height()+this._ddList.height()>window.innerHeight&&this._ddList.css("bottom",this._ddwrapper.height());this._ddList.show();this.model.renderMode=="windows"&&this.model.windows.type=="list"?this._showHideWin():this.model.renderMode=="android"||this.model.renderMode=="flat"?this._showHideAndFlat():this.model.renderMode=="windows"&&this.model.windows.type=="combobox"&&this._ddList.find("li").removeClass("e-m-normal");this.model.enableGrouping||this._scroller.ejmScrollPanel("scrollTo",0,-this._liHeight*this.model.selectedItemIndex,0);this._scroller.ejmScrollPanel("refresh")},_hideDropDown:function(){this.model.renderMode=="windows"&&this.model.windows.type=="list"?this._showHideWin(!0):(this.model.renderMode=="android"||this.model.renderMode=="flat")&&this._showHideAndFlat(!0)},_blurHandlr:function(){this.element[0].scrollLeft=0;this.model.focusOut&&this._trigger("focusOut")},_showHideAndFlat:function(n){this.model.enableMultiSelect?this._dialog.ejmDialog(n?"close":"open"):n?(this._ddList.hide(),this._ddList.css("bottom","")):this._ddList.show()},_showHideWin:function(n){var t=this,i=n?"out":"in",r=n?"hidden":"visible";this._ddwrapper.css({"z-index":n?0:-1});this._ddouter.css({top:n?-this._closestAppview.innerHeight():0,"visibility ":r});this._ddouter.find(".e-m-dd-header").css({visibility:r}).removeClass("in out").addClass(i);this._ddList.removeClass("in out").addClass(i);this.model.enableMultiSelect&&(n||this._toolbar.css({bottom:0}),setTimeout(function(){n&&t._toolbar.css({bottom:-ej.getDimension(t._toolbar,"height")})},100))},_touchEnd:function(n){(!ej.isNullOrUndefined(this._selectedItem)&&this._selectedItem.text()!=n.text||ej.isNullOrUndefined(this._selectedItem))&&(this._selectedItem=n.item);this.model.selectedItemIndex=n.index;this.model.enableTemplate&&($(n.item[0]).attr("data-checked")=="true"?$(n.item[0]).attr("data-checked",!1):$(n.item[0]).attr("data-checked",!0),this.model.selectedItemIndex=$(n.item).prevAll("li").length+$(n.item).parents(".e-m-groupdiv").prevAll(".e-m-groupdiv").find("li").length);this._checkflag=this.model.enableTemplate?$(n.item[0]).attr("data-checked")=="true":n.isChecked;var t=this.model.enableTemplate?this._text[this.model.selectedItemIndex]:n.text;this.model.enableMultiSelect?(this._tempword=t,this._setMultiValueText(),this.model.checkChange&&this._trigger("checkChange",{checked:this._checkflag})):(this.model.renderMode=="ios7"&&ej.isLowerResolution()||this.element.val(t),this.model.renderMode!="ios7"&&(this._hideDropDown(),this._blurHandlr()));this.model.renderMode=="ios7"&&this._iosTouchEnd(n);this.model.select&&this._trigger("select",{value:this._value,selectedItem:n.item,selectedText:t});this.model.change&&((this.model.renderMode!="ios7"||ej.isLowerResolution()&&!this.model.enableMultiSelect)&&(this.model.renderMode=="ios7"||this.model.enableMultiSelect)||this._trigger("change",{value:this._value,selectedItem:n.item,selectedText:t}));this._checkedCollection(n);this.model.renderMode=="windows"&&this.model.windows.type=="combobox"&&this._windowsTouchEnd(n);n.item&&(this._width=this._width+n.item.find(".e-m-list-text.e-m-text").width());this.element[0].scrollLeft=this.element[0].scrollWidth},_setMultiValueText:function(){for(var t=this._value.split(","),n=0;n<t.length;n++)t[n].trim()==this._tempword&&(this._checkflag||(this._value=this._value.replace(n==0?t.length>1?this._tempword+this.model.delimiterChar+" ":this._tempword:this.model.delimiterChar+" "+this._tempword,""),this.model.renderMode=="ios7"&&this.element.val(this._value)));this._checkflag&&(this._value=this._value+this._value.length<3?this._tempword:this._value.substring(0,this._value.length)+this.model.delimiterChar+" "+this._tempword,this.model.renderMode=="ios7"&&this.element.val(this._value));this._value.length||(this.model.selectedItemIndex=-1)},_iosTouchEnd:function(n){!ej.isLowerResolution()||this.model.enableGrouping||this._selectFlag||this._iosScroll.ejmScrollPanel("scrollTo",0,-this._liHeight*this.model.selectedItemIndex,350);ej.isLowerResolution()||this.model.enableMultiSelect||this._menu.ejmMenu("hide");this.model.enableMultiSelect?n.isChecked?$(n.item[0]).addClass("e-m-active"):$(n.item[0]).removeClass("e-m-active"):this._activeItem()},_windowsTouchEnd:function(n){this._ddList.hasClass("e-m-expand")?(this._ddList.removeClass("e-m-expand").addClass("e-m-collapse").find("li").removeClass("e-m-active").addClass("e-m-normal"),this._ddList.find(".e-m-grouptitle").addClass("e-m-normal"),$(n.item[0]).removeClass("e-m-normal").addClass("e-m-active"),this._ddList.height(this._liHeight)):(this._ddList.removeClass("e-m-collapse").addClass("e-m-expand").find("li").removeClass("e-m-normal"),this._ddList.find(".e-m-grouptitle").removeClass("e-m-normal"),this._ddList.height(this._liHeight*this._ddList.find("li").length+(this.model.enableGrouping?(ej.getDimension(this._ddList.find(".e-m-grouptitle"),"height")+5)*this._ddList.find(".e-m-grouptitle").length:0)))},_refreshList:function(){var proxy=this;App.waitingPopUp.show();this.model.dataSource.executeQuery(eval(this.model.query)).done(function(n){proxy._items=n.result;proxy._listObject.dataSource=proxy._items;proxy._listObject.dataSource[proxy.model.selectedItemIndex].checkBy="checked";proxy._ddList.ejmListView(proxy._listObject);proxy.element.val(proxy._selectedItem.text());proxy._value=proxy.element.val();App.waitingPopUp.hide();(proxy.model.renderMode=="android"||proxy.model.renderMode=="flat")&&proxy._ddList.addClass("e-m-dd-list").height(proxy._liHeight*5);proxy._scroller=$("#"+this._id+"list_scroll")})},_checkedCollection:function(n){var t={},i=n.isChecked?"checkedItems":"uncheckedItems";t.checked=n.isChecked;t.text=n.text;t.index=n.index;this["_"+i].push(t)},_setModel:function(n){var i;for(var t in n)t=="renderMode"||t=="dataSource"?i=!0:(setprop="_set"+t.charAt(0).toUpperCase()+t.slice(1),this[setprop]&&this[setprop](n[t]));i&&this._refresh()},_setWaterMarkText:function(n){this.element.attr("placeholder",n)},_setSelectedItemIndex:function(n){this._selectUnselectItem(n)},_selectUnselectItem:function(n,t){if(this.model.selectedItemIndex=n,this.model.enableMultiSelect&&(t?this._listins.unCheckItem(n):this._listins.checkItem(n)),this._winrt)$(this.element.find("option")[this.model.selectedItemIndex]).attr({selected:t?!1:!0});else{this.model.selectedItemIndex>=0&&(this._selectedItem=this._ddList.find("li:eq("+this.model.selectedItemIndex+")"));var i={};i.item=this._selectedItem;i.text=this.model.enableTemplate?this._text[this.model.selectedItemIndex]:this._selectedItem.text();i.index=n;i.isChecked=t?!1:!0;this._selectFlag=!0;(t?this._value.indexOf(i.text)!=-1:this._value.indexOf(i.text)==-1)&&(this.model.renderMode!="windows"||this.model.windows.type!="combobox"||this._ddList.hasClass("e-m-expand")?this._touchEnd(i):(this._ddList.find(".e-m-active").removeClass("e-m-active").addClass("e-m-normal"),this._selectedItem.removeClass("e-m-normal").addClass("e-m-active")),this.model.renderMode!="android"&&this.model.renderMode!="flat"||t||(this._ddList.find(".e-m-state-active").removeClass("e-m-state-active").addClass("e-m-state-default"),this._selectedItem.removeClass("e-m-state-default").addClass("e-m-state-active")),this.model.renderMode=="ios7"&&ej.isLowerResolution()?this.element.val(i.text):this.model.renderMode!="ios7"&&this.model.enableMultiSelect&&this.element.val(this._value));this._selectFlag=!1}},_setReadOnly:function(n){this._wireEvents(n);n||this._menu.ejmMenu({target:$(this._ddwrapper)})},_setEnabled:function(n){this._controlStatus(n)},_controlStatus:function(n){this._ddwrapper[n?"removeClass":"addClass"]("e-m-state-disabled")},_refresh:function(){this._destroy();this.element.addClass("e-js");this._renderControl();this._wireEvents()},_clearElement:function(){this.element.insertAfter(this._ddwrapper);this._ddwrapper.remove();this._dialog?(this._dialog.ejmDialog("instance")._destroy(),this._dialog.remove()):this._toolbar?(this._toolbar.ejmToolbar("instance")._destroy(),this._toolbar.remove()):this._menu?(this._menu.ejmMenu("instance")._destroy(),this._menu.remove()):this._ddouter?this._ddouter.remove():this._ddList&&this._ddList.remove();this.element.html(this._orgEle.html());this.model.targetID&&(this.element.after(this._targetEle),this._targetEle=this._targetEle.clone())},_destroy:function(){this._wireEvents(!0);this._clearElement()},show:function(){var n={currentTarget:this._ddwrapper};this.model.renderMode=="ios7"?this._menu.ejmMenu("show",n):this._showDropDown()},hide:function(){var n={currentTarget:this._ddwrapper};this.model.renderMode=="ios7"?this._menu.ejmMenu("hide",n):this._hideDropDown()},getValue:function(){return $(this.element).val()},selectItemByIndex:function(n){n>=0&&this._selectUnselectItem(n)},selectItemByIndices:function(n){if(this.model.enableMultiSelect)for(var t=0;t<n.length;t++)n[t]>=0&&this._selectUnselectItem(n[t])},getSelectedItemValue:function(){if(!ej.isNullOrUndefined(this._selectedItem)&&!this.model.enableMultiSelect)return this.model.renderMode=="ios7"&&ej.isLowerResolution()?this._mobileValue.attr("data-value"):this._selectedItem.attr("data-value")},getSelectedItemsValue:function(){if(this.model.enableMultiSelect){var n=this._ddList.find("input.e-m-lv-check:checked").closest("li");for(this.pushValues=[],i=0;i<n.length;i++)this.pushValues.push(n[i].getAttribute("data-value"));return this.pushValues}},unselectItemByIndex:function(n){n>=0&&this._selectUnselectItem(n,!0)},unselectItemByIndices:function(n){if(this.model.enableMultiSelect)for(var t=0;t<n.length;t++)n[t]>=0&&this._selectUnselectItem(n[t],!0)}})})(jQuery,Syncfusion);ej.mobile.DropDownList.Mode={Normal:"normal",Native:"native"};ej.mobile.DropDownList.VirtualScrollMode={Continuous:"continuous",Normal:"normal"};ej.mobile.DropDownList.WindowsType={ComboBox:"combobox",List:"list"}});