/*!
*  filename: ej.pdfviewer.min.js
*  version : 13.4.0.53
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.globalize.min","jquery-easing","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.scroller.min","./ej.button.min","./ej.dropdownlist.min","./ej.toolbar.min","./ej.waitingpopup.min"],n):n()})(function(){(function(n,t,i){t.widget("ejPdfViewer","ej.PdfViewer",{_rootCSS:"e-pdfviewer",element:null,model:null,validTags:["div"],defaults:{serviceUrl:"",toolbarSettings:{toolbarItem:3,showTooltip:!0},pdfService:1,locale:"en-US",pageChange:"",documentLoad:""},_isToolbarClick:!1,_pageModel:null,_currentPage:1,_zoomLevel:2,_preZoomVal:1,_fitType:null,_higherZoomIndex:0,_lowerZoomIndex:0,_actionUrl:null,_isDevice:!1,_zoomVal:1,_imageIndex:0,_isPrinting:!1,_isContainImage:!1,_printWindow:null,_isPercentHeight:-1,_isPercentWidth:-1,_isHeight:!1,_isWidth:!1,_isPrintHidden:!1,_isNavigationHidden:!1,_isMagnificationHidden:!1,_viewerAction:{getPageModel:"GetPageModel"},_scrollTimer:null,_isDestroyed:!1,_pdfService:null,_toolbar:null,pageCount:0,currentPageNumber:this._currentPage,zoomPercentage:100,fileName:this._pdfFileName,_init:function(){if(this._actionUrl=this.model.serviceUrl+"/PostViewerAction",this._renderViewer(),this._initViewer(),this._on(n(window),"resize",this._viewerResize),this._getPdfService(this.model.pdfService),this.model.serviceUrl){var i={};i.viewerAction="GetPageModel";i.controlId=this._id;i.pageindex="1";i.isInitialLoading="true";this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPost("POST",this._actionUrl,JSON.stringify(i),"_getPageModel"):this._doAjaxPost("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i}),"_getPageModel")}},_getPdfService:function(n){this._pdfService=n==1?t.PdfViewer.PdfService.Local:t.PdfViewer.PdfService.Remote},_initViewer:function(){this._wireEvents();this._initToolbar();this._currentPage=1;var n=this.model.toolbarSettings;n.templateId||(this._showToolbar(!0),this._showZoomControl(n.toolbarItem&t.PdfViewer.ToolbarItems.MagnificationTools),this._showFittoPage(n.toolbarItem&t.PdfViewer.ToolbarItems.MagnificationTools),this._showPageNavigationControls(n.toolbarItem&t.PdfViewer.ToolbarItems.PageNavigationTools));this._showViewerBlock(!1);this._setContainerSize();this._showloadingIndicator(!0)},_destroy:function(){this._isDestroyed=!0;n("#"+this._id+"_toolbarContainer span.e-pdfviewer-labelpageno").html(" / 0");n("#"+this._id+"_txtpageNo").val(0);clearTimeout(this._scrollTimer);this._unwireEvents();this._initToolbar();for(var t=this._canvascount;t>=1;)n("#"+this._id+"pageDiv_"+t).remove(),t--;n("#"+this._id+"_pageviewContainer").remove();n("#"+this._id+"_toolbarContainer").remove();n("#"+this._id+"_viewerContainer").remove();n("#"+this._id+"_viewBlockContainer").remove();n(this.element).find(".e-pdfviewer-viewer").remove();this._renderedCanvasList.length=0;this._raiseClientEvent("destroy",null)},_renderToolTip:function(){var i=t.buildTag("div.e-pdfviewer-tbdiv e-pdfviewer-tooltip","",{display:"none"},{id:this._id+"_rptTooltip"}),r=t.buildTag("span.e-pdfviewer-headerspan","",{display:"block"},{id:this._id+"_rptTooltip_Header"}),u=t.buildTag("span.e-pdfviewer-contentspan","",{display:"block"},{id:this._id+"_rptTooltip_Content"});i.append(r);i.append(u);n("body").append(i)},_renderToolBar:function(i){var f,e,r,u,o;this.model.toolbarSettings.templateId?(o=document.getElementById(this.model.toolbarSettings.templateId),i.append(o),o.ejToolbar({enableSeparator:!0,height:o.height(),click:this.model.toolbarSettings.click}),o.css("display","block")):(f=t.buildTag("div.e-pdfviewer-toolbarcontainer .e-pdfviewer-viewer","",{width:"100%"},{id:this._id+"_toolbarContainer"}),i.append(f),this._isDevice?(e=t.buildTag("ul.e-pdfviewer-toolbarul","",{}),this._appendToolbarItems(e,"zoomin"),this._appendToolbarItems(e,"zoomout"),this._appendToolbarItems(e,"fitWidth"),this._appendToolbarItems(e,"fitPage"),f.append(e)):(r=t.buildTag("ul.e-pdfviewer-toolbarul","",{}),this._appendToolbarItems(r,"gotofirst"),this._appendToolbarItems(r,"gotoprevious"),this._appendToolbarItems(r,"gotopage"),this._appendToolbarItems(r,"gotonext"),this._appendToolbarItems(r,"gotolast"),f.append(r),u=t.buildTag("ul.e-pdfviewer-toolbarul","",{}),this._appendToolbarItems(u,"zoomin"),this._appendToolbarItems(u,"zoomout"),this._appendToolbarItems(u,"zoom"),this._appendToolbarItems(u,"fitWidth"),this._appendToolbarItems(u,"fitPage"),f.append(u),n("#"+this._id+"_toolbar_zoomSelection").ejDropDownList({height:"27px",width:"75px",cssClass:"e-pdfviewer-ddl",change:this._zoomValChange,selectedItem:2})),f.ejToolbar({enableSeparator:!this._isDevice,click:n.proxy(this._toolbarClick,this)}),this._toolbar=n("#"+this._id+"_toolbarContainer").data("ejToolbar"))},_appendToolbarItems:function(n,i){var r,p=t.PdfViewer.Locale[this.model.locale]?t.PdfViewer.Locale[this.model.locale]:t.PdfViewer.Locale["default"],f,e,o,s,h,c,l,a,u,v,y;switch(i){case"gotofirst":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_gotofirst"});f=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-gotofirst","",{});r.append(f);break;case"gotolast":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_gotolast"});e=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-gotolast","",{});r.append(e);break;case"gotonext":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_gotonext"});o=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-gotonext","",{});r.append(o);break;case"gotoprevious":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_gotoprevious"});s=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-gotoprevious","",{});r.append(s);break;case"gotopage":r=t.buildTag("div.e-pdfviewer-tbpage","",{display:"block"},{});h=t.buildTag("input.e-pdfviewer-pagenumber e-pdfviewer-elementalignments ejinputtext","",{},{type:"text",value:"0",id:this._id+"_txtpageNo","data-role":"none"});c=t.buildTag("span.e-pdfviewer-labelpageno","",{},{});r.append(h);r.append(c);break;case"zoomin":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_zoomin"});l=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-zoomin","",{},{id:this._id+"_toolbar_zoomin"});r.append(l);break;case"zoomout":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_zoomout"});a=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-zoomout","",{},{id:this._id+"_toolbar_zoomout"});r.append(a);break;case"zoom":r=t.buildTag("div.e-pdfviewer-ejdropdownlist","",{},{id:this._id+"_pdfviewer_toolbar_zoom"});u=t.buildTag("select.e-pdfviewer-tbdiv e-pdfviewer-zoomlist","",{},{id:this._id+"_toolbar_zoomSelection","data-role":"none"});u.append("<option>50%<\/option>");u.append("<option>75%<\/option>");u.append("<option Selected>100%<\/option>");u.append("<option>125%<\/option>");u.append("<option>150%<\/option>");u.append("<option>200%<\/option>");u.append("<option>400%<\/option>");r.append(u);break;case"fitWidth":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_fitWidth"});v=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-fitwidth","",{},{id:this._id+"_fitWidth"});r.append(v);break;case"fitPage":r=t.buildTag("li.e-pdfviewer-toolbarli","",{},{id:this._id+"_pdfviewer_toolbar_fitPage"});y=t.buildTag("span.e-pdfviewer-icon e-pdfviewer-fitpage","",{},{id:this._id+"_fitPage"});r.append(y)}n.append(r)},_renderViewerBlockinWeb:function(n){var i=t.buildTag("div.e-pdfviewer-viewer e-pdfviewer-viewerblock","",{},{id:this._id+"_viewBlockContainer"});n.append(i);var r=t.buildTag("table.e-pdfviewer-viewerblockcellcontent","",{margin:"1px",padding:"5px 5px 10px"}),u=t.buildTag("tr","",{width:"100%"}),f=t.buildTag("td.e-pdfviewer-viewerblockcontent","",{});return u.append(f),r.append(u),i.append(r),i},_renderViewerContainer:function(n){var r=t.buildTag("div","",{},{id:this._id+"_pdfviewerContainer"});n.append(r);var i=t.buildTag("div.e-pdfviewer-viewer e-pdfviewer-scrollcontainer e-pdfviewer-viewercontainer","",{height:"100%",width:"100%","font-size":"8pt"},{id:this._id+"_viewerContainer"}),u=t.buildTag("div","",{margin:"0px",height:"99.8%",width:"100%"},{id:this._id+"_loadingIndicator"}),f=t.buildTag("div","",{margin:"0px",height:"99.8%",width:"100%","background-color":"rgba(164, 183, 216, 0.18)",display:"block"},{id:this._id+"_loadingIndicatorBackView"}),e=t.buildTag("div","",{},{id:this._id+"_pageviewContainer"});return u.append(f),i.append(u),i.append(e),this._isDevice&&this._renderViewerBlockinDevice(i),r.append(i),r},_renderViewer:function(){var i=this.element.height(),r=this.element.width(),n=t.buildTag("div.e-pdfviewer-viewer","",{});this.element[0].style.height||this.element[0].parentElement.clientHeight==0||(this._isHeight=!0);this.element[0].style.width||this.element[0].parentElement.clientWidth==0||(this._isWidth=!0);i===0&&this.element[0].parentElement.clientHeight!=0&&this.element.height(this.element[0].parentElement.clientHeight);r===0&&this.element[0].parentElement.clientWidth!=0&&this.element.width(this.element[0].parentElement.clientWidth);this.element.append(n);this._renderToolBar(n);this._isDevice||(this._renderViewerBlockinWeb(n),this._renderToolTip());this._renderViewerContainer(n)},_setContainerSize:function(){var f=document.getElementById(this._id).clientHeight,i=0,t,r,u;this._isDevice||(t=n("#"+this._id+"_viewBlockContainer"),t.css("display").toLowerCase()=="block"&&(i=t.height()));r=this.model.toolbarSettings.templateId?n("#"+this.model.toolbarSettings.templateId).height():n("#"+this._id+"_toolbarContainer").height();u=f-i-r-4;n("#"+this._id+"_viewerContainer").css({height:u+"px"})},_setPageSize:function(t,i,r){r=0;var f=n("#"+this._id+"_pageviewContainer")[0].getBoundingClientRect(),u=this;this._renderPreviousPage=!1;n("#"+this._id+"_viewerContainer").unbind("scroll").on("scroll",function(){u._computeCurrentPage(t)});this._scrollTimer=setInterval(function(){u._pageviewscrollchanged(t)},500);u._backgroundPage=1;this._previousZoom=1;u._previousPage=u._currentPage;this._pageLocation=[];this._renderedCanvasList=[];this._pageContents=[];this._pageLocation[1]=0;this._canvascount=this._totalPages;this._designPageCanvas()},_designPageCanvas:function(){for(var e,r,u=0,o=n("#"+this._id+"_pageviewContainer"),i=1;i<=this._totalPages;i++){e=(this.element.width()-this._pageSize[i-1].PageWidth)/2;e<0&&(e=0);r=t.buildTag("div","",{},{id:this._id+"pageDiv_"+i});o.append(r);r.css("position","absolute");r.css("top",u);r.css("left",e+"px");this._pageLocation[i]=u;var f=document.createElement("canvas");f.id="pagecanvas_"+i;f.height=this._pageSize[i-1].PageHeight;f.style.backgroundColor="white";f.width=this._pageSize[i-1].PageWidth;r.append(f);n("#pagecanvas_"+i).css("box-shadow","0px 0px 0px 1px #000000");n("#"+this._id+"pageDiv_"+i).ejWaitingPopup({showOnInit:!0});n("#"+this._id+"pageDiv_"+i+"_WaitingPopup").appendTo(n("#"+this._id+"pageDiv_"+i)).css({top:0,left:0,"background-color":"#dbdbdb"});u=parseFloat(u)+parseFloat(this._pageSize[i-1].PageHeight)+8}this._cummulativeHeight=u},_computeCurrentPage:function(t){var u=0,i=0,l=document.getElementById(this._id+"_viewerContainer"),f=l.scrollTop,r,o,c;this._zoomVal!=1&&(f=f+this._currentPage*(8-this._zoomVal*8));var s=0,e=0,h={currentPageNumber:0};for(r=0;r<this._totalPages;r++){if(this._isDestroyed)return;if(u>f){i=r;o=parseFloat(u)-parseFloat(f);c=this.element[0].parentElement.clientHeight-o;c>o&&(i=parseFloat(i)+1,this._renderPreviousPage=!0);this._renderPreviousPage=!1;break}else u=parseFloat(u)+parseFloat(t*this._zoomVal)+8;i=r+1}n("#"+this._id+"_toolbarContainer span.e-pdfviewer-labelpageno").html(" / "+this._totalPages);s=document.getElementById(this._id+"_txtpageNo").value;n("#"+this._id+"_txtpageNo").val(i);this._updatePageNavigation(i,this._totalPages);e=document.getElementById(this._id+"_txtpageNo").value;h.currentPageNumber=e;s!=e&&this._raiseClientEvent("pageChange",h);this._currentPage=i},_pageviewscrollchanged:function(){var e=0,o=n("#"+this._id+"_viewerContainer").scrollTop(),f,r,i,u;o==this._previousPosition&&(e=this._currentPage,this._totalPages&&this._previousPage!=e&&(f=parseInt(e),this._previousPage=e,f>=1&&f<=this._totalPages&&(this._jsondata==""||this._jsondata==null?(this._showloadingIndicator(!0),n("#"+this._id+"_toolbarContainer span.e-pdfviewer-labelpageno").html(""),n("#"+this._id+"_txtpageNo").val("0")):(n("#"+this._id+"_toolbarContainer span.e-pdfviewer-labelpageno").html(" / "+this._totalPages),n("#"+this._id+"_txtpageNo").val(f)),this._currentPage=f,this._updatePageNavigation(this._currentPage,this._totalPages),this._renderedCanvasList.indexOf(parseInt(this._currentPage))!=-1||this._scrollTriggered||this._pageContents[parseInt(this._currentPage)]||(this._scrollTriggered=!0,i={},i.viewerAction=this._viewerAction.getPageModel,i.pageindex=this._currentPage.toString(),this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostscroll("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostscroll("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i}))))));this._renderedCanvasList.indexOf(parseInt(this._currentPage))==-1&&!this._scrollTriggered&&this._currentPage<=this._totalPages&&(this._pageContents[parseInt(this._currentPage)]?(u=this._pageContents[parseInt(this._currentPage)],this._drawPdfPage(u)):(this._scrollTriggered=!0,i={},i.viewerAction=this._viewerAction.getPageModel,i.pageindex=this._currentPage.toString(),this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostscroll("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostscroll("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i}))));r=parseInt(this._currentPage)+1;this._renderPreviousPage?this._renderedCanvasList.indexOf(parseInt(this._currentPage)-1)==-1&&!this._scrollTriggered&&parseInt(this._currentPage)-1>0?this._pageContents[parseInt(this._currentPage)-1]?(u=this._pageContents[parseInt(this._currentPage)-1],this._drawPdfPage(u)):(this._scrollTriggered=!0,i={},i.viewerAction=this._viewerAction.getPageModel,i.pageindex=(parseInt(this._currentPage)-1).toString(),this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostscroll("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostscroll("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i}))):this._renderedCanvasList.indexOf(parseInt(r))==-1&&!this._scrollTriggered&&r<=this._totalPages&&(this._pageContents[parseInt(r)]?(u=this._pageContents[parseInt(r)],this._drawPdfPage(u)):(this._scrollTriggered=!0,i={},i.viewerAction=this._viewerAction.getPageModel,i.pageindex=r.toString(),this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostscroll("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostscroll("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i})))):this._renderedCanvasList.indexOf(parseInt(r))==-1&&!this._scrollTriggered&&r<=this._totalPages?this._pageContents[parseInt(r)]?(u=this._pageContents[parseInt(r)],this._drawPdfPage(u)):(this._scrollTriggered=!0,this._fileName?(i={},i.viewerAction=this._viewerAction.getPageModel,i.pageindex=r.toString(),i.newFileName=this._fileName,this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostscroll("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostscroll("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i}))):(i={},i.viewerAction=this._viewerAction.getPageModel,i.pageindex=r.toString(),this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostscroll("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostscroll("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i})))):this._renderedCanvasList.indexOf(parseInt(this._currentPage)-1)==-1&&!this._scrollTriggered&&parseInt(this._currentPage)-1>0&&(this._pageContents[parseInt(this._currentPage)-1]?(u=this._pageContents[parseInt(this._currentPage)-1],this._drawPdfPage(u)):(this._scrollTriggered=!0,i={},i.viewerAction=this._viewerAction.getPageModel,i.pageindex=(parseInt(this._currentPage)-1).toString(),this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostscroll("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostscroll("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i}))));this._previousPosition=o},_doAjaxPostscroll:function(t,i,r){var u=this;n.ajax({type:t,url:i,crossDomain:!0,contentType:"application/json; charset=utf-8",dataType:"json",data:r,traditional:!0,success:function(n){u._drawPdfPage(n);u._scrollTriggered=!1},error:function(n){n.readyState!=0&&alert("Exception"+n.responseText)}})},_drawPdfPage:function(n){var at=n,b,c,p,u,l,rt,w;n=this._pdfService==t.PdfViewer.PdfService.Local?JSON.parse(n):JSON.parse(n.d);this._renderedCanvasList.push(parseInt(n.currentpage));b=parseInt(n.currentpage);this._showPageLoadingIndicator(b,!0);this._pageimageList=n.imagestream;this._pageContents[parseInt(n.currentpage)]=at;this._pageCompleted=this._pageimageList.pagecompleted;var vt=parseInt(n.currentpage),k=document.getElementById("pagecanvas_"+parseInt(n.currentpage)),r=k.getContext("2d"),d=[],ut=[],yt=[],ft=[],et=[],pt,s=navigator.userAgent,h,g=[],a=this._pageimageList.textelements;for(c=0;c<a.length;c++){var e=a[c],nt=e.color,f=e.matrix;f!=null&&(f=f.Elements);var ot=e.brush,o=e.pathValue,wt=e.iscliping,st=e.restorecanvas,tt=e.imagedata,it=e.fillrule,bt=e.isFillandStroke,kt=e.fillcolor,ht=e.strokecolor,ct=e.linewidth,lt=e.linecap,v=e.linearGradientBrush,y=e.charID;if(o!=null?(o=o.split(";"),y&&(g[y]=o)):o==null&&y&&(o=g[y]),st==!1&&r.save(),o!=i&&r.setTransform(f[0]*this._zoomVal,f[1],f[2],f[3]*this._zoomVal,f[4]*this._zoomVal,f[5]*this._zoomVal),o!=null){for(r.beginPath(),p=0;p<o.length;p++)u=o[p],l=u[0],l=="M"?(u=u.substring(1,u.length),u=u.split(" "),r.moveTo(parseInt(u[0]),u[1])):l=="L"?(u=u.substring(1,u.length),u=u.split(" "),r.lineTo(parseInt(u[0]),u[1])):l=="C"?(u=u.substring(1,u.length),u=u.split(" "),r.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5])):l=="Z"&&r.closePath();wt==!0?(it=="evenodd"&&(r.msFillRule="evenodd"),r.clip()):bt==i?ot=="Fill"?(r.fillStyle=v!=i?this._getGradientBrush(v,r):nt,it=="evenodd"&&(r.msFillRule="evenodd"),r.fill()):ot=="FillandStroke"?(r.fillStyle=nt,r.fill(),r.strokeStyle=ht,r.stroke()):(r.strokeStyle=nt,r.lineWidth=ct,r.lineCap=lt,r.stroke()):(r.strokeStyle=ht,r.lineWidth=ct,r.lineCap=lt,r.stroke(),r.fillStyle=v!=i?this._getGradientBrush(v,r):kt,it=="evenodd"&&(r.msFillRule="evenodd"),r.fill())}if(st&&r.restore(),tt!=i)if((h=s.indexOf("Firefox"))!=-1||(h=s.indexOf("Chrome"))!=-1||(h=s.indexOf("Safari"))!=-1){d.push(tt);ut.push(f);et.push(a);ft.push(c);pt=this._zoomVal;this._imageIndex=0;this._isContainImage=!0;break}else rt=new Image,rt.src=tt,r.setTransform(f[0]*this._zoomVal,f[1],f[2],f[3]*this._zoomVal,f[4]*this._zoomVal,f[5]*this._zoomVal),r.drawImage(rt,0,0,1,1)}if((h=s.indexOf("Firefox"))!=-1||(h=s.indexOf("Chrome"))!=-1||(h=s.indexOf("Safari"))!=-1)for(w=0;w<d.length;w++)this._imageRendering(a,yt,d,ut,r,w,et,ft,g,k,vt);return this._showPageLoadingIndicator(b,!1),k},_showPageLoadingIndicator:function(t,i){i?n("#"+this._id+"pageDiv_"+t+"_WaitingPopup").css("display","block"):n("#"+this._id+"pageDiv_"+t+"_WaitingPopup").css("display","none")},_imageRendering:function(n,t,r,u,f,e,o,s,h,c,l){var a=this,v,y;v=a._isPrinting==!0?1:a._zoomVal;y=new Image;y.onload=function(){for(var d,b,nt,rt,e,g,et=!1,k=0;k<u.length;k++)if(et==!1){for(d=u[k],f.setTransform(d[0]*v,d[1],d[2],d[3]*v,d[4]*v,d[5]*v),t[a._imageIndex]!=i&&f.drawImage(t[a._imageIndex],0,0,1,1),b=s[k],b=b+1,nt=o[k];b<nt.length;){var y=nt[b],ut=y.color,p=y.matrix;p!=null&&(p=p.Elements);var ot=y.brush,w=y.pathValue,vt=y.iscliping,st=y.restorecanvas,ht=y.imagedata,ft=y.fillrule,yt=y.isFillandStroke,pt=y.fillcolor,ct=y.strokecolor,lt=y.linewidth,at=y.linecap,tt=y.linearGradientBrush,it=y.charID;if(w!=null?(w=w.split(";"),it&&(h[it]=w)):w==null&&it&&(w=h[it]),st==!1&&f.save(),w!=i&&f.setTransform(p[0]*v,p[1],p[2],p[3]*v,p[4]*v,p[5]*v),w!=null){for(f.beginPath(),rt=0;rt<w.length;rt++)e=w[rt],g=e[0],g=="M"?(e=e.substring(1,e.length),e=e.split(" "),f.moveTo(parseInt(e[0]),e[1])):g=="L"?(e=e.substring(1,e.length),e=e.split(" "),f.lineTo(parseInt(e[0]),e[1])):g=="C"?(e=e.substring(1,e.length),e=e.split(" "),f.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])):g=="Z"&&f.closePath();vt==!0?(ft=="evenodd"&&(f.msFillRule="evenodd"),f.clip()):yt==i?ot=="Fill"?(f.fillStyle=tt!=i?this._getGradientBrush(tt,f):ut,ft=="evenodd"&&(f.msFillRule="evenodd"),f.fill()):ot=="FillandStroke"?(f.fillStyle=ut,f.fill(),f.strokeStyle=ct,f.stroke()):(f.strokeStyle=ut,f.lineWidth=lt,f.lineCap=at,f.stroke()):(f.strokeStyle=ct,f.lineWidth=lt,f.lineCap=at,f.stroke(),f.fillStyle=tt!=i?this._getGradientBrush(tt,f):pt,ft=="evenodd"&&(f.msFillRule="evenodd"),f.fill())}if(st&&f.restore(),ht!=i){et=!0;r.pop();u.pop();o.pop();s.pop();r.push(ht);u.push(p);o.push(n);s.push(b);k=-1;a._imageIndex++;break}b++}b>=nt.length&&a._isPrinting==!0&&(a._printedCanvas=c,a._printWindow.document.write('<img src="'+c.toDataURL()+'" style="border:1px solid;height:"'+a._pageHeight+'"px;margin:0px"><br />'),l==a._totalPages&&(a._printWindow.document.write("<\/center><\/body><\/html>"),a._printWindow.document.close(),a._printWindow.print()))}else a._imageRendering(n,t,r,u,f,k,o,s,h,c,l)};y.src=r[e];t.push(y)},_getGradientBrush:function(n,t){for(var i,s,r=n.Rectangle,f=n.InterpolationColors,h=f.Colors,e=f.Positions,o=t.createLinearGradient(r.X,r.Y,r.Width,r.Height),u=0;u<e.length;u++)i=h[u],i=i.split(","),s=this._rgb2Color(i[0],i[1],i[2]),o.addColorStop(e[u],s);return o},_rgb2Color:function(n,t,i){return"#"+this._byte2Hex(n)+this._byte2Hex(t)+this._byte2Hex(i)},_byte2Hex:function(n){var t="0123456789ABCDEF";return String(t.substr(n>>4&15,1))+t.substr(n&15,1)},_doAjaxPost:function(t,i,r,u){var f=this,e=u;n.ajax({async:!1,type:t,url:i,crossDomain:!0,contentType:"application/json; charset=utf-8",dataType:"json",data:r,traditional:!0,success:function(n){f[e](n);f._raiseClientEvent("documentLoad",null)},error:function(n){if(e!="_clearCurrentServerCache"){if(n.readyState==0)return;alert("Exception"+n.responseText)}}})},_raiseClientEvent:function(i,r){var u=this.model[i],e=[],f;e=r===null?"":r;u&&(typeof u=="string"&&(u=t.util.getObject(u,window)),n.isFunction(u)&&(i=="pageChange"?f={currentPageNumber:parseInt(r.currentPageNumber)}:i=="zoomChange"&&(f={previousZoomPercentage:r.previousZoomPercentage,currentZoomPercentage:r.currentZoomPercentage}),this._trigger(i,f)))},_getPageModel:function(i){this._jsondata=i;(i==""||i==null)&&(this._showloadingIndicator(!0),n("#"+this._id+"_toolbarContainer span.e-pdfviewer-labelpageno").html(""),n("#"+this._id+"_txtpageNo").val("0"));var r;r=this._pdfService==t.PdfViewer.PdfService.Local?JSON.parse(i):JSON.parse(i.d);r&&(this._pageWidth=r.pagewidth,this._pageHeight=r.pageheight,this._imageUrl=r.imageurl,this._pageSize=r.pagesize,this._totalPages=r.pagecount,this.pageCount=this._totalPages,this._pdfFileName=r.filename,this.fileName=this._pdfFileName,this._currentPage=r.currentpage,this.currentPageNumber=this._currentPage,this._isToolbarClick||this._enableToolbarItems(),this._gotoPage(this._currentPage),this._drawPdfPage(i),this._showNavigationIndicator(!1),this._showloadingIndicator(!1))},_print:function(){this._showloadingIndicator(!0);var n=this;n._printWindow=window.open("");n._printWindow!=null&&(n._printWindow.document.write("<html><BODY>"),n._printWindow.document.write("<center>"),n._printpagebypage())},_printpagebypage:function(){var n,i,r,u,f,e;for(this._isPrinting=!0,n=1;n<=this._totalPages;n++)if(this._pageContents[parseInt(n)]){if(this._printWindow.closed){this._showloadingIndicator(!1);break}r=this._pageContents[parseInt(n)];u=this._printPdfPages(r);this._isContainImage==!1&&this._printWindow.document.write('<img src="'+u.toDataURL()+'" style="border:1px solid;height:"'+this._pageHeight+'"px;margin:0px"><br />');f=this._pdfService==t.PdfViewer.PdfService.Local?JSON.parse(r):JSON.parse(r.d);e=parseInt(f.currentpage);e==this._totalPages&&(this._printWindow.document.write("<\/center><\/body><\/html>"),this._printWindow.document.close(),this._printWindow.print())}else{if(this._printWindow.closed){this._showloadingIndicator(!1);break}i={};i.viewerAction=this._viewerAction.getPageModel;i.pageindex=parseInt(n).toString();this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPostPrint("POST",this._actionUrl,JSON.stringify(i)):this._doAjaxPostPrint("POST",this.model.serviceUrl,JSON.stringify({jsonResult:i}))}this._showloadingIndicator(!1);this._isPrinting=!1},_doAjaxPostPrint:function(i,r,u){var f=this;n.ajax({async:!1,type:i,url:r,crossDomain:!0,contentType:"application/json; charset=utf-8",dataType:"json",data:u,traditional:!0,success:function(n){var u=f._printPdfPages(n),i,r;f._isContainImage==!1&&f._printWindow.document.write('<img src="'+u.toDataURL()+'" style="border:1px solid;height:"'+f._pageHeight+'"px;margin:0px"><br />');i=this._pdfService==t.PdfViewer.PdfService.Local?JSON.parse(n):JSON.parse(n.d);r=parseInt(i.currentpage);r==f._totalPages&&(f._printWindow.document.write("<\/center><\/body><\/html>"),f._printWindow.document.close(),f._printWindow.print())},error:function(n){n.readyState==0}})},_printPdfPages:function(n){var l=this,d,o,r,a,b,u,v,ut,k;jsondata=this._pdfService==t.PdfViewer.PdfService.Local?JSON.parse(n):JSON.parse(n.d);this._pageimageList=jsondata.imagestream;d=parseInt(jsondata.currentpage);o=document.createElement("canvas");o.id="printcanvas"+d;o.height=l._pageHeight;o.style.backgroundColor="white";o.width=l._pageWidth;r=o.getContext("2d");r.strokeStyle="black";r.lineWidth="2";r.strokeRect(0,0,o.clientWidth,o.clientHeight);var g=[],ft=[],vt=[],et=[],ot=[],yt,h=navigator.userAgent,c,nt=[],y=this._pageimageList.textelements;for(a=0;a<y.length;a++){var e=y[a],tt=e.color,f=e.matrix;f!=null&&(f=f.Elements);var st=e.brush,s=e.pathValue,pt=e.iscliping,ht=e.restorecanvas,it=e.imagedata,rt=e.fillrule,wt=e.isFillandStroke,bt=e.fillcolor,ct=e.strokecolor,lt=e.linewidth,at=e.linecap,p=e.linearGradientBrush,w=e.charID;if(s!=null?(s=s.split(";"),w&&(nt[w]=s)):s==null&&w&&(s=nt[w]),ht==!1&&r.save(),s!=i&&r.setTransform(f[0],f[1],f[2],f[3],f[4],f[5]),s!=null){for(r.beginPath(),b=0;b<s.length;b++)u=s[b],v=u[0],v=="M"?(u=u.substring(1,u.length),u=u.split(" "),r.moveTo(parseInt(u[0]),u[1])):v=="L"?(u=u.substring(1,u.length),u=u.split(" "),r.lineTo(parseInt(u[0]),u[1])):v=="C"?(u=u.substring(1,u.length),u=u.split(" "),r.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5])):v=="Z"&&r.closePath();pt==!0?(rt=="evenodd"&&(r.msFillRule="evenodd"),r.clip()):wt==i?st=="Fill"?(r.fillStyle=p!=i?this._getGradientBrush(p,r):tt,rt=="evenodd"&&(r.msFillRule="evenodd"),r.fill()):st=="FillandStroke"?(r.fillStyle=tt,r.fill(),r.strokeStyle=ct,r.stroke()):(r.strokeStyle=tt,r.lineWidth=lt,r.lineCap=at,r.stroke()):(r.strokeStyle=ct,r.lineWidth=lt,r.lineCap=at,r.stroke(),r.fillStyle=p!=i?this._getGradientBrush(p,r):bt,rt=="evenodd"&&(r.msFillRule="evenodd"),r.fill())}if(ht&&r.restore(),it!=i)if((c=h.indexOf("Firefox"))!=-1||(c=h.indexOf("Chrome"))!=-1||(c=h.indexOf("Safari"))!=-1){g.push(it);ft.push(f);ot.push(y);et.push(a);yt=l._zoomVal;l._imageIndex=0;l._isContainImage=!0;break}else ut=new Image,ut.src=it,r.setTransform(f[0],f[1],f[2],f[3],f[4],f[5]),r.drawImage(ut,0,0,1,1)}if((c=h.indexOf("Firefox"))!=-1||(c=h.indexOf("Chrome"))!=-1||(c=h.indexOf("Safari"))!=-1)for(k=0;k<g.length;k++)return this._imageRendering(y,vt,g,ft,r,k,ot,et,nt,o,d),o;return o},_showPrintButton:function(t){t?(n("#"+this._id+"_toolbar_Print").parent().parents(".e-pdfviewer-toolbarul").css("display","block"),this._isPrintHidden=!1):(n("#"+this._id+"_toolbar_Print").parent().parents(".e-pdfviewer-toolbarul").css("display","none"),this._isPrintHidden=!0)},_updatePageNavigation:function(n,t){n>1&&n<t?(this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotofirst"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotoprevious"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotonext"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotolast")):n==1&&n<t?(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotofirst"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotoprevious"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotonext"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotolast")):n==t&&t!=1?(this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotofirst"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_gotoprevious"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotonext"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotolast")):(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotofirst"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotoprevious"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotonext"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotolast"));(this._jsondata==""||this._jsondata==null)&&(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotofirst"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotoprevious"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotonext"),this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotolast"));this.currentPageNumber=this._currentPage},_gotoFirstPage:function(){if(this._totalPages&&this._totalPages>0){this._currentPage=1;var n=document.getElementById(this._id+"_viewerContainer");n.scrollTop=parseFloat(this._pageLocation[this._currentPage]*this._zoomVal);this._pageviewscrollchanged(this._pageHeight);this._updatePageNavigation(this._currentPage,this._totalPages)}},_gotoLastPage:function(){if(this._totalPages&&this._totalPages>0){this._currentPage=this._totalPages;var n=document.getElementById(this._id+"_viewerContainer");n.scrollTop=parseFloat(this._pageLocation[this._currentPage]*this._zoomVal);this._pageviewscrollchanged(this._pageHeight);this._updatePageNavigation(this._currentPage,this._totalPages)}},_gotoNextPage:function(){if(this._totalPages&&this._currentPage<this._totalPages){this._currentPage=this._currentPage+1;var n=document.getElementById(this._id+"_viewerContainer");n.scrollTop=parseFloat(this._pageLocation[this._currentPage]*this._zoomVal);this._pageviewscrollchanged(this._pageHeight);this._updatePageNavigation(this._currentPage,this._totalPages)}},_gotoPreviousPage:function(){if(this._totalPages&&this._currentPage>1){this._currentPage=this._currentPage-1;var n=document.getElementById(this._id+"_viewerContainer");n.scrollTop=parseFloat(this._pageLocation[this._currentPage]*this._zoomVal);this._pageviewscrollchanged(this._pageHeight);this._updatePageNavigation(this._currentPage,this._totalPages)}},_gotoPageNo:function(n){var i={currentPageNumber:0},r=n,f=this._currentPage,t,u;this._totalPages&&(t=parseInt(n),t>=1&&t<=this._totalPages&&this._currentPage!=t&&(this._currentPage=t,u=document.getElementById(this._id+"_viewerContainer"),u.scrollTop=parseFloat(this._pageLocation[this._currentPage]*this._zoomVal),this._pageviewscrollchanged(this._pageHeight),this._updatePageNavigation(this._currentPage,this._totalPages)));f!=r&&(i.currentPageNumber=r,this._raiseClientEvent("pageChange",i))},_gotoPage:function(t){this._setPageSize(this._pageHeight,this._pageWidth,null,null);var i=parseInt(t);this._updatePageNavigation(i,this._totalPages);this._totalPages>0&&this._totalPages&&(n("#"+this._id+"_toolbarContainer span.e-pdfviewer-labelpageno").html(" / "+this._totalPages),n("#"+this._id+"_txtpageNo").val(i))},_allowOnlyNumbers:function(n){return(n.which<48||n.which>57)&&n.which!=8&&n.which!=13?!1:!0},_onkeyPress:function(t){if(t.which==13)try{var i=parseInt(n(t.currentTarget).val());i>0&&i<=this.pageCount?this._gotoPageNo(i):n(t.currentTarget).val(this.currentPageNumber)}catch(r){}},_showPageNavigationControls:function(t){t?(n("#"+this._id+"_txtpageNo").parents(".e-pdfviewer-toolbarul").css("display","block"),n("#"+this._id+"_toolbar_Print").parent().parents(".e-pdfviewer-toolbarul").css("border-right-width","1px"),this._isNavigationHidden=!1):(n("#"+this._id+"_txtpageNo").parents(".e-pdfviewer-toolbarul").css("display","none"),this._isNavigationHidden=!0,!this._isPrintHidden&&this._isNavigationHidden&&this._isMagnificationHidden&&n("#"+this._id+"_toolbar_Print").parent().parents(".e-pdfviewer-toolbarul").css("border-right-width","0px"))},_showFittoPage:function(t){t?(n("#"+this._id+"_fitWidth").parents("li.e-pdfviewer-toolbarli").css("display","block"),n("#"+this._id+"_fitPage").parents("li.e-pdfviewer-toolbarli").css("display","block")):(n("#"+this._id+"_fitWidth").parents("li.e-pdfviewer-toolbarli").css("display","none"),n("#"+this._id+"_fitPage").parents("li.e-pdfviewer-toolbarli").css("display","none"))},_resetPage:function(){var t=n("#"+this._id+"_pageviewContainer"),i=n("#"+this._id+"_pageviewOuterline");i.css({width:t.width(),height:t.height()});i.css({width:t[0].getBoundingClientRect().width,height:t[0].getBoundingClientRect().height})},_applyFitToWidth:function(){_scaleXY=this._fitToPage("fitToWidth");this._applyDropDownVal(_scaleXY,!0,!1);this._updatePageFitModel(this._fitType)},_applyFitToPage:function(){_scaleXY=this._fitToPage("fitToPage");this._applyDropDownVal(_scaleXY,!1,!0);this._updatePageFitModel(this._fitType)},_updatePageFitModel:function(n){n=="fitToWidth"?(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_fitWidth"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitPage")):n=="fitToPage"&&(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_fitPage"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitWidth"))},_fitToPage:function(t){this._resetPage();var e=n("#"+this._id+"_viewerContainer"),h=n("#"+this._id+"_pageviewContainer"),c=n("#"+this._id+"_pageviewOuterline"),u=e.width(),o=e.height(),f=this._pageWidth,s=this._pageHeight,i=1,r=1;return t=="fitToPage"?(i=(u-40)/f,r=o/s,o>s&&(r=this._preZoomVal),u>f&&(i=this._preZoomVal),i=r,this._zoomVal=i,this._zoomInContainer(),this._calculateZoomLevel(this._zoomVal)):t=="fitToWidth"&&(i=(u-40)/f,r=i,this._zoomVal=i,this._zoomInContainer(),this._calculateZoomLevel(this._zoomVal)),this._fitType=t,{scalX:i,scalY:r}},_selectDropDownIndex:function(t){var i=n(n("#"+this._id+"_toolbar_zoomSelection_popup li")[t]);i.addClass("e-active");n("#"+this._id+"_toolbar_zoomSelection_input").val(i.text())},_applyDropDownVal:function(t,i,r){if(r){var u=t.scalX>t.scalY?t.scalY:t.scalX;n("#"+this._id+"_toolbar_zoomSelection_input").val(Math.round(u*100)+"%");n("#"+this._id+"_toolbar_zoomSelection_popup li").removeClass("e-active")}else i?(n("#"+this._id+"_toolbar_zoomSelection_input").val(Math.round(t.scalX*100)+"%"),n("#"+this._id+"_toolbar_zoomSelection_popup li").removeClass("e-active")):(n("#"+this._id+"_toolbar_zoomSelection_input").val(Math.round(t.scalY*100)+"%"),n("#"+this._id+"_toolbar_zoomSelection_popup li").removeClass("e-active"))},_showFitToPagetip:function(){var t=n("#"+this._id+"_toolbar_fittoPagePopup"),r,i;t.length>0||(t=this._renderPageFitPopup(),n("body").append(t),this._on(n("#"+this._id+"_toolbar_fittoPagePopup li.e-pdfviewer-popupli"),"click",this._pageFitMenuClick));t.css("display")=="block"?t.css("display","none"):t.css("display","block");r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-pagefit")[0].getBoundingClientRect();i=n(n("#"+this._id+"_toolbarContainer .e-pdfviewer-pagefit")[0]).offset();t.css({top:i.top+r.height-3,left:i.left-5})},_zoomValChange:function(t){var r=n(this.element).closest(".e-pdfviewer"),i=r.ejPdfViewer("instance"),u=parseInt(t.value)/100;i._zoomLevel=t.itemId;i._zoomContainer(u,!1)},_zoomIn:function(){if(this._zoomLevel>=6?this._zoomLevel=6:this._zoomLevel++,this._isDevice)this._mobileLayoutZoomChange();else{var t=n("#"+this._id+"_toolbar_zoomSelection").data("ejDropDownList");t._selectItemByIndex(this._zoomLevel)}},_zoomOut:function(){if(this._zoomLevel<=0?this._zoomLevel=0:this._zoomLevel--,this._isDevice)this._mobileLayoutZoomChange();else{var t=n("#"+this._id+"_toolbar_zoomSelection").data("ejDropDownList");t._selectItemByIndex(this._zoomLevel)}},_zoomInContainer:function(t,i){var y=i,h=n("#"+this._id+"_viewerContainer"),c=n("#"+this._id+"_pageviewContainer"),r,f,u,a,o,v,s;t&&(this._zoomVal=this._zoomVal+y);var b=c.width(),k=c.height(),e={currentZoomPercentage:0,previousZoomPercentage:0},l=document.getElementById(this._id+"_viewerContainer"),p=l.scrollTop,w=p/this._previousZoom*this._zoomVal,d="scale("+this._zoomVal+","+this._zoomVal+")";for(r=1;r<=this._totalPages;r++)f=(this.element.width()-this._pageSize[r-1].PageWidth*this._zoomVal)/2,f<0&&(f=0),u=document.getElementById("pagecanvas_"+r),a=u.getContext("2d"),u.height=this._pageSize[r-1].PageHeight*this._zoomVal,u.width=this._pageSize[r-1].PageWidth*this._zoomVal,a.clearRect(0,0,u.clientWidth,u.clientHeight),o=n("#"+this._id+"pageDiv_"+r),o[0].style.top=this._pageLocation[r]*this._zoomVal+"px",o[0].style.left=f+"px",n("#"+this._id+"pageDiv_"+r+"_WaitingPopup").css({display:"block",height:u.height+"px",width:u.width+"px"}),v=document.getElementById(this._id+"pageDiv_"+r+"_WaitingPopup"),s=v.childNodes[0],s.style.top=(u.height-s.clientHeight)/2+"px";this._renderedCanvasList.length=0;this._zoomVal<1?h.css({"-ms-scroll-limit-y-max":this._cummulativeHeight*this._zoomVal-this.element.height()+50+"px"}):h.css({"-ms-scroll-limit-y-max":""});l.scrollTop=w;this._eventpreviouszoomvalue=this._preZoomVal;this._eventzoomvalue=this._zoomVal;this._preZoomVal=this._zoomVal;this._previousZoom=this._zoomVal;e.previousZoomPercentage=Math.round(this._eventpreviouszoomvalue*100);e.currentZoomPercentage=Math.round(this._eventzoomvalue*100);this._raiseClientEvent("zoomChange",e);this.zoomPercentage=Math.round(this._zoomVal*100)},_zoomOutContainer:function(t,i){var y=i,h=n("#"+this._id+"_viewerContainer"),c=n("#"+this._id+"_pageviewContainer"),r,f,u,a,o,v,s;t&&(this._zoomVal=this._zoomVal+y);var b=c.width(),k=c.height(),e={currentZoomPercentage:0,previousZoomPercentage:0},l=document.getElementById(this._id+"_viewerContainer"),p=l.scrollTop,w=p/this._previousZoom*this._zoomVal,d="scale("+this._zoomVal+","+this._zoomVal+")";for(r=1;r<=this._totalPages;r++)f=(this.element.width()-this._pageSize[r-1].PageWidth*this._zoomVal)/2,f<0&&(f=0),u=document.getElementById("pagecanvas_"+r),a=u.getContext("2d"),u.height=this._pageSize[r-1].PageHeight*this._zoomVal,u.width=this._pageSize[r-1].PageWidth*this._zoomVal,a.clearRect(0,0,u.clientWidth,u.clientHeight),o=n("#"+this._id+"pageDiv_"+r),o[0].style.top=this._pageLocation[r]*this._zoomVal+"px",o[0].style.left=f+"px",n("#"+this._id+"pageDiv_"+r+"_WaitingPopup").css({display:"block",height:u.height+"px",width:u.width+"px"}),v=document.getElementById(this._id+"pageDiv_"+r+"_WaitingPopup"),s=v.childNodes[0],s.style.top=(u.height-s.clientHeight)/2+"px";this._renderedCanvasList.length=0;this._zoomVal<1?h.css({"-ms-scroll-limit-y-max":this._cummulativeHeight*this._zoomVal-this.element.height()+50+"px"}):h.css({"-ms-scroll-limit-y-max":""});l.scrollTop=w;this._eventpreviouszoomvalue=this._preZoomVal;this._eventzoomvalue=this._zoomVal;this._previousZoom=this._zoomVal;e.previousZoomPercentage=Math.round(this._eventpreviouszoomvalue*100);e.currentZoomPercentage=Math.round(this._eventzoomvalue*100);this._raiseClientEvent("zoomChange",e);this.zoomPercentage=Math.round(this._zoomVal*100)},_zoomContainer:function(n,t){this._fitType=null;this._zoomVal=n;this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitPage");this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_fitWidth");var i=Math.abs(this._preZoomVal-n);if(i==0)return!1;this._preZoomVal>n?this._zoomOutContainer(t,i):this._zoomInContainer(t,i);this._preZoomVal=n;this._updateZoomButtons()},_calculateZoomLevel:function(n){for(var t,e=document.getElementById(this._id+"_toolbar_zoomSelection_popup").getElementsByTagName("li"),i=[],f=0;f<e.length;f++)i.push(parseInt(e[f].textContent)/100);for(var o=n,r=0,u=i.length-1;r<=u;)if(t=Math.round((r+u)/2),i[t]<o)r=t+1;else if(i[t]>o)u=t-1;else return t;this._lowerZoomIndex=u;this._higherZoomIndex=r},_applyLowerZoomIndex:function(n){(n=="fitToWidth"||n=="fitToPage")&&(this._zoomLevel=this._lowerZoomIndex);this._fitType=null},_applyHigherZoomIndex:function(n){(n=="fitToWidth"||n=="fitToPage")&&(this._zoomLevel=this._higherZoomIndex);this._fitType=null},_updateZoomButtons:function(){this._zoomVal==.5?(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_zoomout"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_zoomin")):this._zoomVal==4?(this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_zoomin"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_zoomout")):(this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_zoomout"),this._toolbar.enableItemByID(this._id+"_pdfviewer_toolbar_zoomin"))},_showZoomControl:function(t){t?(n("#"+this._id+"_txtpageNo").parents(".e-pdfviewer-toolbarul").css("border-right-width","1px"),n("#"+this._id+"_toolbar_zoomin").parents("li.e-pdfviewer-toolbarli").css("display","block"),n("#"+this._id+"_toolbar_zoomout").parents("li.e-pdfviewer-toolbarli").css("display","block"),n("#"+this._id+"_toolbar_zoomSelection").parents("div.e-pdfviewer-ejdropdownlist").css("display","block"),this._isMagnificationHidden=!1):(n("#"+this._id+"_txtpageNo").parents(".e-pdfviewer-toolbarul").css("border-right-width","0px"),n("#"+this._id+"_toolbar_zoomin").parents("li.e-pdfviewer-toolbarli").css("display","none"),n("#"+this._id+"_toolbar_zoomout").parents("li.e-pdfviewer-toolbarli").css("display","none"),n("#"+this._id+"_toolbar_zoomSelection").parents("div.e-pdfviewer-ejdropdownlist").css("display","none"),this._isMagnificationHidden=!0)},_wireEvents:function(){this.model.toolbarSettings.templateId||(this._on(n("#"+this._id+"_txtpageNo"),"keypress",this._allowOnlyNumbers),this._on(n("#"+this._id+"_txtpageNo"),"keypress",this._onkeyPress),this._on(n("#"+this._id+"_txtpageNo"),"click ",this._onToolbarItemClick),this._on(n("#"+this._id+"_zoomSelection"),"change",this._zoomValChange),this._on(n("#"+this._id+"_toolbar_zoomSelection_container"),"click ",this._onToolbarItemClick));this._on(n("#"+this._id+"_toolbarContainer li,#"+this._id+"_toolbarContainer .e-pdfviewer-ejdropdownlist,#"+this._id+"_toolbarContainer .e-pdfviewer-tbpage"),"mouseover",this._showIconToolTip);this._on(n("#"+this._id+"_toolbarContainer li,#"+this._id+"_toolbarContainer .e-pdfviewer-ejdropdownlist,#"+this._id+"_toolbarContainer .e-pdfviewer-tbpage"),"mouseout",this._hideIconToolTip)},_unwireEvents:function(){this.model.toolbarSettings.templateId||(this._on(n("#"+this._id+"_txtpageNo"),"keypress",this._allowOnlyNumbers),this._off(n("#"+this._id+"_txtpageNo"),"keypress",this._onkeyPress),this._off(n("#"+this._id+"_txtpageNo"),"click ",this._onToolbarItemClick),this._off(n("#"+this._id+"_zoomSelection"),"change",this._zoomValChange),this._off(n("#"+this._id+"_toolbar_zoomSelection_container"),"click ",this._onToolbarItemClick));this._off(n("#"+this._id+"_toolbarContainer li,#"+this._id+"_toolbarContainer .e-pdfviewer-ejdropdownlist,#"+this._id+"_toolbarContainer .e-pdfviewer-tbpage"),"mouseover",this._showIconToolTip);this._off(n("#"+this._id+"_toolbarContainer li,#"+this._id+"_toolbarContainer .e-pdfviewer-ejdropdownlist,#"+this._id+"_toolbarContainer .e-pdfviewer-tbpage"),"mouseout",this._hideIconToolTip)},_onToolbarItemClick:function(t){t.target.id==this._id+"_txtpageNo"&&n("#"+this._id+"_txtpageNo").select();n("#"+this._id+"_rptTooltip").css("display","none")},_toolbarClick:function(t){var f=t.target,i=t.target,r,u;if(this._isToolbarClick)if(n("#"+this._id+"_rptTooltip").css("display","none"),n(i).hasClass("e-pdfviewer-toolbarli")&&(i=n(i).find("span")),n(i).hasClass("e-pdfviewer-print"))this._print();else if(n(i).hasClass("e-pdfviewer-gotofirst")&&!n(i).hasClass("e-pdfviewer-disabled"))this._gotoFirstPage();else if(n(i).hasClass("e-pdfviewer-gotolast")&&!n(i).hasClass("e-pdfviewer-disabled"))this._gotoLastPage();else if(n(i).hasClass("e-pdfviewer-gotonext")&&!n(i).hasClass("e-pdfviewer-disabled"))this._gotoNextPage();else if(n(i).hasClass("e-pdfviewer-gotoprevious")&&!n(i).hasClass("e-pdfviewer-disabled"))this._gotoPreviousPage();else if(n(i).hasClass("e-pdfviewer-zoomin"))this._applyLowerZoomIndex(this._fitType),this._zoomIn();else if(n(i).hasClass("e-pdfviewer-zoomout"))this._applyHigherZoomIndex(this._fitType),this._zoomOut();else if(n(i).hasClass("e-pdfviewer-fitpage")||n(i).hasClass("e-pdfviewer-fitwidth")){r=i;u=n(r).attr("id");switch(u){case"container_fitWidth":this._applyFitToWidth();break;case"container_fitPage":this._applyFitToPage()}}},_showToolbar:function(t){t?n("#"+this._id+"_toolbarContainer").css("display","block"):n("#"+this._id+"_toolbarContainer").css("display","none")},_initToolbar:function(){if(this._isToolbarClick=!1,!this.model.toolbarSettings.templateId&&!this._isDevice){var t=n("#"+this._id+"_toolbar_zoomSelection").data("ejDropDownList");t._selectItemByIndex(2);t.disable();n("#"+this._id+"_txtpageNo").attr("disabled","disabled");this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotofirst");this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotoprevious");this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotonext");this._toolbar.disableItemByID(this._id+"_pdfviewer_toolbar_gotolast")}},_enableToolbarItems:function(){this._isToolbarClick=!0;this.model.toolbarSettings.templateId||this._isDevice||(n("#"+this._id+"_txtpageNo").removeAttr("disabled"),n("#"+this._id+"_toolbar_zoomSelection").data("ejDropDownList").enable())},_showIconToolTip:function(t){n("#"+this._id+"_rptTooltip").css("display")=="none"&&this._showTooltipContent(t)},_hideIconToolTip:function(){n("#"+this._id+"_rptTooltip").css("display","none")},_viewpopupBlockNone:function(n){return n.css("display")=="block"?!1:!0},_showTooltipContent:function(t){var i=t.target,r,u,e,f,o,h,s;if(this.model.toolbarSettings.showTooltip&&!this._isDevice){if(e=!0,n(i).hasClass("e-pdfviewer-toolbarli")&&(i=n(i).find("span")),f=n(i).prev(),n(i).hasClass("e-pdfviewer-print"))r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-print")[0].getBoundingClientRect(),u=this._getTootipText("print");else if(n(i).hasClass("e-pdfviewer-gotofirst")||n(f).hasClass("e-pdfviewer-gotofirst"))r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-gotofirst")[0].getBoundingClientRect(),u=this._getTootipText("first");else if(n(i).hasClass("e-pdfviewer-gotolast")||n(f).hasClass("e-pdfviewer-gotolast"))r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-gotolast")[0].getBoundingClientRect(),u=this._getTootipText("last");else if(n(i).hasClass("e-pdfviewer-gotonext")||n(f).hasClass("e-pdfviewer-gotonext"))r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-gotonext")[0].getBoundingClientRect(),u=this._getTootipText("next");else if(n(i).hasClass("e-pdfviewer-gotoprevious")||n(f).hasClass("e-pdfviewer-gotoprevious"))r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-gotoprevious")[0].getBoundingClientRect(),u=this._getTootipText("previous");else if(n(i).hasClass("e-pdfviewer-zoomin")||n(f).hasClass("e-pdfviewer-zoomin"))r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-zoomin")[0].getBoundingClientRect(),u=this._getTootipText("zoomin");else if(n(i).hasClass("e-pdfviewer-zoomout")||n(f).hasClass("e-pdfviewer-zoomout"))r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-zoomout")[0].getBoundingClientRect(),u=this._getTootipText("zoomout");else if(n(i).hasClass("e-pdfviewer-tbpage")||n(i).hasClass("e-pdfviewer-pagenumber")||n(i).hasClass("e-pdfviewer-labelpageno"))r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-tbpage")[0].getBoundingClientRect(),u=this._getTootipText("pageIndex");else if(n(i).hasClass("e-pdfviewer-ejdropdownlist")||n(i).hasClass("e-dropdownlist")||n(i).hasClass("e-select")||n(i).hasClass("e-down-arrow"))r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-ejdropdownlist")[0].getBoundingClientRect(),u=this._getTootipText("zoom"),e=this._viewpopupBlockNone(n("#"+this._id+"_toolbar_zoomSelection_popup_list_wrapper"));else if(n(i).hasClass("e-pdfviewer-fitwidth")||n(i).hasClass("e-pdfviewer-fitpage")||n(f).hasClass("e-pdfviewer-fitwidth")||n(f).hasClass("e-pdfviewer-fitpage")){o=i;h=n(o).attr("id");switch(h){case"container_fitWidth":r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-fitwidth")[0].getBoundingClientRect();u=this._getTootipText("fittoWidth");break;case"container_fitPage":r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-fitpage")[0].getBoundingClientRect();u=this._getTootipText("fittopage");break;default:s=n(o).prev();n(s).hasClass("e-pdfviewer-fitwidth")?(r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-fitwidth")[0].getBoundingClientRect(),u=this._getTootipText("fittoWidth")):n(s).hasClass("e-pdfviewer-fitpage")&&(r=n("#"+this._id+"_toolbarContainer .e-pdfviewer-fitpage")[0].getBoundingClientRect(),u=this._getTootipText("fittopage"))}}u&&e&&(n("#"+this._id+"_rptTooltip_Header").html(u.header),n("#"+this._id+"_rptTooltip_Content").html(u.content),n("#"+this._id+"_rptTooltip").css({top:r.top+r.height+5,left:r.left+r.width/2,display:"block",position:"fixed"}))}},_getTootipText:function(n){var i=t.PdfViewer.Locale[this.model.locale]?t.PdfViewer.Locale[this.model.locale]:t.PdfViewer.Locale["default"],r="",u="";switch(n){case"first":r=i.toolbar.first.headerText;u=i.toolbar.first.contentText;break;case"previous":r=i.toolbar.previous.headerText;u=i.toolbar.previous.contentText;break;case"next":r=i.toolbar.next.headerText;u=i.toolbar.next.contentText;break;case"last":r=i.toolbar.last.headerText;u=i.toolbar.last.contentText;break;case"zoomin":r=i.toolbar.zoomIn.headerText;u=i.toolbar.zoomIn.contentText;break;case"zoomout":r=i.toolbar.zoomOut.headerText;u=i.toolbar.zoomOut.contentText;break;case"pageIndex":r=i.toolbar.pageIndex.headerText;u=i.toolbar.pageIndex.contentText;break;case"zoom":r=i.toolbar.zoom.headerText;u=i.toolbar.zoom.contentText;break;case"fittoWidth":r=i.toolbar.fittoWidth.headerText;u=i.toolbar.fittoWidth.contentText;break;case"fittopage":r=i.toolbar.fittopage.headerText;u=i.toolbar.fittopage.contentText}return{header:r,content:u}},_setInitialization:function(){this._jsondata;this._canvascount=0;this._fileName="";this._isToolbarClick=!1;this._pageModel=null;this._currentPage=1;this._zoomLevel=2;this._pageImageStream=null;this._pageimageList;this._pageWidth;this._pageHeight;this._pageLocation=[];this._scrollTriggered=!1;this._previousPage=1;this._totalPages;this._previousPosition;this._cummulativeHeight;this._backgroundPage=1;this._renderedCanvasList=[];this._pageContents=[];this._pagePrinted=!1;this._printingPage=1;this._printingTimer;this._previousZoom=1;this._renderPreviousPage=!1;this._pageSize;this._eventpreviouszoomvalue;this._eventzoomvalue;this._pdfFileName},_showViewerBlock:function(t){if(t){n("#"+this._id+"_viewBlockContainer").css("display","block");var i=n("#"+this._id+"_viewBlockContainer .e-pdfviewer-viewerblockcellcontent").find("table");this._selectparamToolItem(i.is("[isviewclick]"))}else n("#"+this._id+"_viewBlockContainer").css("display","none");this._isDevice&&n("#"+this._id+"_viewBlockContainer.e-pdfviewer-blockstyle").css("z-index",t?"10":"0")},_showNavigationIndicator:function(t){n("#"+this._id+"_viewerContainer").ejWaitingPopup({showOnInit:t});n("#"+this._id+"_viewerContainer_WaitingPopup").addClass("e-pdfviewer-waitingpopup")},_showloadingIndicator:function(t){t?(n("#"+this._id+"_loadingIndicator").css("display","block"),n("#"+this._id+"_pageviewOuterContainer").css("display","none")):(n("#"+this._id+"_loadingIndicator").css("display","none"),n("#"+this._id+"_pageviewOuterContainer").css("display","block"));n("#"+this._id+"_loadingIndicator").ejWaitingPopup({showOnInit:t});n("#"+this._id+"_loadingIndicator_WaitingPopup").addClass("e-pdfviewer-waitingpopup")},_viewerResize:function(){var t=this;this.resizeTO&&clearTimeout(this.resizeTO);this.resizeTO=setTimeout(function(){var e=t._isWidth?t.element[0].parentElement.style.width:t.element[0].style.width,o=t._isHeight?t.element[0].parentElement.style.height:t.element[0].style.height,i=n(t.element).height(),r=n(t.element).width(),u,f;o.indexOf("%")!=-1?(t._isPercentHeight=parseInt(o),u=t._isHeight?n(t.element).parent().height():i,i=t._isHeight?u:u/100*t._isPercentHeight):t.element[0].parentElement.clientHeight!=0&&t._isPercentHeight!=-1?i=t._isHeight?t.element[0].parentElement.clientHeight:t.element[0].parentElement.clientHeight/100*t._isPercentHeight:t._isHeight&&t.element[0].parentElement.clientHeight!=0&&(i=t.element[0].parentElement.clientHeight);t.element.height(i);e.indexOf("%")!=-1?(t._isPercentWidth=parseInt(e),f=t._isWidth?n(t.element).parent().width():r,r=t._isWidth?f:f/100*t._isPercentWidth):t.element[0].parentElement.clientWidth!=0&&t._isPercentWidth!=-1?r=t._isWidth?t.element[0].parentElement.clientWidth:t.element[0].parentElement.clientWidth/100*t._isPercentWidth:t._isWidth&&t.element[0].parentElement.clientWidth!=0&&(r=t.element[0].parentElement.clientWidth);t.element.width(r);t._setContainerSize();t._applyLeftPosition()},200)},_applyLeftPosition:function(){for(var t,i,n=1;n<=this._totalPages;n++)t=(this.element.width()-this._pageSize[n-1].PageWidth*this._zoomVal)/2,t<0&&(t=0),i=document.getElementById(this._id+"pageDiv_"+n),i.style.left=t+"px"},goToPage:function(n){this._gotoPageNo(n)},goToLastPage:function(){this._gotoLastPage()},goToFirstPage:function(){this._gotoFirstPage()},goToNextPage:function(){this._gotoNextPage()},goToPreviousPage:function(){this._gotoPreviousPage()},showPageNavigationTools:function(n){this._showPageNavigationControls(n)},showMagnificationTools:function(n){this._showZoomControl(n);this._showFittoPage(n)},showToolbar:function(n){this._showToolbar(n)},load:function(i){var u,r;if(this._fileName=i,this._initToolbar(),this._fileName)for(u=this._canvascount;u>=1;)n("#"+this._id+"pageDiv_"+u).remove(),u--;r={};r.viewerAction="GetPageModel";r.controlId=this._id;r.pageindex="1";r.isInitialLoading="true";r.newFileName=this._fileName;this._pdfService==t.PdfViewer.PdfService.Local?this._doAjaxPost("POST",this._actionUrl,JSON.stringify(r),"_getPageModel"):this._doAjaxPost("POST",this.model.serviceUrl,JSON.stringify({jsonResult:r}),"_getPageModel")},fitToPage:function(){this._applyFitToPage()},fitToWidth:function(){this._applyFitToWidth()},zoomIn:function(){this._applyLowerZoomIndex(this._fitType);this._zoomIn()},zoomOut:function(){this._applyHigherZoomIndex(this._fitType);this._zoomOut()},zoomTo:function(t){var i=parseInt(t)/100;this._zoomContainer(i,!1);n("#"+this._id+"_toolbar_zoomSelection_input").val(t+"%")}});t.PdfViewer.ToolbarItems={MagnificationTools:1,PageNavigationTools:2,All:3};t.PdfViewer.PdfService={Local:1,Remote:2};t.PdfViewer.Locale=t.PdfViewer.Locale||{};t.PdfViewer.Locale["default"]=t.PdfViewer.Locale["en-US"]={toolbar:{first:{headerText:"First",contentText:"Go to the first page of the PDF document."},previous:{headerText:"Previous",contentText:"Go to the previous page of the PDF document."},next:{headerText:"Next",contentText:"Go to the next page of the PDF document."},last:{headerText:"Last",contentText:"Go to the last page of the PDF document."},zoomIn:{headerText:"Zoom-In",contentText:"Zoom in to the PDF document."},zoomOut:{headerText:"Zoom-Out",contentText:"Zoom out of the PDF document."},pageIndex:{headerText:"Page Number",contentText:"Current page number to view."},zoom:{headerText:"Zoom",contentText:"Zoom in or out on the PDF document."},fittoWidth:{headerText:"Fit to Width",contentText:"Fit the PDF page to the width of the container."},fittopage:{headerText:"Fit to Page",contentText:"Fit the PDF page to the container."}}}})(jQuery,Syncfusion)});