/*!
*  filename: ej.pivotanalysis.base.min.js
*  version : 14.1.0.46
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min"],n):n()})(function(){(function($,ej,undefined){var colKeysCalcValues=[],rowKeysCalcValues=[],tableKeysCalcValues=[],gridMatrix=null,columnHeaders=null,valueArea=null,rowTotCalc=[],colTotCalc=[],tranposeEngine=[],tRowCnt=0,tColCnt=0,cellType="",sortedElements,filteredMembers,fieldMembers={},summaryTypes=[],locale="en-US";ej.PivotAnalysis={pivotEnginePopulate:function(n){var s=n.dataSource,k,e,a,tt,o,h,t,rt,y,ut,i,w,r;locale=n.locale;var f=s.columns,u=s.rows,l=s.filters,c=s.values,it=[],v=[];for(summaryTypes=[],e=0;e<c.length;e++)summaryTypes.push(c[e].summaryType!=null&&c[e].summaryType!=undefined?c[e].summaryType:ej.PivotAnalysis.SummaryType.Sum);if(s.data!=null)for(k=0;k<s.data.length;k++){list=s.data[k];var p={keys:[],uniqueName:"",value:null},d={keys:[],uniqueName:"",value:null},g={keys:[],uniqueName:"",value:null},b={keys:[],uniqueName:"",value:null},nt=!1;for(e=0;e<l.length;e++)if(t=this._getReflectedValue(list,l[e].fieldName,null),fieldMembers[l[e].fieldName]==undefined||fieldMembers[l[e].fieldName]==null?fieldMembers[l[e].fieldName]=[t]:$.inArray(t,fieldMembers[l[e].fieldName])==-1&&fieldMembers[l[e].fieldName].push(t),l[e].filterItems!=null&&l[e].filterItems!=undefined&&((l[e].filterItems.filterType==ej.PivotAnalysis.FilterType.Exclude||l[e].filterItems.filterType==null)&&$.inArray(t.toString(),l[e].filterItems.values)>=0||l[e].filterItems.filterType==ej.PivotAnalysis.FilterType.Include&&$.inArray(t.toString(),u[o].filterItems.values)<0)){nt=!0;break}for(a=0;a<c.length;a++)t="",c[a]!=undefined&&c[a]!=null&&(t=this._getReflectedValue(list,c[a].fieldName,c[a].format),fieldMembers[c[a].fieldName]==undefined||fieldMembers[c[a].fieldName]==null?fieldMembers[c[a].fieldName]=[t]:$.inArray(t,fieldMembers[c[a].fieldName])==-1&&fieldMembers[c[a].fieldName].push(t)),tt=t.toString().replace(/([AMPME~!@#$%^&*()_+=`{}\[\]\|\\:;'<>,.\/? ])+/g,""),tt=tt.replace(ej.globalize.preferredCulture(locale).numberFormat.currency.symbol,""),$.isNumeric(tt)?b.keys.push(t):b.keys.push(1);for(o=0;o<u.length;o++){if(t="",u[o]!=undefined&&u[o]!=null&&(t=this._getReflectedValue(list,u[o].fieldName,null),fieldMembers[u[o].fieldName]==undefined||fieldMembers[u[o].fieldName]==null?fieldMembers[u[o].fieldName]=[t]:$.inArray(t,fieldMembers[u[o].fieldName])==-1&&fieldMembers[u[o].fieldName].push(t),u[o].filterItems!=null&&u[o].filterItems!=undefined&&((u[o].filterItems.filterType==ej.PivotAnalysis.FilterType.Exclude||u[o].filterItems.filterType==null)&&$.inArray(t.toString(),u[o].filterItems.values)>=0||u[o].filterItems.filterType==ej.PivotAnalysis.FilterType.Include&&$.inArray(t.toString(),u[o].filterItems.values)<0))){nt=!0;break}d.keys.push(t);d.uniqueName+=d.uniqueName==""?t:"."+t;p.keys.push(t);p.uniqueName+=p.uniqueName==""?t:"."+t}for(h=0;h<f.length;h++){if(t="",f[h]!=undefined&&f[h]!=null&&(t=this._getReflectedValue(list,f[h].fieldName,null),fieldMembers[f[h].fieldName]==undefined||fieldMembers[f[h].fieldName]==null?fieldMembers[f[h].fieldName]=[t]:$.inArray(t,fieldMembers[f[h].fieldName])==-1&&fieldMembers[f[h].fieldName].push(t),f[h].filterItems!=null&&f[h].filterItems!=undefined&&((f[h].filterItems.filterType==ej.PivotAnalysis.FilterType.Exclude||f[h].filterItems.filterType==null)&&$.inArray(t.toString(),f[h].filterItems.values)>=0||f[h].filterItems.filterType==ej.PivotAnalysis.FilterType.Include&&$.inArray(t.toString(),f[h].filterItems.values)<0))){nt=!0;break}g.keys.push(t);g.uniqueName+=g.uniqueName==""?t:"."+t;p.keys.push(t);p.uniqueName+=p.uniqueName==""?t:"."+t}for(nt||(this._isMemberExist("row",d,$.extend(!0,{},b),s),this._isMemberExist("column",g,$.extend(!0,{},b),s),this._isMemberExist("calc",p,$.extend(!0,{},b),s)),jQuery.each(list,function(n){jQuery.inArray(n,v)==-1&&v.push(n)}),rt=[],y=0;y<v.length;y++)ut=$.grep(s.rows,function(n){return n.fieldName==v[y]}).length>0||$.grep(s.columns,function(n){return n.fieldName==v[y]}).length>0||$.grep(s.values,function(n){return n.fieldName==v[y]}).length>0||$.grep(s.filters,function(n){return n.fieldName==v[y]}).length>0,rt.push({id:v[y],name:v[y],isSelected:ut,spriteCssClass:""})}for(u.length>0&&(rowKeysCalcValues=this._sortHeaders(rowKeysCalcValues,u,0)),f.length>0&&(colKeysCalcValues=this._sortHeaders(colKeysCalcValues,f,0)),f.length>0&&this._insertTotalHeader(f,colKeysCalcValues),u.length>0?this._insertTotalHeader(u,rowKeysCalcValues):rowKeysCalcValues[0].keys[0]="Grand Total",tRowCnt=0,tColCnt=0,c.length>0&&this._calculateValues(s),colTotCalc=[],rowTotCalc=[],colKeysCalcValues=[],rowKeysCalcValues=[],tableKeysCalcValues=[],i=0;i<tRowCnt-1;i++)for(r=0;r<tColCnt-1;r++)tranposeEngine[r]==undefined&&(tranposeEngine[r]=[]),gridMatrix[i]!=undefined&&gridMatrix[i][r]!=undefined?tranposeEngine[r][i]={Index:r+","+i,CSS:gridMatrix[i][r].CSS,Value:typeof gridMatrix[i][r]=="string"||typeof gridMatrix[i][r]=="number"||typeof gridMatrix[i][r]=="object"?gridMatrix[i][r].Value==0?"":gridMatrix[i][r].Value==undefined?"":gridMatrix[i][r].Value:"",State:gridMatrix[i][r].State,RowSpan:gridMatrix[i][r].RowSpan!=undefined?gridMatrix[i][r].RowSpan:1,ColSpan:gridMatrix[i][r].ColSpan!=undefined?gridMatrix[i][r].ColSpan:1,Info:"",Span:"None",Expander:gridMatrix[i][r].Expander}:gridMatrix[i]!=undefined&&(tranposeEngine[r][i]={Index:r+","+i,CSS:"none",Value:"",State:0,RowSpan:1,ColSpan:1,Info:"",Span:"None",Expander:0});for(gridMatrix=[],i=0;i<tColCnt-1;i++){if(u.length=u.length==0?1:u.length,i<u.length)for(w=0;w<f.length+1;w++)it.push({Index:i+","+w,CSS:"none",Value:"",State:0,ColSpan:i==0&&w==0?u.length:1,RowSpan:i==0&&w==0?f.length+1:1,Info:"",Span:"None",Expander:0});for(r=0;r<tRowCnt-1;r++)tranposeEngine[i]==undefined||tranposeEngine[i][r]==undefined||r<f.length+1&&i<u.length||it.push(tranposeEngine[i][r])}return tranposeEngine=[],s.rows[0]==undefined&&(s.rows.length=0),{json:it,report:s,treeviewData:rt}},getMembers:function(n){return fieldMembers[n]},_sortHeaders:function(n,t,i){for(var r=[],e=[],u=0,f=t[i].sortOrder!=null&&t[i].sortOrder==ej.PivotAnalysis.SortOrder.Descending?$.Enumerable.From(n).OrderByDescending("$.keys["+i+"]").ToArray():$.Enumerable.From(n).OrderBy("$.keys["+i+"]").ToArray(),o;u<f.length;)o=f[u].keys[i],r=$.grep(f,function(n){return n.keys[i]==o}),r.length>1&&i+1<f[u].keys.length&&(r=this._sortHeaders(r,t,i+1)),e=e.concat(r),u+=r.length;return e},_getReflectedValue:function(n,t,i){var r=$(n).prop(t);switch(i){case"decimal":r=parseFloat(ej.widgetBase.formatting("{0:D2}",r,locale));break;case"percentage":r=ej.widgetBase.formatting("{0:P}",r,locale);break;case"number":r=ej.widgetBase.formatting("{0:N}",r,locale);break;case"currency":r=ej.widgetBase.formatting("{0:C2}",r,locale);break;case"date":r=new Date((Number(r)-2)*864e5+new Date("01/01/1900").getTime());this._isDateTime(r)&&(r=ej.widgetBase.formatting("{0:MM/dd/yyyy}",r,"en-US"));break;case"scientific":r=r.toExponential(2).replace("e","E");break;case"accounting":r=this._toAccounting(r,"{0:C2}",locale);break;case"time":r=new Date((Number(r)-2)*864e5+new Date("01/01/1900").getTime());this._isDateTime(r)&&(r=ej.widgetBase.formatting("{0:h:mm:ss tt}",r,locale));break;case"fraction":r=this._toFraction(r);r="numerator"in r?r.integer+" "+r.numerator+"/"+r.denominator:r.integer;break;default:r}return r},_isDateTime:function(n){return Object.prototype.toString.call(n)==="[object Date]"&&!isNaN(n.valueOf())},_toAccounting:function(n,t,i){var s=ej.preferredCulture(i).numberFormat,u,f,r=s.currency.symbol,e,o;return val=ej.widgetBase.formatting(t,n),e=val.replace(r,""),o=val.indexOf(r),!o||n<0&&o===1?(u=r,f=Number(n)?e:"-"):(u=Number(n)?e:"-",f=r),u+"   "+f},_toFraction:function(n){if(this._isNumber(n)){var r=n.toString(),e=r.split(".")[0],t=r.split(".")[1];if(!t)return{integer:n};var i=(+t).toString(),u=this._getPlaceValue(t,i),f=this._getGCD(i,u);return{integer:e,numerator:Number(i)/f,denominator:Number(u)/f}}return null},_isNumber:function(n){return n-parseFloat(n)>=0},_getGCD:function(n,t){return(n=Number(n),t=Number(t),!t)?n:this._getGCD(t,n%t)},_getPlaceValue:function(n,t){var i=n.indexOf(t)+t.length;return"1"+Array(i+1).join("0")},_isMemberExist:function(n,t,i,r){var u,s,e,f,o;switch(n){case"row":for(s=!1,rowKeysCalcValues.length==0&&rowKeysCalcValues.push(t),e=0;e<rowKeysCalcValues.length;e++)if(t.uniqueName==rowKeysCalcValues[e].uniqueName){s=!0;u=e;break}if(s)for(f=0;f<i.keys.length;f++)if(rowKeysCalcValues[u].value==null){rowKeysCalcValues[u].value=i;break}else rowKeysCalcValues[u].value.keys[f]+=i.keys[f];else rowKeysCalcValues.push(t);break;case"column":for(s=!1,colKeysCalcValues.length==0&&colKeysCalcValues.push(t),e=0;e<colKeysCalcValues.length;e++)if(t.uniqueName==colKeysCalcValues[e].uniqueName){s=!0;u=e;break}if(s)for(f=0;f<i.keys.length;f++)if(colKeysCalcValues[u].value==null){colKeysCalcValues[u].value=i;break}else colKeysCalcValues[u].value.keys[f]+=i.keys[f];else colKeysCalcValues.push(t);break;case"calc":for(s=!1,tableKeysCalcValues.length==0&&tableKeysCalcValues.push(t),e=0;e<tableKeysCalcValues.length;e++)if(t.uniqueName==tableKeysCalcValues[e].uniqueName){s=!0;u=e;break}if(s)for(f=0;f<i.keys.length;f++)if(tableKeysCalcValues[u].value==null){for(tableKeysCalcValues[u].value=i,tableKeysCalcValues[u].value.count=1,o=0;o<i.keys.length;o++)summaryTypes[o]==ej.PivotAnalysis.SummaryType.Count&&(tableKeysCalcValues[u].value.keys[o]=tableKeysCalcValues[u].value.count);break}else tableKeysCalcValues[u].value.count++,tableKeysCalcValues[u].value.keys[f]=this._getSummaryValue(tableKeysCalcValues[u].value.keys[f],i.keys[f],tableKeysCalcValues[u].value.count,summaryTypes[f],r.values[f].format);else for(tableKeysCalcValues.push(t),tableKeysCalcValues[tableKeysCalcValues.length-1].value=i,o=0;o<i.keys.length;o++)summaryTypes[o]==ej.PivotAnalysis.SummaryType.Count&&(tableKeysCalcValues[tableKeysCalcValues.length-1].value.keys[o]=1),tableKeysCalcValues[tableKeysCalcValues.length-1].value.count=1}},_getSummaryValue:function(oldValue,newValue,count,type,format){var time;switch(format){case"date":oldValue=ej.parseDate(oldValue,"MM/dd/yyyy","en-US")!=null?this._dateToInt(oldValue):oldValue;newValue=ej.parseDate(newValue,"MM/dd/yyyy","en-US")!=null?this._dateToInt(newValue):newValue;break;case"percentage":oldValue=oldValue!=0?ej.globalize.parseFloat(oldValue,locale)/100:oldValue;newValue=ej.globalize.parseFloat(newValue,locale)/100;break;case"currency":case"accounting":oldValue=oldValue!=0?ej.globalize.parseFloat(ej.globalize.format(oldValue,"c",locale),locale):oldValue;newValue=ej.globalize.parseFloat(ej.globalize.format(newValue,"c",locale),locale);break;case"number":oldValue=oldValue!=0?ej.globalize.parseFloat(oldValue,locale):oldValue;newValue=ej.globalize.parseFloat(newValue,locale);break;case"scientific":oldValue=oldValue!=0?parseFloat(oldValue):oldValue;newValue=parseFloat(newValue);break;case"time":this._isNumber(oldValue)||(time=oldValue.toString().split(":"),time=new Date("1900",time[0],time[1],time[2].split(" ")[0]).toString(),oldValue=this._dateToInt(time));this._isNumber(newValue)||(time=newValue.toString().split(":"),time=new Date("1900",time[0],time[1],time[2].split(" ")[0]).toString(),newValue=this._dateToInt(time));break;case"fraction":var temp1=parseFloat(oldValue.toString().split(" ")[0]),temp2=eval(oldValue.toString().split(" ")[1])!=undefined?parseFloat(eval(oldValue.toString().split(" ")[1])):parseFloat(0),temp3=parseFloat(newValue.toString().split(" ")[0]),temp4=eval(newValue.toString().split(" ")[1])!=undefined?parseFloat(eval(newValue.toString().split(" ")[1])):parseFloat(0);oldValue=oldValue!=0?temp1+temp2:oldValue;newValue=temp3+temp4}switch(type){case ej.PivotAnalysis.SummaryType.Sum:oldValue+=newValue;break;case ej.PivotAnalysis.SummaryType.Average:oldValue=(oldValue*(count-1)+newValue)/count;Math.floor(oldValue)!=oldValue&&(oldValue=Number(oldValue.toFixed(2)));break;case ej.PivotAnalysis.SummaryType.Min:oldValue=count==1?newValue:Math.min(oldValue,newValue);break;case ej.PivotAnalysis.SummaryType.Max:oldValue=count==1?newValue:Math.max(oldValue,newValue);break;case ej.PivotAnalysis.SummaryType.Count:oldValue=count}switch(format){case"decimal":oldValue=parseFloat(ej.widgetBase.formatting("{0:D2}",oldValue,locale));break;case"percentage":oldValue=ej.widgetBase.formatting("{0:P}",oldValue,locale);break;case"number":oldValue=ej.widgetBase.formatting("{0:N}",oldValue,locale);break;case"date":oldValue=new Date((Number(oldValue)-2)*864e5+new Date("01/01/1900").getTime());this._isDateTime(oldValue)&&(oldValue=ej.widgetBase.formatting("{0:MM/dd/yyyy}",oldValue,"en-US"));break;case"currency":oldValue=ej.widgetBase.formatting("{0:C2}",oldValue,locale);break;case"scientific":oldValue=oldValue.toExponential(2).replace("e","E");break;case"accounting":oldValue=this._toAccounting(oldValue,"{0:C2}",locale);break;case"time":oldValue=new Date((Number(oldValue)-2)*864e5+new Date("01/01/1900").getTime());this._isDateTime(oldValue)&&(oldValue=ej.widgetBase.formatting("{0:h:mm:ss tt}",oldValue,locale));break;case"fraction":oldValue=this._toFraction(oldValue);oldValue="numerator"in oldValue?oldValue.integer+" "+oldValue.numerator+"/"+oldValue.denominator:oldValue.integer;break;default:oldValue}return oldValue},_dateToInt:function(n){var t=new Date("01/01/1900"),i=this._isDateTime(n)?n:new Date(n),r=i.getTime()-t.getTime();return r/864e5+2},_insertTotalHeader:function(n,t){var s,r,o,u,h,i;if(n.length<=1){t.push({cellType:"RGTot",keys:["Grand Total"],tot:"sub"});return}for(s=-1,r=n.length-2;r>=0;r--)if(s++,o=t.length,o>0){u=t[0].uniqueName.split(".");h=t[0].keys[s];u=u.slice(0,r+1).join(".");var e="",f=0,c="";for(i=1;i<=o;i++)t[i]!=undefined?(e=t[i].uniqueName.split("."),e=e.slice(0,r+1).join("."),c=t[i].keys[r+1]):e=undefined,e!=undefined&&e.indexOf("Total")==-1?u!=undefined&&e!=u&&(t.splice(i,0,{keys:[u.split(".")[r]+" Total"],cellType:"SubTot",uniqueName:u,level:r}),t[f].span==undefined&&(t[f].span=[]),t[f].span[r]=i-f,i++,o++,u=e,f=i,h=c):u!=undefined&&(t.splice(i,0,{keys:[u.split(".")[r]+" Total"],cellType:"SubTot:",uniqueName:u,level:r}),t[f].span==undefined&&(t[f].span=[]),t[f].span[r]=i-f,i++,o++,u=e,f=i,h=c)}t.push({cellType:"RGTot",keys:["Grand Total"]})},_isPreviousLevelEqual:function(n,t,i,r){for(var u=r-1;u>=0;u--)return n[t].keys[u]!=n[i].keys[u]?!0:!1},_calculateValues:function(n){var t=rowKeysCalcValues.length+1,u=colKeysCalcValues.length==0?0:colKeysCalcValues.length*n.values.length+1,i,r;gridMatrix=new Array(t+n.rows.length+1);this._populateRowHeaders(n,t+n.rows.length+1,n.rows.length==0?1:n.rows.length);i=n.columns.length+1;r=u+(n.rows.length==0?1:n.rows.length);this._populateColumnHeaders(n,i,r);this._populateCalcTable(n);tRowCnt=t+i;tColCnt=r},_populateRowHeaders:function(n,t,i){var u,l,c,r,h;if(rowKeysCalcValues.length!=0){for(u=n.columns.length+1,gridMatrix=[],l=n.rows.length,c="",r=0;r<rowKeysCalcValues.length;r++){c=rowKeysCalcValues[r];var e=0,f=0,o=0,s=0;if(rowKeysCalcValues[r].keys!=undefined&&rowKeysCalcValues[r].keys.length!=0)for(gridMatrix[u]=new Array(i),s=rowKeysCalcValues[r].keys.length,kCnt=0;kCnt<s;kCnt++)rowKeysCalcValues[r].cellType!=undefined?rowKeysCalcValues[r].cellType.indexOf("SubTot")>-1?(f=rowKeysCalcValues[r].level+e,o=i-rowKeysCalcValues[r].level,cellType="summary"):(cellType="summary",f=e,o=n.rows.length):(cellType="rowheader",f=e,o=1),h=s>1?s-kCnt>1?1:0:0,gridMatrix[u][f]={Index:f+","+u,CSS:cellType,Value:rowKeysCalcValues[r].keys[kCnt],State:h,RowSpan:rowKeysCalcValues[r].span!=undefined?rowKeysCalcValues[r].span[kCnt]:1,ColSpan:o,Info:"",Span:"None",Expander:h},e++;u++}cellType=""}},_populateColumnHeaders:function(n,t){var i,e,u;if(colKeysCalcValues.length!=0){var o=tempCnt=n.rows.length==0?1:n.rows.length,f=n.values.length,s=n.columns.length,h="",r=colKLen=0;for(i=0;i<colKeysCalcValues.length;i++){for(r=0,tempRIndx=0,tempRSpan=0,tempCSpan=0,h=colKeysCalcValues[i].keys,gridMatrix[r]==undefined&&(gridMatrix[r]=[]),colKLen=colKeysCalcValues[i].keys.length,kCnt=0;kCnt<colKLen;kCnt++){for(gridMatrix[r]==undefined&&(gridMatrix[r]=[]),colKeysCalcValues[i].cellType!=undefined?colKeysCalcValues[i].cellType.indexOf("SubTot")>-1?(tempRIndx=colKeysCalcValues[i].level+r,tempRSpan=t-colKeysCalcValues[i].level-1,cellType="summary"):(tempRIndx=r,tempRSpan=n.columns.length,cellType="summary"):(tempRIndx=r,tempRSpan=1,cellType="colheader"),e=colKLen>1?colKLen-kCnt>1?1:0:0,u=0;u<f;u++)gridMatrix[tempRIndx][f*i+u+tempCnt]={Index:o+","+tempRIndx,CSS:cellType,Value:colKeysCalcValues[i].keys[kCnt],State:e,ColSpan:(colKeysCalcValues[i].span!=undefined?colKeysCalcValues[i].span[kCnt]==undefined?1:colKeysCalcValues[i].span[kCnt]:1)*f,RowSpan:tempRSpan,Info:"",Span:"None",Expander:e};r++}for(u=0;u<f;u++)gridMatrix[r]==undefined&&(gridMatrix[r]=[]),gridMatrix[s][f*i+u+tempCnt]={Index:f*i+u+tempCnt+","+r,CSS:cellType+" calc",Value:n.values[u].fieldName,State:0,ColSpan:1,RowSpan:1,Info:"",Span:"None",Expander:0};o++}cellType=""}},_populateCalcTable:function(n){for(var d,v,f,s,w,i,h,l,t=[],e=n.values.length,u=n.rows.length==0?1:n.rows.length,o=n.columns.length+1,b=0,y=!1,a=0,k=o,c,p=!1,r=0;r<rowKeysCalcValues.length;r++){for(colTotCalc=[],c=u,y=!0,gridMatrix[r+o]==undefined&&(gridMatrix[r+o]=[]),rowTotCalc[a]=[],cCnt=0;cCnt<colKeysCalcValues.length;cCnt++){if(t=[],cellType="value",n.columns.length>0&&n.rows.length>0?$.grep(tableKeysCalcValues,function(n){if(n.uniqueName==rowKeysCalcValues[r].uniqueName+"."+colKeysCalcValues[cCnt].uniqueName)for(i=0;i<n.value.keys.length;i++)t.push(n.value.keys[i]);return}):n.rows.length==0?$.grep(tableKeysCalcValues,function(n){if(n.uniqueName==colKeysCalcValues[cCnt].uniqueName)for(i=0;i<n.value.keys.length;i++)t.push(n.value.keys[i]);return}):$.grep(tableKeysCalcValues,function(n){if(n.uniqueName==rowKeysCalcValues[r].uniqueName)for(i=0;i<n.value.keys.length;i++)t.push(n.value.keys[i]);return}),colKeysCalcValues[cCnt].cellType!=undefined&&(colKeysCalcValues[cCnt].cellType.indexOf("SubTot")>-1||colKeysCalcValues[cCnt].cellType.indexOf("RGTot")>-1)){for(t=[],i=0;i<e;i++)for(h=0,f=0,s=c;s<=cCnt*e+u;s++)gridMatrix[r+o]!=undefined&&gridMatrix[r+o][c+h*e+i]!=undefined&&gridMatrix[r+o][c+h*e+i].Value!=undefined&&(t[i]==undefined&&(t[i]=0),f++,t[i]=this._getSummaryValue(t[i],gridMatrix[r+o][c+h*e+i].Value,f,summaryTypes[i]=="count"?"sum":summaryTypes[i],n.values[i].format)),h++;b=0;c=(cCnt+1)*e+u;t!=0&&colTotCalc.push({uniqueName:colKeysCalcValues[cCnt].uniqueName,level:colKeysCalcValues[cCnt].level,value:t});colKeysCalcValues[cCnt-1]!=undefined&&colKeysCalcValues[cCnt-1].cellType!=undefined&&colKeysCalcValues[cCnt-1].cellType.indexOf("SubTot")>-1&&colKeysCalcValues[cCnt-1].cellType.indexOf("RGTot")==-1&&(v=$.Enumerable.From(colTotCalc).Where(function(n){return n!=undefined&&n.uniqueName!=undefined&&colKeysCalcValues[cCnt].uniqueName!=undefined&&n.level!=undefined&&colKeysCalcValues[cCnt].level!=undefined&&n.uniqueName.indexOf(colKeysCalcValues[cCnt].uniqueName)===0&&colKeysCalcValues[cCnt].level+1==n.level}).Select(function(n){for(var i=0;i<n.value.length;i++)t[i]==undefined&&(t[i]=0),t[i]+=n.value[i];return t}).ToArray(),t!=0&&colTotCalc.push({uniqueName:colKeysCalcValues[cCnt].uniqueName,level:colKeysCalcValues[cCnt].level,value:t}));cellType="summary value"}if(colKeysCalcValues[cCnt].cellType!=undefined&&colKeysCalcValues[cCnt].cellType.indexOf("RGTot")>-1&&t==0&&(t=[],f=0,v=$.Enumerable.From(colTotCalc).Where(function(n){return n!=undefined&&n!=undefined&&n.level!=undefined&&n.level==0}).Select(function(i){for(var r=0;r<i.value.length;r++)t[r]==undefined&&(t[r]=0),f++,t[r]=ej.PivotAnalysis._getSummaryValue(t[r],i.value[r],f,summaryTypes[r]=="count"?"sum":summaryTypes[r],n.values[r].format);return t}).ToArray(),cellType="summary value"),rowKeysCalcValues[r].cellType!=undefined&&(rowKeysCalcValues[r].cellType.indexOf("SubTot")>-1||rowKeysCalcValues[r].cellType.indexOf("RGTot")>-1)){for(t=[],d=rowKeysCalcValues[r].uniqueName,rowKeysCalcValues[r-1]!=undefined&&rowKeysCalcValues[r-1].cellType!=undefined&&rowKeysCalcValues[r-1].cellType.indexOf("SubTot")>-1&&rowKeysCalcValues[r].cellType.indexOf("RGTot")==-1&&(f=0,v=$.Enumerable.From(rowTotCalc).Where(function(n){return n[0]!=undefined&&n[0].uniqueName!=undefined&&rowKeysCalcValues[r].uniqueName!=undefined&&n[0].level!=undefined&&rowKeysCalcValues[r].level!=undefined&&n[0].uniqueName.indexOf(rowKeysCalcValues[r].uniqueName)===0&&rowKeysCalcValues[r].level+1==n[0].level}).Select(function(i){if(i[u+cCnt].length>0){f++;for(var r=0;r<i[u+cCnt].length;r++)t[r]==undefined&&(t[r]=0),t[r]=ej.PivotAnalysis._getSummaryValue(t[r],i[u+cCnt][r],f,summaryTypes[r]=="count"?"sum":summaryTypes[r],n.values[r].format)}return t}).ToArray()),rowKeysCalcValues[r].cellType!=undefined&&rowKeysCalcValues[r].cellType.indexOf("RGTot")>-1&&(f=0,v=$.Enumerable.From(rowTotCalc).Where(function(n){return n!=undefined&&n[0]!=undefined&&n[0].level!=undefined&&n[0].level==0}).Select(function(i){if(i[u+cCnt].length>0){f++;for(var r=0;r<i[u+cCnt].length;r++)t[r]==undefined&&(t[r]=0),t[r]=ej.PivotAnalysis._getSummaryValue(t[r],i[u+cCnt][r],f,summaryTypes[r]=="count"?"sum":summaryTypes[r],n.values[r].format)}return t}).ToArray()),f=1,s=k;s<=r+o;s++){for(w=!1,i=0;i<e;i++)h=0,gridMatrix[s]!=undefined&&gridMatrix[s][u+cCnt*e+i]!=undefined&&gridMatrix[s][u+cCnt*e+i].Value!=undefined&&(t[i]==undefined&&(t[i]=0),w=!0,t[i]=this._getSummaryValue(t[i],gridMatrix[s][u+cCnt*e+i].Value,f,summaryTypes[i]=="count"?"sum":summaryTypes[i],n.values[i].format)),h++;w&&f++}b=0;p=!0;y&&(rowTotCalc[a][0]={uniqueName:rowKeysCalcValues[r].uniqueName,level:rowKeysCalcValues[r].level},y=!1);rowTotCalc[a][u+cCnt]=t;cellType="summary value"}for(l=0;l<e;l++)gridMatrix[o+r][e*cCnt+l+u]=t!=undefined&&t.length!=undefined?{Index:e*cCnt+l+u+","+o+r,CSS:cellType,Value:t[l],State:0,ColSpan:1,RowSpan:1,Info:"",Span:"None",Expander:0}:0}p&&(a++,k=r+o+1,p=!1)}return gridMatrix}};ej.PivotAnalysis.SortOrder={Ascending:"ascending",Descending:"descending"};ej.PivotAnalysis.FilterType={Exclude:"exclude",Include:"include"};ej.PivotAnalysis.SummaryType={Sum:"sum",Average:"average",Count:"count",Min:"min",Max:"max"}})(jQuery,Syncfusion)});
