/*!
*  filename: ej.widget.angular.min.js
*  version : 14.1.0.46
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["angular","./ej.core.min"],n):n()})(function(){(function(n,t,i,r,u){"use strict";var o=r.module("ejangular",[]),f,s,h,c,e,l;t.module=o;f={firstCap:function(n){return n.charAt(0).toUpperCase()+n.slice(1)},generatePropMap:function(n,i,r,u){var o=i||{},s,e;u?u+=".":u="";r=r||"";for(e in n)s=r+f.firstCap(e.toLowerCase()),t.isPlainObject(n[e])&&f.generatePropMap(n[e],o,s,u+e),o[s]=u+e;return o},getModel:function(i,r,u,e,o,s,h){var w={},a,c,nt=r.$attr||r,k=!i,v,y,d,l,b,p,tt,it,g;i=i||(r===nt?{}:nt);h=h||"";for(l in nt)if(v=!0,y=d=null,k||l[0]==="e"&&/[A-Z]/.test(l[1])){if(c=r[l]||"",k||(l=l.slice(1)),typeof c=="object"){if(b=k?i[l]||l:l,c instanceof Array)for(p=0;p<c.length;p++)c[p]=f.getModel(null,c[p],u,e,o,s,h+b+"["+p+"]");else{tt={};for(it in c)(a=c.$attr[it],a)&&(tt[a]=f.getModel(null,c[it],u,e,o,s,h+b+"."+a));c=tt;a=t.getObject(b,w);a&&n.extend(!0,a,c);continue}t.createObject(b,c,w);continue}if(a=i[l]||l,v=!isNaN(c)||/^['"].+['"]$/.test(c),v===!1&&(v=c.indexOf("["),v===-1?v=!(c.split(".")[0]in u):(g=f.buildProperty(u,c),v=!g.available,v||(y=g.getter,d=g.setter))),v===!0){t.createObject(a,f.processData(c),w);continue}e.push({key:c,value:h+a});y=y||t.getObject;d=d||t.createObject;c=k||o.indexOf(a)===-1||s&&l[0]==="V"&&l==="Value"?y(c,u):f.addTwoWays(c,u,y(c,u));t.createObject(a,c,w)}return w},buildProperty:function(n,i){var r=new Function("prop","instance","with (instance) { \nreturn "+i.replace(/^([^\[.]+)/,"instance['$1']")+"\n}"),u=new Function("prop","val","instance","with (instance) {"+i.replace(/^([^\[.]+)/,"instance['$1']")+" = val;\n}");return"$$ejProperties"in n||(n.$$ejProperties={}),n.$$ejProperties[i]={getter:r,setter:u},{available:!t.isNullOrUndefined(r(i,n)),getter:r,setter:u}},addTwoWays:function(n,i,r){var e=t.createObject;return"$$ejProperties"in i&&n in i.$$ejProperties&&(e=i.$$ejProperties[n].setter),function(t){if(t===u)return r;r=t;e(n,r,i);f.applyScope(i)}},valReplace:/^'(.+)'$|^"(.+)"$/g,processData:function(n){var t=n.replace(f.valReplace,"$1$2");return t==="true"?!0:t==="false"?!1:t!==n?t:(t=+t,t+""===n?t:n)},addWatches:function(n,i,r,u){for(var o,s,f,e=0;e<i.length;e++)o="$watch",s=t.getObject,f=i[e].key,"$$ejProperties"in n&&f in n.$$ejProperties&&(s=n.$$ejProperties[f].getter),s(f,n)instanceof Array&&(o="$watchCollection"),n[o](f,t.proxy(u,n,{control:r,watch:i[e]}))},raise:function(n,i,r){if(i!==r){var u=t.getObject(n.watch.value,n.control.model);(typeof u=="function"&&(u=u()),(u!==i||u instanceof Array)&&(u!==r||!(u instanceof Array)))&&(n.control.observables.indexOf(n.watch.value)===-1||n.control.type==="editor"&&n.watch.value==="value"||(i=f.addTwoWays(n.watch.key,this,i)),n.control.option(n.watch.value,i,i instanceof Array))}},angToEjProp:function(n,t){for(var i in t)if(t[i]===n)return i},modelChange:function(n,i){var r,u,e;i&&(r=t.getObject,u=t.createObject,"$$ejProperties"in n&&i in n.$$ejProperties&&(e=n.$$ejProperties[i],r=e.getter,u=e.setter),this.option("_change",function(t){t.value!==r(i,n)&&(u(i,t.value,n),f.applyScope(n))}))},getDirectiveName:function(n){if(n.length<4)return"";var t=n[2]==="m"?4:3;return n.slice(0,t)+n.slice(t).toLowerCase()},applyScope:function(n){setTimeout(function(){n.$digest()},0)},loadTags:function(n,t){var e=n,u,o,i,r;if(e)return e;for(e={},i=0;i<t.length;i++){for(u=t[i].attr||[],o={},r=0;r<u.length;r++)typeof u[r]=="object"?o["e-tag"]=f.loadTags(null,u[r]):o[u[r].toLowerCase().replace(/\./g,"-")]=u[r];e["e-"+t[i].tag.toLowerCase().replace(/\./g,"-")]={field:t[i].tag,attr:o,content:t[i].content,singular:(t[i].singular||t[i].tag.replace(/s$/,"")).replace(/\./g,"-")}}return e},getTagValues:function(t,i){var h=n(i).children(),e={$attr:{}},o,l,a;if(h.length===0)return e;for(o=0;o<h.length;o++){var s=n(h.get(o)),c,u=s.prop("tagName").toLowerCase(),r=t[u];if(!r){if(u=s[0].attributes[0],!u)continue;if(u=u.nodeName,r=t[u],!r)continue}l="e-"+r.singular;c=s.children(l+",["+l+"]");a=c.toArray().map(function(t){var i=f.readAttributes(t,r.attr),u,e;return r.content?(u=t.innerHTML,u.length&&(i[r.content]=t.innerHTML,i.$attr[r.content]=r.content)):r.attr["e-tag"]&&(e=f.getTagValues(r.attr["e-tag"],t),n.extend(!0,i||{},e)),i}).filter(function(n){return n});c.remove();s.remove();a.length&&(f.createAndAddAttr(r.field,a,e),e.$attr[r.field.toLowerCase().replace(/\..+/g,"")]=r.field.replace(/\..+/g,""))}return e},readAttributes:function(n,t){for(var e,r=n.attributes,i,f={},o={},u=0;u<r.length;u++)i=r[u].nodeName.replace(/^e-/i,"").toLowerCase(),i=t[i]||i,e=i.toLowerCase().replace(/\.([a-z]?)/g,function(n,t){return t.toUpperCase()}),f[e]=r[u].value||r[u].nodeValue,o[e]=i;return r.length&&(f.$attr=o),f},childRaise:function(n,i,r){var e,u;i!==r&&(e=t.getArrayObject(n.watch.value,n.control.model),e!==i||e instanceof Array)&&(t.setArrayObject(n.watch.value,i,n.control.model),u=f.parseFnAndIndex(n.watch.value),n.control[u[0]]&&n.control[u[0]](u[1],u[2],i,r))},parseFnAndIndex:function(n){for(var r="",e=n.lastIndexOf("]"),i=f.getAllFnIndices(n,[]),u={},t=0;t<i.length;t++)r+="_"+i[t].prop,u[i[t].prop]=i[t].index;return[r.replace(/\./g,"_"),u,n.slice(e+1)]},getAllFnIndices:function(n,t){var i=n.indexOf("["),r;return i===-1?null:(r=n.indexOf("]"),t.push({index:parseInt(n.substring(i+1,r),10),prop:n.substring(0,i)}),f.getAllFnIndices(n.slice(r+1),t),t)},addChildTwoway:function(n,i,r){for(var o={},e=t.createObject,u=0;u<i.length;u++)o[i[u].value]=i[u].key;n._notifyArrayChange=function(n,i){var u=o[n];u&&("$$ejProperties"in r&&u in r.$$ejProperties&&(e=r.$$ejProperties[u].setter),e(u,i,r),f.applyScope(r));e=t.createObject}},refreshTemplate:function(t,i,r){var e=n(t).find(".ej-angular-template"),u,f;for(u in r){if(f=e.filter("."+r[u].key),!f.length){r[u].scope.$destroy();delete r[u];continue}i(f.not(".ng-scope"))(r[u].scope)}},iterateAndGetModel:function(n,t,i,r){var s,o,e,u;if(n instanceof Array)for(e=0;e<n.length;e++)n[e]=f.getModel(null,n[e],i,t,[],!1,(r.endsWith(".")?r.slice(0,-1):r)+"["+e+"]");else for(u in n)u.slice(0,1)!=="$"&&(o=n.$attr&&n.$attr[u]?n.$attr[u]:u,s=f.iterateAndGetModel(n[u],t,i,r+o+"."),delete n[u],n[o]=s);return n},createAndAddAttr:function(n,i,r){for(var o=n.split("."),s=r||window,u=s,f,h=o.length,e=0;e<h;e++)f=o[e].toLowerCase(),e+1==h?(f in u||!u.$attr||(u.$attr[f]=o[e]),u[f]=t.isNullOrUndefined(i)?{$attr:{}}:i):t.isNullOrUndefined(u[f])&&(u.$attr&&(u.$attr[f]=o[e]),u[f]={$attr:{}}),u=u[f];return s},destroyWidget:function(n){var t,i;n.element.off(name+"refresh");n.destroy();t=n["tmpl.$newscope"]||{};for(i in t)t[i].scope.$destroy(),delete t[i];n=u}};t.getArrayObject=function(n,i){return n=n.replace(/\[([0-9]+)]/g,".$1."),t.getObject(n,i)};t.setArrayObject=function(n,i,r){return n=n.replace(/\[([0-9]+)]/g,".$1."),t.createObject(n,i,r)};s={transclude:{transclude:!0,template:function(){return"<div ng-transclude><\/div>"}},defaults:{terminal:!0}};h=function(i,r){c[i]=f.generatePropMap(r.defaults);r.observables=r.observables||[];r._notifyArrayChange=function(){};var u=n.extend({},s[r.type]||s.defaults,r.angular);o.directive(f.getDirectiveName(i),["$compile","$timeout",function(e,o){return n.extend({restrict:"CEA",compile:function(s){if(u.require&&u.require.length){var h=s.attr("ng-model"),l=s.attr("e-value"),a=s.attr("ng-model-options");if((!h||!l)&&(h||l))return l&&s.attr("ng-model",l),h&&s.attr("e-value",h),a||s.attr("ng-model-options","{updateOn: ' '}"),function(n,t){e(t)(n)};s.addClass("ng-pristine").addClass("ng-valid")}return{pre:function(n,t,i,r){if(r&&r.length&&r[0]){var e=r[0],f=r[1],u=r[2];f&&f.$addControl(e);u&&!t.attr("ng-model-options")&&(u.$options.updateOn="",u.$options.updateOnDefault=!1)}},post:function(s,h,l,a){var d=[],g=r.type==="editor",k=f.getModel(c[i],l,s,d,r.observables,g),w=[],b=l[f.getDirectiveName(i)]||l.id,nt,p,v,y;if(r._tags&&r._tags.length&&(nt=r["ob.tags"]=f.loadTags(r["ob.tags"],r._tags),p=f.getTagValues(nt,h),p=f.iterateAndGetModel(p,w,s,""),delete p.$attr,t.copyObject(k,p)),u.requireFormatters&&a&&a.length&&a[0]&&(k._change=function(n){a[0].$setViewValue(n.value);a[0].$commitViewValue()}),v=n(h)[i](k).data(i),!b||b in s||(s[b]=v,v.scopeId=b),f.addWatches(s,d,v,f.raise),w.length&&(f.addWatches(s,w,v,f.childRaise),f.addChildTwoway(v,w,s)),a&&a.length&&a[0]){y=a[0];y.$setViewValue(h.val());y.$commitViewValue();y.$setPristine(!0);u.requireFormatters&&y.$formatters.push(function(){return v.element.val()});h.on(i+"_change",function(t){if(t.source!=="source"){var i=n(t.target);y.$setViewValue(t.value);y.$modelValue=t.model.value;y.$commitViewValue();f.applyScope(angular.element(t.target).scope())}})}g&&f.modelChange.apply(v,[s,l.eValue]);"tmpl.$newscope"in v&&f.refreshTemplate(h,e,v["tmpl.$newscope"]);v.element.on(i+"refresh",function(){"tmpl.$newscope"in v&&f.refreshTemplate(h,e,v["tmpl.$newscope"])});s.$on("$destroy",function(){t.angularMobileSettings&&t.angularMobileSettings.enableAnimation?o(function(){f.destroyWidget(v)},t.angularMobileSettings.animationTime):f.destroyWidget(v)})}}}},u)}])};o.directive("ejTemplate",["$compile",function(n){return{restrict:"EA",priority:999,terminal:!0,link:function(t,i,r){var u=t.$parent.$new(!0);t.ejObject&&(u.ejId=t.ejId,u.ejObject=t.ejObject,u.items=t.items,u.model=t.model,u.data=t.items[r.ejProp],n(i.children(),t)(u),t.$parent.$$phase||u.$digest())}}}]);c={};e=i.registeredWidgets;for(l in e)h(e[l].name,e[l].proto);t.widget.extensions={registerWidget:function(n){h(n,e[n].proto)}};Array.prototype.map=Array.prototype.map||function(n,t){for(var i=[],r=0;r<this.length;)i.push(n.call(t,this[r++]));return i};t.template["text/ng-template"]=function(i,r,u,f){var h=angular.element(i.element[0]),e,s,o=i["tmpl.$newscope"];return o&&o[r]||(o=o||{},o[r]={scope:h.scope().$new(!0),key:t.getGuid("tmpl")},e=o[r].scope,e.model=i.model,e.ejId=i._id,e.ejObject=i,i["tmpl.$newscope"]=o),e=o[r].scope,t.isNullOrUndefined(f)?(f=1,e.items=[u]):(e.items||(e.items=[]),e.items[f]=u),s=r||"",s.startsWith("#")&&(s=n(s).html()),"<div ej-template ej-prop='"+f+"' class='"+o[r].key+" ej-angular-template'>"+s+"<\/div>"};t.template.render=t.template["text/ng-template"]})(window.jQuery,window.Syncfusion,window.Syncfusion.widget,window.angular)});
